(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-accc4560"],{"4e82":function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"productions page fixed-page"},[e("div",{staticClass:"level page-header"},[e("div",{staticClass:"level-left"},[e("page-title",{attrs:{text:t.$t("productions.title")}})],1),e("div",{staticClass:"level-right"},[e("div",{staticClass:"level-item"},[e("button-link",{staticClass:"level-item",attrs:{text:t.$t("productions.new_production"),icon:"plus",path:"/productions/new"}})],1)])]),e("production-list",{attrs:{entries:t.productions,"is-loading":t.isProductionsLoading,"is-error":t.isProductionsLoadingError}}),e("edit-production-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editProduction.isLoading,"is-error":t.editProduction.isError,"cancel-route":"/productions","production-to-edit":t.productionToEdit},on:{fileselected:t.onProductionPictureSelected,confirm:t.confirmEditProduction}}),e("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteProduction.isLoading,"is-error":t.deleteProduction.isError,"cancel-route":"/productions",text:t.deleteText(),"error-text":t.$t("productions.delete_error")},on:{confirm:t.confirmDeleteProduction}})],1)},s=[],n=(e("7f7f"),e("cebc")),r=e("2f62"),a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"data-list"},[e("div",{staticStyle:{overflow:"hidden"}},[e("table",{ref:"headerWrapper",staticClass:"table table-header"},[e("thead",[e("tr",[e("th",{staticClass:"project"},[t._v("Â ")]),e("th",{staticClass:"name"},[t._v(t._s(t.$t("productions.fields.name")))]),e("th",{staticClass:"type"},[t._v(t._s(t.$t("productions.fields.type")))]),e("th",{staticClass:"fps"},[t._v(t._s(t.$t("productions.fields.fps")))]),e("th",{staticClass:"ratio"},[t._v(t._s(t.$t("productions.fields.ratio")))]),e("th",{staticClass:"resolution"},[t._v(t._s(t.$t("productions.fields.resolution")))]),e("th",{staticClass:"actions"})])])])]),e("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),e("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[e("table",{staticClass:"table splitted-table"},[e("tbody",[e("tr",{staticClass:"type-header"},[e("td",{attrs:{colspan:"30"}},[t._v("\n            "+t._s(t.$t("productions.status.open"))+"\n          ")])]),t._l(t.openProductions,function(o){return e("tr",{key:o.id},[e("production-name-cell",{staticClass:"project",attrs:{"only-avatar":!0,entry:o,"last-production-screen":t.lastProductionScreen}}),e("production-name-cell",{staticClass:"name",attrs:{"with-avatar":!1,entry:o,"last-production-screen":t.lastProductionScreen}}),e("td",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("productions.type."+(o.production_type||"short")))+"\n          ")]),e("td",{staticClass:"fps"},[t._v("\n            "+t._s(o.fps)+"\n          ")]),e("td",{staticClass:"ratio"},[t._v("\n            "+t._s(o.ratio)+"\n          ")]),e("td",{staticClass:"resolution"},[t._v("\n            "+t._s(o.resolution)+"\n          ")]),e("row-actions",{attrs:{"entry-id":o.id,"edit-route":{name:"edit-production",params:{production_edit_id:o.id}},"delete-route":{name:"delete-production",params:{production_delete_id:o.id}}}})],1)})],2)]),t.closedProductions.length>0?e("table",{staticClass:"table splitted-table"},[e("tbody",[e("tr",{staticClass:"type-header"},[e("td",{attrs:{colspan:"30"}},[t._v("\n            "+t._s(t.$t("productions.status.closed"))+"\n          ")])]),t._l(t.closedProductions,function(o){return e("tr",{key:o.id},[e("production-name-cell",{staticClass:"project",attrs:{"only-avatar":!0,entry:o,"no-link":!0,"last-production-screen":t.lastProductionScreen}}),e("production-name-cell",{staticClass:"name",attrs:{"with-avatar":!1,entry:o,"no-link":!0,"last-production-screen":t.lastProductionScreen}}),e("td",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("productions.type."+(o.production_type||"short")))+"\n          ")]),e("td",{staticClass:"fps"},[t._v("\n            "+t._s(o.fps)+"\n          ")]),e("td",{staticClass:"ratio"},[t._v("\n            "+t._s(o.ratio)+"\n          ")]),e("td",{staticClass:"resolution"},[t._v("\n            "+t._s(o.resolution)+"\n          ")]),e("row-actions",{attrs:{"entry-id":o.id,"edit-route":{name:"edit-production",params:{production_edit_id:o.id}},"delete-route":{name:"delete-production",params:{production_delete_id:o.id}}}})],1)})],2)]):t._e()]),e("p",{staticClass:"has-text-centered nb-productions"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("productions.number",t.entries.length))+"\n  ")])],1)},d=[],c=(e("ac6a"),e("09a4")),l=e("03b1"),u=e("e60b"),p={name:"production-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{ProductionNameCell:c["a"],RowActions:l["a"],TableInfo:u["a"]},computed:Object(n["a"])({},Object(r["c"])(["openProductions","lastProductionScreen"]),{closedProductions:function(){return this.entries.filter(function(t){return"Closed"===t.project_status_name})}}),methods:Object(n["a"])({},Object(r["b"])([]),{getStatusLocale:function(t){var o={Active:"productions.status.open",Open:"productions.status.open",Closed:"productions.status.closed"};return o[t]},onBodyScroll:function(t,o){this.$refs.headerWrapper.style.left="-".concat(o.scrollLeft,"px")}})},h=p,f=(e("5f3c"),e("2877")),_=Object(f["a"])(h,a,d,!1,null,"52f4cd88",null),m=_.exports,v=e("1d3d"),P=e("5f48"),y=e("e211"),b=e("8d07"),C={name:"productions",components:{ButtonLink:y["a"],DeleteModal:P["a"],EditProductionModal:v["a"],PageTitle:b["a"],ProductionList:m},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},productionToDelete:null,productionToEdit:null,choices:[]}},computed:Object(n["a"])({},Object(r["c"])(["deleteProduction","editProduction","getProduction","isProductionsLoading","isProductionsLoadingError","productionAvatarFormData","productions"])),created:function(){var t=this;this.loadProductions(function(o){o||t.handleModalsDisplay()})},methods:Object(n["a"])({},Object(r["b"])(["loadProductions","storeProductionPicture","uploadProductionAvatar"]),{confirmEditProduction:function(t){var o=this,e="newProduction",i=this.productionToEdit&&this.productionToEdit.id;this.productionToEdit&&this.productionToEdit.id&&(e="editProduction",t.id=this.productionToEdit.id),this.$store.dispatch(e,{data:t,callback:function(e){e||(i&&o.productionAvatarFormData?o.uploadProductionAvatar(t.id).then(function(){o.modals.isNewDisplayed=!1,o.$router.push("/productions")}):(o.modals.isNewDisplayed=!1,o.$router.push("/productions")))}})},confirmDeleteProduction:function(){var t=this;this.$store.dispatch("deleteProduction",{production:this.productionToDelete,callback:function(o){o||(t.modals.isDeleteDisplayed=!1)}})},deleteText:function(){var t=this.productionToDelete;return t?this.$t("productions.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path;if(t.indexOf("new")>0)this.productionToEdit={},this.modals.isNewDisplayed=!0;else if(t.indexOf("edit")>0){var o=this.$store.state.route.params.production_edit_id;this.productionToEdit=this.getProduction(o),this.modals.isNewDisplayed=!0}else if(t.indexOf("delete")>0){var e=this.$store.state.route.params.production_delete_id;this.productionToDelete=this.getProduction(e),this.modals.isDeleteDisplayed=!0}else this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1},onProductionPictureSelected:function(t){this.storeProductionPicture(t)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("productions.title")," - Kitsu")}}},D=C,$=Object(f["a"])(D,i,s,!1,null,"48fa6aa2",null);o["default"]=$.exports},"5f3c":function(t,o,e){"use strict";var i=e("a950"),s=e.n(i);s.a},a950:function(t,o,e){}}]);
//# sourceMappingURL=chunk-accc4560.39eeb4de.js.map