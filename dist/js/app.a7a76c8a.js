(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],u=0,p=[];u<r.length;u++)o=r[u],n[o]&&p.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},n={0:0},a=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;a.push([0,1]),s()})({"+1AC":function(t,e,s){"use strict";var i=s("FCqG"),n=s.n(i);n.a},"+Xq3":function(t,e,s){},"+ZbS":function(t,e,s){"use strict";var i=s("vI2N"),n=s.n(i);n.a},"+fww":function(t,e,s){"use strict";var i=s("921J"),n=s.n(i);n.a},"+nik":function(t,e,s){"use strict";var i=s("Rdse"),n=s.n(i);n.a},"+t0i":function(t,e,s){},"/Zew":function(t,e,s){},"/vKN":function(t,e,s){},0:function(t,e,s){t.exports=s("Vtdi")},"0+vu":function(t,e,s){"use strict";var i=s("gXnD"),n=s.n(i);n.a},"16/b":function(t,e,s){},"1aax":function(t,e,s){"use strict";var i=s("jsZP"),n=s.n(i);n.a},"1c8I":function(t,e,s){},"2vD2":function(t,e,s){t.exports=s.p+"img/edit.a7e99a4f.svg"},"3GwI":function(t,e,s){"use strict";var i=s("1c8I"),n=s.n(i);n.a},"3OWx":function(t,e,s){"use strict";var i=s("OMvY"),n=s.n(i);n.a},"3jRn":function(t,e,s){"use strict";var i=s("8u9b"),n=s.n(i);n.a},"3tPu":function(t,e,s){},"41gE":function(t,e,s){"use strict";var i=s("TiKG"),n=s.n(i);n.a},"4vxP":function(t,e,s){},"54MY":function(t,e,s){"use strict";var i=s("qRnS"),n=s.n(i);n.a},"5Qes":function(t,e,s){"use strict";var i=s("4vxP"),n=s.n(i);n.a},"5V6c":function(t,e,s){},"5foV":function(t,e,s){"use strict";var i=s("VYbS"),n=s.n(i);n.a},"5nRj":function(t,e,s){},"6BuR":function(t,e,s){},"6TPf":function(t,e,s){"use strict";var i=s("k9Lx"),n=s.n(i);n.a},"6ZfU":function(t,e,s){"use strict";var i=s("SFoK"),n=s.n(i);n.a},"6iGl":function(t,e,s){"use strict";var i=s("UsTB"),n=s.n(i);n.a},"7kHw":function(t,e,s){"use strict";var i=s("7lL5"),n=s.n(i);n.a},"7lL5":function(t,e,s){},"7xeG":function(t,e,s){},"8qzT":function(t,e,s){},"8u9b":function(t,e,s){},"921J":function(t,e,s){},"9Sx9":function(t,e,s){"use strict";var i=s("cINU"),n=s.n(i);n.a},AFTZ:function(t,e,s){},AIKe:function(t,e,s){"use strict";var i=s("zZWI"),n=s.n(i);n.a},"ASQ+":function(t,e,s){},"AZ/N":function(t,e,s){},B3f8:function(t,e,s){"use strict";var i=s("uIdQ"),n=s.n(i);n.a},BZg5:function(t,e,s){"use strict";var i=s("EQT/"),n=s.n(i);n.a},Bm3X:function(t,e,s){"use strict";var i=s("kg5f"),n=s.n(i);n.a},BuwV:function(t,e,s){},CEME:function(t,e,s){"use strict";var i=s("xCUs"),n=s.n(i);n.a},Cdpr:function(t,e,s){},CqNZ:function(t,e,s){"use strict";var i=s("6BuR"),n=s.n(i);n.a},D063:function(t,e,s){"use strict";var i=s("7xeG"),n=s.n(i);n.a},DNCI:function(t,e,s){},DqPd:function(t,e,s){"use strict";var i=s("be1Q"),n=s.n(i);n.a},Dsq0:function(t,e,s){"use strict";var i=s("f5wB"),n=s.n(i);n.a},EMWW:function(t,e,s){"use strict";var i=s("xyux"),n=s.n(i);n.a},"EQT/":function(t,e,s){},EXCj:function(t,e,s){},FCqG:function(t,e,s){},FLx2:function(t,e,s){"use strict";var i=s("+t0i"),n=s.n(i);n.a},Fekk:function(t,e,s){"use strict";var i=s("8qzT"),n=s.n(i);n.a},FrkF:function(t,e,s){},Fsx0:function(t,e,s){"use strict";var i=s("L72D"),n=s.n(i);n.a},FxGF:function(t,e,s){"use strict";var i=s("weKJ"),n=s.n(i);n.a},"G/MX":function(t,e,s){"use strict";var i=s("H2tk"),n=s.n(i);n.a},G4fB:function(t,e,s){"use strict";var i=s("tHBb"),n=s.n(i);n.a},GIBM:function(t,e,s){},GJE0:function(t,e,s){"use strict";var i=s("Qk6S"),n=s.n(i);n.a},Gjl3:function(t,e,s){},Gtj5:function(t,e,s){},H2tk:function(t,e,s){},HWXe:function(t,e,s){"use strict";var i=s("wVw7"),n=s.n(i);n.a},Hmap:function(t,e,s){"use strict";var i=s("eXhF"),n=s.n(i);n.a},I9o0:function(t,e,s){"use strict";var i=s("L82Y"),n=s.n(i);n.a},IHvo:function(t,e,s){},JEOo:function(t,e,s){"use strict";var i=s("YqFY"),n=s.n(i);n.a},JMeF:function(t,e,s){"use strict";var i=s("Gjl3"),n=s.n(i);n.a},JRn6:function(t,e,s){"use strict";var i=s("5nRj"),n=s.n(i);n.a},JbrC:function(t,e,s){"use strict";var i=s("Oyjt"),n=s.n(i);n.a},JpJI:function(t,e,s){"use strict";var i=s("iObh"),n=s.n(i);n.a},Jx8K:function(t,e,s){},L2wQ:function(t,e,s){},L72D:function(t,e,s){},L82Y:function(t,e,s){},LIwf:function(t,e,s){"use strict";var i=s("wnX+"),n=s.n(i);n.a},LO6f:function(t,e,s){},LUWt:function(t,e,s){"use strict";var i=s("PXYo"),n=s.n(i);n.a},MgO2:function(t,e,s){"use strict";var i=s("TuBw"),n=s.n(i);n.a},MkTS:function(t,e,s){"use strict";var i=s("tkbs"),n=s.n(i);n.a},NDFw:function(t,e,s){"use strict";var i=s("Gtj5"),n=s.n(i);n.a},NIPG:function(t,e,s){},NVUn:function(t,e,s){"use strict";var i=s("LO6f"),n=s.n(i);n.a},OMvY:function(t,e,s){},Oyjt:function(t,e,s){},P4DR:function(t,e,s){"use strict";var i=s("ASQ+"),n=s.n(i);n.a},PXYo:function(t,e,s){},"QfO/":function(t,e,s){},Qk6S:function(t,e,s){},QlM1:function(t,e,s){"use strict";var i=s("aRwt"),n=s.n(i);n.a},QqxS:function(t,e,s){"use strict";var i=s("bSd+"),n=s.n(i);n.a},QzB2:function(t,e,s){"use strict";var i=s("y4sQ"),n=s.n(i);n.a},RHhy:function(t,e,s){"use strict";var i=s("mW+O"),n=s.n(i);n.a},"RU+V":function(t,e,s){"use strict";var i=s("uNzf"),n=s.n(i);n.a},Rd9x:function(t,e,s){},Rdse:function(t,e,s){},RnhZ:function(t,e,s){var i={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function n(t){var e=a(t);return s(e)}function a(t){var e=i[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}n.keys=function(){return Object.keys(i)},n.resolve=a,t.exports=n,n.id="RnhZ"},S9A6:function(t,e,s){"use strict";var i=s("elin"),n=s.n(i);n.a},SFoK:function(t,e,s){},SV2C:function(t,e,s){"use strict";var i=s("snJT"),n=s.n(i);n.a},TiKG:function(t,e,s){},TuBw:function(t,e,s){},Ubvj:function(t,e,s){},UsTB:function(t,e,s){},VYbS:function(t,e,s){},Vtdi:function(t,e,s){"use strict";s.r(e);var i={};s.r(i),s.d(i,"route",function(){return O});s("yt8O"),s("VRzm");var n,a,o,r,c,l,d,u,p,m,h,f,_,v,y,g=s("ukxx"),k=s.n(g),b=s("Mb3Q"),T=s("jE9Z"),S=s("24Ii"),C=s.n(S),E=s("L2JU"),O=function(t){return t.route},A=s("oyJW"),w=(s("INYr"),s("91GP"),s("rGqo"),s("dRSK"),s("f3/d"),s("Vd3H"),{get:function(t,e){C.a.get(t).end(function(t,s){e(t,s.body)})},post:function(t,e,s){C.a.post(t).send(e).end(function(t,e){s(t,e.body)})},put:function(t,e,s){C.a.put(t).send(e).end(function(t,e){s(t,e.body)})},del:function(t,e){C.a.del(t).end(function(t,s){e(t,s.body)})}}),P=w,x={getAssetTypes:function(t){P.get("/api/data/asset-types",t)},newAssetType:function(t,e){var s={name:t.name};P.post("/api/data/entity-types",s,e)},updateAssetType:function(t,e){var s={name:t.name};P.put("/api/data/entity-types/".concat(t.id),s,e)},deleteAssetType:function(t,e){P.del("/api/data/entity-types/".concat(t.id),e)}},j="TOGGLE_SIDEBAR",L="TOGGLE_USER_MENU",D="SET_LAST_PRODUCTION_SCREEN",I="LOAD_PEOPLE_START",$="LOAD_PEOPLE_END",M="LOAD_PEOPLE_ERROR",q="NEW_PEOPLE_END",R="SHOW_IMPORT_PEOPLE_MODAL",N="HIDE_IMPORT_PEOPLE_MODAL",F="PERSON_CSV_FILE_SELECTED",U="IMPORT_PEOPLE_START",B="IMPORT_PEOPLE_END",V="IMPORT_PEOPLE_ERROR",G="DELETE_PEOPLE_START",W="DELETE_PEOPLE_END",z="DELETE_PEOPLE_ERROR",K="SHOW_DELETE_PEOPLE_MODAL",H="HIDE_DELETE_PEOPLE_MODAL",Q="EDIT_PEOPLE_START",Y="EDIT_PEOPLE_END",X="EDIT_PEOPLE_ERROR",Z="SHOW_EDIT_PEOPLE_MODAL",J="HIDE_EDIT_PEOPLE_MODAL",tt="LOAD_PERSON_TASKS_END",et="LOAD_PERSON_DONE_TASKS_END",st="SET_PERSON_TASKS_SEARCH",it="SAVE_PERSON_TASKS_SEARCH_END",nt="REMOVE_PERSON_TASKS_SEARCH_END",at="SET_TIME_SPENSET_TIME_SPENT",ot="PEOPLE_TIMESHEET_LOADED",rt="PERSON_LOAD_TIME_SPENTS_END",ct="SET_PERSON_TASKS_SCROLL_POSITION",lt="USER_SAVE_PROFILE_LOADING",dt="USER_SAVE_PROFILE_ERROR",ut="USER_SAVE_PROFILE_SUCCESS",pt="CHANGE_AVATAR_FILE",mt="UPLOAD_AVATAR_END",ht="USER_CHANGE_PASSWORD_LOADING",ft="USER_CHANGE_PASSWORD_ERROR",_t="USER_CHANGE_PASSWORD_SUCCESS",vt="USER_CHANGE_PASSWORD_UNVALID",yt="USER_LOAD_TODOS_END",gt="USER_LOAD_TODOS_START",kt="USER_LOAD_TODOS_ERROR",bt="USER_LOAD_DONE_TASKS_END",Tt="USER_LOAD_TIME_SPENTS_END",St="SET_TODOS_SEARCH",Ct="LOAD_USER_FILTERS_END",Et="LOAD_USER_FILTERS_ERROR",Ot="SET_TODO_LIST_SCROLL_POSITION",At="LOAD_TASK_END",wt="NEW_TASK_COMMENT_END",Pt="NEW_TASK_END",xt="LOAD_TASK_COMMENTS_END",jt="CREATE_TASKS_END",Lt="DELETE_TASK_END",Dt="EDIT_COMMENT_END",It="DELETE_COMMENT_END",$t="PREVIEW_FILE_SELECTED",Mt="ADD_PREVIEW_END",qt="CHANGE_PREVIEW_END",Rt="ADD_SELECTED_TASK",Nt="REMOVE_SELECTED_TASK",Ft="CLEAR_SELECTED_TASKS",Ut="ASSIGN_TASKS",Bt="UNASSIGN_TASKS",Vt="LOAD_PRODUCTIONS_START",Gt="LOAD_PRODUCTIONS_END",Wt="LOAD_PRODUCTIONS_ERROR",zt="LOAD_OPEN_PRODUCTIONS_START",Kt="LOAD_OPEN_PRODUCTIONS_END",Ht="LOAD_OPEN_PRODUCTIONS_ERROR",Qt="LOAD_PRODUCTION_STATUS_START",Yt="LOAD_PRODUCTION_STATUS_END",Xt="LOAD_PRODUCTION_STATUS_ERROR",Zt="EDIT_PRODUCTION_START",Jt="EDIT_PRODUCTION_END",te="EDIT_PRODUCTION_ERROR",ee="DELETE_PRODUCTION_START",se="DELETE_PRODUCTION_END",ie="DELETE_PRODUCTION_ERROR",ne="SET_CURRENT_PRODUCTION",ae="PRODUCTION_PICTURE_FILE_SELECTED",oe="PRODUCTION_AVATAR_UPLOADED",re="LOAD_TASK_TYPES_START",ce="LOAD_TASK_TYPES_END",le="LOAD_TASK_TYPES_ERROR",de="EDIT_TASK_TYPE_START",ue="EDIT_TASK_TYPE_END",pe="EDIT_TASK_TYPE_ERROR",me="DELETE_TASK_TYPE_START",he="DELETE_TASK_TYPE_END",fe="DELETE_TASK_TYPE_ERROR",_e="LOAD_TASK_STATUSES_START",ve="LOAD_TASK_STATUSES_END",ye="LOAD_TASK_STATUSES_ERROR",ge="EDIT_TASK_STATUS_START",ke="EDIT_TASK_STATUS_END",be="EDIT_TASK_STATUS_ERROR",Te="DELETE_TASK_STATUS_START",Se="DELETE_TASK_STATUS_END",Ce="DELETE_TASK_STATUS_ERROR",Ee="LOAD_CUSTOM_ACTIONS_START",Oe="LOAD_CUSTOM_ACTIONS_END",Ae="LOAD_CUSTOM_ACTIONS_ERROR",we="EDIT_CUSTOM_ACTION_START",Pe="EDIT_CUSTOM_ACTION_END",xe="EDIT_CUSTOM_ACTION_ERROR",je="DELETE_CUSTOM_ACTION_START",Le="DELETE_CUSTOM_ACTION_END",De="DELETE_CUSTOM_ACTION_ERROR",Ie="LOAD_ASSET_TYPES_START",$e="LOAD_ASSET_TYPES_END",Me="LOAD_ASSET_TYPES_ERROR",qe="EDIT_ASSET_TYPE_START",Re="EDIT_ASSET_TYPE_END",Ne="EDIT_ASSET_TYPE_ERROR",Fe="DELETE_ASSET_TYPE_START",Ue="DELETE_ASSET_TYPE_END",Be="DELETE_ASSET_TYPE_ERROR",Ve="SET_ASSET_LIST_SCROLL_POSITION",Ge="SET_PRODUCTION_ASSET_TYPE_LIST_SCROLL_POSITION",We="LOAD_ASSETS_START",ze="LOAD_ASSETS_END",Ke="LOAD_ASSETS_ERROR",He="LOAD_ASSET_END",Qe="LOAD_ASSET_CAST_IN_END",Ye="ASSET_CSV_FILE_SELECTED",Xe="IMPORT_ASSETS_START",Ze="IMPORT_ASSETS_END",Je="EDIT_ASSET_START",ts="EDIT_ASSET_END",es="EDIT_ASSET_ERROR",ss="DELETE_ASSET_START",is="DELETE_ASSET_END",ns="DELETE_ASSET_ERROR",as="RESTORE_ASSET_START",os="RESTORE_ASSET_END",rs="RESTORE_ASSET_ERROR",cs="SET_ASSET_SEARCH",ls="SAVE_ASSET_SEARCH_END",ds="REMOVE_ASSET_SEARCH_END",us="DISPLAY_MORE_ASSETS",ps="COMPUTE_ASSET_TYPE_STATS",ms="SET_ASSET_TYPE_SEARCH",hs="LOAD_SHOTS_START",fs="LOAD_SHOTS_END",_s="LOAD_SHOTS_ERROR",vs="LOAD_SEQUENCES_END",ys="LOAD_EPISODES_END",gs="LOAD_SHOT_END",ks="LOAD_SHOT_CASTING_END",bs="SHOT_CSV_FILE_SELECTED",Ts="IMPORT_SHOTS_START",Ss="IMPORT_SHOTS_END",Cs="EDIT_SHOT_START",Es="EDIT_SHOT_END",Os="EDIT_SHOT_ERROR",As="EDIT_SEQUENCE_START",ws="EDIT_SEQUENCE_END",Ps="EDIT_SEQUENCE_ERROR",xs="EDIT_EPISODE_START",js="EDIT_EPISODE_END",Ls="EDIT_EPISODE_ERROR",Ds="NEW_SHOT_START",Is="NEW_SHOT_END",$s="NEW_SHOT_ERROR",Ms="NEW_SEQUENCE_START",qs="NEW_SEQUENCE_END",Rs="NEW_SEQUENCE_ERROR",Ns="NEW_EPISODE_START",Fs="NEW_EPISODE_END",Us="NEW_EPISODE_ERROR",Bs="DELETE_SHOT_START",Vs="DELETE_SHOT_END",Gs="DELETE_SHOT_ERROR",Ws="DELETE_SEQUENCE_START",zs="DELETE_SEQUENCE_END",Ks="DELETE_SEQUENCE_ERROR",Hs="DELETE_EPISODE_START",Qs="DELETE_EPISODE_END",Ys="DELETE_EPISODE_ERROR",Xs="RESTORE_SHOT_START",Zs="RESTORE_SHOT_END",Js="RESTORE_SHOT_ERROR",ti="SET_SHOT_SEARCH",ei="SAVE_SHOT_SEARCH_END",si="REMOVE_SHOT_SEARCH_END",ii="SET_SEQUENCE_SEARCH",ni="SET_EPISODE_SEARCH",ai="DISPLAY_MORE_SHOTS",oi="DISPLAY_MORE_SEQUENCES",ri="DISPLAY_MORE_EPISODES",ci="SET_SHOT_LIST_SCROLL_POSITION",li="SET_SEQUENCE_LIST_SCROLL_POSITION",di="SET_EPISODE_LIST_SCROLL_POSITION",ui="COMPUTE_SEQUENCE_STATS",pi="COMPUTE_EPISODE_STATS",mi="CHANGE_EMAIL",hi="CHANGE_PASSWORD",fi="LOGIN_RUN",_i="LOGIN_SUCCESS",vi="LOGIN_FAILURE",yi="LOGOUT_SUCCESS",gi="LOGOUT_FAILURE",ki="USER_LOGIN",bi="USER_LOGOUT",Ti="USER_LOGIN_FAIL",Si="SAVE_TODO_SEARCH_END",Ci="REMOVE_TODO_SEARCH_END",Ei="CASTING_SET_SHOT",Oi="CASTING_SET_SEQUENCE",Ai="CASTING_SET_EPISODE",wi="CASTING_SET_CASTING",Pi="CASTING_SET_SHOTS",xi="CASTING_SET_SEQUENCES",ji="CASTING_SET_ISDIRTY",Li="CASTING_ADD_TO_CASTING",Di="CASTING_REMOVE_FROM_CASTING",Ii="LOAD_PLAYLISTS_START",$i="LOAD_PLAYLISTS_END",Mi="LOAD_PLAYLISTS_ERROR",qi="LOAD_PLAYLIST_START",Ri="LOAD_PLAYLIST_END",Ni="LOAD_PLAYLIST_ERROR",Fi="EDIT_PLAYLIST_START",Ui="EDIT_PLAYLIST_END",Bi="EDIT_PLAYLIST_ERROR",Vi="DELETE_PLAYLIST_START",Gi="DELETE_PLAYLIST_END",Wi="DELETE_PLAYLIST_ERROR",zi="ADD_SHOT_TO_PLAYLIST",Ki="REMOVE_SHOT_FROM_PLAYLIST",Hi="CHANGE_PLAYLIST_PREVIEW",Qi="LOAD_SHOT_PREVIEW_FILES_END",Yi="LOAD_NOTIFICATIONS_END",Xi="LOAD_NOTIFICATION_END",Zi="MARK_ALL_NOTIFICATIONS_AS_READ",Ji="NOTIFICATION_ADD_PREVIEW",tn="LOAD_TASK_SUBSCRIBE_END",en="LOAD_SEQUENCE_SUBSCRIBE_END",sn="LOAD_SEQUENCE_SUBSCRIPTION_END",nn="SET_PREVIEW",an="SET_IS_SHOW_ASSIGNATIONS",on="RESET_ALL",rn=function(t){return t.sort(function(t,e){return t.name.localeCompare(e.name)})},cn={assetTypes:[],assetTypeMap:{},isAssetTypesLoading:!1,isAssetTypesLoadingError:!1,editAssetType:{isLoading:!1,isError:!1},deleteAssetType:{isLoading:!1,isError:!1}},ln={assetTypes:function(t){return t.assetTypes},assetTypeMap:function(t){return t.assetTypeMap},isAssetTypesLoading:function(t){return t.isAssetTypesLoading},isAssetTypesLoadingError:function(t){return t.isAssetTypesLoadingError},editAssetType:function(t){return t.editAssetType},deleteAssetType:function(t){return t.deleteAssetType},getAssetType:function(t,e){return function(e){return t.assetTypes.find(function(t){return t.id===e})}},getAssetTypeOptions:function(t){return t.assetTypes.map(function(t){return{label:t.name,value:t.id}})}},dn={loadAssetTypes:function(t,e){var s=t.commit;t.state;s(Ie),x.getAssetTypes(function(t,i){t?s(Me):s($e,i),e&&e(t)})},newAssetType:function(t,e){var s=t.commit;t.state;s(qe,e.data),x.newAssetType(e.data,function(t,i){t?s(Ne):s(Re,i),e.callback&&e.callback(t)})},editAssetType:function(t,e){var s=t.commit;t.state;s(qe),x.updateAssetType(e.data,function(t,i){t?s(Ne):s(Re,i),e.callback&&e.callback(t)})},deleteAssetType:function(t,e){var s=t.commit;t.state;s(Fe);var i=e.assetType;x.deleteAssetType(i,function(t){t?s(Be):s(Ue,i),e.callback&&e.callback(t)})}},un=(n={},Object(A["a"])(n,Ie,function(t){t.isAssetTypesLoading=!0,t.isAssetTypesLoadingError=!1}),Object(A["a"])(n,Me,function(t){t.isAssetTypesLoading=!1,t.isAssetTypesLoadingError=!0}),Object(A["a"])(n,$e,function(t,e){t.isAssetTypesLoading=!1,t.isAssetTypesLoadingError=!1,t.assetTypes=e,t.assetTypes=rn(t.assetTypes),t.assetTypeMap={},t.assetTypes.forEach(function(e){t.assetTypeMap[e.id]=e})}),Object(A["a"])(n,qe,function(t,e){t.editAssetType.isLoading=!0,t.editAssetType.isError=!1}),Object(A["a"])(n,Ne,function(t){t.editAssetType.isLoading=!1,t.editAssetType.isError=!0}),Object(A["a"])(n,Re,function(t,e){var s=ln.getAssetType(t)(e.id);s&&s.id?Object.assign(s,e):(t.assetTypes.push(e),t.assetTypes=rn(t.assetTypes)),t.editAssetType={isLoading:!1,isError:!1}}),Object(A["a"])(n,Fe,function(t){t.deleteAssetType={isLoading:!0,isError:!1}}),Object(A["a"])(n,Be,function(t){t.deleteAssetType={isLoading:!1,isError:!0}}),Object(A["a"])(n,Ue,function(t,e){var s=t.assetTypes.findIndex(function(t){return t.id===e.id});t.assetTypes.splice(s,1),t.deleteAssetType={isLoading:!1,isError:!1}}),Object(A["a"])(n,on,function(t){t.assetTypes=[],t.isAssetTypesLoading=!1,t.isAssetTypesLoadingError=!1,t.editAssetType={isLoading:!1,isError:!1},t.deleteAssetType={isLoading:!1,isError:!1}}),n),pn={state:cn,getters:ln,actions:dn,mutations:un},mn=(s("RW0V"),s("hhXQ"),s("yT7P")),hn=(s("a1Th"),{getAssets:function(t,e){var s="/api/data/assets/with-tasks";t&&(s+="?project_id=".concat(t.id)),P.get(s,e)},getAsset:function(t,e){var s="/api/data/assets/".concat(t);P.get(s,e)},getCastIn:function(t,e){P.get("/api/data/assets/".concat(t.id,"/cast-in"),e)},newAsset:function(t,e){var s={name:t.name,description:t.description,entity_type_id:t.entity_type_id,project_id:t.project_id};P.post("/api/data/entities/",s,e)},updateAsset:function(t,e){var s={name:t.name,description:t.description,entity_type_id:t.entity_type_id,project_id:t.project_id};P.put("/api/data/entities/".concat(t.id),s,e)},deleteAsset:function(t,e){P.del("/api/data/assets/".concat(t.id),e)},restoreAsset:function(t,e){var s={canceled:!1};P.put("/api/data/entities/".concat(t.id),s,e)},postCsv:function(t,e,s){P.post("/api/import/csv/projects/".concat(t.id,"/assets"),e,s)}}),fn={getPeople:function(t){P.get("/api/data/persons",t)},newPerson:function(t,e){var s={first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone,role:t.role,active:t.active};P.post("/api/data/persons/new",s,e)},updatePerson:function(t,e){var s={first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone,timezone:t.timezone,locale:t.locale,role:t.role,active:t.active};P.put("/api/data/persons/".concat(t.id),s,e)},deletePerson:function(t,e){P.del("/api/data/persons/".concat(t),e)},postCsv:function(t,e){P.post("/api/import/csv/persons",t,e)},postAvatar:function(t,e,s){P.post("/api/pictures/thumbnails/persons/".concat(t),e,s)},changePassword:function(t,e){var s={old_password:t.oldPassword,password:t.password,password_2:t.password2};P.post("/api/auth/change-password",s,e)},loadTodos:function(t){P.get("/api/data/user/tasks",t)},loadDone:function(t){P.get("/api/data/user/done-tasks",t)},loadTimeSpents:function(t,e){P.get("/api/data/user/time-spents/".concat(t),e)},getPersonTasks:function(t,e){P.get("/api/data/persons/".concat(t,"/tasks"),e)},getPersonDoneTasks:function(t,e){P.get("/api/data/persons/".concat(t,"/done-tasks"),e)},getUserSearchFilters:function(t){P.get("/api/data/user/filters",t)},createFilter:function(t,e,s,i,n){var a={list_type:t,name:e,query:s,project_id:i};P.post("/api/data/user/filters",a,n)},removeFilter:function(t,e){P.del("/api/data/user/filters/".concat(t.id),e)},getTimeSpents:function(t,e,s){P.get("/api/data/persons/".concat(t,"/time-spents/").concat(e),s)},setTimeSpent:function(t,e,s,i,n){var a={duration:60*i};P.post("/api/actions/tasks/".concat(t,"/time-spents/").concat(s,"/persons/").concat(e),a,n)},getDayTable:function(t,e){return new Promise(function(s,i){P.get("/api/data/persons/time-spents/day-table/".concat(t,"/").concat(e),function(t,e){t?i(t):s(e)})})},getWeekTable:function(t){return new Promise(function(e,s){P.get("/api/data/persons/time-spents/week-table/".concat(t),function(t,i){t?s(t):e(i)})})},getMonthTable:function(t){return new Promise(function(e,s){P.get("/api/data/persons/time-spents/month-table/".concat(t),function(t,i){t?s(t):e(i)})})}},_n=s("iv4g"),vn=(s("Z2Ku"),s("L9s1"),s("cfFl")),yn=s.n(vn),gn={getTask:function(t,e){P.get("/api/data/tasks/".concat(t,"/full"),e)},getTaskStatuses:function(t){P.get("/api/data/task-status",t)},getTaskSubscribed:function(t,e){P.get("/api/data/user/tasks/".concat(t,"/subscribed"),e)},subscribeToTask:function(t,e){P.post("/api/actions/user/tasks/".concat(t,"/subscribe"),{},e)},unsubscribeFromTask:function(t,e){P.del("/api/actions/user/tasks/".concat(t,"/unsubscribe"),e)},subscribeToSequence:function(t,e,s){P.post("/api/actions/user/sequences/".concat(t,"/task-types/")+"".concat(e,"/subscribe"),{},s)},unsubscribeFromSequence:function(t,e,s){P.del("/api/actions/user/sequences/".concat(t,"/task-types/")+"".concat(e,"/unsubscribe"),s)},getTaskComments:function(t,e){P.get("/api/data/tasks/".concat(t,"/comments"),e)},getTaskPreviews:function(t,e){P.get("/api/data/tasks/".concat(t,"/previews"),e)},commentTask:function(t,e){var s={task_status_id:t.taskStatusId,comment:t.comment};P.post("/api/actions/tasks/".concat(t.taskId,"/comment"),s,e)},getTaskComment:function(t,e){P.get("/api/data/comments/".concat(t.id),e)},editTaskComment:function(t,e){var s={text:t.text};P.put("/api/data/comments/".concat(t.id),s,e)},deleteTaskComment:function(t,e,s){P.del("/api/data/tasks/".concat(t,"/comments/").concat(e),s)},createTasks:function(t,e){var s=t.task_type_id,i=t.type,n=t.project_id;P.post("/api/actions/task-types/".concat(s,"/").concat(i,"/create-tasks?project_id=").concat(n),{},e)},createTask:function(t,e){var s=t.entity_id,i=t.task_type_id,n=t.type,a=t.project_id;P.post("/api/actions/task-types/".concat(i,"/").concat(n,"/create-tasks?project_id=").concat(a,"&id=").concat(s),{},e)},deleteTask:function(t,e){P.del("/api/data/tasks/".concat(t.id),e)},addPreview:function(t,e){var s=t.taskId,i=t.commentId;P.post("/api/actions/tasks/".concat(s,"/comments/").concat(i,"/add-preview"),{is_movie:t.isMovie},e)},setPreview:function(t,e,s){P.put("/api/actions/entities/".concat(t,"/set-main-preview/").concat(e),{},s)},uploadPreview:function(t,e,s){P.post("/api/pictures/preview-files/".concat(t),e,s)},assignTasks:function(t,e,s){P.put("/api/actions/persons/".concat(t,"/assign"),{task_ids:e},s)},unassignTasks:function(t,e){P.put("/api/actions/tasks/clear-assignation",{task_ids:t},e)}},kn=s("zsrT"),bn=s.n(kn),Tn=function(t){return t.sort(bn()("canceled").thenBy(function(t,e){return t.asset_type_name.localeCompare(e.asset_type_name)}).thenBy(function(t,e){return t.name.localeCompare(e.name)}))},Sn=function(t){return t.sort(bn()("canceled").thenBy(function(t,e){return t.episode_name?t.episode_name.localeCompare(e.episode_name):0}).thenBy(function(t,e){return t.sequence_name.localeCompare(e.sequence_name)}).thenBy(function(t,e){return t.name.localeCompare(e.name)}))},Cn=function(t){return t.sort(function(t,e){return t.project_status_name===e.project_status_name?t.name.localeCompare(e.name):-1*t.project_status_name.localeCompare(e.project_status_name)})},En=function(t){return t.sort(bn()(function(t,e){return t.project_name.localeCompare(e.project_name)}).thenBy(function(t,e){return t.task_type_name.localeCompare(e.task_type_name)}).thenBy(function(t,e){return t.full_entity_name.localeCompare(e.full_entity_name)}))},On=function(t){return t.sort(bn()("for_shots").thenBy("priority").thenBy("name"))},An=function(t){return t.sort(bn()("created_at",-1).thenBy(function(t,e){return t.project_name.localeCompare(e.project_name)}).thenBy("name"))},wn=function(t){return t.sort(bn()("active",-1).thenBy(function(t,e){return t.first_name.localeCompare(e.first_name)}).thenBy(function(t,e){return t.last_name.localeCompare(e.last_name)}))},Pn=function(t){return t.sort(function(t,e){return t.name.localeCompare(e.name)})},xn=function(t){return t.sort(bn()("created_at",-1))},jn=function(t){return t.sort(function(t,e){return t.priority!==e.priority?t.priority>e.priority:t.name.localeCompare(e.name)})},Ln=s("RxB4"),Dn=s.n(Ln),In={fromString:function(t){var e=new Dn.a({lightness:.7,saturation:.8});return e.hex(t)},validationBackgroundColor:function(t){return t?"wtg"===t.task_status_short_name?"#f5f5f5":"ip"===t.task_status_short_name?"#3273dc":"pndng"===t.task_status_short_name?"#ab26ff":"fin"===t.task_status_short_name?"#22d160":"rtk"===t.task_status_short_name?"#ff3860":"cfrm"===t.task_status_short_name?"#f1c40f":"recd"===t.task_status_short_name?"#1abc9c":t.task_status_color:"#ffffff"},validationTextColor:function(t){return t&&"todo"!==t.task_status_short_name&&"wtg"!==t.task_status_short_name?"white":"#333"}},$n=(s("xfY5"),s("f0Wu")),Mn=s.n($n),qn=function(t){"Shot"===t.entity_type_name?(t.episode_name?t.full_entity_name="".concat(t.episode_name," / ").concat(t.sequence_name," / ").concat(t.entity_name):t.full_entity_name="".concat(t.sequence_name," / ").concat(t.entity_name),t.entity_path={name:"shot",params:{production_id:t.project_id,shot_id:t.entity_id}}):(t.full_entity_name="".concat(t.entity_type_name," / ").concat(t.entity_name),t.entity_path={name:"asset",params:{production_id:t.project_id,asset_id:t.entity_id}})},Rn=function(t,e){for(var s={},i=0;i<t;i++){s[i]||(s[i]={});for(var n=0;n<e;n++)s[i][n]=!1}return s},Nn=function(t){for(var e=Object.keys(t).length,s=t[0]?Object.keys(t[0]).length:0,i=0;i<e;i++)for(var n=0;n<s;n++)t[i][n]&&(t[i][n]=!1);return t},Fn=function(t,e){var s={};return t.forEach(function(t){var i=t[e];s[i]||(s[i]={}),t.tasks.forEach(function(t){var e=t.task_type_id,n=t.task_status_color;s[i][e]||(s[i][e]={}),s[i][e][n]||(s[i][e][n]={name:t.task_status_short_name,color:t.task_status_color,value:0}),s[i][e][n].value++})}),s},Un=function(t,e){return Object(_n["a"])(Array(e-t+1).keys()).map(function(e){return e+t})},Bn=function(t){var e=Mn()().year();return Mn()("".concat(e,"-").concat(t+1),"YYYY-M").format("MMM")},Vn=function(t,e,s){return Un(0,e===t?s:11)},Gn=function(t,e,s,i){if("".concat(s)===t&&"".concat(i)===e)return Un(1,Mn()().date());var n=Mn()("".concat(t,"-").concat(Number(e)+1),"YYYY-M");return Un(1,n.endOf("month").date())},Wn=function(t,e,s){return"".concat(e)===t?Un(1,s):Un(1,52)},zn=(s("rE2o"),s("ioFf"),s("T39b"),s("pIFo"),s("KKXr"),function(t){var e={},s={};return t.forEach(function(t){var i=t.name.split(" ");ea(e,s,t,i)}),e}),Kn=function(t){var e={},s={};return t.forEach(function(t){var i=t.full_entity_name.replace(/_/g," ").replace(/-/g," "),n=i.split(" ").concat([t.task_type_name,t.task_status_short_name,t.project_name]);ea(e,s,t,n)}),e},Hn=function(t){var e={},s={};return t.forEach(function(t){var i=t.name.replace(/_/g," ").replace(/-/g," "),n=t.asset_type_name.split(" "),a=i.split(" ").concat(n);ea(e,s,t,a)}),e},Qn=function(t){var e={},s={};return t.forEach(function(t){var i=[t.name,t.sequence_name,t.episode_name];ea(e,s,t,i)}),e},Yn=function(t){var e={},s={};return t.forEach(function(t){var i=[t.name,t.episode_name];ea(e,s,t,i)}),e},Xn=function(t){var e={},s={};return t.forEach(function(t){var i=[t.name];ea(e,s,t,i)}),e},Zn=function(t,e){if(0===e.length)return null;var s=/([^ ]*)=([^ ]*)|\[(.*)\]=([^ ]*)/;e=e.replace(s,"");var i=e.split(" "),n=i.map(function(e){return ta(t,e)}).filter(function(t){return null!==t});return n.length>0?n.reduce(Jn,Object(_n["a"])(n[0])):null},Jn=function(t,e){return t.filter(function(t){return e.has(t)})},ta=function(t,e){return e&&e.indexOf("=")<0?t[e.toLowerCase()]?new Set(t[e.toLowerCase()]):new Set([]):null},ea=function(t,e,s,i){var n=!0,a=!1,o=void 0;try{for(var r,c=i[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var l=r.value,d="",u=!0,p=!1,m=void 0;try{for(var h,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var _=h.value;d+=_.toLowerCase(),void 0===t[d]&&(t[d]=[],e[d]={}),e[d][s.id]||(t[d].push(s),e[d][s.id]=!0)}}catch(t){p=!0,m=t}finally{try{u||null==f.return||f.return()}finally{if(p)throw m}}}}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return t},sa=function(t){return{name:t.name,short_name:t.short_name,is_reviewable:Boolean("true"===t.is_reviewable),is_done:Boolean("true"===t.is_done),color:t.color}},ia={getTaskStatus:function(t){P.get("/api/data/task-status",t)},newTaskStatus:function(t,e){var s=sa(t);P.post("/api/data/task-status/",s,e)},updateTaskStatus:function(t,e){var s=sa(t);P.put("/api/data/task-status/".concat(t.id),s,e)},deleteTaskStatus:function(t,e){P.del("/api/data/task-status/".concat(t.id),e)}},na={taskStatus:[],taskStatusMap:{}},aa={taskStatus:function(t){return t.taskStatus},taskStatusMap:function(t){return t.taskStatusMap},editTaskStatus:function(t){return t.editTaskStatus},deleteTaskStatus:function(t){return t.deleteTaskStatus}},oa={loadTaskStatus:function(t,e){var s=t.commit;t.state;s(_e),ia.getTaskStatus(function(t,i){t?s(ye):s(ve,i),e&&e(t)})},newTaskStatus:function(t,e){var s=t.commit,i=(t.state,e.form),n=e.callback;s(ge,i),ia.newTaskStatus(i,function(t,e){t?s(be):s(ke,e),n&&n(t,e)})},saveTaskStatus:function(t,e){var s=t.commit,i=(t.state,e.form),n=e.callback;s(ge),ia.updateTaskStatus(i,function(t,e){t?s(be):s(ke,e),n&&n(t)})},deleteTaskStatus:function(t,e){var s=t.commit,i=(t.state,e.taskStatus),n=e.callback;s(Te),ia.deleteTaskStatus(i,function(t){t?s(Ce):s(Se,i),n&&n(t)})}},ra=(a={},Object(A["a"])(a,_e,function(t){t.taskStatus=[],t.taskStatusMap={}}),Object(A["a"])(a,ye,function(t){t.taskStatus=[],t.taskStatusMap={}}),Object(A["a"])(a,ve,function(t,e){t.taskStatus=Pn(e),t.taskStatusMap={},e.forEach(function(e){t.taskStatusMap[e.id]=e})}),Object(A["a"])(a,ge,function(t,e){}),Object(A["a"])(a,be,function(t){}),Object(A["a"])(a,ke,function(t,e){var s=t.taskStatusMap[e.id];s&&s.id?Object.assign(s,e):(t.taskStatus.push(e),t.taskStatus=Pn(t.taskStatus)),t.taskStatusMap[e.id]=e}),Object(A["a"])(a,Te,function(t){}),Object(A["a"])(a,Ce,function(t){}),Object(A["a"])(a,Se,function(t,e){var s=t.taskStatus.findIndex(function(t){return t.id===e.id});t.taskStatus.splice(s,1),delete t.taskStatusMap[e.id]}),Object(A["a"])(a,on,function(t){t.taskStatus=[],t.taskStatusMap={}}),a),ca={state:na,getters:aa,actions:oa,mutations:ra},la={addAdditionalInformation:function(t){if(t.first_name&&t.last_name?(t.name="".concat(t.first_name," ").concat(t.last_name),t.initials="".concat(t.first_name[0]).concat(t.last_name[0])):t.first_name?(t.name=t.first_name,t.initials=t.first_name[0]):t.last_name?(t.name=t.last_name,t.initials=t.last_name[0]):(t.name=t.email,t.initials=t.email[0]),t.initials=t.initials.toUpperCase(),t.color=In.fromString(t.name),t.has_avatar){var e=Math.random().toString(36).substring(7);t.avatarPath="/api/pictures/thumbnails/persons/".concat(t.id)+".png?unique=".concat(e)}return t},getTaskStatus:function(t){return ca.state.taskStatusMap[t]}},da={people:[],personMap:{},isPeopleLoading:!1,isPeopleLoadingError:!0,isImportPeopleModalShown:!1,isImportPeopleLoading:!1,isImportPeopleLoadingError:!1,isEditModalShown:!1,isEditLoading:!1,isEditLoadingError:!1,personToEdit:{role:"user"},isDeleteModalShown:!1,isDeleteLoading:!1,isDeleteLoadingError:!1,personToDelete:void 0,personCsvFormData:void 0,person:{},personTasks:[],displayedPersonTasks:[],displayedPersonDoneTasks:[],personTasksIndex:{},personTasksSearchText:"",personTaskSelectionGrid:{},personTaskSearchQueries:[],personTasksScrollPosition:0,timesheet:{},personTimeSpentMap:{},personTimeSpentTotal:0},ua=Object(mn["a"])({},da),pa={people:function(t){return t.people},personMap:function(t){return t.personMap},isPeopleLoading:function(t){return t.isPeopleLoading},isPeopleLoadingError:function(t){return t.isPeopleLoadingError},isImportPeopleModalShown:function(t){return t.isImportPeopleModalShown},isImportPeopleLoading:function(t){return t.isImportPeopleLoading},isImportPeopleLoadingError:function(t){return t.isImportPeopleLoadingError},isDeleteModalShown:function(t){return t.isDeleteModalShown},isDeleteLoading:function(t){return t.isDeleteLoading},isDeleteLoadingError:function(t){return t.isDeleteLoadingError},personToDelete:function(t){return t.personToDelete},isEditModalShown:function(t){return t.isEditModalShown},isEditLoading:function(t){return t.isEditLoading},isEditLoadingError:function(t){return t.isEditLoadingError},personToEdit:function(t){return t.personToEdit},personCsvFormData:function(t){return t.personCsvFormData},displayedPersonTasks:function(t){return t.displayedPersonTasks},displayedPersonDoneTasks:function(t){return t.displayedPersonDoneTasks},personTasksSearchText:function(t){return t.personTasksSearchText},personTaskSearchQueries:function(t){return t.personTaskSearchQueries},personTaskSelectionGrid:function(t){return t.personTaskSelectionGrid},personTasksScrollPosition:function(t){return t.personTasksScrollPosition},getPerson:function(t,e){return function(e){return t.personMap[e]}},getPersonOptions:function(t){return t.people.map(function(t){return{label:"".concat(t.first_name," ").concat(t.last_name),value:t.id}})},timesheet:function(t){return t.timesheet},personTimeSpentMap:function(t){return t.personTimeSpentMap},personTimeSpentTotal:function(t){return t.personTimeSpentTotal}},ma={loadPeople:function(t,e){var s=t.commit;t.state;s(I),fn.getPeople(function(t,i){t?s(M):s($,i.map(function(t){return t.departments=t.departments||"",t})),e&&e(t)})},newPeople:function(t,e){var s=t.commit,i=t.state;s(Q,e.data),fn.newPerson(i.personToEdit,function(t,i){t?s(X):(s(q,i.id),s(Y),s(J)),e.callback&&e.callback(t)})},editPeople:function(t,e){var s=t.commit,i=t.state;s(Q,e.data),fn.updatePerson(i.personToEdit,function(t,i){t?s(X):(s(Y),s(J)),e.callback&&e.callback(t)})},deletePeople:function(t,e){var s=t.commit,i=t.state;s(G),fn.deletePerson(i.personToDelete.id,function(t,i){t?s(z):(s(W),s(H)),e&&e(t)})},uploadPersonFile:function(t,e){var s=t.commit,i=t.state;s(U),fn.postCsv(i.personCsvFormData,function(t){t&&s(V),s(B),e&&e(t)})},loadPersonTasks:function(t,e){var s=t.commit,i=(t.state,t.rootGetters),n=e.personId,a=(e.forced,e.date),o=e.callback,r=i.userFilters;s(tt,{personId:n,tasks:[],userFilters:r}),s(et,[]),fn.getPersonTasks(n,function(t,e){t&&(e=[]),fn.getPersonDoneTasks(n,function(t,i){t&&(i=[]),s(et,i),fn.getTimeSpents(n,a,function(t,i){t&&(i=[]),s(rt,i),s(tt,{personId:n,tasks:e,userFilters:r}),o&&o(t)})})})},showPersonImportModal:function(t,e){var s=t.commit;t.state;s(R)},hidePersonImportModal:function(t,e){var s=t.commit;t.state;s(N)},showPersonEditModal:function(t,e){var s=t.commit;t.state;s(Z,e)},hidePersonEditModal:function(t,e){var s=t.commit;t.state;s(J,e)},showPersonDeleteModal:function(t,e){var s=t.commit;t.state;s(K,e)},hidePersonDeleteModal:function(t,e){var s=t.commit;t.state;s(H,e)},setPersonTasksSearch:function(t,e){var s=t.commit;t.state;s(st,e)},savePersonTasksSearch:function(t,e){var s=t.commit;t.rootGetters;return new Promise(function(t,i){var n=ua.personTaskSearchQueries.find(function(t){return t.name===e});n?t():fn.createFilter("persontasks",e,e,null,function(e,n){s(it,{searchQuery:n}),e?i(e):t(n)})})},removePersonTasksSearch:function(t,e){var s=t.commit;t.rootGetters;return new Promise(function(t,i){fn.removeFilter(e,function(n){s(nt,{searchQuery:e}),n?i(n):t()})})},setTimeSpent:function(t,e){var s=t.commit,i=e.personId,n=e.taskId,a=e.date,o=e.duration;return new Promise(function(t,e){fn.setTimeSpent(n,i,a,o,function(i,n){i?e(i):(s(at,n),t())})})},setPersonTasksScrollPosition:function(t,e){var s=t.commit;s(ct,e)},loadTimesheets:function(t,e){var s=t.commit,i=e.detailLevel,n=e.year,a=e.month;return new Promise(function(t,e){var o=1===a.length?"0".concat(parseInt(a)+1):"".concat(a),r=fn.getMonthTable;"day"===i&&(r=fn.getDayTable),"week"===i&&(r=fn.getWeekTable),r(n,o).then(function(e){s(ot,e),t()}).catch(e)})}},ha=(o={},Object(A["a"])(o,I,function(t){t.isPeopleLoading=!0,t.isPeopleLoadingError=!1,t.personMap={}}),Object(A["a"])(o,M,function(t){t.isPeopleLoading=!1,t.isPeopleLoadingError=!0}),Object(A["a"])(o,$,function(t,e){t.isPeopleLoading=!1,t.isPeopleLoadingError=!1,t.people=wn(e),t.people.forEach(function(e){e=la.addAdditionalInformation(e),t.personMap[e.id]=e})}),Object(A["a"])(o,G,function(t){t.isDeleteLoading=!0,t.isDeleteLoadingError=!1}),Object(A["a"])(o,W,function(t){t.isDeleteLoading=!1;var e=t.people.findIndex(function(e){return e.id===t.personToDelete.id});t.people.splice(e,1),delete t.personMap[t.personToDelete.id],t.personToDelete=void 0}),Object(A["a"])(o,z,function(t){t.isDeleteLoading=!1,t.isDeleteLoadingError=!0}),Object(A["a"])(o,K,function(t,e){t.isDeleteModalShown=!0,t.isDeleteLoadingError=!1,t.isDeleteLoading=!1,t.personToDelete=t.people.find(function(t){return t.id===e})}),Object(A["a"])(o,H,function(t,e){t.isDeleteModalShown=!1,t.personToDelete=void 0}),Object(A["a"])(o,Q,function(t,e){t.isEditLoading=!0,t.isEditLoadingError=!1,t.personToEdit=Object.assign(t.personToEdit,e)}),Object(A["a"])(o,q,function(t,e){t.personToEdit.id=e}),Object(A["a"])(o,Y,function(t){t.isEditLoading=!1,t.isEditLoadingError=!1;var e=t.people.findIndex(function(e){return e.id===t.personToEdit.id});t.personToEdit=la.addAdditionalInformation(t.personToEdit),e>=0?t.people[e]=t.personToEdit:(t.people.push(t.personToEdit),t.personMap[t.personToEdit.id]=t.personToEdit,wn(t.people)),t.personToEdit={role:"user"}}),Object(A["a"])(o,X,function(t){t.isEditLoading=!1,t.isEditLoadingError=!0}),Object(A["a"])(o,U,function(t,e){t.isImportPeopleLoading=!0,t.isImportPeopleLoadingError=!1}),Object(A["a"])(o,B,function(t,e){t.isImportPeopleLoading=!1,t.isImportPeopleLoadingError=!1}),Object(A["a"])(o,V,function(t){t.isImportPeopleLoading=!1,t.isImportPeopleLoadingError=!0}),Object(A["a"])(o,Z,function(t,e){t.isEditModalShown=!0,t.isEditLoadingError=!1,t.isEditLoading=!1,t.personToEdit=void 0!==e?t.people.find(function(t){return t.id===e}):{first_name:"",last_name:"",phone:"",email:"",role:"user"}}),Object(A["a"])(o,J,function(t){t.isEditModalShown=!1,t.personToEdit={}}),Object(A["a"])(o,R,function(t){t.isImportPeopleModalShown=!0,t.isImportPeopleLoading=!1,t.isImportPeopleLoadingError=!1}),Object(A["a"])(o,N,function(t){t.isImportPeopleModalShown=!1}),Object(A["a"])(o,F,function(t,e){t.personCsvFormData=e}),Object(A["a"])(o,mt,function(t,e){var s=Math.random().toString(36).substring(7),i=t.personMap[e];i.has_avatar=!0,i.avatarPath="/api/pictures/thumbnails/persons/".concat(i.id)+".png?unique=".concat(s)}),Object(A["a"])(o,tt,function(t,e){var s=e.personId,i=e.tasks,n=e.userFilters;t.person=t.personMap[s],i.forEach(qn);for(var a={},o=0;o<i.length;o++)a[o]={0:!1};t.personTaskSelectionGrid=a,t.personTasks=En(i),t.personTasksIndex=Kn(i);var r=Zn(t.personTasksIndex,t.personTasksSearchText);t.displayedPersonTasks=r||t.personTasks,n.persontasks&&n.persontasks.all?t.personTaskSearchQueries=n.persontasks.all:t.personTaskSearchQueries=[]}),Object(A["a"])(o,et,function(t,e){e.forEach(qn),t.displayedPersonDoneTasks=e}),Object(A["a"])(o,st,function(t,e){var s=Zn(t.personTasksIndex,e);t.personTasksSearchText=e,t.displayedPersonTasks=s||t.personTasks}),Object(A["a"])(o,it,function(t,e){var s=e.searchQuery;t.personTaskSearchQueries.push(s),t.personTaskSearchQueries=Pn(t.personTaskSearchQueries)}),Object(A["a"])(o,nt,function(t,e){var s=e.searchQuery,i=t.personTaskSearchQueries.findIndex(function(t){return t.name===s.name});i>=0&&t.personTaskSearchQueries.splice(i,1)}),Object(A["a"])(o,wt,function(t,e){var s=e.comment,i=e.taskId,n=t.personTasks.find(function(t){return t.id===i});if(n){var a=la.getTaskStatus(s.task_status_id);Object.assign(n,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color}),t.personTasksIndex=Kn(t.personTasks)}}),Object(A["a"])(o,Nt,function(t,e){t.personTaskSelectionGrid[e.x]&&(t.personTaskSelectionGrid[e.x][0]=!1)}),Object(A["a"])(o,Rt,function(t,e){t.personTaskSelectionGrid[e.x]&&(t.personTaskSelectionGrid[e.x][0]=!0)}),Object(A["a"])(o,Ft,function(t,e){t.personTaskSelectionGrid=Nn(t.personTaskSelectionGrid)}),Object(A["a"])(o,ot,function(t,e){t.timesheet=e}),Object(A["a"])(o,at,function(t,e){t.person.id===e.person_id&&(t.personTimeSpentMap[e.task_id]=e),t.personTimeSpentTotal=Object.values(t.personTimeSpentMap).reduce(function(t,e){return e.duration+t},0)/60}),Object(A["a"])(o,rt,function(t,e){var s={};e.forEach(function(t){s[t.task_id]=t}),t.personTimeSpentMap=s,t.personTimeSpentTotal=Object.values(t.personTimeSpentMap).reduce(function(t,e){return e.duration+t},0)/60}),Object(A["a"])(o,ct,function(t,e){t.personTasksScrollPosition=e}),Object(A["a"])(o,on,function(t,e){Object.assign(t,Object(mn["a"])({},da))}),o),fa={state:ua,getters:pa,actions:ma,mutations:ha,helpers:la},_a={getTaskTypes:function(t){P.get("/api/data/task-types",t)},newTaskType:function(t,e){var s={name:t.name,color:t.color,priority:Number(t.priority),for_shots:Boolean("true"===t.for_shots)};P.post("/api/data/task-types/",s,e)},updateTaskType:function(t,e){var s={name:t.name,color:t.color,priority:Number(t.priority),for_shots:Boolean("true"===t.for_shots)};P.put("/api/data/task-types/".concat(t.id),s,e)},deleteTaskType:function(t,e){P.del("/api/data/task-types/".concat(t.id),e)},getSequenceSubscriptions:function(t,e,s){P.get("/api/data/user/projects/".concat(t,"/task-types/").concat(e,"/")+"sequence-subscriptions",s)}},va={taskTypes:[],taskTypeMap:{},isTaskTypesLoading:!1,isTaskTypesLoadingError:!1,sequenceSubscriptions:{},editTaskType:{isLoading:!1,isError:!1},deleteTaskType:{isLoading:!1,isError:!1}},ya=Object(mn["a"])({},va),ga={taskTypes:function(t){return t.taskTypes},taskTypeMap:function(t){return t.taskTypeMap},sequenceSubscriptions:function(t){return t.sequenceSubscriptions},isTaskTypesLoading:function(t){return t.isTaskTypesLoading},isTaskTypesLoadingError:function(t){return t.isTaskTypesLoadingError},editTaskType:function(t){return t.editTaskType},deleteTaskType:function(t){return t.deleteTaskType},currentTaskType:function(t,e,s){return t.taskTypeMap[s.route.params.task_type_id]||{}},getTaskType:function(t,e){return function(e){return t.taskTypeMap[e]}},getTaskTypeOptions:function(t){return t.taskTypes.map(function(t){return{label:t.name,value:t.id}})},getAssetTaskTypeOptions:function(t){return t.taskTypes.filter(function(t){return!t.for_shots}).map(function(t){return{label:t.name,value:t.id}})},getShotTaskTypeOptions:function(t){return t.taskTypes.filter(function(t){return t.for_shots}).map(function(t){return{label:t.name,value:t.id}})}},ka={loadTaskTypes:function(t,e){var s=t.commit;t.state;s(re),_a.getTaskTypes(function(t,i){t?s(le):s(ce,i),e&&e(t)})},newTaskType:function(t,e){var s=t.commit;t.state;s(de,e.data),_a.newTaskType(e.data,function(t,i){t?s(pe):s(ue,i),e.callback&&e.callback(t)})},editTaskType:function(t,e){var s=t.commit;t.state;s(de),_a.updateTaskType(e.data,function(t,i){t?s(pe):s(ue,i),e.callback&&e.callback(t)})},deleteTaskType:function(t,e){var s=t.commit;t.state;s(me);var i=e.taskType;_a.deleteTaskType(i,function(t){t?s(fe):s(he,i),e.callback&&e.callback(t)})},initTaskType:function(t,e){var s=t.commit,i=t.dispatch,n=(t.state,t.rootState),a=t.rootGetters;return new Promise(function(t,o){var r=n.route.params.production_id;a.currentProduction.id!==r&&i("setProduction",r),a.currentTaskType.for_shots?_a.getSequenceSubscriptions(a.currentProduction.id,a.currentTaskType.id,function(n,r){n?o(n):(s(sn,r),Object.keys(a.shotMap).length<2||e?i("loadShots",function(e){e?o(e):t()}):t())}):Object.keys(a.assetMap).length<2||e?i("loadAssets",function(e){e?o(e):t()}):t()})}},ba=(r={},Object(A["a"])(r,re,function(t){t.isTaskTypesLoading=!0,t.isTaskTypesLoadingError=!1}),Object(A["a"])(r,le,function(t){t.isTaskTypesLoading=!1,t.isTaskTypesLoadingError=!0,t.taskTypes=[],t.taskTypeMap={}}),Object(A["a"])(r,ce,function(t,e){t.isTaskTypesLoading=!1,t.isTaskTypesLoadingError=!1,t.taskTypes=e,t.taskTypes=On(t.taskTypes),t.taskTypeMap={},e.forEach(function(e){t.taskTypeMap[e.id]=e})}),Object(A["a"])(r,de,function(t,e){t.editTaskType.isLoading=!0,t.editTaskType.isError=!1}),Object(A["a"])(r,pe,function(t){t.editTaskType.isLoading=!1,t.editTaskType.isError=!0}),Object(A["a"])(r,ue,function(t,e){var s=ga.getTaskType(t)(e.id);s&&s.id?Object.assign(s,e):(t.taskTypes.push(e),t.taskTypes=On(t.taskTypes)),t.taskTypeMap[e.id]=e,t.editTaskType={isLoading:!1,isError:!1}}),Object(A["a"])(r,me,function(t){t.deleteTaskType={isLoading:!0,isError:!1}}),Object(A["a"])(r,fe,function(t){t.deleteTaskType={isLoading:!1,isError:!0}}),Object(A["a"])(r,he,function(t,e){var s=t.taskTypes.findIndex(function(t){return t.id===e.id});t.taskTypes.splice(s,1),delete t.taskTypeMap[e.id],t.deleteTaskType={isLoading:!1,isError:!1}}),Object(A["a"])(r,en,function(t,e){var s=e.sequenceId,i=e.subscribed;k.a.set(t.sequenceSubscriptions,s,i)}),Object(A["a"])(r,sn,function(t,e){t.sequenceSubscriptions={},e.forEach(function(e){t.sequenceSubscriptions[e]=!0})}),Object(A["a"])(r,on,function(t){Object(mn["a"])({},va)}),r),Ta={state:ya,getters:ga,actions:ka,mutations:ba},Sa={taskMap:{},taskStatusMap:{},assetValidationColumns:[],shotValidationColumns:[],taskStatuses:[],taskComments:{},taskPreviews:{},selectedTasks:{},selectedValidations:{},nbSelectedTasks:0,nbSelectedValidations:0,isShowAssignations:!0,previewFormData:null},Ca=Object(mn["a"])({},Sa),Ea={getPerson:function(t){return fa.getters.getPerson(fa.state,fa.getters)(t)},getTaskType:function(t){return Ta.state.taskTypeMap[t]}},Oa={taskMap:function(t){return t.taskMap},getTaskComments:function(t,e){return function(e){return t.taskComments[e]}},getTaskPreviews:function(t,e){return function(e){return t.taskPreviews[e]}},getTaskComment:function(t,e){return function(e,s){return t.taskComments[e].find(function(t){return t.id===s})}},getTaskStatus:function(t,e){return function(e){return t.taskStatuses.find(function(t){return t.id===e})}},taskStatusOptions:function(t){return t.taskStatuses.map(function(t){return{label:t.name,value:t.id,color:t.color}})},selectedTasks:function(t){return t.selectedTasks},nbSelectedTasks:function(t){return t.nbSelectedTasks},nbSelectedValidations:function(t){return t.nbSelectedValidations},isShowAssignations:function(t){return t.isShowAssignations},assetValidationColumns:function(t){return jn(Object.values(t.assetValidationColumns))},shotValidationColumns:function(t){return jn(Object.values(t.shotValidationColumns))}},Aa={loadTaskStatuses:function(t,e){var s=t.commit;t.state;gn.getTaskStatuses(function(t,i){t||s(ve,i),e&&e(t)})},loadTask:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.callback;gn.getTask(i,function(t,e){t||s(At,e),n&&n(t,e)})},loadTaskSubscribed:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.callback;gn.getTaskSubscribed(i,function(t,e){t||s(tn,{taskId:i,subscribed:e}),n&&n(t,e)})},subscribeToTask:function(t,e){var s=t.commit;t.state;return new Promise(function(t,i){gn.subscribeToTask(e,function(n){n?i(n):(s(tn,{taskId:e,subscribed:!0}),t())})})},subscribeToSequence:function(t,e){var s=t.commit,i=(t.state,e.sequenceId),n=e.taskTypeId;return new Promise(function(t,e){gn.subscribeToSequence(i,n,function(a){a?e(a):(s(en,{sequenceId:i,taskTypeId:n,subscribed:!0}),t())})})},unsubscribeFromTask:function(t,e){var s=t.commit;t.state;return new Promise(function(t,i){gn.unsubscribeFromTask(e,function(n){n?i(n):(s(tn,{taskId:e,subscribed:!1}),t())})})},unsubscribeFromSequence:function(t,e){var s=t.commit,i=(t.state,e.sequenceId),n=e.taskTypeId;return new Promise(function(t,e){gn.unsubscribeFromSequence(i,n,function(a){a?e(a):(s(en,{sequenceId:i,taskTypeId:n,subscribed:!1}),t())})})},loadTaskComments:function(t,e){var s=t.commit;t.state;gn.getTaskComments(e.taskId,function(t,i){t||s(xt,{comments:i,taskId:e.taskId}),e.callback&&e.callback(t)})},commentTask:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.taskStatusId,a=e.comment,o=e.callback;gn.commentTask({taskId:i,taskStatusId:n,comment:a},function(t,e){t||s(wt,{comment:e,taskId:i}),o&&o(t,e)})},loadComment:function(t,e){var s=t.commit,i=(t.state,e.commentId),n=e.callback;gn.getTaskComment({id:i},function(t,e){t||s(wt,{comment:e,taskId:e.object_id}),n&&n(t,e)})},createTasks:function(t,e){t.commit,t.state;var s={task_type_id:e.task_type_id,type:e.type,project_id:e.project_id};gn.createTasks(s,function(t,s){e.callback&&e.callback(t,s)})},createSelectedTasks:function(t,e){var s=t.commit,i=t.state,n=e.type,a=e.projectId,o=e.callback;yn.a.eachSeries(Object.keys(i.selectedValidations),function(t,e){var o=i.selectedValidations[t],r={entity_id:o.entity.id,task_type_id:o.column.id,type:n,project_id:a};gn.createTask(r,function(t,i){s(jt,i),i.forEach(function(t){s(Nt,o),t.assigneesInfo=[],o.task=t,s(Rt,o)}),e(t,i[0])})},o)},createTask:function(t,e){var s=t.commit,i=(t.state,e.entityId),n=e.projectId,a=e.taskTypeId,o=e.type;return new Promise(function(t,e){var r={entity_id:i,task_type_id:a,type:o,project_id:n};gn.createTask(r,function(i,n){i?e(i):(s(Pt,n[0]),t())})})},changeSelectedTaskStatus:function(t,e){var s=t.commit,i=t.state,n=e.taskStatusId,a=e.callback;yn.a.eachSeries(Object.keys(i.selectedTasks),function(t,e){var a=i.taskMap[t];a&&a.task_status_id!==n?Aa.commentTask({commit:s,state:i},{taskId:t,taskStatusId:n,comment:"",callback:function(t){e(t)}}):e()},function(t){s(Ft),a(t)})},deleteTask:function(t,e){var s=t.commit,i=e.task,n=e.callback;gn.deleteTask(i,function(t){t||s(Lt,i),n&&n(t)})},editTaskComment:function(t,e){var s=t.commit,i=e.taskId,n=e.comment,a=e.callback;gn.editTaskComment(n,function(t,e){t||s(Dt,{taskId:i,comment:e}),a&&a(t)})},deleteTaskComment:function(t,e){var s=t.commit,i=t.rootState,n=e.taskId,a=e.commentId,o=e.callback,r=i.taskStatus.taskStatus.find(function(t){return"todo"===t.short_name});gn.deleteTaskComment(n,a,function(t){t||s(It,{commentId:a,taskId:n,taskStatusMap:i.taskStatus.taskStatusMap,todoStatus:r}),o&&o(t)})},addCommentPreview:function(t,e){var s=t.commit,i=t.getters,n=t.state,a=e.taskId,o=e.commentId,r=e.callback,c=n.previewFormData.get("file").name,l=c.slice(c.length-4),d={taskId:a,commentId:o,isMovie:[".mp4",".mov"].includes(l)};gn.addPreview(d,function(t,e){t&&r?r(t):gn.uploadPreview(e.id,n.previewFormData,function(t){if(!t){var n=i.getTaskComment(a,o);s(Mt,{preview:e,taskId:a,commentId:o,comment:n})}r&&r(t,e)})})},changeCommentPreview:function(t,e){var s=t.commit,i=t.state,n=e.comment,a=e.preview,o=(e.taskId,e.callback),r=i.previewFormData.get("file").name,c=r.slice(r.length-4),l=[".mp4",".mov"].includes(c);gn.uploadPreview(a.id,i.previewFormData,function(t){t||s(qt,{comment:n,isMovie:l,preview:a}),o&&o(t,l)})},setPreview:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.entityId,a=e.previewId,o=e.callback;gn.setPreview(n,a,function(t,e){t&&o?o(t):o&&(s(nn,{taskId:i,entityId:n,previewId:a}),o(t,e))})},assignSelectedTasks:function(t,e){var s=t.commit,i=t.state,n=e.personId,a=e.callback,o=Object.keys(i.selectedTasks);gn.assignTasks(n,o,function(t){t||s(Ut,{selectedTaskIds:o,personId:n}),a&&a(t)})},unassignSelectedTasks:function(t,e){var s=t.commit,i=t.state,n=(e.personId,e.callback),a=Object.keys(i.selectedTasks);gn.unassignTasks(a,function(t){t||s(Bt,a),n&&n(t)})},showAssignations:function(t){var e=t.commit;t.state;e(an,!0)},hideAssignations:function(t){var e=t.commit;t.state;e(an,!1)},clearSelectedTasks:function(t){var e=t.commit;t.state;e(Ft)}},wa=(c={},Object(A["a"])(c,We,function(t,e){t.assetValidationColumns=[],t.taskMap={}}),Object(A["a"])(c,ze,function(t,e){var s=e.assets,i={};s.forEach(function(e){e.validations={},e.tasks.forEach(function(s){i[s.task_type_name]||(i[s.task_type_name]={id:s.task_type_id,name:s.task_type_name,color:s.task_type_color,priority:s.task_type_priority}),e.validations[s.task_type_name]=s,t.taskMap[s.id]=s})}),t.assetValidationColumns=i}),Object(A["a"])(c,hs,function(t,e){t.shotValidationColumns={},t.taskMap={}}),Object(A["a"])(c,fs,function(t,e){var s=e.shots,i={};s.forEach(function(e){e.validations={},e.tasks.forEach(function(s){e.episode_name?s.entity_name="".concat(e.episode_name," / ").concat(e.sequence_name," / ").concat(e.name):s.entity_name="".concat(e.sequence_name," / ").concat(e.name),i[s.task_type_name]||(i[s.task_type_name]={id:s.task_type_id,name:s.task_type_name,color:s.task_type_color,priority:s.task_type_priority}),e.validations[s.task_type_name]=s,t.taskMap[s.id]=s})}),t.shotValidationColumns=i}),Object(A["a"])(c,At,function(t,e){Object.assign(e,{project_name:e.project.name,task_status_name:e.task_status.name,task_status_short_name:e.task_status.short_name,task_type_name:e.task_type.name,task_status_color:e.task_status.color,task_type_color:e.task_type.color,entity_type_name:e.entity_type.name}),"Shot"===e.entity_type.name?e.episode?e.entity_name="".concat(e.episode.name," / ").concat(e.sequence.name," / ").concat(e.entity.name):e.entity_name="".concat(e.sequence.name," / ").concat(e.entity.name):e.entity_name="".concat(e.entity_type.name," / ").concat(e.entity.name),t.taskMap[e.id]=e}),Object(A["a"])(c,xt,function(t,e){var s=e.taskId,i=e.comments;i.forEach(function(t){t.person=fa.helpers.addAdditionalInformation(t.person)}),t.taskComments[s]=i,t.taskPreviews[s]=i.reduce(function(t,e){return e.preview&&t.push(e.preview),t},[])}),Object(A["a"])(c,ve,function(t,e){t.taskStatuses=Pn(e),t.taskStatuses.forEach(function(e){t.taskStatusMap[e.id]=e})}),Object(A["a"])(c,tn,function(t,e){e.taskId,e.subscribed}),Object(A["a"])(c,wt,function(t,e){var s=e.comment,i=e.taskId,n=t.taskMap[i];if(void 0===s.task_status){var a=Oa.getTaskStatus(t,Oa);s.task_status=a(s.task_status_id)}if(void 0===s.person){var o=fa.getters.getPerson(fa.state,fa.getters);s.person=o(s.person_id)}s.person=fa.helpers.addAdditionalInformation(s.person),t.taskComments[i]||(t.taskComments[i]=[]),t.taskComments[i].find(function(t){return t.id===s.id})||t.taskComments[i].unshift(s),Object.assign(n,{task_status_id:s.task_status_id,task_status_name:s.task_status.name,task_status_short_name:s.task_status.short_name,task_status_color:s.task_status.color,last_comment:s})}),Object(A["a"])(c,Lt,function(t,e){t.taskComments[e.id]=void 0,t.taskPreviews[e.id]=void 0,t.taskMap[e.id]=void 0}),Object(A["a"])(c,It,function(t,e){var s=e.taskId,i=(e.commentId,e.taskStatusMap),n=e.todoStatus,a=t.taskMap[s],o=n;if(t.taskComments[s]=Object(_n["a"])(t.taskComments[s]).splice(1),t.taskComments[s].length>0){var r=t.taskComments[s][0].task_status_id;o=i[r]}Object.assign(a,{task_status_id:o.id,task_status_color:o.color,task_status_name:o.name,task_status_short_name:o.short_name,task_status_priority:o.priority})}),Object(A["a"])(c,Dt,function(t,e){var s=e.taskId,i=e.comment;t.taskComments[s][0].text=i.text}),Object(A["a"])(c,$t,function(t,e){t.previewFormData=e}),Object(A["a"])(c,Mt,function(t,e){var s=e.preview,i=e.taskId,n=(e.commentId,e.comment);if(!n.preview){var a={id:s.id,feedback:!1,revision:s.revision,is_movie:s.is_movie};t.taskPreviews[i]=[a].concat(t.taskPreviews[i]),n.preview=a}}),Object(A["a"])(c,qt,function(t,e){var s=e.preview,i=e.comment,n=e.isMovie,a=i.object_id;s.is_movie=n;var o={id:s.id,feedback:!1,revision:s.revision,is_movie:s.is_movie};t.taskPreviews[a].shift(),t.taskPreviews[a]=[o].concat(t.taskPreviews[a])}),Object(A["a"])(c,Rt,function(t,e){if(e.task)t.selectedTasks[e.task.id]=e.task,t.nbSelectedTasks=Object.keys(t.selectedTasks).length;else{var s=e.column.id,i=e.entity.id,n="".concat(i,"-").concat(s);t.selectedValidations[n]=e,t.nbSelectedValidations=Object.keys(t.selectedValidations).length}}),Object(A["a"])(c,Nt,function(t,e){if(e.task)delete t.selectedTasks[e.task.id],t.nbSelectedTasks=Object.keys(t.selectedTasks).length;else{var s=e.column.id,i=e.entity.id,n="".concat(i,"-").concat(s);delete t.selectedValidations[n],t.nbSelectedValidations=Object.keys(t.selectedValidations).length}}),Object(A["a"])(c,Ft,function(t){t.selectedTasks={},t.nbSelectedTasks=0,t.selectedValidations={},t.nbSelectedValidations=0}),Object(A["a"])(c,jt,function(t,e){e.forEach(function(e){t.taskMap[e.id]=e})}),Object(A["a"])(c,Pt,function(t,e){t.taskMap[e.id]=e}),Object(A["a"])(c,Ut,function(t,e){var s=e.selectedTaskIds,i=e.personId;s.forEach(function(e){var s=t.taskMap[e];s&&!s.assignees.find(function(t){return t===i})&&s.assignees.push(i)})}),Object(A["a"])(c,Bt,function(t,e){e.forEach(function(e){var s=t.taskMap[e];s.assignees=[],s.assigneesInfo=[]})}),Object(A["a"])(c,nn,function(t,e){var s=e.taskId,i=e.previewId;t.taskMap[s].entity.preview_file_id=i}),Object(A["a"])(c,an,function(t,e){t.isShowAssignations=e}),Object(A["a"])(c,tt,function(t,e){var s=e.tasks;s.forEach(function(e){if(e.last_comment.person_id){var s=Ea.getPerson(e.last_comment.person_id);e.last_comment.person=s}t.taskMap[e.id]=e})}),Object(A["a"])(c,yt,function(t,e){var s=e.tasks;s.forEach(function(e){if(e.last_comment.person_id){var s=Ea.getPerson(e.last_comment.person_id);e.last_comment.person=s}t.taskMap[e.id]=e})}),Object(A["a"])(c,on,function(t,e){Object(mn["a"])({},Sa)}),c),Pa={state:Ca,getters:Oa,actions:Aa,mutations:wa},xa={getProductions:function(t){P.get("/api/data/projects/all",t)},getOpenProductions:function(t){P.get("/api/data/projects/open",t)},getProductionStatus:function(t){P.get("/api/data/project-status",t)},newProduction:function(t,e){var s={name:t.name,project_status_id:t.project_status_id};P.post("/api/data/projects/",s,e)},updateProduction:function(t,e){var s={name:t.name,project_status_id:t.project_status_id};P.put("/api/data/projects/".concat(t.id),s,e)},postAvatar:function(t,e,s){P.post("/api/pictures/thumbnails/projects/".concat(t),e,s)},deleteProduction:function(t,e){P.del("/api/data/projects/".concat(t.id),e)}},ja={productions:[],productionMap:{},openProductions:[],productionStatus:[],currentProduction:null,productionAvatarFormData:null,isProductionsLoading:!1,isProductionsLoadingError:!1,isOpenProductionsLoading:!1,editProduction:{isLoading:!1,isError:!1},deleteProduction:{isLoading:!1,isError:!1},assetsPath:{name:"open-productions"},assetTypesPath:{name:"open-productions"},shotsPath:{name:"open-productions"},sequencesPath:{name:"open-productions"},episodesPath:{name:"open-productions"},breakdownPath:{name:"open-productions"},playlistsPath:{name:"open-productions"}},La=Object(mn["a"])({},ja),Da={getProductionComponentPath:function(t,e){return{name:t,params:{production_id:e}}}},Ia={productions:function(t){return t.productions},productionMap:function(t){return t.productionMap},openProductions:function(t){return t.openProductions},productionStatus:function(t){return t.productionStatus},productionAvatarFormData:function(t){return t.productionAvatarFormData},isProductionsLoading:function(t){return t.isProductionsLoading},isProductionsLoadingError:function(t){return t.isProductionsLoadingError},isOpenProductionsLoading:function(t){return t.isOpenProductionsLoading},editProduction:function(t){return t.editProduction},deleteProduction:function(t){return t.deleteProduction},assetsPath:function(t){return t.assetsPath},assetTypesPath:function(t){return t.assetTypesPath},shotsPath:function(t){return t.shotsPath},sequencesPath:function(t){return t.sequencesPath},episodesPath:function(t){return t.episodesPath},breakdownPath:function(t){return t.breakdownPath},playlistsPath:function(t){return t.playlistsPath},currentProduction:function(t){return t.currentProduction?t.currentProduction:t.openProductions.length>0?t.openProductions[0]:null},getProduction:function(t,e){return function(e){return t.productions.find(function(t){return t.id===e})}},getProductionStatus:function(t,e){return function(e){return t.productionStatus.find(function(t){return t.id===e})}},getProductionStatusOptions:function(t){return t.productionStatus.map(function(t){return{label:t.name,value:t.id}})},getOpenProductionOptions:function(t){return t.openProductions.map(function(t){return{label:t.name,value:t.id}})}},$a={loadProductionStatus:function(t,e){var s=t.commit;t.state;s(Qt),xa.getProductionStatus(function(t,i){t?s(Xt):s(Yt,i),e&&e(t)})},loadOpenProductions:function(t,e){var s=t.commit,i=t.state;s(zt),xa.getOpenProductions(function(t,n){t?s(Ht):(s(Kt,n),!i.currentProduction&&n.length>0&&s(ne,n[0].id)),e&&e(t)})},loadProductions:function(t,e){var s=t.commit;t.state;s(Vt),xa.getProductions(function(t,i){t?s(Wt):s(Gt,i),e&&e(t)})},newProduction:function(t,e){var s=t.commit,i=(t.state,e.data),n=e.callback;s(Zt,i),xa.newProduction(i,function(t,e){t?s(te):s(Jt,e),n&&n(t,e)})},editProduction:function(t,e){var s=t.commit;t.state;s(Zt),xa.updateProduction(e.data,function(t,i){t?s(te):s(Jt,i),e.callback&&e.callback(t)})},deleteProduction:function(t,e){var s=t.commit;t.state;s(ee);var i=e.production;xa.deleteProduction(i,function(t){t?s(ie):s(se,i),e.callback&&e.callback(t)})},setProduction:function(t,e){var s=t.commit;s(ne,e)},storeProductionPicture:function(t,e){var s=t.commit;s(ae,e)},uploadProductionAvatar:function(t,e){var s=t.commit,i=t.state;return new Promise(function(t,n){xa.postAvatar(e,i.productionAvatarFormData,function(i){s(oe,e),i?n(i):t()})})}},Ma=(l={},Object(A["a"])(l,Vt,function(t){t.productions=[],t.isProductionsLoading=!0,t.isProductionsLoadingError=!1}),Object(A["a"])(l,Wt,function(t){t.productions=[],t.isProductionsLoading=!1,t.isProductionsLoadingError=!0}),Object(A["a"])(l,Gt,function(t,e){t.isProductionsLoading=!1,t.isProductionsLoadingError=!1,t.productions=Cn(e);var s={};t.productions.forEach(function(t){s[t.id]=t}),t.productionMap=s}),Object(A["a"])(l,zt,function(t){t.isOpenProductionsLoading=!0,t.openProductions=[]}),Object(A["a"])(l,Ht,function(t){t.isOpenProductionsLoading=!1}),Object(A["a"])(l,Kt,function(t,e){t.isOpenProductionsLoading=!1,t.openProductions=Pn(e);var s={};e.forEach(function(t){s[t.id]=t}),t.productionMap=s}),Object(A["a"])(l,Qt,function(t){t.productionStatus=[]}),Object(A["a"])(l,Xt,function(t){}),Object(A["a"])(l,Yt,function(t,e){t.productionStatus=e}),Object(A["a"])(l,Zt,function(t,e){t.editProduction.isLoading=!0,t.editProduction.isError=!1}),Object(A["a"])(l,te,function(t){t.editProduction.isLoading=!1,t.editProduction.isError=!0}),Object(A["a"])(l,Jt,function(t,e){var s=Ia.getProduction(t)(e.id),i=Ia.getProductionStatus(t)(e.project_status_id);if(e.project_status_name=i.name,s){var n=t.openProductions.findIndex(function(t){return t.id===e.id});e.project_status_id&&(n>=0&&s.project_status_id!==e.project_status_id?t.openProductions.splice(n,1):(t.openProductions.push(s),t.openProductions=Pn(t.openProductions))),Object.assign(s,e)}else t.productions.push(e),t.productionMap[e.id]=e,t.openProductions.push(e),t.productions=Cn(t.productions),t.openProductions=Pn(t.openProductions);t.editProduction={isLoading:!1,isError:!1}}),Object(A["a"])(l,ee,function(t){t.deleteProduction={isLoading:!0,isError:!1}}),Object(A["a"])(l,ie,function(t){t.deleteProduction={isLoading:!1,isError:!0}}),Object(A["a"])(l,se,function(t,e){var s=t.productions.findIndex(function(t){return t.id===e.id});t.productions.splice(s,1),t.deleteProduction={isLoading:!1,isError:!1}}),Object(A["a"])(l,ae,function(t,e){t.productionAvatarFormData=e}),Object(A["a"])(l,oe,function(t,e){var s=t.productionMap[e];s&&(s.has_avatar=!0)}),Object(A["a"])(l,ne,function(t,e){var s=t.openProductions.find(function(t){return t.id===e});t.currentProduction=s,t.assetsPath=Da.getProductionComponentPath("assets",e),t.assetTypesPath=Da.getProductionComponentPath("production-asset-types",e),t.shotsPath=Da.getProductionComponentPath("shots",e),t.sequencesPath=Da.getProductionComponentPath("sequences",e),t.episodesPath=Da.getProductionComponentPath("episodes",e),t.breakdownPath=Da.getProductionComponentPath("breakdown",e),t.playlistsPath=Da.getProductionComponentPath("playlists",e)}),Object(A["a"])(l,on,function(t){Object(mn["a"])({},ja)}),l),qa={state:La,getters:Ia,actions:$a,mutations:Ma},Ra=60,Na=(s("SRfc"),function(t,e,s){var i=Ba(t),n=Fa(i,s);return n.taskType?e.filter(function(t){var e=t.validations[n.taskType];return e&&e.task_status_short_name===n.taskStatus}):e}),Fa=function(t,e){var s={},i=/([^ ]*)=([^ ]*)|\[(.*)\]=([^ ]*)/,n=e.match(i);if(n&&n[0]){var a=n[0][0],o="["===a[0]?n[3]:n[1],r="["===a[0]?n[4]:n[2];t[o.toLowerCase()]&&(s={taskType:t[o.toLowerCase()][0],taskStatus:r})}return s},Ua=function(t){return t.length>0?Object.keys(t[0].validations):[]},Ba=function(t){var e={};return t.forEach(function(t){var s="",i=!0,n=!1,a=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var c=o.value;s+=c.toLowerCase(),void 0===e[s]&&(e[s]=[]),e[s].push(t)}}catch(t){n=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}}),e},Va={getCurrentProduction:function(){return qa.getters.currentProduction(qa.state)},getTaskStatus:function(t){return Pa.state.taskStatusMap[t]},getTaskType:function(t){return Ta.state.taskTypeMap[t]},getTask:function(t){return Pa.state.taskMap[t]},getPerson:function(t){return fa.state.personMap[t]},populateTask:function(t,e,s){return t.persons=[],t.taskType=Va.getTaskType(t.task_type_id),t.taskStatus=Va.getTaskStatus(t.task_status_id),t.assignees.forEach(function(e){t.persons.push(Va.getPerson(e))}),t.task_status_short_name=t.taskStatus.short_name,t.task_status_color=t.taskStatus.color,t.name=t.taskType.priority.toString(),Object.assign(t,{task_status_name:t.taskStatus.name,task_status_short_name:t.taskStatus.short_name,task_status_color:t.taskStatus.color,task_type_name:t.taskType.name,task_type_color:t.taskType.color,task_type_priority:t.taskType.priority,project_id:e.production_id,entity_name:"".concat(e.asset_type_name," / ").concat(e.name),entity_type_name:e.asset_type_name,entity:{id:e.id,preview_file_id:e.preview_file_id},assigneesInfo:t.assignees.map(Va.getPerson)}),t}},Ga={assetIndex:{},assetTypeIndex:{},assets:[]},Wa={assetMap:{},nbValidationColumns:0,filteredAssets:[],displayedAssets:[],displayedAssetsLength:0,assetSearchText:"",assetSelectionGrid:{},assetSearchQueries:[],displayedAssetTypes:[],displayedAssetTypesLength:0,assetTypeSearchText:"",assetTypeStats:{},isAssetsLoading:!1,isAssetsLoadingError:!1,assetsCsvFormData:null,assetCreated:"",editAsset:{isCreateError:!1,isLoading:!1,isError:!1},deleteAsset:{isLoading:!1,isError:!1},restoreAsset:{isLoading:!1,isError:!1},personTasks:[],assetListScrollPosition:0},za=Object(mn["a"])({},Wa),Ka={assetMap:function(t){return t.assetMap},assetSearchText:function(t){return t.assetSearchText},assetSearchQueries:function(t){return t.assetSearchQueries},assetSelectionGrid:function(t){return t.assetSelectionGrid},isAssetsLoading:function(t){return t.isAssetsLoading},isAssetsLoadingError:function(t){return t.isAssetsLoadingError},displayedAssets:function(t){return t.displayedAssets},displayedAssetsLength:function(t){return t.displayedAssetsLength},displayedAssetTypes:function(t){return t.displayedAssetTypes},displayedAssetTypesLength:function(t){return t.displayedAssetTypesLength},assetTypeSearchText:function(t){return t.assetTypeSearchText},assetTypeStats:function(t){return t.assetTypeStats},assetTypeListScrollPosition:function(t){return t.assetTypeListScrollPosition},assetListScrollPosition:function(t){return t.assetListScrollPosition},assetsByType:function(t){for(var e=[],s=[],i=null,n=Object.values(t.assetMap),a=0;a<n.length;a++){var o=n[a];i&&o.asset_type_name!==i.asset_type_name&&(e.push(s.slice(0)),s=[]),s.push(o),i=o}return e.push(s),e},editAsset:function(t){return t.editAsset},deleteAsset:function(t){return t.deleteAsset},restoreAsset:function(t){return t.restoreAsset},assetCreated:function(t){return t.assetCreated},assetsCsvFormData:function(t){return t.assetsCsvFormData},getAsset:function(t,e){return function(e){return t.assetMap[e]}}},Ha={loadAssets:function(t,e){var s=t.commit,i=(t.state,t.rootGetters),n=i.currentProduction,a=i.userFilters;s(We),hn.getAssets(n,function(t,i){t?s(Ke):(i.forEach(function(t){return t.project_name=n.name,t}),s(ze,{production:n,assets:i,userFilters:a})),e&&e(t)})},loadAsset:function(t,e){var s=t.commit,i=(t.state,e.assetId),n=e.callback;hn.getAsset(i,function(t,e){t||s(He,e),n&&n(t)})},loadAssetCastIn:function(t,e){var s=t.commit,i=(t.state,t.rootState),n=e.asset,a=e.callback,o=i.shots.shotMap;hn.getCastIn(n,function(t,e){t||s(Qe,{asset:n,castIn:e,shotMap:o}),a&&a(t,e)})},newAsset:function(t,e){var s=t.commit,i=t.dispatch,n=(t.state,t.rootState),a=e.data,o=e.callback;s(Je,a),hn.newAsset(a,function(t,e){if(t)s(es),o&&o(t);else{var a=n.assetTypes.assetTypeMap;s(ts,{newAsset:e,assetTypeMap:a});var r=Object.values(n.tasks.assetValidationColumns),c=r.map(function(t){return i("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t.id,type:"assets"})});Promise.all(c).then(function(){o&&o()}).catch(function(t){console.log(t)})}})},editAsset:function(t,e){var s=t.commit,i=(t.state,t.rootState),n=e.data,a=e.callback;s(Je);var o=i.assetTypes.assetTypeMap;hn.updateAsset(n,function(t,e){t?s(es):s(ts,{newAsset:e,assetTypeMap:o}),a&&a(t)})},deleteAsset:function(t,e){var s=t.commit;t.state;s(ss);var i=e.asset;hn.deleteAsset(i,function(t){t?s(ns):s(is,i),e.callback&&e.callback(t)})},restoreAsset:function(t,e){var s=t.commit;t.state;s(as);var i=e.asset;hn.restoreAsset(i,function(t){t?s(rs):s(os,i),e.callback&&e.callback(t)})},uploadAssetFile:function(t,e){var s=t.commit,i=t.state,n=Va.getCurrentProduction();s(Xe),hn.postCsv(n,i.assetsCsvFormData,function(t){s(Ze),e&&e(t)})},setAssetSearch:function(t,e){var s=t.commit;s(cs,e)},saveAssetSearch:function(t,e){var s=t.commit,i=t.rootGetters;return new Promise(function(t,n){var a=za.assetSearchQueries.find(function(t){return t.name===e}),o=i.currentProduction;a?t():fn.createFilter("asset",e,e,o.id,function(e,i){s(ls,{searchQuery:i,production:o}),e?n(e):t(i)})})},removeAssetSearch:function(t,e){var s=t.commit,i=t.rootGetters;return new Promise(function(t,n){var a=i.currentProduction;fn.removeFilter(e,function(i){s(ds,{searchQuery:e,production:a}),i?n(i):t()})})},displayMoreAssets:function(t){var e=t.commit;e(us)},initAssetTypes:function(t){t.commit;var e=t.dispatch,s=(t.state,t.rootState),i=t.rootGetters;return new Promise(function(t,n){var a=s.route.params.production_id;e("setLastProductionScreen","production-asset-types"),i.currentProduction.id!==a&&e("setProduction",a),0===Ga.assets.length||Ga.assets[0].production_id!==a?e("loadAssets",function(s){s?n(s):(e("computeAssetTypeStats"),t())}):(e("computeAssetTypeStats"),t())})},setAssetTypeListScrollPosition:function(t){var e=t.commit;e(Ge)},computeAssetTypeStats:function(t){var e=t.commit;e(ps)},setAssetTypeSearch:function(t,e){var s=t.commit;s(ms,e)}},Qa=(d={},Object(A["a"])(d,We,function(t){Ga.assets=[],t.assetMap={},t.isAssetsLoading=!0,t.isAssetsLoadingError=!1,Ga.assetIndex={},t.displayedAssets=[],t.displayedAssetsLength=0,t.assetSearchQueries=[]}),Object(A["a"])(d,Ke,function(t){t.isAssetsLoading=!1,t.isAssetsLoadingError=!0}),Object(A["a"])(d,ze,function(t,e){var s=e.production,i=e.assets,n=e.userFilters,a={},o={};i=Tn(i),t.assetMap={},i.forEach(function(e){t.assetMap[e.id]=e,o[e.asset_type]||(o[e.asset_type_id]={id:e.asset_type_id,name:e.asset_type_name}),e.production_id=s.id,e.tasks.forEach(function(t){Va.populateTask(t,e),a[t.task_type_id]=!0})}),Ga.assets=i,t.isAssetsLoading=!1,t.isAssetsLoadingError=!1,t.nbValidationColumns=Object.keys(a).length,Ga.assetIndex=Hn(i),t.displayedAssets=Ga.assets.slice(0,Ra),t.displayedAssetsLength=Ga.assets?Ga.assets.length:0,t.assetTypes=Object.values(o),t.displayedAssetTypes=t.assetTypes,t.displayedAssetTypesLength=t.assetTypes.length,Ga.assetTypeIndex=zn(t.assetTypes);var r=t.displayedAssets.length,c=t.nbValidationColumns;t.assetSelectionGrid=Rn(r,c),n.asset&&n.asset[s.id]?t.assetSearchQueries=n.asset[s.id]:t.assetSearchQueries=[]}),Object(A["a"])(d,He,function(t,e){e.tasks.forEach(function(t){Va.populateTask(t,e)}),e.tasks=Pn(e.tasks),t.assetMap[e.id]=e}),Object(A["a"])(d,Ye,function(t,e){t.assetsCsvFormData=e}),Object(A["a"])(d,Xe,function(t){}),Object(A["a"])(d,Ze,function(t){t.assetsCsvFormData=null}),Object(A["a"])(d,Je,function(t,e){t.editAsset.isLoading=!0,t.editAsset.isError=!1}),Object(A["a"])(d,es,function(t){t.editAsset.isLoading=!1,t.editAsset.isError=!0,t.editAsset.isCreateError=!0}),Object(A["a"])(d,ts,function(t,e){var s=e.newAsset,i=e.assetTypeMap;t.editAsset.isCreateError=!1,t.editAsset.isSuccess=!0,t.assetCreated=s.name;var n=t.assetMap[s.id],a=i[s.entity_type_id];if(a&&(s.asset_type_name=a.name,s.asset_type_id=a.id),s.tasks=[],n)Object.assign(n,s);else{s.validations={},s.production_id=s.project_id,Ga.assets.push(s),Ga.assets=Tn(Ga.assets),t.displayedAssets.unshift(s);var o=t.displayedAssets.length,r=t.nbValidationColumns;t.assetSelectionGrid=Rn(o,r),t.assetMap[s.id]=s}t.editAsset={isLoading:!1,isError:!1},Ga.assetIndex=Hn(Ga.assets)}),Object(A["a"])(d,ss,function(t){t.deleteAsset={isLoading:!0,isError:!1}}),Object(A["a"])(d,ns,function(t){t.deleteAsset={isLoading:!1,isError:!0}}),Object(A["a"])(d,is,function(t,e){var s=t.assetMap[e.id];if(s.tasks.length>0)s.canceled=!0;else{var i=Ga.assets.findIndex(function(t){return t.id===e.id}),n=Ga.assets.findIndex(function(t){return t.id===e.id});Ga.assets.splice(i,1),t.displayedAssets.splice(n,1),t.assetMap[e.id]=void 0}t.deleteAsset={isLoading:!1,isError:!1},Ga.assetIndex=Hn(Ga.assets)}),Object(A["a"])(d,as,function(t){t.restoreAsset={isLoading:!0,isError:!1}}),Object(A["a"])(d,rs,function(t){t.restoreAsset={isLoading:!1,isError:!0}}),Object(A["a"])(d,os,function(t,e){var s=t.assetMap[e.id];s.canceled=!1,t.restoreAsset={isLoading:!1,isError:!1},Ga.assetIndex=Hn(Ga.assets)}),Object(A["a"])(d,as,function(t){t.restoreAsset={isLoading:!0,isError:!1}}),Object(A["a"])(d,rs,function(t){t.restoreAsset={isLoading:!1,isError:!0}}),Object(A["a"])(d,os,function(t,e){var s=t.assetMap[e.id];s.canceled=!1,t.restoreAsset={isLoading:!1,isError:!1},Ga.assetIndex=Hn(Ga.assets)}),Object(A["a"])(d,Lt,function(t,e){var s=Ga.assets.find(function(t){return t.id===e.entity_id});if(s){s.validations[e.task_type_name]=null;var i=s.tasks.findIndex(function(t){return t.id===e.entity_id});s.tasks.splice(i,1)}}),Object(A["a"])(d,wt,function(t,e){var s=e.comment,i=e.taskId,n=Va.getTask(i);if(n){var a=t.assetMap[n.entity_id],o=Va.getTaskStatus(s.task_status_id);if(a){var r=Object(mn["a"])({},a.validations);delete r[n.task_type_name],k.a.set(n,"task_status_id",o.id),k.a.set(n,"task_status_color",o.color),k.a.set(n,"task_status_name",o.name),k.a.set(n,"task_status_short_name",o.short_name),k.a.set(r,n.task_type_name,Object(mn["a"])({},n)),delete a.validations,k.a.set(a,"validations",r)}}}),Object(A["a"])(d,cs,function(t,e){var s=Zn(Ga.assetIndex,e)||Ga.assets,i=Ua(Ga.assets);s=Na(i,s,e)||[],t.displayedAssets=s.slice(0,Ra),t.displayedAssetsLength=s?s.length:0,t.assetSearchText=e;var n=t.displayedAssets.length,a=t.nbValidationColumns;t.assetSelectionGrid=Rn(n,a)}),Object(A["a"])(d,ls,function(t,e){var s=e.searchQuery;t.assetSearchQueries.push(s),t.assetSearchQueries=Pn(t.assetSearchQueries)}),Object(A["a"])(d,ds,function(t,e){var s=e.searchQuery,i=t.assetSearchQueries.findIndex(function(t){return t.name===s.name});i>=0&&t.assetSearchQueries.splice(i,1)}),Object(A["a"])(d,jt,function(t,e){e.forEach(function(e){if(e){var s=t.assetMap[e.entity_id];if(s){var i=Object(mn["a"])({},s.validations);k.a.set(i,e.task_type_name,e),delete s.validations,k.a.set(s,"validations",i)}}})}),Object(A["a"])(d,us,function(t,e){var s;s=t.assetSearchText.length>0?Zn(Ga.assetIndex,t.assetSearchText):Ga.assets,t.displayedAssets=s.slice(0,t.displayedAssets.length+Ra);var i=t.displayedAssets.length,n=t.nbValidationColumns;t.assetSelectionGrid=Rn(i,n)}),Object(A["a"])(d,ne,function(t,e){t.assetSearchText=""}),Object(A["a"])(d,nn,function(t,e){var s=e.entityId,i=(e.taskId,e.previewId),n=t.assetMap[s];n&&(n.preview_file_id=i)}),Object(A["a"])(d,Ve,function(t,e){t.assetListScrollPosition=e}),Object(A["a"])(d,Ge,function(t,e){t.assetTypeListScrollPosition=e}),Object(A["a"])(d,Nt,function(t,e){t.assetSelectionGrid[0]&&(t.assetSelectionGrid[e.x][e.y]=!1)}),Object(A["a"])(d,Rt,function(t,e){t.assetSelectionGrid[0]&&(t.assetSelectionGrid[e.x][e.y]=!0)}),Object(A["a"])(d,Ft,function(t,e){t.assetSelectionGrid=Nn(t.assetSelectionGrid)}),Object(A["a"])(d,Pt,function(t,e){var s=t.assetMap[e.entity_id];s&&e&&(e=Va.populateTask(e,s),s.tasks.push(e),k.a.set(s.validations,e.task_type_name,e))}),Object(A["a"])(d,ms,function(t,e){var s=Zn(Ga.assetTypeIndex,e)||t.assetTypes;t.displayedAssetTypes=s,t.displayedAssetTypesLength=s?s.length:0,t.assetTypeSearchText=e}),Object(A["a"])(d,ps,function(t){t.assetTypeStats=Fn(Ga.assets,"asset_type_id")}),Object(A["a"])(d,on,function(t){Object(mn["a"])({},Wa)}),d),Ya={state:za,getters:Ka,actions:Ha,mutations:Qa},Xa={getShot:function(t,e){var s="/api/data/shots/".concat(t);P.get(s,e)},getShots:function(t,e){var s="/api/data/shots/with-tasks";t&&(s+="?project_id=".concat(t.id)),P.get(s,e)},getSequences:function(t,e){var s="/api/data/projects/".concat(t.id,"/sequences");P.get(s,e)},getEpisodes:function(t,e){var s="/api/data/projects/".concat(t.id,"/episodes");P.get(s,e)},getShotType:function(t){P.get("/api/data/shot-type",t)},newShot:function(t,e){var s={name:t.name,sequence_id:t.sequence_id};P.post("/api/data/projects/".concat(t.project_id,"/shots"),s,e)},newSequence:function(t,e){var s={name:t.name,episode_id:t.episode_id};P.post("/api/data/projects/".concat(t.project_id,"/sequences"),s,e)},newEpisode:function(t,e){var s={name:t.name};P.post("/api/data/projects/".concat(t.project_id,"/episodes"),s,e)},updateShot:function(t,e){var s={name:t.name,parent_id:t.sequence_id,description:t.description};(t.frameIn||t.frameOut||t.fps)&&(s.data={frame_in:t.frameIn,frame_out:t.frameOut,fps:t.fps}),P.put("/api/data/entities/".concat(t.id),s,e)},updateSequence:function(t,e){var s={name:t.name,description:t.description};P.put("/api/data/entities/".concat(t.id),s,e)},updateEpisode:function(t,e){var s={name:t.name,description:t.description};P.put("/api/data/entities/".concat(t.id),s,e)},deleteShot:function(t,e){P.del("/api/data/shots/".concat(t.id),e)},deleteSequence:function(t,e){P.del("/api/data/entities/".concat(t.id),e)},deleteEpisode:function(t,e){P.del("/api/data/entities/".concat(t.id),e)},restoreShot:function(t,e){var s={canceled:!1};P.put("/api/data/entities/".concat(t.id),s,e)},getCasting:function(t,e){P.get("/api/data/shots/".concat(t.id,"/casting"),e)},updateCasting:function(t,e,s){P.put("/api/data/shots/".concat(t.id,"/casting"),e,s)},postCsv:function(t,e,s){P.post("/api/import/csv/projects/".concat(t.id,"/shots"),e,s)}},Za={buildCastingAssetsByType:function(t){var e=[],s=[],i=t.length>0?t[0]:null,n=!0,a=!1,o=void 0;try{for(var r,c=t[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var l=r.value,d=l.asset_type_name!==i.asset_type_name;l.name||(l.name=l.asset_name),i&&d&&(e.push(s.slice(0)),s=[]),l.nb_occurences||(l.nb_occurences=1),s.push(l),i=l}}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return e.push(s),e},buildCastInShotsBySequence:function(t){var e=[],s=[],i=t.length>0?t[0]:null,n=!0,a=!1,o=void 0;try{for(var r,c=t[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var l=r.value,d=l.sequence_name!==i.sequence_name;l.name||(l.name=l.shot_name),i&&d&&(e.push(s.slice(0)),s=[]),l.nb_occurences||(l.nb_occurences=1),s.push(l),i=l}}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return e.push(s),e}},Ja={castingSequenceId:"",castingShotId:0,castingSequenceShots:[],castingEpisodeSequences:[],castingSequenceOptions:[],castingCurrentShot:null,casting:{},castingAssetsByType:[],isCastingDirty:!1},to={castingSequenceId:function(t){return t.castingSequenceId},castingShotId:function(t){return t.castingShotId},castingSequenceShots:function(t){return t.castingSequenceShots},castingEpisodeSequences:function(t){return t.castingEpisodeSequences},castingSequenceOptions:function(t){return t.castingSequenceOptions},castingCurrentShot:function(t){return t.castingCurrentShot},casting:function(t){return t.casting},castingAssetsByType:function(t){return t.castingAssetsByType},isCastingDirty:function(t){return t.isCastingDirty},isCastingSaveActive:function(t){return null!==t.castingCurrentShot&&t.isCastingDirty},getCastingAssetsByType:function(t){var e=Tn(Object.values(t.casting));return Za.buildCastingAssetsByType(e)}},eo={setCastingShot:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=e.shotId,o=e.callback;if(a){var r=n.shots.shotMap[a],c=n.assets.assetMap;s(wi,[]),s(Ei,r),Xa.getCasting(i.castingCurrentShot,function(t,e){if(!t){var i={};e.forEach(function(t){i[t.asset_id]=c[t.asset_id],i[t.asset_id].nb_occurences=t.nb_occurences}),s(wi,i)}o&&o(t)})}else s(wi,[]),s(Ei,null),o&&o()},setCastingSequence:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=t.rootGetters;if(!e)if(i.castingCurrentShot)e=i.castingCurrentShot.sequence_id;else{var o=a.getSequenceOptions[0];o&&(e=o.value)}var r=Object.values(n.shots.shotMap),c=r.filter(function(t){return t.sequence_id===e});s(Oi,e),s(Pi,c)},setCastingEpisode:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=t.rootGetters;if(!e)if(i.castingCurrentShot)e=i.castingCurrentShot.episode_id;else{var o=a.getEpisodeOptions[0];o&&(e=o.value)}var r=n.shots.sequences.filter(function(t){return t.parent_id===e});s(xi,r),s(Ai,e)},addAssetToCasting:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=e.assetId,o=e.nbOccurences;if(i.castingCurrentShot){var r=n.assets.assetMap[a];s(Li,{asset:r,nbOccurences:o})}},removeAssetFromCasting:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=e.assetId,o=e.nbOccurences;if(i.castingCurrentShot&&i.casting[a]){var r=n.assets.assetMap[a];s(Di,{asset:r,nbOccurences:o})}},saveCasting:function(t,e){var s=t.commit,i=t.state,n=(t.rootState,[]);Object.values(i.casting).forEach(function(t){n.push({asset_id:t.id,nb_occurences:t.nb_occurences||1})}),Xa.updateCasting(i.castingCurrentShot,n,function(t){t?console.log(t):s(ji,!1),e&&e(t)})}},so=(u={},Object(A["a"])(u,Ei,function(t,e){e?(t.castingCurrentShot=e,t.castingShotId=e.id,t.castingEpisodeId=e.episode_id,t.castingSequenceId=e.sequence_id):(t.castingCurrentShot=null,t.castingShotId=null,t.castingSequenceId=null,t.episodeSequenceId=null)}),Object(A["a"])(u,Pi,function(t,e){t.castingSequenceShots=e}),Object(A["a"])(u,xi,function(t,e){t.castingEpisodeSequences=e,t.castingSequenceOptions=e.map(function(t){return{label:t.name,value:t.id}})}),Object(A["a"])(u,Oi,function(t,e){t.castingSequenceId=e}),Object(A["a"])(u,Ai,function(t,e){t.castingEpisodeId=e}),Object(A["a"])(u,wi,function(t,e){t.casting=e,t.castingAssetsByType=to.getCastingAssetsByType(t),t.isCastingDirty=!1}),Object(A["a"])(u,ji,function(t,e){t.isCastingDirty=e}),Object(A["a"])(u,Li,function(t,e){var s=e.asset,i=e.nbOccurences;t.casting[s.id]?t.casting[s.id].nb_occurences+=i:(t.casting[s.id]=s,t.casting[s.id].nb_occurences=i),t.castingAssetsByType=to.getCastingAssetsByType(t),t.isCastingDirty=!0}),Object(A["a"])(u,Di,function(t,e){var s=e.asset,i=e.nbOccurences,n=t.casting[s.id];n&&(n.nb_occurences-=i,n.nb_occurences<1&&delete t.casting[s.id]),t.castingAssetsByType=to.getCastingAssetsByType(t),t.isCastingDirty=!0}),Object(A["a"])(u,ks,function(t,e){t.state,t.rootState;var s=e.shot,i=e.casting;s.casting=i,k.a.set(s,"castingAssetsByType",Za.buildCastingAssetsByType(i))}),Object(A["a"])(u,Qe,function(t,e){t.state,t.rootState;var s=e.asset,i=e.castIn;i.forEach(function(t){t.episode_name&&(t.sequence_name="".concat(t.episode_name," / ").concat(t.sequence_name))}),s.castIn=i,k.a.set(s,"castInShotsBySequence",Za.buildCastInShotsBySequence(i))}),Object(A["a"])(u,on,function(t){t.castingSequenceId="",t.castingShotId="",t.castingSequenceShots=[],t.castingEpisodeSequences=[],t.castingEpisodeOptions=[],t.castingSequenceOptions=[],t.castingCurrentShot=null,t.casting={},t.castingAssetsByType=[],t.isCastingDirty=!1}),u),io={state:Ja,getters:to,actions:eo,mutations:so},no={getCustomActions:function(t){P.get("/api/data/custom-actions",t)},newCustomAction:function(t,e){var s={name:t.name,url:t.url};P.post("/api/data/custom-actions/",s,e)},updateCustomAction:function(t,e){var s={name:t.name,url:t.url,entity_type:t.entityType};P.put("/api/data/custom-actions/".concat(t.id),s,e)},deleteCustomAction:function(t,e){P.del("/api/data/custom-actions/".concat(t.id),e)}},ao={customActions:[],isCustomActionsLoading:!1,isCustomActionsLoadingError:!1,editCustomAction:{isLoading:!1,isError:!1},deleteCustomAction:{isLoading:!1,isError:!1}},oo={getOptions:function(t){return{label:t.name,value:t.url,entity_type:t.entity_type}}},ro={customActions:function(t){return t.customActions},isCustomActionsLoading:function(t){return t.isCustomActionsLoading},isCustomActionsLoadingError:function(t){return t.isCustomActionsLoadingError},editCustomAction:function(t){return t.editCustomAction},deleteCustomAction:function(t){return t.deleteCustomAction},customAction:function(t,e,s){return function(e){return t.customActions.find(function(t){return t.id===e})}},allCustomActionOptions:function(t){return t.customActions.map(oo.getOptions).filter(function(t){return"all"===t.entity_type})},assetCustomActionOptions:function(t){return t.customActions.map(oo.getOptions).filter(function(t){return["all","asset"].includes(t.entity_type)})},shotCustomActionOptions:function(t){return t.customActions.map(oo.getOptions).filter(function(t){return["all","shot"].includes(t.entity_type)})}},co={loadCustomActions:function(t,e){var s=t.commit;t.state;s(Ee),no.getCustomActions(function(t,i){t?s(Ae):s(Oe,i),e&&e(t)})},newCustomAction:function(t,e){var s=t.commit,i=(t.state,e.data),n=e.callback;s(we,i),no.newCustomAction(i,function(t,e){t?s(xe):s(Pe,e),n&&n(t)})},editCustomAction:function(t,e){var s=t.commit,i=(t.state,e.data),n=e.callback;s(we),no.updateCustomAction(i,function(t,e){t?s(xe):s(Pe,e),n&&n(t)})},deleteCustomAction:function(t,e){var s=t.commit,i=(t.state,e.customAction),n=e.callback;s(je),no.deleteCustomAction(i,function(t){t?s(De):s(Le,i),n&&n(t)})}},lo=(p={},Object(A["a"])(p,Ee,function(t){t.isCustomActionsLoading=!0,t.isCustomActionsLoadingError=!1}),Object(A["a"])(p,Ae,function(t){t.isCustomActionsLoading=!1,t.isCustomActionsLoadingError=!0}),Object(A["a"])(p,Oe,function(t,e){t.isCustomActionsLoading=!1,t.isCustomActionsLoadingError=!1,t.customActions=e,t.customActions=Pn(t.customActions)}),Object(A["a"])(p,we,function(t,e){t.editCustomAction.isLoading=!0,t.editCustomAction.isError=!1}),Object(A["a"])(p,xe,function(t){t.editCustomAction.isLoading=!1,t.editCustomAction.isError=!0}),Object(A["a"])(p,Pe,function(t,e){var s=ro.customAction(t)(e.id);s&&s.id?Object.assign(s,e):(t.customActions.push(e),t.customActions=Pn(t.customActions)),t.editCustomAction={isLoading:!1,isError:!1}}),Object(A["a"])(p,je,function(t){t.deleteCustomAction={isLoading:!0,isError:!1}}),Object(A["a"])(p,De,function(t){t.deleteCustomAction={isLoading:!1,isError:!0}}),Object(A["a"])(p,Le,function(t,e){var s=t.customActions.findIndex(function(t){return t.id===e.id});t.customActions.splice(s,1),t.deleteCustomAction={isLoading:!1,isError:!1}}),Object(A["a"])(p,on,function(t){t.customActions=[],t.isCustomActionsLoading=!1,t.isCustomActionsLoadingError=!1,t.editCustomAction={isLoading:!1,isError:!1},t.deleteCustomAction={isLoading:!1,isError:!1}}),p),uo={state:ao,getters:ro,actions:co,mutations:lo},po={email:"",password:"",isLoginLoading:!1,isLoginError:!1},mo={email:function(t){return t.email},password:function(t){return t.password},isLoginLoading:function(t){return t.isLoginLoading},isLoginError:function(t){return t.isLoginError}},ho={changeEmail:function(t,e){var s=t.commit;t.state;s(mi,e)},changePassword:function(t,e){var s=t.commit;t.state;s(hi,e)},logIn:function(t,e){var s=t.commit,i=t.state;s(fi),Jo.logIn(i.email,i.password,function(t){t?(s(vi),e(null,!1)):e(null,!0)})},logout:function(t,e){var s=t.commit;t.state;Jo.logout(function(t){t?(s(gi),e(null,!1)):(s(on),s(yi),s(L),e(null,!0))})}},fo=(m={},Object(A["a"])(m,mi,function(t,e){t.email=e}),Object(A["a"])(m,hi,function(t,e){t.password=e}),Object(A["a"])(m,fi,function(t){t.isLoginLoading=!0,t.isLoginError=!1}),Object(A["a"])(m,_i,function(t,e){t.isLoginLoading=!1}),Object(A["a"])(m,vi,function(t,e){t.isLoginLoading=!1,t.isLoginError=!0}),Object(A["a"])(m,yi,function(t,e){t.isLoginLoading=!1,t.isLoginError=!1}),Object(A["a"])(m,on,function(t,e){t.email="",t.password="",t.isLoginLoading=!1,t.isLoginError=!1}),m),_o={state:po,getters:mo,actions:ho,mutations:fo},vo={isSidebarHidden:!0,isUserMenuHidden:!0,lastProductionScreen:"assets"},yo={isSidebarHidden:function(t){return t.isSidebarHidden},isUserMenuHidden:function(t){return t.isUserMenuHidden},lastProductionScreen:function(t){return t.lastProductionScreen}},go={toggleSidebar:function(t){var e=t.commit;t.state;e(j)},toggleUserMenu:function(t){var e=t.commit;t.state;e(L)},setLastProductionScreen:function(t,e){var s=t.commit;t.state;s(D,e)}},ko=(h={},Object(A["a"])(h,j,function(t){t.isSidebarHidden=!t.isSidebarHidden}),Object(A["a"])(h,L,function(t){t.isUserMenuHidden=!t.isUserMenuHidden}),Object(A["a"])(h,D,function(t,e){t.lastProductionScreen=e}),Object(A["a"])(h,on,function(t){t.isSidebarHidden=!0,t.isUserMenuHidden=!0}),h),bo={state:vo,getters:yo,actions:go,mutations:ko},To={getNotifications:function(t){P.get("/api/data/user/notifications",t)},getNotification:function(t,e){P.get("/api/data/user/notifications/".concat(t),e)}},So={notifications:[]},Co=Object(mn["a"])({},So),Eo={notifications:function(t){return t.notifications},isNewNotification:function(t){var e=t.notifications.filter(function(t){return!t.read});return e.length>0}},Oo={loadNotifications:function(t,e){var s=t.commit;t.state;if(!e)return new Promise(function(t,e){s(Yi,[]),To.getNotifications(function(i,n){i?e(i):(s(Yi,n),t())})});s(Yi,[]),To.getNotifications(function(t,i){t?e(t):(s(Yi,i),e())})},loadNotification:function(t,e){var s=t.commit;t.state;return new Promise(function(t,i){To.getNotification(e,function(e,n){e?i(e):(s(Xi,n),t())})})},markAllNotificationsAsRead:function(t){var e=t.commit;e(Zi)}},Ao=(f={},Object(A["a"])(f,Yi,function(t,e){t.notifications=xn(e)}),Object(A["a"])(f,Xi,function(t,e){t.notifications.push(e),t.notifications=xn(t.notifications)}),Object(A["a"])(f,Zi,function(t){t.notifications.forEach(function(t){t.read=!0})}),Object(A["a"])(f,Ji,function(t,e){var s=e.commentId,i=e.previewId,n=t.notifications.find(function(t){return t.comment_id===s});n&&(n.preview_file_id=i)}),Object(A["a"])(f,on,function(t){Object(mn["a"])({},So)}),f),wo={state:Co,getters:Eo,actions:Oo,mutations:Ao},Po={getTaskStatus:function(t){return ca.state.taskStatusMap[t]}},xo={user:null,isAuthenticated:!1,avatarFormData:null,isSaveProfileLoading:!1,isSaveProfileLoadingError:!1,changePassword:{isLoading:!1,isError:!1,isSuccess:!1,isValid:!0},isTodosLoading:!1,isTodosLoadingError:!1,todos:[],displayedTodos:[],displayedDoneTasks:[],todosIndex:{},todosSearchText:"",todoSelectionGrid:{},todoSearchQueries:[],userFilters:{},todoListScrollPosition:0,timeSpentMap:{},timeSpentTotal:0},jo=Object(mn["a"])({},xo),Lo={user:function(t){return t.user},isAuthenticated:function(t){return t.isAuthenticated},isCurrentUserManager:function(t){return t.user&&"user"!==t.user.role},isCurrentUserAdmin:function(t){return t.user&&"admin"===t.user.role},isSaveProfileLoading:function(t){return t.isSaveProfileLoading},isSaveProfileLoadingError:function(t){return t.isSaveProfileLoadingError},changePassword:function(t){return t.changePassword},displayedTodos:function(t){return t.displayedTodos},displayedDoneTasks:function(t){return t.displayedDoneTasks},todosSearchText:function(t){return t.todosSearchText},todoSelectionGrid:function(t){return t.todoSelectionGrid},todoSearchQueries:function(t){return t.todoSearchQueries},userFilters:function(t){return t.userFilters},isTodosLoading:function(t){return t.isTodosLoading},isTodosLoadingError:function(t){return t.isTodosLoadingError},todoListScrollPosition:function(t){return t.todoListScrollPosition},timeSpentMap:function(t){return t.timeSpentMap},timeSpentTotal:function(t){return t.timeSpentTotal}},Do={saveProfile:function(t,e){var s=t.commit;t.state;s(lt),fn.updatePerson(e.form,function(t){t?s(dt):s(ut,e.form),e.callback&&e.callback()})},checkNewPasswordValidityAndSave:function(t,e){var s=t.commit,i=t.state;Jo.isPasswordValid(e.form.password,e.form.password2)?Do.changeUserPassword({commit:s,state:i},e):(s(vt),e.callback&&e.callback())},changeUserPassword:function(t,e){var s=t.commit;t.state;s(ht),fn.changePassword(e.form,function(t){s(t?ft:_t),e.callback&&e.callback()})},loadTodos:function(t,e){var s=t.commit,i=t.state,n=t.rootGetters,a=e.callback,o=e.forced,r=e.date,c=n.userFilters;0===i.todos.length||o?(s(gt),fn.loadTodos(function(t,e){t?(s(kt),a&&a(t)):fn.loadDone(function(t,i){t?s(kt):s(bt,i),fn.loadTimeSpents(r,function(t,i){t?s(kt):(s(Tt,i),s(yt,{tasks:e,userFilters:c})),a&&a(t)})})})):a&&a()},uploadAvatar:function(t,e){var s=t.commit,i=t.state;fn.postAvatar(i.user.id,i.avatarFormData,function(t){t||s(mt,i.user.id),e&&e(t)})},setTodosSearch:function(t,e){var s=t.commit;t.state;s(St,e)},loadUserSearchFilters:function(t,e){var s=t.commit;fn.getUserSearchFilters(function(t,i){t?s(Et):s(Ct,i),e(t)})},saveTodoSearch:function(t,e){var s=t.commit;t.rootGetters;return new Promise(function(t,i){var n=jo.todoSearchQueries.find(function(t){return t.name===e});n?t():fn.createFilter("todos",e,e,null,function(e,n){s(Si,{searchQuery:n}),e?i(e):t(n)})})},removeTodoSearch:function(t,e){var s=t.commit;t.rootGetters;return new Promise(function(t,i){fn.removeFilter(e,function(n){s(Ci,{searchQuery:e}),n?i(n):t()})})},setTodoListScrollPosition:function(t,e){var s=t.commit;t.rootGetters;s(Ot,e)}},Io=(_={},Object(A["a"])(_,ki,function(t,e){t.user=fa.helpers.addAdditionalInformation(e),t.isAuthenticated=!0}),Object(A["a"])(_,bi,function(t,e){t.user=null,t.isAuthenticated=!1}),Object(A["a"])(_,Ti,function(t,e){t.user=null,t.isAuthenticated=!1}),Object(A["a"])(_,lt,function(t){t.isSaveProfileLoading=!0,t.isSaveProfileLoadingError=!1}),Object(A["a"])(_,dt,function(t){t.isSaveProfileLoading=!1,t.isSaveProfileLoadingError=!0}),Object(A["a"])(_,ut,function(t,e){Object.assign(t.user,e),t.isSaveProfileLoading=!1,t.isSaveProfileLoadingError=!1}),Object(A["a"])(_,ht,function(t){t.changePassword={isLoading:!0,isError:!1,isSuccess:!1,isValid:!0}}),Object(A["a"])(_,ft,function(t){t.changePassword={isLoading:!1,isError:!0,isSuccess:!1,isValid:!0}}),Object(A["a"])(_,_t,function(t){t.changePassword={isLoading:!1,isError:!1,isSuccess:!0,isValid:!0}}),Object(A["a"])(_,vt,function(t){t.changePassword={isLoading:!1,isError:!1,isSuccess:!1,isValid:!1}}),Object(A["a"])(_,gt,function(t){t.isTodosLoadingError=!1,t.isTodosLoading=!0,t.timeSpents={},t.timeSpentTotal=0}),Object(A["a"])(_,yt,function(t,e){var s=e.tasks,i=e.userFilters;t.isTodosLoading=!1,s.forEach(qn),s.forEach(function(t){var e=Po.getTaskStatus(t.task_status_id);t.taskStatus=e}),t.todoSelectionGrid=Rn(s.length,1),t.todos=En(s),t.todosIndex=Kn(s);var n=Zn(t.todosIndex,t.todosSearchText);t.displayedTodos=n||t.todos,i.todos&&i.todos.all?t.todoSearchQueries=i.todos.all:t.todoSearchQueries=[]}),Object(A["a"])(_,bt,function(t,e){e.forEach(qn),e.forEach(function(t){var e=Po.getTaskStatus(t.task_status_id);t.taskStatus=e}),t.displayedDoneTasks=e}),Object(A["a"])(_,kt,function(t,e){t.isTodosLoadingError=!0}),Object(A["a"])(_,pt,function(t,e){t.avatarFormData=e}),Object(A["a"])(_,mt,function(t){if(t.user){var e=Math.random().toString(36).substring(7);t.user.has_avatar=!0,t.user.avatarPath="/api/pictures/thumbnails/persons/".concat(t.user.id)+".png?unique=".concat(e)}}),Object(A["a"])(_,wt,function(t,e){var s=e.comment,i=e.taskId,n=t.todos.find(function(t){return t.id===i});if(n){var a=Po.getTaskStatus(s.task_status_id);Object.assign(n,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color,last_comment:s}),t.todosIndex=Kn(t.todos)}}),Object(A["a"])(_,St,function(t,e){var s=Zn(t.todosIndex,e);t.todosSearchText=e,t.displayedTodos=s||t.todos}),Object(A["a"])(_,Si,function(t,e){var s=e.searchQuery;t.todoSearchQueries.push(s),t.todoSearchQueries=Pn(t.todoSearchQueries)}),Object(A["a"])(_,Ci,function(t,e){var s=e.searchQuery,i=t.todoSearchQueries.findIndex(function(t){return t.name===s.name});i>=0&&t.todoSearchQueries.splice(i,1)}),Object(A["a"])(_,Rt,function(t,e){t.todoSelectionGrid&&t.todoSelectionGrid[0]&&(t.todoSelectionGrid[e.x][e.y]=!0)}),Object(A["a"])(_,Nt,function(t,e){t.todoSelectionGrid&&t.todoSelectionGrid[0]&&(t.todoSelectionGrid[e.x][e.y]=!1)}),Object(A["a"])(_,Ft,function(t){t.todoSelectionGrid=Nn(t.todoSelectionGrid)}),Object(A["a"])(_,Ot,function(t,e){t.todoListScrollPosition=e}),Object(A["a"])(_,Et,function(t){}),Object(A["a"])(_,Ct,function(t,e){t.userFilters=e}),Object(A["a"])(_,at,function(t,e){t.user.id===e.person_id&&(t.timeSpentMap[e.task_id]=e),t.timeSpentTotal=Object.values(t.timeSpentMap).reduce(function(t,e){return e.duration+t},0)/60}),Object(A["a"])(_,Tt,function(t,e){var s={};e.forEach(function(t){s[t.task_id]=t}),t.timeSpentMap=s,t.timeSpentTotal=Object.values(t.timeSpentMap).reduce(function(t,e){return e.duration+t},0)/60}),Object(A["a"])(_,on,function(t){Object(mn["a"])({},xo)}),_),$o={namespace:!0,state:jo,getters:Lo,actions:Do,mutations:Io},Mo={getPlaylists:function(t,e){P.get("/api/data/projects/".concat(t.id,"/playlists"),e)},getPlaylist:function(t,e,s){var i="/api/data/projects/".concat(t.id,"/playlists/").concat(e.id);P.get(i,s)},getShotPreviewFiles:function(t,e){var s="/api/data/shots/".concat(t.id,"/preview-files");P.get(s,e)},newPlaylist:function(t,e){var s={name:t.name,project_id:t.production_id};P.post("/api/data/playlists/",s,e)},updatePlaylist:function(t,e){var s={name:t.name};t.shots&&(s.shots=t.shots),P.put("/api/data/playlists/".concat(t.id),s,e)},deletePlaylist:function(t,e){P.del("/api/data/playlists/".concat(t.id),e)}},qo={playlists:[],playlistMap:{}},Ro={playlists:function(t){return t.playlists},playlistMap:function(t){return t.playlistMap}},No={loadPlaylists:function(t,e){var s=t.commit,i=t.rootGetters,n=i.currentProduction;s(Ii),Mo.getPlaylists(n,function(t,i){t?s(Mi):s($i,i),e&&e(t)})},loadPlaylist:function(t,e){var s=t.commit,i=t.rootGetters,n=e.playlist,a=e.callback,o=i.currentProduction;s(qi),Mo.getPlaylist(o,n,function(t,e){t?s(Ni):s(Ri,e),a&&a(t,e)})},loadShotPreviewFiles:function(t,e){t.commit,e.playlist;var s=e.shot,i=e.callback;Mo.getShotPreviewFiles(s,function(t,e){i&&i(t,e)})},newPlaylist:function(t,e){var s=t.commit,i=e.data,n=e.callback;s(Fi,i),Mo.newPlaylist(i,function(t,e){t?s(Bi):s(Ui,e),n&&n(t,e)})},editPlaylist:function(t,e){var s=t.commit,i=e.data,n=e.callback;s(Fi),Mo.updatePlaylist(i,function(t,e){t?s(Bi):s(Ui,e),n&&n(t)})},deletePlaylist:function(t,e){var s=t.commit,i=e.playlist,n=e.callback;s(Vi),Mo.deletePlaylist(i,function(t){t?s(Wi):s(Gi,i),n&&n(t)})},addShotPreviewToPlaylist:function(t,e){var s=t.commit,i=t.dispatch,n=e.playlist,a=e.shot,o=e.previewFiles,r=e.callback;s(zi,{playlist:n,shot:a}),s(Qi,{playlist:n,shot:a,previewFiles:o}),i("editPlaylist",{data:n,callback:r})},removeShotPreviewFromPlaylist:function(t,e){var s=t.commit,i=t.dispatch,n=e.playlist,a=e.shot,o=e.callback;s(Ki,{playlist:n,shot:a}),i("editPlaylist",{data:n,callback:o})},changePlaylistPreview:function(t,e){var s=t.commit,i=t.dispatch,n=e.playlist,a=e.shot,o=e.previewFileId,r=e.callback;s(Hi,{playlist:n,shotId:a.id,previewFileId:o}),i("editPlaylist",{data:n,callback:r})}},Fo=(v={},Object(A["a"])(v,Ii,function(t){}),Object(A["a"])(v,Mi,function(t){}),Object(A["a"])(v,$i,function(t,e){t.playlists=e,t.playlists=An(t.playlists),t.playlistMap={},e.forEach(function(e){e.shots||(e.shots=[]),t.playlistMap[e.id]=e})}),Object(A["a"])(v,qi,function(t){}),Object(A["a"])(v,Ni,function(t){}),Object(A["a"])(v,Ri,function(t){}),Object(A["a"])(v,Fi,function(t,e){}),Object(A["a"])(v,Bi,function(t){}),Object(A["a"])(v,Ui,function(t,e){var s=t.playlistMap[e.id];s&&s.id?Object.assign(s,e):(t.playlists.push(e),t.playlists=An(t.playlists)),t.playlistMap[e.id]=e}),Object(A["a"])(v,Vi,function(t){}),Object(A["a"])(v,Wi,function(t){}),Object(A["a"])(v,Gi,function(t,e){var s=t.playlists.findIndex(function(t){return t.id===e.id});t.playlists.splice(s,1),delete t.playlistMap[e.id]}),Object(A["a"])(v,Qi,function(t,e){var s=e.playlist,i=e.shot,n=e.previewFiles,a=s.shots.find(function(t){return t.shot_id===i.id});a.preview_files=n}),Object(A["a"])(v,zi,function(t,e){var s=e.playlist,i=e.shot;s.shots||(s.shots=[]),s.shots.push({shot_id:i.id,preview_file_id:i.preview_file_id,preview_files:i.preview_files})}),Object(A["a"])(v,Ki,function(t,e){var s=e.playlist,i=e.shot;s.shots||(s.shots=[]);var n=s.shots.findIndex(function(t){return t.shot_id===i.id});s.shots.splice(n,1)}),Object(A["a"])(v,Hi,function(t,e){var s=e.playlist,i=e.shotId,n=e.previewFileId,a=s.shots.find(function(t){return t.shot_id===i});a.preview_file_id=n}),Object(A["a"])(v,on,function(t){t.playlists=[],t.playlistMap={}}),v),Uo={state:qo,getters:Ro,actions:No,mutations:Fo},Bo={shots:[],shotIndex:[]},Vo={getTask:function(t){return Pa.state.taskMap[t]},getTaskStatus:function(t){return Pa.state.taskStatusMap[t]},getTaskType:function(t){return Ta.state.taskTypeMap[t]},getPerson:function(t){return fa.state.personMap[t]},populateTask:function(t,e){t.persons=[],t.taskType=Vo.getTaskType(t.task_type_id),t.taskStatus=Vo.getTaskStatus(t.task_status_id),t.assignees.forEach(function(e){t.persons.push(Vo.getPerson(e))}),t.task_status_short_name=t.taskStatus.short_name,t.task_status_color=t.taskStatus.color,t.name=t.taskType.priority.toString();var s="".concat(e.sequence_name," / ").concat(e.name);return e.episode_name&&(s="".concat(e.episode_name," / ").concat(s)),Object.assign(t,{task_status_name:t.taskStatus.name,task_status_short_name:t.taskStatus.short_name,task_status_color:t.taskStatus.color,task_type_name:t.taskType.name,task_type_color:t.taskType.color,task_type_priority:t.taskType.priority,project_id:e.production_id,entity_type_name:"Shot",entity_name:s,sequence_name:e.sequence_name,entity:{id:e.id,preview_file_id:e.preview_file_id},assigneesInfo:t.assignees.map(Vo.getPerson)}),t}},Go={shotMap:{},sequences:[],episodes:[],shotSearchText:"",shotSearchQueries:[],sequenceSearchText:"",sequenceStats:{},episodeSearchText:"",episodeStats:{},isFps:!1,isFrameIn:!1,isFrameOut:!1,displayedShots:[],displayedShotsLength:0,displayedSequences:[],displayedSequencesLength:0,displayedEpisodes:[],displayedEpisodesLength:0,sequenceIndex:{},sequenceMap:{},episodeMap:{},shotCreated:"",shotSelectionGrid:{},sequenceSelectionGrid:{},isShotsLoading:!1,isShotsLoadingError:!1,shotsCsvFormData:null,editShot:{isLoading:!1,isError:!1},deleteShot:{isLoading:!1,isError:!1},restoreShot:{isLoading:!1,isError:!1},shotListScrollPosition:0,sequenceListScrollPosition:0,episodeListScrollPosition:0},Wo=Object(mn["a"])({},Go),zo={sequences:function(t){return t.sequences},sequenceMap:function(t){return t.sequenceMap},sequenceStats:function(t){return t.sequenceStats},episodes:function(t){return t.episodes},episodeMap:function(t){return t.episodeMap},episodeStats:function(t){return t.episodeStats},shotSearchQueries:function(t){return t.shotSearchQueries},shotMap:function(t){return t.shotMap},isFps:function(t){return t.isFps},isFrameIn:function(t){return t.isFrameIn},isFrameOut:function(t){return t.isFrameOut},shotSearchText:function(t){return t.shotSearchText},sequenceSearchText:function(t){return t.sequenceSearchText},episodeSearchText:function(t){return t.episodeSearchText},shotSelectionGrid:function(t){return t.shotSelectionGrid},sequenceSelectionGrid:function(t){return t.sequenceSelectionGrid},displayedShots:function(t){return t.displayedShots},displayedShotsLength:function(t){return t.displayedShotsLength},displayedSequences:function(t){return t.displayedSequences},displayedSequencesLength:function(t){return t.displayedSequencesLength},displayedEpisodes:function(t){return t.displayedEpisodes},displayedEpisodesLength:function(t){return t.displayedEpisodesLength},isShotsLoading:function(t){return t.isShotsLoading},isShotsLoadingError:function(t){return t.isShotsLoadingError},editShot:function(t){return t.editShot},deleteShot:function(t){return t.deleteShot},restoreShot:function(t){return t.restoreShot},shotCreated:function(t){return t.shotCreated},shotsCsvFormData:function(t){return t.shotsCsvFormData},shotListScrollPosition:function(t){return t.shotListScrollPosition},sequenceListScrollPosition:function(t){return t.sequenceListScrollPosition},episodeListScrollPosition:function(t){return t.episodeListScrollPosition},shotsByEpisode:function(t){for(var e=[],s=[],i=null,n=Object.values(t.shotMap),a=0;a<n.length;a++){var o=n[a];i&&o.sequence_name!==i.sequence_name&&(e.push(s.slice(0)),s=[]),s.push(o),console.log(o),i=o}return e.push(s),e},getSequenceOptions:function(t){return t.sequences.map(function(t){return{label:t.name,value:t.id}})},getEpisodeOptions:function(t){return t.episodes.map(function(t){return{label:t.name,value:t.id}})},isSingleEpisode:function(t){return t.episodes.length<2}},Ko={loadEpisodes:function(t,e){var s=t.commit,i=(t.state,t.rootGetters),n=i.currentProduction;Xa.getEpisodes(n,function(t,e){t&&console.log(t),s(ys,e)})},loadShots:function(t,e){var s=t.commit,i=(t.state,t.rootGetters),n=i.currentProduction,a=i.userFilters;s(hs),Xa.getEpisodes(n,function(t,i){t?s(_s):Xa.getSequences(n,function(t,o){t?s(_s):Xa.getShots(n,function(t,r){t?s(_s):(r.forEach(function(t){return t.project_name=n.name,t}),s(ys,i),s(vs,o),s(fs,{production:n,shots:r,userFilters:a})),e&&e(t)})})})},loadShot:function(t,e){var s=t.commit,i=(t.state,e.shotId),n=e.callback;Xa.getShot(i,function(t,e){t||s(gs,e),n&&n(t)})},loadShotCasting:function(t,e){var s=t.commit,i=(t.state,t.rootState),n=e.shot,a=e.callback,o=i.assets.assetMap;Xa.getCasting(n,function(t,e){t||s(ks,{shot:n,casting:e,assetMap:o}),a&&a(t,e)})},newShot:function(t,e){var s=t.commit,i=t.dispatch,n=(t.state,t.rootState),a=e.shot,o=e.callback;s(Ds),Xa.newShot(a,function(t,e){if(t)s($s),o&&o(t);else{s(Is,e);var a=Object.values(n.tasks.shotValidationColumns),r=a.map(function(t){return i("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t.id,type:"shots"})});Promise.all(r).then(function(){o&&o(null,e)}).catch(function(t){console.log(t)})}})},newSequence:function(t,e){var s=t.commit,i=(t.state,e.sequence),n=e.callback;s(Ms),Xa.newSequence(i,function(t,e){t?s(Rs):s(qs,e),n&&n(t,e)})},newEpisode:function(t,e){var s=t.commit;t.state;s(Ns),Xa.newEpisode(e.episode,function(t,i){t?s(Us):s(Fs,i),e.callback&&e.callback(t,i)})},editShot:function(t,e){var s=t.commit;t.state;s(Cs),Xa.updateShot(e.data,function(t,i){t?s(Os):s(Es,i),e.callback&&e.callback(t)})},editEpisode:function(t,e){var s=t.commit;t.state;return new Promise(function(t,i){s(xs),Xa.updateEpisode(e,function(e,n){e?(s(Ls),i(e)):(s(js,n),t(n))})})},editSequence:function(t,e){var s=t.commit;t.state;return new Promise(function(t,i){s(As),Xa.updateSequence(e,function(e,n){e?(s(Ps),i(e)):(s(ws,n),t(n))})})},deleteShot:function(t,e){var s=t.commit,i=(t.state,e.shot),n=e.callback;s(Bs),Xa.deleteShot(i,function(t){t?s(Gs):s(Vs,i),n&&n(t)})},deleteEpisode:function(t,e){var s=t.commit;t.state;return new Promise(function(t,i){s(Hs),Xa.deleteEpisode(e,function(n){n?(s(Ys),i(n)):(s(Qs,e),t(e))})})},deleteSequence:function(t,e){var s=t.commit;t.state;return new Promise(function(t,i){s(Ws),Xa.deleteSequence(e,function(n){n?s(Ks):s(zs,e),n?i(n):t(e)})})},restoreShot:function(t,e){var s=t.commit;t.state;s(Xs);var i=e.shot;Xa.restoreShot(i,function(t){t?s(Js):s(Zs,i),e.callback&&e.callback(t)})},uploadShotFile:function(t,e){var s=t.commit,i=t.state,n=t.rootGetters;s(Ts);var a=n.currentProduction;Xa.postCsv(a,i.shotsCsvFormData,function(t){s(Ss),e&&e(t)})},displayMoreShots:function(t){var e=t.commit;e(ai)},displayMoreSequences:function(t){var e=t.commit;e(oi)},displayMoreEpisodes:function(t){var e=t.commit;e(ri)},setShotSearch:function(t,e){var s=t.commit;s(ti,e)},saveShotSearch:function(t,e){var s=t.commit,i=t.rootGetters;return new Promise(function(t,n){var a=Wo.shotSearchQueries.find(function(t){return t.name===e}),o=i.currentProduction;a?t():fn.createFilter("shot",e,e,o.id,function(e,i){s(ei,{searchQuery:i,production:o}),e?n(e):t(i)})})},removeShotSearch:function(t,e){var s=t.commit,i=t.rootGetters;return new Promise(function(t,n){var a=i.currentProduction;fn.removeFilter(e,function(i){s(si,{searchQuery:e,production:a}),i?n(i):t()})})},initSequences:function(t){t.commit;var e=t.dispatch,s=t.state,i=t.rootState,n=t.rootGetters;return new Promise(function(t,a){var o=i.route.params.production_id;e("setLastProductionScreen","sequences"),n.currentProduction.id!==o&&e("setProduction",o),0!==s.sequences.length&&s.sequences[0].production_id===o||e("loadShots",function(s){s?a(s):(e("computeSequenceStats"),t())})})},setSequenceSearch:function(t,e){var s=t.commit;s(ii,e)},setSequenceListScrollPosition:function(t,e){var s=t.commit;s(li,e)},computeSequenceStats:function(t){var e=t.commit;e(ui)},initEpisodes:function(t){t.commit;var e=t.dispatch,s=t.state,i=t.rootState,n=t.rootGetters;return new Promise(function(t,a){var o=i.route.params.production_id;e("setLastProductionScreen","episodes"),n.currentProduction.id!==o&&e("setProduction",o),0!==s.episodes.length&&s.episodes[0].production_id===o||e("loadShots",function(s){s?a(s):(e("computeEpisodeStats"),t())})})},setEpisodeSearch:function(t,e){var s=t.commit;s(ni,e)},setEpisodeListScrollPosition:function(t,e){var s=t.commit;s(di,e)},computeEpisodeStats:function(t){var e=t.commit;e(pi)}},Ho=(y={},Object(A["a"])(y,hs,function(t){Bo.shots=[],Bo.shotIndex={},t.shotMap={},t.shotValidationColumns=[],t.sequences=[],t.episodes=[],t.isShotsLoading=!0,t.isShotsLoadingError=!1,t.sequenceIndex={},t.displayedShots=[],t.displayedShotsLength=0,t.shotSearchQueries=[],t.displayedSequences=[],t.displayedSequencesLength=0,t.displayedEpisodes=[],t.displayedEpisodesLength=0}),Object(A["a"])(y,_s,function(t){t.isShotsLoading=!1,t.isShotsLoadingError=!0}),Object(A["a"])(y,fs,function(t,e){var s=e.production,i=e.shots,n=e.userFilters,a={},o=!1,r=!1,c=!1;i=Sn(i),t.shotMap={},i.forEach(function(e){e.production_id=s.id,e.tasks.forEach(function(t){Vo.populateTask(t,e),a[t.task_type_id]=!0}),!o&&e.data.fps&&(o=!0),!r&&e.data.frame_in&&(r=!0),!c&&e.data.frame_out&&(c=!0),t.shotMap[e.id]=e}),t.isShotsLoading=!1,t.isShotsLoadingError=!1,t.nbValidationColumns=Object.keys(a).length,t.isFps=o,t.isFrameIn=r,t.isFrameOut=c,Bo.shotIndex=Qn(i),t.displayedShots=i.slice(0,Ra),t.displayedShotsLength=i.length,Bo.shots=i;var l=t.displayedShots.length,d=t.nbValidationColumns;t.shotSelectionGrid=Rn(l,d),n.shot&&n.shot[s.id]?t.shotSearchQueries=n.shot[s.id]:t.shotSearchQueries=[]}),Object(A["a"])(y,ei,function(t,e){var s=e.searchQuery;t.shotSearchQueries.push(s),t.shotSearchQueries=Pn(t.shotSearchQueries)}),Object(A["a"])(y,si,function(t,e){var s=e.searchQuery,i=t.shotSearchQueries.findIndex(function(t){return t.name===s.name});i>=0&&t.shotSearchQueries.splice(i,1)}),Object(A["a"])(y,vs,function(t,e){var s={};e.forEach(function(e){if(s[e.id]=e,e.parent_id){var i=t.episodeMap[e.parent_id];Object.assign(e,{episode_id:i.id,episode_name:i.name})}}),t.sequenceMap=s,t.sequences=Pn(e),t.sequenceIndex=Yn(t.sequences),t.displayedSequences=t.sequences.slice(0,Ra),t.displayedSequencesLength=t.sequences.length}),Object(A["a"])(y,ys,function(t,e){var s={};e.forEach(function(t){s[t.id]=t}),t.episodeMap=s,t.episodes=Pn(e),t.episodeIndex=Xn(t.episodes),t.displayedEpisodes=t.episodes.slice(0,Ra),t.displayedEpisodesLength=t.episodes.length}),Object(A["a"])(y,gs,function(t,e){e.tasks.forEach(function(t){Vo.populateTask(t,e)}),e.tasks=Pn(e.tasks),t.shotMap[e.id]=e}),Object(A["a"])(y,bs,function(t,e){t.shotsCsvFormData=e}),Object(A["a"])(y,Ts,function(t){}),Object(A["a"])(y,Ss,function(t){t.shotsCsvFormData=null}),Object(A["a"])(y,Kt,function(t,e){t.openProductions=e}),Object(A["a"])(y,Cs,function(t,e){t.editShot.isLoading=!0,t.editShot.isError=!1}),Object(A["a"])(y,Os,function(t){t.editShot.isLoading=!1,t.editShot.isError=!0}),Object(A["a"])(y,Es,function(t,e){var s=t.shotMap[e.id],i=t.sequences.find(function(t){return t.id===e.parent_id});if(e.sequence_name=i.name,s)Object.assign(s,e);else{Bo.shots.push(e),Bo.shots=Sn(Bo.shots),t.shotMap[e.id]=e;var n=t.displayedShots.length,a=t.nbValidationColumns;t.shotSelectionGrid=Rn(n,a)}t.editShot={isLoading:!1,isError:!1},Bo.shotIndex=Qn(Bo.shots),t.shotCreated=e.name,e.data.fps&&(t.isFps=!0),e.data.frame_in&&(t.isFrameIn=!0),e.data.frame_out&&(t.isFrameOut=!0)}),Object(A["a"])(y,As,function(t,e){}),Object(A["a"])(y,Ps,function(t){}),Object(A["a"])(y,ws,function(t,e){var s=t.sequenceMap[e.id];s&&Object.assign(s,e),t.sequenceIndex=Yn(t.sequences)}),Object(A["a"])(y,xs,function(t,e){}),Object(A["a"])(y,Ls,function(t){}),Object(A["a"])(y,js,function(t,e){var s=t.episodeMap[e.id];s&&Object.assign(s,e),t.episodeIndex=Xn(t.episodes)}),Object(A["a"])(y,Bs,function(t){t.deleteShot={isLoading:!0,isError:!1}}),Object(A["a"])(y,Gs,function(t){t.deleteShot={isLoading:!1,isError:!0}}),Object(A["a"])(y,Vs,function(t,e){var s=t.shotMap[e.id];if(s.tasks.length>0)s.canceled=!0;else{var i=Bo.shots.findIndex(function(t){return t.id===e.id}),n=t.displayedShots.findIndex(function(t){return t.id===e.id});Bo.shots.splice(i,1),t.displayedShots.splice(n,1),t.shotMap[e.id]=void 0}t.deleteShot={isLoading:!1,isError:!1},Bo.shotIndex=Qn(Bo.shots)}),Object(A["a"])(y,Ws,function(t){}),Object(A["a"])(y,Ks,function(t){}),Object(A["a"])(y,zs,function(t,e){var s=t.sequences.findIndex(function(t){return t.id===e.id}),i=t.sequences.findIndex(function(t){return t.id===e.id});t.sequences.splice(s,1),t.displayedSequences.splice(i,1),t.sequenceMap[e.id]=void 0,t.sequenceIndex=Yn(t.sequences)}),Object(A["a"])(y,Hs,function(t){}),Object(A["a"])(y,Ys,function(t){}),Object(A["a"])(y,Qs,function(t,e){var s=t.episodes.findIndex(function(t){return t.id===e.id}),i=t.episodes.findIndex(function(t){return t.id===e.id});t.episodes.splice(s,1),t.displayedEpisodes.splice(i,1),t.episodeMap[e.id]=void 0,t.episodeIndex=Xn(t.episodes)}),Object(A["a"])(y,Xs,function(t){t.restoreShot={isLoading:!0,isError:!1}}),Object(A["a"])(y,Js,function(t){t.restoreShot={isLoading:!1,isError:!0}}),Object(A["a"])(y,Zs,function(t,e){var s=t.shotMap[e.id];s.canceled=!1,t.restoreShot={isLoading:!1,isError:!1},Bo.shotIndex=Qn(Bo.shots)}),Object(A["a"])(y,wt,function(t,e){var s=e.comment,i=e.taskId,n=Vo.getTask(i);if(n){var a=t.shotMap[n.entity_id],o=Vo.getTaskStatus(s.task_status_id);if(a){var r=Object(mn["a"])({},a.validations);delete r[n.task_type_name],k.a.set(n,"task_status_id",o.id),k.a.set(n,"task_status_color",o.color),k.a.set(n,"task_status_name",o.name),k.a.set(n,"task_status_short_name",o.short_name),k.a.set(r,n.task_type_name,Object(mn["a"])({},n)),delete a.validations,k.a.set(a,"validations",r)}}}),Object(A["a"])(y,ti,function(t,e){var s=Ua(Bo.shots),i=Zn(Bo.shotIndex,e)||Bo.shots;i=Na(s,i,e)||[],t.displayedShots=i.slice(0,Ra),t.displayedShotsLength=i.length,t.shotSearchText=e;var n=t.displayedShots.length,a=t.nbValidationColumns;t.shotSelectionGrid=Rn(n,a)}),Object(A["a"])(y,ii,function(t,e){var s=Zn(t.sequenceIndex,e)||t.sequences;t.displayedSequences=s.slice(0,Ra),t.displayedSequencesLength=s.length,t.sequenceSearchText=e}),Object(A["a"])(y,ni,function(t,e){var s=Zn(t.episodeIndex,e)||t.episodes;t.displayedEpisodes=s.slice(0,Ra),t.displayedEpisodesLength=s.length,t.episodeSearchText=e}),Object(A["a"])(y,Ds,function(t){}),Object(A["a"])(y,$s,function(t){}),Object(A["a"])(y,Is,function(t,e){var s=t.sequenceMap[e.parent_id],i=t.episodeMap[s.parent_id];e.production_id=e.project_id,e.sequence_name=s.name,e.sequence_id=s.id,e.episode_name=i.name,e.episode_id=i.id,e.preview_file_id="",e.tasks=[],e.validations=[],e.data={},Bo.shots.push(e),Bo.shots=Sn(Bo.shots),t.displayedShots=Bo.shots.slice(0,Ra),t.shotMap[e.id]=e,Bo.shotIndex=Qn(Bo.shots);var n=t.displayedShots.length,a=t.nbValidationColumns;t.shotSelectionGrid=Rn(n,a),e.data.fps&&(t.isFps=!0),e.data.frame_in&&(t.isFrameIn=!0),e.data.frame_out&&(t.isFrameOut=!0)}),Object(A["a"])(y,Ms,function(t){}),Object(A["a"])(y,Rs,function(t){}),Object(A["a"])(y,qs,function(t,e){if(e.parent_id){var s=t.episodeMap[e.parent_id];e.episode_id=s.id,e.episode_name=s.name}t.sequences.push(e),t.sequences=Pn(t.sequences),t.sequenceMap[e.id]=e,t.sequenceIndex=Yn(t.sequences)}),Object(A["a"])(y,Ns,function(t){}),Object(A["a"])(y,Us,function(t){}),Object(A["a"])(y,Fs,function(t,e){t.episodes.push(e),t.episodes=Pn(t.episodes),t.displayedEpisodes=t.episodes,t.episodeMap[e.id]=e}),Object(A["a"])(y,jt,function(t,e){e.forEach(function(e){if(e){var s=t.shotMap[e.entity_id];if(s){var i=Object(mn["a"])({},s.validations);k.a.set(i,e.task_type_name,e),delete s.validations,k.a.set(s,"validations",i)}}})}),Object(A["a"])(y,ai,function(t,e){var s=Bo.shots;t.shotSearchText.length>0&&(s=Zn(Bo.shotIndex,t.shotSearchText)),t.displayedShots=s.slice(0,t.displayedShots.length+Ra);var i=t.displayedShots.length,n=t.nbValidationColumns;t.shotSelectionGrid=Rn(i,n)}),Object(A["a"])(y,oi,function(t,e){var s=t.sequences;t.sequenceSearchText.length>0&&(s=Zn(t.sequenceIndex,t.sequenceSearchText)),t.displayedSequences=s.slice(0,t.displayedSequences.length+Ra)}),Object(A["a"])(y,ri,function(t,e){var s=t.episodes;t.episodeSearchText.length>0&&(s=Zn(t.episodeIndex,t.episodeSearchText)),t.displayedEpisodes=s.slice(0,t.displayedEpisodes.length+Ra)}),Object(A["a"])(y,ne,function(t,e){t.shotSearchText="",t.sequenceSearchText=""}),Object(A["a"])(y,nn,function(t,e){var s=e.entityId,i=(e.taskId,e.previewId),n=t.shotMap[s];n&&(n.preview_file_id=i)}),Object(A["a"])(y,ci,function(t,e){t.shotListScrollPosition=e}),Object(A["a"])(y,li,function(t,e){t.sequenceListScrollPosition=e}),Object(A["a"])(y,di,function(t,e){t.episodeListScrollPosition=e}),Object(A["a"])(y,Nt,function(t,e){t.shotSelectionGrid[0]&&(t.shotSelectionGrid[e.x][e.y]=!1)}),Object(A["a"])(y,Rt,function(t,e){t.shotSelectionGrid[0]&&(t.shotSelectionGrid[e.x][e.y]=!0)}),Object(A["a"])(y,Ft,function(t,e){t.shotSelectionGrid=Nn(t.shotSelectionGrid)}),Object(A["a"])(y,ui,function(t){t.sequenceStats=Fn(Bo.shots,"sequence_id")}),Object(A["a"])(y,pi,function(t){t.episodeStats=Fn(Bo.shots,"episode_id")}),Object(A["a"])(y,Pt,function(t,e){var s=t.shotMap[e.entity_id];s&&e&&(e=Vo.populateTask(e,s),s.tasks.push(e),k.a.set(s.validations,e.task_type_name,e))}),Object(A["a"])(y,on,function(t){Bo.shots=[],Bo.shotIndex={},Object(mn["a"])({},Go)}),y),Qo={state:Wo,getters:zo,actions:Ko,mutations:Ho};k.a.use(E["a"]);var Yo={assetTypes:pn,assets:Ya,breakdown:io,customActions:uo,login:_o,main:bo,people:fa,playlists:Uo,productions:qa,notifications:wo,shots:Qo,tasks:Pa,taskTypes:Ta,taskStatus:ca,user:$o},Xo=new E["a"].Store({getters:i,strict:!0,modules:Yo}),Zo={logIn:function(t,e,s){C.a.post("/api/auth/login").send({email:t,password:e}).end(function(t,e){if(t)return s(t);if(e.body.login){var i=e.body.user;Xo.commit(ki,i),s(null,i)}else Xo.commit(Ti),s(new Error("Login failed"))})},logout:function(t){C.a.get("/api/auth/logout").end(function(e,s){if(e)return t(e);Xo.commit(bi),t()})},isServerLoggedIn:function(t){C.a.get("/api/auth/authenticated").end(function(e,s){if(e&&401===s.statusCode)Xo.commit(Ti),t(null);else if(e)Xo.commit(Ti),t(e);else if(null===s.body)Xo.commit(Ti),t(e);else{var i=s.body.user;Xo.commit(ki,i),t(null,i)}})},requireAuth:function(t,e,s){var i=function(){Xo.state.user.isAuthenticated?s():s({path:"/login",query:{redirect:t.fullPath}})};null===Xo.state.user.user?Zo.isServerLoggedIn(function(e){e?s({path:"/server-down",query:{redirect:t.fullPath}}):i()}):i()},isPasswordValid:function(t,e){return t.length>6&&t===e}},Jo=Zo,tr=s("qSUR"),er={assets:{cast_in:"Cast in",delete_error:"An error occured while deleting this asset. There are probably data linked to it. Are you sure this asset type has no task linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_fail:"Creation or edition failed, an error occured.",edit_success:"Asset {name} successfully edited.",edit_title:"Edit asset",empty_list:"There is no asset in the production. What about creating some?",new_asset:"Add an asset",new_assets:"Add assets",new_success:"Asset {name} successfully created.",no_cast_in:"This asset is not cast in any shot.",number:"asset | assets",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this asset.",tasks:"Asset tasks",title:"Assets",fields:{description:"Description",name:"Asset",production:"Prod",type:"Type"}},asset_types:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this asset type. There are probably data linked to it. Are you sure this asset type has no asset linked to it?",edit_title:"Edit asset type",new_asset_type:"Add an asset type",number:"asset type | asset types",title:"Asset Types",fields:{name:"Name"}},breakdown:{all_assets:"All available assets",select_shot:"Please select a shot on the left to manage its casting.",selected_shot:"Assets in {sequence_name} / {name} casting",save_error:"An error occured while saving breakdown.",title:"Breakdown"},comments:{add_comment:"Add a comment...",change_preview:"Change preview",empty_text:"This comment is empty",edit_title:"Edit comment",post_status:"Post status",retake:"Retake",validated:"Validated!",validation_required:"Validation Required",fields:{text:"text"}},custom_actions:{delete_text:"Are you sure you want to remove custom action {name} from your database?",delete_error:"An error occured while deleting this custom custom action.",edit_title:"Edit a custom action",new_custom_action:"Add a custom action",number:"custom action | custom actions",run_for_selection:"Run custom action for selected tasks:",title:"Custom Actions",fields:{name:"Name",url:"URL",entity_type:"Entity Type"},entity_types:{all:"All",shot:"Shot",asset:"Asset"}},episodes:{delete_error:"An error occured while deleting this episode. There are probably data linked to it. Are you sure this episode has no sequence linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_title:"Edit episode",empty_list:"There is no episode in the production. What about creating some?",new_episode:"New episode",number:"episode | episodes",title:"Episodes",fields:{name:"name",description:"description"}},login:{login:"Log in",login_failed:"Log in failed, please verify your credentials",title:"Log in to Kitsu",fields:{email:"Email",password:"Password"}},main:{add:"add",admin:"Admin",cancel:"Cancel",clear_selection:"Clear current selection",delete_text:"Are you sure you want to remove {name} from your database?",close:"Close",confirmation:"Confirm",confirmation_and_stay:"Confirm and stay",empty_comment:"Empty comment",info:"Information",or:"or",no:"no",loading_error:"An error occured while loading data.",logout:"Logout",profile:"Profile",production:"Production",studio:"Studio",save:"Save",user:"User",yes:"yes",csv:{export_file:"Export",error_upload:"An error occured while uploading your CSV file.",import_file:"Import",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:"}},menu:{assign_tasks:"Assign tasks",change_status:"Change status",create_tasks:"Create tasks",run_custom_action:"Run custom action"},not_found:{text:"There was something wrong with the link you clicked on, we encourage you to come back on the home page.",title:"Page not found... are your looking for something you deleted?"},notifications:{and_change_status:"and changed status to",commented_on:"commented on",title:"Notifications",with_preview:"with a preview"},people:{delete_text:"Are you sure you want to remove {personName} from your database?",delete_error:"An error occured while deleting this person. There are probably data linked to it. Are you sure this person has no assignation or wrote no comment?",edit_title:"Edit person",new_person:"Add a new employee",persons:"person | persons",running_tasks:"Running tasks",title:"People",csv:{import_file:"Import a .csv file",export_file:"Download as a .csv file",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:",error_upload:"An error occured while uploading your CSV file."},fields:{first_name:"First name",last_name:"Last name",email:"Email",phone:"Phone",role:"Role",old_password:"Current password",password:"New password",password_2:"New password (repeat)",active:"Active"},list:{name:"Name",email:"Email",phone:"Phone",role:"Role",active:"Active"},role:{admin:"Administrator",manager:"Supervisor",user:"CG Artist"}},playlists:{add_shots:"Select shots",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this playlist.",edit_title:"Edit playlist",loading_error:"A server error occured. Playlists cannot be loaded.",new_playlist:"Add a playlist",no_playlist:"There is currently no playlist for this project.",no_selection:"Please select a playlist on the left.",no_sequence_for_episode:"There is no sequence for this episode",no_shot_for_production:"There is no shot for this production",select_shot:"Please select a shot in the right column",select_playlist:"Please select a playlist in the left column",title:"Playlists",remove:"remove",fields:{name:"Name"}},productions:{current:"Selected production",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this production. There are probably data linked to it. Are you sure this production has no task, shot or asset linked to it?",edit_title:"Edit production",new_production:"Add a production",number:"production | productions",picture:"Change picture",title:"Productions",home:{create_new:"Create a new production",empty:"You don't have any production open. What about creating a new one?",no_task:"You have no task assigned. See your supervisor to see what you can do!",title:"Running Productions",welcome:"Welcome to Kitsu"},fields:{name:"Name",status:"Status"},status:{closed:"Close",open:"Open"}},profile:{info_title:"Information",language:"Language",password_title:"Change password",timezone:"Timezone",title:"Your Profile",avatar:{title:"Change avatar"},change_password:{button:"Change password",error:"An error occured while changing password. Please verify your current password.",success:"Your password was successfully changed!",unvalid:"Your new password confirmation doesn't match or your password is too short (7 chars, at least, is expected)."},save:{button:"Save changes",error:"An error occured while saving changes"}},task_status:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task status. There are probably data linked to it. Are you sure this task status has no task linked to it?",edit_title:"Edit task status",number:"task status | task status",new_task_status:"Add a task status",title:"Task Status",fields:{color:"Color",is_reviewable:"Is reviewable",is_done:"Is done",name:"Name",short_name:"Short name"}},task_types:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task type. There are probably data linked to it. Are you sure this task type has no task linked to it?",edit_title:"Edit task type",new_task_type:"Add a task type",number:"task type | task types",title:"Task Types",fields:{name:"Name",color:"Color",priority:"Priority",dedicated_to:"For"}},sequences:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this sequence. There are probably data linked to it. Are you sure this sequence has no shot linked to it?",edit_title:"Edit sequence",empty_list:"There is no sequence in the production. What about creating some?",new_sequence:"New sequence",number:"sequence | sequences",title:"Sequences",fields:{name:"name",description:"description"}},shots:{casting:"Shot casting",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this shot. There are probably data linked to it. Are you sure this shot has no task linked to it?",edit_success:"Shot {name} successfully edited.",edit_fail:"Creation or edition failed, an error occured.",edit_title:"Edit shot",empty_list:"There is no shot in the production. What about creating some?",new_shot:"Add a shot",new_shots:"Add shots",new_sequences:"Add sequences",new_episodes:"Add episodes",no_casting:"The shot casting is empty.",number:"shot | shots",manage:"Manage shots",new_success:"Shot {name} successfully created.",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this shot.",tasks:"Shot Tasks",title:"Shots",fields:{description:"Description",episode:"Episode",frame_in:"In",frame_out:"Out",fps:"FPS",name:"Shot",production:"Prod",sequence:"Sequence"}},server_down:{text:"Please contact your vendor support, your system administrator or your IT department to understand what is going wrong.",title:"Kitsu encountered an error while reaching its data API."},tasks:{add_preview:"Add preview",add_preview_error:"An error occured while adding preview.",assign:"Assign one task to: | Assign {nbSelectedTasks} tasks to:",back_to_list:"back to list",change_status_to:"Change task status to:",change_preview:"Change preview",clear_assignations:"clear assignations",create_for_selection:"Create task for each empty cell:",create_tasks:"Add tasks",create_tasks_shot:"Add tasks for current shots",create_tasks_shot_explaination:"You are going to create a new task for each shot of current list for the given task type. Do you want to continue?",create_tasks_shot_failed:"A server error occured while proceeding creations.",create_tasks_asset:"Add tasks for current assets",create_tasks_asset_explaination:"You are going to create a new task for each asset of current list for the given task type. Do you want to continue?",create_tasks_asset_failed:"A server error occured while proceeding creations.",current:"Task to do",current_status:"Current status :",delete_error:"An error occured while deleting task.",delete_comment:"Are you sure you want to delete last comment?",delete_comment_error:"An error occured while deleting comment",edit_comment:"Edit comment",done:"Done",download_pdf_file:"Download PDF file",feedback:"feedback",full_screen:"Display in full screen",my_tasks:"My tasks",next:"next task",no_assignation_right:"you are no allowed to manage assignations",no_comment:"There is currently no comment for this task.",no_preview:"There is currently no preview for this task.",preview:"Previews",previous:"previous task",set_preview:"Set this preview as thumbnail",set_preview_error:"An error occured while setting preview as thumbnail",set_preview_done:"This preview is used as thumbnail for the current entity.",select_preview_file:"Please select a picture from your hard drive to be used as a preview for the current task:",validation:"Validation",tasks:"Tasks",fields:{assignees:"Assignees",end_date:"End date",entity:"Entity",last_comment:"Last comment",production:"Prod",task_status:"Status",task_type:"Type"}},timesheets:{detail_level:"Detail level",done_tasks:"Done tasks",hours:"hours",month:"Month",time_spents:"Time Spent (hours)",title:"Timesheets",year:"Year"}},sr={people:{title:"Employés",picture:"Changer l'image",edit_title:"Modifier les informations de",new_person:"Ajouter un employé",delete_text:"Êtes vous sûr de vouloir retirer {personName} de la base de données?",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à elle. Etes vous sur que cette personne n'a aucune tâche assignée et n'a fait aucun commentaire ?",persons:"Personnes",running_tasks:"Tâches en cours",csv:{import_file:"Importer",export_file:"Télécharger",import_title:"Import employees from a CSV file",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionnez un fichier de votre disque dur :"},list:{name:"Nom",email:"Adresse Mail",phone:"Téléphone",role:"Rôle",active:"Actif"},fields:{first_name:"Prénom",last_name:"Nom",email:"Adresse email",phone:"Téléphone",role:"Rôle",active:"Actif",old_password:"Mot de passe actuel",password:"Nouveau mot de passe",password_2:"Répétez le nouveau mot de passe"},role:{admin:"Administrateur",manager:"Superviseur",user:"Graphiste"}},profile:{title:"Votre Profil",info_title:"Informations",password_title:"Changement de mot de passe",timezone:"Fuseau horaire",language:"Langue",save:{button:"Sauvegardez vos changements",error:"Une erreur est survenue pendant la sauvegarde de vos changememts."},avatar:{title:"Changer votre avatar"},change_password:{button:"Changez de mot de passe",success:"Votre mot de passe a été changé avec succès !",unvalid:"Les nouveaux mots de passe sont différents ou votre mot de passe est trop court (7 caractères minimum).",error:"Une erreur s'est produite lors du changement de mot de passe. Veuillez vérifier votre mot de pass actuel."}},main:{add:"Ajouter",profile:"Profil",logout:"Se déconnecter",save:"Enregistrer",cancel:"Annuler",close:"Fermer",or:"ou",yes:"oui",no:"non",info:"Information",confirmation:"Confirmer",confirmation_and_stay:"Confirmer et rester",clear_selection:"Effacer la sélection",delete_text:"Etes vous sûr de vouloir supprimer {name} de la base de données ?",loading_error:"Une erreur est survenue en chargeant les données.",user:"Utilisateur",production:"Production",studio:"Studio",admin:"Admin",back_to_list:"retour à la liste",empty_comment:"Commentaire vide",csv:{import_file:"Importer",export_file:"Exporter",import_title:"Importer depuis un .csv",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionner un fichier depuis votre dossier :",error_upload:"Une erreur est survenue en téleversant votre fichier .csv."}},menu:{assign_tasks:"Assigner des tâches",create_tasks:"Créer des tâches",change_status:"Changer le statut",run_custom_action:"Lancer des actions"},login:{title:"Se connecter à Kitsu",login:"Se connecter",login_failed:"La connexion a échoué, vérifiez vos identifiants",fields:{email:"Adresse Mail",password:"Mot de passe"}},productions:{title:"Productions",edit_title:"Modifier la production",new_production:"Ajouter une production",number:"production | productions",current:"Production sélectionnée ",home:{title:"Productions en cours",welcome:"Bienvenue sur Kitsu",empty:"Vous n'avez pas de production ouverte, voulez vous en créer une nouvelle ?",create_new:"Créer une nouvelle production",no_task:"Vous n'avez pas de tâches assignées. Demandez à votre superviseur ce que vous pouvez faire !"},fields:{name:"Nom",status:"État"},status:{open:"Ouvert",closed:"Fermé"},delete_text:"Êtes vous sûr de vouloir retirer {name} de la base de données?",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à cette production. Etes vous sur que cette production n'a aucune tâche, shot ou asset lié ?"},comments:{retake:"Reprise",validated:"Validé !",validation_required:"Validation requise",add_comment:"Ajouter un commentaire...",post_status:"Envoyer l'état",empty_text:"Ce commentaire est vide",edit_title:"Modifier le commentaire",fields:{text:"Texte"}},tasks:{preview:"Pré-visualisation",validation:"Validation",assign:"Assigner une tâche à : | Assigner {nbSelectedTasks} tâches à :",change_status_to:"Changer le statut de la tâche à : ",no_preview:"Il n'y a pas de previz pour cette tâche..",no_comment:"Il n'y a pas de commentaires pour cette tâche.",clear_assignations:"effacer les assignations",no_assignation_right:"vous n'êtes pas autorisé à gérer les assigations.",create_tasks:"Ajouter des tâches",create_tasks_shot:"Ajouter des tâches pour les plans affichés",create_tasks_shot_explaination:"Vous allez créer une nouvelle tâche pour chaque plan de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_shot_failed:"Une erreur serveur est survenue pendant la création des tâches.",create_tasks_asset:"Ajouter des tâches pour les assets affichés",create_tasks_asset_explaination:"Vous allez créer une nouvelle tâche pour chaque asset de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_asset_failed:"Une erreur serveur est survenue pendant la création des tâches.",current_status:"Statut actuel :",add_preview:"Ajouter une previz",add_preview_error:"Une erreur est survenue en ajoutant la preview.",set_preview:"Utilisez cette previz comme vignette",set_preview_error:"Une erreur est survenue en utilisant cette vignette.",set_preview_done:"Cette previz sert de vignette à l'entité courante.",select_preview_file:"Choisissez une preview sur votre disque dur:",delete_error:"Une erreur est survenue en supprimant la tâche.",feedback:"retours",my_tasks:"Mes tâches",tasks:"Tâches",current:"Tâches à faire",done:"Terminées",create_for_selection:"Créer une tâche pour chaque cellule vide :",download_pdf_file:"Télécharger le fichier PDF",full_screen:"Afficher en plein écran",delete_comment:"Êtes vous sûr de vouloir supprimer ce commentaire ?",delete_comment_error:"Une erreur est survenue en supprimant le commentaire.",previous:"Précédente",next:"Suivante",back_to_list:"Retour à la liste",change_preview:"Modifier preview",fields:{task_type:"Type",production:"Prod",entity:"Entité",task_status:"Statut",last_comment:"Dernier commentaire",assignees:"Assignation",end_date:"Date de fin"}},timesheets:{title:"Feuille de temps",time_spents:"Temps passé (heures)",hours:"heures",done_tasks:"Tâches terminées",detail_level:"Niveau de détail",year:"Année",month:"Mois"},task_types:{title:"Types de tâches",edit_title:"Modifier le type de tâches",number:"type de tâche | types de tâches",new_task_type:"Ajouter un type de tâche",fields:{name:"Nom",color:"Couleur",priority:"Priorité",dedicated_to:"Pour"},delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du type de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce type de tâche ?"},task_status:{title:"Statut des tâches",edit_title:"Modifier statut",number:"statut | task statuts",new_task_status:"Ajouter un statut de tâche",fields:{name:"Nom",short_name:"Nom court",color:"Couleur",is_reviewable:"Est vérifiable",is_done:"Est terminé"},delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du statut de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce statut de tâche ?"},custom_actions:{title:"Actions",new_custom_action:"Ajouter une action personnalisée",edit_title:"Modifier une action personnalisée",number:"action pesonnalisée | actions personnalisées",run_for_selection:"Lancer une action personnalisée pour les tâche sélectionnées :",delete_text:"Êtes-vous sûr de supprimer l'action personnalisée {name} de la base de données?",delete_error:"Une erreur est survenue en supprimant l'action personnalisée.",fields:{name:"Nom",url:"URL",entity_type:"Type d'entité"}},asset_types:{title:"Types d'assets",edit_title:"Modifier le type d'asset",number:"type d'asset | types d'assets",new_asset_type:"Ajouter un type d'asset",fields:{name:"Nom"},delete_text:"Êtes vous sur de vouloir enlever {name} de la base de données ?",delete_error:"Une erreur est survenue en supprimant un type d'asset. Êtes vous sûr qu'aucun asset est lié à ce type d'asset?"},assets:{title:"Assets",edit_title:"Modifier asset",number:"asset | assets",new_asset:"Ajouter un asset",new_assets:"Ajouter des assets",edit_fail:"La création ou l'édition a échoué, une erreur est survenue.",new_success:"Asset {name} créé avec succès.",empty_list:"Il n'y a pas d'assets dans la production. Voulez vous en créer ?",fields:{name:"Asset",type:"Type",production:"Prod",description:"Description"},delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant l'asset, êtes vous sûr de vouloir que l'asset n'ait plus aucun lien ?",restore_text:"Êtes vous sûr de vouloir restaurer {name} dans votre base de données ?",restore_error:"Une erreur est survenue en restaurant l'asset.",tasks:"Tâches de fabrication",cast_in:"Présent dans",no_cast_in:"Cet asset n'apparait dans aucun shot."},shots:{title:"Plans",edit_title:"Modifier plan",number:"plan | plans",new_shot:"Ajouter un plan",new_shots:"Ajouter des plans",new_sequences:"Ajouter des séquences",new_episodes:"Ajouter des épisodes",manage:"Gérer les plans",edit_fail:"La création ou l'édition a échoué, une erreur est survenue.",new_success:"Plan {name} créé avec succès.",description:"Description",empty_list:"Il n'y a pas de shots dans la production. Voulez vous en créer ?",fields:{name:"Plan",episode:"Épisode",sequence:"Séquence",frame_in:"In",frame_out:"Out",fps:"FPS",description:"Description",production:"Prod"},delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que le plan n'a plus aucun lien ?",restore_text:"Etes vous sûr de vouloir restorer {name} dans la base de données ?",restore_error:"Une erreur est survenue en restorant le plan.",tasks:"Tâches de fabrication",casting:"Casting",no_cast_in:"Le casting du plan est vide."},sequences:{title:"Sequences",number:"sequence | sequences",new_sequence:"Nouvelle sequence",edit_title:"Éditer sequence",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas de séquence dans la description. Pourquoi pas en créer quelques uns?",fields:{name:"Nom",description:"Description"}},episodes:{title:"Episodes",number:"episode | episodes",new_episode:"Nouvelle episode",edit_title:"Éditer episode",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas de séquence dans la description. Pourquoi pas en créer quelques uns?",fields:{name:"Nom",description:"Description"}},breakdown:{title:"Casting",select_shot:"Sélectionnez un shot à gauche pour gérer son casting",selected_shot:"Assets présents dans le casting de {sequence_name} / {name}",all_assets:"Tous les assets disponibles",save_error:"Une erreur est survenue en sauvegardant le casting."},playlists:{title:"Playlists",new_playlist:"Ajouter une playlist",loading_error:"Une erreur serveur est apparue, les playlists ne peuvent pas être chargées.",no_selection:"Séléctionnez une playlist sur la gauche.",delete_text:"Êtes vous sûr de vouloir supprimer {name} de la base de données ?",delete_error:"Une erreur est survenue en supprimant la playlist."},notifications:{title:"Notifications",commented_on:"a commenté",and_change_status:"et changé le statut à",with_preview:"avec une version"},server_down:{title:"Kitsu a rencontré une erreur en communiquant avec son API de données.",text:"Contactez votre fournisseur, votre administrateur système ou votre département informatique pour comprendre ce qui ne va pas."}},ir={en:er,fr:sr};k.a.use(tr["a"]);var nr=new tr["a"]({locale:"en",fallbackLocale:"en",messages:ir}),ar=nr,or={setLocale:function(){ar.locale=Xo.state.user.user.locale.substring(0,2),Mn.a.locale(ar.locale)}},rr=or,cr={setTimezone:function(){var t=Xo.state.user.user.timezone||Mn.a.tz.guess();Mn.a.tz.setDefault(t)}},lr=function(t){var e=["loadProductionStatus","loadTaskStatuses","loadAssetTypes","loadTaskTypes","loadPeople","loadOpenProductions","loadCustomActions","loadUserSearchFilters","loadNotifications"];yn.a.mapSeries(e,Xo.dispatch,function(e){e&&console.log("An init operation failed: ",e),Xo.commit(_i),t()})},dr=lr,ur=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item"},[t.currentAsset?s("entity-thumbnail",{staticClass:"asset-thumbnail",attrs:{entity:t.currentAsset,"empty-width":100,"empty-height":66.6}}):t._e()],1),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:t.title}})],1)])]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:t.$t("assets.tasks")}}),s("entity-task-list",{attrs:{entries:t.currentAsset?t.currentAsset.tasks:[],"is-loading":!t.currentAsset,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:t.$t("main.info")}}),t.currentAsset?s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("assets.fields.description")))]),s("description-cell",{attrs:{entry:t.currentAsset}})],1)])]):t._e()],1)]),s("div",{staticClass:"asset-casted-in"},[s("page-subtitle",{attrs:{text:t.$t("assets.cast_in")}}),t.currentAsset?s("div",t._l(t.currentAsset.castInShotsBySequence,function(e){return t.currentAsset.castInShotsBySequence[0].length>0?s("div",{key:e.length>0?e[0].sequence_name:"",staticClass:"sequence-shots"},[s("div",{staticClass:"shot-sequence"},[t._v("\n          "+t._s(e.length>0?e[0].sequence_name:"")+"\n        ")]),s("div",{staticClass:"shot-list"},t._l(e,function(e){return s("router-link",{key:e.shot_id,staticClass:"shot-link",attrs:{to:{name:"shot",params:{production_id:t.currentProduction.id,shot_id:e.shot_id}}}},[s("entity-thumbnail",{attrs:{entity:e,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[t._v(t._s(e.name))]),e.nb_occurences>1?s("span",[t._v("\n                ("+t._s(e.nb_occurences)+")\n              ")]):t._e()])],1)}))]):s("div",[t._v("\n        "+t._s(t.$t("assets.no_cast_in"))+"\n      ")])})):s("table-info",{attrs:{"is-loading":t.castIn.isLoadin,"is-error":t.castIn.isError}})],1)])},pr=[],mr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[t.entry.description&&t.entry.description.length>0?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltipOptions,expression:"tooltipOptions"}],staticClass:"description",domProps:{innerHTML:t._s(t.compileMarkdown(t.shortenText(t.entry.description,20)))},on:{click:t.onClick}}):t._e()])},hr=[],fr=s("DlQD"),_r=s.n(fr),vr=(s("9XZr"),{generateNextName:function(t){var e=t.match(/\d+$/);if(e){var s=e[0],i=t.substring(0,t.length-s.length),n=parseInt(s)+1;return i+String(n).padStart(s.length,"0")}return""},shortenText:function(t,e){var s=t||"";return void 0!==t&&t.length>e&&(s=t.slice(0,e)+"...",s=s.replace(/\n/g," ")),s}}),yr={name:"description-cell",data:function(){return{isOpen:!1,timeout:null}},components:{},props:{entry:{type:Object,default:function(){}}},computed:Object(mn["a"])({},Object(E["c"])([]),{tooltipOptions:function(){return{content:this.compileMarkdown(this.entry.description),show:this.isOpen,trigger:"manual",delay:{hide:5e3}}}}),methods:Object(mn["a"])({},Object(E["b"])([]),{compileMarkdown:function(t){return _r()(t||"")},shortenText:vr.shortenText,onClick:function(){var t=this;this.isOpen=!this.isOpen,this.isOpen?this.timeout=setTimeout(function(){t.isOpen=!1},3e3):clearTimeout(this.timeout)}})},gr=yr,kr=(s("D063"),s("KHd+")),br=Object(kr["a"])(gr,mr,hr,!1,null,"0996ec98",null),Tr=br.exports,Sr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h1",{staticClass:"title"},[t._v(t._s(t.text))])},Cr=[],Er={name:"page-title",props:{text:{default:"",type:String}}},Or=Er,Ar=(s("MgO2"),Object(kr["a"])(Or,Sr,Cr,!1,null,"33fe5480",null)),wr=Ar.exports,Pr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"subtitle"},[t._v(t._s(t.text))])},xr=[],jr={name:"page-subtitle",props:{text:{default:"",type:String}}},Lr=jr,Dr=(s("Hmap"),Object(kr["a"])(Lr,Pr,xr,!1,null,"26f88739",null)),Ir=Dr.exports,$r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isPreview&&t.withLink?s("a",{style:{width:t.emptyWidth+"px",height:t.emptyHeight+"px"},attrs:{href:t.originalPath,target:"_blank"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.thumbnailPath,expression:"thumbnailPath"}],staticClass:"thumbnail-picture",style:t.imgStyle})]):t.isPreview&&!t.withLink?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.thumbnailPath,expression:"thumbnailPath"}],staticClass:"thumbnail-picture",staticStyle:{}}):s("span",{class:{"thumbnail-picture":!0,"thumbnail-empty":!0,square:t.square},style:{width:t.emptyWidth+"px",height:t.emptyHeight+"px"}})},Mr=[],qr={name:"entity-thumbnail",props:{entity:{default:function(){},type:Object},square:{default:!1,type:Boolean},width:{default:null,type:Number},height:{default:null,type:Number},emptyWidth:{default:50,type:Number},emptyHeight:{default:30,type:Number},previewFileId:{default:null,type:String},withLink:{default:!0,type:Boolean}},computed:{originalPath:function(){return"/api/pictures/originals/preview-files/"+this.entity.preview_file_id+".png"},isPreview:function(){return this.entity.preview_file_id&&this.entity.preview_file_id.length>0},thumbnailPath:function(){var t=this.previewFileId||this.entity.preview_file_id;return this.square?"/api/pictures/thumbnails-square/preview-files/"+t+".png":"/api/pictures/thumbnails/preview-files/"+t+".png"},imgStyle:function(){var t={};return this.width&&(t.width=this.width+"px"),this.height&&(t.height=this.height+"px"),t}}},Rr=qr,Nr=(s("ZhwN"),Object(kr["a"])(Rr,$r,Mr,!1,null,"b7e1bb64",null)),Fr=Nr.exports,Ur=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("spinner",{staticClass:"table-info"}):t._e(),t.isError?s("div",{staticClass:"has-text-centered table-info"},[s("span",{staticClass:"tag is-danger"},[t._v("\n      "+t._s(t.$t("main.loading_error"))+"\n    ")])]):t._e()],1)},Br=[],Vr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isWhite?i("div",{staticClass:"has-text-centered"},[i("img",{attrs:{src:s("yeRK")}})]):i("div",{staticClass:"has-text-centered"},[i("img",{attrs:{src:s("XD0i")}})])},Gr=[],Wr={name:"spinner",props:{isWhite:{type:Boolean,default:!1}}},zr=Wr,Kr=(s("+fww"),Object(kr["a"])(zr,Vr,Gr,!1,null,"8dd6ba9c",null)),Hr=Kr.exports,Qr={name:"table-footer",components:{Spinner:Hr},props:{isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}}},Yr=Qr,Xr=(s("Dsq0"),Object(kr["a"])(Yr,Ur,Br,!1,null,"8ea81d3e",null)),Zr=Xr.exports,Jr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"status"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_status"))+"\n          ")]),s("th",{staticClass:"assignees"},[t._v("\n            "+t._s(t.$t("tasks.fields.assignees"))+"\n          ")])])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.taskType.id},[s("task-type-name",{staticClass:"type",attrs:{entry:{id:e.taskType.id,name:e.taskType.name,color:e.taskType.color},"production-id":t.currentProduction.id}}),s("td",{staticClass:"status"},[s("validation-tag",{attrs:{task:e}})],1),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},t._l(e.persons,function(t){return s("div",{key:t.id,staticClass:"avatar-wrapper"},[s("people-avatar",{key:e.id+"-"+t.id,staticClass:"person-avatar flexrow-item",attrs:{person:t,size:30,"font-size":15}})],1)}))])],1)}))])]):t._e()],1)},tc=[],ec=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("task-type-name",{attrs:{"task-type":t.entry,"production-id":t.productionId}})],1)},sc=[],ic=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.productionId?s("router-link",{attrs:{to:{name:"task-type",params:{production_id:t.productionId,task_type_id:t.taskType.id}}}},[s("span",{staticClass:"tag task-type-name",style:{"border-left":"4px solid "+t.color}},[t._v("\n    "+t._s(t.taskType.name)+"\n  ")])]):s("div",{staticClass:"tag task-type-name no-link",style:{"border-left":"4px solid "+t.color}},[t._v("\n  "+t._s(t.taskType.name)+"\n")])},nc=[],ac={name:"task-type-name",components:{},props:["taskType","productionId"],computed:Object(mn["a"])({},Object(E["c"])([]),{color:function(){return"#000000"===this.taskType.color.toUpperCase()?"#666":this.taskType.color}}),methods:Object(mn["a"])({},Object(E["b"])([]))},oc=ac,rc=(s("Z3BQ"),Object(kr["a"])(oc,ic,nc,!1,null,"40ec4d4a",null)),cc=rc.exports,lc={name:"task-type-cell",components:{TaskTypeName:cc},props:["entry","productionId"],computed:Object(mn["a"])({},Object(E["c"])([]),{color:function(){return"#000000"===this.entry.color.toUpperCase()?"#666":this.entry.color}}),methods:Object(mn["a"])({},Object(E["b"])([]))},dc=lc,uc=(s("+ZbS"),Object(kr["a"])(dc,ec,sc,!1,null,"b5b931e4",null)),pc=uc.exports,mc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-link",{class:{tag:!0,dynamic:!t.isStatic},style:{background:this.backgroundColor,color:this.color},attrs:{to:"/tasks/"+t.task.id}},[t._v("\n  "+t._s(t.task.task_status_short_name)+"\n")])},hc=[],fc={name:"validation-tag",props:{task:{default:function(){},type:Object},isStatic:{default:!1,type:Boolean}},computed:{backgroundColor:function(){return"wtg"===this.task.task_status_short_name?"#f5f5f5":"ip"===this.task.task_status_short_name?"#3273dc":"pndng"===this.task.task_status_short_name?"#ab26ff":"fin"===this.task.task_status_short_name?"#22d160":"rtk"===this.task.task_status_short_name?"#ff3860":"cfrm"===this.task.task_status_short_name?"#f1c40f":"recd"===this.task.task_status_short_name?"#1abc9c":this.task.task_status_color},color:function(){return"todo"!==this.task.task_status_short_name&&"wtg"!==this.task.task_status_short_name?"white":"#333"}}},_c=fc,vc=(s("9Sx9"),Object(kr["a"])(_c,mc,hc,!1,null,"fac9b568",null)),yc=vc.exports,gc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isLink?s("span",{staticClass:"avatar has-text-centered",style:{background:t.person.color,width:t.size+"px",height:t.size+"px","min-width":t.size+"px","min-height":t.size+"px","font-size":t.person.has_avatar?0:t.fontSize+"px"}},[s("router-link",{staticClass:"avatar-link",attrs:{to:{name:"person",params:{person_id:t.person.id}}}},[t.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.person.avatarPath,expression:"person.avatarPath"}]}):t._e(),t.person.has_avatar?t._e():s("span",[t._v("\n     "+t._s(t.person.initials)+"\n    ")])])],1):s("span",{staticClass:"avatar has-text-centered",style:{background:t.person.color,width:t.size+"px",height:t.size+"px","font-size":t.fontSize+"px"}},[t.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.person.avatarPath,expression:"person.avatarPath"}]}):s("span",[t._v("\n    "+t._s(t.person.initials)+"\n  ")])])},kc=[],bc={name:"person-avatar",props:{person:{type:Object,default:function(){return{color:"#FFF"}}},size:{type:Number,default:40},"font-size":{type:Number,default:18},"is-link":{type:Boolean,default:!0}}},Tc=bc,Sc=(s("mWlz"),Object(kr["a"])(Tc,gc,kc,!1,null,"0ecc5854",null)),Cc=Sc.exports,Ec={name:"todos-list",components:{TableInfo:Zr,TaskTypeName:pc,PeopleAvatar:Cc,ValidationTag:yc},props:["entries","isLoading","isError"],computed:Object(mn["a"])({},Object(E["c"])(["currentProduction"])),methods:Object(mn["a"])({},Object(E["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},Oc=Ec,Ac=(s("uku9"),Object(kr["a"])(Oc,Jr,tc,!1,null,"12e18c84",null)),wc=Ac.exports,Pc={name:"asset",components:{DescriptionCell:Tr,EntityThumbnail:Fr,EntityTaskList:wc,PageSubtitle:Ir,PageTitle:wr,TableInfo:Zr},data:function(){return{currentAsset:null,castIn:{isLoading:!1,isError:!1}}},created:function(){var t=this;this.clearSelectedTasks(),this.currentAsset=this.getCurrentAsset(),this.castIn.isLoading=!0,this.castIn.isError=!1,this.currentAsset?this.loadAssetCastIn({asset:this.currentAsset,callback:function(e,s){t.castIn.isError=!!e,t.castIn.isLoading=!0}}):this.loadAsset({assetId:this.route.params.asset_id,callback:function(e){e||(t.currentAsset=t.getCurrentAsset(),t.loadAssetCastIn({asset:t.currentAsset,callback:function(e,s){t.castIn.isError=!!e,t.castIn.isLoading=!0}}))}})},computed:Object(mn["a"])({},Object(E["c"])(["assetMap","currentProduction","route"]),{title:function(){return this.currentAsset?"".concat(this.currentAsset.project_name," / ")+"".concat(this.currentAsset.asset_type_name," / ")+"".concat(this.currentAsset.name):"Loading..."},assetThumbnailPath:function(){var t=this.currentAsset.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,".png")},isPreview:function(){return this.currentAsset&&this.currentAsset.preview_file_id&&this.currentAsset.preview_file_id.length>0}}),methods:Object(mn["a"])({},Object(E["b"])(["loadAsset","loadAssetCastIn","clearSelectedTasks"]),{changeTab:function(t){this.selectedTab=t},getCurrentAsset:function(){return this.assetMap[this.route.params.asset_id]||null}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},xc=Pc,jc=(s("CqNZ"),Object(kr["a"])(xc,ur,pr,!1,null,"f7670e14",null)),Lc=jc.exports,Dc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"assets page fixed-page"},[s("div",{staticClass:"asset-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("assets.title")}})],1),t.isCurrentUserManager?s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("show-assignations-button"),s("button-link",{staticClass:"level-item",attrs:{text:t.$t("main.csv.import_file"),icon:"upload","is-responsive":!0,path:{name:"import-assets",params:{production_id:t.currentProduction.id}}}}),s("button-href-link",{staticClass:"level-item",attrs:{text:t.$t("main.csv.export_file"),icon:"download","is-responsive":!0,path:"/api/export/csv/projects/"+t.currentProduction.id+"/assets.csv"}}),s("button-link",{staticClass:"level-item",attrs:{text:t.$t("assets.new_asset"),icon:"plus","is-responsive":!0,path:{name:"new-asset",params:{production_id:t.currentProduction.id}}}})],1)]):t._e()]),s("div",{staticClass:"filters-area"},[s("search-field",{ref:"asset-search-field",attrs:{"can-save":!0,placeholder:"ex: props, modeling=wip"},on:{change:t.onSearchChange,save:t.saveSearchQuery}})],1),s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:t.assetSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1)]),s("asset-list",{ref:"asset-list",attrs:{entries:t.displayedAssets,"is-loading":t.isAssetsLoading,"is-error":t.isAssetsLoadingError,"validation-columns":t.assetValidationColumns},on:{scroll:t.saveScrollPosition}}),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-loading-stay":t.loading.stay,"is-error":t.editAsset.isCreateError,"is-success":t.editAsset.isSuccess,"cancel-route":{name:"assets",params:{production_id:t.currentProduction.id}},"asset-to-edit":t.assetToEdit},on:{confirm:t.confirmEditAsset,confirmAndStay:t.confirmNewAssetStay}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteAsset.isLoading,"is-error":t.deleteAsset.isDeleteError,"cancel-route":{name:"assets",params:{production_id:t.currentProduction.id}},text:t.deleteText(),"error-text":t.$t("assets.delete_error")},on:{confirm:t.confirmDeleteAsset}}),s("delete-modal",{attrs:{active:t.modals.isRestoreDisplayed,"is-loading":t.restoreAsset.isLoading,"is-error":t.restoreAsset.isRestoreError,"cancel-route":{name:"assets",params:{production_id:t.currentProduction.id}},text:t.restoreText(),"error-text":t.$t("assets.restore_error")},on:{confirm:t.confirmRestoreAsset}}),s("import-modal",{attrs:{active:t.modals.isImportDisplayed,"is-loading":t.loading.importing,"is-error":t.errors.importing,"cancel-route":{name:"assets",params:{production_id:t.currentProduction.id}},"form-data":t.assetsCsvFormData,columns:t.columns},on:{fileselected:t.selectFile,confirm:t.uploadImportFile}}),s("create-tasks-modal",{attrs:{active:t.modals.isCreateTasksDisplayed,"is-loading":t.loading.creatingTasks,"is-error":t.errors.creatingTasks,"cancel-route":{name:"assets",params:{production_id:t.currentProduction.id}},title:t.$t("tasks.create_tasks_asset"),text:t.$t("tasks.create_tasks_asset_explaination"),"error-text":t.$t("tasks.create_tasks_asset_failed")},on:{confirm:t.confirmCreateTasks}})],1)},Ic=[],$c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"thumbnail"}),s("th",{staticClass:"type"},[t._v(t._s(t.$t("assets.fields.type")))]),s("th",{staticClass:"name"},[t._v(t._s(t.$t("assets.fields.name")))]),s("th",{staticClass:"description"},[t._v(t._s(t.$t("assets.fields.description")))]),t._l(t.validationColumns,function(e){return s("th",{key:e.id,staticClass:"validation",style:{"border-left":"2px solid "+e.color}},[s("router-link",{attrs:{to:{name:"task-type",params:{production_id:t.currentProduction.id,task_type_id:e.id}}}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1)}),s("th",{staticClass:"actions"},[t.isCurrentUserManager&&t.entries.length>0?s("button-link",{class:{"is-small":!0,highlighted:t.isEmptyTask},attrs:{icon:"plus",text:t.$t("tasks.create_tasks"),path:{name:"create-asset-tasks",params:{production_id:t.currentProduction.id}}}}):t._e()],1)],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isEmptyList?s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("assets.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("assets.new_assets"),path:{name:"new-asset",params:{production_id:t.currentProduction.id}}}})],1):t._e(),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"},{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreAssets,expression:"loadMoreAssets"}],ref:"body",staticClass:"table-body",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"120"}},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e,i){return s("tr",{key:e.id,class:{canceled:e.canceled}},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e}})],1),s("td",{class:{type:!e.canceled}},[t._v("\n            "+t._s(e.asset_type_name)+"\n          ")]),s("td",{class:{name:!e.canceled}},[s("router-link",{staticClass:"asset-link",attrs:{to:{name:"asset",params:{production_id:e.production_id,asset_id:e.id}}}},[t._v("\n            "+t._s(e.name)+"\n            ")])],1),s("description-cell",{staticClass:"description",attrs:{entry:e}}),t._l(t.validationColumns,function(n,a){return s("validation-cell",{key:n.name+"-"+e.id,ref:"validation-"+i+"-"+a,refInFor:!0,staticClass:"unselectable toto",attrs:{column:n,entity:e,selected:t.assetSelectionGrid[i][a],rowX:i,columnY:a},on:{select:t.onTaskSelected,unselect:t.onTaskUnselected}})}),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":{name:"edit-asset",params:{production_id:t.currentProduction.id,asset_id:e.id}},"delete-route":{name:"delete-asset",params:{production_id:t.currentProduction.id,asset_id:e.id}},"restore-route":{name:"restore-asset",params:{production_id:t.currentProduction.id,asset_id:e.id}}}}):s("td",{staticClass:"actions"})],2)}))])]),t.isEmptyList?t._e():s("p",{staticClass:"has-text-centered nb-assets"},[t._v("\n    "+t._s(t.displayedAssetsLength)+" "+t._s(t.$tc("assets.number",t.displayedAssetsLength))+"\n  ")])],1)},Mc=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("ZqW6")}})])}],qc=function(t,e){var i=e._c;return i("td",{staticClass:"actions has-text-right"},[e.props.hideEdit||e.props.entry.canceled?e._e():i("router-link",{staticClass:"button",attrs:{to:e.props.editRoute}},[i("img",{staticClass:"icon is-small",attrs:{src:s("2vD2")}})]),e.props.entry.canceled?i("router-link",{staticClass:"button",attrs:{to:e.props.restoreRoute}},[i("img",{staticClass:"icon is-small",attrs:{src:s("j3/w")}})]):i("router-link",{staticClass:"button",attrs:{to:e.props.deleteRoute}},[i("img",{staticClass:"icon is-small",attrs:{src:s("ryJu")}})])],1)},Rc=[],Nc={name:"row-actions",props:{entry:{type:Object,default:function(){return{}}},editRoute:{type:Object,default:function(){return{name:"home"}}},deleteRoute:{type:Object,default:function(){return{name:"home"}}},restoreRoute:{type:Object,default:null},hideEdit:{type:Boolean,default:!1}},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]))},Fc=Nc,Uc=(s("p2Jm"),Object(kr["a"])(Fc,qc,Rc,!0,null,"72e23317",null)),Bc=Uc.exports,Vc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-link",{staticClass:"button",attrs:{to:t.path}},[t.icon.length>0&&t.icon.startsWith("fa")?s("span",{staticClass:"icon is-small"},[s("i",{class:"fa "+t.icon})]):t._e(),"plus"===t.icon?s("plus-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"download"===t.icon?s("download-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"upload"===t.icon?s("upload-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"edit"===t.icon?s("edit-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"delete"===t.icon?s("trash-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"restore"===t.icon?s("rotate-ccw-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.isText?s("span",{class:{text:!0,"is-hidden-touch":t.isResponsive}},[t._v("\n    "+t._s(t.text)+"\n  ")]):t._e()],1)},Gc=[],Wc=s("CjXH"),zc={name:"button-link",components:{DownloadIcon:Wc["e"],EditIcon:Wc["f"],PlusIcon:Wc["l"],RotateCcwIcon:Wc["m"],TrashIcon:Wc["p"],UploadIcon:Wc["q"]},props:{text:{default:"",type:String},path:{default:""},icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean}},computed:{isText:function(){return this.text&&this.text.length>0}}},Kc=zc,Hc=(s("rK5g"),Object(kr["a"])(Kc,Vc,Gc,!1,null,"cfe8fd68",null)),Qc=Hc.exports,Yc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{class:"button "+t.styleclass,attrs:{href:t.path,target:t.target}},[t.icon.length>0&&t.icon.startsWith("fa")?s("span",{staticClass:"icon is-small"},[s("i",{class:"fa "+t.icon})]):t._e(),"plus"===t.icon?s("plus-icon",{staticClass:"icon is-small"}):t._e(),"download"===t.icon?s("download-icon",{staticClass:"icon is-small"}):t._e(),"upload"===t.icon?s("upload-icon",{staticClass:"icon is-small"}):t._e(),s("span",{staticClass:"text is-hidden-touch"},[t._v("\n    "+t._s(t.text)+"\n  ")])],1)},Xc=[],Zc={name:"button-href-link",components:{PlusIcon:Wc["l"],DownloadIcon:Wc["e"],UploadIcon:Wc["q"]},props:{text:{default:"button",type:String},path:{default:"",type:String},icon:{default:"",type:String},styleclass:{default:"",type:String},target:{default:"_self",type:String}}},Jc=Zc,tl=(s("lJEs"),Object(kr["a"])(Jc,Yc,Xc,!1,null,"e6759fea",null)),el=tl.exports,sl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{ref:"cell",class:{validation:t.selectable,selected:t.selectable&t.selected},style:{"border-left":t.isBorder?"2px solid "+t.column.color:"none"},on:{click:t.select}},[s("div",{staticClass:"wrapper"},[t.task?s("validation-tag",{attrs:{task:t.task}}):t._e(),t._l(t.assignees,function(e){return t.isAssignees&&t.isShowAssignations?s("people-avatar",{key:t.task.id+"-"+e,staticClass:"person-avatar",attrs:{person:t.personMap[e],size:20,"font-size":10}}):t._e()})],2)])},il=[],nl={name:"validation-cell",data:function(){return{}},components:{ValidationTag:yc,PeopleAvatar:Cc},props:{column:{default:null,type:Object},entity:{default:null,type:Object},taskTest:{default:null,type:Object},isBorder:{default:!0,type:Boolean},isAssignees:{default:!0,type:Boolean},selectable:{default:!0,type:Boolean},selected:{default:!1,type:Boolean},rowX:{default:0,type:Number},columnY:{default:0,type:Number}},computed:Object(mn["a"])({},Object(E["c"])(["selectedTasks","selectedValidations","nbSelectedTasks","isShowAssignations","personMap"]),{task:function(){return this.taskTest||this.entity.validations[this.column.name]},assignees:function(){return this.task?this.task.assignees:[]}}),methods:Object(mn["a"])({},Object(E["b"])([]),{select:function(t){var e=!1!==t.isUserClick;this.selectable&&(this.$refs.cell&&this.$refs.cell.className.indexOf("selected")<0?this.$emit("select",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:t.ctrlKey,isShiftKey:t.shiftKey,isUserClick:e}):this.$emit("unselect",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:t.ctrlKey,isShiftKey:t.shiftKey,isUserClick:e}))}})},al=nl,ol=(s("Fekk"),Object(kr["a"])(al,sl,il,!1,null,"91ac1e08",null)),rl=ol.exports,cl={name:"asset-list",props:["entries","isLoading","isError","validationColumns"],data:function(){return{busy:!1,scrollPosition:0,lastSelection:null,selectionGrid:null}},components:{ButtonLink:Qc,ButtonHrefLink:el,DescriptionCell:Tr,EntityThumbnail:Fr,PageTitle:wr,RowActions:Bc,TableInfo:Zr,ValidationCell:rl},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction","assetSearchText","selectedTasks","nbSelectedTasks","isCurrentUserManager","displayedAssetsLength","assetSelectionGrid","assets"]),{isEmptyList:function(){return 0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.assetSearchText||0===this.assetSearchText.length)},isEmptyTask:function(){return!this.emptyList&&this.validationColumns&&0===this.validationColumns.length}}),methods:Object(mn["a"])({},Object(E["b"])(["displayMoreAssets"]),{onTaskSelected:function(t){if(t.isShiftKey){if(this.lastSelection){var e=this.lastSelection.x,s=t.x,i=this.lastSelection.y,n=t.y;t.x<this.lastSelection.x&&(e=t.x,s=this.lastSelection.x),t.y<this.lastSelection.y&&(i=t.y,n=this.lastSelection.y);for(var a=e;a<=s;a++)for(var o=i;o<=n;o++){var r="validation-"+a+"-"+o,c=this.$refs[r][0];this.assetSelectionGrid[a][o]||c.select({ctrlKey:!0,isUserClick:!1})}}}else t.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");this.$store.commit("ADD_SELECTED_TASK",t),!t.isShiftKey&&t.isUserClick&&(this.lastSelection={x:t.x,y:t.y})},onTaskUnselected:function(t){t.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",t):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",t):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",t))},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop)},loadMoreAssets:function(){this.displayMoreAssets()},setScrollPosition:function(t){this.$refs.body.scrollTop=t}})},ll=cl,dl=(s("3jRn"),Object(kr["a"])(ll,$c,Mc,!1,null,"cdf4905e",null)),ul=dl.exports,pl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("page-title",{attrs:{text:t.title}}),s("p",[t._v(t._s(t.text))]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("combobox",{attrs:{label:t.$t("tasks.fields.task_type"),options:t.isAssetTasks?t.getAssetTaskTypeOptions:t.getShotTaskTypeOptions},model:{value:t.form.task_type_id,callback:function(e){t.$set(t.form,"task_type_id",e)},expression:"form.task_type_id"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.errorText)+"\n        ")]):t._e()],1)],1)])])},ml=[],hl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[t.label.length>0?s("label",{staticClass:"label"},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),s("p",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{ref:"select",on:{change:t.updateValue}},t._l(t.options,function(e,i){return s("option",{key:i+"-"+e.label+"-"+e.value,domProps:{value:e.value||e.label,selected:t.value===e.value}},[t._v("\n          "+t._s(t.getOptionLabel(e))+"\n        ")])}))])])])},fl=[],_l={name:"combobox",props:{label:{default:"",type:String},value:{default:"",type:[String,Boolean]},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String}},computed:{},methods:{updateValue:function(){this.$emit("input",this.$refs.select.value)},getOptionLabel:function(t){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+t.label.toLowerCase()):t.label}}},vl=_l,yl=Object(kr["a"])(vl,hl,fl,!1,null,null,null),gl=yl.exports,kl={name:"create-task-modal",components:{PageTitle:wr,Combobox:gl},props:["onConfirmClicked","text","title","active","cancelRoute","isError","isLoading","isSuccess","errorText"],data:function(){return{form:{task_type_id:""}}},computed:Object(mn["a"])({},Object(E["c"])(["taskTypes","getAssetTaskTypeOptions","getShotTaskTypeOptions"]),{isAssetTasks:function(){return this.cancelRoute.name.indexOf("assets")>=0}}),methods:Object(mn["a"])({},Object(E["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)}}),mounted:function(){this.isAssetTasks?this.getAssetTaskTypeOptions.length>0&&(this.form.task_type_id=this.getAssetTaskTypeOptions[0].value):this.getShotTaskTypeOptions.length>0&&(this.form.task_type_id=this.getShotTaskTypeOptions[0].value)}},bl=kl,Tl=(s("B3f8"),Object(kr["a"])(bl,pl,ml,!1,null,"6aac961c",null)),Sl=Tl.exports,Cl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[t._v(t._s(t.text))]),t.isError?s("p",{staticClass:"is-danger"},[t._v(t._s(t.errorText))]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-loading":t.isLoading},on:{click:function(e){t.$emit("confirm")}}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-primary",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},El=[],Ol={name:"delete-modal",props:["text","active","cancelRoute","isLoading","isError","errorText"],computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]))},Al=Ol,wl=(s("phBl"),Object(kr["a"])(Al,Cl,El,!1,null,"b1199a66",null)),Pl=wl.exports,xl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.assetToEdit&&this.assetToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("assets.edit_title"))+" "+t._s(t.assetToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("assets.new_asset"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("combobox",{attrs:{label:t.$t("assets.fields.type"),options:t.getAssetTypeOptions},model:{value:t.form.entity_type_id,callback:function(e){t.$set(t.form,"entity_type_id",e)},expression:"form.entity_type_id"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("assets.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"descriptionField",attrs:{label:t.$t("assets.fields.description")},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),s("div",{staticClass:"has-text-right"},[t.assetToEdit&&t.assetToEdit.id?t._e():s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoadingStay},on:{click:t.confirmAndStayClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation_and_stay"))+"\n        ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("assets.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.assetSuccessText)+"\n        ")])],1)])])])},jl=[],Ll=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v(t._s(t.label))]),s("p",{staticClass:"control"},[s("input",{ref:"input",staticClass:"input",class:"input "+t.inputClass,attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.value},on:{input:function(e){t.updateValue()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.emitEnter()}}})])])},Dl=[],Il={name:"text-field",props:{label:{default:"",type:String},value:{default:"",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String}},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},focus:function(){this.$refs.input.focus()}})},$l=Il,Ml=Object(kr["a"])($l,Ll,Dl,!1,null,null,null),ql=Ml.exports,Rl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v(t._s(t.label))]),s("p",{staticClass:"control"},[s("textarea",{ref:"input",staticClass:"input",class:"input "+t.inputClass,attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.value},on:{input:function(e){t.updateValue()},keyup:[function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.emitEnter()},t.emitKeyup]}})])])},Nl=[],Fl={name:"textarea-field",props:{label:{default:"",type:String},value:{default:"",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String}},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},emitKeyup:function(t){this.$emit("keyup",t)},focus:function(){this.$refs.input.focus()}})},Ul=Fl,Bl=(s("6TPf"),Object(kr["a"])(Ul,Rl,Nl,!1,null,"66152d20",null)),Vl=Bl.exports,Gl={name:"edit-asset-modal",components:{TextField:ql,TextareaField:Vl,Combobox:gl},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","assetToEdit","errorText"],data:function(){return this.assetToEdit&&this.assetToEdit.id?{form:{name:this.assetToEdit.name,description:this.assetToEdit.description,entity_type_id:this.assetToEdit.entity_type_id,production_id:this.currentProduction.id},assetSuccessText:""}:{form:{name:"",description:"",entity_type_id:"",project_id:""},assetSuccessText:""}},computed:Object(mn["a"])({},Object(E["c"])(["assets","assetCreated","assetTypes","openProductions","getAssetTypeOptions","getOpenProductionOptions","currentProduction"])),methods:Object(mn["a"])({},Object(E["b"])([]),{runConfirmation:function(){this.form.name.length>0&&(this.isEditing()?this.confirmClicked():this.confirmAndStayClicked())},focusName:function(){this.$refs.nameField.focus()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.assetToEdit&&this.assetToEdit.id},resetForm:function(){this.isEditing()?this.form={entity_type_id:this.assetToEdit.asset_type_id,project_id:this.assetToEdit.project_id,name:this.assetToEdit.name,description:this.assetToEdit.description}:(!this.form.entity_type_id&&this.assetTypes.length>0&&(this.form.entity_type_id=this.assetTypes[0].id),this.openProductions.length>0&&(this.form.project_id=this.currentProduction.id),this.form.name="",this.form.description="")}}),mounted:function(){this.resetForm(),this.assetSuccessText=""},watch:{assetToEdit:function(){this.resetForm()},assetCreated:function(){this.isEditing()?this.assetSuccessText=this.$t("assets.edit_success",{name:this.assetCreated}):this.assetSuccessText=this.$t("assets.new_success",{name:this.assetCreated})},active:function(){var t=this;this.assetSuccessText="",this.active&&setTimeout(function(){t.$refs.nameField.focus()},100)}}},Wl=Gl,zl=(s("i3pn"),Object(kr["a"])(Wl,xl,jl,!1,null,"2f0e043c",null)),Kl=zl.exports,Hl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("main.csv.import_title"))+"\n      ")]),s("p",{staticClass:"description",on:{submit:function(t){t.preventDefault()}}},[t._v("\n        "+t._s(t.$t("main.csv.required_fields"))+"\n        "),s("ul",t._l(t.columns,function(e){return s("li",{key:e},[t._v("\n            "+t._s(e)+"\n          ")])}))]),s("p",[t._v("\n        "+t._s(t.$t("main.csv.select_file"))+"\n      ")]),s("file-upload",{on:{fileselected:t.onFileSelected}}),t.isError?s("p",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("main.csv.error_upload"))+"\n      ")]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading,"is-disabled":void 0==t.formData},on:{click:t.onConfirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)],1)])])},Ql=[],Yl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-upload-wrapper"},[s("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[s("div",{staticClass:"dropbox"},[s("input",{ref:"uploadInput",staticClass:"input-file",attrs:{type:"file",accept:t.accept,name:t.uploadFieldName,disabled:t.isSaving},on:{change:function(e){t.filesChange(e.target.name,e.target.files)}}})])])])},Xl=[],Zl={name:"file-upload",props:{uploadFieldName:{default:"file",type:String},accept:{default:".csv",type:String}},data:function(){return{isInitial:!0,isSaving:!1,uploadedFiles:[]}},computed:{},watch:{},methods:{filesChange:function(t,e){var s=new FormData;s.append(this.uploadFieldName,e[0],e[0].name),this.$emit("fileselected",s)},reset:function(){this.isSaving=!1,this.isInitial=!0,this.uploadedFiles=[],this.$refs.uploadInput.value=""}},mounted:function(){this.reset()}},Jl=Zl,td=(s("hGvm"),Object(kr["a"])(Jl,Yl,Xl,!1,null,"6a40670b",null)),ed=td.exports,sd={name:"import-people-modal",props:["active","cancelRoute","isLoading","isError","columns"],watch:{},data:function(){return{formData:null}},components:{FileUpload:ed},computed:Object(mn["a"])({},Object(E["c"])([])),mounted:function(){this.formData=null},methods:Object(mn["a"])({},Object(E["b"])([]),{onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},onConfirmClicked:function(){this.$emit("confirm")}})},id=sd,nd=(s("P4DR"),Object(kr["a"])(id,Hl,Ql,!1,null,"311875a8",null)),ad=nd.exports,od=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item"},[s("search-icon")],1),s("div",{staticClass:"flexrow-item search-field"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"input",staticClass:"input search-input",attrs:{type:"text",placeholder:t.placeholder},on:{input:t.onSearchChange,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSaveClicked(e):null}}})]),s("div",{staticClass:"flexrow-item erase-search"},[s("span",{staticClass:"tag",on:{click:t.clearSearch}},[t._v("\n      x\n    ")])]),t.canSave?s("div",{staticClass:"flexrow-item save-search"},[s("button",{staticClass:"button",on:{click:t.onSaveClicked}},[s("save-icon",{staticClass:"icon is-small only-icon"})],1)]):t._e()])},rd=[],cd={name:"search-field",props:{placeholder:{type:String,default:""},canSave:{type:Boolean,default:!1}},components:{SaveIcon:Wc["n"],SearchIcon:Wc["o"],XIcon:Wc["r"]},computed:{},methods:{onSearchChange:function(){this.$emit("change",this.$refs.input.value)},onSaveClicked:function(){var t=this.$refs.input.value.trim();t.length>0&&this.canSave&&this.$emit("save",t)},getValue:function(t){return this.$refs.input.value},setValue:function(t){this.$refs.input.value=t},focus:function(){this.$refs.input.focus()},clearSearch:function(){this.setValue(""),this.onSearchChange()}}},ld=cd,dd=(s("qBAv"),Object(kr["a"])(ld,od,rd,!1,null,null,null)),ud=dd.exports,pd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-queries"},t._l(t.queries,function(e){return s("span",{key:e.id,staticClass:"tag",on:{click:function(s){t.changeSearch(e)}}},[t._v("\n    "+t._s(e.name)+"\n    "),s("button",{staticClass:"delete is-small",on:{click:function(s){s.preventDefault(),t.removeSearch(e)}}})])}))},md=[],hd={name:"search-query-list",props:{queries:{type:Array,default:function(){return[]}}},components:{XIcon:Wc["r"],SaveIcon:Wc["n"],SearchIcon:Wc["o"]},computed:{},methods:{changeSearch:function(t){this.$emit("changesearch",t)},removeSearch:function(t){this.$emit("removesearch",t)}}},fd=hd,_d=(s("oSlo"),Object(kr["a"])(fd,pd,md,!1,null,null,null)),vd=_d.exports,yd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isShowAssignations?s("button",{staticClass:"level-item button",on:{click:t.hideAssignations}},[s("eye-off-icon",{staticClass:"icon is-small"}),s("span",{staticClass:"text is-hidden-touch"},[t._v("Hide assignations")])],1):s("button",{staticClass:"level-item button",on:{click:t.showAssignations}},[s("eye-icon",{staticClass:"icon is-small"}),s("span",{staticClass:"text is-hidden-touch"},[t._v("Show assignations")])],1)},gd=[],kd={name:"show-assignations-button",components:{EyeIcon:Wc["g"],EyeOffIcon:Wc["h"]},props:{},computed:Object(mn["a"])({},Object(E["c"])(["isShowAssignations"])),methods:Object(mn["a"])({},Object(E["b"])(["showAssignations","hideAssignations"])),mounted:function(){"true"===this.$cookie.get("show-assignations")?this.showAssignations():this.hideAssignations()},watch:{isShowAssignations:function(){this.$cookie.set("show-assignations",this.isShowAssignations,{expires:"1M"})}}},bd=kd,Td=Object(kr["a"])(bd,yd,gd,!1,null,null,null),Sd=Td.exports,Cd={name:"assets",components:{AssetList:ul,ButtonLink:Qc,ButtonHrefLink:el,CreateTasksModal:Sl,DeleteModal:Pl,EditAssetModal:Kl,ImportModal:ad,PageTitle:wr,SearchField:ud,SearchQueryList:vd,ShowAssignationsButton:Sd},data:function(){return{modals:{isCreateTasksDisplayed:!1,isImportDisplayed:!1,isNewDisplayed:!1,isDeleteDisplayed:!1},loading:{creatingTasks:!1,importing:!1,edit:!1,stay:!1},errors:{creatingTasks:!1,importing:!1},assetToDelete:null,assetToRestore:null,assetToEdit:null,choices:[],assetFilters:[{type:"Type",value:{name:"open"}}],columns:["Type","Name","Description"],assetFilterTypes:["Type"]}},computed:Object(mn["a"])({},Object(E["c"])(["assetMap","assetListScrollPosition","assetsCsvFormData","assetSearchText","assetSearchQueries","assetTypes","assetValidationColumns","currentProduction","displayedAssets","openProductions","isAssetsLoading","isAssetsLoadingError","editAsset","deleteAsset","restoreAsset","getAsset","isCurrentUserManager"])),created:function(){var t=this;this.setLastProductionScreen("assets");var e=this.$store.state.route.params.production_id;this.currentProduction.id!==e&&this.$store.commit("SET_CURRENT_PRODUCTION",e);var s=Object.keys(this.assetMap);0!==s.length&&this.assetMap[s[0]].production_id===this.currentProduction.id||this.loadAssets(function(e){e||t.handleModalsDisplay()})},mounted:function(){this.assetSearchText.length>0&&this.$refs["asset-search-field"].setValue(this.assetSearchText),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition)},methods:Object(mn["a"])({},Object(E["b"])(["loadAssets","loadComment","removeAssetSearch","saveAssetSearch","setLastProductionScreen","setAssetSearch"]),{confirmNewAssetStay:function(t){var e=this,s="newAsset";this.loading.stay=!0,this.editAsset.isSuccess=!1,this.editAsset.isError=!1,this.$store.dispatch(s,{data:t,callback:function(t){e.loading.stay=!1,t?e.loading.edit=!1:(e.resetLightEditModal(),e.$refs["edit-asset-modal"].focusName(),e.editAsset.isSuccess=!0)}})},confirmEditAsset:function(t){var e=this,s="newAsset";this.loading.edit=!0,this.editAsset.isCreateError=!1,this.assetToEdit&&this.assetToEdit.id&&(s="editAsset",t.id=this.assetToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t?(e.loading.edit=!1,e.editAsset.isCreateError=!0):(e.loading.edit=!1,e.modals.isNewDisplayed=!1,e.$router.push({name:"assets",params:{production_id:e.currentProduction.id}}))}})},confirmDeleteAsset:function(){var t=this;this.$store.dispatch("deleteAsset",{asset:this.assetToDelete,callback:function(e){e||(t.modals.isDeleteDisplayed=!1)}})},confirmRestoreAsset:function(){var t=this;this.$store.dispatch("restoreAsset",{asset:this.assetToRestore,callback:function(e){e||(t.modals.isRestoreDisplayed=!1)}})},confirmCreateTasks:function(t){var e=this;this.loading.creatingTasks=!0,this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:t.task_type_id,type:"assets",project_id:this.currentProduction.id,callback:function(t){e.loading.creatingTasks=!1,t?e.errors.creatingTasks=!0:(e.modals.isCreateTasks=!1,e.$router.push({name:"assets",params:{production_id:e.currentProduction.id}}),e.loadAssets())}})},resetLightEditModal:function(){var t={name:"",entity_type_id:this.assetToEdit.entity_type_id,production_id:this.currentProduction.id};this.assetToEdit=t},resetEditModal:function(){var t={name:""};this.assetTypes.length>0&&(t.asset_type_id=this.assetTypes[0].id),t.production_id=this.currentProduction.id,this.assetToEdit=t},deleteText:function(){var t=this.assetToDelete;return t?this.$t("assets.delete_text",{name:t.name}):""},restoreText:function(){var t=this.assetToRestore;return t?this.$t("assets.restore_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.asset_id;this.editAsset.isSuccess=!1,this.editAsset.isError=!1,t.indexOf("new")>0?(this.resetEditModal(),this.editAsset.isSuccess=!1,this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.editAsset.isSuccess=!1,this.assetToEdit=this.getAsset(e),this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.assetToDelete=this.getAsset(e),this.modals.isDeleteDisplayed=!0):t.indexOf("restore")>0?(this.assetToRestore=this.getAsset(e),this.modals.isRestoreDisplayed=!0):t.indexOf("import")>0?this.modals.isImportDisplayed=!0:t.indexOf("create-tasks")>0?this.modals.isCreateTasksDisplayed=!0:this.modals={isNewDisplayed:!1,isDeleteDisplayed:!1,isRestoreDisplayed:!1,isImportDisplayed:!1,isCreateTasksDisplayed:!1}},selectFile:function(t){this.$store.commit("ASSET_CSV_FILE_SELECTED",t)},uploadImportFile:function(){var t=this;this.loading.importing=!0,this.errors.importing=!1,this.$store.dispatch("uploadAssetFile",function(e){e?(t.loading.importing=!1,t.errors.importing=!0):(t.loading.importing=!1,t.$store.dispatch("loadAssets"),t.$router.push({name:"assets",params:{production_id:t.currentProduction.id}}))})},onSearchChange:function(){var t=this.$refs["asset-search-field"].getValue();this.setAssetSearch(t)},changeSearch:function(t){this.$refs["asset-search-field"].setValue(t.search_query),this.$refs["asset-search-field"].$emit("change",t.search_query)},saveSearchQuery:function(t){this.saveAssetSearch(t).then(function(){}).catch(function(t){t&&console.log("error")})},removeSearchQuery:function(t){this.removeAssetSearch(t).then(function(){}).catch(function(t){t&&console.log("error")})},saveScrollPosition:function(t){this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",t)}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var t="".concat(this.$route.path),e={name:"assets",params:{production_id:this.currentProduction.id}};56===this.$route.path.length&&this.$router.push(e);var s=this.$route.path;t!==s&&(this.$refs["asset-search-field"].value="",this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.$store.dispatch("loadAssets"))}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," ").concat(this.$t("assets.title")," - Kitsu")}}},Ed=Cd,Od=(s("JpJI"),Object(kr["a"])(Ed,Dc,Ic,!1,null,"05a42945",null)),Ad=Od.exports,wd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"asset-types page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("asset_types.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item",attrs:{icon:"plus",text:t.$t("asset_types.new_asset_type"),path:"/asset-types/new"}})],1)])]),s("asset-type-list",{attrs:{entries:t.assetTypes,"is-loading":t.isAssetTypesLoading,"is-error":t.isAssetTypesLoadingError}}),s("edit-asset-type-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editAssetType.isLoading,"is-error":t.editAssetType.isError,"cancel-route":"/asset-types","asset-type-to-edit":t.assetTypeToEdit},on:{confirm:t.confirmEditAssetType}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteAssetType.isLoading,"is-error":t.deleteAssetType.isError,"cancel-route":"/asset-types",text:t.deleteText(),"error-text":t.$t("asset_types.delete_error")},on:{confirm:t.confirmDeleteAssetType}})],1)},Pd=[],xd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v(t._s(t.$t("asset_types.fields.name")))]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n             "+t._s(e.name)+"\n          ")]),s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-asset-type",params:{asset_type_id:e.id}},"delete-route":{name:"delete-asset-type",params:{asset_type_id:e.id}}}})],1)}))])]):t._e(),s("p",{staticClass:"has-text-centered nb-asset-types"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("asset_types.number",t.entries.length))+"\n  ")])],1)},jd=[],Ld={name:"asset-type-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{RowActions:Bc,TableInfo:Zr},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},Dd=Ld,Id=(s("xWpU"),Object(kr["a"])(Dd,xd,jd,!1,null,"298997f8",null)),$d=Id.exports,Md=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.assetTypeToEdit&&t.assetTypeToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("asset_types.edit_title"))+" "+t._s(t.assetTypeToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("asset_types.new_asset_type"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("asset_types.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},qd=[],Rd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v(t._s(t.label))]),s("div",{staticClass:"control colors"},t._l(t.colors,function(e,i){return s("div",{key:"color-"+i,ref:"color-"+i,refInFor:!0,class:{color:!0,selected:t.value===e},on:{click:function(s){t.colorChanged(e)}}},[s("span",{style:{background:e}})])}))])},Nd=[],Fd={name:"text-field",props:{label:{default:"",type:String},value:{default:"#999999",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},colors:{default:function(){return["#999999","#8D6E63","#43A047","#7CB342","#009688","#9CCC65","#AFB42B","#F9A825","#F57C00","#ff5252","#F06292","#AB47BC","#5C6BC0","#039BE5","#26C6DA","#64B5F6","#78909C"]}}},data:function(){return{selectedColor:"#999999"}},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{colorChanged:function(t,e){this.$emit("input",t)}})},Ud=Fd,Bd=(s("MkTS"),Object(kr["a"])(Ud,Rd,Nd,!1,null,null,null)),Vd=Bd.exports,Gd={name:"edit-asset-type-modal",components:{TextField:ql,ColorField:Vd},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText","assetTypeToEdit"],data:function(){return{}},computed:Object(mn["a"])({},Object(E["c"])(["assetTypes","assetTypeStatusOptions"]),{form:function(){return{name:""}}}),methods:Object(mn["a"])({},Object(E["b"])([]),{runConfirmation:function(){this.$emit("confirm",this.form)}}),watch:{active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.nameField.focus()},100)},assetTypeToEdit:function(){this.assetTypeToEdit&&(this.form.name=this.assetTypeToEdit.name)}}},Wd=Gd,zd=(s("5Qes"),Object(kr["a"])(Wd,Md,qd,!1,null,"0c12ba5a",null)),Kd=zd.exports,Hd={name:"asset-types",components:{AssetTypeList:$d,ButtonLink:Qc,DeleteModal:Pl,EditAssetTypeModal:Kd,PageTitle:wr},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},assetTypeToDelete:null,assetTypeToEdit:null,choices:[]}},computed:Object(mn["a"])({},Object(E["c"])(["assetTypes","isAssetTypesLoading","isAssetTypesLoadingError","editAssetType","deleteAssetType","getAssetType"])),created:function(){var t=this;this.loadAssetTypes(function(e){e||t.handleModalsDisplay()})},methods:Object(mn["a"])({},Object(E["b"])(["loadAssetTypes"]),{confirmEditAssetType:function(t){var e=this,s="newAssetType";this.assetTypeToEdit&&this.assetTypeToEdit.id&&(s="editAssetType",t.id=this.assetTypeToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t||(e.modals.isNewDisplayed=!1,e.$router.push("/asset-types"))}})},confirmDeleteAssetType:function(){var t=this;this.$store.dispatch("deleteAssetType",{assetType:this.assetTypeToDelete,callback:function(e){e||(t.modals.isDeleteDisplayed=!1)}})},deleteText:function(){var t=this.assetTypeToDelete;return t?this.$t("asset_types.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.asset_type_id;t.indexOf("new")>0?(this.assetTypeToEdit={color:"#FFFFFF"},this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.assetTypeToEdit=this.getAssetType(e),this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.assetTypeToDelete=this.getAssetType(e),this.modals.isDeleteDisplayed=!0):(this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("asset_types.title")," - Kitsu")}}},Qd=Hd,Yd=(s("FLx2"),Object(kr["a"])(Qd,wd,Pd,!1,null,"720ee08a",null)),Xd=Yd.exports,Zd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"breakdown page"},[s("page-title",{staticClass:"page-header",attrs:{text:t.$t("breakdown.title")}}),s("div",{staticClass:"breakdown-columns"},[s("div",{staticClass:"breakdown-column shot-column"},[t.isShotsLoading?s("spinner"):s("div",[t.isSingleEpisode?t._e():s("combobox",{attrs:{label:t.$t("shots.fields.episode"),options:t.getEpisodeOptions},model:{value:t.episodeId,callback:function(e){t.episodeId=e},expression:"episodeId"}}),s("combobox",{attrs:{label:t.$t("shots.fields.sequence"),options:t.castingSequenceOptions},model:{value:t.sequenceId,callback:function(e){t.sequenceId=e},expression:"sequenceId"}}),s("p",{staticClass:"shots-title"},[t._v(t._s(t.$t("shots.title")))]),t._l(t.castingSequenceShots,function(e){return s("shot-line",{key:e.id,attrs:{"shot-id":e.id,selected:t.castingCurrentShot&&t.castingCurrentShot.id===e.id,name:e.name},on:{click:t.selectShot}})})],2)],1),s("div",{staticClass:"breakdown-column casting-column"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[t.castingCurrentShot?s("h2",{staticClass:"subtitle"},[t._v("\n            "+t._s(t.$t("breakdown.selected_shot",{sequence_name:t.castingCurrentShot.sequence_name,name:t.castingCurrentShot.name}))+"\n          ")]):s("em",[t._v("\n            "+t._s(t.$t("breakdown.select_shot"))+"\n          ")])]),t.isCurrentUserManager?s("div",{staticClass:"level-right"},[s("button",{class:{button:!0,"save-button":!0,"is-success":!0,"is-loading":t.isSaving},attrs:{disabled:!t.isCastingDirty},on:{click:t.onSaveClicked}},[t._v("\n            "+t._s(t.$t("main.save"))+"\n          ")])]):t._e()]),s("error-text",{attrs:{"align-right":!0,hidden:!t.isSavingError,text:t.$t("breakdown.save_error")}}),t.isLoading?s("spinner"):t._l(t.castingAssetsByType,function(e){return s("div",{key:e.length>0?e[0].asset_type_name:"",staticClass:"type-assets"},[s("div",{staticClass:"asset-type"},[t._v("\n          "+t._s(e.length>0?e[0].asset_type_name:"")+"\n        ")]),s("div",{staticClass:"asset-list"},t._l(e,function(e){return s("asset-block",{key:e.id,attrs:{asset:e,"nb-occurences":e.nb_occurences},on:{"remove-one":t.removeOneAsset,"remove-ten":t.removeTenAssets}})}))])})],2),t.isCurrentUserManager?s("div",{staticClass:"breakdown-column assets-column"},[s("h2",{staticClass:"subtitle"},[t._v("\n        "+t._s(t.$t("breakdown.all_assets"))+"\n      ")]),s("div",{staticClass:"filters-area"},[s("div",{staticClass:"level"},[s("search-field",{on:{change:t.onSearchChange}})],1)]),t.isAssetsLoading?s("spinner"):t._l(t.assetsByType,function(e){return s("div",{key:e.length>0?e[0].asset_type_name:"",staticClass:"type-assets"},[s("div",{staticClass:"asset-type"},[t._v("\n          "+t._s(e.length>0?e[0].asset_type_name:"")+"\n        ")]),s("div",{staticClass:"asset-list"},t._l(e,function(e){return s("available-asset-block",{key:e.id,attrs:{asset:e,casted:void 0!==t.casting[e.id],active:!!t.castingCurrentShot},on:{"add-one":t.addOneAsset,"add-ten":t.addTenAssets}})}))])})],2):t._e()])],1)},Jd=[],tu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{class:{error:!0,"has-text-right":t.alignRight,"is-hidden":t.hidden}},[t._v("\n  "+t._s(t.text)+"\n")])},eu=[],su={name:"error-text",props:{text:{default:"",type:String},hidden:{default:!1,type:Boolean},alignRight:{default:!1,type:Boolean}}},iu=su,nu=Object(kr["a"])(iu,tu,eu,!1,null,null,null),au=nu.exports,ou=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{shot:!0,selected:t.selected},attrs:{id:t.shotId},on:{click:t.onClicked}},[t._v("\n  "+t._s(t.name)+"\n")])},ru=[],cu={name:"shot-line",props:{shotId:{default:"",type:String},selected:{default:function(){},type:Boolean},name:{default:"",type:String}},methods:{onClicked:function(t){this.$emit("click",t.target.id)}}},lu=cu,du=(s("AIKe"),Object(kr["a"])(lu,ou,ru,!1,null,"67845177",null)),uu=du.exports,pu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{asset:!0,big:!0,casted:!0,active:t.active},attrs:{id:"casting-"+t.asset.id}},[s("div",{staticClass:"asset-add",on:{click:t.removeOneAsset}},[t._v("\n  - 1\n  ")]),s("div",{staticClass:"asset-add-10",on:{click:t.removeTenAssets}},[t._v("\n  - 10\n  ")]),t.asset.preview_file_id.length>0?s("div",{staticClass:"asset-picture"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/api/pictures/thumbnails-square/preview-files/"+t.asset.preview_file_id+".png",expression:"'/api/pictures/thumbnails-square/preview-files/' + asset.preview_file_id + '.png'"}]})]):s("div",{staticClass:"asset-picture"},[s("span",{staticClass:"empty-picture"},[t._v("\n      no pic\n    ")])]),s("p",{staticClass:"asset-name"},[t._v("\n    "+t._s(t.asset.name)+"\n    "),t.nbOccurences>1?s("span",[t._v("\n    ("+t._s(t.nbOccurences)+")\n    ")]):t._e()])])},mu=[],hu={name:"asset-block",props:{asset:{default:function(){return{id:"",name:""}},type:Object},nbOccurences:{default:1,type:Number},active:{default:!0,type:Boolean}},computed:{},methods:{removeOneAsset:function(t){var e=t.target.parentElement.id.substring("casting-".length);this.$emit("remove-one",e)},removeTenAssets:function(t){var e=t.target.parentElement.id.substring("casting-".length);this.$emit("remove-ten",e)}}},fu=hu,_u=(s("jfF1"),Object(kr["a"])(fu,pu,mu,!1,null,"471ed712",null)),vu=_u.exports,yu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{asset:!0,casted:t.casted,active:t.active},attrs:{id:"casting-"+t.asset.id}},[s("div",{staticClass:"asset-add",on:{click:t.addOneAsset}},[t._v("\n  + 1\n  ")]),s("div",{staticClass:"asset-add-10",on:{click:t.addTenAssets}},[t._v("\n  + 10\n  ")]),t.asset.preview_file_id.length>0?s("div",{staticClass:"asset-picture"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/api/pictures/thumbnails-square/preview-files/"+t.asset.preview_file_id+".png",expression:"'/api/pictures/thumbnails-square/preview-files/' + asset.preview_file_id + '.png'"}]})]):s("div",{staticClass:"asset-picture"},[s("span",{staticClass:"empty-picture"},[t._v("\n      no pic\n    ")])]),s("p",{staticClass:"asset-name"},[t._v("\n    "+t._s(t.asset.name)+"\n  ")])])},gu=[],ku={name:"available-asset-block",props:{asset:{default:function(){return{id:"",name:""}},type:Object},casted:{default:!1,type:Boolean},active:{default:!1,type:Boolean}},computed:{},methods:{addOneAsset:function(t){var e=t.target.parentElement.id.substring("casting-".length);this.$emit("add-one",e)},addTenAssets:function(t){var e=t.target.parentElement.id.substring("casting-".length);this.$emit("add-ten",e)}}},bu=ku,Tu=(s("o/P2"),Object(kr["a"])(bu,yu,gu,!1,null,"575e1e18",null)),Su=Tu.exports,Cu={name:"asset-types",components:{AssetBlock:vu,AvailableAssetBlock:Su,Combobox:gl,ErrorText:au,PageTitle:wr,SaveIcon:Wc["n"],SearchIcon:Wc["o"],SearchField:ud,ShotLine:uu,Spinner:Hr},data:function(){return{isLoading:!1,isSaving:!1,isSavingError:!1,sequenceId:"",episodeId:"",shotId:""}},computed:Object(mn["a"])({},Object(E["c"])(["assetMap","assetsByType","currentProduction","displayedShots","isSingleEpisode","getEpisodeOptions","castingSequenceOptions","isAssetsLoading","isShotsLoading","shots","sequences","shotMap","shotsBySequence","castingSequenceId","castingCurrentShot","castingSequenceShots","isCastingSaveActive","casting","castingAssetsByType","isCastingDirty","isCastingSaveActive","isCurrentUserManager"])),created:function(){this.reset(),this.setLastProductionScreen("breakdown")},methods:Object(mn["a"])({},Object(E["b"])(["loadShots","loadAssets","saveCasting","setAssetSearch","setProduction","setCastingEpisode","setCastingSequence","setCastingShot","addAssetToCasting","removeAssetFromCasting","setLastProductionScreen"]),{reset:function(){var t=this,e=this.$store.state.route.params.production_id;this.shotId=this.$route.params.shot_id,this.setProduction(e),this.loadShots(function(){t.loadAssets(function(){t.isLoading=!0,t.setCastingShot({shotId:t.shotId,callback:function(){if(t.isLoading=!1,t.getEpisodeOptions.length>0){var e=t.shotMap[t.shotId];t.shotId&&e?t.episodeId=e.episode_id:t.episodeId=t.getEpisodeOptions[0].value}}})})})},onSearchChange:function(t){this.setAssetSearch(t)},selectShot:function(t){this.$router.push({name:"breakdown-shot",params:{production_id:this.currentProduction.id,shot_id:t}})},onSaveClicked:function(){var t=this;this.isSaving=!0,this.isSavingError=!1,this.saveCasting(function(e){e&&(t.isSavingError=!0),t.isSaving=!1})},addOneAsset:function(t){this.addAssetToCasting({assetId:t,nbOccurences:1})},addTenAssets:function(t){this.addAssetToCasting({assetId:t,nbOccurences:10})},removeOneAsset:function(t){this.removeAssetFromCasting({assetId:t,nbOccurences:1})},removeTenAssets:function(t){this.removeAssetFromCasting({assetId:t,nbOccurences:10})}}),watch:{$route:function(){var t=this,e=this.$route.params.shot_id;e&&(this.isLoading=!0,this.setCastingShot({shotId:e,callback:function(){t.isLoading=!1}}))},episodeId:function(){this.setCastingEpisode(this.episodeId)},sequenceId:function(){this.setCastingSequence(this.sequenceId)},castingSequenceOptions:function(){if(this.castingSequenceOptions.length>0){var t=this.shotMap[this.shotId];this.shotId&&t?this.sequenceId=t.sequence_id:this.sequenceId=this.castingSequenceOptions[0].value}else this.sequenceId=""},currentProduction:function(){var t={name:"breakdown",params:{production_id:this.currentProduction.id}};this.currentProduction.id!==this.$route.params.production_id&&(this.$router.push(t),this.reset())}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," ").concat(this.$t("breakdown.title")," - Kitsu")}}},Eu=Cu,Ou=(s("GJE0"),Object(kr["a"])(Eu,Zd,Jd,!1,null,"1e294eb8",null)),Au=Ou.exports,wu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"custom-actions page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("custom_actions.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item",attrs:{icon:"plus",text:t.$t("custom_actions.new_custom_action"),path:"/custom-actions/new"}})],1)])]),s("custom-action-list",{attrs:{entries:t.customActions,"is-loading":t.isCustomActionsLoading,"is-error":t.isCustomActionsLoadingError}}),s("edit-custom-action-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editCustomAction.isLoading,"is-error":t.editCustomAction.isError,"cancel-route":"/custom-actions","custom-action-to-edit":t.customActionToEdit},on:{confirm:t.confirmEditCustomAction}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteCustomAction.isLoading,"is-error":t.deleteCustomAction.isError,"cancel-route":"/custom-actions",text:t.deleteText(),"error-text":t.$t("custom_actions.delete_error")},on:{confirm:t.confirmDeleteCustomAction}})],1)},Pu=[],xu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",{staticClass:"thead"},[s("tr",[s("th",{staticClass:"name"},[t._v(t._s(t.$t("custom_actions.fields.name")))]),s("th",{staticClass:"url"},[t._v(t._s(t.$t("custom_actions.fields.url")))]),s("th",{staticClass:"entity-type"},[t._v(t._s(t.$t("custom_actions.fields.entity_type")))]),s("th",{staticClass:"actions"},[t._v(" ")])])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v(t._s(e.name))]),s("td",{staticClass:"url"},[t._v(t._s(e.url))]),s("td",{staticClass:"entity-type"},[t._v(t._s(e.entity_type))]),s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-custom-action",params:{custom_action_id:e.id}},"delete-route":{name:"delete-custom-action",params:{custom_action_id:e.id}}}})],1)}))])]),s("p",{staticClass:"has-text-centered nb-custom-actions"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("custom_actions.number",t.entries.length))+"\n  ")])],1)},ju=[],Lu={name:"custom-action-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{RowActions:Bc,TaskTypeName:pc,TableInfo:Zr},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{renderForShots:function(t){return t.for_shots?this.$tc("shots.title"):this.$tc("assets.title")},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},Du=Lu,Iu=(s("1aax"),Object(kr["a"])(Du,xu,ju,!1,null,"7e8d150f",null)),$u=Iu.exports,Mu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.isEditing()?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("custom_actions.edit_title"))+" "+t._s(t.customActionToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("custom_actions.new_custom_action"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("custom_actions.fields.name")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("text-field",{ref:"urlField",attrs:{label:t.$t("custom_actions.fields.url")},on:{enter:t.confirmClicked},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),s("combobox",{attrs:{label:t.$t("custom_actions.fields.entity_type"),options:t.entityTypeOptions,"locale-key-prefix":"custom_actions.entity_types."},on:{enter:t.confirmClicked},model:{value:t.form.entityType,callback:function(e){t.$set(t.form,"entityType",e)},expression:"form.entityType"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},qu=[],Ru={name:"edit-custom-action-modal",components:{TextField:ql,ColorField:Vd,Combobox:gl},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText","customActionToEdit"],data:function(){return{form:{name:"",url:"",entityType:"all"},entityTypeOptions:[{label:"all",value:"all"},{label:"asset",value:"asset"},{label:"shot",value:"shot"}]}},computed:Object(mn["a"])({},Object(E["c"])(["customActions","customActionStatusOptions"])),methods:Object(mn["a"])({},Object(E["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.customActionToEdit&&this.customActionToEdit.id}}),watch:{customActionToEdit:function(){this.customActionToEdit&&(this.form={name:this.customActionToEdit.name,url:this.customActionToEdit.url,entityType:this.customActionToEdit.entity_type})},active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.nameField.focus()},100)}}},Nu=Ru,Fu=(s("bAo1"),Object(kr["a"])(Nu,Mu,qu,!1,null,"dc650e0c",null)),Uu=Fu.exports,Bu={name:"custom-actions",components:{ButtonLink:Qc,DeleteModal:Pl,EditCustomActionModal:Uu,PageTitle:wr,CustomActionList:$u},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},customActionToDelete:null,customActionToEdit:null}},computed:Object(mn["a"])({},Object(E["c"])(["customActions","isCustomActionsLoading","isCustomActionsLoadingError","editCustomAction","deleteCustomAction","customAction"])),created:function(){var t=this;this.loadCustomActions(function(e){e||t.handleModalsDisplay()})},methods:Object(mn["a"])({},Object(E["b"])(["loadCustomActions"]),{confirmEditCustomAction:function(t){var e=this,s="newCustomAction";this.customActionToEdit&&this.customActionToEdit.id&&(s="editCustomAction",t.id=this.customActionToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t||(e.modals.isNewDisplayed=!1,e.$router.push("/custom-actions"))}})},confirmDeleteCustomAction:function(){var t=this;this.$store.dispatch("deleteCustomAction",{customAction:this.customActionToDelete,callback:function(e){e||t.$router.push("/custom-actions")}})},deleteText:function(){var t=this.customActionToDelete;return t?this.$t("custom_actions.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.custom_action_id;t.indexOf("new")>0?(this.customActionToEdit={color:"#FFFFFF"},this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.customActionToEdit=this.customAction(e),this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.customActionToDelete=this.customAction(e),this.modals.isDeleteDisplayed=!0):(this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("custom_actions.title")," - Kitsu")}}},Vu=Bu,Gu=(s("XATi"),Object(kr["a"])(Vu,wu,Pu,!1,null,"07612d36",null)),Wu=Gu.exports,zu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"episodes page fixed-page"},[s("div",{staticClass:"episode-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("episodes.title")}})],1)]),s("div",{staticClass:"filters-area"},[s("search-field",{ref:"episode-search-field",attrs:{placeholder:"ex: e01 s01, anim=wip"},on:{change:t.onSearchChange}})],1)]),s("episode-list",{ref:"episode-list",attrs:{entries:t.displayedEpisodes,"is-loading":t.isShotsLoading,"is-error":t.isShotsLoadingError,"validation-columns":t.shotValidationColumns,"episode-stats":t.episodeStats},on:{scroll:t.saveScrollPosition}}),s("edit-episode-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-error":t.errors.edit,"cancel-route":{name:"episodes",params:{production_id:t.currentProduction.id}},"episode-to-edit":t.episodeToEdit},on:{confirm:t.confirmEditEpisode}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.loading.del,"is-error":t.errors.del,text:t.deleteText(),"error-text":t.$t("episodes.delete_error"),"cancel-route":{name:"episodes",params:{production_id:t.currentProduction.id}}},on:{confirm:t.confirmDeleteEpisode}})],1)},Ku=[],Hu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v(t._s(t.$t("shots.fields.episode")))]),s("th",{staticClass:"description"},[t._v(t._s(t.$t("shots.fields.description")))]),t._l(t.validationColumns,function(e){return s("th",{key:e.id,staticClass:"validation",style:t.validationStyle(e.color)},[s("router-link",{attrs:{to:{name:"task-type",params:{production_id:t.currentProduction.id,task_type_id:e.id}}}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1)}),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isEmptyList?s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("episodes.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("shots.new_episodes"),path:{name:"manage-shots",params:{production_id:t.currentProduction.id}}}})],1):t._e(),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreEpisodes,expression:"loadMoreEpisodes"},{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n          ")]),s("td",{staticClass:"description"},[t._v("\n            "+t._s(e.description)+"\n          ")]),t._l(t.validationColumns,function(i){return s("td",{key:i.id,staticClass:"validation",style:t.validationStyle(i.color)},[t.isStats(e,i)?s("pie-chart",{attrs:{width:"70px",height:"50px",legend:!1,colors:t.chartColors(e,i),data:t.chartData(e,i)}}):t._e()],1)}),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":{name:"edit-episode",params:{episode_id:e.id,production_id:t.currentProduction.id}},"delete-route":{name:"delete-episode",params:{episode_id:e.id,production_id:t.currentProduction.id}}}}):s("td",{staticClass:"actions"})],2)}))])]),t.isEmptyList?t._e():s("p",{staticClass:"has-text-centered nb-episodes"},[t._v("\n    "+t._s(t.displayedEpisodesLength)+"\n    "+t._s(t.$tc("episodes.number",t.displayedEpisodesLength))+"\n  ")])],1)},Qu=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("cyuX")}})])}],Yu={name:"episode-list",props:["entries","isLoading","isError","episodeStats","validationColumns"],data:function(){return{busy:!1,lastSelection:null}},components:{ButtonLink:Qc,PageTitle:wr,RowActions:Bc,TableInfo:Zr},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction","isCurrentUserManager","isSingleEpisode","displayedEpisodesLength","episodeSearchText"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.episodeSearchText||0===this.episodeSearchText.length)}}),methods:Object(mn["a"])({},Object(E["b"])(["displayMoreEpisodes","loadMoreEpisodes"]),{validationStyle:function(t){return{"border-left":"2px solid ".concat(t)}},chartColors:function(t,e){var s=this,i=this.episodeStats[t.id][e.id],n=Object.keys(i);return n.map(function(i){return s.episodeStats[t.id][e.id][i].color})},chartData:function(t,e){var s=this;return Object.keys(this.episodeStats[t.id][e.id]).map(function(i){return[s.episodeStats[t.id][e.id][i].name,s.episodeStats[t.id][e.id][i].value]})},isStats:function(t,e){return this.episodeStats[t.id]&&this.episodeStats[t.id][e.id]},onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop)},loadMoreEpisodes:function(){this.displayMoreEpisodes()},setScrollPosition:function(t){this.$refs.body.scrollTop=t}})},Xu=Yu,Zu=(s("0+vu"),Object(kr["a"])(Xu,Hu,Qu,!1,null,"2d3c1049",null)),Ju=Zu.exports,tp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.episodeToEdit&&this.episodeToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("episodes.edit_title"))+" "+t._s(t.episodeToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("episodes.new_episode"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("episodes.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:t.$t("episodes.fields.description")},on:{enter:t.runConfirmation},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("episodes.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.episodeSuccessText)+"\n        ")])],1)])])])},ep=[],sp={name:"edit-episode-modal",components:{TextField:ql,TextareaField:Vl,Combobox:gl},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","episodeToEdit","errorText"],data:function(){return this.episodeToEdit&&this.episodeToEdit.id?{form:{id:this.episodeToEdit.id,name:this.episodeToEdit.name,description:this.episodeToEdit.description,production_id:this.episodeToEdit.project_id},episodeSuccessText:""}:{form:{id:"",name:"",description:"",fps:""},episodeSuccessText:""}},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction"])),methods:Object(mn["a"])({},Object(E["b"])([]),{runConfirmation:function(){this.confirmClicked()},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.episodeToEdit&&this.episodeToEdit.id},resetForm:function(){this.episodeSuccessText="",this.isEditing()?this.form={id:this.episodeToEdit.id,name:this.episodeToEdit.name,description:this.episodeToEdit.description}:(this.form.id=null,this.form.name="",this.form.description="")}}),mounted:function(){this.resetForm()},watch:{active:function(){this.resetForm()},episodeToEdit:function(){this.resetForm()}}},ip=sp,np=(s("NVUn"),Object(kr["a"])(ip,tp,ep,!1,null,"0c877f91",null)),ap=np.exports,op={name:"episodes",components:{EpisodeList:Ju,EditEpisodeModal:ap,DeleteModal:Pl,PageTitle:wr,SearchField:ud,SearchIcon:Wc["o"]},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},loading:{edit:!1,del:!1},errors:{edit:!1,del:!1},episodeToDelete:null,episodeToEdit:null}},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction","displayedEpisodes","isCurrentUserManager","isShotsLoading","isShotsLoadingError","episodes","episodeMap","episodeStats","episodeSearchText","episodeListScrollPosition","shotValidationColumns"])),created:function(){this.initEpisodes().then(this.handleModalsDisplay)},mounted:function(){this.setDefaultSearchText(),this.setDefaultListScrollPosition()},methods:Object(mn["a"])({},Object(E["b"])(["computeEpisodeStats","deleteEpisode","editEpisode","hideAssignations","initEpisodes","loadComment","loadShots","setLastProductionScreen","setProduction","setEpisodeSearch","setEpisodeListScrollPosition","showAssignations"]),{setDefaultSearchText:function(){this.episodeSearchText.length>0&&this.$refs["episode-search-field"].setValue(this.episodeSearchText)},setDefaultListScrollPosition:function(){this.$refs["episode-list"].setScrollPosition(this.episodeListScrollPosition)},navigateToList:function(){this.$router.push({name:"episodes",params:{production_id:this.currentProduction.id}})},confirmEditEpisode:function(t){var e=this;this.loading.edit=!0,this.errors.edit=!1,this.editEpisode(t).then(function(){e.loading.edit=!1,e.modals.isNewDisplayed=!1,e.navigateToList()}).catch(function(){e.loading.edit=!1,e.errors.edit=!0})},confirmDeleteEpisode:function(){var t=this;this.loading.delete=!0,this.errors.edit=!1,this.deleteEpisode(this.episodeToDelete).then(function(){t.loading.delete=!1,t.navigateToList()}).catch(function(){t.loading.delete=!1,t.errors.delete=!0})},resetEditModal:function(){var t={name:""};this.episodes.length>0&&(t.episode_id=this.episodes[0].id),this.openProductions.length>0&&(t.production_id=this.openProductions[0].id),this.episodeToEdit=t},deleteText:function(){var t=this.episodeToDelete;return t?this.$t("episodes.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.episode_id;this.errors={edit:!1,delete:!1},this.modals={isNewDisplayed:!1,isDeleteDisplayed:!1},t.indexOf("edit")>0?(this.episodeToEdit=this.episodeMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete")>0&&(this.episodeToDelete=this.episodeMap[e],this.modals.isDeleteDisplayed=!0)},onSearchChange:function(t){var e=this.$refs["episode-search-field"].getValue();this.setEpisodeSearch(e)},saveScrollPosition:function(t){this.setEpisodeListScrollPosition(t)}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var t=this,e=this.$route.params.production_id;if(this.currentProduction.id!==e){var s={name:"episodes",params:{production_id:this.currentProduction.id}};this.$refs["episode-search-field"].setValue(""),this.$store.commit("SET_SEQUENCE_LIST_SCROLL_POSITION",0),this.$router.push(s),this.loadShots(function(){t.computeEpisodeStats()})}}},socket:{events:{"comment:new":function(t){var e=this,s=t.comment_id;this.loadComment({commentId:s,callback:function(){e.computeEpisodeStats()}})}}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," ").concat(this.$t("episodes.title")," - Kitsu")}}},rp=op,cp=(s("JEOo"),Object(kr["a"])(rp,zu,Ku,!1,null,"9f8ae600",null)),lp=cp.exports,dp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login hero is-fullheight"},[i("div",{staticClass:"container has-text-centered"},[i("div",{staticClass:"box has-text-left"},[i("div",{staticClass:"has-text-centered login-header"},[i("img",{attrs:{src:s("rWzn")}}),i("h1",{staticClass:"title"},[t._v("\n          "+t._s(t.$t("login.title"))+"\n        ")])]),i("div",{staticClass:"field"},[i("p",{staticClass:"control has-icon"},[i("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"input is-medium email",attrs:{type:"text",placeholder:t.$t("login.fields.email")},on:{input:t.updateEmail,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.logIn(e):null}}}),t._m(0)])]),i("div",{staticClass:"field"},[i("p",{staticClass:"control has-icon"},[i("input",{staticClass:"input is-medium password",attrs:{type:"password",placeholder:t.$t("login.fields.password")},on:{input:t.updatePassword,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.logIn(e):null}}}),t._m(1)])]),i("p",{staticClass:"control"},[i("a",{class:{button:!0,"main-button":!0,"is-fullwidth":!0,"is-loading":t.isLoginLoading},on:{click:t.logIn}},[t._v("\n            "+t._s(t.$t("login.login"))+"\n        ")])]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.isLoginError,expression:"isLoginError"}],staticClass:"control error"},[t._v("\n        "+t._s(t.$t("login.login_failed"))+"\n      ")])])])])},up=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-envelope"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-lock"})])}],pp={name:"login",computed:Object(mn["a"])({},Object(E["c"])(["isLoginLoading","isLoginError"])),methods:Object(mn["a"])({},Object(E["b"])([]),{updateEmail:function(t){this.$store.dispatch("changeEmail",t.target.value)},updatePassword:function(t){this.$store.dispatch("changePassword",t.target.value)},logIn:function(){var t=this;this.$store.dispatch("logIn",function(e,s){e&&console.log(e),s&&t.$router.push("/")})}}),metaInfo:function(){return{title:this.$t("login.title")}}},mp=pp,hp=(s("+1AC"),Object(kr["a"])(mp,dp,up,!1,null,"6fbd467c",null)),fp=hp.exports,_p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("topbar"),s("action-topbar"),s("sidebar"),s("router-view")],1)},vp=[],yp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"topbar"},[i("div",{class:{"is-active":!t.isUserMenuHidden},attrs:{id:"c-mask-user-menu"},on:{click:function(e){t.toggleUserMenu()}}}),i("nav",{staticClass:"nav"},[i("div",{staticClass:"nav-left"},[i("a",{staticClass:"nav-item sidebar-button",class:{selected:!t.isSidebarHidden},attrs:{id:"toggle-menu-button"},on:{click:function(e){t.toggleSidebar()}}},[t._v("\n        ≡\n      ")]),i("router-link",{staticClass:"nav-item home-button",attrs:{to:"/"}},[i("img",{attrs:{src:s("zwU1")}})]),t.isProductionContext()?i("div",{class:{"nav-item":!0}},[i("div",{staticClass:"level"},[i("div",{staticClass:"level-item production-selector-label"},[t._v("\n            "+t._s(t.$t("productions.current"))+":\n          ")]),i("div",{staticClass:"level-item"},[i("combobox",{staticClass:"production-selector",attrs:{options:t.getOpenProductionOptions},model:{value:t.currentProductionId,callback:function(e){t.currentProductionId=e},expression:"currentProductionId"}})],1),t.currentProduction?i("router-link",{staticClass:"level-item icon-link",attrs:{title:t.$t("assets.title"),to:{name:"assets",params:{production_id:t.currentProduction.id}}}},[i("img",{attrs:{src:s("xnqW")}})]):t._e(),t.currentProduction?i("router-link",{staticClass:"level-item icon-link",attrs:{title:t.$t("shots.title"),to:{name:"shots",params:{production_id:t.currentProduction.id}}}},[i("img",{attrs:{src:s("pS0n")}})]):t._e(),t.currentProduction?i("router-link",{staticClass:"level-item icon-link",attrs:{title:t.$t("sequences.title"),to:{name:"sequences",params:{production_id:t.currentProduction.id}}}},[i("img",{attrs:{src:s("tJdF")}})]):t._e()],1)]):t._e()],1),i("div",{staticClass:"nav-right"},[i("div",{staticClass:"nav-item"},[i("router-link",{attrs:{to:{name:"notifications"}}},[i("bell-icon",{class:t.notificationBellClass})],1)],1),i("div",{ref:"user-name",class:{"nav-item":!0,"user-nav":!0,active:!t.isUserMenuHidden},on:{click:t.toggleUserMenu}},[i("people-avatar",{staticClass:"avatar",attrs:{person:t.user,"is-link":!1}}),i("people-name",{staticClass:"user-name",attrs:{person:t.user}})],1)])]),i("nav",{directives:[{name:"show",rawName:"v-show",value:!t.isUserMenuHidden,expression:"!isUserMenuHidden"}],ref:"user-menu",staticClass:"user-menu"},[i("ul",[i("li",[i("router-link",{attrs:{to:"/profile"},nativeOn:{click:function(e){t.toggleUserMenu()}}},[t._v("\n          "+t._s(t.$t("main.profile"))+"\n        ")])],1),i("li",{on:{click:t.logout}},[t._v("\n        "+t._s(t.$t("main.logout"))+"\n      ")])])])])},gp=[],kp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"person-name"},[t._v("\n  "+t._s(t.person.first_name+" "+t.person.last_name)+"\n")])},bp=[],Tp={name:"person-name",props:["person"],computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]))},Sp=Tp,Cp=(s("CEME"),Object(kr["a"])(Sp,kp,bp,!1,null,"2b096e90",null)),Ep=Cp.exports,Op={name:"topbar",components:{BellIcon:Wc["b"],Combobox:gl,PeopleName:Ep,PeopleAvatar:Cc},data:function(){return{currentProductionId:null}},mounted:function(){var t=this.$refs["user-menu"],e=this.$refs["user-name"];if(e){var s=e.clientWidth;s>100&&(t.style.width="".concat(s,"px"),e.style.width="".concat(s,"px"))}},computed:Object(mn["a"])({},Object(E["c"])(["isSidebarHidden","isUserMenuHidden","isNewNotification","user","openProductions","getOpenProductionOptions","currentProduction"]),{notificationBellClass:function(){return this.isNewNotification?"has-notifications":"has-no-notifications"}}),methods:Object(mn["a"])({},Object(E["b"])(["loadNotification","setProduction","toggleSidebar","toggleUserMenu","logout"]),{logout:function(){var t=this;this.$store.dispatch("logout",function(e,s){e&&console.log(e),t.toggleUserMenu(),s&&t.$router.push("/login")})},isProductionContext:function(){var t=this.$store.state.route.path;return t.indexOf("assets")>0||t.indexOf("shots")>0||t.indexOf("sequences")>0||t.indexOf("episodes")>0||t.indexOf("playlists")>0||t.indexOf("task-types")>0&&t.indexOf("productions")>0||t.indexOf("asset-types")>0&&t.indexOf("productions")>0||t.indexOf("breakdown")>0}}),watch:{currentProductionId:function(){this.setProduction("".concat(this.currentProductionId))},currentProduction:function(){this.currentProduction&&this.currentProductionId!==this.currentProduction.id&&(this.currentProductionId=this.currentProduction.id)}},socket:{events:{"notifications:new":function(t){if(this.user.id===t.person_id){var e=t.notification_id;this.loadNotification(e)}}}}},Ap=Op,wp=(s("h2VJ"),Object(kr["a"])(Ap,yp,gp,!1,null,"0920556d",null)),Pp=wp.exports,xp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{class:{"action-topbar":!0,hidden:t.isHidden}},[s("div",{staticClass:"flexrow action-bar"},[s("div",{staticClass:"flexrow-item more-menu-icon",on:{click:t.toggleMenu}},[s("more-vertical-icon")],1),"assignation"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[t.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("div",{staticClass:"assignation flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.$tc("tasks.assign",t.nbSelectedTasks,{nbSelectedTasks:t.nbSelectedTasks}))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox",{attrs:{options:t.getPersonOptions},model:{value:t.personId,callback:function(e){t.personId=e},expression:"personId"}})],1),t.isAssignationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0}})],1):t._e(),t.isAssignationLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmAssign}},[t._v("\n            "+t._s(t.$t("main.confirmation"))+"\n            ")])]),t.isAssignationLoading?t._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.$t("main.or"))+"\n          ")]),t.isAssignationLoading?t._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[s("button",{staticClass:"button is-link clear-assignation-button hide-small-screen",on:{click:t.clearAssignation}},[t._v("\n              "+t._s(t.$t("tasks.clear_assignations"))+"\n            ")])])]):s("div",{staticStyle:{"padding-left":"1em"}},[t._v("\n          "+t._s(t.$t("tasks.no_assignation_right"))+"\n        ")])]):t._e(),"change-status"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.change_status_to"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox",{attrs:{options:t.taskStatusOptions},model:{value:t.taskStatusId,callback:function(e){t.taskStatusId=e},expression:"taskStatusId"}})],1),t.isChangeStatusLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmTaskStatusChange}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")]),t.isChangeStatusLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0}})],1):t._e()])])]):t._e(),"tasks"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.create_for_selection"))+"\n          ")]),t.isCreationLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmTaskCreation}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")]),t.isCreationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0}})],1):t._e()])])]):t._e(),"custom-actions"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("custom_actions.run_for_selection"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox",{attrs:{options:t.customActionOptions},model:{value:t.customActionUrl,callback:function(e){t.customActionUrl=e},expression:"customActionUrl"}})],1),s("div",{staticClass:"flexrow-item"},[s("form",{attrs:{target:"_blank",method:"POST",action:t.customActionUrl}},[s("input",{attrs:{type:"hidden",id:"personid",name:"personid"},domProps:{value:t.user.id}}),s("input",{attrs:{type:"hidden",id:"personemail",name:"personemail"},domProps:{value:t.user.email}}),s("input",{attrs:{type:"hidden",id:"projectid",name:"projectid"},domProps:{value:t.currentProduction.id}}),s("input",{attrs:{type:"hidden",id:"currentpath",name:"currentpath"},domProps:{value:t.currentUrl}}),s("input",{attrs:{type:"hidden",id:"currentserver",name:"currentserver"},domProps:{value:t.currentHost}}),s("input",{attrs:{type:"hidden",id:"selection",name:"selection"},domProps:{value:t.selectedTaskIds}}),s("input",{attrs:{type:"hidden",id:"entity_type",name:"entity_type"},domProps:{value:t.currentEntityType}}),s("button",{staticClass:"button is-success",attrs:{type:"submit"}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])])])])]):t._e(),s("div",{staticClass:"flexrow-item clear-selection-container"},[s("div",{staticClass:"clear-selection flexrow",on:{click:t.clearSelectedTasks}},[s("x-icon",{staticClass:"flexrow-item"}),s("span",{staticClass:"flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.$t("main.clear_selection"))+"\n          ")])],1)])]),s("div",{ref:"moreMenu",class:{"more-menu":!0,"is-hidden":t.isMoreMenuDisplayed}},[t.isCurrentViewAsset||t.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("assignation")}}},[t._v("\n        "+t._s(t.$t("menu.assign_tasks"))+"\n      ")]):t._e(),s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("change-status")}}},[t._v("\n        "+t._s(t.$t("menu.change_status"))+"\n      ")]),t.isCurrentViewAsset||t.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("tasks")}}},[t._v("\n        "+t._s(t.$t("menu.create_tasks"))+"\n      ")]):t._e(),s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("custom-actions")}}},[t._v("\n        "+t._s(t.$t("menu.run_custom_action"))+"\n      ")])])]),s("div",{class:{"menu-mask":!0,"is-hidden":t.isMoreMenuDisplayed},on:{click:t.toggleMenu}})])},jp=[],Lp={name:"topbar",components:{ChevronRightIcon:Wc["d"],Combobox:gl,MoreVerticalIcon:Wc["k"],PeopleName:Ep,PeopleAvatar:Cc,Spinner:Hr,ButtonHrefLink:el,XIcon:Wc["r"]},data:function(){return{isMoreMenuDisplayed:!0,isAssignationLoading:!1,isCreationLoading:!1,isChangeStatusLoading:!1,selectedBar:"assignation",personId:"",taskStatusId:"",customActionUrl:"",selectedTaskIds:[],customActionOptions:[]}},computed:Object(mn["a"])({},Object(E["c"])(["assetMap","getPersonOptions","taskStatusOptions","selectedTasks","nbSelectedTasks","nbSelectedValidations","isCurrentUserManager","currentProduction","allCustomActionOptions","assetCustomActionOptions","shotCustomActionOptions","user"]),{isHidden:function(){return 0===this.nbSelectedTasks&&0===this.nbSelectedValidations||!(this.isCurrentViewAsset||this.isCurrentViewTodos||this.isCurrentViewShot)},currentUrl:function(){return this.$route.path},currentHost:function(){return window.location.host},currentEntityType:function(){return this.isCurrentViewAsset?"asset":"shot"},defaultCustomActionUrl:function(){return this.customActionOptions.length>0?this.customActionOptions[0].value:""},isCurrentViewAsset:function(){return this.$route.path.indexOf("asset")>0&&!this.$route.params.asset_id},isCurrentViewShot:function(){return this.$route.path.indexOf("shot")>0&&!this.$route.params.shot_id},isCurrentViewTodos:function(){return this.$route.path.indexOf("todos")>0||this.$route.path.indexOf("people/")>0},isCurrentViewPersonTasks:function(){return this.$route.path.indexOf("todos")>0},isList:function(){return this.isCurrentViewAsset||this.isCurrentViewShot}}),methods:Object(mn["a"])({},Object(E["b"])(["assignSelectedTasks","createSelectedTasks","unassignSelectedTasks","changeSelectedTaskStatus","clearSelectedTasks"]),{getSelectedPersonId:function(){if(this.getPersonOptions.length>0){var t=this.getPersonOptions[0].value;return this.personId||t}return null},confirmAssign:function(){var t=this;this.isAssignationLoading=!0,this.assignSelectedTasks({personId:this.getSelectedPersonId(),callback:function(){t.isAssignationLoading=!1}})},confirmTaskStatusChange:function(){var t=this;this.isChangeStatusLoading=!0,this.changeSelectedTaskStatus({taskStatusId:this.taskStatusId,callback:function(){t.isChangeStatusLoading=!1}})},confirmTaskCreation:function(){var t=this,e=this.$route.path.indexOf("shots")>0?"shots":"assets";this.isCreationLoading=!0,this.createSelectedTasks({type:e,projectId:this.currentProduction.id,callback:function(){t.isCreationLoading=!1}})},clearAssignation:function(){var t=this;this.isAssignationLoading=!0,this.unassignSelectedTasks({callback:function(){t.isAssignationLoading=!1}})},selectBar:function(t){var e=this.isList?"entities-":"todos-";this.$cookie.set("".concat(e,"-selected-bar"),t,{expires:"1M"}),this.selectedBar=t,this.toggleMenu()},toggleMenu:function(){this.isMoreMenuDisplayed=!this.isMoreMenuDisplayed}}),mounted:function(){this.customActionUrl=this.defaultCustomActionUrl},watch:{isHidden:function(){if(!this.isHidden){var t=this.isList?"entities-":"todos-",e=this.$cookie.get("".concat(t,"-selected-bar"));e?this.selectedBar=e:this.isCurrentViewAsset||this.isCurrentViewShot?this.selectedBar="assignation":this.selectedBar="change-status"}},nbSelectedTasks:function(){if(this.selectedTaskIds=Object.keys(this.selectedTasks),this.nbSelectedTasks>0){for(var t=!1,e=!1,s=Object.keys(this.selectedTasks),i=0;i<s.length;i++){var n=s[i],a=this.selectedTasks[n];a.sequence_name?t=!0:e=!0}this.customActionOptions=t&&e?this.allCustomActionOptions:t?this.shotCustomActionOptions:this.assetCustomActionOptions}},$route:function(){this.clearSelectedTasks()}}},Dp=Lp,Ip=(s("RU+V"),Object(kr["a"])(Dp,xp,jp,!1,null,"5fd7ec42",null)),$p=Ip.exports,Mp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"navbar"},[i("aside",{class:{hidden:t.isSidebarHidden}},[i("div",[i("router-link",{staticClass:"home-link",attrs:{to:"/"},on:{click:function(e){t.toggleSidebar()}}},[i("div",{staticClass:"company-logo has-text-centered"},[i("img",{attrs:{src:s("rWzn")}}),i("h2",{staticClass:"subtitle sidebar-title"},[t._v("Kitsu")])])]),i("section",[i("h2",[t._v(t._s(t.$t("main.user")))]),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"todos"}}},[t._v("\n           "+t._s(t.$t("tasks.my_tasks"))+"\n         ")])],1),i("h2",[t._v(t._s(t.$t("main.production")))]),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:t.assetsPath}},[t._v("\n           "+t._s(t.$t("assets.title"))+"\n         ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:t.assetTypesPath}},[t._v("\n           "+t._s(t.$t("asset_types.title"))+"\n         ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:t.shotsPath}},[t._v("\n           "+t._s(t.$t("shots.title"))+"\n         ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:t.sequencesPath}},[t._v("\n           "+t._s(t.$t("sequences.title"))+"\n         ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:t.episodesPath}},[t._v("\n           "+t._s(t.$t("episodes.title"))+"\n         ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:t.breakdownPath}},[t._v("\n           "+t._s(t.$t("breakdown.title"))+"\n         ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:t.playlistsPath}},[t._v("\n           "+t._s(t.$t("playlists.title"))+"\n         ")])],1),t.isCurrentUserManager?i("div",[i("h2",[t._v(t._s(t.$t("main.studio")))]),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"productions"}}},[t._v("\n           "+t._s(t.$t("productions.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"people"}}},[t._v("\n           "+t._s(t.$t("people.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"timesheets"}}},[t._v("\n           "+t._s(t.$t("timesheets.title"))+"\n           ")])],1)]):t._e(),t.isCurrentUserAdmin?i("div",[i("h2",[t._v(t._s(t.$t("main.admin")))]),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:"/task-types"}},[t._v("\n           "+t._s(t.$t("task_types.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{staticClass:"task-status-link",attrs:{to:"/task-status"}},[t._v("\n           "+t._s(t.$t("task_status.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:"/asset-types"}},[t._v("\n           "+t._s(t.$t("asset_types.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"custom-actions"}}},[t._v("\n           "+t._s(t.$t("custom_actions.title"))+"\n           ")])],1)]):t._e()])],1)]),i("div",{class:{"is-active":!t.isSidebarHidden},attrs:{id:"c-mask"},on:{click:function(e){t.toggleSidebar()}}})])},qp=[],Rp={name:"sidebar",data:function(){return{}},computed:Object(mn["a"])({},Object(E["c"])(["isSidebarHidden","rawCurrentProduction","currentProduction","breakdownPath","assetsPath","assetTypesPath","shotsPath","sequencesPath","episodesPath","playlistsPath","isCurrentUserManager","isCurrentUserAdmin"])),methods:Object(mn["a"])({},Object(E["b"])(["toggleSidebar"]))},Np=Rp,Fp=(s("dIz7"),Object(kr["a"])(Np,Mp,qp,!1,null,"5a0d1fec",null)),Up=Fp.exports,Bp={name:"main-wrapper",components:{ActionTopbar:$p,Topbar:Pp,Sidebar:Up}},Vp=Bp,Gp=(s("srF7"),Object(kr["a"])(Vp,_p,vp,!1,null,null,null)),Wp=Gp.exports,zp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"server-down page"},[s("h1",{staticClass:"title"},[t._v(t._s(t.$t("not_found.title")))]),s("p",[t._v("\n    "+t._s(t.$t("not_found.text"))+"\n  ")])])},Kp=[],Hp={name:"server-down",computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]))},Qp=Hp,Yp=(s("pJWi"),Object(kr["a"])(Qp,zp,Kp,!1,null,"e7a6a72e",null)),Xp=Yp.exports,Zp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("page-title",{attrs:{text:t.$t("notifications.title")}}),t._l(t.notifications,function(e){return s("div",{key:e.id,class:{flexrow:!0,notification:!0,unread:!e.read}},[s("div",{staticClass:"flexrow-item"},[t.personMap[e.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.personMap[e.author_id]}}):t._e()],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",{staticClass:"notification-info"},[s("span",{staticClass:"date"},[t._v("\n          "+t._s(t.formatDate(e.created_at))+"\n        ")]),s("router-link",{attrs:{to:{name:"person",params:{person_id:e.author_id}}}},[t._v("\n          "+t._s(t.personName(e))+"\n        ")]),s("span",[t._v("\n          "+t._s(t.$t("notifications.commented_on"))+"\n        ")]),s("router-link",{attrs:{to:{name:"task",params:{task_id:e.task_id}}}},[t._v("\n          "+t._s(e.project_name)+" / "+t._s(e.full_entity_name)+"\n           \n        ")]),s("router-link",{attrs:{to:{name:"task",params:{task_id:e.task_id}}}},[s("task-type-name",{attrs:{"task-type":t.taskTypeMap[e.task_type_id]}})],1),e.change?s("span",[t._v("\n          "+t._s(t.$t("notifications.and_change_status"))+"\n        ")]):t._e(),e.change?s("validation-tag",{staticClass:"validation-tag",attrs:{task:{id:e.task_id,task_status_short_name:t.taskStatusMap[e.task_status_id].short_name,task_status_color:t.taskStatusMap[e.task_status_id].color}}}):t._e(),e.preview_file_id?s("span",[t._v("\n          "+t._s(t.$t("notifications.with_preview"))+"\n        ")]):t._e(),e.preview_file_id?s("span",{staticClass:"thumbnail-picture-wrapper"},[s("entity-thumbnail",{attrs:{entity:{preview_file_id:e.preview_file_id},height:40}})],1):t._e()],1),s("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.compileMarkdown(e.comment_text))}})])])})],2)},Jp=[],tm={name:"notification-page",components:{EntityThumbnail:Fr,PageTitle:wr,PeopleAvatar:Cc,TaskTypeName:cc,ValidationTag:yc},data:function(){return{loading:{notifications:!1},errors:{notifications:!1}}},computed:Object(mn["a"])({},Object(E["c"])(["notifications","taskTypeMap","taskStatusMap","personMap"])),methods:Object(mn["a"])({},Object(E["b"])(["loadNotifications","markAllNotificationsAsRead"]),{formatDate:function(t){var e=Mn.a.tz(t,"UTC");return t=Mn()(e.format()).fromNow(),t[0].toUpperCase()+t.slice(1)},compileMarkdown:function(t){return _r()(t||"")},personName:function(t){var e=this.personMap[t.author_id];return e?e.full_name:""}}),mounted:function(){var t=this;this.loading.notifications=!0,this.errors.notifications=!1,this.loadNotifications().then(function(){t.loading.notifications=!1}).catch(function(e){console.error(e),t.errors.notifications=!0})},socket:{events:{"preview:add":function(t){var e=t.comment_id,s=t.preview_file_id;this.$store.commit("NOTIFICATION_ADD_PREVIEW",{previewId:s,commentId:e})}}},beforeDestroy:function(){this.markAllNotificationsAsRead()},metaInfo:function(){return{title:"".concat(this.$t("notifications.title")," - Kitsu")}}},em=tm,sm=(s("SV2C"),Object(kr["a"])(em,Zp,Jp,!1,null,"6046f782",null)),im=sm.exports,nm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"open-productions page"},[t.isOpenProductionsLoading?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t.openProductions.length>0?s("div",[s("h1",{staticClass:"title has-text-centered"},[s("activity-icon"),t._v("\n      "+t._s(t.$t("productions.home.title"))+"\n    ")],1),s("div",{class:{"open-productions-list":!0,"is-grid":t.openProductions&&t.openProductions.length>4}},t._l(t.openProductions,function(e){return s("div",{key:e.id,staticClass:"open-production has-text-centered"},[s("router-link",{attrs:{to:t.getPath(e)}},[s("div",{staticClass:"avatar has-text-centered",style:{background:t.getAvatarColor(e)}},[e.has_avatar?s("img",{attrs:{src:t.getThumbnailPath(e)}}):s("span",[t._v("\n              "+t._s(t.generateAvatar(e))+"\n            ")])]),s("div",{staticClass:"production-name"},[t._v("\n            "+t._s(e.name)+"\n          ")])]),s("router-link",{staticClass:"secondary",attrs:{to:{name:"assets",params:{production_id:e.id}}}},[t._v("\n          "+t._s(t.$t("assets.title"))+"\n        ")]),t._v("\n        -\n        "),s("router-link",{staticClass:"secondary",attrs:{to:{name:"shots",params:{production_id:e.id}}}},[t._v("\n          "+t._s(t.$t("shots.title"))+"\n        ")]),t._v("\n        -\n        "),s("router-link",{staticClass:"secondary",attrs:{to:{name:"sequences",params:{production_id:e.id}}}},[t._v("\n          "+t._s(t.$t("sequences.title"))+"\n        ")])],1)})),s("div",{staticClass:"has-text-centered new-production-link"},[s("router-link",{attrs:{to:{name:"open-productions-new"}}},[t._v("\n        "+t._s(t.$t("productions.home.create_new"))+"\n      ")])],1)]):s("div",{staticClass:"has-text-centered welcome"},[t._m(0),s("h1",{staticClass:"title has-text-centered"},[t._v("\n      "+t._s(t.$t("productions.home.welcome"))+"\n    ")]),t.isCurrentUserManager?s("div",[s("p",{staticClass:"has-text-centered info"},[t._v("\n        "+t._s(t.$t("productions.home.empty"))+"\n      ")]),s("p",{staticClass:"has-text-centered"},[s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("productions.home.create_new"),path:{name:"open-productions-new"},"is-responsive":!1}})],1)]):s("div",[s("p",{staticClass:"has-text-centered"},[t._v("\n        "+t._s(t.$t("productions.home.no_task"))+"\n      ")])])]),s("edit-production-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editProduction.isLoading,"is-error":t.editProduction.isError,"cancel-route":"/open-productions"},on:{confirm:t.confirmEditProduction}})],1)},am=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"kitsu-logo info"},[i("img",{attrs:{src:s("y4jB")}})])}],om=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.productionToEdit&&t.productionToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("productions.edit_title"))+" "+t._s(t.productionToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("productions.new_production"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("productions.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("combobox",{attrs:{label:t.$t("productions.fields.status"),options:t.getProductionStatusOptions,localeKeyPrefix:"productions.status."},on:{enter:t.runConfirmation},model:{value:t.form.project_status_id,callback:function(e){t.$set(t.form,"project_status_id",e)},expression:"form.project_status_id"}}),t.productionToEdit&&t.productionToEdit.id?s("div",[s("span",{staticClass:"label"},[t._v(t._s(t.$t("productions.picture")))]),s("file-upload",{ref:"fileField",attrs:{accept:".png"},on:{fileselected:t.onFileSelected}})],1):t._e()],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n        "+t._s(t.$t("assets.edit_fail"))+"\n      ")]):t._e()])])])},rm=[],cm={name:"edit-production-modal",components:{TextField:ql,FileUpload:ed,Combobox:gl},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText","productionToEdit"],watch:{productionToEdit:function(){this.productionToEdit&&this.productionToEdit.id?(this.form.name=this.productionToEdit.name,this.form.project_status_id=this.productionToEdit.project_status_id):this.form={name:"",project_status_id:this.getProductionStatusOptions[0].value}},active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.nameField.focus(),t.formData=null,t.$refs.fileField&&t.$refs.fileField.reset()},100)}},data:function(){return this.productionToEdit&&this.productionToEdit.id?{form:{name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id},formData:null}:{form:{name:"",project_status_id:""},formData:null}},computed:Object(mn["a"])({},Object(E["c"])(["productions","productionStatus","getProductionStatusOptions"])),methods:Object(mn["a"])({},Object(E["b"])([]),{runConfirmation:function(){this.$emit("confirm",this.form)},onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)}}),mounted:function(){this.productionStatus.length>0&&(this.form.project_status_id=this.productionStatus[0].id)}},lm=cm,dm=(s("WsUy"),Object(kr["a"])(lm,om,rm,!1,null,"2b036eca",null)),um=dm.exports,pm={name:"open-productions",components:{ActivityIcon:Wc["a"],ButtonLink:Qc,EditProductionModal:um,Spinner:Hr},data:function(){return{modals:{isNewDisplayed:!1}}},computed:Object(mn["a"])({},Object(E["c"])(["openProductions","isCurrentUserManager","editProduction","lastProductionScreen","isOpenProductionsLoading"])),methods:Object(mn["a"])({},Object(E["b"])(["newProduction"]),{generateAvatar:function(t){var e=t.name.length>0?t.name[0]:"P";return e.toUpperCase()},getAvatarColor:function(t){return In.fromString(t.name)},getPath:function(t){return{name:this.lastProductionScreen,params:{production_id:t.id}}},getThumbnailPath:function(t){return"/api/pictures/thumbnails/projects/".concat(t.id,".png")},confirmEditProduction:function(t){var e=this;this.newProduction({data:t,callback:function(t,s){t||(e.modals.isNewDisplayed=!1,e.$router.push({name:"assets",params:{production_id:s.id}}))}})},handleModalsDisplay:function(){var t=this.$store.state.route.path;t.indexOf("new")>0?this.modals.isNewDisplayed=!0:this.modals.isNewDisplayed=!1}}),watch:{$route:function(){this.handleModalsDisplay()}},created:function(){this.handleModalsDisplay()},metaInfo:function(){return{title:"".concat(this.$t("productions.home.title")," - Kitsu")}}},mm=pm,hm=(s("G4fB"),Object(kr["a"])(mm,nm,am,!1,null,"446688e1",null)),fm=hm.exports,_m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"people page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("people.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[t.isCurrentUserAdmin?s("button-link",{staticClass:"level-item",attrs:{text:t.$t("main.csv.import_file"),"is-responsive":!0,icon:"upload",path:"/people/import"}}):t._e(),s("button-href-link",{staticClass:"level-item",attrs:{text:t.$t("main.csv.export_file"),icon:"download",path:"/api/export/csv/persons.csv"}}),t.isCurrentUserAdmin?s("button-link",{staticClass:"level-item",attrs:{text:t.$t("people.new_person"),"is-responsive":!0,icon:"plus",path:"/people/new"}}):t._e()],1)])]),s("people-list",{attrs:{entries:t.people,"is-loading":t.isPeopleLoading,"is-error":t.isPeopleLoadingError}}),s("import-modal",{attrs:{active:t.isImportPeopleModalShown,"is-loading":t.isImportPeopleLoading,"is-error":t.isImportPeopleLoadingError,"cancel-route":"/people","form-data":t.personCsvFormData,columns:t.csvColumns},on:{fileselected:t.selectFile,confirm:t.uploadImportFile}}),s("edit-person-modal",{attrs:{active:t.isEditModalShown,"is-loading":t.isEditLoading,"is-error":t.isEditLoadingError,"cancel-route":"/people"},on:{confirm:t.confirmEditPeople}}),s("delete-modal",{attrs:{active:t.isDeleteModalShown,"is-loading":t.isDeleteLoading,"is-error":t.isDeleteLoadingError,"cancel-route":"/people",text:t.deleteText,"error-text":t.$t("people.delete_error")},on:{confirm:t.confirmDeletePeople}})],1)},vm=[],ym=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v("\n          "+t._s(t.$t("people.list.name"))+"\n          ")]),s("th",{staticClass:"email"},[t._v("\n          "+t._s(t.$t("people.list.email"))+"\n          ")]),s("th",{staticClass:"phone"},[t._v("\n          "+t._s(t.$t("people.list.phone"))+"\n          ")]),s("th",{staticClass:"role"},[t._v("\n          "+t._s(t.$t("people.list.role"))+"\n          ")]),s("th",{staticClass:"active"},[t._v("\n          "+t._s(t.$t("people.list.active"))+"\n          ")]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("people-name-cell",{staticClass:"name",attrs:{entry:e}}),s("td",{staticClass:"email"},[t._v(t._s(e.email))]),s("td",{staticClass:"phone"},[t._v(t._s(e.phone))]),s("td",{staticClass:"role"},[t._v(t._s(t.$t("people.role."+e.role)))]),s("td",{staticClass:"active"},[t._v(t._s(e.active?t.$t("main.yes"):t.$t("main.no")))]),t.isCurrentUserAdmin?s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-person",params:{person_id:e.id}},"delete-route":{name:"delete-person",params:{person_id:e.id}}}}):s("td",{staticClass:"actions"})],1)}))])]),t.isLoading?t._e():s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("people.persons",t.entries.length))+"\n  ")])],1)},gm=[],km=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("div",{staticClass:"people-name"},[s("people-avatar",{staticClass:"avatar",attrs:{person:t.entry}}),s("people-name",{staticClass:"people-name",attrs:{person:t.entry}})],1)])},bm=[],Tm={name:"people-name-cell",components:{PeopleName:Ep,PeopleAvatar:Cc},props:["entry"],computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]))},Sm=Tm,Cm=(s("3GwI"),Object(kr["a"])(Sm,km,bm,!1,null,"5c855ba0",null)),Em=Cm.exports,Om={name:"people-list",components:{PeopleNameCell:Em,RowActions:Bc,TableInfo:Zr},props:["entries","isLoading","isError","onEditClicked","onDeleteClicked"],computed:Object(mn["a"])({},Object(E["c"])(["isCurrentUserAdmin"])),methods:Object(mn["a"])({},Object(E["b"])([]),{taskColor:function(t){return t<1||t>4?"red":""},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},Am=Om,wm=(s("JRn6"),Object(kr["a"])(Am,ym,gm,!1,null,"c95597fc",null)),Pm=wm.exports,xm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[void 0!==t.personToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("people.edit_title"))+" "+t._s(t.personName)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("people.new_person"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{ref:"name-field",attrs:{label:t.$t("people.fields.first_name")},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}}),s("text-field",{attrs:{label:t.$t("people.fields.last_name")},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}}),s("text-field",{attrs:{label:t.$t("people.fields.email")},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),s("text-field",{attrs:{label:t.$t("people.fields.phone")},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),s("combobox",{attrs:{label:t.$t("people.fields.role"),options:t.roleOptions,localeKeyPrefix:"people.role."},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}}),s("combobox",{attrs:{label:t.$t("people.fields.active"),options:t.activeOptions},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},jm=[],Lm={name:"edit-modal",props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText"],data:function(){return{form:{first_name:"",last_name:"",email:"",phone:"",role:"user",active:"true"},roleOptions:[{label:"user",value:"user"},{label:"manager",value:"manager"},{label:"admin",value:"admin"}],activeOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}]}},components:{TextField:ql,Combobox:gl},computed:Object(mn["a"])({},Object(E["c"])(["personToEdit"]),{personName:function(){return void 0!==this.personToEdit?this.personToEdit.first_name+" "+this.personToEdit.last_name:""}}),methods:Object(mn["a"])({},Object(E["b"])([]),{confirmClicked:function(){this.form.active="true"===this.form.active||!0===this.form.active,this.$emit("confirm",this.form)},resetForm:function(){this.personToEdit&&(this.form={first_name:this.personToEdit.first_name,last_name:this.personToEdit.last_name,phone:this.personToEdit.phone,email:this.personToEdit.email,role:this.personToEdit.role,active:!this.personToEdit.id||this.personToEdit.active?"true":"false"})}}),watch:{personToEdit:function(){this.resetForm()},active:function(){var t=this;this.active&&(this.resetForm(),setTimeout(function(){t.$refs["name-field"].focus()},100))}}},Dm=Lm,Im=(s("r1zA"),Object(kr["a"])(Dm,xm,jm,!1,null,"67a3f948",null)),$m=Im.exports,Mm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"filters"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[t._m(0),t._l(t.filters,function(e){return s("div",{key:e.id,staticClass:"level-item tag filter"},[s("span",[t._v("\n          "+t._s(e.type)+"\n          =\n          "+t._s(e.value.name)+"\n        ")]),s("button",{staticClass:"delete is-small remove-filter",on:{click:function(s){t.removeFilter(e)}}})])}),t.isAddWidgetVisible?s("div",{staticClass:"level-item"},[s("div",{staticClass:"level"},[s("span",{staticClass:"select level-item"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.filterType,expression:"filterType"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.filterType=e.target.multiple?s:s[0]},t.onFilterTypeChange]}},t._l(t.filterTypes,function(e){return s("option",{key:e},[t._v("\n              "+t._s(e)+"\n            ")])}))]),s("span",{staticClass:"add-filter-operator level-item"},[t._v("\n          =\n        ")]),s("span",{staticClass:"select level-item"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.filterValue,expression:"filterValue"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.filterValue=e.target.multiple?s:s[0]}}},t._l(t.choices,function(e){return s("option",{key:e?e.name:"",domProps:{value:e}},[t._v("\n              "+t._s(e?e.name:"")+"\n            ")])}))]),s("button",{staticClass:"button level-item is-primary",on:{click:t.addNewFilter}},[t._v("\n          Add filter\n        ")]),s("button",{staticClass:"button level-item is-link",on:{click:t.hideAddFilter}},[t._v("\n          Cancel\n        ")])])]):s("div",{staticClass:"level-item"},[s("button",{staticClass:"button is-small",on:{click:t.showAddFilter}},[t._v("\n          New filter\n        ")])])],2)])])},qm=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"level-item"},[s("span",{staticClass:"subtitle"},[t._v("Filters: ")])])}],Rm={name:"filters",props:["filters","filterTypes","addFilter","removeFilter","changeFilterType","choices"],data:function(){return{isAddWidgetVisible:!1,filterType:"Production",filterValue:void 0!==this.choices&&this.choices.length>0?this.choices[0]:{}}},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{addNewFilter:function(){this.isAddWidgetVisible=!1,this.addFilter({type:this.filterType,value:this.filterValue})},showAddFilter:function(){this.isAddWidgetVisible=!0},hideAddFilter:function(){this.isAddWidgetVisible=!1},onFilterTypeChange:function(){var t=this.changeFilterType(this.filterType);void 0!==t&&t.length>0&&(this.filterValue=t[0])}})},Nm=Rm,Fm=(s("JMeF"),Object(kr["a"])(Nm,Mm,qm,!1,null,"f32ef758",null)),Um=Fm.exports,Bm={name:"people",components:{PeopleList:Pm,DeleteModal:Pl,EditPersonModal:$m,ImportModal:ad,ButtonLink:Qc,ButtonHrefLink:el,PageTitle:wr,Filters:Um},data:function(){return{choices:[],personFilters:[{type:"Situation",value:{name:"active"}}],personFilterTypes:["Situation","Skill"],csvColumns:["First Name","Last Name","Email","Phone"]}},created:function(){var t=this;this.loadPeople(function(){t.handleModalsDisplay()})},watch:{$route:function(t,e){this.handleModalsDisplay()}},computed:Object(mn["a"])({},Object(E["c"])(["people","isPeopleLoading","isPeopleLoadingError","isImportPeopleModalShown","isImportPeopleLoading","isImportPeopleLoadingError","isEditModalShown","isEditLoading","isEditLoadingError","isDeleteModalShown","isDeleteLoading","isDeleteLoadingError","isImportModalShown","isImportLoading","isImportLoadingError","personToDelete","personCsvFormData","personToEdit","isCurrentUserAdmin"]),{deleteText:function(){var t=this.personToDelete;if(void 0!==t){var e="".concat(t.first_name," ").concat(t.last_name);return this.$t("people.delete_text",{personName:e})}return""}}),methods:Object(mn["a"])({},Object(E["b"])(["loadPeople"]),{uploadImportFile:function(){var t=this;this.$store.dispatch("uploadPersonFile",function(e){e||(t.$store.dispatch("loadPeople"),t.$router.push("/people"))})},addPersonFilter:function(t){},removePersonFilter:function(t){},confirmEditPeople:function(t){var e=this,s="editPeople";void 0===this.personToEdit.id&&(s="newPeople"),this.$store.dispatch(s,{data:t,callback:function(t){t||e.$router.push("/people")}})},confirmDeletePeople:function(){var t=this;this.$store.dispatch("deletePeople",function(e){e||t.$router.push("/people")})},selectFile:function(t){this.$store.commit("PERSON_CSV_FILE_SELECTED",t)},changeFilterType:function(t){return"Assignee"===t||("Production"===t?(this.choices=this.people,this.choices=this.productions):this.choices=[]),this.choices},showImportModalIfNeeded:function(t){t.indexOf("import")>0?this.$store.dispatch("showPersonImportModal"):this.$store.dispatch("hidePersonImportModal")},showDeleteModalIfNeeded:function(t,e){t.indexOf("delete")>0?this.$store.dispatch("showPersonDeleteModal",e):this.$store.dispatch("hidePersonDeleteModal",e)},showEditModalIfNeeded:function(t,e){t.indexOf("new")>0?this.$store.dispatch("showPersonEditModal"):t.indexOf("edit")>0?this.$store.dispatch("showPersonEditModal",e):this.$store.dispatch("hidePersonEditModal",e)},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.person_id;this.showDeleteModalIfNeeded(t,e),this.showEditModalIfNeeded(t,e),this.showImportModalIfNeeded(t,e)}}),metaInfo:function(){return{title:"".concat(this.$t("people.title")," - Kitsu")}}},Vm=Bm,Gm=(s("I9o0"),Object(kr["a"])(Vm,_m,vm,!1,null,"465e1b8e",null)),Wm=Gm.exports,zm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"people page fixed-page"},[s("div",{staticClass:"flexrow page-header"},[s("div",{staticClass:"flexrow-item"},[s("people-avatar",{attrs:{person:t.person,size:80,"font-size":30,"is-link":!1}})],1),s("div",{staticClass:"flexrow-item"},[s("page-title",{attrs:{text:t.person?t.person.name:""}})],1)]),s("div",{staticClass:"task-tabs tabs"},[s("ul",[s("li",{class:{"is-active":t.isActiveTab("todos")}},[s("router-link",{attrs:{to:{name:"person",params:{person_id:t.person.id}}}},[t._v("\n          "+t._s(t.$t("tasks.current"))+"\n        ")])],1),s("li",{class:{"is-active":t.isActiveTab("done")},on:{click:function(e){t.selectTab("done")}}},[s("router-link",{attrs:{to:{name:"person-tab",params:{tab:"done",person_id:t.person.id}}}},[t._v("\n          "+t._s(t.$t("tasks.done"))+" ("+t._s(t.displayedPersonDoneTasks.length)+")\n        ")])],1),t.isCurrentUserManager?s("li",{class:{"is-active":t.isActiveTab("timesheets")},on:{click:function(e){t.selectTab("timesheet")}}},[s("router-link",{attrs:{to:{name:"person-tab",params:{tab:"timesheets",person_id:t.person.id}}}},[t._v("\n          "+t._s(t.$t("timesheets.title"))+"\n        ")])],1):t._e()])]),t.isActiveTab("done")?t._e():s("search-field",{ref:"person-tasks-search-field",class:{"search-field":!0},attrs:{"can-save":!0},on:{change:t.onSearchChange,save:t.saveSearchQuery}}),t.isActiveTab("todos")?s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:t.personTaskSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1):t._e(),t.isActiveTab("todos")?s("todos-list",{ref:"task-list",attrs:{entries:t.displayedPersonTasks,"is-loading":t.isTasksLoading,"is-error":t.isTasksLoadingError,"selection-grid":t.personTaskSelectionGrid},on:{scroll:t.setPersonTasksScrollPosition}}):t._e(),t.isActiveTab("done")?s("todos-list",{attrs:{entries:t.displayedPersonDoneTasks,"is-loading":t.isTasksLoading,"is-error":t.isTasksLoadingError,done:!0,selectionGrid:t.personTaskSelectionGrid}}):t._e(),t.isActiveTab("timesheets")?s("timesheet-list",{attrs:{tasks:t.displayedPersonTasks,"done-tasks":t.displayedPersonDoneTasks,"is-loading":t.isTasksLoading,"is-error":t.isTasksLoadingError,"time-spent-map":t.personTimeSpentMap,"time-spent-total":t.personTimeSpentTotal,"hide-done":t.personTasksSearchText.length>0},on:{"date-changed":t.onDateChanged,"time-spent-change":t.onTimeSpentChange}}):t._e()],1)},Km=[],Hm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-timesheet data-list"},[s("div",{staticClass:"flexrow timesheet-header"},[s("div",{staticClass:"flexrow-item current-date"},[s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-field",language:t.locale,"disabled-dates":t.disabledDates,"monday-first":!0,format:"d MMMM yyyy"},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1),s("div",{staticClass:"flexrow time-spent-total"},[t._v("\n    -  \n    "+t._s(t.timeSpentTotal)+" "+t._s(t.$t("timesheets.hours"))+"\n    ")])]),s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[t._v("\n            "+t._s(t.$t("tasks.fields.production"))+"\n          ")]),s("th",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("tasks.fields.entity"))+"\n          ")]),s("th",{staticClass:"time-spent"},[t._v("\n            "+t._s(t.$t("timesheets.time_spents"))+"\n          ")])])])])]),t.tasks.length>0&&!t.isLoading?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.tasks,function(e,i){return s("tr",{key:e.id+"-"+i},[s("production-name-cell",{staticClass:"production",attrs:{entry:t.productionMap[e.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":e.project_id,entry:{id:e.task_type_id,name:e.task_type_name,color:e.task_type_color}}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:e.entity_path}},[t._v("\n              "+t._s(e.full_entity_name)+"\n            ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:t.timeSpentMap[e.id]?t.timeSpentMap[e.id].duration/60:0,"task-id":e.id},on:{change:t.onSliderChange}})],1)}))]),t.hideDone?t._e():s("page-subtitle",{attrs:{text:t.$t("timesheets.done_tasks")}}),t.isLoading||t.hideDone?t._e():s("table",{staticClass:"table"},[s("tbody",t._l(t.doneTasks,function(e,i){return s("tr",{key:e+"-"+i},[s("production-name-cell",{staticClass:"production",attrs:{entry:t.productionMap[e.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":e.project_id,entry:{id:e.task_type_id,name:e.task_type_name,color:e.task_type_color}}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:e.entity_path}},[t._v("\n             "+t._s(e.full_entity_name)+"\n             "+t._s(t.timeSpentMap[e.id]?t.timeSpentMap[e.id].duration/60:0)+"\n           ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:t.timeSpentMap[e.id]?t.timeSpentMap[e.id].duration/60:0,"task-id":e.id},on:{change:t.onSliderChange}})],1)}))])],1):t._e(),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isLoading?t._e():s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.tasks.length)+" "+t._s(t.$tc("tasks.tasks",t.tasks.length))+"\n  ")])],1)},Qm=[],Ym=s("+jP+"),Xm=s("JDAR"),Zm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"production-name"},[s("div",{staticClass:"flexrow"},[s("router-link",{attrs:{to:t.productionRoute}},[t.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:t.getAvatarColor(t.entry),width:t.size+"px",height:t.size+"px","font-size":t.size-15+"px","line-height":t.size+"px"}},[t.entry.has_avatar?s("span",[s("img",{attrs:{src:t.getThumbnailPath(t.entry)}})]):s("span",[t._v("\n          "+t._s(t.generateAvatar(t.entry))+"\n        ")])]):t._e(),t.onlyAvatar?t._e():s("span",{staticClass:"flexrow-item"},[t._v("\n        "+t._s(t.entry.name)+"\n      ")])])],1)])},Jm=[],th={uname:"production-name-cell",props:{entry:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String}},computed:Object(mn["a"])({},Object(E["c"])([]),{productionRoute:function(){return{name:this.lastProductionScreen,params:{production_id:this.entry.id}}}}),methods:Object(mn["a"])({},Object(E["b"])([]),{generateAvatar:function(t){var e=t.name.length>0?t.name[0]:"P";return e.toUpperCase()},getAvatarColor:function(t){return In.fromString(t.name)},getThumbnailPath:function(t){return"/api/pictures/thumbnails/projects/".concat(t.id,".png")}})},eh=th,sh=(s("5foV"),Object(kr["a"])(eh,Zm,Jm,!1,null,"0b6cb6c6",null)),ih=sh.exports,nh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"value flexrow-item"},[t._v("\n      "+t._s(t.value)+"\n    ")]),s("vue-slider",t._b({ref:"slider",staticClass:"flexrow-item slider",model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"vue-slider",t.options,!1)),s("button",{staticClass:"button flexrow-item",on:{click:function(e){t.setValue(1)}}},[t._v("1")]),s("button",{staticClass:"button flexrow-item",on:{click:function(e){t.setValue(4)}}},[t._v("4")]),s("button",{staticClass:"button flexrow-item",on:{click:function(e){t.setValue(8)}}},[t._v("8")])],1)])},ah=[],oh=s("b3l/"),rh=s.n(oh),ch={name:"time-slider-cell",data:function(){return{value:this.duration,options:{show:!0,width:400,min:0,max:10,interval:.5,lazy:!0,piecewise:!0,tooltip:"hover",tooltipDir:"bottom",tooltipStyle:{"background-color":"#FFFFFF",color:"#666666","z-index":2e3},processStyle:{"background-color":"#8F91EB"}}}},components:{VueSlider:rh.a},props:{"task-id":{type:String,default:""},duration:{type:Number,default:0}},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{setValue:function(t){this.value=t}}),watch:{value:function(){this.$emit("change",{taskId:this.taskId,duration:this.value})}}},lh=ch,dh=(s("7kHw"),Object(kr["a"])(lh,nh,ah,!1,null,"17fb6a9d",null)),uh=dh.exports,ph={name:"timesheet-list",components:{Datepicker:Ym["a"],EntityThumbnail:Fr,ProductionNameCell:ih,PageSubtitle:Ir,TableInfo:Zr,TaskTypeName:pc,TimeSliderCell:uh},data:function(){return{selectedDate:Mn()().toDate(),disabledDates:{from:Mn()().toDate()}}},props:{tasks:{default:function(){return[]},type:Array},doneTasks:{default:function(){return[]},type:Array},isLoading:{default:!1,type:Boolean},isError:{default:!1,type:Boolean},done:{default:!1,type:Boolean},timeSpentMap:{default:function(){},type:Object},timeSpentTotal:{default:0,type:Number},hideDone:{default:!1,type:Boolean}},computed:Object(mn["a"])({},Object(E["c"])(["nbSelectedTasks","productionMap","user"]),{locale:function(){return"fr_FR"===this.user.locale?Xm["b"]:Xm["a"]}}),methods:Object(mn["a"])({},Object(E["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},currentDate:function(){return Mn()().format("LL")},onSliderChange:function(t){this.$emit("time-spent-change",t)}}),watch:{selectedDate:function(){this.$emit("date-changed",this.selectedDate)}}},mh=ph,hh=(s("tu/B"),Object(kr["a"])(mh,Hm,Qm,!1,null,"5518731c",null)),fh=hh.exports,_h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[t._v("\n            "+t._s(t.$t("tasks.fields.production"))+"\n          ")]),s("th",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"thumbnail"}),s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("tasks.fields.entity"))+"\n          ")]),s("th",{staticClass:"description"},[t._v("\n            "+t._s(t.$t("assets.fields.description"))+"\n          ")]),s("th",{staticClass:"status"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_status"))+"\n          ")]),t.done?s("th",{staticClass:"end-date"},[t._v("\n            "+t._s(t.$t("tasks.fields.end_date"))+"\n          ")]):s("th",{staticClass:"last-comment"},[t._v("\n            "+t._s(t.$t("tasks.fields.last_comment"))+"\n          ")])])])])]),t.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e,i){return s("tr",{key:e+"-"+i},[s("production-name-cell",{staticClass:"production",attrs:{entry:t.productionMap[e.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":e.project_id,entry:{id:e.task_type_id,name:e.task_type_name,color:e.task_type_color}}}),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{"empty-width":60,"empty-height":40,entity:{preview_file_id:e.entity_preview_file_id}}})],1),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:e.entity_path}},[t._v("\n              "+t._s(e.full_entity_name)+"\n            ")])],1),s("description-cell",{staticClass:"description",attrs:{entry:{description:e.entity_description}}}),s("validation-cell",{ref:"validation-"+i+"-0",refInFor:!0,staticClass:"status unselectable",attrs:{"task-test":e,"is-border":!1,"is-assignees":!1,selectable:!t.done,selected:!(!t.selectionGrid||!t.selectionGrid[i])&&t.selectionGrid[i][0],rowX:i,columnY:0,column:e.taskStatus},on:{select:t.onTaskSelected,unselect:t.onTaskUnselected}}),t.done?s("td",{staticClass:"end-date"},[t._v("\n            "+t._s(t.formatDate(e.end_date))+"\n          ")]):s("last-comment-cell",{staticClass:"last-comment",attrs:{task:e}})],1)}))])]):t._e(),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isLoading?t._e():s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("tasks.tasks",t.entries.length))+"\n  ")])],1)},vh=[],yh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("div",{staticClass:"flexrow"},[t.task.last_comment.person?s("people-avatar",{staticClass:"flexrow-item avatar-wrapper",attrs:{size:25,"font-size":14,person:t.task.last_comment.person}}):s("span",{staticClass:"no-avatar"},[t._v("\n       \n    ")]),t.commentText&&t.commentText.length>0?s("span",{staticClass:"flexrow-item last-comment",domProps:{innerHTML:t._s(t.compileMarkdown(t.commentText))}}):t.task.last_comment.person?s("span",{staticClass:"flexrow-item last-comment no-comment"},[t._v("\n      "+t._s(t.$t("main.empty_comment"))+"\n    ")]):t._e()],1)])},gh=[],kh={name:"last-comment-cell",components:{PeopleAvatar:Cc},props:["task"],computed:Object(mn["a"])({},Object(E["c"])([]),{commentText:function(){var t=this.task.last_comment.text,e=140,s=t||"";return void 0!==t&&t.length>e&&(s=t.slice(0,e)+"..."),s}}),methods:Object(mn["a"])({},Object(E["b"])([]),{compileMarkdown:function(t){return _r()(t||"")}})},bh=kh,Th=(s("n4nw"),Object(kr["a"])(bh,yh,gh,!1,null,"63a31a23",null)),Sh=Th.exports,Ch={name:"todos-list",components:{EntityThumbnail:Fr,DescriptionCell:Tr,LastCommentCell:Sh,ProductionNameCell:ih,TableInfo:Zr,TaskTypeName:pc,ValidationCell:rl,ValidationTag:yc},props:["entries","isLoading","isError","done","selectionGrid"],computed:Object(mn["a"])({},Object(E["c"])(["nbSelectedTasks","productionMap"])),methods:Object(mn["a"])({},Object(E["b"])([]),{setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},formatDate:function(t){return t?Mn()(t).fromNow():""},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop)},onTaskSelected:function(t){if(t.isShiftKey){if(this.lastSelection){var e=this.lastSelection.x,s=t.x;t.x<this.lastSelection.x&&(e=t.x,s=this.lastSelection.x);for(var i=e;i<=s;i++){var n="validation-"+i+"-0",a=this.$refs[n][0];this.selectionGrid[i][0]||a.select({ctrlKey:!0,isUserClick:!1})}}}else t.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");this.$store.commit("ADD_SELECTED_TASK",t),!t.isShiftKey&&t.isUserClick&&(this.lastSelection={x:t.x,y:0})},onTaskUnselected:function(t){t.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",t):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",t):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",t))}})},Eh=Ch,Oh=(s("RHhy"),Object(kr["a"])(Eh,_h,vh,!1,null,"f1e9398e",null)),Ah=Oh.exports,wh={name:"person",components:{PageTitle:wr,PageSubtitle:Ir,PeopleAvatar:Cc,SearchField:ud,SearchQueryList:vd,TodosList:Ah,TimesheetList:fh},data:function(){return{activeTab:"todos",isTasksLoading:!1,isTasksLoadingError:!1,person:{},selectedDate:Mn()().format("YYYY-MM-DD")}},mounted:function(){var t=this;this.updateActiveTab(),this.personTasksSearchText.length>0&&this.$refs["person-tasks-search-field"].setValue(this.personTasksSearchText),setTimeout(function(){t.$refs["person-tasks-search-field"]&&t.$refs["person-tasks-search-field"].focus()},100),this.loadPerson(this.$route.params.person_id)},computed:Object(mn["a"])({},Object(E["c"])(["displayedPersonTasks","displayedPersonDoneTasks","isCurrentUserManager","personMap","personTasksScrollPosition","personTasksSearchText","personTaskSearchQueries","personTaskSelectionGrid","personTimeSpentMap","personTimeSpentTotal"])),methods:Object(mn["a"])({},Object(E["b"])(["loadPersonTasks","setPersonTasksSearch","savePersonTasksSearch","removePersonTasksSearch","setPersonTasksScrollPosition","setTimeSpent"]),{isActiveTab:function(t){return this.activeTab===t},selectTab:function(t){var e=this;this.activeTab=t,this.isActiveTab("todos")&&setTimeout(function(){e.$refs["person-tasks-search-field"]&&e.$refs["person-tasks-search-field"].focus()},100)},onSearchChange:function(t){this.setPersonTasksSearch(t)},loadPerson:function(t){var e=this;this.person=this.personMap[t],this.isTasksLoading=!0,this.loadPersonTasks({personId:this.person.id,date:this.selectedDate,callback:function(t){t&&console.log(t),e.isTasksLoading=!1,e.isTasksLoadingError=!1,setTimeout(function(){e.$refs["task-list"].setScrollPosition(e.personTasksScrollPosition)},0)}})},selectCurrent:function(){var t=this;this.activeTab="current",setTimeout(function(){t.$refs["person-tasks-search-field"].focus()},100)},selectDone:function(){this.activeTab="done"},changeSearch:function(t){this.$refs["person-tasks-search-field"].setValue(t.search_query),this.$refs["person-tasks-search-field"].$emit("change",t.search_query)},saveSearchQuery:function(t){this.savePersonTasksSearch(t).then(function(){}).catch(function(t){t&&console.log(t)})},removeSearchQuery:function(t){this.removePersonTasksSearch(t).then(function(){}).catch(function(t){t&&console.log(t)})},updateActiveTab:function(){["done","timesheets"].includes(this.$route.params.tab)?this.activeTab=this.$route.params.tab:this.activeTab="todos"},onTimeSpentChange:function(t){t.personId=this.person.id,t.date=this.selectedDate,this.setTimeSpent(t)},onDateChanged:function(t){this.selectedDate=Mn()(t).format("YYYY-MM-DD"),this.loadPerson(this.person.id)}}),metaInfo:function(){return{title:this.person?"".concat(this.person.name," - Kitsu"):"... - Kitsu"}},watch:{$route:function(){var t=this.$route.params.person_id;this.updateActiveTab(),this.person.id!==t&&this.loadPerson()}}},Ph=wh,xh=(s("arJx"),Object(kr["a"])(Ph,zm,Km,!1,null,"c320b844",null)),jh=xh.exports,Lh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"productions page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("productions.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item",attrs:{text:t.$t("productions.new_production"),icon:"plus",path:"/productions/new"}})],1)])]),s("production-list",{attrs:{entries:t.productions,"is-loading":t.isProductionsLoading,"is-error":t.isProductionsLoadingError}}),s("edit-production-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editProduction.isLoading,"is-error":t.editProduction.isError,"cancel-route":"/productions","production-to-edit":t.productionToEdit},on:{fileselected:t.onProductionPictureSelected,confirm:t.confirmEditProduction}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteProduction.isLoading,"is-error":t.deleteProduction.isError,"cancel-route":"/productions",text:t.deleteText(),"error-text":t.$t("productions.delete_error")},on:{confirm:t.confirmDeleteProduction}})],1)},Dh=[],Ih=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"project"},[t._v(" ")]),s("th",{staticClass:"name"},[t._v(t._s(t.$t("productions.fields.name")))]),s("th",{staticClass:"status"},[t._v(t._s(t.$t("productions.fields.status")))]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("production-name-cell",{staticClass:"project",attrs:{"only-avatar":!0,entry:e,"last-production-screen":t.lastProductionScreen}}),s("production-name-cell",{staticClass:"name",attrs:{"with-avatar":!1,entry:e,"last-production-screen":t.lastProductionScreen}}),s("td",{staticClass:"td-status"},[t._v("\n            "+t._s(t.$t(t.getStatusLocale(e.project_status_name)))+"\n          ")]),s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-production",params:{production_id:e.id}},"delete-route":{name:"delete-production",params:{production_id:e.id}}}})],1)}))])]),s("p",{staticClass:"has-text-centered nb-productions"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("productions.number",t.entries.length))+"\n  ")])],1)},$h=[],Mh={name:"production-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{ProductionNameCell:ih,RowActions:Bc,TableInfo:Zr},computed:Object(mn["a"])({},Object(E["c"])(["lastProductionScreen"])),methods:Object(mn["a"])({},Object(E["b"])([]),{getStatusLocale:function(t){var e={Active:"productions.status.open",Open:"productions.status.open",Closed:"productions.status.closed"};return e[t]},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},qh=Mh,Rh=(s("QzB2"),Object(kr["a"])(qh,Ih,$h,!1,null,"5caef8e4",null)),Nh=Rh.exports,Fh={name:"productions",components:{ButtonLink:Qc,DeleteModal:Pl,EditProductionModal:um,Filters:Um,PageTitle:wr,ProductionList:Nh},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},productionToDelete:null,productionToEdit:null,choices:[],productionFilters:[{type:"Status",value:{name:"open"}}],productionFilterTypes:["Status"]}},computed:Object(mn["a"])({},Object(E["c"])(["deleteProduction","editProduction","getProduction","isProductionsLoading","isProductionsLoadingError","productionAvatarFormData","productions"])),created:function(){var t=this;this.loadProductions(function(e){e||t.handleModalsDisplay()})},methods:Object(mn["a"])({},Object(E["b"])(["loadProductions","storeProductionPicture","uploadProductionAvatar"]),{confirmEditProduction:function(t){var e=this,s="newProduction",i=this.productionToEdit&&this.productionToEdit.id;this.productionToEdit&&this.productionToEdit.id&&(s="editProduction",t.id=this.productionToEdit.id),this.$store.dispatch(s,{data:t,callback:function(s){s||(i&&e.productionAvatarFormData?e.uploadProductionAvatar(t.id).then(function(){e.modals.isNewDisplayed=!1,e.$router.push("/productions")}):(e.modals.isNewDisplayed=!1,e.$router.push("/productions")))}})},confirmDeleteProduction:function(){var t=this;this.$store.dispatch("deleteProduction",{production:this.productionToDelete,callback:function(e){e||(t.modals.isDeleteDisplayed=!1)}})},deleteText:function(){var t=this.productionToDelete;return t?this.$t("productions.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.production_id;t.indexOf("new")>0?(this.productionToEdit={},this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.productionToEdit=this.getProduction(e),this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.productionToDelete=this.getProduction(e),this.modals.isDeleteDisplayed=!0):(this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1)},onProductionPictureSelected:function(t){this.storeProductionPicture(t)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("productions.title")," - Kitsu")}}},Uh=Fh,Bh=(s("g1nL"),Object(kr["a"])(Uh,Lh,Dh,!1,null,"96f1883e",null)),Vh=Bh.exports,Gh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"asset-types page fixed-page"},[s("div",{staticClass:"asset-type-list-header page-header"},[s("page-title",{attrs:{text:t.$t("asset_types.title")}}),s("div",{staticClass:"filters-area"},[s("search-field",{ref:"asset-type-search-field",attrs:{placeholder:"ex: chars, agent327"},on:{change:t.onSearchChange}})],1)],1),s("production-asset-type-list",{ref:"asset-type-list",attrs:{entries:t.displayedAssetTypes,"is-loading":t.isAssetsLoading,"is-error":t.isAssetsLoadingError,"validation-columns":t.assetValidationColumns,"asset-type-stats":t.assetTypeStats},on:{scroll:t.saveScrollPosition}})],1)},Wh=[],zh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v(t._s(t.$t("asset_types.fields.name")))]),t._l(t.validationColumns,function(e){return s("th",{key:e.id,staticClass:"validation",style:t.validationStyle(e.color)},[s("router-link",{attrs:{to:{name:"task-type",params:{production_id:t.currentProduction.id,task_type_id:e.id}}}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1)}),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isEmptyList?s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("assets.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("assets.new_asset"),path:{name:"new-asset",params:{production_id:t.currentProduction.id}}}})],1):t._e(),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._l(t.validationColumns,function(i){return s("td",{key:i.id,staticClass:"validation",style:t.validationStyle(i.color)},[t.isStats(e,i)?s("pie-chart",{attrs:{width:"70px",height:"50px",legend:!1,colors:t.chartColors(e,i),data:t.chartData(e,i)}}):t._e()],1)}),s("td",{staticClass:"actions"})],2)}))])]),t.isEmptyList?t._e():s("p",{staticClass:"has-text-centered nb-asset-types"},[t._v("\n    "+t._s(t.displayedAssetTypesLength)+"\n    "+t._s(t.$tc("asset_types.number",t.displayedAssetTypesLength))+"\n  ")])],1)},Kh=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("ZqW6")}})])}],Hh={name:"production-asset-type-list",props:["entries","isLoading","isError","assetTypeStats","validationColumns"],data:function(){return{busy:!1,lastSelection:null}},components:{ButtonLink:Qc,PageTitle:wr,RowActions:Bc,TableInfo:Zr},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction","displayedAssetTypesLength","assetTypeSearchText"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.assetTypeSearchText||0===this.assetTypeSearchText.length)}}),methods:Object(mn["a"])({},Object(E["b"])([]),{validationStyle:function(t){return{"border-left":"2px solid ".concat(t)}},chartColors:function(t,e){var s=this,i=this.assetTypeStats[t.id][e.id],n=Object.keys(i);return n.map(function(i){return s.assetTypeStats[t.id][e.id][i].color})},chartData:function(t,e){var s=this;return Object.keys(this.assetTypeStats[t.id][e.id]).map(function(i){return[s.assetTypeStats[t.id][e.id][i].name,s.assetTypeStats[t.id][e.id][i].value]})},isStats:function(t,e){return this.assetTypeStats[t.id]&&this.assetTypeStats[t.id][e.id]},onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop)},setScrollPosition:function(t){this.$refs.body.scrollTop=t}})},Qh=Hh,Yh=(s("hUPk"),Object(kr["a"])(Qh,zh,Kh,!1,null,"22f6e870",null)),Xh=Yh.exports,Zh={name:"production-asset-types",components:{ProductionAssetTypeList:Xh,PageTitle:wr,SearchField:ud,SearchIcon:Wc["o"]},data:function(){return{}},computed:Object(mn["a"])({},Object(E["c"])(["assetTypeStats","assetTypeSearchText","assetTypeListScrollPosition","assetValidationColumns","currentProduction","displayedAssetTypes","isAssetsLoading","isAssetsLoadingError"])),created:function(){this.initAssetTypes().then(this.handleModalsDisplay)},mounted:function(){this.setDefaultSearchText(),this.setDefaultListScrollPosition()},methods:Object(mn["a"])({},Object(E["b"])(["computeAssetTypeStats","initAssetTypes","loadAssets","loadComment","setAssetTypeSearch","setAssetTypeListScrollPosition","setLastProductionScreen","setProduction"]),{setDefaultSearchText:function(){this.assetTypeSearchText.length>0&&this.$refs["asset-type-search-field"].setValue(this.assetTypeSearchText)},setDefaultListScrollPosition:function(){this.$refs["asset-type-list"].setScrollPosition(this.assetTypeListScrollPosition)},navigateToList:function(){this.$router.push({name:"production-asset-types",params:{production_id:this.currentProduction.id}})},onSearchChange:function(t){var e=this.$refs["asset-type-search-field"].getValue();this.setAssetTypeSearch(e)},saveScrollPosition:function(t){this.setAssetTypeListScrollPosition(t)}}),watch:{currentProduction:function(){var t=this,e=this.$route.params.production_id;if(this.currentProduction.id!==e){var s={name:"production-asset-types",params:{production_id:this.currentProduction.id}};this.$refs["asset-type-search-field"].setValue(""),this.setAssetTypeListScrollPosition(0),this.$router.push(s),this.loadAssets(function(){t.computeAssetTypeStats()})}}},socket:{events:{"comment:new":function(t){var e=this,s=t.comment_id;this.loadComment({commentId:s,callback:function(){e.computeAssetTypeStats()}})}}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," ").concat(this.$t("asset_types.title")," - Kitsu")}}},Jh=Zh,tf=(s("cAJl"),Object(kr["a"])(Jh,Gh,Wh,!1,null,"3753d57e",null)),ef=tf.exports,sf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"productions page fixed-page"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"playlist-list-column column"},[s("page-title",{staticClass:"title",attrs:{text:t.$t("playlists.title")}}),s("button",{class:{button:!0,"is-loading":t.loading.addPlaylist},on:{click:t.addPlaylist}},[s("plus-icon",{staticClass:"icon is-small"}),t._v("\n        "+t._s(t.$t("playlists.new_playlist"))+"\n      ")],1),t.loading.playlists?s("spinner"):s("div",{staticClass:"playlists"},t._l(t.playlists,function(e){return s("router-link",{key:e.id,class:{"playlist-item":!0,selected:e.id===t.currentPlaylist.id},attrs:{to:{name:"playlist",params:{playlist_id:e.id,production_id:t.currentProduction.id}}}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),t.errors.playlistLoading?s("error-text",{attrs:{text:"$t('playlists.loading_error')"}}):t._e()],1),s("div",{staticClass:"playlist-column column"},[s("div",{staticClass:"playlist-header flexrow"},[s("div",{staticClass:"flexrow-item playlist-name"},[t._v("\n          "+t._s(t.currentPlaylist.name)+"\n        ")]),s("div",{staticClass:"flexrow-item"},[t.currentPlaylist.id?s("button-link",{staticClass:"edit-button",attrs:{path:{name:"edit-playlist",params:{production_id:t.currentProduction.id,playlist_id:t.currentPlaylist.id}},icon:"edit"}}):t._e()],1),s("div",{staticClass:"flexrow-item"},[t.currentPlaylist.id?s("button-link",{staticClass:"delete-button",attrs:{path:{name:"delete-playlist",params:{production_id:t.currentProduction.id,playlist_id:t.currentPlaylist.id}},icon:"delete"}}):t._e()],1)]),s("div",{staticClass:"has-text-centered player"},[s("div",{class:{"video-wrapper":!0,"is-hidden":0===Object.keys(t.currentShots).length}},[s("video",{ref:"videoPlayer",staticClass:"video-player",attrs:{src:"",controls:""},on:{ended:t.playNext}}),Object.values(t.currentShots)[t.currentShot]?s("p",[t._v("\n          "+t._s(Object.values(t.currentShots)[t.currentShot].entity_name)+"\n          ")]):t._e()]),s("p",{class:{"is-hidden":Object.keys(t.currentShots).length>0||!t.currentPlaylist.id}},[t._v("\n          "+t._s(t.$t("playlists.select_shot"))+"\n        ")])]),s("div",{staticClass:"playlisted-shots flexrow"},t._l(t.playlistedShots,function(e,i){return s("div",{key:e.id,staticClass:"flexrow-item has-text-centered"},[s("playlisted-shot",{attrs:{index:i,shot:e,"is-playing":t.currentShot===i},on:{"play-click":t.playShot,"remove-click":t.removeShot,"preview-changed":t.onPreviewChanged}})],1)}))]),s("div",{staticClass:"addition-column column"},[s("page-subtitle",{attrs:{text:t.$t("playlists.add_shots")}}),t.isShotsLoading?s("spinner"):s("div",[t.episodes.length>0?s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrom-item"},[t.isSingleEpisode?t._e():s("combobox",{attrs:{label:t.$t("shots.fields.episode"),options:t.getEpisodeOptions},model:{value:t.episodeId,callback:function(e){t.episodeId=e},expression:"episodeId"}})],1),s("div",{staticClass:"flexrow-item"},[t.episodeId&&t.sequenceOptions.length>0?s("combobox",{attrs:{label:t.$t("shots.fields.sequence"),options:t.sequenceOptions},model:{value:t.sequenceId,callback:function(e){t.sequenceId=e},expression:"sequenceId"}}):t._e(),0===t.sequenceOptions.length&&t.episodeId?s("div",[t._v("\n              "+t._s(t.$t("playlists.no_sequence_for_episode"))+"\n            ")]):t._e()],1)]):s("div",[t._v("\n          "+t._s(t.$t("playlists.no_shot_for_production"))+"\n        ")]),0===t.sequenceShots.length&&t.sequenceId?s("div",[t._v("\n          "+t._s(t.$t("playlists.no_shot_for_sequence"))+"\n        ")]):t._e(),t._l(t.sequenceShots,function(e){return s("div",{key:e.id,class:{"addition-shot":!0,playlisted:void 0!==t.currentShots[e.id]},on:{click:function(s){s.preventDefault(),t.addShot(e)}}},[s("entity-thumbnail",{attrs:{entity:e,"empty-width":150,"empty-height":100}}),t._v("\n          "+t._s(e.name)+"\n        ")],1)})],2)],1)]),s("edit-playlist-modal",{attrs:{active:t.modals.isEditDisplayed,"is-loading":t.loading.editPlaylist,"is-error":t.errors.editError,"cancel-route":t.currentPlaylistRoute,"playlist-to-edit":t.currentPlaylist},on:{confirm:t.runEditPlaylist}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.loading.deletePlaylist,"is-error":t.errors.deletePlaylist,"cancel-route":t.currentPlaylistRoute,text:t.deleteText,"error-text":t.$t("playlists.delete_error")},on:{confirm:t.removePlaylist}})],1)},nf=[],af=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.playlistToEdit&&t.playlistToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("playlists.edit_title"))+" "+t._s(t.playlistToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("playlists.no_playlist"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("playlists.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n        "+t._s(t.$t("assets.edit_fail"))+"\n      ")]):t._e()])])])},of=[],rf={name:"edit-playlist-modal",components:{Combobox:gl,TextField:ql},props:["active","cancelRoute","isLoading","isError","playlistToEdit"],watch:{playlistToEdit:function(){this.playlistToEdit&&this.playlistToEdit.id?this.form.name=this.playlistToEdit.name:this.form={name:""}},active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.nameField.focus()},100)}},data:function(){return this.playlistToEdit&&this.playlistToEdit.id?{form:{name:this.playlistToEdit.name}}:{form:{name:""}}},methods:{runConfirmation:function(){this.$emit("confirm",this.form)}}},cf=rf,lf=(s("oO5c"),Object(kr["a"])(cf,af,of,!1,null,"5ef1cb42",null)),df=lf.exports,uf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"playlisted-shot":!0,playing:t.isPlaying}},[s("div",{on:{click:function(e){return e.preventDefault(),t.onPlayClick(e)}}},[s("entity-thumbnail",{staticClass:"shot-thumbnail",attrs:{entity:t.shot,"preview-file-id":t.previewFileId}})],1),s("div",{staticClass:"shot-title"},[t._v(t._s(t.shot.entity_name))]),s("div",{staticClass:"preview-choice"},[s("combobox",{attrs:{options:t.taskTypeOptions},model:{value:t.taskTypeId,callback:function(e){t.taskTypeId=e},expression:"taskTypeId"}}),s("combobox",{attrs:{options:t.previewFileOptions},model:{value:t.previewFileId,callback:function(e){t.previewFileId=e},expression:"previewFileId"}})],1),s("a",{staticClass:"remove-button",on:{click:function(e){return e.preventDefault(),t.onRemoveClick(e)}}},[t._v("\n    "+t._s(t.$t("playlists.remove"))+"\n  ")])])},pf=[],mf={name:"playlisted-shot",components:{Combobox:gl,EntityThumbnail:Fr},data:function(){return{taskTypeId:null,previewFileId:this.shot.preview_file_id}},props:{index:{default:0,type:Number},isPlaying:{default:!1,type:Boolean},shot:{default:function(){},type:Object}},computed:Object(mn["a"])({},Object(E["c"])(["taskTypeMap"]),{taskTypeOptions:function(){var t=this,e=Object.keys(this.shot.preview_files);return e.map(function(e){var s=t.taskTypeMap[e];return{label:s.name,value:s.id}})},previewFileOptions:function(){if(this.taskTypeId){var t=this.shot.preview_files[this.taskTypeId];return t&&t.length>0?t.map(function(t){return{label:"v".concat(t.revision),value:t.id}}):[]}return[]}}),methods:{onPlayClick:function(){this.$emit("play-click",this.index)},onRemoveClick:function(){this.$emit("remove-click",this.shot)}},mounted:function(){var t=this,e=Object.keys(this.shot.preview_files);e.length>0&&(this.shot.preview_file_id?this.taskTypeId=e.find(function(e){var s=t.shot.preview_files[e];return s.find(function(e){return e.id===t.shot.preview_file_id})}):this.taskTypeId=e[0])},watch:{taskTypeId:function(){var t=this.shot.preview_files[this.taskTypeId];t&&t.length>0&&(this.previewFileId?this.previewFileId=t[0].id:this.previewFileId=this.shot.preview_file_id||t[0].id)},previewFileId:function(){this.$emit("preview-changed",this.shot,this.previewFileId)}}},hf=mf,ff=(s("S9A6"),Object(kr["a"])(hf,uf,pf,!1,null,"52b6e835",null)),_f=ff.exports,vf={name:"productions",components:{ButtonLink:Qc,Combobox:gl,DeleteModal:Pl,EditPlaylistModal:df,EntityThumbnail:Fr,ErrorText:au,PageSubtitle:Ir,PageTitle:wr,PlaylistedShot:_f,PlusIcon:Wc["l"],Spinner:Hr},data:function(){return{episodeId:null,sequenceId:null,sequenceOptions:[],sequenceShots:[],currentPlaylist:{name:this.$t("playlists.no_selection")},currentShots:{},currentShot:0,modals:{isDeleteDisplayed:!1,isEditDisplayed:!1},loading:{playlists:!1,addPlaylist:!1,deletePlaylist:!1},errors:{playlistLoading:!1,addPlaylist:!1,deletePlaylist:!1},playerOptions:{muted:!0,fluid:!0,sources:[]}}},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction","episodes","getEpisodeOptions","isShotsLoading","isSingleEpisode","playlistMap","playlists","sequences","shotMap","taskTypeMap"]),{deleteText:function(){return this.currentPlaylist?this.$t("playlists.delete_text",{name:this.currentPlaylist.name}):""},playlistedShots:function(){return Object.values(this.currentShots)},player:function(){return this.$refs.videoPlayer},currentPlaylistRoute:function(){return this.currentPlaylist.id?{name:"playlist",params:{production_id:this.currentProduction.id,playlist_id:this.currentPlaylist.id}}:{name:"playlists",params:{production_id:this.currentProduction.id}}},currentMovieSrc:function(){if(this.currentShots.length>0){var t=this.currentShot,e=this.currentShots[t],s=e.preview_file_id;return"/api/movies/originals/preview-files/".concat(s,".mp4")}return"toto"}}),methods:Object(mn["a"])({},Object(E["b"])(["addShotPreviewToPlaylist","changePlaylistPreview","deletePlaylist","editPlaylist","loadPlaylist","loadPlaylists","loadShotPreviewFiles","loadShots","newPlaylist","removeShotPreviewFromPlaylist"]),{clearAdditionColumn:function(){this.sequenceOptions=[],this.episodeId=null,this.sequenceId=null},clearCurrentPlaylist:function(){this.currentPlaylist={},this.currentShots={}},resetPlaylist:function(){this.handleModalsDisplay(),this.clearCurrentPlaylist(),this.setCurrentPlaylist(),this.configurePlayer()},addPlaylist:function(){var t=this,e={name:Mn()().format("YYYY-MM-DD HH:mm"),production_id:this.currentProduction.id};this.loading.addPlaylist=!0,this.errors.addPlaylist=!1,this.newPlaylist({data:e,callback:function(e,s){e&&(t.errors.addPlaylist=!0),t.$router.push({name:"playlist",params:{production_id:t.currentProduction.id,playlist_id:s.id}}),t.loading.addPlaylist=!1}})},runEditPlaylist:function(t){var e=this;this.loading.editPlaylist=!0,this.errors.editPlaylist=!1,this.editPlaylist({data:{name:t.name,id:this.currentPlaylist.id},callback:function(t){t&&(e.errors.editPlaylist=!0),e.loading.editPlaylist=!1,e.$router.push(e.currentPlaylistRoute)}})},removePlaylist:function(){var t=this;this.loading.deletePlaylist=!0,this.errors.deletePlaylist=!1,this.deletePlaylist({playlist:this.currentPlaylist,callback:function(e){e&&(t.errors.deletePlaylist=!0),t.loading.deletePlaylist=!1,t.goFirstPlaylist()}})},setCurrentPlaylist:function(t){var e=this,s=this.$route.params.playlist_id,i=this.playlistMap[s];i?this.loadPlaylist({playlist:i,callback:function(s,i){s&&console.log(s),e.currentPlaylist=i,e.rebuildCurrentShots(),e.configurePlayer(),t&&t()}}):(this.currentPlaylist={name:this.$t("playlists.no_selection")},this.currentShots={})},goFirstPlaylist:function(){this.playlists.length>0?this.$router.push({name:"playlist",params:{production_id:this.currentProduction.id,playlist_id:this.playlists[0].id}}):this.$router.push({name:"playlists",params:{production_id:this.currentProduction.id}})},handleModalsDisplay:function(){var t=this.$store.state.route.path;this.modals.isDeleteDisplayed=!1,this.modals.isEditDisplayed=!1,t.indexOf("delete")>0?this.modals.isDeleteDisplayed=!0:t.indexOf("edit")>0&&(this.modals.isEditDisplayed=!0)},setAdditionSequences:function(){var t=this,e=this.sequences.filter(function(e){return e.parent_id===t.episodeId});this.sequenceOptions=e.map(function(t){return{label:t.name,value:t.id}}),e.length>0?this.sequenceId=e[0].id:this.sequenceId=null},setAdditionShots:function(){var t=this;this.sequenceShots=Object.values(this.shotMap).filter(function(e){return e.sequence_id===t.sequenceId})},addShot:function(t){var e=this;this.currentPlaylist.id&&!this.currentShots[t.id]&&this.loadShotPreviewFiles({playlist:this.currentPlaylist,shot:t,callback:function(s,i){s&&console.log(s),e.addShotPreviewToPlaylist({playlist:e.currentPlaylist,previewFiles:i,shot:t,callback:function(){e.rebuildCurrentShots(),e.configurePlayer()}})}})},removeShot:function(t){var e=this;t.preview_file_id&&this.removeShotPreviewFromPlaylist({playlist:this.currentPlaylist,shot:t,callback:function(){e.currentShots={},setTimeout(function(){e.rebuildCurrentShots()},100)}})},onPreviewChanged:function(t,e){this.changePlaylistPreview({playlist:this.currentPlaylist,shot:t,previewFileId:e}),this.rebuildCurrentShots(),this.configurePlayer()},rebuildCurrentShots:function(){var t=this;this.currentShots={},this.currentPlaylist&&this.currentPlaylist.shots.forEach(function(e){var s=t.shotMap[e.shot_id];t.currentShots[e.shot_id]={id:e.shot_id,name:s.name,entity_name:s.tasks[0].entity_name,preview_files:e.preview_files,preview_file_id:e.preview_file_id||s.preview_file_id}})},getMoviePath:function(){var t=this.currentShot;if(this.currentShots&&Object.keys(this.currentShots).length>0){var e=Object.keys(this.currentShots)[t],s=this.currentShots[e],i=s.preview_file_id;return"/api/movies/originals/preview-files/".concat(i,".mp4")}return""},playNext:function(){var t=this.currentShot+1;t>=Object.keys(this.currentShots).length&&(t=0),this.currentShot=t,this.player.src=this.getMoviePath(),this.player.play()},configurePlayer:function(){var t=this.getMoviePath();this.player.src=t},onPlayerReady:function(t){var e=this;this.player&&this.player.on("playlistitem",function(){e.onCurrentShotChange()})},playShot:function(t){this.player&&(this.currentShot=t,this.player.src=this.getMoviePath(),this.player.play())},loadShotsData:function(t){var e=this;this.loadShots(function(){e.episodes.length>0&&(e.episodeId=e.episodes[0].id),e.loadPlaylistsData(),t&&t()})},loadPlaylistsData:function(){var t=this;this.loading.playlists=!0,this.loadPlaylists(function(e){e&&(t.errors.loadPlaylists=!0),t.loading.playlists=!1,e||(t.handleModalsDisplay(),t.setCurrentPlaylist(function(){t.currentPlaylist&&t.currentPlaylist.id||t.goFirstPlaylist()}))})}}),created:function(){this.currentProduction.id!==this.$route.params.production_id&&this.$store.commit("SET_CURRENT_PRODUCTION",this.$route.params.production_id),0===Object.keys(this.shotMap).length?this.loadShotsData():this.episodes.length>0&&(this.episodeId=this.episodes[0].id,this.setCurrentPlaylist(this.loadPlaylistsData))},watch:{$route:function(){this.resetPlaylist()},currentProduction:function(){var t=this;this.currentProduction.id!==this.$route.params.production_id&&(this.$router.push({name:"playlists",params:{production_id:this.currentProduction.id}}),this.loadShotsData(function(){t.resetPlaylist()}))},episodeId:function(){this.sequenceId=null,this.setAdditionSequences()},sequenceId:function(){this.setAdditionShots()}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," ").concat(this.$t("playlists.title"))+" - Kitsu"}}},yf=vf,gf=(s("ijPS"),Object(kr["a"])(yf,sf,nf,!1,null,"0fce808c",null)),kf=gf.exports,bf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile page"},[s("div",{staticClass:"profile-content"},[s("div",{staticClass:"has-text-centered profile-header"},[s("div",{staticClass:"profile-header-content has-text-centered"},[s("people-avatar",{attrs:{person:this.user,size:150,"font-size":60}}),s("p",[s("router-link",{staticClass:"button is-link",attrs:{to:{name:"change-avatar"}}},[t._v("\n          change avatar\n          ")])],1),s("h1",[t._v("\n        "+t._s(t.$t("profile.title"))+"\n        ")])],1)]),s("div",{staticClass:"profile-body"},[s("h2",[t._v("\n        "+t._s(t.$t("profile.info_title"))+"\n      ")]),s("text-field",{attrs:{label:t.$t("people.fields.first_name")},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}}),s("text-field",{attrs:{label:t.$t("people.fields.last_name")},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}}),s("text-field",{attrs:{label:t.$t("people.fields.email")},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),s("text-field",{attrs:{label:t.$t("people.fields.phone")},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("\n          "+t._s(t.$t("profile.timezone"))+"\n        ")]),s("span",{staticClass:"select is-medium"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.timezone,expression:"form.timezone"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"timezone",e.target.multiple?s:s[0])}}},t._l(t.timezones,function(e){return s("option",{key:e},[t._v("\n              "+t._s(e)+"\n            ")])}))])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("\n          "+t._s(t.$t("profile.language"))+"\n        ")]),s("span",{staticClass:"select is-medium"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.locale,expression:"form.locale"}],domProps:{value:t.form.locale},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"locale",e.target.multiple?s:s[0])},t.localeChanged]}},[s("option",{attrs:{value:"en_US"}},[t._v("English")]),s("option",{attrs:{value:"fr_FR"}},[t._v("French")])])])]),s("button",{class:{button:!0,"save-button":!0,"is-medium":!0,"is-loading":t.isSaveProfileLoading},on:{click:function(e){t.saveProfile({form:t.form})}}},[t._v("\n        "+t._s(t.$t("profile.save.button"))+"\n      ")]),s("p",{class:{error:!0,"is-hidden":!t.isSaveProfileLoadingError}},[t._v("\n        "+t._s(t.$t("profile.save.error"))+"\n      ")]),s("h2",[t._v("\n        "+t._s(t.$t("profile.password_title"))+"\n      ")]),s("text-field",{attrs:{label:t.$t("people.fields.old_password"),type:"password"},model:{value:t.passwordForm.oldPassword,callback:function(e){t.$set(t.passwordForm,"oldPassword",e)},expression:"passwordForm.oldPassword"}}),s("text-field",{attrs:{label:t.$t("people.fields.password"),type:"password"},model:{value:t.passwordForm.password,callback:function(e){t.$set(t.passwordForm,"password",e)},expression:"passwordForm.password"}}),s("text-field",{attrs:{label:t.$t("people.fields.password_2"),type:"password"},model:{value:t.passwordForm.password2,callback:function(e){t.$set(t.passwordForm,"password2",e)},expression:"passwordForm.password2"}}),s("button",{class:{button:!0,"save-button":!0,"is-medium":!0,"is-loading":t.changePassword.isLoading},on:{click:function(e){t.passwordChangeRequested()}}},[t._v("\n        "+t._s(t.$t("profile.change_password.button"))+"\n      ")]),s("p",{class:{"change-password-message":!0,error:!0,"is-hidden":t.changePassword.isValid}},[t._v("\n        "+t._s(t.$t("profile.change_password.unvalid"))+"\n      ")]),s("p",{class:{"change-password-message":!0,success:!0,"is-hidden":!t.changePassword.isSuccess}},[t._v("\n        "+t._s(t.$t("profile.change_password.success"))+"\n      ")]),s("p",{class:{"change-password-message":!0,error:!0,"is-hidden":!t.changePassword.isError}},[t._v("\n        "+t._s(t.$t("profile.change_password.error"))+"\n      ")])],1)]),s("change-avatar-modal",{attrs:{active:t.changeAvatar.isModalShown,"is-loading":t.changeAvatar.isLoading,"is-error":t.changeAvatar.isLoadingError,"cancel-route":{name:"profile"},"form-data":t.changeAvatar.formData},on:{fileselected:t.selectFile,confirm:t.uploadAvatarFile}})],1)},Tf=[],Sf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("profile.avatar.title"))+"\n      ")]),s("p",[t._v("\n        "+t._s(t.$t("main.csv.select_file"))+"\n      ")]),s("file-upload",{ref:"uploadAvatarField",attrs:{accept:".png"},on:{fileselected:t.onFileSelected}}),t.isError?s("p",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("profile.avatar.error_upload"))+"\n      ")]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading,"is-disabled":void 0==t.formData},on:{click:t.onConfirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)],1)])])},Cf=[],Ef={name:"change-avatar-modal",props:["active","cancelRoute","isLoading","isError"],data:function(){return{formData:null}},components:{FileUpload:ed},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},onConfirmClicked:function(){this.$emit("confirm")}}),watch:{active:function(){this.formData=null,this.$refs.uploadAvatarField.reset()}}},Of=Ef,Af=(s("LUWt"),Object(kr["a"])(Of,Sf,Cf,!1,null,"67d21628",null)),wf=Af.exports,Pf={name:"profile",data:function(){return{form:{first_name:"",last_name:"",email:"",phone:"",timezone:"Europe/Paris",locale:"French"},passwordForm:{oldPassword:"",password:"",password2:""},changeAvatar:{isModalShown:!1,isLoading:!1,isLoadingError:!1,formData:null}}},components:{PeopleAvatar:Cc,ChangeAvatarModal:wf,TextField:ql},watch:{user:function(){Object.assign(this.form,this.user)},$route:function(){this.handleModalsDisplay()}},computed:Object(mn["a"])({},Object(E["c"])(["user","isSaveProfileLoading","isSaveProfileLoadingError","isCurrentUserAdmin","changePassword"]),{departments:function(){return[{name:"Animation"},{name:"Modeling"}]},timezones:function(){return Mn.a.tz.names()}}),methods:Object(mn["a"])({},Object(E["b"])(["saveProfile","checkNewPasswordValidityAndSave","uploadAvatar"]),{localeChanged:function(){this.$i18n.locale=this.form.locale.substring(0,2)},passwordChangeRequested:function(){var t=this;this.checkNewPasswordValidityAndSave({form:this.passwordForm,callback:function(){t.passwordForm={oldPassword:"",password:"",password2:""}}})},selectFile:function(t){this.$store.commit("CHANGE_AVATAR_FILE",t)},uploadAvatarFile:function(){var t=this;this.changeAvatar.isLoading=!0,this.changeAvatar.isError=!1,this.uploadAvatar(function(e){e&&(t.changeAvatar.isError=!0),t.changeAvatar.isLoading=!1,t.$router.push({name:"profile"})})},handleModalsDisplay:function(){var t=this.$store.state.route.path;t.indexOf("change-avatar")>0?this.changeAvatar.isModalShown=!0:this.changeAvatar.isModalShown=!1}}),mounted:function(){this.form=Object.assign(this.form,this.user),this.handleModalsDisplay()},metaInfo:function(){return{title:"".concat(this.$t("profile.title")," - Kitsu")}}},xf=Pf,jf=(s("tVRt"),Object(kr["a"])(xf,bf,Tf,!1,null,"15df84be",null)),Lf=jf.exports,Df=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"server-down page"},[s("h1",{staticClass:"title"},[t._v(t._s(t.$t("server_down.title")))]),s("p",[t._v("\n    "+t._s(t.$t("server_down.text"))+"\n  ")])])},If=[],$f={name:"server-down",computed:Object(mn["a"])({},Object(E["c"])(["isAuthenticated","user"])),methods:Object(mn["a"])({},Object(E["b"])([])),mounted:function(){var t=this;Jo.isServerLoggedIn(function(e){var s=t.$store.state.route.query.redirect;e||t.$router.push(s)})}},Mf=$f,qf=(s("HWXe"),Object(kr["a"])(Mf,Df,If,!1,null,"de41b81e",null)),Rf=qf.exports,Nf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sequences page fixed-page"},[s("div",{staticClass:"sequence-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("sequences.title")}})],1)]),s("div",{staticClass:"filters-area"},[s("search-field",{ref:"sequence-search-field",attrs:{placeholder:"ex: e01 s01, anim=wip"},on:{change:t.onSearchChange}})],1)]),s("sequence-list",{ref:"sequence-list",attrs:{entries:t.displayedSequences,"is-loading":t.isShotsLoading,"is-error":t.isShotsLoadingError,"validation-columns":t.shotValidationColumns,"sequence-stats":t.sequenceStats},on:{scroll:t.saveScrollPosition}}),s("edit-sequence-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-error":t.errors.edit,"cancel-route":{name:"sequences",params:{production_id:t.currentProduction.id}},"sequence-to-edit":t.sequenceToEdit},on:{confirm:t.confirmEditSequence}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.loading.del,"is-error":t.errors.del,text:t.deleteText(),"error-text":t.$t("sequences.delete_error"),"cancel-route":{name:"sequences",params:{production_id:t.currentProduction.id}}},on:{confirm:t.confirmDeleteSequence}})],1)},Ff=[],Uf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[t.isSingleEpisode?t._e():s("th",{staticClass:"episode"},[t._v("\n            "+t._s(t.$t("shots.fields.episode"))+"\n          ")]),s("th",{staticClass:"name"},[t._v(t._s(t.$t("shots.fields.sequence")))]),s("th",{staticClass:"description"},[t._v(t._s(t.$t("shots.fields.description")))]),t._l(t.validationColumns,function(e){return s("th",{key:e.id,staticClass:"validation",style:t.validationStyle(e.color)},[s("router-link",{attrs:{to:{name:"task-type",params:{production_id:t.currentProduction.id,task_type_id:e.id}}}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1)}),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isEmptyList?s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("sequences.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("shots.new_sequences"),path:{name:"manage-shots",params:{production_id:t.currentProduction.id}}}})],1):t._e(),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreSequences,expression:"loadMoreSequences"},{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[t.isSingleEpisode?t._e():s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.episode_name)+"\n          ")]),s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n          ")]),s("td",{staticClass:"description"},[t._v("\n            "+t._s(e.description)+"\n          ")]),t._l(t.validationColumns,function(i){return s("td",{key:i.id,staticClass:"validation",style:t.validationStyle(i.color)},[t.isStats(e,i)?s("pie-chart",{attrs:{width:"70px",height:"50px",legend:!1,colors:t.chartColors(e,i),data:t.chartData(e,i)}}):t._e()],1)}),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":{name:"edit-sequence",params:{sequence_id:e.id,production_id:t.currentProduction.id}},"delete-route":{name:"delete-sequence",params:{sequence_id:e.id,production_id:t.currentProduction.id}}}}):s("td",{staticClass:"actions"})],2)}))])]),t.isEmptyList?t._e():s("p",{staticClass:"has-text-centered nb-sequences"},[t._v("\n    "+t._s(t.displayedSequencesLength)+"\n    "+t._s(t.$tc("sequences.number",t.displayedSequencesLength))+"\n  ")])],1)},Bf=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("cyuX")}})])}],Vf={name:"sequence-list",props:["entries","isLoading","isError","sequenceStats","validationColumns"],data:function(){return{busy:!1,lastSelection:null}},components:{ButtonLink:Qc,PageTitle:wr,RowActions:Bc,TableInfo:Zr},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction","isCurrentUserManager","isSingleEpisode","displayedSequencesLength","sequenceSearchText"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.sequenceSearchText||0===this.sequenceSearchText.length)}}),methods:Object(mn["a"])({},Object(E["b"])(["displayMoreSequences","loadMoreSequences"]),{validationStyle:function(t){return{"border-left":"2px solid ".concat(t)}},chartColors:function(t,e){var s=this,i=this.sequenceStats[t.id][e.id],n=Object.keys(i);return n.map(function(i){return s.sequenceStats[t.id][e.id][i].color})},chartData:function(t,e){var s=this;return Object.keys(this.sequenceStats[t.id][e.id]).map(function(i){return[s.sequenceStats[t.id][e.id][i].name,s.sequenceStats[t.id][e.id][i].value]})},isStats:function(t,e){return this.sequenceStats[t.id]&&this.sequenceStats[t.id][e.id]},onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop)},loadMoreSequences:function(){this.displayMoreSequences()},setScrollPosition:function(t){this.$refs.body.scrollTop=t}})},Gf=Vf,Wf=(s("G/MX"),Object(kr["a"])(Gf,Uf,Bf,!1,null,"1e623fe7",null)),zf=Wf.exports,Kf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.sequenceToEdit&&this.sequenceToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("sequences.edit_title"))+" "+t._s(t.sequenceToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("sequences.new_sequence"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("sequences.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:t.$t("sequences.fields.description")},on:{enter:t.runConfirmation},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("sequences.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.sequenceSuccessText)+"\n        ")])],1)])])])},Hf=[],Qf={name:"edit-sequence-modal",components:{TextField:ql,TextareaField:Vl,Combobox:gl},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","sequenceToEdit","errorText"],data:function(){return this.sequenceToEdit&&this.sequenceToEdit.id?{form:{id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,production_id:this.sequenceToEdit.project_id},sequenceSuccessText:""}:{form:{id:"",name:"",description:"",fps:""},sequenceSuccessText:""}},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction"])),methods:Object(mn["a"])({},Object(E["b"])([]),{runConfirmation:function(){this.confirmClicked()},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.sequenceToEdit&&this.sequenceToEdit.id},resetForm:function(){this.sequenceSuccessText="",this.isEditing()?this.form={id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description}:(this.form.id=null,this.form.name="",this.form.description="")}}),mounted:function(){this.resetForm()},watch:{active:function(){this.resetForm()},sequenceToEdit:function(){this.resetForm()}}},Yf=Qf,Xf=(s("6ZfU"),Object(kr["a"])(Yf,Kf,Hf,!1,null,"b843279e",null)),Zf=Xf.exports,Jf={name:"sequences",components:{SequenceList:zf,EditSequenceModal:Zf,DeleteModal:Pl,PageTitle:wr,SearchField:ud,SearchIcon:Wc["o"]},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},loading:{edit:!1,del:!1},errors:{edit:!1,del:!1},sequenceToDelete:null,sequenceToEdit:null}},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction","displayedSequences","isCurrentUserManager","isShotsLoading","isShotsLoadingError","sequences","sequenceMap","sequenceStats","sequenceSearchText","sequenceListScrollPosition","shotValidationColumns"])),created:function(){this.initSequences().then(this.handleModalsDisplay)},mounted:function(){this.setDefaultSearchText(),this.setDefaultListScrollPosition()},methods:Object(mn["a"])({},Object(E["b"])(["computeSequenceStats","deleteSequence","editSequence","hideAssignations","initSequences","loadShots","loadComment","setLastProductionScreen","setProduction","setSequenceSearch","setSequenceListScrollPosition","showAssignations"]),{setDefaultSearchText:function(){this.sequenceSearchText.length>0&&this.$refs["sequence-search-field"].setValue(this.sequenceSearchText)},setDefaultListScrollPosition:function(){this.$refs["sequence-list"].setScrollPosition(this.sequenceListScrollPosition)},navigateToList:function(){this.$router.push({name:"sequences",params:{production_id:this.currentProduction.id}})},confirmEditSequence:function(t){var e=this;this.loading.edit=!0,this.errors.edit=!1,this.editSequence(t).then(function(){e.loading.edit=!1,e.navigateToList()}).catch(function(){e.loading.edit=!1,e.errors.edit=!0})},confirmDeleteSequence:function(){var t=this;this.loading.del=!0,this.deleteSequence(this.sequenceToDelete).then(function(){t.loading.del=!1,t.navigateToList()}).catch(function(){t.loading.del=!1,t.errors.del=!0})},resetEditModal:function(){var t={name:""};this.sequences.length>0&&(t.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(t.production_id=this.openProductions[0].id),this.sequenceToEdit=t},deleteText:function(){var t=this.sequenceToDelete;return t?this.$t("sequences.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.sequence_id;this.errors={edit:!1,delete:!1},this.modals={isNewDisplayed:!1,isDeleteDisplayed:!1},t.indexOf("edit")>0?(this.sequenceToEdit=this.sequenceMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete")>0&&(this.sequenceToDelete=this.sequenceMap[e],this.modals.isDeleteDisplayed=!0)},onSearchChange:function(t){var e=this.$refs["sequence-search-field"].getValue();this.setSequenceSearch(e)},saveScrollPosition:function(t){this.setSequenceListScrollPosition(t)}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var t=this,e=this.$route.params.production_id;if(this.currentProduction.id!==e){var s={name:"sequences",params:{production_id:this.currentProduction.id}};this.$refs["sequence-search-field"].setValue(""),this.$store.commit("SET_SEQUENCE_LIST_SCROLL_POSITION",0),this.$router.push(s),this.loadShots(function(){t.computeSequenceStats()})}}},socket:{events:{"comment:new":function(t){var e=this,s=t.comment_id;this.loadComment({commentId:s,callback:function(){e.computeSequenceStats()}})}}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," ").concat(this.$t("sequences.title")," - Kitsu")}}},t_=Jf,e_=(s("bjYD"),Object(kr["a"])(t_,Nf,Ff,!1,null,"2a3f8c7e",null)),s_=e_.exports,i_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item"},[t.currentShot?s("entity-thumbnail",{staticClass:"shot-thumbnail",attrs:{entity:t.currentShot,"empty-width":100,"empty-height":66.66}}):t._e()],1),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:t.title}})],1)])]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:t.$t("shots.tasks")}}),s("entity-task-list",{attrs:{entries:t.currentShot?t.currentShot.tasks:[],"is-loading":!t.currentShot,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:t.$t("main.info")}}),t.currentShot?s("table",{staticClass:"table"},[s("tbody",[t.currentShot.data&&t.currentShot.data.fps?s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.fps")))]),s("td",[t._v("\n              "+t._s(t.currentShot?t.currentShot.data.fps:"")+"\n            ")])]):t._e(),t.currentShot.data&&t.currentShot.data.frame_in?s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.frame_in")))]),s("td",[t._v("\n              "+t._s(t.currentShot?t.currentShot.data.frame_in:"")+"\n            ")])]):t._e(),t.currentShot.data&&t.currentShot.data.frame_out?s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.frame_out")))]),s("td",[t._v("\n              "+t._s(t.currentShot?t.currentShot.data.frame_out:"")+"\n            ")])]):t._e(),s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.description")))]),s("description-cell",{attrs:{entry:t.currentShot}})],1)])]):t._e()],1)]),s("div",{staticClass:"shot-casting"},[s("page-subtitle",{attrs:{text:t.$t("shots.casting")}}),t.currentShot?s("div",t._l(t.currentShot.castingAssetsByType,function(e){return t.currentShot.castingAssetsByType[0].length>0?s("div",{key:e.length>0?e[0].asset_type_name:"",staticClass:"type-assets"},[s("div",{staticClass:"asset-type"},[t._v("\n          "+t._s(e.length>0?e[0].asset_type_name:"")+"\n        ")]),s("div",{staticClass:"asset-list"},t._l(e,function(e){return s("router-link",{key:e.id,staticClass:"asset-link",attrs:{to:{name:"asset",params:{production_id:t.currentProduction.id,asset_id:e.asset_id}}}},[s("entity-thumbnail",{attrs:{entity:e,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[t._v(t._s(e.name))]),e.nb_occurences>1?s("span",[t._v("\n                ("+t._s(e.nb_occurences)+")\n              ")]):t._e()])],1)}))]):s("div",[t._v("\n        "+t._s(t.$t("shots.no_casting"))+"\n      ")])})):s("table-info",{attrs:{"is-loading":t.casting.isLoadin,"is-error":t.casting.isError}})],1)])},n_=[],a_={name:"shot",components:{DescriptionCell:Tr,EntityThumbnail:Fr,EntityTaskList:wc,PageSubtitle:Ir,PageTitle:wr,TableInfo:Zr},data:function(){return{currentShot:null,casting:{isLoading:!1,isError:!1}}},created:function(){var t=this;this.clearSelectedTasks(),this.currentShot=this.getCurrentShot(),this.casting.isLoading=!0,this.casting.isError=!1,this.currentShot?this.loadShotCasting({shot:this.currentShot,callback:function(e,s){t.casting.isError=!!e,t.casting.isLoading=!0}}):this.loadShot({shotId:this.route.params.shot_id,callback:function(e){e||(t.currentShot=t.getCurrentShot(),t.loadShotCasting({shot:t.currentShot,callback:function(e,s){t.casting.isError=!!e,t.casting.isLoading=!0}}))}})},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction","route","shotMap"]),{title:function(){return this.currentShot?this.currentShot.episode_name?"".concat(this.currentShot.project_name," / ")+"".concat(this.currentShot.episode_name," / ")+"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"".concat(this.currentShot.project_name," / ")+"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"Loading..."},shotThumbnailPath:function(){var t=this.currentShot.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,".png")},isPreview:function(){return this.currentShot&&this.currentShot.preview_file_id&&this.currentShot.preview_file_id.length>0}}),methods:Object(mn["a"])({},Object(E["b"])(["loadShot","loadShotCasting","clearSelectedTasks"]),{changeTab:function(t){this.selectedTab=t},getCurrentShot:function(){return this.shotMap[this.route.params.shot_id]||null}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},o_=a_,r_=(s("QqxS"),Object(kr["a"])(o_,i_,n_,!1,null,"a76efc00",null)),c_=r_.exports,l_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shots page fixed-page"},[s("div",{staticClass:"shot-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("shots.title")}})],1),t.isCurrentUserManager?s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("show-assignations-button"),s("button-link",{staticClass:"level-item",attrs:{text:t.$t("main.csv.import_file"),icon:"upload","is-responsive":!0,path:{name:"import-shots",params:{production_id:t.currentProduction.id}}}}),s("button-href-link",{staticClass:"level-item",attrs:{text:t.$t("main.csv.export_file"),icon:"download","is-responsive":!0,path:"/api/export/csv/projects/"+t.currentProduction.id+"/shots.csv"}}),s("button-link",{staticClass:"level-item",attrs:{text:t.$t("shots.manage"),icon:"plus","is-responsive":!0,path:{name:"manage-shots",params:{production_id:t.currentProduction.id}}}})],1)]):t._e()]),s("div",{staticClass:"filters-area"},[s("search-field",{ref:"shot-search-field",attrs:{"can-save":!0,placeholder:"ex: e01 s01, anim=wip"},on:{change:t.onSearchChange,save:t.saveSearchQuery}})],1),s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:t.shotSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1)]),s("shot-list",{ref:"shot-list",attrs:{entries:t.displayedShots,"is-loading":t.isShotsLoading,"is-error":t.isShotsLoadingError,"validation-columns":t.shotValidationColumns},on:{scroll:t.saveScrollPosition}}),s("manage-shots-modal",{attrs:{active:t.modals.isManageDisplayed,"is-loading":t.loading.manage,"is-error":!1,"is-success":!1,"cancel-route":{name:"shots",params:{production_id:t.currentProduction.id}}}}),s("edit-shot-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-loading-stay":t.loading.stay,"is-error":t.editShot.isCreateError,"is-success":t.editShot.isSuccess,"cancel-route":{name:"shots",params:{production_id:t.currentProduction.id}},"shot-to-edit":t.shotToEdit},on:{confirm:t.confirmEditShot,confirmAndStay:t.confirmNewShotStay}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteShot.isLoading,"is-error":t.deleteShot.isError,"cancel-route":{name:"shots",params:{production_id:t.currentProduction.id}},text:t.deleteText(),"error-text":t.$t("shots.delete_error")},on:{confirm:t.confirmDeleteShot}}),s("delete-modal",{attrs:{active:t.modals.isRestoreDisplayed,"is-loading":t.restoreShot.isLoading,"is-error":t.restoreShot.isError,"cancel-route":{name:"shots",params:{production_id:t.currentProduction.id}},text:t.restoreText(),"error-text":t.$t("shots.restore_error")},on:{confirm:t.confirmRestoreShot}}),s("import-modal",{attrs:{active:t.modals.isImportDisplayed,"is-loading":t.loading.importing,"is-error":t.errors.importing,"cancel-route":{name:"shots",params:{production_id:t.currentProduction.id}},"form-data":t.shotsCsvFormData,columns:t.columns},on:{fileselected:t.selectFile,confirm:t.uploadImportFile}}),s("create-tasks-modal",{attrs:{active:t.modals.isCreateTasksDisplayed,"is-loading":t.loading.creatingTasks,"is-error":t.errors.creatingTasks,"cancel-route":{name:"shots",params:{production_id:t.currentProduction.id}},title:t.$t("tasks.create_tasks_shot"),text:t.$t("tasks.create_tasks_shot_explaination"),"error-text":t.$t("tasks.create_tasks_shot_failed")},on:{confirm:t.confirmCreateTasks}})],1)},d_=[],u_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.shotToEdit&&this.shotToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("shots.edit_title"))+" "+t._s(t.shotToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("shots.new_shot"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("combobox",{attrs:{label:t.$t("shots.fields.sequence"),options:t.getSequenceOptions},model:{value:t.form.sequence_id,callback:function(e){t.$set(t.form,"sequence_id",e)},expression:"form.sequence_id"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("shots.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:t.$t("shots.fields.description")},on:{enter:t.runConfirmation},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),s("text-field",{ref:"frameInField",attrs:{label:t.$t("shots.fields.frame_in"),type:"number"},model:{value:t.form.frameIn,callback:function(e){t.$set(t.form,"frameIn",e)},expression:"form.frameIn"}}),s("text-field",{ref:"frameOutField",attrs:{label:t.$t("shots.fields.frame_out"),type:"number"},on:{enter:t.runConfirmation},model:{value:t.form.frameOut,callback:function(e){t.$set(t.form,"frameOut",e)},expression:"form.frameOut"}}),s("text-field",{ref:"fpsField",attrs:{label:t.$t("shots.fields.fps"),type:"number"},on:{enter:t.runConfirmation},model:{value:t.form.fps,callback:function(e){t.$set(t.form,"fps",e)},expression:"form.fps"}})],1),s("div",{staticClass:"has-text-right"},[t.shotToEdit&&t.shotToEdit.id?t._e():s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoadingStay},on:{click:t.confirmAndStayClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation_and_stay"))+"\n        ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("shots.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.shotSuccessText)+"\n        ")])],1)])])])},p_=[],m_={name:"edit-shot-modal",components:{TextField:ql,TextareaField:Vl,Combobox:gl},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","shotToEdit","errorText"],data:function(){return this.shotToEdit&&this.shotToEdit.id?{form:{name:this.shotToEdit.name,description:this.shotToEdit.description,sequence_id:this.shotToEdit.sequence_id,production_id:this.shotToEdit.project_id,frameIn:this.frameIn,frameOut:this.frameOut,fps:this.fps},shotSuccessText:""}:{form:{name:"",description:"",entity_type_id:"",project_id:"",frameIn:"",frameOut:"",fps:""},shotSuccessText:""}},computed:Object(mn["a"])({},Object(E["c"])(["shots","shotCreated","sequences","openProductions","getSequenceOptions","getOpenProductionOptions","currentProduction"]),{frameIn:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_in:""},frameOut:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_out:""},fps:function(){return this.shotToEdit.data?this.shotToEdit.data.fps:""}}),methods:Object(mn["a"])({},Object(E["b"])([]),{runConfirmation:function(){this.isEditing()?this.confirmClicked():this.confirmAndStayClicked()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.shotToEdit&&this.shotToEdit.id},resetForm:function(){this.shotSuccessText="",this.isEditing()?this.form={sequence_id:this.shotToEdit.sequence_id,project_id:this.shotToEdit.project_id,name:this.shotToEdit.name,description:this.shotToEdit.description,frameIn:this.frameIn,frameOut:this.frameOut,fps:this.fps}:(this.openProductions.length>0&&(this.form.project_id=this.currentProduction.id),this.sequences.length>0&&(this.form.sequence_id=this.sequences[0].id),this.form.name="",this.form.description="")}}),mounted:function(){this.resetForm()},watch:{active:function(){this.resetForm()},shotToEdit:function(){this.resetForm()},shotCreated:function(){this.isEditing()?this.shotSuccessText=this.$t("shots.edit_success",{name:this.shotCreated}):this.shotSuccessText=this.$t("shots.new_success",{name:this.shotCreated})}}},h_=m_,f_=(s("41gE"),Object(kr["a"])(h_,u_,p_,!1,null,"1f97beb0",null)),__=f_.exports,v_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("page-title",{attrs:{text:t.$t("shots.manage")}}),s("div",{staticClass:"shot-columns"},[s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[t._v("Episodes")]),s("div",{staticClass:"list"},t._l(t.episodes,function(e){return s("div",{key:e.id,class:{"entity-line":!0,selected:e.id===t.selectedEpisodeId},on:{click:function(s){t.selectEpisode(e.id)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.names.episode,expression:"names.episode"},{name:"focus",rawName:"v-focus"}],ref:"addEpisodeInput",staticClass:"input",attrs:{placeholder:"EP01",type:"text"},domProps:{value:t.names.episode},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"tab",9,e.key,"Tab")?t.focusAddSequence(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addEpisode(e):null}],input:function(e){e.target.composing||t.$set(t.names,"episode",e.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":t.loading.addEpisode},attrs:{disabled:!t.isAddEpisodeAllowed},on:{click:t.addEpisode}},[t._v("\n              "+t._s(t.$t("main.add"))+"\n            ")])])]),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[t._v("Sequences")]),s("div",{staticClass:"list"},t._l(t.displayedSequences,function(e){return s("div",{key:e.id,class:{"entity-line":!0,selected:e.id===t.selectedSequenceId},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"tab",9,e.key,"Tab")?t.focusAddShot(e):null},click:function(s){t.selectSequence(e.id)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.names.sequence,expression:"names.sequence"}],ref:"addSequenceInput",staticClass:"input",attrs:{placeholder:"SQ01",type:"text"},domProps:{value:t.names.sequence},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addSequence(e):null},input:function(e){e.target.composing||t.$set(t.names,"sequence",e.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":t.loading.addSequence},attrs:{disabled:!t.isAddSequenceAllowed},on:{click:t.addSequence}},[t._v("\n              "+t._s(t.$t("main.add"))+"\n            ")])])]),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[t._v("Shots")]),s("div",{staticClass:"list"},t._l(t.displayedShots,function(e){return s("div",{key:e.id,staticClass:"entity-line"},[t._v("\n              "+t._s(e.name)+"\n            ")])})),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.names.shot,expression:"names.shot"}],ref:"addShotInput",staticClass:"input",attrs:{placeholder:"SH01",type:"text"},domProps:{value:t.names.shot},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addShot(e):null},input:function(e){e.target.composing||t.$set(t.names,"shot",e.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":t.loading.addShot},attrs:{disabled:!t.isAddShotAllowed},on:{click:t.addShot}},[t._v("\n              "+t._s(t.$t("main.add"))+"\n            ")])])])]),s("p",{staticClass:"has-text-right modal-footer"},[s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")])],1)],1)])])},y_=[],g_={name:"manage-shot-modal",components:{PageTitle:wr},props:["onConfirmClicked","text","active","cancelRoute","errorText"],data:function(){return{names:{episode:"",sequence:"",shot:""},loading:{addEpisode:!1,addSequence:!1,addShot:!1},displayedSequences:[],displayedShots:[],selectedEpisodeId:null,selectedSequenceId:null}},watch:{active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.addEpisodeInput.focus()},100)}},computed:Object(mn["a"])({},Object(E["c"])(["episodes","sequences","shotMap","currentProduction"]),{isAddEpisodeAllowed:function(){var t=this,e=""===this.names.episode,s=this.episodes.find(function(e){return t.names.episode===e.name});return!e&&!s},isAddSequenceAllowed:function(){var t=this,e=""===this.names.sequence,s=this.displayedSequences.find(function(e){return t.names.sequence===e.name});return!e&&!s&&this.selectedEpisodeId},isAddShotAllowed:function(){var t=this,e=""===this.names.shot,s=this.displayedShots.find(function(e){return t.names.shot===e.name});return!e&&!s&&this.selectedSequenceId}}),methods:Object(mn["a"])({},Object(E["b"])(["newEpisode","newSequence","newShot"]),{focusAddSequence:function(){this.$refs.addSequenceInput.focus()},focusAddShot:function(){this.$refs.addShotInput.focus()},selectEpisode:function(t){this.selectedEpisodeId=t,this.displayedSequences=this.sequences.filter(function(e){return e.parent_id===t}),this.displayedShots=[]},selectSequence:function(t){this.selectedSequenceId=t,this.displayedShots=Object.values(this.shotMap).filter(function(e){return e.sequence_id===t})},addEpisode:function(){var t=this;if(this.isAddEpisodeAllowed){var e=this.names.episode;if(e.length>0){this.loading.addEpisode=!0;var s={name:this.names.episode,project_id:this.currentProduction.id};this.newEpisode({episode:s,callback:function(e,s){e&&console.log(e),t.loading.addEpisode=!1,t.selectEpisode(s.id),t.names.episode=vr.generateNextName(s.name)}})}}},addSequence:function(){var t=this;if(this.isAddSequenceAllowed){var e=this.names.sequence;if(e.length>0&&this.selectedEpisodeId){this.loading.addSequence=!0;var s={name:this.names.sequence,episode_id:this.selectedEpisodeId,project_id:this.currentProduction.id};this.newSequence({sequence:s,callback:function(e,s){e&&console.log(e),t.loading.addSequence=!1,t.selectEpisode(t.selectedEpisodeId),t.selectSequence(s.id),t.names.sequence=vr.generateNextName(s.name)}})}}},addShot:function(){var t=this;if(this.isAddShotAllowed){var e=this.names.shot;if(this.loading.addShot=!0,e.length>0&&this.selectedSequenceId){var s={name:this.names.shot,sequence_id:this.selectedSequenceId,project_id:this.currentProduction.id};this.loading.addShot=!1,this.newShot({shot:s,callback:function(e){e&&console.log(e),t.loading.addShot=!1,t.selectSequence(t.selectedSequenceId),t.names.shot=vr.generateNextName(s.name)}})}}}})},k_=g_,b_=(s("NDFw"),Object(kr["a"])(k_,v_,y_,!1,null,"29255904",null)),T_=b_.exports,S_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"thumbnail"}),t.isSingleEpisode?t._e():s("th",{staticClass:"episode"},[t._v("\n            "+t._s(t.$t("shots.fields.episode"))+"\n          ")]),s("th",{staticClass:"sequence"},[t._v(t._s(t.$t("shots.fields.sequence")))]),s("th",{staticClass:"name shot-name"},[t._v(t._s(t.$t("shots.fields.name")))]),t.isFrameIn?s("th",{staticClass:"framein"},[t._v("\n            "+t._s(t.$t("shots.fields.frame_in"))+"\n          ")]):t._e(),t.isFrameOut?s("th",{staticClass:"frameout"},[t._v("\n            "+t._s(t.$t("shots.fields.frame_out"))+"\n          ")]):t._e(),t.isFps?s("th",{staticClass:"fps"},[t._v(t._s(t.$t("shots.fields.fps")))]):t._e(),s("th",{staticClass:"description"},[t._v(t._s(t.$t("shots.fields.description")))]),t._l(t.validationColumns,function(e){return s("th",{key:e.id,staticClass:"validation",style:{"border-left":"2px solid "+e.color}},[s("router-link",{attrs:{to:{name:"task-type",params:{production_id:t.currentProduction.id,task_type_id:e.id}}}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1)}),s("th",{staticClass:"actions"},[t.isCurrentUserManager?s("button-link",{staticClass:"is-small",attrs:{icon:"plus",text:t.$t("tasks.create_tasks"),path:{name:"create-shot-tasks",params:{production_id:t.currentProduction.id}}}}):t._e()],1)],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isEmptyList?s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("shots.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("shots.new_shots"),path:{name:"manage-shots",params:{production_id:t.currentProduction.id}}}})],1):t._e(),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreShots,expression:"loadMoreShots"},{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e,i){return s("tr",{key:e.id,class:{canceled:e.canceled}},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e}})],1),t.isSingleEpisode?t._e():s("td",{class:{name:!e.canceled}},[t._v("\n            "+t._s(e.episode_name)+"\n          ")]),s("td",{class:{name:!e.canceled}},[t._v("\n            "+t._s(e.sequence_name)+"\n          ")]),s("td",{class:{"shot-name":!0,name:!e.canceled}},[s("router-link",{attrs:{to:{name:"shot",params:{production_id:e.production_id,shot_id:e.id}}}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1),t.isFrameIn?s("td",{staticClass:"framein"},[t._v("\n            "+t._s(e.data&&e.data.frame_in?e.data.frame_in:"")+"\n          ")]):t._e(),t.isFrameOut?s("td",{staticClass:"frameout"},[t._v("\n            "+t._s(e.data&&e.data.frame_out?e.data.frame_out:"")+"\n          ")]):t._e(),t.isFps?s("td",{staticClass:"fps"},[t._v("\n            "+t._s(e.data&&e.data.fps?e.data.fps:"")+"\n          ")]):t._e(),s("description-cell",{staticClass:"description",attrs:{entry:e}}),t._l(t.validationColumns,function(n,a){return s("validation-cell",{key:n.name+"-"+e.id,ref:"validation-"+i+"-"+a,refInFor:!0,staticClass:"unselectable",attrs:{column:n,entity:e,selected:t.shotSelectionGrid[i][a],rowX:i,columnY:a},on:{select:t.onTaskSelected,unselect:t.onTaskUnselected}})}),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":{name:"edit-shots",params:{shot_id:e.id,production_id:t.currentProduction.id}},"restore-route":{name:"restore-shots",params:{shot_id:e.id,production_id:t.currentProduction.id}},"delete-route":{name:"delete-shots",params:{shot_id:e.id,production_id:t.currentProduction.id}}}}):s("td",{staticClass:"actions"})],2)}))])]),t.isEmptyList?t._e():s("p",{staticClass:"has-text-centered nb-shots"},[t._v("\n    "+t._s(t.displayedShotsLength)+" "+t._s(t.$tc("shots.number",t.displayedShotsLength))+"\n  ")])],1)},C_=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("cyuX")}})])}],E_={name:"shot-list",props:["entries","isLoading","isError","validationColumns"],data:function(){return{busy:!1,lastSelection:null}},components:{ButtonLink:Qc,ButtonHrefLink:el,DescriptionCell:Tr,EntityThumbnail:Fr,PageTitle:wr,RowActions:Bc,TableInfo:Zr,ValidationCell:rl},computed:Object(mn["a"])({},Object(E["c"])(["currentProduction","isCurrentUserManager","isFps","isFrameIn","isFrameOut","isSingleEpisode","displayedShotsLength","nbSelectedTasks","shotSearchText","shotSelectionGrid"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.shotSearchText||0===this.shotSearchText.length)}}),methods:Object(mn["a"])({},Object(E["b"])(["displayMoreShots"]),{onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onTaskSelected:function(t){if(t.isShiftKey){if(this.lastSelection){var e=this.lastSelection.x,s=t.x,i=this.lastSelection.y,n=t.y;t.x<this.lastSelection.x&&(e=t.x,s=this.lastSelection.x),t.y<this.lastSelection.y&&(i=t.y,n=this.lastSelection.y);for(var a=e;a<=s;a++)for(var o=i;o<=n;o++){var r="validation-"+a+"-"+o,c=this.$refs[r][0];this.shotSelectionGrid[a][o]||c.select({ctrlKey:!0,isUserClick:!1})}}}else t.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");this.$store.commit("ADD_SELECTED_TASK",t),!t.isShiftKey&&t.isUserClick&&(this.lastSelection={x:t.x,y:t.y})},onTaskUnselected:function(t){t.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",t):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",t):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",t))},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop)},loadMoreShots:function(){this.displayMoreShots()},setScrollPosition:function(t){this.$refs.body.scrollTop=t}})},O_=E_,A_=(s("54MY"),Object(kr["a"])(O_,S_,C_,!1,null,"24e14488",null)),w_=A_.exports,P_={name:"shots",components:{ButtonLink:Qc,ButtonHrefLink:el,CreateTasksModal:Sl,DeleteModal:Pl,EditShotModal:__,Filters:Um,ImportModal:ad,ManageShotsModal:T_,PageTitle:wr,SearchField:ud,SearchIcon:Wc["o"],SearchQueryList:vd,ShowAssignationsButton:Sd,ShotList:w_},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1,isRestoreDisplayed:!1,isImportDisplayed:!1,isCreateTasksDisplayed:!1},loading:{creatingTasks:!1,edit:!1,importing:!1,stay:!1},errors:{creatingTasks:!1,importing:!1},shotToDelete:null,shotToEdit:null,choices:[],shotFilters:[{type:"Type",value:{name:"open"}}],columns:["Episode","Sequence","Name","Description","FPS","Frame In","Frame Out"],shotFilterTypes:["Type"]}},computed:Object(mn["a"])({},Object(E["c"])(["shots","shotMap","shotsCsvFormData","shotSearchQueries","displayedShots","sequences","openProductions","isShotsLoading","isShotsLoadingError","editShot","deleteShot","restoreShot","shotValidationColumns","currentProduction","isCurrentUserManager","shotSearchText","shotListScrollPosition","isShowAssignations"])),created:function(){var t=this;this.setLastProductionScreen("shots");var e=this.$store.state.route.params.production_id;this.currentProduction.id!==e&&this.$store.commit("SET_CURRENT_PRODUCTION",e);var s=Object.keys(this.shotMap);0!==s.length&&this.shotMap[s[0]].production_id===this.currentProduction.id||this.loadShots(function(e){e||t.handleModalsDisplay()})},mounted:function(){this.shotSearchText.length>0&&this.$refs["shot-search-field"].setValue(this.shotSearchText),this.$refs["shot-list"].setScrollPosition(this.shotListScrollPosition)},methods:Object(mn["a"])({},Object(E["b"])(["loadShots","loadComment","removeShotSearch","saveShotSearch","setLastProductionScreen","setShotSearch","showAssignations","hideAssignations"]),{confirmNewShotStay:function(t){var e=this,s="newShot";this.loading.stay=!0,this.editShot.isSuccess=!1,this.editShot.isError=!1,this.$store.dispatch(s,{data:t,callback:function(s){e.loading.stay=!1,s?(e.loading.edit=!1,e.editShot.isCreateError=!0):(e.resetEditModal(),e.editShot.shotCreated=t.name,e.editShot.isSuccess=!0)}})},confirmEditShot:function(t){var e=this,s="newShot";this.loading.edit=!0,this.editShot.isCreateError=!1,this.shotToEdit&&this.shotToEdit.id&&(s="editShot",t.id=this.shotToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t?(e.loading.edit=!1,e.editShot.isCreateError=!0):(e.loading.edit=!1,e.modals.isNewDisplayed=!1,e.$router.push({name:"shots",params:{production_id:e.currentProduction.id}}))}})},confirmDeleteShot:function(){var t=this;this.$store.dispatch("deleteShot",{shot:this.shotToDelete,callback:function(e){e||t.$router.push({name:"shots",params:{production_id:t.currentProduction.id}})}})},confirmRestoreShot:function(){var t=this;this.$store.dispatch("restoreShot",{shot:this.shotToRestore,callback:function(e){e||t.$router.push({name:"shots",params:{production_id:t.currentProduction.id}})}})},confirmCreateTasks:function(t){var e=this;this.loading.creatingTasks=!0,this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:t.task_type_id,project_id:this.currentProduction.id,type:"shots",callback:function(t){e.loading.creatingTasks=!1,t?e.errors.creatingTasks=!0:(e.modals.isCreateTasks=!1,e.$router.push({name:"shots",params:{production_id:e.currentProduction.id}}),e.$store.dispatch("loadShots"))}})},resetEditModal:function(){var t={name:""};this.sequences.length>0&&(t.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(t.production_id=this.openProductions[0].id),this.shotToEdit=t},deleteText:function(){var t=this.shotToDelete;return t?this.$t("shots.delete_text",{name:t.name}):""},restoreText:function(){var t=this.shotToRestore;return t?this.$t("shots.restore_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.shot_id;this.editShot.isSuccess=!1,this.editShot.isError=!1,this.modals={isNewDisplayed:!1,isRestoreDisplayed:!1,isDeleteDisplayed:!1,isImportDisplayed:!1,isCreateTasksDisplayed:!1,isManagedDisplayed:!1},t.indexOf("new")>0?(this.resetEditModal(),this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.shotToEdit=this.shotMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.shotToDelete=this.shotMap[e],this.modals.isDeleteDisplayed=!0):t.indexOf("restore")>0?(this.shotToRestore=this.shotMap[e],this.modals.isRestoreDisplayed=!0):t.indexOf("import")>0?this.modals.isImportDisplayed=!0:t.indexOf("create-tasks")>0?this.modals.isCreateTasksDisplayed=!0:t.indexOf("manage")>0&&(this.modals.isManageDisplayed=!0)},selectFile:function(t){this.$store.commit("SHOT_CSV_FILE_SELECTED",t)},uploadImportFile:function(){var t=this;this.loading.importing=!0,this.errors.importing=!1,this.$store.dispatch("uploadShotFile",function(e){e?(t.loading.importing=!1,t.errors.importing=!0):(t.loading.importing=!1,t.modals.isImportDisplayed=!1,t.$store.dispatch("loadShots"))})},onSearchChange:function(t){var e=this.$refs["shot-search-field"].getValue();this.setShotSearch(e)},saveScrollPosition:function(t){this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",t)},changeSearch:function(t){this.$refs["shot-search-field"].setValue(t.search_query),this.$refs["shot-search-field"].$emit("change",t.search_query)},saveSearchQuery:function(t){this.saveShotSearch(t).then(function(){}).catch(function(t){t&&console.log("error")})},removeSearchQuery:function(t){this.removeShotSearch(t).then(function(){}).catch(function(t){t&&console.log("error")})}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var t="".concat(this.$route.path),e={name:"shots",params:{production_id:this.currentProduction.id}};55===this.$route.path.length&&this.$router.push(e);var s=this.$route.path;t!==s&&(this.$refs["shot-search-field"].setValue(""),this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",0),this.$store.dispatch("loadShots"))}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," ").concat(this.$t("shots.title")," - Kitsu")}}},x_=P_,j_=(s("mBc8"),Object(kr["a"])(x_,l_,d_,!1,null,"6315c45f",null)),L_=j_.exports,D_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("h1",{staticClass:"subtitle flexrow"},[s("span",{staticClass:"production-name flexrow-item"},[t._v("\n      "+t._s(t.currentProduction.name)+"\n    ")]),s("task-type-name",{staticClass:"flexrow-item",attrs:{"task-type":t.currentTaskType}})],1),s("table-info",{attrs:{"is-loading":t.loading.entities,"is-error":t.errors.entities}}),this.currentTaskType.for_shots?s("div",t._l(t.shotsByEpisode,function(e){return Object.keys(t.shotMap).length>0?s("div",{key:e.length>0?e[0].id:"",staticClass:"supervisor-sequences"},[s("div",{staticClass:"supervisor-sequence flexrow"},[s("span",{staticClass:"flexrow-item"},[t._v("\n          "+t._s(e.length>0?e[0].episode_name+" / ":"")+"\n          "+t._s(e.length>0?e[0].sequence_name:"")+"\n        ")]),e.length>0?s("subscribe-button",{staticClass:"flexrow-item",attrs:{subscribed:t.isSubscribed(e[0].sequence_id)},on:{click:function(s){t.toggleSubscribe(e[0].sequence_id)}}}):t._e()],1),s("div",{staticClass:"supervisor-shot-list"},t._l(e,function(e){return s("div",{key:e.id,staticClass:"supervisor-shot"},[s("router-link",{staticClass:"shot-block",attrs:{to:{name:"shot",params:{shot_id:e.id}}}},[s("entity-thumbnail",{attrs:{entity:e,square:!0,"empty-width":60,"empty-height":60}}),s("span",{staticClass:"shot-name"},[t._v("\n              "+t._s(e.name)+"\n            ")])],1),e.validations[t.currentTaskType.name]?s("validation-tag",{attrs:{task:e.validations[t.currentTaskType.name]}}):t._e()],1)}))]):t._e()})):s("div",t._l(t.assetsByType,function(e){return Object.keys(t.assetMap).length>0?s("div",{key:e.length>0?e[0].asset_type_name:"",staticClass:"supervisor-type-assets"},[s("div",{staticClass:"supervisor-asset-type"},[t._v("\n        "+t._s(e.length>0?e[0].asset_type_name:"")+"\n      ")]),s("div",{staticClass:"supervisor-asset-list"},t._l(e,function(e){return s("div",{key:e.id,staticClass:"supervisor-asset"},[s("router-link",{staticClass:"asset-block",attrs:{to:{name:"asset",params:{asset_id:e.id}}}},[s("entity-thumbnail",{attrs:{entity:e,square:!0,"empty-width":60,"empty-height":60}}),s("span",{staticClass:"asset-name"},[t._v("\n              "+t._s(e.name)+"\n            ")])],1),e.validations[t.currentTaskType.name]?s("validation-tag",{attrs:{task:e.validations[t.currentTaskType.name]}}):t._e()],1)}))]):t._e()}))],1)},I_=[],$_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button",on:{click:function(e){t.$emit("click")}}},[t.subscribed?s("eye-icon",{staticClass:"icon is-small only-icon"}):s("eye-off-icon",{staticClass:"icon is-small only-icon"})],1)},M_=[],q_={name:"subscribe-button",components:{EyeIcon:Wc["g"],EyeOffIcon:Wc["h"]},props:{subscribed:{default:!1,type:Boolean}},computed:{}},R_=q_,N_=(s("Fsx0"),Object(kr["a"])(R_,$_,M_,!1,null,"3cee0fec",null)),F_=N_.exports,U_={name:"task-type-page",components:{EntityThumbnail:Fr,PageTitle:wr,SubscribeButton:F_,TableInfo:Zr,TaskTypeName:cc,ValidationTag:yc},data:function(){return{loading:{entities:!1},errors:{entities:!1}}},computed:Object(mn["a"])({},Object(E["c"])(["assetMap","assetsByType","currentTaskType","currentProduction","displayedAssets","sequenceSubscriptions","shotsByEpisode","shotMap","taskTypeMap"]),{title:function(){return"".concat(this.currentProduction.name," / ").concat(this.currentTaskType.name)}}),methods:Object(mn["a"])({},Object(E["b"])(["initTaskType","loadShots","loadAssets","setProduction","subscribeToSequence","unsubscribeFromSequence"]),{initData:function(t){var e=this;this.loading.entities=!0,this.errors.entities=!1,this.initTaskType(t).then(function(){e.loading.entities=!1}).catch(function(t){console.error(t),e.loading.entities=!1,e.errors.entities=!0})},isSubscribed:function(t){return this.sequenceSubscriptions[t]},toggleSubscribe:function(t){var e=this.currentTaskType.id;this.isSubscribed(t)?this.unsubscribeFromSequence({sequenceId:t,taskTypeId:e}):this.subscribeToSequence({sequenceId:t,taskTypeId:e})}}),mounted:function(){this.initData(!1)},watch:{$route:function(){this.initData(!0)},currentProduction:function(){this.currentProduction.id!==this.$route.params.production_id&&this.$router.push({name:"task-type",params:{production_id:this.currentProduction.id}})}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},B_=U_,V_=(s("LIwf"),Object(kr["a"])(B_,D_,I_,!1,null,"524ddd3a",null)),G_=V_.exports,W_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page fixed-page"},[i("div",{staticClass:"page-header"},[i("div",{staticClass:"back-button flexrow"},[i("router-link",{staticClass:"flexrow-item",attrs:{to:t.previousEntity,title:t.$t("tasks.previous")}},[t._v("\n        ←\n      ")]),i("router-link",{staticClass:"list-link flexrow-item has-text-centered",attrs:{to:t.entityPage}},[t._v("\n        "+t._s(t.$t("tasks.back_to_list"))+"\n      ")]),i("router-link",{staticClass:"next-link flexrow-item",attrs:{to:t.nextEntity,title:t.$t("tasks.next")}},[t._v("\n        →\n      ")])],1),t.currentTask?i("div",{staticClass:"flexrow header-title"},[i("task-type-name",{staticClass:"flexrow-item task-type",attrs:{"task-type":{id:t.currentTask.task_type_id,name:t.currentTask.task_type_name,color:t.currentTask.task_type_color},"production-id":t.currentProduction.id}}),i("div",{staticClass:"title flexrow-item"},[i("router-link",{attrs:{to:t.taskEntityPath}},[t._v("\n          "+t._s(t.currentTask?t.title:"Loading...")+"\n        ")])],1),i("subscribe-button",{staticClass:"flexrow-item action-button",attrs:{subscribed:t.isAssigned||t.isSubscribed},on:{click:t.toggleSubscribe}}),i("button-link",{staticClass:"flexrow-item action-button",attrs:{text:"",icon:"delete",path:t.deleteTaskPath}})],1):t._e(),t.currentTask?i("div",{staticClass:"flexrow task-information"},[i("span",{staticClass:"flexrow-item"},[t._v(t._s(t.$t("tasks.current_status")))]),t.currentTask?i("validation-tag",{staticClass:"is-medium flexrow-item",attrs:{task:t.currentTask,"is-static":!0}}):t._e(),i("span",{staticClass:"flexrow-item"},[t._v(t._s(t.$t("tasks.fields.assignees"))+":")]),t._l(t.currentTask.assignees,function(e){return t.currentTask.assignees?i("span",{key:e,staticClass:"flexrow-item avatar-wrapper"},[i("people-avatar",{key:e,staticClass:"flexrow-item",attrs:{person:t.personMap[e],size:30,"font-size":16}})],1):i("span")})],2):t._e()]),i("div",{ref:"task-columns",staticClass:"task-columns"},[i("div",{staticClass:"task-column comments-column"},[t.currentTask?i("div",[i("div",[t.isCommentingAllowed?i("add-comment",{attrs:{addComment:t.addComment,isAddCommentLoading:t.addCommentLoading.isLoading,user:t.user,task:t.currentTask,taskStatusOptions:t.taskStatusOptions}}):t._e(),t.currentTaskComments.length>0?i("div",{staticClass:"comments"},t._l(t.currentTaskComments,function(e,s){return i("comment",{key:e.id,attrs:{comment:e,highlighted:t.isHighlighted(e),"current-user":t.user,editable:e.person&&t.user.id===e.person.id&&0===s}})})):i("div",{staticClass:"no-comment"},[i("em",[t._v("\n              "+t._s(t.$t("tasks.no_comment"))+"\n            ")])])],1)]):i("div",{staticClass:"has-text-centered"},[i("img",{attrs:{src:s("XD0i")}})])]),i("div",{staticClass:"task-column preview-column"},[i("div",{staticClass:"preview-column-content"},[i("h2",{staticClass:"subtitle"},[t._v("\n          "+t._s(t.$t("tasks.preview"))+"\n        ")]),t.isPreviews?i("div",{staticClass:"preview-list"},t._l(t.currentTaskPreviews,function(e){return i("preview-row",{key:e.id,attrs:{preview:e,taskId:t.currentTask?t.currentTask.id:"",selected:e.id===t.currentPreviewId}})})):i("div",[i("em",[t._v("\n            "+t._s(t.$t("tasks.no_preview"))+"\n          ")])]),i("div",{staticClass:"preview-picture"},[t.currentTaskPreviews&&t.currentTaskPreviews.length>0&&t.isMovie?i("div",[i("video",{ref:"preview-movie",attrs:{src:t.moviePath,controls:"",poster:t.getPreviewPath()}})]):t.currentTaskPreviews.length>0&&"pdf"===t.extension?i("a",{staticClass:"button",attrs:{href:t.getOriginalPath()}},[i("download-icon",{staticClass:"icon"}),i("span",{staticClass:"text"},[t._v("\n              "+t._s(t.$t("tasks.download_pdf_file"))+"\n            ")])],1):t.currentTaskPreviews.length>0&&"obj"===t.extension?i("model-viewer",{attrs:{"preview-url":t.getOriginalPath()}}):t.currentTaskPreviews.length>0&&!t.isMovie?i("a",{attrs:{href:t.getOriginalPath(),target:"_blank"}},[i("img",{ref:"preview-picture",attrs:{src:t.getPreviewPath()}})]):t._e()],1),t.isPreviewButtonVisible?i("div",{staticClass:"flexrow"},[t.currentTaskPreviews.length>0&&t.isCurrentUserManager?i("button",{class:{button:!0,"flexrow-item":!0,"is-loading":t.loading.setPreview},on:{click:t.setPreview}},[i("image-icon",{staticClass:"icon"}),i("span",{staticClass:"text"},[t._v("\n              "+t._s(t.$t("tasks.set_preview"))+"\n            ")])],1):t._e(),t.errors.setPreview?i("span",{staticClass:"error flexrow-item"},[t._v("\n            "+t._s(t.$t("tasks.set_preview_error"))+"\n          ")]):t._e()]):t._e(),t.currentTask&&t.currentTask.entity&&t.currentTask.entity.preview_file_id===t.currentPreviewId?i("div",{staticClass:"set-main-preview"},[i("em",[t._v(t._s(t.$t("tasks.set_preview_done")))])]):t._e()])])]),i("add-preview-modal",{ref:"add-preview-modal",attrs:{active:t.modals.addPreview,"is-loading":t.loading.addPreview,"is-error":t.errors.addPreview,"cancel-route":t.taskPath,"form-data":t.addPreviewFormData},on:{fileselected:t.selectFile,confirm:t.createPreview}}),i("add-preview-modal",{ref:"change-preview-modal",attrs:{active:t.modals.changePreview,"is-loading":t.loading.changePreview,"is-error":t.errors.changePreview,"cancel-route":t.taskPath,"form-data":t.changePreviewFormData,"is-editing":!0},on:{fileselected:t.selectFile,confirm:t.changePreview}}),i("edit-comment-modal",{attrs:{active:t.modals.editComment,"is-loading":t.loading.editComment,"is-error":t.errors.editComment,"cancel-route":t.taskPath,"comment-to-edit":t.commentToEdit},on:{confirm:t.confirmEditTaskComment}}),i("delete-modal",{attrs:{active:t.modals.deleteTask,"is-loading":t.loading.deleteTask,"is-error":t.errors.deleteTask,"cancel-route":t.taskPath,text:t.deleteText,"error-text":t.$t("tasks.delete_error")},on:{confirm:t.confirmDeleteTask}}),i("delete-modal",{attrs:{active:t.modals.deleteComment,"is-loading":t.loading.deleteComment,"is-error":t.errors.deleteComment,"cancel-route":t.taskPath,text:t.$t("tasks.delete_comment"),"error-text":t.$t("tasks.delete_comment_error")},on:{confirm:t.confirmDeleteTaskComment}})],1)},z_=[],K_=s("a94B"),H_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"add-comment media"},[s("figure",{staticClass:"media-left"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("people-avatar",{staticClass:"level-item",attrs:{person:t.user}})],1)])]),s("div",{staticClass:"media-content"},[s("p",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"},{name:"focus",rawName:"v-focus"}],ref:"commentTextarea",staticClass:"textarea",attrs:{placeholder:t.$t("comments.add_comment"),disabled:t.isAddCommentLoading},domProps:{value:t.text},on:{keyup:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter"))&&e.ctrlKey?void t.runAddComment(t.text,t.task_status_id):null},input:function(e){e.target.composing||(t.text=e.target.value)}}}),s("span",{staticClass:"select"},[s("select",{ref:"statusSelect",on:{change:t.updateValue}},t._l(t.taskStatusOptions,function(e,i){return s("option",{key:i+"-"+e.label,domProps:{value:e.value,selected:e.value===t.task_status_id}},[t._v("\n            "+t._s(e.label)+"\n          ")])}))]),s("button",{class:{button:!0,"is-loading":t.isAddCommentLoading},on:{click:function(e){t.runAddComment(t.text,t.task_status_id)}}},[t._v("\n        "+t._s(t.$t("comments.post_status"))+"\n      ")])])])])},Q_=[],Y_={name:"add-comment",data:function(){return{text:"",task_status_id:this.task.task_status_id}},components:{PeopleAvatar:Cc},props:{user:{type:Object,default:function(){}},addComment:{type:Function,default:null},isAddCommentLoading:{type:Boolean,default:null},taskStatusOptions:{type:Array,default:function(){return[]}},task:{type:Object,default:function(){return[]}}},methods:{runAddComment:function(t,e){this.addComment(t,e),this.text=""},updateValue:function(t){this.task_status_id=this.$refs.statusSelect.value}}},X_=Y_,Z_=(s("nKDQ"),Object(kr["a"])(X_,H_,Q_,!1,null,"f8b77e98",null)),J_=Z_.exports,tv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[t.isEditing?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("tasks.change_preview"))+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("tasks.add_preview"))+"\n      ")]),s("p",[t._v("\n        "+t._s(t.$t("tasks.select_preview_file"))+"\n      ")]),s("file-upload",{ref:"preview-field",attrs:{accept:".png,.jpg,.mp4,.mov,.obj,.pdf"},on:{fileselected:t.onFileSelected}}),t.isError?s("p",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("tasks.add_preview_error"))+"\n      ")]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading,"is-disabled":void 0==t.formData},on:{click:t.onConfirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)],1)])])},ev=[],sv={name:"add-preview-modal",components:{FileUpload:ed},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},cancelRoute:{type:Object,default:function(){}}},data:function(){return{formData:null}},mounted:function(){this.formData=null},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},reset:function(){this.$refs["preview-field"].reset(),this.formData=null},onConfirmClicked:function(){this.$emit("confirm")}}),watch:{active:function(){this.reset()}}},iv=sv,nv=(s("DqPd"),Object(kr["a"])(iv,tv,ev,!1,null,"5da1d4d2",null)),av=nv.exports,ov=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{class:{media:!0,comment:!0,highlighted:t.highlighted},style:{"border-left":"3px solid "+t.comment.task_status.color}},[s("figure",{staticClass:"media-left"},[s("people-avatar",{staticClass:"level-item",attrs:{person:t.comment.person}})],1),s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("div",{staticClass:"comment-person flexrow"},[s("div",{staticClass:"flexrow-item"},[s("strong",{},[s("people-name",{attrs:{person:t.comment.person}})],1),s("span",{staticClass:"comment-date"},[t._v("\n            "+t._s(t.formatDate(t.comment.created_at))+"\n          ")]),t.comment.preview?s("router-link",{staticClass:"revision",attrs:{to:t.previewRoute}},[t._v("\n            revision "+t._s(t.comment.preview.revision)+"\n          ")]):t._e()],1),s("div",{staticClass:"flexrow-item"},[t.editable&&!t.comment.preview&&t.comment.task_status.is_reviewable?s("button-link",{attrs:{icon:"upload",text:t.$t("tasks.add_preview"),"is-responsive":!0,path:{name:"task-add-preview",params:{task_id:t.comment.object_id,comment_id:t.comment.id}}}}):t._e(),t.editable?s("button-link",{attrs:{icon:"edit",path:{name:"comment-edit",params:{task_id:t.comment.object_id,comment_id:t.comment.id}}}}):t._e(),t.editable?s("button-link",{attrs:{icon:"delete",path:{name:"comment-delete",params:{task_id:t.comment.object_id,comment_id:t.comment.id}}}}):t._e()],1)]),"Done"===t.comment.task_status.name?s("p",[s("span",{style:{color:t.comment.task_status.color}},[t._v("\n        "+t._s(t.$t("comments.validated"))+"\n        ")])]):t._e(),t.comment.text?s("p",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.compileMarkdown(t.comment.text))}}):s("p",{staticClass:"comment-text empty"},[t._v("\n        "+t._s(t.$t("comments.empty_text"))+"\n      ")])])])])},rv=[],cv={name:"comment",components:{PeopleAvatar:Cc,PeopleName:Ep,ButtonLink:Qc},props:{comment:{type:Object,default:function(){}},highlighted:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},computed:{previewRoute:function(){return this.comment.preview?{name:"task-preview",params:{task_id:this.comment.object_id,preview_id:this.comment.preview.id}}:{name:"task",params:{task_id:this.comment.object_id}}}},methods:{formatDate:function(t){var e=Mn.a.tz(t,"UTC");return Mn()(e.format()).fromNow()},compileMarkdown:function(t){return _r()(t||"")}}},lv=cv,dv=(s("FxGF"),Object(kr["a"])(lv,ov,rv,!1,null,"a3f93c2a",null)),uv=dv.exports,pv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.commentToEdit&&t.commentToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("comments.edit_title"))+"\n      ")]):t._e(),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("textarea-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"textField",attrs:{label:t.$t("comments.fields.text")},on:{keyup:function(e){return e.ctrlKey?t.runConfirmation(e):null}},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n        "+t._s(t.$t("assets.edit_fail"))+"\n      ")]):t._e()])])])},mv=[],hv={name:"edit-comment-modal",components:{Combobox:gl,TextareaField:Vl},props:["active","cancelRoute","isLoading","isError","commentToEdit"],watch:{commentToEdit:function(){this.commentToEdit&&this.commentToEdit.id?this.form.text=this.commentToEdit.text:this.form={text:""}},active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.textField.focus()},100)}},data:function(){return this.commentToEdit&&this.commentToEdit.id?{form:{text:this.commentToEdit.text}}:{form:{text:""}}},methods:{runConfirmation:function(t){13!==t.keyCode&&t.keyCode||this.$emit("confirm",Object(mn["a"])({id:this.commentToEdit.id},this.form))}}},fv=hv,_v=(s("XoOf"),Object(kr["a"])(fv,pv,mv,!1,null,"f5c709cc",null)),vv=_v.exports,yv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"model-viewer",attrs:{id:"model-viewer"}}),s("div",{staticClass:"viewer-actions"},[s("button",{staticClass:"button",on:{click:t.goFullScreen}},[s("maximize-2-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("\n        "+t._s(t.$t("tasks.full_screen"))+"\n      ")])],1)])])},gv=[],kv=s("nVFH"),bv={name:"model-viewer",components:{Maximize2Icon:Wc["j"]},props:{previewUrl:{default:"",type:String}},computed:{element:function(){return this.$refs["model-viewer"]}},methods:{goFullScreen:function(){Object(kv["a"])(this.element)}},mounted:function(){var t=this;setTimeout(function(){t.scene=Object(kv["c"])(t.element),Object(kv["b"])(t.scene,t.previewUrl)},100)}},Tv=bv,Sv=(s("JbrC"),Object(kr["a"])(Tv,yv,gv,!1,null,"3815b880",null)),Cv=Sv.exports,Ev=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"preview-row":!0,"has-text-center":!0,selected:t.selected}},[s("button-link",{attrs:{text:t.label,path:"/tasks/"+t.taskId+"/previews/"+t.preview.id}})],1)},Ov=[],Av={name:"preview-row",components:{ButtonLink:Qc},props:{preview:{type:Object,default:function(){}},selected:{type:Boolean,default:!1},taskId:{type:String,default:""}},computed:{label:function(){var t="v".concat(this.preview.revision);return t}},methods:{}},wv=Av,Pv=(s("Bm3X"),Object(kr["a"])(wv,Ev,Ov,!1,null,"5323cdae",null)),xv=Pv.exports,jv={name:"task",components:{AddComment:J_,AddPreviewModal:av,ButtonLink:Qc,Comment:uv,ChevronLeftIcon:Wc["c"],DeleteModal:Pl,DownloadIcon:Wc["e"],EntityThumbnail:Fr,EditCommentModal:vv,ImageIcon:Wc["i"],ModelViewer:Cv,PeopleAvatar:Cc,ValidationTag:yc,PeopleName:Ep,PreviewRow:xv,SubscribeButton:F_,TaskTypeName:cc},data:function(){return{selectedTab:"validation",taskLoading:{isLoading:!0,isError:!1},addCommentLoading:{isLoading:!1,isError:!1},modals:{addPreview:!1,changePreview:!1,deleteTask:!1,deleteComment:!1,editComment:!1},loading:{addPreview:!1,changePreview:!1,setPreview:!1,deleteTask:!1,deleteComment:!1,editComment:!1},errors:{addPreview:!1,changePreview:!1,setPreview:!1,deleteTask:!1,deleteComment:!1,editComment:!1},currentTask:null,currentTaskComments:[],currentTaskPreviews:[],addPreviewFormData:null,changePreviewFormData:null,isSubscribed:!1}},created:function(){this.clearSelectedTasks(),this.loadTaskData()},computed:Object(mn["a"])({},Object(E["c"])(["tasks","comments","commentTexts","displayedShots","displayedAssets","route","user","isSingleEpisode","taskStatusOptions","taskMap","getTaskComments","getTaskPreviews","getTaskComment","personMap","user","currentProduction","isCurrentUserManager","productionMap"]),{isCommentingAllowed:function(){var t=this;return this.isCurrentUserManager||this.currentTask.assignees.find(function(e){return e===t.user.id})},taskTypeBorder:function(){var t="transparent";return this.currentTask&&(t=this.currentTask.task_type_color),{"border-left":"4px solid ".concat(t)}},taskPath:function(){var t={name:"open-productions"};return this.currentTask&&(t={name:"task",params:{task_id:this.currentTask.id}}),t},deleteTaskPath:function(){var t="";return this.currentTask&&(t={name:"task-delete",params:{task_id:this.currentTask.id}}),t},commentToEdit:function(){var t={};return this.currentTask&&this.currentTaskComments.length>0&&(t=this.currentTaskComments[0]),t},isPreviews:function(){return this.currentTaskPreviews&&this.currentTaskPreviews.length>0},entityPage:function(){if(this.currentTask){var t=this.currentTask.entity_type_name;return"Shot"===t?{name:"shots",params:{production_id:this.currentTask.project_id}}:{name:"assets",params:{production_id:this.currentTask.project_id}}}return{name:"open-productions"}},taskEntityPath:function(){if(this.currentTask){var t=this.currentTask.entity_type_name,e="";return e=this.currentTask.entity?this.currentTask.entity.id:this.currentTask.entity_id,"Shot"===t?{name:"shot",params:{production_id:this.currentTask.project_id,shot_id:e}}:{name:"asset",params:{production_id:this.currentTask.project_id,asset_id:e}}}return{name:"open-productions"}},entityList:function(){var t=this.currentTask.entity_type_name;return"Shot"===t?this.displayedShots:this.displayedAssets},previousEntity:function(){var t=this;if(!this.currentTask)return{name:"open-productions"};var e=function(){var e=t.currentTask.task_type_id,s=t.entityList.findIndex(function(e){return e.id===t.currentTask.entity_id}),i=s-1;i<0&&(i=t.entityList.length-1);var n=null;while(!n)n=t.entityList[i]?t.entityList[i].tasks.find(function(t){return t.task_type_id===e}):t.currentTask,n||(i--,i<0&&(i=t.entityList.length));return{v:{name:"task",params:{task_id:n.id}}}}();return"object"===Object(K_["a"])(e)?e.v:void 0},nextEntity:function(){var t=this;if(!this.currentTask)return{name:"open-productions"};var e=function(){var e=t.currentTask.task_type_id,s=t.entityList.findIndex(function(e){return e.id===t.currentTask.entity_id}),i=s+1;i>=t.entityList.length&&(i=0);var n=null;while(!n)n=t.entityList[i]?t.entityList[i].tasks.find(function(t){return t.task_type_id===e}):t.currentTask,n||(i++,i>=t.entityList.length&&(i=0));return{v:{name:"task",params:{task_id:n.id}}}}();return"object"===Object(K_["a"])(e)?e.v:void 0},currentPreviewId:function(){var t=this.route.params.preview_id;return!t&&this.currentTaskPreviews.length>0&&(t=this.currentTaskPreviews[0].id),t},title:function(){if(this.currentTask){var t=this.productionMap[this.currentTask.project_id],e=t.name,s=this.currentTask.entity_type_name,i=this.currentTask.full_entity_name||this.currentTask.entity_name;return this.isSingleEpisode&&"Shot"===s&&(i=i.split("/").splice(1).join("/")),"".concat(e," / ").concat(i)}return"Loading..."},windowTitle:function(){if(this.currentTask){var t=this.currentTask.task_type_name;return"".concat(this.title," / ").concat(t)}return"Loading..."},deleteText:function(){return this.currentTask?this.$t("main.delete_text",{name:"".concat(this.currentTask.entity_name)+" / ".concat(this.currentTask.task_type_name)}):""},isMovie:function(){if(this.currentTaskPreviews.length>0){var t=this.route.params.preview_id,e=this.currentTaskPreviews[0];return t&&(e=this.currentTaskPreviews.find(function(e){return e.id===t})),!!e&&e.is_movie}return!1},extension:function(){if(this.currentTaskPreviews.length>0){var t=this.route.params.preview_id,e=this.currentTaskPreviews[0];return t&&(e=this.currentTaskPreviews.find(function(e){return e.id===t})),e?e.extension:""}return""},moviePath:function(){var t=this.route.params.preview_id;return!t&&this.currentTaskPreviews.length>0&&(t=this.currentTaskPreviews[0].id),"/api/movies/originals/preview-files/".concat(t,".mp4")},isAssigned:function(){var t=this;return!!this.currentTask&&this.currentTask.assignees.some(function(e){return e===t.user.id})},isPreviewButtonVisible:function(){return this.currentTask&&this.currentTask.entity&&this.currentTask.entity.preview_file_id!==this.currentPreviewId&&!["pdf","obj"].includes(this.extension)}}),methods:Object(mn["a"])({},Object(E["b"])(["addCommentPreview","changeCommentPreview","clearSelectedTasks","deleteTask","editTaskComment","deleteTaskComment","loadEpisodes","loadTask","loadShots","loadAssets","loadTaskComments","loadTaskSubscribed","subscribeToTask","setProduction","unsubscribeFromTask"]),{loadTaskData:function(){var t=this,e=this.getCurrentTask();e?(this.currentTask=e,this.loadTaskComments({taskId:this.route.params.task_id,callback:function(e){e||(t.currentTaskComments=t.getCurrentTaskComments(),t.currentTaskPreviews=t.getCurrentTaskPreviews(),t.loadTaskSubscribed({taskId:t.route.params.task_id,callback:function(e,s){e&&console.log(e),t.isSubscribed=s}}))}})):(this.taskLoading={isLoading:!0,isError:!1},this.loadTask({taskId:this.route.params.task_id,callback:function(e,s){e&&console.log(e),t.setProduction(s.project_id);var i=t.loadAssets;"Shot"===s.entity_type_name&&(i=t.loadShots),i(function(){t.currentTask=s,t.loadTaskComments({taskId:s.id,callback:function(e){e?t.taskLoading={isLoading:!1,isError:!0}:(t.currentTaskComments=t.getCurrentTaskComments(),t.currentTaskPreviews=t.getCurrentTaskPreviews(),t.taskLoading={isLoading:!1,isError:!1},t.loadTaskSubscribed({taskId:t.route.params.task_id,callback:function(e,s){e&&console.log(e),t.isSubscribed=s}}))}})})}}))},isHighlighted:function(t){return t.preview&&t.preview.id===this.currentPreviewId},getCurrentTask:function(){return this.taskMap[this.route.params.task_id]},getCurrentComment:function(){if(this.route.params.comment_id)return this.getTaskComment(this.route.params.task_id,this.route.params.comment_id)},getCurrentTaskComments:function(){return this.getTaskComments(this.route.params.task_id)},getCurrentTaskPreviews:function(){return this.getTaskPreviews(this.route.params.task_id)},getCurrentTaskPath:function(){return this.currentTask?"/tasks/".concat(this.currentTask.id):""},getOriginalPath:function(){var t=this.route.params.preview_id;!t&&this.currentTaskPreviews.length>0&&(t=this.currentTaskPreviews[0].id);var e=this.extension?this.extension:"png";return"/api/pictures/originals/preview-files/".concat(t,".").concat(e)},getPreviewPath:function(){var t=this.route.params.preview_id;return!t&&this.currentTaskPreviews.length>0&&(t=this.currentTaskPreviews[0].id),"/api/pictures/previews/preview-files/".concat(t,".png")},addComment:function(t,e){var s=this;this.addCommentLoading={isLoading:!0,isError:!1},this.$store.dispatch("commentTask",{taskId:this.route.params.task_id,taskStatusId:e,comment:t,callback:function(t){t?(console.log(t),s.addCommentLoading={isLoading:!1,isError:!0}):(s.addCommentLoading={isLoading:!1,isError:!1},s.currentTaskPreviews=s.getCurrentTaskPreviews(),s.currentTaskComments=s.getCurrentTaskComments(),s.currentTask=s.getCurrentTask())}})},handleModalsDisplay:function(){var t=this.$store.state.route.path;this.modals={addPreview:!1,changePreview:!1,deleteTask:!1,deleteComment:!1,editComment:!1},t.indexOf("add-preview")>0?this.modals.addPreview=!0:t.indexOf("change-preview")>0?this.modals.changePreview=!0:t.indexOf("delete")>0&&t.indexOf("comments")<0?this.modals.deleteTask=!0:t.indexOf("delete")>0&&t.indexOf("comments")>0?this.modals.deleteComment=!0:t.indexOf("edit")>0&&t.indexOf("comments")>0&&(this.modals.editComment=!0)},selectFile:function(t){this.$store.commit("PREVIEW_FILE_SELECTED",t)},createPreview:function(){var t=this;this.errors.addPreview=!1,this.loading.addPreview=!0,this.addCommentPreview({taskId:this.route.params.task_id,commentId:this.route.params.comment_id,callback:function(e,s){t.loading.addPreview=!1,e?t.errors.addPreview=!0:(t.$refs["add-preview-modal"].reset(),t.resetPreview(s.is_movie,s))}})},changePreview:function(){var t=this,e=this.currentTaskComments[0].preview;this.errors.changePreview=!1,this.loading.changePreview=!0,this.changeCommentPreview({preview:e,taskId:this.currentTask.id,comment:this.currentTaskComments[0],callback:function(s,i){t.loading.changePreview=!1,s?t.errors.changePreview=!0:(t.$refs["change-preview-modal"].reset(),i?t.$refs["preview-movie"].src=t.getPreviewPath()+"?"+(new Date).getTime():t.$refs["preview-picture"].src=t.getPreviewPath()+"?"+(new Date).getTime(),t.resetPreview(i,e))}})},resetPreview:function(t,e){this.$router.push("/tasks/".concat(this.route.params.task_id)+"/previews/".concat(e.id)),this.currentTaskPreviews=this.getCurrentTaskPreviews(),this.currentTaskComments=this.getCurrentTaskComments()},setPreview:function(){var t=this;this.loading.setPreview=!0,this.errors.setPreview=!1,this.$store.dispatch("setPreview",{taskId:this.currentTask.id,entityId:this.currentTask.entity.id,previewId:this.currentPreviewId,callback:function(e){e&&(t.errors.setPreview=!0),t.loading.setPreview=!1}})},confirmDeleteTask:function(){var t=this;this.loading.deleteTask=!0,this.errors.deleteTask=!1,this.deleteTask({task:this.currentTask,callback:function(e){t.loading.deleteTask=!1,e?t.errors.deleteTask=!0:t.$router.push(t.entityPage)}})},confirmEditTaskComment:function(t){var e=this;this.loading.editComment=!0,this.errors.editComment=!1,this.editTaskComment({taskId:this.currentTask.id,comment:t,callback:function(t){e.loading.editComment=!1,t?e.errors.editComment=!0:e.$router.push(e.taskPath)}})},confirmDeleteTaskComment:function(){var t=this;this.loading.deleteComment=!0,this.errors.deleteComment=!1;var e=this.route.params.comment_id;this.deleteTaskComment({taskId:this.currentTask.id,commentId:e,callback:function(e){t.loading.deleteComment=!1,e?t.errors.deleteComment=!0:(t.currentTaskComments=t.getCurrentTaskComments(),t.$router.push(t.taskPath))}})},onPreviewAdded:function(t){var e=t.task_id,s=t.comment_id,i=t.preview_file_id,n=t.is_movie,a=t.revision,o=this.$store.getters.getTaskComment(e,s);o.preview&&o.preview.id===i||e!==this.currentTask.id||(this.$store.commit("ADD_PREVIEW_END",{preview:{id:i,revision:a,is_movie:n},taskId:e,commentId:s,comment:o}),this.resetPreview(n,{id:i}))},toggleSubscribe:function(){this.currentTask&&!this.isAssigned&&(this.isSubscribed?(this.unsubscribeFromTask(this.currentTask.id),this.isSubscribed=!1):(this.subscribeToTask(this.currentTask.id),this.isSubscribed=!0))}}),mounted:function(){var t=this;this.handleModalsDisplay(),setTimeout(function(){t.$refs["task-columns"].scrollTop=100,window.scrollTo(0,0)})},watch:{$route:function(){this.handleModalsDisplay(),this.$route.params.task_id!==this.currentTask.id&&this.loadTaskData()}},socket:{events:{"preview:add":function(t){this.onPreviewAdded(t)}}},metaInfo:function(){var t="Loading task... - Kitsu";return this.currentTask&&(t="".concat(this.title," / ").concat(this.currentTask.task_type_name," - Kitsu")),{title:t}}},Lv=jv,Dv=(s("n5Qc"),Object(kr["a"])(Lv,W_,z_,!1,null,"1a8efb73",null)),Iv=Dv.exports,$v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-types page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("task_types.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item",attrs:{icon:"plus",text:t.$t("task_types.new_task_type"),path:"/task-types/new"}})],1)])]),s("task-type-list",{attrs:{entries:t.taskTypes,"is-loading":t.isTaskTypesLoading,"is-error":t.isTaskTypesLoadingError}}),s("edit-task-type-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editTaskType.isLoading,"is-error":t.editTaskType.isError,"cancel-route":"/task-types","task-type-to-edit":t.taskTypeToEdit},on:{confirm:t.confirmEditTaskType}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteTaskType.isLoading,"is-error":t.deleteTaskType.isError,"cancel-route":"/task-types",text:t.deleteText(),"error-text":t.$t("task_types.delete_error")},on:{confirm:t.confirmDeleteTaskType}})],1)},Mv=[],qv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"dedicated"},[t._v(t._s(t.$t("task_types.fields.dedicated_to")))]),s("th",{staticClass:"priority"},[t._v(t._s(t.$t("task_types.fields.priority")))]),s("th",{staticClass:"name"},[t._v(t._s(t.$t("task_types.fields.name")))]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"dedicated"},[t._v(t._s(t.renderForShots(e)))]),s("td",{staticClass:"priority"},[t._v(t._s(e.priority))]),s("task-type-name",{staticClass:"name",attrs:{entry:e}}),s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-task-type",params:{task_type_id:e.id}},"delete-route":{name:"delete-task-type",params:{task_type_id:e.id}}}})],1)}))])]),s("p",{staticClass:"has-text-centered nb-task-types"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("task_types.number",t.entries.length))+"\n  ")])],1)},Rv=[],Nv={name:"task-type-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{RowActions:Bc,TaskTypeName:pc,TableInfo:Zr},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{renderForShots:function(t){return t.for_shots?this.$tc("shots.title"):this.$tc("assets.title")},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},Fv=Nv,Uv=(s("xgi0"),Object(kr["a"])(Fv,qv,Rv,!1,null,"8a3e718a",null)),Bv=Uv.exports,Vv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.isEditing()?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("task_types.edit_title"))+" "+t._s(t.taskTypeToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("task_types.new_task_type"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("task_types.fields.name")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("combobox",{attrs:{label:t.$t("task_types.fields.priority"),options:t.priorityOptions},model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}}),s("combobox",{attrs:{label:t.$t("task_types.fields.dedicated_to"),options:t.dedicatedToOptions},model:{value:t.form.for_shots,callback:function(e){t.$set(t.form,"for_shots",e)},expression:"form.for_shots"}}),s("color-field",{ref:"colorField",attrs:{label:t.$t("task_types.fields.color")},model:{value:t.form.color,callback:function(e){t.$set(t.form,"color",e)},expression:"form.color"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},Gv=[],Wv={name:"edit-task-type-modal",components:{Combobox:gl,TextField:ql,ColorField:Vd},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText","taskTypeToEdit"],watch:{taskTypeToEdit:function(){this.taskTypeToEdit&&(this.form={name:this.taskTypeToEdit.name,color:this.taskTypeToEdit.color,priority:String(this.taskTypeToEdit.priority),for_shots:String(this.taskTypeToEdit.for_shots)})}},data:function(){return{form:{name:"",color:"#999999",priority:"",for_shots:"false"},priorityOptions:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"},{label:"10",value:"10"}],dedicatedToOptions:[{label:this.$tc("assets.title"),value:"false"},{label:this.$tc("shots.title"),value:"true"}]}},computed:Object(mn["a"])({},Object(E["c"])(["taskTypes","taskTypeStatusOptions"])),methods:Object(mn["a"])({},Object(E["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.taskTypeToEdit&&this.taskTypeToEdit.id}})},zv=Wv,Kv=(s("EMWW"),Object(kr["a"])(zv,Vv,Gv,!1,null,"e5203cf8",null)),Hv=Kv.exports,Qv={name:"task-types",components:{ButtonLink:Qc,DeleteModal:Pl,EditTaskTypeModal:Hv,PageTitle:wr,TaskTypeList:Bv},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},taskTypeToDelete:null,taskTypeToEdit:null}},computed:Object(mn["a"])({},Object(E["c"])(["editTaskType","deleteTaskType","getTaskType","isTaskTypesLoading","isTaskTypesLoadingError","taskTypes"])),created:function(){var t=this;this.loadTaskTypes(function(e){e||t.handleModalsDisplay()})},methods:Object(mn["a"])({},Object(E["b"])(["loadTaskTypes"]),{confirmEditTaskType:function(t){var e=this,s="newTaskType";this.taskTypeToEdit&&this.taskTypeToEdit.id&&(s="editTaskType",t.id=this.taskTypeToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t||(e.modals.isNewDisplayed=!1,e.$router.push("/task-types"))}})},confirmDeleteTaskType:function(){var t=this;this.$store.dispatch("deleteTaskType",{taskType:this.taskTypeToDelete,callback:function(e){e||(t.modals.isDeleteDisplayed=!1)}})},deleteText:function(){var t=this.taskTypeToDelete;return t?this.$t("task_types.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.task_type_id;t.indexOf("new")>0?(this.taskTypeToEdit={color:"#999999"},this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.taskTypeToEdit=this.getTaskType(e),this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.taskTypeToDelete=this.getTaskType(e),this.modals.isDeleteDisplayed=!0):(this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("task_types.title")," - Kitsu")}}},Yv=Qv,Xv=(s("dsck"),Object(kr["a"])(Yv,$v,Mv,!1,null,"4b8c6fec",null)),Zv=Xv.exports,Jv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-status page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("task_status.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item task-status-new",attrs:{icon:"plus",text:t.$t("task_status.new_task_status"),path:"/task-status/new"}})],1)])]),s("task-status-list",{attrs:{entries:t.taskStatus,"is-loading":t.taskStatusList.isLoading,"is-error":t.taskStatusList.isError}}),s("edit-task-status-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editStatus.isLoading,"is-error":t.editStatus.isError,"cancel-route":"/task-status","task-status-to-edit":t.taskStatusToEdit},on:{confirm:t.confirmEditTaskStatus}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteStatus.isLoading,"is-error":t.deleteStatus.isError,"cancel-route":"/task-status",text:t.deleteText(),"error-text":t.$t("task_status.delete_error")},on:{confirm:t.confirmDeleteTaskStatus}})],1)},ty=[],ey=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("task_status.fields.name"))+"\n          ")]),s("th",{staticClass:"short-name"},[t._v("\n            "+t._s(t.$t("task_status.fields.short_name"))+"\n          ")]),s("th",{staticClass:"is-reviewable"},[t._v("\n            "+t._s(t.$t("task_status.fields.is_reviewable"))+"\n          ")]),s("th",{staticClass:"is-done"},[t._v("\n            "+t._s(t.$t("task_status.fields.is_done"))+"\n          ")]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n          ")]),s("task-status-name",{staticClass:"short-name",attrs:{entry:e}}),s("td",{staticClass:"is-reviewable"},[t._v("\n            "+t._s(t.translateBoolean(e.is_reviewable))+"\n          ")]),s("td",{staticClass:"is-done"},[t._v("\n            "+t._s(t.translateBoolean(e.is_done))+"\n          ")]),["done","todo"].includes(e.short_name)?s("td",{staticClass:"actions"}):s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-task-status",params:{task_status_id:e.id}},"delete-route":{name:"delete-task-status",params:{task_status_id:e.id}}}})],1)}))])]),s("p",{staticClass:"has-text-centered nb-task-status"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("task_status.number",t.entries.length))+"\n  ")])],1)},sy=[],iy=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("div",{staticClass:"tag",style:{background:t.color,color:t.textColor}},[t._v("\n    "+t._s(t.entry.short_name)+"\n  ")])])},ny=[],ay={name:"task-status-name",components:{},props:["entry"],computed:Object(mn["a"])({},Object(E["c"])([]),{color:function(){return this.entry.color},textColor:function(){return"todo"===this.entry.short_name?"#333":"white"}}),methods:Object(mn["a"])({},Object(E["b"])([]))},oy=ay,ry=(s("+nik"),Object(kr["a"])(oy,iy,ny,!1,null,"139832f9",null)),cy=ry.exports,ly={name:"task-status-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{RowActions:Bc,TableInfo:Zr,TaskStatusName:cy},computed:Object(mn["a"])({},Object(E["c"])([])),methods:Object(mn["a"])({},Object(E["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},translateBoolean:function(t){return t?this.$t("main.yes"):this.$t("main.no")}})},dy=ly,uy=(s("BZg5"),Object(kr["a"])(dy,ey,sy,!1,null,"51c970e4",null)),py=uy.exports,my=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.isEditing()?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("task_status.edit_title"))+" "+t._s(t.taskStatusToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("task_status.new_task_status"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{"input-class":"task-status-name",label:t.$t("task_status.fields.name")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"shortNameField",attrs:{"input-class":"task-status-short-name",label:t.$t("task_status.fields.short_name")},model:{value:t.form.short_name,callback:function(e){t.$set(t.form,"short_name",e)},expression:"form.short_name"}}),s("combobox",{attrs:{label:t.$t("task_status.fields.is_reviewable"),options:t.isReviewableOptions},model:{value:t.form.is_reviewable,callback:function(e){t.$set(t.form,"is_reviewable",e)},expression:"form.is_reviewable"}}),s("combobox",{attrs:{label:t.$t("task_status.fields.is_done"),options:t.isDoneOptions},model:{value:t.form.is_done,callback:function(e){t.$set(t.form,"is_done",e)},expression:"form.is_done"}}),s("color-field",{ref:"colorField",attrs:{label:t.$t("task_status.fields.color"),colors:t.colors},model:{value:t.form.color,callback:function(e){t.$set(t.form,"color",e)},expression:"form.color"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"confirm-edit-task-status":!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},hy=[],fy={name:"edit-task-status-modal",components:{Combobox:gl,TextField:ql,ColorField:Vd},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText","taskStatusToEdit"],data:function(){return{form:{name:"",short_name:"",color:"#999999",is_reviewable:"true"},isReviewableOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}],isDoneOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}],colors:["#000000","#E81123","#ff3860","#FF5722","#FFA000","#AFB42B","#22d160","#43A047","#498205","#607D8B","#3273dc","#8764B8","#ab26ff"]}},computed:Object(mn["a"])({},Object(E["c"])(["taskStatus","taskStatusStatusOptions"])),methods:Object(mn["a"])({},Object(E["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.taskStatusToEdit&&this.taskStatusToEdit.id},resetForm:function(){this.taskStatusToEdit&&(this.form={name:this.taskStatusToEdit.name,short_name:this.taskStatusToEdit.short_name,color:this.taskStatusToEdit.color,is_reviewable:String(this.taskStatusToEdit.is_reviewable),is_done:String(this.taskStatusToEdit.is_done)})}}),watch:{taskStatusToEdit:function(){this.resetForm()},active:function(){var t=this;this.active&&(this.resetForm(),setTimeout(function(){t.$refs.nameField.focus()},100))}}},_y=fy,vy=(s("3OWx"),Object(kr["a"])(_y,my,hy,!1,null,"027559f9",null)),yy=vy.exports,gy={name:"task-status",components:{ButtonLink:Qc,DeleteModal:Pl,EditTaskStatusModal:yy,PageTitle:wr,TaskStatusList:py},data:function(){return{taskStatusToDelete:null,taskStatusToEdit:null,modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},taskStatusList:{isLoading:!1,isError:!1},editStatus:{isLoading:!1,isError:!1},deleteStatus:{isLoading:!1,isError:!1}}},computed:Object(mn["a"])({},Object(E["c"])(["taskStatus","taskStatusMap"])),created:function(){this.handleModalsDisplay()},methods:Object(mn["a"])({},Object(E["b"])(["loadTaskStatus","deleteTaskStatus"]),{confirmEditTaskStatus:function(t){var e=this,s=!(this.taskStatusToEdit&&this.taskStatusToEdit.id),i="newTaskStatus";s||(i="saveTaskStatus",t.id=this.taskStatusToEdit.id),this.editStatus.isLoading=!0,this.editStatus.isError=!1,this.$store.dispatch(i,{form:t,callback:function(t){e.editStatus.isLoading=!1,t?e.editStatus.isError=!0:e.$router.push("/task-status")}})},confirmDeleteTaskStatus:function(){var t=this;this.deleteStatus.isLoading=!0,this.deleteStatus.isError=!1,this.deleteTaskStatus({taskStatus:this.taskStatusToDelete,callback:function(e){t.deleteStatus.isLoading=!1,e?t.deleteStatus.isError=!0:t.$router.push("/task-status")}})},deleteText:function(){var t=this.taskStatusToDelete;return t?this.$t("task_status.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.task_status_id;t.indexOf("new")>0?(this.taskStatusToEdit={color:"#000000"},this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.taskStatusToEdit=this.taskStatusMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.taskStatusToDelete=this.taskStatusMap[e],this.modals.isDeleteDisplayed=!0):(this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("task_status.title")," - Kitsu")}}},ky=gy,by=(s("QlM1"),Object(kr["a"])(ky,Jv,ty,!1,null,"35480bb4",null)),Ty=by.exports,Sy=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isCurrentUserManager?s("div",{staticClass:"timesheets page fixed-page"},[s("div",{staticClass:"page-header flexrow"},[s("page-title",{staticClass:"flexrow-item",attrs:{text:t.$t("timesheets.title")}}),s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("timesheets.detail_level"),options:t.detailOptions},model:{value:t.detailLevel,callback:function(e){t.detailLevel=e},expression:"detailLevel"}}),s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("timesheets.year"),options:t.yearOptions},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}}),"day"===t.detailLevel?s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("timesheets.month"),options:t.monthOptions},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}}):t._e()],1),s("people-timesheet-list",{attrs:{people:t.people,timesheet:t.timesheet,"detail-level":t.detailLevel,month:t.month,year:t.year,"is-loading":t.isLoading,"is-error":t.isLoadingError}})],1):t._e()},Cy=[],Ey=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("people.list.name"))+"\n          ")]),t._l(t.monthRange,function(e){return"month"===t.detailLevel?s("th",{key:"month-"+e,staticClass:"time"},[t._v("\n            "+t._s(t.monthToString(e))+"\n          ")]):t._e()}),t._l(t.weekRange,function(e){return"week"===t.detailLevel?s("th",{key:"week-"+e,staticClass:"daytime"},[t._v("\n            "+t._s(e)+"\n          ")]):t._e()}),t._l(t.dayRange,function(e){return"day"===t.detailLevel?s("th",{key:"day-"+e,staticClass:"daytime"},[t._v("\n            "+t._s(e)+"\n          ")]):t._e()}),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.people,function(e){return s("tr",{key:e.id},[s("people-name-cell",{staticClass:"name",attrs:{entry:e}}),t._l(t.monthRange,function(i){return"month"===t.detailLevel?s("td",{key:"month-"+i+"-"+e.id,staticClass:"time"},[t._v("\n            "+t._s(t.monthDuration(i,e.id))+"\n          ")]):t._e()}),t._l(t.weekRange,function(i){return"week"===t.detailLevel?s("td",{key:"week-"+i+"-"+e.id,staticClass:"daytime"},[t._v("\n            "+t._s(t.weekDuration(i,e.id))+"\n          ")]):t._e()}),t._l(t.dayRange,function(i){return"day"===t.detailLevel?s("td",{key:"day-"+i+"-"+e.id,staticClass:"daytime"},[t._v("\n            "+t._s(t.dayDuration(i,e.id))+"\n          ")]):t._e()}),s("td",{staticClass:"actions"})],2)}))])]),t.isLoading?t._e():s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.people.length)+" "+t._s(t.$tc("people.persons",t.people.length))+"\n  ")])],1)},Oy=[],Ay={name:"people-timesheet-list",components:{PeopleNameCell:Em,TableInfo:Zr},data:function(){return{detailOptions:[{label:"Day",value:"day"},{label:"Month",value:"month"}],currentMonth:Mn()().month(),currentYear:Mn()().year(),currentWeek:Mn()().week()}},props:{timesheet:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}},detailLevel:{type:String,default:"day"},year:{type:String,default:""},month:{type:String,default:""},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:Object(mn["a"])({},Object(E["c"])(["isCurrentUserManager"]),{monthRange:function(){return Vn(this.year,this.currentYear,this.currentMonth)},dayRange:function(){return Gn(this.year,this.month,this.currentYear,this.currentMonth)},weekRange:function(){return Wn(this.year,this.currentYear,this.currentWeek)}}),methods:Object(mn["a"])({},Object(E["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},monthToString:Bn,monthDuration:function(t,e){var s="".concat(t+1);return this.getDuration(s,e)},weekDuration:function(t,e){return this.getDuration(t,e)},dayDuration:function(t,e){return this.getDuration(t,e)},getDuration:function(t,e){return this.timesheet&&this.timesheet[t]&&this.timesheet[t][e]?this.timesheet[t][e]/60:"-"}})},wy=Ay,Py=(s("hFeF"),Object(kr["a"])(wy,Ey,Oy,!1,null,"e044a9d0",null)),xy=Py.exports,jy={name:"people",components:{Combobox:gl,PeopleTimesheetList:xy,PageTitle:wr},data:function(){return{detailOptions:[{label:"Day",value:"day"},{label:"Week",value:"week"},{label:"Month",value:"month"}],detailLevel:"day",year:"".concat(Mn()().year()),month:"".concat(Mn()().month()),currentYear:Mn()().year(),currentMonth:Mn()().month(),isLoading:!1,isLoadingError:!1}},created:function(){var t=this;this.isLoading=!0,this.loadPeople(function(){t.reloadTimesheet()})},computed:Object(mn["a"])({},Object(E["c"])(["isCurrentUserManager","people","timesheet"]),{yearOptions:function(){var t=2018,e=Mn()().year();return Un(t,e).map(function(t){return{label:t,value:t}})},monthOptions:function(){var t=0,e=Mn()().month();return Un(t,e).map(function(t){return{label:Bn(t),value:"".concat(t)}})}}),methods:Object(mn["a"])({},Object(E["b"])(["loadPeople","loadTimesheets"]),{reloadTimesheet:function(){var t=this;this.isLoading=!0,this.loadTimesheets({detailLevel:this.detailLevel,year:this.year,month:this.month}).then(function(e){t.isLoading=!1}).catch(function(){t.isLoading=!1,t.isLoadingError=!0})}}),watch:{detailLevel:function(){this.reloadTimesheet()},month:function(){this.reloadTimesheet()},year:function(){this.reloadTimesheet()}},metaInfo:function(){return{title:"".concat(this.$t("timesheets.title")," - Kitsu")}}},Ly=jy,Dy=(s("6iGl"),Object(kr["a"])(Ly,Sy,Cy,!1,null,"454c63c3",null)),Iy=Dy.exports,$y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"todos page fixed-page"},[s("div",{staticClass:"task-tabs tabs"},[s("ul",[s("li",{class:{"is-active":t.isTabActive("todos")}},[s("router-link",{attrs:{to:{name:"todos"}}},[t._v("\n          "+t._s(t.$t("tasks.current"))+"\n        ")])],1),s("li",{class:{"is-active":t.isTabActive("done")},on:{click:function(e){t.selectTab("done")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"done"}}}},[t._v("\n          "+t._s(t.$t("tasks.done"))+" ("+t._s(t.displayedDoneTasks.length)+")\n        ")])],1),s("li",{class:{"is-active":t.isTabActive("timesheets")},on:{click:function(e){t.selectTab("timesheet")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"timesheets"}}}},[t._v("\n          "+t._s(t.$t("timesheets.title"))+"\n        ")])],1)])]),t.isTabActive("done")?t._e():s("search-field",{ref:"todos-search-field",class:{"search-field":!0},attrs:{"can-save":!0},on:{change:t.onSearchChange,save:t.saveSearchQuery}}),t.isTabActive("todos")?s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:t.todoSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1):t._e(),t.isTabActive("todos")?s("todos-list",{ref:"todo-list",attrs:{entries:t.displayedTodos,"is-loading":t.isTodosLoading,"is-error":t.isTodosLoadingError,"selection-grid":t.todoSelectionGrid},on:{scroll:t.setTodoListScrollPosition}}):t._e(),t.isTabActive("done")?s("todos-list",{ref:"done-list",attrs:{entries:t.displayedDoneTasks,"is-loading":t.isTodosLoading,"is-error":t.isTodosLoadingError,done:!0}}):t._e(),t.isTabActive("timesheets")?s("timesheet-list",{ref:"timesheet-list",attrs:{tasks:t.displayedTodos,"done-tasks":t.displayedDoneTasks,"is-loading":t.isTodosLoading,"is-error":t.isTodosLoadingError,"time-spent-map":t.timeSpentMap,"time-spent-total":t.timeSpentTotal,"hide-done":t.todosSearchText.length>0},on:{"date-changed":t.onDateChanged,"time-spent-change":t.onTimeSpentChange}}):t._e()],1)},My=[],qy={name:"todos",components:{TimesheetList:fh,TodosList:Ah,PageTitle:wr,SearchField:ud,SearchQueryList:vd},data:function(){return{activeTab:"todos",selectedDate:Mn()().format("YYYY-MM-DD")}},mounted:function(){var t=this;this.updateActiveTab(),this.todosSearchText.length>0&&this.$refs["todos-search-field"].setValue(this.todosSearchText),this.loadTodos({date:this.selectedDate,callback:function(){t.$refs["todo-list"]&&t.$refs["todo-list"].setScrollPosition(t.todoListScrollPosition)}})},computed:Object(mn["a"])({},Object(E["c"])(["user","displayedTodos","displayedDoneTasks","todosSearchText","isTodosLoading","isTodosLoadingError","timeSpentMap","timeSpentTotal","todoListScrollPosition","todoSelectionGrid","todoSearchQueries"])),methods:Object(mn["a"])({},Object(E["b"])(["loadTodos","removeTodoSearch","saveTodoSearch","setTodoListScrollPosition","setTodosSearch","setTimeSpent"]),{isTabActive:function(t){return this.activeTab===t},selectTab:function(t){var e=this;this.activeTab=t,this.isTabActive("todos")&&setTimeout(function(){e.$refs["person-tasks-search-field"]&&e.$refs["person-tasks-search-field"].focus()},100)},updateActiveTab:function(){["done","timesheets"].includes(this.$route.params.tab)?this.activeTab=this.$route.params.tab:this.activeTab="todos"},onSearchChange:function(t){this.setTodosSearch(t)},changeSearch:function(t){this.$refs["todos-search-field"].setValue(t.search_query),this.$refs["todos-search-field"].$emit("change",t.search_query)},saveSearchQuery:function(t){this.saveTodoSearch(t).then(function(){}).catch(function(t){t&&console.log("error",t)})},removeSearchQuery:function(t){this.removeTodoSearch(t).then(function(){}).catch(function(t){t&&console.log("error",t)})},onDateChanged:function(t){this.selectedDate=Mn()(t).format("YYYY-MM-DD"),this.loadTodos({date:this.selectedDate,forced:!0})},onTimeSpentChange:function(t){t.personId=this.user.id,t.date=this.selectedDate,this.setTimeSpent(t)}}),watch:{$route:function(){this.updateActiveTab()}},metaInfo:function(){return{title:"".concat(this.$t("tasks.my_tasks")," - Kitsu")}}},Ry=qy,Ny=(s("X+0B"),Object(kr["a"])(Ry,$y,My,!1,null,"c580c7c0",null)),Fy=Ny.exports,Uy=[{path:"",component:Wp,beforeEnter:function(t,e,s){Jo.requireAuth(t,e,function(t){t?s(t):(cr.setTimezone(),rr.setLocale(),0===Xo.state.productions.openProductions.length?dr(function(t){t?s({name:"server-down"}):$o.getters.isCurrentUserManager($o.state)?s({name:"open-productions"}):s({name:"todos"})}):$o.getters.isCurrentUserManager($o.state)?s({name:"open-productions"}):s({name:"todos"}))})}},{path:"/",component:Wp,beforeEnter:function(t,e,s){Jo.requireAuth(t,e,function(t){t?s(t):(cr.setTimezone(),rr.setLocale(),0===Ta.state.taskTypes.length?dr(s):s())})},children:[{path:"",name:"home"},{path:"/open-productions",component:fm,name:"open-productions"},{path:"/open-productions/new",component:fm,name:"open-productions-new"},{path:"/people",component:Wm,name:"people"},{path:"/people/new",component:Wm,name:"new-people"},{path:"/people/edit/:person_id",component:Wm,name:"edit-person"},{name:"delete-person",path:"/people/delete/:person_id",component:Wm},{path:"/people/import",component:Wm,name:"import-people"},{path:"/people/:person_id",component:jh,name:"person"},{path:"/people/:person_id/:tab",component:jh,name:"person-tab"},{path:"/timesheets",component:Iy,name:"timesheets"},{path:"/timesheets/:tab",component:Iy,name:"timesheets"},{path:"/productions",component:Vh,name:"productions"},{path:"/productions/new",component:Vh,name:"productions-new"},{path:"/productions/edit/:production_id",component:Vh,name:"edit-production"},{path:"/productions/delete/:production_id",component:Vh,name:"delete-production"},{path:"/productions/:production_id/breakdown",component:Au,name:"breakdown"},{path:"/productions/:production_id/breakdown/shots/:shot_id",component:Au,name:"breakdown-shot"},{path:"/productions/:production_id/assets",component:Ad,name:"assets"},{path:"/productions/:production_id/assets/new",component:Ad,name:"new-asset"},{path:"/productions/:production_id/assets/:asset_id",component:Lc,name:"asset"},{path:"/productions/:production_id/assets/edit/:asset_id",component:Ad,name:"edit-asset"},{path:"/productions/:production_id/assets/delete/:asset_id",component:Ad,name:"delete-asset"},{path:"/productions/:production_id/assets/restore/:asset_id",component:Ad,name:"restore-asset"},{path:"/productions/:production_id/assets/import",component:Ad,name:"import-assets"},{path:"/productions/:production_id/assets/create-tasks",component:Ad,name:"create-asset-tasks"},{path:"/productions/:production_id/asset-types",component:ef,name:"production-asset-types"},{path:"/productions/:production_id/shots",component:L_,name:"shots"},{path:"/productions/:production_id/shots/manage",component:L_,name:"manage-shots"},{path:"/productions/:production_id/shots/import",component:L_,name:"import-shots"},{path:"/productions/:production_id/shots/create-tasks",component:L_,name:"create-shot-tasks"},{path:"/productions/:production_id/shots/edit/:shot_id",component:L_,name:"edit-shots"},{path:"/productions/:production_id/shots/delete/:shot_id",component:L_,name:"delete-shots"},{path:"/productions/:production_id/shots/restore/:shot_id",component:L_,name:"restore-shots"},{path:"/productions/:production_id/shots/:shot_id",component:c_,name:"shot"},{path:"/productions/:production_id/sequences",component:s_,name:"sequences"},{path:"/productions/:production_id/sequences/edit/:sequence_id",component:s_,name:"edit-sequence"},{path:"/productions/:production_id/sequences/delete/:sequence_id",component:s_,name:"delete-sequence"},{path:"/productions/:production_id/episodes",component:lp,name:"episodes"},{path:"/productions/:production_id/episodes/edit/:episode_id",component:lp,name:"edit-episode"},{path:"/productions/:production_id/episodes/delete/:episode_id",component:lp,name:"delete-episode"},{path:"/productions/:production_id/task-types/:task_type_id",component:G_,name:"task-type"},{name:"task",path:"/tasks/:task_id",component:Iv},{name:"task-delete",path:"/tasks/:task_id/delete",component:Iv},{name:"task-add-preview",path:"/tasks/:task_id/comments/:comment_id/add-preview",component:Iv},{name:"task-change-preview",path:"/tasks/:task_id/comments/:comment_id/change-preview",component:Iv},{name:"task-preview",path:"/tasks/:task_id/previews/:preview_id",component:Iv},{name:"comment-edit",path:"/tasks/:task_id/comments/:comment_id/edit",component:Iv},{name:"comment-delete",path:"/tasks/:task_id/comments/:comment_id/delete",component:Iv},{path:"/asset-types",component:Xd},{path:"/asset-types/new",component:Xd},{name:"edit-asset-type",path:"/asset-types/edit/:asset_type_id",component:Xd},{name:"delete-asset-type",path:"/asset-types/delete/:asset_type_id",component:Xd},{path:"/task-types",component:Zv},{path:"/task-types/new",component:Zv},{name:"edit-task-type",path:"/task-types/edit/:task_type_id",component:Zv},{name:"delete-task-type",path:"/task-types/delete/:task_type_id",component:Zv},{name:"task-status",path:"/task-status",component:Ty},{name:"new-task-status",path:"/task-status/new",component:Ty},{name:"edit-task-status",path:"/task-status/edit/:task_status_id",component:Ty},{name:"delete-task-status",path:"/task-status/delete/:task_status_id",component:Ty},{name:"task-types",path:"/task-types",component:Zv},{name:"custom-actions",path:"/custom-actions",component:Wu},{name:"custom-actions-new",path:"/custom-actions/new",component:Wu},{name:"edit-custom-action",path:"/custom-actions/edit/:custom_action_id",component:Wu},{name:"delete-custom-action",path:"/custom-actions/delete/:custom_action_id",component:Wu},{path:"/todos",component:Fy,name:"todos"},{path:"/todos/:tab",component:Fy,name:"todos-tab"},{path:"/profile",component:Lf,name:"profile"},{path:"/profile/change-avatar",component:Lf,name:"change-avatar"},{name:"playlists",path:"/productions/:production_id/playlists",component:kf},{name:"playlist",path:"/productions/:production_id/playlists/:playlist_id",component:kf},{name:"delete-playlist",path:"/productions/:production_id/playlists/:playlist_id/delete",component:kf},{name:"edit-playlist",path:"/productions/:production_id/playlists/:playlist_id/edit",component:kf},{name:"notifications",path:"/notifications",component:im}]},{path:"/login",component:fp,name:"login"},{path:"/server-down",component:Rf,name:"server-down"},{path:"/*",component:Xp,name:"not-found"}];k.a.use(T["a"]);var By=function(t,e,s){return s||{x:0,y:0}},Vy=new T["a"]({mode:"history",scrollBehavior:By,routes:Uy}),Gy=s("ud1V"),Wy=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-view")},zy=[],Ky={name:"app",metaInfo:{link:[{rel:"icon",href:"/static/favicon.ico"}]},methods:{onAssignation:function(t){var e=this.$store;e.getters.user.id===t.person_id&&e.dispatch("loadTodos",{forced:!0}),e.getters.route.path.indexOf(t.person_id)>0&&e.dispatch("loadPersonTasks",{personId:t.person_id,forced:!0})}},socket:{events:{"task:assign":function(t){this.onAssignation(t)},"task:unassign":function(t){this.onAssignation(t)},"comment:new":function(t){var e=t.comment_id;this.$store.dispatch("loadComment",{commentId:e})}}}},Hy=Ky,Qy=(s("ZL7j"),Object(kr["a"])(Hy,Wy,zy,!1,null,null,null)),Yy=Qy.exports,Xy=s("KD6U"),Zy=s.n(Xy),Jy=s("ConA"),tg=s.n(Jy),eg=s("SHqN"),sg=s.n(eg),ig=s("2EKa"),ng=s("WyAD"),ag=s.n(ng),og=s("bDTS"),rg=s.n(og),cg=s("433b"),lg=s("AOfK"),dg=s.n(lg);k.a.config.productionTip=!1,k.a.use(Gy["a"]),k.a.use(Zy.a),k.a.use(tg.a),k.a.use(sg.a),k.a.use(ig["a"],{adapter:ag.a}),k.a.use(dg.a),k.a.use(rg.a,"/events"),k.a.use(cg["a"]),Object(b["sync"])(Xo,Vy),k.a.directive("focus",{inserted:function(t){t.focus()}}),k.a.prototype.$locale={change:function(t){ar.locale=t},current:function(){return ar.locale}},new k.a({el:"#app",components:{App:Yy},template:"<App/>",i18n:ar,router:Vy,store:Xo}),document.addEventListener("keyup",function(t){27===t.keyCode&&Xo.commit("CLEAR_SELECTED_TASKS")})},"W/nA":function(t,e,s){},WsUy:function(t,e,s){"use strict";var i=s("16/b"),n=s.n(i);n.a},"X+0B":function(t,e,s){"use strict";var i=s("Cdpr"),n=s.n(i);n.a},XATi:function(t,e,s){"use strict";var i=s("GIBM"),n=s.n(i);n.a},XD0i:function(t,e,s){t.exports=s.p+"img/spinner.c09255da.svg"},XFMT:function(t,e,s){},XoOf:function(t,e,s){"use strict";var i=s("5V6c"),n=s.n(i);n.a},YqFY:function(t,e,s){},Z3BQ:function(t,e,s){"use strict";var i=s("Rd9x"),n=s.n(i);n.a},ZL7j:function(t,e,s){"use strict";var i=s("slcd"),n=s.n(i);n.a},ZhwN:function(t,e,s){"use strict";var i=s("DNCI"),n=s.n(i);n.a},ZqW6:function(t,e,s){t.exports=s.p+"img/empty_asset.fea3363d.png"},aRwt:function(t,e,s){},arJx:function(t,e,s){"use strict";var i=s("eHHU"),n=s.n(i);n.a},bAo1:function(t,e,s){"use strict";var i=s("QfO/"),n=s.n(i);n.a},"bSd+":function(t,e,s){},be1Q:function(t,e,s){},bjYD:function(t,e,s){"use strict";var i=s("FrkF"),n=s.n(i);n.a},cAJl:function(t,e,s){"use strict";var i=s("mqpM"),n=s.n(i);n.a},cINU:function(t,e,s){},cMxW:function(t,e,s){},cyuX:function(t,e,s){t.exports=s.p+"img/empty_shot.f61b1fe0.png"},dIz7:function(t,e,s){"use strict";var i=s("AFTZ"),n=s.n(i);n.a},dsck:function(t,e,s){"use strict";var i=s("Jx8K"),n=s.n(i);n.a},e1gU:function(t,e,s){},eHHU:function(t,e,s){},eXhF:function(t,e,s){},elin:function(t,e,s){},f5wB:function(t,e,s){},fV9v:function(t,e,s){},fZau:function(t,e,s){},g1nL:function(t,e,s){"use strict";var i=s("vaeW"),n=s.n(i);n.a},gXnD:function(t,e,s){},h2VJ:function(t,e,s){"use strict";var i=s("Ubvj"),n=s.n(i);n.a},hFeF:function(t,e,s){"use strict";var i=s("ibRv"),n=s.n(i);n.a},hGvm:function(t,e,s){"use strict";var i=s("uson"),n=s.n(i);n.a},hUPk:function(t,e,s){"use strict";var i=s("yUUA"),n=s.n(i);n.a},i3pn:function(t,e,s){"use strict";var i=s("BuwV"),n=s.n(i);n.a},i7je:function(t,e,s){},iHg7:function(t,e,s){},iObh:function(t,e,s){},ibRv:function(t,e,s){},ijPS:function(t,e,s){"use strict";var i=s("rwJ6"),n=s.n(i);n.a},"j3/w":function(t,e,s){t.exports=s.p+"img/rotate-ccw.7260812b.svg"},jfF1:function(t,e,s){"use strict";var i=s("zbOy"),n=s.n(i);n.a},jh2c:function(t,e,s){},jsZP:function(t,e,s){},k9Lx:function(t,e,s){},kg5f:function(t,e,s){},lJEs:function(t,e,s){"use strict";var i=s("iHg7"),n=s.n(i);n.a},mBc8:function(t,e,s){"use strict";var i=s("/Zew"),n=s.n(i);n.a},"mI5/":function(t,e,s){},"mW+O":function(t,e,s){},mWlz:function(t,e,s){"use strict";var i=s("XFMT"),n=s.n(i);n.a},mqpM:function(t,e,s){},n4nw:function(t,e,s){"use strict";var i=s("AZ/N"),n=s.n(i);n.a},n5Qc:function(t,e,s){"use strict";var i=s("cMxW"),n=s.n(i);n.a},nKDQ:function(t,e,s){"use strict";var i=s("e1gU"),n=s.n(i);n.a},"o/P2":function(t,e,s){"use strict";var i=s("fZau"),n=s.n(i);n.a},oO5c:function(t,e,s){"use strict";var i=s("i7je"),n=s.n(i);n.a},oSlo:function(t,e,s){"use strict";var i=s("qKkL"),n=s.n(i);n.a},p2Jm:function(t,e,s){"use strict";var i=s("L2wQ"),n=s.n(i);n.a},pJWi:function(t,e,s){"use strict";var i=s("fV9v"),n=s.n(i);n.a},pS0n:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAmCAYAAAC29NkdAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gcMESgoGqK8lgAABmFJREFUWMPtmF1sU+cZx3/n+PgkdhpDbRPHMTQfjnCoiNREawfZJD4UhACpG9ICQlolyAUXiUSZhChd1l2gCLZOqSA3hXukrJeBESQuCEUFwQVS5DZJ8+049bfjxCYh2OdrFwlODKybujKQxl86snT0vj6/5+N9nkevYBiGwSuSYRgYhoGu6zzFkCQJQRDya6T/FYyiKKiqiqIoKIpCOp0mEAgwNTVFMBgkGAyiaRqnT59m69at+X3Cy/Dg0tJSwZNIJJienmZmZoZoNEowGGRhYQGXy4XNZqO8vByv18vt27dxOBx0dnb+PB40DINMJkMmkyGdTpNKpUgmk4RCISKRCLFYjLm5ORwOBzabDbvdjs/no7S0lMnJSY4fP05TU1OBYbdu3Sr4xn8MqOs6iUSCZDJJIpEgFosRj8dJJBKkUikWFxexWq0UFRVRVlbGli1bEEWRVCrFoUOHaGpqoqSkBIBoNEpXVxf/uH4dn8+Hw+EAwF1RwaNHj5hNzeKwO/41YDabJRKJEA6HCYVChEIhkskkmUwGVVUBkGWZDRs2UFtbSzqd5tq1axw5coSWlhZMJhMWi4X5+Xk6Ozu5ceMGjY2NecDy8nI+/O1vuPTll1y6dImNGzcSj8eZCgSQi4qwFFsKc1DTNPr7+xkdHSUYDJJOp9E0jcXFRWw2G06nE4/Hg6qq9PX1cfjwYQ4cOIAsy1itVhRFobu7m5GREc6cOcPmzZvzHwj+8AN//PRT3G43v2pqYmx8nFg0ymwqRSQcRpIkXO5yXGUuNr3zDr/84AMaGxowDANBEBA0TTN6e3u5cuUKHo+HmpoalpaWuHv3LkePHmXPnj1IkoTZbCaXy9HT08OdO3fo6Oigrq5uNX+eLNHR8Sey2Sz79+8nGo0yPjZGOBwmkUigqirr1q/H5XJRUVGB1+vF6/Xicrl4q6QEsyxjliRkWS4oM4Kqqsbly5cZGRnh4sWL6LqOKIp0ffEFd7/5hnPnz1Pn8+U3zM3NceHCBWLxOMeOHSM1O8vw8DCjY2OEQyE0TUMURUptpXg2bqSysioP4y4vR5ZlJJNp2Tsrz49J0DTN6Ovro7e3l66uLmw2G4ZhoCgKn5z5hEgkytmzZ4nH40wHAkxOTjIxMcH8/Hw+DM4NTqqqqqn1evHW1lJZWYnD4cAkiv91yZJEUaSmpoaFhQWGhoZY//bbjI6NMh2YJpvN8Xhxkfa2NkRRRC4qwul0Ulldza83bcLtqcDn87HJXYGu68sdYeX3USbzk4AEQcBisSDL8uohmZ2dpbW1lVwuh6IoiKK4DLSyyABk2YzD4cBqLUHTNVRFWWlRIJlMy38mimiqiiAIiKKYb1+iKKJpGoZhYDKZ8p4H8inxVCaTid27d3Pw4MHVMmMYBpIkUV9fT11dHYqqYjabGRwc5Fu/n127d+Ow2/Prvh8e5tvvvmPHjh3Y7fZ80Z6ZmeHhw4ds27YNj8eDpmnIsszAwACDg4Ps27cvn0Imkwm/38/4+Di7du3CZrMBcO/ePW7evPk8oCAI7Ny5k+bm5rw1n/35M6qqq/nDyZN5K1VV5fPP/0ZDQwNtbW1YLKs169y5c/h8Pk6dOpX3PoDf76exsZETJ07k3z158oSxsTG2b99OW3s7Zmm5JCeTSaampvLrxLWxX3uirl+/ztDgECc//rggBLe//prh74doaWkpgOvv72dgYIDff/RRAdzfv/qKQCBAW3t7Qa713bhBOBLhdy0teTgAVdNYe64FwzCMZDJJa2srbrcbh9MJhsHExASPHz9my7vv5gF1XScSDpPJZKiuqcFSXMzTSWM6EGBhYYHNPh+y2YyxYvTY6Ci5XI66ldYHoKkqMzMz5HI5qqqrCwwKTk/jdDrp7u5eDbEgCFitVmw2Gw67nZyi0NDYiCAIrB12DMjn3LNa/957LxwmfvH++wgre1ffs+yIFygWiyGZpeeHBYvFwt69e2lubkbTdYRXNMSe/+tfSMQTL55mnubgz1Fgf6psb5WSXAP46kh+ZMZcq9cO8Nne/NoBapqGaaUzvZaA2WyW4uLi1zsH14b5tQN8Vm8A3wC+AXwD+AZwzQSxdrJ9VZIkCV3XC+dBURRRVZWenh7u37+PpmmvDNDv91NfX//85dGDBw+4evXqv72KeNlat24dra2tlJWVvbwb1v+rQ/JP6m/lszPpXhEAAAAASUVORK5CYII="},phBl:function(t,e,s){"use strict";var i=s("W/nA"),n=s.n(i);n.a},qBAv:function(t,e,s){"use strict";var i=s("EXCj"),n=s.n(i);n.a},qKkL:function(t,e,s){},qRnS:function(t,e,s){},r1zA:function(t,e,s){"use strict";var i=s("3tPu"),n=s.n(i);n.a},rK5g:function(t,e,s){"use strict";var i=s("/vKN"),n=s.n(i);n.a},rWzn:function(t,e,s){t.exports=s.p+"img/kitsu.b07d6464.png"},rwJ6:function(t,e,s){},ryJu:function(t,e,s){t.exports=s.p+"img/trash.e6887622.svg"},slcd:function(t,e,s){},snJT:function(t,e,s){},srF7:function(t,e,s){"use strict";var i=s("+Xq3"),n=s.n(i);n.a},"swW/":function(t,e,s){},tHBb:function(t,e,s){},tJdF:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAmCAYAAAC29NkdAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gcMESgKz8L9cgAACctJREFUWMPNmHtsU9cdx7/n3mtf+zo2juO2mBBMnDgQaBJG/2i1wNqsKAmF8pCQGlE2ibX7Y6CVLe2CEmijQreJVxcKTIOuqhRUulWUR7smWiHQKFNRmkGUADHk4QKJnQchid++9r337I9dZ06gTYYq4EiW7/ndc+79nnM+93sewCOeCABQSvUAJABy0j1OvS8BoGqMAmDUuJIUZ9UYUZ/BqPUAQA+ABxACQAkhcUqphhASn45ALulaVh8kqy+WkwQAgEGNyao4NumeogoRFUUxSpIUicViWV6v19/e3r6io6Ojyu12eyoqKjZSSm9OV1xyDyZaD0KIouYZVSBNaowCgCiKYpAkKSZJEu/3+zV37tzJ9vl8wvDwcF5PT88vvF6v0tnZ+TjLspGCggKrw+Ew+Xy+8PXr16sPHDhwEECcECJPW2AiqcKgCqVqXiOKom50dDTj9u3b3ODg4Ny+vr4rfr//x36/f1U8Hn+KEGJsaWlBcXGxbtGiRSlWqxW9vb1oaGjAjh07oNfrcevWLZSXl3ccP378aUJIcLo9yCWJYxLaxsbGdBcvXsw4fvz4VrfbnX/79m29JElmRVHI7NmzBaPRGKmrq9Nv375dWLBgAWcwGHDs2DFcu3YNW7ZsAQAsXLgQ17s6UVNTA6fTiStXr0oUuAAgqjZ8WmxyAKAoiv7rr7+2NTY2Eo/H85uRkZElgiDMdDqdj8+ZM4dJS0uDy+XCW2+9BbPZDEKISaPVoLGxEXl5eYhEIiguKcG58+fxu4oKKS0tLez1eBAKhUY1Gk0gIkYDufNzGzdv3vyHYDA4t7+/P9DW1vbCdNgkAODz+TIrKyt/v3r16kKbzTbrxMmTHChFdXX1eMGDBw+CYRiUlZXB7Xaju6d7+Gjt0ZB97ly/oigxlmWp3W6/+dhjj/XPsdvbrBZLUKfTRcfGxqKDg4O5PT09G++HTQIAwWAwb8eOHf+srKy0mc1mAMCmzZuwaNGPUFhYiKtXruCb5mZ0dnVBo9GEeZ7vy8vPf33pkiU3MjMz+dHRUTowMDCnr6/vssrm6ng8vviHYJNQSqEoSv6uXbsanE6nVSfocbn9Mrq7u3Hzxg3E43GYU1ORlZWF3AW54Zx5OX8bHR6xut3u+YODg0wsFjMAYNLT0/WCIIRPnz4tvPnmmxPYdLlc2L179/hL3zt4AKFAENnZ2ehwuaRLly59ePrUqU0AtJO55ACAYRgIgoBPP/0UlrQ0aDgOoBRPPPEEnE4nGJaBb8yHhrNndZf+fbEsPT1dyMnJgclkgsvlwvbt28fZ5HU8Lly4cC82aWpqquz1eCKKooyJojgmUyUy127/csuWLcc6Ozst7e3tKzs6OioncEkpBYD8vXv3NjidTuvKlSvBsiyqtlWhIH8RAgE/nE4nUlNTcfLUKdyLTZZl8dJLL8HtdqOzq5M2nG0gc+x2KooiRFHEM888gzkZGeTa9es+R2bmXw0GQ6vX67V1dXX9fCouk2cSiKKIUCiE5uZmuDpceO3Xr+HIkSNYt24dzGYz8vPzsWnzJhx5//1xNm98+y06u7rw1VdfgeM4/La8nCxdshSUUvL3Tz5BQUEBUs1m9PT0wN3TY/zW7f5lS0tLrLi4WLd48eKU4uLicS4rKioSXArl5eUbAfxlvAf379/fcLm93WpJS4Pf74dCKZxOJ2KiiHnz5iGZzVs3byIWiyHVYkFOTg7m584HAYHX40EgEIAoipBlGTabDYIgoL6+HlVVVXjyySdhMBjw0UcfweVyYc+ePeOdU/PefoQCQTidTlzt6JBaW1s//Oz06V9xlFIQQsBxHFa++CKWv/ACYqIIQggIITh69OgENjUcB7vdDqvVClmWMTQ4iDvDw3A4HHA4HAgEAnC5XHj77bcTXCLFmIKmpiYUFBQgEomgpLQUZxsa8Pobb1CLxaJ4+vpoJBIZUBRlJBQJBx2Zji83bNjwR0KIzAUCAZhMJgCATqcDr9WC12r/t4KQZZSVlSHB5q7duxAMBLFs2TJYLBacOHkSoBTbtm2bwOXHH3887pk8z6O1tRU1+/eDIYRGRREOhwMlJSU0MzOTPXvmzGia1fpqaWlpk4bjoon5n1JKOJZlp5wPk9ns6+2D1WpFQUEBzGYz8vLyvpPLpqYmzJgxA8FgEPvefRd6nQ6yLJM/1dRg+fLlyJ0/n2i1WvR5PGwgENBpOC5CCKETfFCWZTAMk3/o0KGGrKwsa2lp6QRxhw8fRss33yDBpm3WLHAsexeXN2/cQCwWG/dMZ44TIARDA4PQajSIiiICgQBkWUE0EoZeEMCyLLRaLbwe7+izz/3kZ8//9Pnz0WiUAxBmGEaTnp7OcQzDfP9qYhKbLMuitrb2Ls9MTbUgM3MuUowpkOIS/tXUhLVr1mLszgji8ThCoRAWLlgAnucxc+ZMDA0NQavVIhqNQsNxKd1d3VWff/b5xuzsbIHneWtvb++dFStWvMpNZ8kzmc3JXFZtq8KSJUvx8svrAQDnzp1DOBzGqlWrQCkFpRRbt25FUVERZs+eDZ7nUV1djVmzZuGVV15BLBbTtLS0PK0oCt35zjvQajTcvn37Bvr7+63M/e4VElyeOXMGrg4XSkqK4fP5MDAwgLr6OqxZswahUAiRSAQnTpyA0WiEwWBAIBBAw7lzaGtrw5q1azE6Ogqfz4d/fPEFW7p8Oef3+Ti/349INCowDGMf98HvYvCDDz5Aeno6kuOTuVQoRYrRCKookBUFkVAIgsEAlmEAQuD3+6HVaqHjeVAA0WgUUjwOo8kESilkWUEk/N86DMOAYRh4Pd6R54qeXc/dT+/dyzPVhiZW4xPyICSxKv7OMsl5nU6HPfv2crKsGLj7HeJ7eeYPmdJSLZAkiWEe1f0wpTQGYIiZFHxkBCqKAoZh4gmBMqUUBoPhkREYiUT8er2+O8Fgn8lkulZbW2s/f/48JEniAGhsNhsny7JJ3SM/lJFOCOTXrVu3ISMjA7IsE3XpPcPhcOTU19cfBGB+qAIPHTo0lJWVhckeCEAEID0kNsMAolMN3cNkUwDAT+WDd7Fps9n0D5LLqQTexWZWVtZTdXV1f35AXFJuCg8cEgQBRUVFEyaRB8ElpXQEQJBJiPs/OHsgXPI8nybLsoUDAJPJhNraWqicfW/FnTt33tMzkz0WwIh6eqWfVF0LIKb+h5MOTo1qXgYAlmXR1dU1uH79+lxCKUU4HEZzczNkeeozxWXLlj0eDof1avlxz1Q/GgXAAIBBlW9L0sdE1Pyoyu+wujmSAKSqjZLUEaWCIEQKCwtjhFJqTx56AEHV/xIpuXcSrSdJD+cAxNUfko6Ikw9Ik8+4QQiZ9lD/B0QrQSjEFoNZAAAAAElFTkSuQmCC"},tVRt:function(t,e,s){"use strict";var i=s("mI5/"),n=s.n(i);n.a},tkbs:function(t,e,s){},"tu/B":function(t,e,s){"use strict";var i=s("NIPG"),n=s.n(i);n.a},uIdQ:function(t,e,s){},uNzf:function(t,e,s){},uku9:function(t,e,s){"use strict";var i=s("IHvo"),n=s.n(i);n.a},uson:function(t,e,s){},vI2N:function(t,e,s){},vaeW:function(t,e,s){},wVw7:function(t,e,s){},weKJ:function(t,e,s){},"wnX+":function(t,e,s){},xCUs:function(t,e,s){},xWpU:function(t,e,s){"use strict";var i=s("swW/"),n=s.n(i);n.a},xgi0:function(t,e,s){"use strict";var i=s("jh2c"),n=s.n(i);n.a},xnqW:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAIAAAD+THXTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4gcMER4ic2vE/QAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAf6SURBVGje7ZphTFLfG8f53UyLglwjXRs2Zm5Oa8xKt0pztgU4tkzrhUMYttpwXK3cEnghOps6R2AtV7KxxsqA4kVKvAiiXrAxwE3qhascmzZfUI2gtjRpsoTfi/v/G7v33Mu9Cv6s+bzScw7n3O/lec55zofnn2QySfu7DKL9dZazAWvcvXv33bt3TCZTJpMdPHgw28v9k1XHe/bsmdPpTG1hs9nd3d1/pKS5uTmdTofXe+LECalU+sdIisfjPT09CwsLaUc2NzfX1dVtdkljY2N+v5/8+GwEWMYkud1uq9UK7GKz2QqF4smTJ3hqMxtgGZA0NzdnMBiAnsZgMGQyWUlJyWrL4OBgKBTKaoCtVxLBI9bX1587dw7bHolEtFrt4uIi8FMymezIkSP/gaRYLHb79u1QKJRIJCAIfV6XlZVdvXqVeIbXr1/fv38f255IJLZv397Q0MDn8zdUklwuB7YzGIyBgYHc3Nz1byeHDh3q6OjYIEkjIyMzMzPYt6tQKFLDhrz19fV9/vwZ+23r9foNyvGWl5cBE0GQwWBYw2wmkykcDmP1bGiOd/r06Q8fPmDbFxcX5XI5h8NRqVRk5vF4PI8fP874Wb8WSfn5+QS98/PzMAyfPHlSIpHgjYlGowMDA8Bve5Nm4slk0uv1Tk5Otre3l5WVoXp7e3sjkcimvi9VVFTs3bsX276ysjIyMqJUKlPDBoZhoB46nS4WizfLt1RUVNTW1uZ2u202G9aXkAArLCyMRqMrKyvAGXg83vnz52k0mtls3kSOV1dXV1tbOzEx8erVK2xvOBwGforD4XR0dOzatWuTxhIEQRcuXODxeEajMRgMEg+m0+kwDGfjkpv57YHJZHZ2dr5//95sNn/79g04RiwW19TU/GE4pby8fHBw8OzZs3l5eag0R6/XZ09P1gmRUCjkcDipLbW1tdnGKX8h9NqStCXpj5Hk9XpT/8Xbqana0tLSfyApHo+rVCqfz4dSqFar5+fn1/McNputq6sLe3d2u91ZPGoRtA3s+vr1q0ajKS0tvXTpEpPJpPQEfr9/fHz8x48f2GsyBEFWq9XhcFBifaQkodA2BEFAihIMBlUqVWNjI4/HI3NLDYfDo6OjX758wUuvkD8WFhZ0Oh151pdGEh6jgyAoJyfn169fQBd68eKFSCSqqqoimFmv109PTwO7gO8rFArJ5XIyrA8Xp8Tjca1Wi8foEJwdi8Vu3LiBh7/ZbLZYLLbZbKkp7MWLF79//z4xMYH3QAj9Ww/rA0siYFHY9xQIBB48eIB3FyJvWMqFx/qQ5Li/vx9I19CSCNA2MaN7+PDh5OTkmpN3jUaD10uV9f2WZLfbnU4nnh9ev36dDKPr7+//9OkTeTHbtm3r6upCpbZAw5Lq1ZDLz88fGhoCSMIDqHhom4D+DA0NxWKxtCOPHz/e2tpKfubZ2VmDwYAEGGoLSUXW/2sFOlsikWhubqakh0ajsVis4eHhgoIC4mF6vZ6SHhqNVlJScvPmTdQWj9jHjx/R2cO+ffuAJ4PVau3t7aW0cDQa7ezsRE6bRCKBNwyGYZPJRGlmBDDhRSP6XDpw4ADeRJFIRC6XV1dXE6BGPEaXeiijXIWY9aFsZmbm3r17BJvq/v37KSdEXq/X5/OJRKJTp07hvUJUOovyEGA+gbA+BoOx6lFYUyqVeAfUbxk5OWkk5eXlYYlcMpm0WCxPnz5Vq9UsFmu13ePxWK1WvFdIp9PTbhUI6zt8+HB7e3tqu0ajWUM2DM7E+Hz+5cuXgQx1eXm5p6cHOUai0ahSqbRYLEA9XC5Xp9Ohtv6mpqYzZ84AF3379i0Mw3a7HTlRYBjG09PU1NTX10c5x6usrDx69KjT6XS5XNhvbH5+Hm/Tp9FoBQUFUqkUmDvv2LGDz+fjsb5kMulwOBwOB97MXC4XWZfgcpVDjBqFQmFNTY3dbgfGCTDFJMPoyLA+7GtSKpVkuGz67YHJZEokkpqaGrPZjM1iU/VQ/UkcYX3Pnz8HOkJqNLa2tnK53AxfATkcTnd3dyAQMJlMqOUTiURxcfGa0bZQKKyvr7dYLEBHWP0FIFsX9crKylu3blVUVKQ2FhcXq1Sq9aB6CIIkEgk24vV6PVU9a8EpEAQVFRWltuzevTsjGKSwsHALem1J2pK06SX5fL6pqan1z+73+1EVEh6Ph0z1YVobGxtLcy7t2bMHhRqNRqPX621sbCRziybP6EKhECXWhzWXy0UAmH5LAl4Bg8GgRqOprq5uaWmhtDwBo6PE+lA2PT396NEjLJdFuAoge7hz5861a9eAN6U3b94IBAKBQJB2VeRZyTzfz58/jUajy+USi8VpHWFpaWl0dBRY5YMkYseOHQNIys3N1ev12DJoZHmbzebxeFpaWsrLy/HCBoi2EWtoaAgEAlh4FAqFNBpNRUWFSCTCg+kE0AtIlcFokqAWsrS0lMVipeZjbDY7Ho/joe3UXDYV8aBs586dAoHAZrOlNkqlUrxtAFtimkYSLV25JvH9guAVEtNPkkZcjZ2mxJAA4RJIYjAYCoUCuOWQcScCWxfmJ788ShL5gvZ4PK5Wq8k4Au3/ldlkSkwpFILiBdiqpLVVRc/Ozg4PDxOPIYmvKUsiiO/1164Dd1oadXxNW1u57vj4+MuXL1f/vXLlCt7OTtUUCsXqMUD8c0aGJSGm1WqZTGZbW1tmk06XyzU1NVVVVbXRdeJbl4stSeuzfwFmGkI/s8CZNAAAAABJRU5ErkJggg=="},xyux:function(t,e,s){},y4jB:function(t,e,s){t.exports=s.p+"img/studio_collaboration.1e49fa73.png"},y4sQ:function(t,e,s){},yUUA:function(t,e,s){},yeRK:function(t,e,s){t.exports=s.p+"img/spinner-white.da0c6413.svg"},zZWI:function(t,e,s){},zbOy:function(t,e,s){},zwU1:function(t,e,s){t.exports=s.p+"img/logo.10568ab8.png"}});
//# sourceMappingURL=app.a7a76c8a.js.map