{"version":3,"sources":["webpack:///./src/components/lists/EntityTaskList.vue?b98a","webpack:///src/components/lists/EntityTaskList.vue","webpack:///./src/components/lists/EntityTaskList.vue?219c","webpack:///./src/components/lists/EntityTaskList.vue?45bc","webpack:///./src/components/lists/EntityTaskList.vue?9945","webpack:///./src/components/pages/Shot.vue?b8a4","webpack:///./src/components/pages/Shot.vue?0682","webpack:///src/components/pages/Shot.vue","webpack:///./src/components/pages/Shot.vue?6e75","webpack:///./src/components/pages/Shot.vue?f117"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","ref","_v","_s","$t","substring","attrs","isLoading","isError","entries","length","directives","name","rawName","value","expression","_l","taskId","key","id","class","selected","currentTask","on","$event","selectTask","getTask","getTaskType","currentProduction","_e","getTaskEstimation","getTaskDueDate","isCurrentUserClient","isCurrentUserVendor","getAssignees","personId","personMap","get","staticRenderFns","mixins","format","components","TableInfo","TaskTypeCell","PeopleAvatar","ValidationTag","props","type","Array","default","Boolean","data","computed","sortedEntries","taskTypeA","priority","taskTypeB","methods","onBodyScroll","$refs","headerWrapper","style","left","taskMap","task","due_date","estimation","taskTypeMap","task_type_id","assignees","$emit","component","getShotsRoute","currentShot","title","modals","edit","currentTasks","onTaskSelected","fps","frame_in","frame_out","nb_frames","descriptor","field_name","castingAssetsByType","typeAssets","asset_type_name","asset","buildAssetRoute","asset_name","nb_occurences","casting","loading","errors","confirmEditShot","ButtonSimple","ChevronLeftIcon","DescriptionCell","EditShotModal","EntityThumbnail","EntityTaskList","PageSubtitle","PageTitle","TaskInfo","mounted","clearSelectedTasks","getCurrentShot","loadShotCasting","resetData","tasks","episode_name","shotThumbnailPath","isPreview","params","production_id","query","search","currentEpisode","route","episode_id","changeTab","selectedTab","tab","shotMap","shot_id","onEditClicked","form","editShot","isTVShow","episodeId","asset_id","$nextTick","watch","size","metaInfo"],"mappings":"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","file":"js/chunk-8a21d74c.01dcbfde.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"data-list\"},[_c('div',{staticStyle:{\"overflow\":\"hidden\"}},[_c('table',{ref:\"headerWrapper\",staticClass:\"datatable\"},[_c('thead',{staticClass:\"datatable-head\"},[_c('tr',{staticClass:\"datatable-row-header\"},[_c('th',{staticClass:\"type\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.task_type'))+\" \")]),_c('th',{staticClass:\"status\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.task_status'))+\" \")]),_c('th',{staticClass:\"estimation\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.estimation').substring(0, 3))+\". \")]),_c('th',{staticClass:\"duedate\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.due_date'))+\" \")]),_c('th',{staticClass:\"assignees\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.fields.assignees'))+\" \")]),_c('th',{staticClass:\"end-cell\"})])])])]),_c('table-info',{attrs:{\"is-loading\":_vm.isLoading,\"is-error\":_vm.isError}}),(_vm.entries.length > 0)?_c('div',{directives:[{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.onBodyScroll),expression:\"onBodyScroll\"}]},[_c('table',{staticClass:\"datatable\"},[_c('tbody',{staticClass:\"datatable-body\"},_vm._l((_vm.sortedEntries),function(taskId){return _c('tr',{key:typeof (taskId) === 'string' ? taskId : taskId.id,class:{\n            selected: _vm.currentTask && _vm.currentTask.id === taskId,\n            'datatable-row': true,\n            'datatable-row--selectable': true\n          },on:{\"click\":function($event){_vm.selectTask(_vm.getTask(taskId))}}},[(_vm.getTaskType(taskId))?_c('task-type-cell',{staticClass:\"type\",attrs:{\"task-type\":_vm.getTaskType(taskId),\"production-id\":_vm.currentProduction.id}}):_vm._e(),_c('td',{staticClass:\"status\"},[(_vm.getTask(taskId))?_c('validation-tag',{attrs:{\"task\":_vm.getTask(taskId),\"is-static\":true}}):_vm._e()],1),_c('td',{staticClass:\"estimation\"},[_vm._v(\" \"+_vm._s(_vm.getTaskEstimation(taskId))+\" \")]),_c('td',{staticClass:\"duedate\"},[_vm._v(\" \"+_vm._s(_vm.getTaskDueDate(taskId))+\" \")]),_c('td',{staticClass:\"assignees\"},[(!_vm.isCurrentUserClient && !_vm.isCurrentUserVendor)?_c('div',{staticClass:\"flexrow\"},_vm._l((_vm.getAssignees(taskId)),function(personId){return _c('div',{key:personId,staticClass:\"avatar-wrapper\"},[_c('people-avatar',{key:taskId + '-' + personId,staticClass:\"person-avatar flexrow-item\",attrs:{\"person\":_vm.personMap.get(personId),\"size\":30,\"font-size\":15}})],1)}),0):_vm._e()]),_c('td',{staticClass:\"end-cell\"})],1)}),0)])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"data-list\">\n\n  <div style=\"overflow: hidden\">\n    <table class=\"datatable\" ref=\"headerWrapper\">\n      <thead class=\"datatable-head\">\n        <tr class=\"datatable-row-header\">\n          <th class=\"type\">\n            {{ $t('tasks.fields.task_type') }}\n          </th>\n          <th class=\"status\">\n            {{ $t('tasks.fields.task_status') }}\n          </th>\n          <th class=\"estimation\">\n            {{ $t('tasks.fields.estimation').substring(0, 3) }}.\n          </th>\n          <th class=\"duedate\">\n            {{ $t('tasks.fields.due_date') }}\n          </th>\n          <th class=\"assignees\">\n            {{ $t('tasks.fields.assignees') }}\n          </th>\n          <th class=\"end-cell\"></th>\n        </tr>\n      </thead>\n    </table>\n  </div>\n\n  <table-info\n    :is-loading=\"isLoading\"\n    :is-error=\"isError\"\n  />\n\n  <div v-scroll=\"onBodyScroll\" v-if=\"entries.length > 0\">\n    <table class=\"datatable\">\n      <tbody class=\"datatable-body\">\n        <tr\n          :key=\"typeof (taskId) === 'string' ? taskId : taskId.id\"\n          :class=\"{\n            selected: currentTask && currentTask.id === taskId,\n            'datatable-row': true,\n            'datatable-row--selectable': true\n          }\"\n          @click=\"selectTask(getTask(taskId))\"\n          v-for=\"taskId in sortedEntries\"\n        >\n          <task-type-cell\n            class=\"type\"\n            :task-type=\"getTaskType(taskId)\"\n            :production-id=\"currentProduction.id\"\n            v-if=\"getTaskType(taskId)\"\n          />\n          <td class=\"status\">\n            <validation-tag\n              :task=\"getTask(taskId)\"\n              :is-static=\"true\"\n              v-if=\"getTask(taskId)\"\n            />\n          </td>\n          <td class=\"estimation\">\n            {{ getTaskEstimation(taskId) }}\n          </td>\n          <td class=\"duedate\">\n            {{ getTaskDueDate(taskId) }}\n          </td>\n          <td class=\"assignees\">\n            <div\n              class=\"flexrow\"\n              v-if=\"!isCurrentUserClient && !isCurrentUserVendor\"\n            >\n              <div\n                class=\"avatar-wrapper\"\n                :key=\"personId\"\n                v-for=\"personId in getAssignees(taskId)\"\n              >\n                <people-avatar\n                  class=\"person-avatar flexrow-item\"\n                  :key=\"taskId + '-' + personId\"\n                  :person=\"personMap.get(personId)\"\n                  :size=\"30\"\n                  :font-size=\"15\"\n                />\n              </div>\n            </div>\n          </td>\n          <td class=\"end-cell\"></td>\n       </tr>\n      </tbody>\n    </table>\n  </div>\n\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { formatListMixin } from '@/components/mixins/format'\n\nimport TaskTypeCell from '../cells/TaskTypeName'\nimport TableInfo from '../widgets/TableInfo'\nimport ValidationTag from '../widgets/ValidationTag'\nimport PeopleAvatar from '../widgets/PeopleAvatar'\n\nexport default {\n  name: 'entity-task-list',\n  mixins: [formatListMixin],\n\n  components: {\n    TableInfo,\n    TaskTypeCell,\n    PeopleAvatar,\n    ValidationTag\n  },\n\n  props: {\n    entries: {\n      type: Array,\n      default: () => []\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data () {\n    return {\n      currentTask: null\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction',\n      'isCurrentUserClient',\n      'isCurrentUserVendor',\n      'personMap',\n      'taskMap',\n      'taskTypeMap'\n    ]),\n\n    sortedEntries () {\n      return [...this.entries].sort((taskIdA, taskIdB) => {\n        const taskA = this.getTask(taskIdA)\n        const taskB = this.getTask(taskIdB)\n        const taskTypeA =\n          this.getTask(this.taskTypeMap.get(taskA.task_type_id))\n        const taskTypeB =\n          this.getTask(this.taskTypeMap.get(taskB.task_type_id))\n        if (taskTypeA.priority === taskTypeB.priority) {\n          return this.taskTypeA.localeCompare(this.taskTypeB.name)\n        } else {\n          return taskTypeA.priority - taskTypeB.priority\n        }\n      })\n    }\n  },\n\n  methods: {\n    ...mapActions([\n    ]),\n\n    onBodyScroll (event, position) {\n      this.$refs.headerWrapper.style.left = `-${position.scrollLeft}px`\n    },\n\n    getTask (task) {\n      if (typeof (task) === 'string') {\n        return this.taskMap.get(task)\n      } else {\n        return task\n      }\n    },\n\n    getTaskDueDate (taskId) {\n      const task = this.getTask(taskId)\n      return task && task.due_date\n        ? task.due_date.substring(0, 10)\n        : ''\n    },\n\n    getTaskEstimation (taskId) {\n      const task = this.getTask(taskId)\n      return task && task.estimation\n        ? this.formatDuration(task.estimation)\n        : ''\n    },\n\n    getTaskType (entry) {\n      const task = this.getTask(entry)\n      return task ? this.taskTypeMap.get(task.task_type_id) : null\n    },\n\n    getAssignees (entry) {\n      const task = this.getTask(entry)\n      return task ? task.assignees : []\n    },\n\n    selectTask (task) {\n      this.currentTask = task\n      this.$emit('task-selected', task)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.data-list {\n  max-width: 500px;\n  margin-top: 0;\n}\n\n.type {\n  max-width: 250px;\n  min-width: 250px;\n}\n\n.estimation {\n  max-width: 50px;\n  min-width: 50px;\n}\n\n.duedate {\n  max-width: 100px;\n  min-width: 100px;\n}\n\n.status {\n  max-width: 100px;\n  min-width: 100px;\n}\n\n.assignees {\n  max-width: 150px;\n  min-width: 150px;\n}\n\n.end-cell {\n  width: 100%;\n}\n\n.flexrow-item {\n  margin-right: 0.3em;\n}\n\n.avatar-wrapper {\n  margin-right: 0.5em;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityTaskList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityTaskList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EntityTaskList.vue?vue&type=template&id=0c076d44&scoped=true&\"\nimport script from \"./EntityTaskList.vue?vue&type=script&lang=js&\"\nexport * from \"./EntityTaskList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EntityTaskList.vue?vue&type=style&index=0&id=0c076d44&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c076d44\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EntityTaskList.vue?vue&type=style&index=0&id=0c076d44&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shot.vue?vue&type=style&index=0&id=69b2e6b3&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns fixed-page shot\"},[_c('div',{staticClass:\"column main-column\"},[_c('div',{staticClass:\"page-header flexrow\"},[_c('router-link',{staticClass:\"flexrow-item has-text-centered back-link\",attrs:{\"to\":_vm.getShotsRoute}},[_c('chevron-left-icon')],1),(_vm.currentShot)?_c('entity-thumbnail',{staticClass:\"shot-thumbnail flexrow-item\",attrs:{\"entity\":_vm.currentShot,\"with-link\":false}}):_vm._e(),_c('div',{staticClass:\"flexrow-item\"},[_c('page-title',{staticClass:\"entity-title\",attrs:{\"text\":_vm.title}})],1),_c('div',{staticClass:\"flexrow-item\"},[(_vm.isCurrentUserManager)?_c('button-simple',{attrs:{\"icon\":\"edit\"},on:{\"click\":function($event){_vm.modals.edit = true}}}):_vm._e()],1)],1),_c('div',{staticClass:\"flexrow infos\"},[_c('div',{staticClass:\"flexrow-item\"},[_c('page-subtitle',{attrs:{\"text\":_vm.$t('shots.tasks')}}),_c('entity-task-list',{staticClass:\"task-list\",attrs:{\"entries\":_vm.currentTasks,\"is-loading\":!_vm.currentShot,\"is-error\":false},on:{\"task-selected\":_vm.onTaskSelected}})],1),_c('div',{staticClass:\"flexrow-item\"},[_c('page-subtitle',{attrs:{\"text\":_vm.$t('main.info')}}),_c('div',{staticClass:\"table-body\"},[(_vm.currentShot)?_c('table',{staticClass:\"datatable\"},[_c('tbody',{staticClass:\"datatable-body\"},[(_vm.currentShot.data && _vm.currentShot.data.fps)?_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('shots.fields.fps')))]),_c('td',[_vm._v(\" \"+_vm._s(_vm.currentShot ? _vm.currentShot.data.fps : '')+\" \")])]):_vm._e(),(_vm.currentShot.data && _vm.currentShot.data.frame_in)?_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('shots.fields.frame_in')))]),_c('td',[_vm._v(\" \"+_vm._s(_vm.currentShot ? _vm.currentShot.data.frame_in : '')+\" \")])]):_vm._e(),(_vm.currentShot.data && _vm.currentShot.data.frame_out)?_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('shots.fields.frame_out')))]),_c('td',[_vm._v(\" \"+_vm._s(_vm.currentShot ? _vm.currentShot.data.frame_out : '')+\" \")])]):_vm._e(),_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('shots.fields.description')))]),_c('description-cell',{attrs:{\"entry\":_vm.currentShot,\"full\":true}})],1),_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('shots.fields.nb_frames')))]),_c('td',[_vm._v(\" \"+_vm._s(_vm.currentShot ? _vm.currentShot.nb_frames : '')+\" \")])]),_vm._l((_vm.shotMetadataDescriptors),function(descriptor){return _c('tr',{key:descriptor.id,staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(descriptor.name))]),_c('td',[_vm._v(\" \"+_vm._s(_vm.currentShot.data ? _vm.currentShot.data[descriptor.field_name] : '')+\" \")])])})],2)]):_vm._e()])],1)]),_c('div',{staticClass:\"shot-casting\"},[_c('page-subtitle',{attrs:{\"text\":_vm.$t('shots.casting')}}),(_vm.currentShot)?_c('div',[(_vm.currentShot.castingAssetsByType && _vm.currentShot.castingAssetsByType[0].length > 0)?_c('div',_vm._l((_vm.currentShot.castingAssetsByType),function(typeAssets){return _c('div',{key:typeAssets.length > 0 ? typeAssets[0].asset_type_name : '',staticClass:\"type-assets\"},[_c('div',{staticClass:\"asset-type\"},[_vm._v(\" \"+_vm._s(typeAssets.length > 0 ? typeAssets[0].asset_type_name : '')+\" (\"+_vm._s(typeAssets.length)+\") \")]),_c('div',{staticClass:\"asset-list\"},_vm._l((typeAssets),function(asset){return _c('router-link',{key:asset.id,staticClass:\"asset-link\",attrs:{\"to\":_vm.buildAssetRoute(asset)}},[_c('entity-thumbnail',{attrs:{\"entity\":asset,\"square\":true,\"empty-width\":103,\"empty-height\":103,\"with-link\":false}}),_c('div',[_c('span',[_vm._v(_vm._s(asset.asset_name))]),(asset.nb_occurences > 1)?_c('span',[_vm._v(\" (\"+_vm._s(asset.nb_occurences)+\") \")]):_vm._e()])],1)}),1)])}),0):_c('div',[_vm._v(\" \"+_vm._s(_vm.$t('shots.no_casting'))+\" \")])]):_c('table-info',{attrs:{\"is-loading\":_vm.casting.isLoading,\"is-error\":_vm.casting.isError}})],1)]),(_vm.currentTask)?_c('div',{staticClass:\"column side-column\"},[_c('task-info',{attrs:{\"task\":_vm.currentTask}})],1):_vm._e(),_c('edit-shot-modal',{ref:\"edit-shot-modal\",attrs:{\"active\":_vm.modals.edit,\"is-loading\":_vm.loading.edit,\"is-error\":_vm.errors.edit,\"shot-to-edit\":_vm.currentShot},on:{\"cancel\":function($event){_vm.modals.edit = false},\"confirm\":_vm.confirmEditShot}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"columns fixed-page shot\">\n  <div class=\"column main-column\">\n    <div class=\"page-header flexrow\">\n      <router-link\n        class=\"flexrow-item has-text-centered back-link\"\n        :to=\"getShotsRoute\"\n      >\n        <chevron-left-icon />\n      </router-link>\n      <entity-thumbnail\n        class=\"shot-thumbnail flexrow-item\"\n        :entity=\"currentShot\"\n        :with-link=\"false\"\n        v-if=\"currentShot\"\n      />\n      <div class=\"flexrow-item\">\n        <page-title :text=\"title\" class=\"entity-title\" />\n      </div>\n      <div class=\"flexrow-item\">\n        <button-simple\n          icon=\"edit\"\n          @click=\"modals.edit = true\"\n          v-if=\"isCurrentUserManager\"\n        />\n      </div>\n    </div>\n\n    <div class=\"flexrow infos\">\n      <div class=\"flexrow-item\">\n      <page-subtitle :text=\"$t('shots.tasks')\" />\n      <entity-task-list\n        class=\"task-list\"\n        :entries=\"currentTasks\"\n        :is-loading=\"!currentShot\"\n        :is-error=\"false\"\n        @task-selected=\"onTaskSelected\"\n      />\n      </div>\n      <div class=\"flexrow-item\">\n        <page-subtitle :text=\"$t('main.info')\" />\n        <div class=\"table-body\">\n          <table class=\"datatable\" v-if=\"currentShot\">\n            <tbody class=\"datatable-body\">\n              <tr\n                class=\"datatable-row\"\n                v-if=\"currentShot.data && currentShot.data.fps\"\n              >\n                <td class=\"field-label\">{{ $t('shots.fields.fps') }}</td>\n                <td>\n                  {{ currentShot ? currentShot.data.fps : '' }}\n                </td>\n              </tr>\n\n              <tr\n                class=\"datatable-row\"\n                v-if=\"currentShot.data && currentShot.data.frame_in\"\n              >\n                <td class=\"field-label\">{{ $t('shots.fields.frame_in') }}</td>\n                <td>\n                  {{ currentShot ? currentShot.data.frame_in : '' }}\n                </td>\n              </tr>\n\n              <tr\n                class=\"datatable-row\"\n                v-if=\"currentShot.data && currentShot.data.frame_out\"\n              >\n                <td class=\"field-label\">{{ $t('shots.fields.frame_out') }}</td>\n                <td>\n                  {{ currentShot ? currentShot.data.frame_out : '' }}\n                </td>\n              </tr>\n\n              <tr\n                class=\"datatable-row\"\n              >\n                <td class=\"field-label\">{{ $t('shots.fields.description') }}</td>\n                <description-cell\n                  :entry=\"currentShot\"\n                  :full=\"true\"\n                />\n              </tr>\n\n              <tr\n                class=\"datatable-row\"\n              >\n                <td class=\"field-label\">{{ $t('shots.fields.nb_frames') }}</td>\n                <td>\n                  {{ currentShot ? currentShot.nb_frames : '' }}\n                </td>\n              </tr>\n\n              <tr\n                :key=\"descriptor.id\"\n                class=\"datatable-row\"\n                v-for=\"descriptor in shotMetadataDescriptors\"\n              >\n                <td class=\"field-label\">{{ descriptor.name }}</td>\n                <td>\n                  {{ currentShot.data ? currentShot.data[descriptor.field_name] : '' }}\n                </td>\n              </tr>\n\n            </tbody>\n        </table>\n      </div>\n      </div>\n    </div>\n\n    <div class=\"shot-casting\">\n      <page-subtitle :text=\"$t('shots.casting')\" />\n      <div v-if=\"currentShot\">\n        <div\n            v-if=\"currentShot.castingAssetsByType && currentShot.castingAssetsByType[0].length > 0\"\n        >\n          <div\n            class=\"type-assets\"\n            :key=\"typeAssets.length > 0 ? typeAssets[0].asset_type_name : ''\"\n            v-for=\"typeAssets in currentShot.castingAssetsByType\"\n          >\n            <div class=\"asset-type\">\n              {{ typeAssets.length > 0 ? typeAssets[0].asset_type_name : '' }}\n              ({{ typeAssets.length }})\n            </div>\n            <div class=\"asset-list\">\n              <router-link\n                class=\"asset-link\"\n                :key=\"asset.id\"\n                :to=\"buildAssetRoute(asset)\"\n                v-for=\"asset in typeAssets\"\n              >\n                <entity-thumbnail\n                  :entity=\"asset\"\n                  :square=\"true\"\n                  :empty-width=\"103\"\n                  :empty-height=\"103\"\n                  :with-link=\"false\"\n                />\n                <div>\n                  <span>{{ asset.asset_name }}</span>\n                  <span v-if=\"asset.nb_occurences > 1\">\n                    ({{ asset.nb_occurences }})\n                  </span>\n                </div>\n              </router-link>\n            </div>\n          </div>\n        </div>\n        <div v-else>\n          {{ $t('shots.no_casting') }}\n        </div>\n      </div>\n      <table-info\n        :is-loading=\"casting.isLoading\"\n        :is-error=\"casting.isError\"\n        v-else\n      />\n    </div>\n  </div>\n\n  <div\n    class=\"column side-column\"\n    v-if=\"currentTask\"\n  >\n    <task-info\n      :task=\"currentTask\"\n    />\n  </div>\n\n  <edit-shot-modal\n    ref=\"edit-shot-modal\"\n    :active=\"modals.edit\"\n    :is-loading=\"loading.edit\"\n    :is-error=\"errors.edit\"\n    :shot-to-edit=\"currentShot\"\n    @cancel=\"modals.edit = false\"\n    @confirm=\"confirmEditShot\"\n  />\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { ChevronLeftIcon } from 'vue-feather-icons'\n\nimport { episodifyRoute } from '@/lib/path'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple'\nimport DescriptionCell from '@/components/cells/DescriptionCell'\nimport EditShotModal from '@/components/modals/EditShotModal'\nimport EntityThumbnail from '@/components/widgets/EntityThumbnail'\nimport EntityTaskList from '@/components/lists/EntityTaskList'\nimport PageTitle from '@/components/widgets/PageTitle'\nimport PageSubtitle from '@/components/widgets/PageSubtitle'\nimport TableInfo from '@/components/widgets/TableInfo'\nimport TaskInfo from '@/components/sides/TaskInfo'\n\nexport default {\n  name: 'shot',\n  components: {\n    ButtonSimple,\n    ChevronLeftIcon,\n    DescriptionCell,\n    EditShotModal,\n    EntityThumbnail,\n    EntityTaskList,\n    PageSubtitle,\n    PageTitle,\n    TableInfo,\n    TaskInfo\n  },\n\n  data () {\n    return {\n      currentShot: null,\n      currentTask: null,\n      casting: {\n        isLoading: false,\n        isError: false\n      },\n      errors: {\n        edit: false\n      },\n      loading: {\n        edit: false\n      },\n      modals: {\n        edit: false\n      }\n    }\n  },\n\n  mounted () {\n    this.clearSelectedTasks()\n    this.currentShot = this.getCurrentShot()\n\n    this.casting.isLoading = true\n    this.casting.isError = false\n\n    if (this.currentShot) {\n      this.loadShotCasting(this.currentShot)\n        .then(() => {\n          this.casting.isLoading = false\n        })\n        .catch((err) => {\n          this.casting.isError = true\n          console.error(err)\n        })\n    } else {\n      this.resetData()\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'isCurrentUserManager',\n      'isTVShow',\n      'route',\n      'shotMap',\n      'shotMetadataDescriptors',\n      'shotsPath'\n    ]),\n\n    currentTasks () {\n      return this.currentShot ? this.currentShot.tasks : []\n    },\n\n    title () {\n      if (this.currentShot) {\n        if (this.currentShot.episode_name) {\n          return `${this.currentShot.episode_name} / ` +\n                 `${this.currentShot.sequence_name} / ` +\n                 `${this.currentShot.name}`\n        } else {\n          return `${this.currentShot.sequence_name} / ` +\n                 `${this.currentShot.name}`\n        }\n      } else {\n        return 'Loading...'\n      }\n    },\n\n    shotThumbnailPath () {\n      const previewId = this.currentShot.preview_file_id\n      return `/api/pictures/originals/preview-files/${previewId}.png`\n    },\n\n    isPreview () {\n      return this.currentShot &&\n        this.currentShot.preview_file_id &&\n        this.currentShot.preview_file_id.length > 0\n    },\n\n    getShotsRoute () {\n      const route = {\n        name: 'shots',\n        params: {\n          production_id: this.currentProduction.id\n        },\n        query: {\n          search: ''\n        }\n      }\n      if (this.currentEpisode) {\n        route.name = 'episode-shots'\n        route.params.episode_id = this.currentEpisode.id\n      }\n      return route\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'clearSelectedTasks',\n      'editShot',\n      'loadAssets',\n      'loadShots',\n      'loadShotCasting'\n    ]),\n\n    changeTab (tab) {\n      this.selectedTab = tab\n    },\n\n    getCurrentShot () {\n      return this.shotMap.get(this.route.params.shot_id) || null\n    },\n\n    onEditClicked () {\n      this.modals.edit = true\n    },\n\n    confirmEditShot (form) {\n      form.id = this.currentShot.id\n      this.loading.edit = true\n      this.errors.edit = false\n      this.editShot(form)\n        .then(() => {\n          this.loading.edit = false\n          this.modals.edit = false\n        })\n        .catch((err) => {\n          console.error(err)\n          this.loading.edit = false\n          this.errors.edit = true\n        })\n    },\n\n    onTaskSelected (task) {\n      this.currentTask = task\n    },\n\n    buildAssetRoute (asset) {\n      let episodeId = asset.episode_id\n      if (this.isTVShow && !episodeId) episodeId = 'main'\n      const route = {\n        name: 'asset',\n        params: {\n          production_id: this.currentProduction.id,\n          asset_id: asset.asset_id\n        }\n      }\n      return episodifyRoute(route, episodeId)\n    },\n\n    resetData () {\n      this.$nextTick(() => {\n        this.loadShots(() => {\n          this.loadAssets()\n            .then(() => {\n              this.currentShot = this.getCurrentShot()\n              return this.loadShotCasting(this.currentShot)\n                .then(() => {\n                  this.casting.isLoading = false\n                })\n                .catch((err) => {\n                  console.error(err)\n                  this.casting.isError = true\n                })\n            })\n        })\n      })\n    }\n  },\n\n  watch: { // Needed when reloading the page with F5\n    currentProduction () {\n      if (!this.isTVShow) this.resetData()\n    },\n\n    currentEpisode () {\n      if (this.isTVShow && this.shotMap.size === 0) {\n        this.resetData()\n      }\n    }\n  },\n\n  metaInfo () {\n    return {\n      title: `${this.title} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .page {\n  background: $dark-grey-light;\n  height: 100%;\n  padding-bottom: 1em;\n}\n\n.dark .page-header,\n.dark .shot-casting,\n.dark .infos {\n  background: #46494F;\n  border-color: $dark-grey;\n  box-shadow: 0px 0px 6px #333;\n}\n\nh2.subtitle {\n  margin-top: 0;\n  margin-bottom: 0.5em;\n  font-weight: 300;\n  font-size: 1.5em;\n}\n\n.page {\n  background: #F9F9F9;\n  padding: 0em;\n}\n\n.page-header {\n  padding: 1em 1em 1em 1em;\n  background: white;\n  box-shadow: 0px 0px 6px #E0E0E0;\n  margin-top: calc(50px + 2em);\n  margin-bottom: 2em;\n  margin-left: 1em;\n  margin-right: 1em;\n}\n\n.infos {\n  background: white;\n  padding: 1em 1em 1em 1em;\n  box-shadow: 0px 0px 6px #E0E0E0;\n  margin-bottom: 1em;\n  margin-left: 1em;\n  margin-right: 1em;\n\n  .flexrow-item {\n    align-self: flex-start;\n    flex: 1;\n  }\n}\n\n.shot-casting {\n  margin-left: 1em;\n  margin-right: 1em;\n  background: white;\n  padding: 1em;\n  box-shadow: 0px 0px 6px #E0E0E0;\n}\n\n.shot-thumbnail {\n  max-width: 100px;\n}\n\n.asset-link .thumbnail-picture {\n  margin-bottom: 0.5em;\n}\n\n.asset-type {\n  text-transform: uppercase;\n  font-size: 1.2em;\n  color: var(--text);\n  margin-top: 2em;\n  margin-bottom: 0.4em;\n}\n\n.asset-list {\n  color: var(--text);\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.asset-link {\n  color: inherit;\n  margin-right: 1em;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 0.8em;\n}\n\n.asset-link div {\n  max-width: 100px;\n}\n\n.asset-link span {\n  word-wrap: break-word;\n}\n\n.field-label {\n  font-weight: bold;\n  width: 140px;\n}\n\n.page-header {\n  align-items: center;\n}\n\n.data-list {\n  max-width: 100%;\n}\n\n.page-header .thumbnail-picture {\n  margin: 0 1em 0 0;\n  max-width: 80px;\n}\n\n.back-link {\n  padding-top: 3px;\n}\n\n.task-list {\n  width: 100%;\n}\n\n.datatable-row {\n  user-select: text;\n}\n\n@media screen and (max-width: 768px) {\n  .task-column {\n    margin-bottom: 1em;\n  }\n\n  .column:first-child {\n    margin-right: 0;\n  }\n\n  .entity-title {\n    font-size: 1.3em;\n    line-height: 1.5em;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Shot.vue?vue&type=template&id=69b2e6b3&scoped=true&\"\nimport script from \"./Shot.vue?vue&type=script&lang=js&\"\nexport * from \"./Shot.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Shot.vue?vue&type=style&index=0&id=69b2e6b3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69b2e6b3\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}