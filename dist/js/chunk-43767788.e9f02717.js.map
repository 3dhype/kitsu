{"version":3,"sources":["webpack:///./src/components/pages/Person.vue?8743","webpack:///./src/components/pages/Person.vue?9a14","webpack:///src/components/pages/Person.vue","webpack:///./src/components/pages/Person.vue?36c6","webpack:///./src/components/pages/Person.vue?e40d"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Person_vue_vue_type_style_index_0_id_6f40d7ae_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Person_vue_vue_type_style_index_0_id_6f40d7ae_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","person","size","font-size","is-text","_e","text","name","class","is-active","isActiveTab","to","params","person_id","id","_v","_s","$t","on","click","$event","selectTab","tab","displayedPersonDoneTasks","length","ref","search-field","flexrow-item","can-save","change","onSearchChange","save","saveSearchQuery","queries","personTaskSearchQueries","changesearch","changeSearch","removesearch","removeSearchQuery","entries","displayedPersonTasks","is-loading","isTasksLoading","is-error","isTasksLoadingError","selection-grid","personTaskSelectionGrid","scroll","setPersonTasksScrollPosition","done","selectionGrid","tasks","loggablePersonTasks","done-tasks","loggableDoneTasks","time-spent-map","personTimeSpentMap","time-spent-total","personTimeSpentTotal","hide-done","personTasksSearchText","date-changed","onDateChanged","time-spent-change","onTimeSpentChange","nbSelectedTasks","task","Object","values","selectedTasks","staticRenderFns","Personvue_type_script_lang_js_","components","PageTitle","PeopleAvatar","SearchField","SearchQueryList","TaskInfo","TodosList","TimesheetList","data","activeTab","selectedDate","moment_timezone_default","format","mounted","_this","updateActiveTab","searchField","setValue","setTimeout","focus","loadPerson","$route","computed","objectSpread","vuex_esm","_this2","filter","taskTypeMap","task_type_id","allow_timelog","_this3","$refs","taskList","haveDoneList","methods","_this4","setPersonTasksSearch","personId","_this5","personMap","loadPersonTasks","date","callback","err","console","log","$nextTick","setScrollPosition","personTasksScrollPosition","resizeHeaders","_this6","selectCurrent","_this7","selectDone","searchQuery","search_query","$emit","savePersonTasksSearch","then","catch","removePersonTasksSearch","includes","timeSpentInfo","setTimeSpent","metaInfo","title","concat","watch","pages_Personvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-43767788.e9f02717.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Person.vue?vue&type=style&index=0&id=6f40d7ae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Person.vue?vue&type=style&index=0&id=6f40d7ae&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns fixed-page\"},[_c('div',{staticClass:\"column main-column\"},[_c('div',{staticClass:\"person page\"},[_c('div',{staticClass:\"flexrow page-header\"},[(_vm.person)?_c('div',{staticClass:\"flexrow-item\"},[_c('people-avatar',{attrs:{\"person\":_vm.person,\"size\":80,\"font-size\":30,\"is-text\":false}})],1):_vm._e(),_c('div',{staticClass:\"flexrow-item\"},[_c('page-title',{attrs:{\"text\":_vm.person ? _vm.person.name : ''}})],1)]),_c('div',{staticClass:\"task-tabs tabs\"},[(_vm.person)?_c('ul',[_c('li',{class:{'is-active': _vm.isActiveTab('todos')}},[_c('router-link',{attrs:{\"to\":{\n              name: 'person',\n              params: {\n                person_id: _vm.person.id\n              }\n            }}},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('tasks.current'))+\"\\n            \")])],1),_c('li',{class:{'is-active': _vm.isActiveTab('done')},on:{\"click\":function($event){return _vm.selectTab('done')}}},[_c('router-link',{attrs:{\"to\":{\n              name: 'person-tab',\n              params: {\n                tab: 'done',\n                person_id: _vm.person.id\n              }\n            }}},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('tasks.done'))+\" (\"+_vm._s(_vm.displayedPersonDoneTasks.length)+\")\\n            \")])],1),(_vm.isCurrentUserManager)?_c('li',{class:{'is-active': _vm.isActiveTab('timesheets')},on:{\"click\":function($event){return _vm.selectTab('timesheets')}}},[_c('router-link',{attrs:{\"to\":{\n              name: 'person-tab',\n              params: {\n                tab: 'timesheets',\n                person_id: _vm.person.id\n              }\n            }}},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('timesheets.title'))+\"\\n            \")])],1):_vm._e()]):_vm._e()]),_c('div',{staticClass:\"flexrow\"},[(!_vm.isActiveTab('done'))?_c('search-field',{ref:\"person-tasks-search-field\",class:{\n            'search-field': true,\n            'flexrow-item': true\n          },attrs:{\"can-save\":true},on:{\"change\":_vm.onSearchChange,\"save\":_vm.saveSearchQuery}}):_vm._e()],1),(_vm.isActiveTab('todos') || _vm.isActiveTab('timesheets'))?_c('div',{staticClass:\"query-list\"},[_c('search-query-list',{attrs:{\"queries\":_vm.personTaskSearchQueries},on:{\"changesearch\":_vm.changeSearch,\"removesearch\":_vm.removeSearchQuery}})],1):_vm._e(),(_vm.isActiveTab('todos'))?_c('todos-list',{ref:\"task-list\",attrs:{\"entries\":_vm.displayedPersonTasks,\"is-loading\":_vm.isTasksLoading,\"is-error\":_vm.isTasksLoadingError,\"selection-grid\":_vm.personTaskSelectionGrid},on:{\"scroll\":_vm.setPersonTasksScrollPosition}}):_vm._e(),(_vm.isActiveTab('done'))?_c('todos-list',{ref:\"done-list\",attrs:{\"entries\":_vm.displayedPersonDoneTasks,\"is-loading\":_vm.isTasksLoading,\"is-error\":_vm.isTasksLoadingError,\"done\":true,\"selectionGrid\":_vm.personTaskSelectionGrid}}):_vm._e(),(_vm.isActiveTab('timesheets'))?_c('timesheet-list',{attrs:{\"tasks\":_vm.loggablePersonTasks,\"done-tasks\":_vm.loggableDoneTasks,\"is-loading\":_vm.isTasksLoading,\"is-error\":_vm.isTasksLoadingError,\"time-spent-map\":_vm.personTimeSpentMap,\"time-spent-total\":_vm.personTimeSpentTotal,\"hide-done\":_vm.personTasksSearchText.length > 0},on:{\"date-changed\":_vm.onDateChanged,\"time-spent-change\":_vm.onTimeSpentChange}}):_vm._e()],1)]),(_vm.nbSelectedTasks === 1)?_c('div',{staticClass:\"column side-column\"},[_c('task-info',{attrs:{\"task\":Object.values(_vm.selectedTasks)[0]}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"columns fixed-page\">\n  <div class=\"column main-column\">\n    <div class=\"person page\">\n\n      <div class=\"flexrow page-header\">\n        <div class=\"flexrow-item\" v-if=\"person\">\n          <people-avatar\n            :person=\"person\"\n            :size=\"80\"\n            :font-size=\"30\"\n            :is-text=\"false\"\n          />\n        </div>\n        <div class=\"flexrow-item\">\n          <page-title :text=\"person ? person.name : ''\" />\n        </div>\n      </div>\n\n      <div class=\"task-tabs tabs\">\n        <ul v-if=\"person\">\n          <li\n            :class=\"{'is-active': isActiveTab('todos')}\"\n          >\n            <router-link :to=\"{\n              name: 'person',\n              params: {\n                person_id: person.id\n              }\n            }\">\n              {{ $t('tasks.current')}}\n            </router-link>\n          </li>\n          <li\n            :class=\"{'is-active': isActiveTab('done')}\"\n            @click=\"selectTab('done')\"\n          >\n            <router-link :to=\"{\n              name: 'person-tab',\n              params: {\n                tab: 'done',\n                person_id: person.id\n              }\n            }\">\n              {{ $t('tasks.done') }} ({{ displayedPersonDoneTasks.length }})\n            </router-link>\n          </li>\n          <li\n            :class=\"{'is-active': isActiveTab('timesheets')}\"\n            @click=\"selectTab('timesheets')\"\n            v-if=\"isCurrentUserManager\"\n          >\n            <router-link :to=\"{\n              name: 'person-tab',\n              params: {\n                tab: 'timesheets',\n                person_id: person.id\n              }\n            }\">\n              {{ $t('timesheets.title') }}\n            </router-link>\n          </li>\n        </ul>\n      </div>\n\n      <div class=\"flexrow\">\n        <search-field\n          :class=\"{\n            'search-field': true,\n            'flexrow-item': true\n          }\"\n          ref=\"person-tasks-search-field\"\n          @change=\"onSearchChange\"\n          @save=\"saveSearchQuery\"\n          :can-save=\"true\"\n          v-if=\"!isActiveTab('done')\"\n        />\n      </div>\n\n      <div\n        class=\"query-list\"\n        v-if=\"isActiveTab('todos') || isActiveTab('timesheets')\"\n      >\n        <search-query-list\n          :queries=\"personTaskSearchQueries\"\n          @changesearch=\"changeSearch\"\n          @removesearch=\"removeSearchQuery\"\n        />\n      </div>\n\n      <todos-list\n        ref=\"task-list\"\n        :entries=\"displayedPersonTasks\"\n        :is-loading=\"isTasksLoading\"\n        :is-error=\"isTasksLoadingError\"\n        :selection-grid=\"personTaskSelectionGrid\"\n        @scroll=\"setPersonTasksScrollPosition\"\n        v-if=\"isActiveTab('todos')\"\n      />\n\n      <todos-list\n        ref=\"done-list\"\n        :entries=\"displayedPersonDoneTasks\"\n        :is-loading=\"isTasksLoading\"\n        :is-error=\"isTasksLoadingError\"\n        :done=\"true\"\n        :selectionGrid=\"personTaskSelectionGrid\"\n        v-if=\"isActiveTab('done')\"\n      />\n\n      <timesheet-list\n        :tasks=\"loggablePersonTasks\"\n        :done-tasks=\"loggableDoneTasks\"\n        :is-loading=\"isTasksLoading\"\n        :is-error=\"isTasksLoadingError\"\n        :time-spent-map=\"personTimeSpentMap\"\n        :time-spent-total=\"personTimeSpentTotal\"\n        :hide-done=\"personTasksSearchText.length > 0\"\n        @date-changed=\"onDateChanged\"\n        @time-spent-change=\"onTimeSpentChange\"\n        v-if=\"isActiveTab('timesheets')\"\n      />\n    </div>\n  </div>\n  <div\n    class=\"column side-column\"\n    v-if=\"nbSelectedTasks === 1\"\n  >\n    <task-info\n      :task=\"Object.values(selectedTasks)[0]\"\n    />\n  </div>\n</div>\n</template>\n\n<script>\nimport moment from 'moment-timezone'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport PageTitle from '../widgets/PageTitle'\nimport PeopleAvatar from '../widgets/PeopleAvatar'\nimport SearchField from '../widgets/SearchField'\nimport SearchQueryList from '../widgets/SearchQueryList'\nimport TimesheetList from '../lists/TimesheetList'\nimport TodosList from '../lists/TodosList'\nimport TaskInfo from '../sides/TaskInfo'\n\nexport default {\n  name: 'person',\n  components: {\n    PageTitle,\n    PeopleAvatar,\n    SearchField,\n    SearchQueryList,\n    TaskInfo,\n    TodosList,\n    TimesheetList\n  },\n\n  data () {\n    return {\n      activeTab: 'todos',\n      isTasksLoading: false,\n      isTasksLoadingError: false,\n      person: null,\n      selectedDate: moment().format('YYYY-MM-DD')\n    }\n  },\n\n  mounted () {\n    this.updateActiveTab()\n    if (this.personTasksSearchText.length > 0) {\n      this.searchField.setValue(this.personTasksSearchText)\n    }\n    setTimeout(() => {\n      if (this.searchField) this.searchField.focus()\n    }, 100)\n    this.loadPerson(this.$route.params.person_id)\n  },\n\n  computed: {\n    ...mapGetters([\n      'displayedPersonTasks',\n      'displayedPersonDoneTasks',\n      'isCurrentUserManager',\n      'nbSelectedTasks',\n      'personMap',\n      'personTasksScrollPosition',\n      'personTasksSearchText',\n      'personTaskSearchQueries',\n      'personTaskSelectionGrid',\n      'personTimeSpentMap',\n      'personTimeSpentTotal',\n      'selectedTasks',\n      'taskTypeMap'\n    ]),\n\n    loggablePersonTasks () {\n      return this.displayedPersonTasks\n        .filter((task) => {\n          return this.taskTypeMap[task.task_type_id].allow_timelog\n        })\n    },\n\n    loggableDoneTasks () {\n      return this.displayedPersonDoneTasks\n        .filter((task) => {\n          return this.taskTypeMap[task.task_type_id].allow_timelog\n        })\n    },\n\n    searchField () {\n      return this.$refs['person-tasks-search-field']\n    },\n\n    taskList () {\n      return this.$refs['task-list']\n    },\n\n    haveDoneList () {\n      return this.$refs['done-list']\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'loadPersonTasks',\n      'setPersonTasksSearch',\n      'savePersonTasksSearch',\n      'removePersonTasksSearch',\n      'setPersonTasksScrollPosition',\n      'setTimeSpent'\n    ]),\n\n    isActiveTab (tab) {\n      return this.activeTab === tab\n    },\n\n    selectTab (tab) {\n      this.activeTab = tab\n      if (this.isActiveTab('todos')) {\n        setTimeout(() => {\n          if (this.searchField) this.searchField.focus()\n        }, 100)\n      }\n    },\n\n    onSearchChange (text) {\n      this.setPersonTasksSearch(text)\n    },\n\n    loadPerson (personId) {\n      this.person = this.personMap[personId]\n      this.isTasksLoading = true\n      this.loadPersonTasks({\n        personId: this.person.id,\n        date: this.selectedDate,\n        callback: (err) => {\n          if (err) console.log(err)\n          this.isTasksLoading = false\n          this.isTasksLoadingError = false\n          setTimeout(() => {\n            if (this.taskList) {\n              this.$nextTick(() => {\n                this.taskList.setScrollPosition(\n                  this.personTasksScrollPosition\n                )\n              })\n            }\n            this.resizeHeaders()\n          }, 0)\n        }\n      })\n    },\n\n    resizeHeaders () {\n      this.$nextTick(() => {\n        if (this.taskList) this.taskList.resizeHeaders()\n        if (this.haveDoneList) this.haveDoneList.resizeHeaders()\n      })\n    },\n\n    selectCurrent () {\n      this.activeTab = 'current'\n      setTimeout(() => {\n        this.$refs['person-tasks-search-field'].focus()\n      }, 100)\n    },\n\n    selectDone () {\n      this.activeTab = 'done'\n    },\n\n    changeSearch (searchQuery) {\n      this.$refs['person-tasks-search-field'].setValue(searchQuery.search_query)\n      this.$refs['person-tasks-search-field'].$emit(\n        'change', searchQuery.search_query\n      )\n    },\n\n    saveSearchQuery (searchQuery) {\n      this.savePersonTasksSearch(searchQuery)\n        .then(() => {\n        })\n        .catch((err) => {\n          if (err) console.log(err)\n        })\n    },\n\n    removeSearchQuery (searchQuery) {\n      this.removePersonTasksSearch(searchQuery)\n        .then(() => {\n        })\n        .catch((err) => {\n          if (err) console.log(err)\n        })\n    },\n\n    updateActiveTab () {\n      if (['done', 'timesheets'].includes(this.$route.params.tab)) {\n        this.activeTab = this.$route.params.tab\n      } else {\n        this.activeTab = 'todos'\n      }\n    },\n\n    onTimeSpentChange (timeSpentInfo) {\n      timeSpentInfo.personId = this.person.id\n      timeSpentInfo.date = this.selectedDate\n      this.setTimeSpent(timeSpentInfo)\n    },\n\n    onDateChanged (date) {\n      this.selectedDate = moment(date).format('YYYY-MM-DD')\n      this.loadPerson(this.person.id)\n    }\n  },\n\n  metaInfo () {\n    return {\n      title: this.person ? `${this.person.name} - Kitsu` : '... - Kitsu'\n    }\n  },\n\n  watch: {\n    $route () {\n      const personId = this.$route.params.person_id\n\n      this.updateActiveTab()\n      if (this.person.id !== personId) this.loadPerson()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.name {\n  width: 230px;\n  min-width: 230px;\n}\n.email {\n  width: 210px;\n  min-width: 210px;\n}\n.phone {\n  width: 140px;\n  min-width: 140px;\n}\n.skills {\n  width: 250px;\n}\n\n.query-list {\n  margin-top: 1em;\n}\n\n.task-tabs {\n  margin-top: 2em;\n}\n\n.task-tabs ul {\n  margin: 0;\n}\n\n.data-list {\n  margin-top: 0;\n}\n\n.dark .main-column {\n  border-right: 3px solid $grey-strong;\n}\n\n.person {\n  display: flex;\n  flex-direction: column;\n}\n\n.columns {\n  display: flex;\n  flex-direction: row;\n  padding: 0;\n}\n\n.column {\n  overflow-y: auto;\n  padding: 0;\n}\n\n.main-column {\n  border-right: 3px solid $light-grey;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Person.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Person.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Person.vue?vue&type=template&id=6f40d7ae&scoped=true&\"\nimport script from \"./Person.vue?vue&type=script&lang=js&\"\nexport * from \"./Person.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Person.vue?vue&type=style&index=0&id=6f40d7ae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f40d7ae\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}