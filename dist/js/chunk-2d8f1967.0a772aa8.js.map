{"version":3,"sources":["webpack:///./src/components/pages/Playlist.vue?d263","webpack:///./src/components/modals/EditPlaylistModal.vue?d1a8","webpack:///./src/components/pages/playlists/PlaylistPlayer.vue?306c","webpack:///./src/components/widgets/LightEntityThumbnail.vue?e813","webpack:///./src/components/widgets/ComboboxStyled.vue?474c","webpack:///src/components/widgets/ComboboxStyled.vue","webpack:///./src/components/widgets/ComboboxStyled.vue?581e","webpack:///./src/components/widgets/ComboboxStyled.vue?1e79","webpack:///./src/components/pages/Playlist.vue?9de1","webpack:///./src/components/widgets/LightEntityThumbnail.vue?c5ab","webpack:///src/components/widgets/LightEntityThumbnail.vue","webpack:///./src/components/widgets/LightEntityThumbnail.vue?b617","webpack:///./src/components/widgets/LightEntityThumbnail.vue?2e5f","webpack:///./src/components/widgets/ErrorText.vue?5c4f","webpack:///src/components/widgets/ErrorText.vue","webpack:///./src/components/widgets/ErrorText.vue?f04f","webpack:///./src/components/widgets/ErrorText.vue","webpack:///./src/components/pages/playlists/PlaylistPlayer.vue?19fd","webpack:///./src/components/modals/EditPlaylistModal.vue?6701","webpack:///src/components/modals/EditPlaylistModal.vue","webpack:///./src/components/modals/EditPlaylistModal.vue?2d2c","webpack:///./src/components/modals/EditPlaylistModal.vue?725c","webpack:///./src/components/pages/playlists/PlaylistedShot.vue?fce0","webpack:///./src/components/widgets/LightCombobox.vue?8f7e","webpack:///src/components/widgets/LightCombobox.vue","webpack:///./src/components/widgets/LightCombobox.vue?e335","webpack:///./src/components/widgets/LightCombobox.vue?0c0f","webpack:///src/components/pages/playlists/PlaylistedShot.vue","webpack:///./src/components/pages/playlists/PlaylistedShot.vue?a15d","webpack:///./src/components/pages/playlists/PlaylistedShot.vue?aee1","webpack:///./src/components/pages/playlists/RawVideoPlayer.vue?b971","webpack:///src/components/pages/playlists/RawVideoPlayer.vue","webpack:///./src/components/pages/playlists/RawVideoPlayer.vue?9765","webpack:///./src/components/pages/playlists/RawVideoPlayer.vue?4fa7","webpack:///src/components/pages/playlists/PlaylistPlayer.vue","webpack:///./src/components/pages/playlists/PlaylistPlayer.vue?cdbe","webpack:///./src/components/pages/playlists/PlaylistPlayer.vue?a890","webpack:///src/components/pages/Playlist.vue","webpack:///./src/components/pages/Playlist.vue?2e53","webpack:///./src/components/pages/Playlist.vue?f8fd","webpack:///./src/components/widgets/LightCombobox.vue?ae5f","webpack:///./src/components/widgets/ComboboxStyled.vue?9ebf","webpack:///./src/components/pages/playlists/PlaylistedShot.vue?e5a7","webpack:///./src/components/pages/playlists/RawVideoPlayer.vue?ba13"],"names":["render","_vm","this","_h","$createElement","_c","_self","label","length","staticClass","_v","_s","_e","class","combo","open","showList","on","toggleList","selectedOption","ref","_l","option","key","id","$event","selectOption","button","openRoute","staticRenderFns","name","components","ChevronDownIcon","data","value","props","default","type","String","options","Array","mounted","computed","methods","$emit","window","url","watch","find","component","loading","addPlaylist","$t","playlists","playlist","for_client","selected","currentPlaylist","attrs","getPlaylistPath","formatDate","updated_at","errors","currentShots","onPreviewChanged","goFirstPlaylist","removeShot","onOrderChange","onAnnotationChanged","onForClientChanged","addWeekly","isAdditionLoading","addAllPending","addDaily","addDailyPending","episodes","isTVShow","sequenceOptions","model","callback","$$v","sequenceId","expression","addSequence","sequenceShots","shot","playlisted","undefined","preventDefault","addShotToPlaylist","preview_file_id","_b","directives","rawName","previewFileId","style","width","height","functional","Number","alignRight","hidden","text","Boolean","forClientOptions","forClient","showEditModal","showDeleteModal","nbCommentedShots","shotList","isCurrentUserClient","complete","Math","round","onShotChange","onTimeUpdate","onMaxDurationUpdate","shotListToCompare","isCommentsHidden","task","onProgressBarClicked","annotations","maxDurationRaw","loadAnnotation","isPlaying","onPlayClicked","currentTime","maxDuration","currentFrame","onPreviousFrameClicked","onNextFrameClicked","playingShotIndex","onPlayPreviousShotClicked","onPlayNextShotClicked","active","isComparing","onCompareClicked","taskTypeOptions","taskTypeToCompare","isDrawing","onAnnotateClicked","onDeleteClicked","onCommentClicked","onFilmClicked","staticStyle","isDlButtonsHidden","zipDlPath","onBuildClicked","build_jobs","job","getBuildPath","created_at","status","onRemoveBuildJob","toggleDlButtons","onFullscreenClicked","flexrow","isShotsHidden","index","refInFor","playShot","onShotDropped","modals","edit","editPlaylist","editError","hideEditModal","confirmEditPlaylist","delete","deletePlaylist","deleteText","confirmRemovePlaylist","hideDeleteModal","playlistToEdit","runConfirmation","form","$set","isLoading","mixins","TextField","setTimeout","onDragged","playing","onPlayClick","onRemoveClick","sequence_name","isCurrentUserManager","taskTypeId","previewFileOptions","onDropped","select","isTop","disabled","event","listeners","input","target","i","domProps","localeKeyPrefix","LightCombobox","LightEntityThumbnail","XIcon","Object","setCurrentParameters","setListeners","dropArea","$refs","previewFiles","map","getTaskTypeIdForPreviewFile","taskTypeIds","some","previewFile","addEventListener","onDragover","onDragleave","background","before","after","shotId","stopPropagation","isPreviewFile","playNext","shots","currentPlayer","player1","nextPlayer","player2","playingIndex","resetHeight","beforeDestroy","removeEventListener","container","fps","currentProduction","getMoviePath","getNextIndex","preview_file_extension","getPreviousIndex","clear","src","removeAttribute","load","goPreviousFrame","newTime","setCurrentTime","goNextFrame","duration","video","loadPreviousShot","loadShot","currentIndex","loadNextShot","nextShot","display","updateTime","pause","play","nextIndex","switchPlayers","updateMaxDuration","$nextTick","getCurrentTime","tmpPlayer","time","AnnotationBar","ButtonSimple","Combobox","ComboboxStyled","DeleteModal","EditPlaylistModal","PlaylistedShot","RawVideoPlayer","Spinner","TaskInfo","currentTimeRaw","fabricCanvas","values","updateProgressBar","onKeyDown","onWindowResize","$el","onmousemove","isFullScreenEnabled","canvas","rawPlayer","rawPlayerComparison","progress","progressBar","progressCursor","movie","timezone","user","filter","isCommentedByClient","date","format","formatTime","milliseconds","Date","seconds","console","log","err","getTimelinePosition","position","offsetWidth","displayBars","opacity","cursor","hideBars","floor","factor","left","x","top","progressCoordinates","y","updateTaskPanel","taskMap","preview_file_task_id","scrollToShot","shotEl","preview_file_annotations","shotWidget","isLeft","playlistEl","scrollLeft","scrollingRequired","scrollToRight","hideCanvas","clearCanvas","showCanvas","shotIndex","annotation","$options","silent","splice","setFullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen","setAttribute","exitFullScreen","document","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen","isFullScreen","pos","onPlayPauseClicked","includes","tagName","keyCode","deleteSelection","lastCall","now","onMouseMove","buttonBar","isMovieFullScreen","timer","clearTimeout","comparisonIndex","info","resetCanvas","resetCanvasSize","renderAll","setDimensions","rebuildComparisonOptions","forEach","rebuildShotListToCompare","preview","buildShotListToCompare","resetComparison","player","isDrawingMode","setupCanvas","fabric","freeDrawingBrush","color","saveAnnotations","scaleMultiplierX","scaleMultiplierY","drawing","objects","obj","fill","stroke","strokeWidth","radius","scaleX","scaleY","canvasWidth","strokeMultiplier","path","setControlsVisibility","mt","mb","ml","mr","bl","br","tl","tr","mtr","task_id","remove","getActiveObject","getAnnotation","runPlaylistBuild","playlist_id","removeBuildJob","toString","ErrorText","PageSubtitle","PlaylistPlayer","PlusIcon","currentShot","isDeleteDisplayed","isEditDisplayed","playlistLoading","section","params","production_id","playlistId","currentEpisode","route","episode_id","loadShotsData","sequences","loadShots","loadPlaylists","loadPlaylistsData","setFirstPlaylist","rebuildCurrentShots","tmpShots","addShotToCurrentShots","shot_id","entity_name","entityName","preview_files","playlistShotMap","playlistShot","clearCurrentPlaylist","resetPlaylist","setCurrentPlaylist","newPlaylist","loadPlaylist","$router","push","playlistsPath","clearAdditionColumn","setAdditionSequences","sequence","parent_id","setAdditionShots","shotMap","sequence_id","addShot","loadShotPreviewFiles","addShots","getPending","removeShotPreviewFromPlaylist","changePlaylistPreview","changePlaylistOrder","updatePreviewAnnotation","$route","$store","commit","metaInfo","title","socket","events","playlistMap","eventData","refreshPlaylist","build_job_id"],"mappings":"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","file":"js/chunk-2d8f1967.0a772aa8.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=style&index=0&id=6984aa8e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=style&index=0&id=6984aa8e&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPlaylistModal.vue?vue&type=style&index=0&id=7645d689&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPlaylistModal.vue?vue&type=style&index=0&id=7645d689&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistPlayer.vue?vue&type=style&index=0&id=257e3cae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistPlayer.vue?vue&type=style&index=0&id=257e3cae&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightEntityThumbnail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightEntityThumbnail.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.label.length > 0)?_c('label',{staticClass:\"label\"},[_vm._v(\"\\n    \"+_vm._s(_vm.label)+\"\\n  \")]):_vm._e(),_c('div',{class:{\n      combo: true,\n      open: _vm.showList\n    }},[_c('div',{staticClass:\"flexrow\",on:{\"click\":_vm.toggleList}},[_c('div',{staticClass:\"selected-line flexrow-item\"},[_vm._v(\"\\n        \"+_vm._s(_vm.selectedOption.label)+\"\\n      \")]),_c('chevron-down-icon',{staticClass:\"down-icon flexrow-item\"})],1),(_vm.showList)?_c('div',{ref:\"select\",staticClass:\"select-input\"},_vm._l((_vm.options),function(option){return _c('div',{key:option.id,staticClass:\"option-line\",on:{\"click\":function($event){return _vm.selectOption(option)},\"mouseup\":function($event){if('button' in $event && $event.button !== 1){ return null; }return _vm.openRoute(option)}}},[_vm._v(\"\\n        \"+_vm._s(option.label)+\"\\n      \")])}),0):_vm._e()]),_c('div',{class:{\n      'c-mask': true,\n      'is-active': _vm.showList\n    },on:{\"click\":_vm.toggleList}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <label class=\"label\" v-if=\"label.length > 0\">\n    {{ label }}\n  </label>\n  <div\n    :class=\"{\n      combo: true,\n      open: showList\n    }\"\n  >\n    <div\n      class=\"flexrow\"\n      @click=\"toggleList\"\n    >\n      <div\n        class=\"selected-line flexrow-item\"\n      >\n        {{ selectedOption.label }}\n      </div>\n      <chevron-down-icon class=\"down-icon flexrow-item\"/>\n    </div>\n    <div\n      class=\"select-input\"\n      ref=\"select\"\n      v-if=\"showList\"\n    >\n      <div\n        class=\"option-line\"\n        v-for=\"option in options\"\n        @click=\"selectOption(option)\"\n        @click.middle=\"openRoute(option)\"\n        :key=\"option.id\"\n      >\n        {{ option.label }}\n      </div>\n    </div>\n  </div>\n  <div\n    @click=\"toggleList\"\n    :class=\"{\n      'c-mask': true,\n      'is-active': showList\n    }\"\n  >\n  </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { ChevronDownIcon } from 'vue-feather-icons'\n\nexport default {\n  name: 'combobox-styled',\n\n  components: {\n    ChevronDownIcon\n  },\n\n  data () {\n    return {\n      selectedOption: {\n        label: '',\n        value: ''\n      },\n      showList: false\n    }\n  },\n\n  props: {\n    label: {\n      default: '',\n      type: String\n    },\n    options: {\n      default: () => [],\n      type: Array\n    },\n    value: {\n      default: '',\n      type: String\n    }\n  },\n\n  mounted () {\n    if (this.options.length > 0) {\n      this.selectedOption = this.options[0]\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'isDarkTheme'\n    ])\n  },\n\n  methods: {\n    selectOption (option) {\n      this.$emit('input', option.value)\n      this.selectedOption = option\n      this.showList = false\n    },\n\n    openRoute (option) {\n      const ahref = this.$router.resolve(option.route).href\n      const url =\n        `${window.location.protocol}//${window.location.host}${ahref}`\n      window.open(url, '_blank')\n    },\n\n    toggleList () {\n      this.showList = !this.showList\n    }\n  },\n\n  watch: {\n    options () {\n      if (this.options.length > 0) {\n        const option = this.options.find(o => o.value === this.value)\n        if (option) {\n          this.selectedOption = option\n        } else {\n          this.selectedOption = this.options[0]\n        }\n      }\n    },\n\n    value () {\n      this.selectedOption = this.options.find(o => o.value === this.value)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .select-input,\n  .selected-line,\n  .option-line,\n  .combo {\n    background: $dark-grey-light;\n    border-color: $dark-grey;\n  }\n\n  .option-line:hover {\n    background: $dark-purple;\n  }\n}\n\n.combo {\n  background: $white;\n  max-width: 200px;\n  border: 1px solid $light-grey-light;\n  border-radius: 0.5em;\n  user-select: none;\n  cursor: pointer;\n  margin: 0;\n  margin-top: 1px;\n  padding: 0.5em;\n  position: relative;\n  vertical-align: middle;\n\n  &.open {\n    border-bottom-left-radius: 0em;\n    border-bottom-right-radius: 0em;\n  }\n}\n\n.combo:hover {\n  border: 1px solid $green;\n}\n\n.selected-line {\n  flex: 1;\n}\n\n.option-line {\n  background: $white;\n  border-bottom: 1px solid $light-grey-light;\n  cursor: pointer;\n  margin: 0;\n  padding: 0.5em;\n\n  &:hover {\n    background: $purple;\n  }\n}\n\n.down-icon {\n  width: 15px;\n  min-width: 15px;\n  margin-right: 0.4em;\n  color: $green;\n  cursor: pointer;\n}\n\n.select-input {\n  border: 1px solid $light-grey-light;\n  border-bottom-left-radius: 1em;\n  border-bottom-right-radius: 1em;\n  left: 0;\n  margin-left: -1px;\n  max-height: 180px;\n  overflow-y: auto;\n  position: absolute;\n  top: 38px;\n  width: 120px;\n  z-index: 200;\n}\n\n.c-mask {\n  z-index: 199;\n}\n\n.field .label {\n  padding-top: 5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComboboxStyled.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComboboxStyled.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ComboboxStyled.vue?vue&type=template&id=22a2ef64&scoped=true&\"\nimport script from \"./ComboboxStyled.vue?vue&type=script&lang=js&\"\nexport * from \"./ComboboxStyled.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComboboxStyled.vue?vue&type=style&index=0&id=22a2ef64&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22a2ef64\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"productions page fixed-page\"},[_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"playlist-list-column column\"},[(_vm.isCurrentUserManager)?_c('button',{key:\"new-playlist-button\",class:{\n          button: true,\n          'is-loading': _vm.loading.addPlaylist\n        },on:{\"click\":_vm.addPlaylist}},[_c('plus-icon',{staticClass:\"icon is-small\"}),_vm._v(\"\\n        \"+_vm._s(_vm.$t('playlists.new_playlist'))+\"\\n      \")],1):_vm._e(),(!_vm.loading.playlists)?_c('div',{staticClass:\"playlists\"},_vm._l((_vm.playlists),function(playlist){return _c('router-link',{key:playlist.id,class:{\n            'playlist-item': true,\n            'for-client': playlist.for_client,\n            selected: playlist.id === _vm.currentPlaylist.id\n          },attrs:{\"to\":_vm.getPlaylistPath(playlist.id)}},[_c('span',[_vm._v(\"\\n            \"+_vm._s(playlist.name)+\"\\n          \")]),_c('span',{staticClass:\"playlist-date\",attrs:{\"title\":\"last modified\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.formatDate(playlist.updated_at))+\"\\n          \")])])}),1):_c('spinner',{staticClass:\"mt2\"}),(_vm.errors.playlistLoading)?_c('error-text',{attrs:{\"text\":\"$t('playlists.loading_error')\"}}):_vm._e()],1),_c('div',{staticClass:\"playlist-column column\"},[_c('playlist-player',{ref:\"playlist-player\",attrs:{\"playlist\":_vm.currentPlaylist,\"shots\":_vm.currentShots,\"is-loading\":_vm.loading.playlist},on:{\"preview-changed\":_vm.onPreviewChanged,\"playlist-deleted\":_vm.goFirstPlaylist,\"remove-shot\":_vm.removeShot,\"order-change\":_vm.onOrderChange,\"annotationchanged\":_vm.onAnnotationChanged,\"for-client-changed\":_vm.onForClientChanged}})],1),(_vm.isCurrentUserManager)?_c('div',{staticClass:\"addition-column column\"},[(_vm.isShotsLoading)?_c('spinner',{key:\"shot-loader\",staticClass:\"mt2\"}):_c('div',[_c('div',{staticClass:\"addition-header\"},[_c('page-subtitle',{attrs:{\"text\":_vm.$t('playlists.add_shots')}}),_c('button',{class:{\n              button: true,\n              'add-sequence': true,\n              'is-loading': this.loading.addWeekly\n            },attrs:{\"disabled\":_vm.isAdditionLoading},on:{\"click\":_vm.addAllPending}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('playlists.build_weekly'))+\"\\n          \")]),_c('button',{class:{\n              button: true,\n              'add-sequence': true,\n              'is-loading': this.loading.addDaily\n            },attrs:{\"disabled\":_vm.isAdditionLoading},on:{\"click\":_vm.addDailyPending}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('playlists.build_daily'))+\"\\n          \")]),(_vm.episodes.length > 0 || !_vm.isTVShow)?_c('div',{key:\"shot-list-header\",staticClass:\"mt1\"},[_c('div',[(_vm.sequenceOptions.length > 0)?_c('combobox',{staticClass:\"select-sequence-combobox\",attrs:{\"label\":_vm.$t('shots.fields.sequence'),\"options\":_vm.sequenceOptions},model:{value:(_vm.sequenceId),callback:function ($$v) {_vm.sequenceId=$$v},expression:\"sequenceId\"}}):_vm._e(),(_vm.sequenceOptions.length === 0)?_c('div',[_vm._v(\"\\n                \"+_vm._s(_vm.$t('playlists.no_sequence_for_episode'))+\"\\n              \")]):_vm._e(),(_vm.sequenceOptions.length > 0)?_c('button',{class:{\n                  button: true,\n                  'add-sequence': true,\n                  'is-loading': this.loading.addSequence\n                },attrs:{\"disabled\":_vm.isAdditionLoading},on:{\"click\":_vm.addSequence}},[_vm._v(\"\\n                \"+_vm._s(_vm.$t('playlists.add_sequence'))+\"\\n              \")]):_vm._e()],1)]):_c('div',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('playlists.no_shot_for_production'))+\"\\n          \")]),(_vm.sequenceShots.length === 0 && _vm.sequenceId)?_c('div',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('playlists.no_shot_for_sequence'))+\"\\n          \")]):_vm._e()],1),_vm._l((_vm.sequenceShots),function(shot){return _c('div',{key:shot.id,class:{\n            'addition-shot': true,\n            playlisted: _vm.currentShots[shot.id] !== undefined\n          },on:{\"click\":function($event){$event.preventDefault();return _vm.addShotToPlaylist(shot)}}},[_c('span',{staticClass:\"thumbnail-wrapper\"},[_c('light-entity-thumbnail',{attrs:{\"preview-file-id\":shot.preview_file_id,\"width\":150,\"height\":100}})],1),_vm._v(\"\\n          \"+_vm._s(shot.name)+\"\\n        \")])})],2)],1):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function (_h,_vm) {var _c=_vm._c;return (_vm.props.previewFileId)?_c('img',_vm._b({directives:[{name:\"lazy\",rawName:\"v-lazy\",value:('/api/pictures/thumbnails/preview-files/' + _vm.props.previewFileId + '.png'),expression:\"'/api/pictures/thumbnails/preview-files/' + props.previewFileId + '.png'\"}],key:_vm.props.previewFileId,staticClass:\"thumbnail-picture\",style:({\n    width: _vm.props.width + 'px',\n    height: _vm.props.height + 'px'\n  })},'img',_vm.data.attrs,false)):_c('span',_vm._b({class:{\n    'thumbnail-picture': true,\n    'thumbnail-empty': true\n  },style:({\n    width: _vm.props.width + 'px',\n    height: _vm.props.height + 'px',\n  })},'span',_vm.data.attrs,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template functional>\n<img\n  class=\"thumbnail-picture\"\n  :style=\"{\n    width: props.width + 'px',\n    height: props.height + 'px'\n  }\"\n  v-lazy=\"'/api/pictures/thumbnails/preview-files/' + props.previewFileId + '.png'\"\n  :key=\"props.previewFileId\"\n  v-bind=\"data.attrs\"\n  v-if=\"props.previewFileId\"\n/>\n<span\n  :class=\"{\n    'thumbnail-picture': true,\n    'thumbnail-empty': true\n  }\"\n  :style=\"{\n    width: props.width + 'px',\n    height: props.height + 'px',\n  }\"\n  v-bind=\"data.attrs\"\n  v-else>\n</span>\n</template>\n\n<script>\nexport default {\n  name: 'light-entity-thumbnail',\n  functional: true,\n\n  props: {\n    previewFileId: {\n      default: '',\n      type: String\n    },\n    width: {\n      default: 150,\n      type: Number\n    },\n    height: {\n      default: 50,\n      type: Number\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.dark .thumbnail-picture {\n  background-color: $dark-grey-lighter;\n  border-color: $dark-grey-light;\n}\n\nspan.thumbnail-empty {\n  background: $white-grey;\n  display: block;\n  margin: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightEntityThumbnail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightEntityThumbnail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LightEntityThumbnail.vue?vue&type=template&id=1b337bb1&functional=true&\"\nimport script from \"./LightEntityThumbnail.vue?vue&type=script&lang=js&\"\nexport * from \"./LightEntityThumbnail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LightEntityThumbnail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{class:{\n  'error': true,\n  'has-text-right': _vm.alignRight,\n  'is-hidden': _vm.hidden\n}},[_vm._v(\"\\n  \"+_vm._s(_vm.text)+\"\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<p :class=\"{\n  'error': true,\n  'has-text-right': alignRight,\n  'is-hidden': hidden\n}\">\n  {{ text }}\n</p>\n</template>\n\n<script>\nexport default {\n  name: 'error-text',\n  props: {\n    text: {\n      default: '',\n      type: String\n    },\n    hidden: {\n      default: false,\n      type: Boolean\n    },\n    alignRight: {\n      default: false,\n      type: Boolean\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ErrorText.vue?vue&type=template&id=1338c033&\"\nimport script from \"./ErrorText.vue?vue&type=script&lang=js&\"\nexport * from \"./ErrorText.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"playlist-player dark\"},[_c('div',{ref:\"header\",staticClass:\"playlist-header flexrow\"},[_c('span',{staticClass:\"flexrow-item playlist-name\"},[_vm._v(\"\\n      \"+_vm._s(_vm.playlist.name)+\"\\n    \")]),(_vm.isCurrentUserManager)?_c('div',{staticClass:\"flexrow-item\"},[_c('combobox-styled',{attrs:{\"options\":_vm.forClientOptions},model:{value:(_vm.forClient),callback:function ($$v) {_vm.forClient=$$v},expression:\"forClient\"}})],1):_vm._e(),(_vm.isCurrentUserManager)?_c('button-simple',{staticClass:\"edit-button playlist-button flexrow-item\",attrs:{\"icon\":\"edit\"},on:{\"click\":_vm.showEditModal}}):_vm._e(),(_vm.isCurrentUserManager)?_c('button-simple',{staticClass:\"delete-button playlist-button flexrow-item\",attrs:{\"icon\":\"delete\"},on:{\"click\":_vm.showDeleteModal}}):_vm._e(),_c('span',{staticClass:\"flexrow-item\"},[_vm._v(\"\\n      \"+_vm._s(_vm.nbCommentedShots)+\"\\n      /\\n      \"+_vm._s(_vm.shotList.length)+\"\\n    \")]),(_vm.isCurrentUserClient && _vm.shotList.length > 0)?_c('div',{staticClass:\"progress flexrow-item\"},[_c('span',{ref:\"review-progress-bar\",class:{\n          'progress-bar': false,\n          complete: _vm.nbCommentedShots === _vm.shotList.length\n        },style:({\n          width: Math.round(100 * _vm.nbCommentedShots / _vm.shotList.length) + 'px'\n        })})]):_vm._e()],1),_c('div',{ref:\"video-container\",staticClass:\"filler flexrow video-container\"},[_c('raw-video-player',{ref:\"raw-player\",staticClass:\"raw-player\",attrs:{\"shots\":_vm.shotList},on:{\"shot-change\":_vm.onShotChange,\"time-update\":_vm.onTimeUpdate,\"max-duration-update\":_vm.onMaxDurationUpdate}}),(_vm.isComparing)?_c('raw-video-player',{ref:\"raw-player-comparison\",staticClass:\"raw-player\",attrs:{\"shots\":_vm.shotListToCompare}}):_vm._e(),_c('div',{ref:\"canvas-wrapper\",staticClass:\"canvas-wrapper\"},[_c('canvas',{ref:\"annotation-canvas\",staticClass:\"canvas\",attrs:{\"id\":\"annotation-canvas\"}})]),_c('task-info',{ref:\"task-info\",class:{\n        'flexrow-item': true,\n        'task-info-column': true,\n        'hidden': _vm.isCommentsHidden\n      },attrs:{\"task\":_vm.task,\"is-preview\":false}})],1),_c('div',{ref:\"progress-cursor\",staticClass:\"progress-cursor\"}),_c('div',{ref:\"playlist-progress\",staticClass:\"playlist-progress\"},[_c('div',{staticClass:\"video-progress\"},[_c('progress',{ref:\"progress\",attrs:{\"value\":\"0\",\"min\":\"0\"},on:{\"click\":_vm.onProgressBarClicked}},[_c('span',{ref:\"progress-bar\",attrs:{\"id\":\"progress-bar\"}})])])]),(_vm.playlist.id)?_c('annotation-bar',{ref:\"playlist-annotation\",staticClass:\"playlist-annotations\",attrs:{\"annotations\":_vm.annotations,\"max-duration-raw\":_vm.maxDurationRaw},on:{\"select-annotation\":_vm.loadAnnotation}}):_vm._e(),(_vm.playlist.id)?_c('div',{ref:\"button-bar\",staticClass:\"playlist-footer flexrow\"},[(!_vm.isPlaying)?_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"play\"},on:{\"click\":_vm.onPlayClicked}}):_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"pause\"},on:{\"click\":_vm.onPlayClicked}}),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\"\\n      \"+_vm._s(_vm.currentTime)+\"\\n    \")]),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\"\\n    /\\n    \")]),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\"\\n      \"+_vm._s(_vm.maxDuration)+\"\\n    \")]),_c('span',{staticClass:\"flexrow-item time-indicator mr1\"},[_vm._v(\"\\n      (\"+_vm._s(_vm.currentFrame)+\")\\n    \")]),_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"left\"},on:{\"click\":_vm.onPreviousFrameClicked}}),_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"right\"},on:{\"click\":_vm.onNextFrameClicked}}),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\"\\n      \"+_vm._s(_vm.shotList.length > 0 ? _vm.playingShotIndex + 1 : 0)+\"\\n    \")]),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\"\\n    /\\n    \")]),_c('span',{staticClass:\"flexrow-item time-indicator mr1\"},[_vm._v(\"\\n      \"+_vm._s(_vm.shotList.length)+\"\\n    \")]),_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"back\"},on:{\"click\":_vm.onPlayPreviousShotClicked}}),_c('button-simple',{staticClass:\"playlist-button flexrow-item\",attrs:{\"icon\":\"forward\"},on:{\"click\":_vm.onPlayNextShotClicked}}),(_vm.taskTypeOptions)?_c('button-simple',{class:{\n        'comparison-button': true,\n        'flexrow-item': true,\n        'playlist-button': true,\n        active: _vm.isComparing\n      },attrs:{\"icon\":\"compare\"},on:{\"click\":_vm.onCompareClicked}}):_vm._e(),(_vm.isComparing)?_c('combobox',{staticClass:\"playlist-button flexrow-item comparison-list\",attrs:{\"options\":_vm.taskTypeOptions},model:{value:(_vm.taskTypeToCompare),callback:function ($$v) {_vm.taskTypeToCompare=$$v},expression:\"taskTypeToCompare\"}}):_vm._e(),_c('span',{staticClass:\"filler\"}),_c('button-simple',{class:{\n        'playlist-button': true,\n        'flexrow-item': true,\n        active: _vm.isDrawing\n      },attrs:{\"icon\":\"pencil\"},on:{\"click\":_vm.onAnnotateClicked}}),_c('button-simple',{staticClass:\"playlist-button flexrow-item\",attrs:{\"icon\":\"remove\"},on:{\"click\":_vm.onDeleteClicked}}),_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"comment\"},on:{\"click\":_vm.onCommentClicked}}),_c('button-simple',{staticClass:\"playlist-button flexrow-item\",attrs:{\"icon\":\"film\"},on:{\"click\":_vm.onFilmClicked}}),_c('div',{staticClass:\"flexrow-item playlist-button\",staticStyle:{\"position\":\"relative\"}},[_c('a',{class:{\n          'dl-button': true,\n          'zip-button': true,\n          hidden: _vm.isDlButtonsHidden\n        },attrs:{\"href\":_vm.zipDlPath}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('playlists.download_zip'))+\"\\n      \")]),(_vm.isCurrentUserManager)?_c('span',{class:{\n          'dl-button': true,\n          'mp4-button': true,\n          hidden: _vm.isDlButtonsHidden\n        },on:{\"click\":_vm.onBuildClicked}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('playlists.build_mp4'))+\"\\n      \")]):_vm._e(),_c('div',{class:{\n          'build-list': true,\n          hidden: _vm.isDlButtonsHidden\n        }},[(!_vm.playlist.build_jobs || _vm.playlist.build_jobs.length === 0)?_c('span',[_vm._v(\"\\n        \"+_vm._s(_vm.$t('playlists.no_build'))+\"\\n        \")]):_c('div',[_c('div',{staticClass:\"build-title\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('playlists.available_build'))+\"\\n          \")]),_vm._l((_vm.playlist.build_jobs),function(job){return _c('div',{key:job.id,staticClass:\"flexrow\"},[_c('a',{staticClass:\"flexrow-item\",attrs:{\"href\":_vm.getBuildPath(job)}},[_vm._v(\"\\n              \"+_vm._s(_vm.formatDate(job.created_at))+\"\\n            \")]),_c('span',{staticClass:\"filler\"}),(job.status === 'running')?_c('spinner',{staticClass:\"build-spinner\"}):_c('button',{staticClass:\"delete-job-button\",on:{\"click\":function($event){return _vm.onRemoveBuildJob(job)}}},[_vm._v(\"\\n              x\\n            \")])],1)})],2)]),_c('button-simple',{staticClass:\"playlist-button\",attrs:{\"icon\":\"download\"},on:{\"click\":_vm.toggleDlButtons}})],1),(_vm.isFullScreenEnabled)?_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"maximize\"},on:{\"click\":_vm.onFullscreenClicked}}):_vm._e()],1):_vm._e(),(_vm.playlist.id)?_c('div',{ref:\"playlisted-shots\",class:{\n      'playlisted-shots': true,\n      flexrow: true,\n      hidden: _vm.isShotsHidden\n    }},[(_vm.isLoading)?_c('spinner',{staticClass:\"spinner\"}):_vm._l((_vm.shotList),function(shot,index){return _c('div',{key:shot.id,staticClass:\"flexrow-item has-text-centered\"},[_c('playlisted-shot',{ref:'shot-' + index,refInFor:true,attrs:{\"index\":index,\"shot\":shot,\"is-playing\":_vm.playingShotIndex === index},on:{\"play-click\":_vm.playShot,\"remove-shot\":_vm.removeShot,\"preview-changed\":_vm.onPreviewChanged,\"shot-dropped\":_vm.onShotDropped}})],1)})],2):_vm._e(),_c('edit-playlist-modal',{attrs:{\"active\":_vm.modals.edit,\"is-loading\":_vm.loading.editPlaylist,\"is-error\":_vm.errors.editError,\"playlist-to-edit\":_vm.playlist},on:{\"cancel\":_vm.hideEditModal,\"confirm\":_vm.confirmEditPlaylist}}),_c('delete-modal',{attrs:{\"active\":_vm.modals.delete,\"is-loading\":_vm.loading.deletePlaylist,\"is-error\":_vm.errors.deletePlaylist,\"text\":_vm.deleteText,\"error-text\":_vm.$t('playlists.delete_error')},on:{\"confirm\":_vm.confirmRemovePlaylist,\"cancel\":_vm.hideDeleteModal}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{\n  'modal': true,\n  'is-active': _vm.active\n}},[_c('div',{staticClass:\"modal-background\"}),_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"box\"},[(_vm.playlistToEdit && _vm.playlistToEdit.id)?_c('h1',{staticClass:\"title\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"playlists.edit_title\"))+\" \"+_vm._s(_vm.playlistToEdit.name)+\"\\n      \")]):_c('h1',{staticClass:\"title\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"playlists.no_playlist\"))+\"\\n      \")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('text-field',{directives:[{name:\"focus\",rawName:\"v-focus\"}],ref:\"nameField\",attrs:{\"label\":_vm.$t('playlists.fields.name')},on:{\"enter\":_vm.runConfirmation},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('p',{staticClass:\"has-text-right\"},[_c('a',{class:{\n            button: true,\n            'is-primary': true,\n            'is-loading': _vm.isLoading\n          },on:{\"click\":_vm.runConfirmation}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t(\"main.confirmation\"))+\"\\n        \")]),_c('button',{staticClass:\"button is-link\",on:{\"click\":function($event){return _vm.$emit('cancel')}}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t(\"main.cancel\"))+\"\\n        \")])]),(_vm.isError)?_c('p',{staticClass:\"error has-text-right info-message\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"assets.edit_fail\"))+\"\\n      \")]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div :class=\"{\n  'modal': true,\n  'is-active': active\n}\">\n  <div class=\"modal-background\"></div>\n  <div class=\"modal-content\">\n    <div class=\"box\">\n      <h1 class=\"title\" v-if=\"playlistToEdit && playlistToEdit.id\">\n        {{ $t(\"playlists.edit_title\") }} {{ playlistToEdit.name }}\n      </h1>\n      <h1 class=\"title\" v-else>\n        {{ $t(\"playlists.no_playlist\") }}\n      </h1>\n\n      <form v-on:submit.prevent>\n        <text-field\n          ref=\"nameField\"\n          :label=\"$t('playlists.fields.name')\"\n          v-model=\"form.name\"\n          @enter=\"runConfirmation\"\n          v-focus\n        >\n        </text-field>\n      </form>\n\n      <p class=\"has-text-right\">\n        <a\n          :class=\"{\n            button: true,\n            'is-primary': true,\n            'is-loading': isLoading\n          }\"\n          @click=\"runConfirmation\">\n          {{ $t(\"main.confirmation\") }}\n        </a>\n        <button\n          @click=\"$emit('cancel')\"\n          class=\"button is-link\">\n          {{ $t(\"main.cancel\") }}\n        </button>\n      </p>\n\n      <p class=\"error has-text-right info-message\" v-if=\"isError\">\n        {{ $t(\"assets.edit_fail\") }}\n      </p>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport TextField from '../widgets/TextField'\n\nimport { modalMixin } from './base_modal'\n\nexport default {\n  name: 'edit-playlist-modal',\n  mixins: [modalMixin],\n  components: {\n    TextField\n  },\n\n  props: [\n    'active',\n    'cancelRoute',\n    'isLoading',\n    'isError',\n    'playlistToEdit'\n  ],\n\n  watch: {\n    playlistToEdit () {\n      if (this.playlistToEdit && this.playlistToEdit.id) {\n        this.form.name = this.playlistToEdit.name\n      } else {\n        this.form = {\n          name: ''\n        }\n      }\n    },\n\n    active () {\n      if (this.active) {\n        setTimeout(() => {\n          this.$refs.nameField.focus()\n        }, 100)\n      }\n    }\n  },\n\n  data () {\n    if (this.playlistToEdit && this.playlistToEdit.id) {\n      return {\n        form: {\n          name: this.playlistToEdit.name\n        }\n      }\n    } else {\n      return {\n        form: {\n          name: ''\n        }\n      }\n    }\n  },\n\n  methods: {\n    runConfirmation () {\n      this.$emit('confirm', this.form)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.is-danger {\n  color: #ff3860;\n  font-style: italic;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPlaylistModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPlaylistModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditPlaylistModal.vue?vue&type=template&id=7645d689&scoped=true&\"\nimport script from \"./EditPlaylistModal.vue?vue&type=script&lang=js&\"\nexport * from \"./EditPlaylistModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditPlaylistModal.vue?vue&type=style&index=0&id=7645d689&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7645d689\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flexrow wrapper\"},[_c('drag',{attrs:{\"transfer-data\":_vm.shot.id},on:{\"drag\":_vm.onDragged}},[_c('div',{class:{\n        'playlisted-shot': true,\n        playing: _vm.isPlaying\n      }},[_c('div',{staticClass:\"thumbnail-wrapper\",on:{\"click\":function($event){$event.preventDefault();return _vm.onPlayClick($event)}}},[(_vm.isCurrentUserManager)?_c('span',{staticClass:\"remove-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.remove')},on:{\"click\":function($event){$event.preventDefault();return _vm.onRemoveClick($event)}}},[_c('x-icon')],1):_vm._e(),_c('light-entity-thumbnail',{attrs:{\"width\":150,\"height\":103,\"preview-file-id\":_vm.previewFileId}})],1),_c('div',{staticClass:\"shot-title\"},[_vm._v(_vm._s(_vm.shot.sequence_name)+\" / \"+_vm._s(_vm.shot.name))]),(_vm.taskTypeOptions.length > 0)?_c('div',{staticClass:\"preview-choice\"},[_c('light-combobox',{attrs:{\"options\":_vm.taskTypeOptions,\"disabled\":!_vm.isCurrentUserManager},model:{value:(_vm.taskTypeId),callback:function ($$v) {_vm.taskTypeId=$$v},expression:\"taskTypeId\"}}),_c('light-combobox',{staticClass:\"version-combo\",attrs:{\"options\":_vm.previewFileOptions,\"disabled\":!_vm.isCurrentUserManager},model:{value:(_vm.previewFileId),callback:function ($$v) {_vm.previewFileId=$$v},expression:\"previewFileId\"}})],1):_c('div',[_vm._v(\"\\n        \"+_vm._s(_vm.$t('playlists.no_preview'))+\"\\n      \")])])]),_c('drop',{on:{\"drop\":_vm.onDropped}},[_c('div',{ref:\"drop-area\",staticClass:\"drop-area\"})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function (_h,_vm) {var _c=_vm._c;return _c('div',{staticClass:\"field\"},[(_vm.props.label.length > 0)?_c('label',{staticClass:\"label\"},[_vm._v(\"\\n    \"+_vm._s(_vm.props.label)+\"\\n  \")]):_vm._e(),_c('p',{staticClass:\"control\"},[_c('span',{class:{\n        select: true,\n        'is-top': _vm.props.isTop\n      }},[_c('select',{ref:\"select\",staticClass:\"select-input\",attrs:{\"disabled\":_vm.props.disabled},on:{\"change\":function (event, value) { return _vm.listeners.input(event.target.value); }}},_vm._l((_vm.props.options),function(option,i){return _c('option',{key:(i + \"-\" + (option.label) + \"-\" + (option.value)),domProps:{\"value\":option.value || option.label,\"selected\":_vm.value === option.value}},[_vm._v(\"\\n          \"+_vm._s(option.label)+\"\\n        \")])}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template functional>\n<div class=\"field\">\n  <label class=\"label\" v-if=\"props.label.length > 0\">\n    {{ props.label }}\n  </label>\n  <p class=\"control\">\n    <span\n      :class=\"{\n        select: true,\n        'is-top': props.isTop\n      }\"\n    >\n      <select\n        class=\"select-input\"\n        ref=\"select\"\n        :disabled=\"props.disabled\"\n        @change=\"(event, value) => listeners.input(event.target.value)\"\n      >\n        <option\n          v-for=\"(option, i) in props.options\"\n          :key=\"`${i}-${option.label}-${option.value}`\"\n          :value=\"option.value || option.label\"\n          :selected=\"value === option.value\"\n        >\n          {{ option.label }}\n        </option>\n      </select>\n    </span>\n  </p>\n</div>\n</template>\n\n<script>\nexport default {\n  name: 'combobox',\n\n  props: {\n    label: {\n      default: '',\n      type: String\n    },\n    value: {\n      default: '',\n      type: String\n    },\n    options: {\n      default: () => [],\n      type: Array\n    },\n    localeKeyPrefix: {\n      default: '',\n      type: String\n    },\n    isTop: {\n      default: false,\n      type: Boolean\n    },\n    disabled: {\n      default: false,\n      type: Boolean\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.dark select:disabled {\n  background: $dark-grey;\n  border-color: $dark-grey-strong;\n}\n\n.is-top select {\n  font-size: 1.2em;\n  border: 0;\n  border-bottom: 1px solid $light-grey;\n  border-radius: 0;\n  height: 38px;\n}\n\n.is-top select:focus {\n  border-color: $green;\n  outline: 0;\n}\n\n.select-input {\n  height: 3em;\n}\n\n.select::after {\n  border: 1px solid $green;\n  border-right: 0;\n  border-top: 0;\n  margin-top: -2px;\n}\n\n.select.is-top::after {\n  border: 2px solid $green;\n  border-right: 0;\n  border-top: 0;\n  margin-top: -4px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightCombobox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightCombobox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LightCombobox.vue?vue&type=template&id=30c63aa2&functional=true&\"\nimport script from \"./LightCombobox.vue?vue&type=script&lang=js&\"\nexport * from \"./LightCombobox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LightCombobox.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n<div class=\"flexrow wrapper\">\n  <drag @drag=\"onDragged\" :transfer-data=\"shot.id\">\n    <div\n      :class=\"{\n        'playlisted-shot': true,\n        playing: isPlaying\n      }\"\n    >\n      <div class=\"thumbnail-wrapper\" @click.prevent=\"onPlayClick\">\n        <span\n          class=\"remove-button flexrow-item\"\n          :title=\"$t('playlists.remove')\"\n          @click.prevent=\"onRemoveClick\"\n          v-if=\"isCurrentUserManager\"\n        >\n          <x-icon />\n        </span>\n        <light-entity-thumbnail\n          :width=\"150\"\n          :height=\"103\"\n          :preview-file-id=\"previewFileId\"\n        />\n      </div>\n\n      <div class=\"shot-title\">{{ shot.sequence_name }} / {{ shot.name }}</div>\n\n      <div\n        class=\"preview-choice\"\n        v-if=\"taskTypeOptions.length > 0\"\n      >\n        <light-combobox\n          :options=\"taskTypeOptions\"\n          :disabled=\"!isCurrentUserManager\"\n          v-model=\"taskTypeId\"\n        />\n        <light-combobox\n          class=\"version-combo\"\n          :options=\"previewFileOptions\"\n          :disabled=\"!isCurrentUserManager\"\n          v-model=\"previewFileId\"\n        />\n      </div>\n      <div v-else>\n        {{ $t('playlists.no_preview') }}\n      </div>\n    </div>\n  </drag>\n  <drop @drop=\"onDropped\">\n    <div class=\"drop-area\" ref=\"drop-area\"></div>\n  </drop>\n</div>\n</template>\n\n<script>\n/*\n * Widget to describe a shot listed in a playlist. It allows to select a given\n * prevision for a given task type for current shot.\n * It fires events about drag'n'drop reordering too.\n */\nimport firstBy from 'thenby'\nimport { mapGetters } from 'vuex'\nimport { XIcon } from 'vue-feather-icons'\n\nimport LightCombobox from '../../widgets/LightCombobox'\nimport LightEntityThumbnail from '../../widgets/LightEntityThumbnail'\n\nexport default {\n  name: 'playlisted-shot',\n\n  components: {\n    LightCombobox,\n    LightEntityThumbnail,\n    XIcon\n  },\n\n  data () {\n    return {\n      taskTypeId: null,\n      previewFileId: this.shot.preview_file_id\n    }\n  },\n\n  props: {\n    index: {\n      default: 0,\n      type: Number\n    },\n    isPlaying: {\n      default: false,\n      type: Boolean\n    },\n    shot: {\n      default: () => {},\n      type: Object\n    }\n  },\n\n  mounted () {\n    this.setCurrentParameters()\n    this.setListeners()\n  },\n\n  computed: {\n    ...mapGetters([\n      'taskTypeMap',\n      'isCurrentUserManager'\n    ]),\n\n    dropArea () {\n      return this.$refs['drop-area']\n    },\n\n    taskTypeOptions () {\n      return Object\n        .keys(this.shot.preview_files)\n        .map(id => this.taskTypeMap[id])\n        .sort(firstBy('priority', 1).thenBy('name'))\n        .map((taskType) => {\n          return {\n            label: taskType.name,\n            value: taskType.id\n          }\n        })\n    },\n\n    previewFileOptions () {\n      const previewFiles = this.shot.preview_files[this.taskTypeId] || []\n      return previewFiles.map(previewFile => ({\n        label: `v${previewFile.revision}`,\n        value: previewFile.id\n      }))\n    }\n  },\n\n  methods: {\n    getTaskTypeIdForPreviewFile (taskTypeIds, previewFileId) {\n      return taskTypeIds.find((taskTypeId) => {\n        const previewFiles = this.shot.preview_files[taskTypeId]\n        return previewFiles.some(previewFile => {\n          return previewFile.id === previewFileId\n        })\n      })\n    },\n\n    setCurrentParameters () {\n      // Find task type matching current preview.\n      const taskTypeIds = Object.keys(this.shot.preview_files)\n      if (taskTypeIds.length > 0) {\n        if (this.shot.preview_file_id) {\n          this.taskTypeId = this.getTaskTypeIdForPreviewFile(\n            taskTypeIds,\n            this.shot.preview_file_id\n          )\n        }\n        if (!this.taskTypeId) {\n          this.taskTypeId = taskTypeIds[0]\n        }\n      }\n    },\n\n    setListeners () {\n      this.dropArea.addEventListener('dragover', this.onDragover)\n      this.dropArea.addEventListener('dragleave', this.onDragleave)\n    },\n\n    onDragged () {\n    },\n\n    onDragleave () {\n      this.dropArea.style.background = 'transparent'\n    },\n\n    onDragover () {\n      this.dropArea.style.background = '#00B242'\n    },\n\n    onDropped (shotId) {\n      this.$refs['drop-area'].style.background = 'transparent'\n      this.$emit('shot-dropped', {\n        before: this.shot.id,\n        after: shotId\n      })\n    },\n\n    onPlayClick () {\n      this.$emit('play-click', this.index)\n    },\n\n    onRemoveClick (event) {\n      event.preventDefault()\n      event.stopPropagation()\n      this.$emit('remove-shot', this.shot)\n    }\n  },\n\n  watch: {\n    taskTypeId () {\n      // Set current preview was last preview selected. If there is no preview\n      // matching this task type, it selects the first preview available for\n      // this task type.\n      const previewFiles = this.shot.preview_files[this.taskTypeId]\n      if (previewFiles && previewFiles.length > 0) {\n        const isPreviewFile = previewFiles.some(previewFile => {\n          return previewFile.id === this.shot.preview_file_id\n        })\n        if (isPreviewFile) {\n          this.previewFileId = this.shot.preview_file_id\n        } else {\n          this.previewFileId = previewFiles[0].id\n        }\n      }\n    },\n\n    previewFileId () {\n      this.$emit('preview-changed', this.shot, this.previewFileId)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.wrapper {\n  align-items: stretch;\n}\n\n.drop-area {\n  width: 10px;\n  margin-left: 10px;\n  height: 100%;\n}\n\n.playlisted-shot {\n  border-top: 3px solid transparent;\n  display: flex;\n  flex-direction: column;\n  min-width: 150px;\n  padding:0;\n\n  &.playing {\n    border-top: 3px solid $green;\n  }\n}\n\n.shot-title {\n  margin-bottom: 0.6em;\n}\n\n.thumbnail-wrapper {\n  position: relative;\n  cursor: pointer;\n}\n\n.field {\n  margin-bottom: 0em;\n}\n\n.version-combo {\n  margin-top: 0.6em;\n}\n\n.remove-button {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  right: 0;\n  margin: 0.4em;\n  border-radius: 2em;\n  text-align: center;\n  background: rgba(0, 0, 0, 0.3);\n  cursor: pointer;\n  z-index: 100;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n\n  svg {\n    width: 10px;\n    height: 10px;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistedShot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistedShot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlaylistedShot.vue?vue&type=template&id=54a341ae&scoped=true&\"\nimport script from \"./PlaylistedShot.vue?vue&type=script&lang=js&\"\nexport * from \"./PlaylistedShot.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlaylistedShot.vue?vue&type=style&index=0&id=54a341ae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54a341ae\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"video-wrapper filler flexrow-item\"},[_c('video',{ref:\"player1\",attrs:{\"preload\":\"auto\"},on:{\"ended\":_vm.playNext}}),_c('video',{ref:\"player2\",attrs:{\"preload\":\"auto\"},on:{\"ended\":_vm.playNext}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div ref=\"container\" class=\"video-wrapper filler flexrow-item\">\n  <video\n    ref=\"player1\"\n    preload=\"auto\"\n    @ended=\"playNext\"\n  />\n  <video\n    ref=\"player2\"\n    preload=\"auto\"\n    @ended=\"playNext\"\n  />\n</div>\n</template>\n\n<script>\n/*\n * To play several videos, to avoid blinking effects, it's required to use\n * two video players. When switching from a shot to another, we hide and show\n * players so the blink does not occur.\n */\nimport { mapGetters } from 'vuex'\nimport { roundToFrame } from '../../../lib/video'\n\nexport default {\n  name: 'raw-video-player',\n\n  components: {\n  },\n\n  props: {\n    shots: {\n      type: Array,\n      default: () => []\n    }\n  },\n\n  data () {\n    return {\n      currentPlayer: this.player1,\n      isPlaying: false,\n      nextPlayer: this.player2,\n      playingIndex: 0\n    }\n  },\n\n  // Video need to be resized after each window size change. It's due\n  // to a HTML5 limitation related to video height.\n  mounted () {\n    this.resetHeight()\n    window.addEventListener('resize', this.resetHeight)\n  },\n\n  beforeDestroy () {\n    window.removeEventListener('resize', this.resetHeight)\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction'\n    ]),\n\n    container () {\n      return this.$refs.container\n    },\n\n    fps () {\n      return this.currentProduction.fps || 24\n    },\n\n    player1 () {\n      return this.$refs.player1\n    },\n\n    player2 () {\n      return this.$refs.player2\n    }\n  },\n\n  methods: {\n    getMoviePath (previewId) {\n      return `/api/movies/originals/preview-files/${previewId}.mp4`\n    },\n\n    getNextIndex (index) {\n      let i = index + 1 >= this.shots.length ? 0 : index + 1\n      // While we don't come back to initial shot and we have video previews\n      while (i !== index && this.shots[i].preview_file_extension !== 'mp4') {\n        i++\n        if (i >= this.shots.length) i = 0\n      }\n      return i\n    },\n\n    getPreviousIndex (index) {\n      let i = index - 1 >= 0 ? index - 1 : this.shots.length - 1\n      // While we don't come back to initial shot and we have video previews\n      while (i !== index && this.shots[i].preview_file_extension !== 'mp4') {\n        i--\n        if (i < 0) i = this.shots.length\n      }\n      return i\n    },\n\n    clear () {\n      if (this.currentPlayer) {\n        this.currentPlayer.src = ''\n        this.currentPlayer.removeAttribute('src')\n        this.currentPlayer.load()\n      }\n    },\n\n    goPreviousFrame () {\n      let newTime = this.currentPlayer.currentTime - 1 / this.fps\n      if (newTime < 0) {\n        this.setCurrentTime(0)\n      } else {\n        this.setCurrentTime(newTime)\n      }\n    },\n\n    goNextFrame () {\n      let newTime = this.currentPlayer.currentTime + 1 / this.fps\n      if (newTime > this.currentPlayer.duration) {\n        this.setCurrentTime(this.video.duration)\n      } else {\n        this.setCurrentTime(newTime)\n      }\n    },\n\n    loadPreviousShot () {\n      this.loadShot(this.getPreviousIndex(this.currentIndex))\n      this.$emit('shot-change', this.currentIndex)\n    },\n\n    loadNextShot () {\n      this.loadShot(this.getNextIndex(this.currentIndex))\n      this.$emit('shot-change', this.currentIndex)\n    },\n\n    loadShot (index = 0) {\n      if (index < this.shots.length) {\n        const nextIndex = this.getNextIndex(index)\n        const shot = this.shots[index]\n        const nextShot = this.shots[nextIndex]\n\n        this.currentIndex = index\n        this.currentPlayer = this.player1\n        this.nextPlayer = this.player2\n        this.currentPlayer.removeEventListener(\n          'loadedmetadata',\n          this.updateMaxDuration\n        )\n        this.currentPlayer.addEventListener(\n          'loadedmetadata',\n          this.updateMaxDuration\n        )\n\n        this.currentPlayer.src = this.getMoviePath(shot.preview_file_id)\n        this.nextPlayer.src = this.getMoviePath(nextShot.preview_file_id)\n        this.currentPlayer.style.display = 'block'\n        this.nextPlayer.style.display = 'none'\n        this.resetHeight()\n\n        this.currentPlayer.removeEventListener('timeupdate', this.updateTime)\n        this.currentPlayer.addEventListener('timeupdate', this.updateTime)\n\n        this.$emit('shot-change', this.currentIndex)\n      }\n    },\n\n    pause () {\n      if (this.currentPlayer) this.currentPlayer.pause()\n      this.isPlaying = false\n    },\n\n    play () {\n      let shot = this.shots[this.currentIndex]\n      if (shot) {\n        if (!shot.preview_file_id) this.loadNextShot()\n        shot = this.shots[this.currentIndex]\n        if (shot.preview_file_id) {\n          if (this.currentPlayer) this.currentPlayer.play()\n          this.isPlaying = true\n        }\n      }\n    },\n\n    playNext () {\n      let nextIndex = this.getNextIndex(this.currentIndex)\n      this.currentIndex = nextIndex\n      this.$emit('shot-change', this.currentIndex)\n\n      this.currentPlayer.style.display = 'none'\n      this.nextPlayer.style.display = 'block'\n      this.nextPlayer.play()\n\n      this.switchPlayers()\n      this.updateMaxDuration()\n    },\n\n    resetHeight () {\n      this.$nextTick(() => {\n        if (this.currentPlayer) this.currentPlayer.style.height = `0px`\n        if (this.nextPlayer) this.nextPlayer.style.height = `0px`\n        let height = this.container.offsetHeight\n        if (this.currentPlayer) this.currentPlayer.style.height = `${height}px`\n        if (this.nextPlayer) this.nextPlayer.style.height = `${height}px`\n      })\n    },\n\n    getCurrentTime () {\n      return this.currentPlayer.currentTime\n    },\n\n    setCurrentTime (currentTime) {\n      currentTime = roundToFrame(currentTime, this.fps)\n      if (this.currentPlayer) this.currentPlayer.currentTime = currentTime\n    },\n\n    switchPlayers () {\n      const nextIndex = this.getNextIndex(this.currentIndex)\n      const nextShot = this.shots[nextIndex]\n      this.tmpPlayer = this.currentPlayer\n      this.currentPlayer = this.nextPlayer\n      this.nextPlayer = this.tmpPlayer\n      this.nextPlayer.src = this.getMoviePath(nextShot.preview_file_id)\n      this.resetHeight()\n\n      this.currentPlayer.removeEventListener('timeupdate', this.updateTime)\n      this.nextPlayer.removeEventListener('timeupdate', this.updateTime)\n      this.currentPlayer.addEventListener('timeupdate', this.updateTime)\n    },\n\n    updateTime (time) {\n      this.$emit('time-update', time)\n    },\n\n    updateMaxDuration () {\n      this.$emit('max-duration-update', this.currentPlayer.duration)\n    }\n  },\n\n  watch: {\n    shots () {\n      if (this.shots.length > 0) {\n        this.loadShot(0)\n        this.pause()\n        this.setCurrentTime(0)\n\n        const shot = this.shots[this.currentIndex]\n        if (shot && !shot.preview_file_id) this.loadNextShot()\n      }\n      setTimeout(this.resetHeight, 300)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.video-wrapper {\n  height: 100%;\n}\n\n.container {\n  max-height: 100%;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RawVideoPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RawVideoPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RawVideoPlayer.vue?vue&type=template&id=fc2c9bcc&scoped=true&\"\nimport script from \"./RawVideoPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./RawVideoPlayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RawVideoPlayer.vue?vue&type=style&index=0&id=fc2c9bcc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fc2c9bcc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\n<div ref=\"container\" class=\"playlist-player dark\">\n  <div class=\"playlist-header flexrow\" ref=\"header\">\n    <span class=\"flexrow-item playlist-name\">\n      {{ playlist.name }}\n    </span>\n    <div class=\"flexrow-item\" v-if=\"isCurrentUserManager\">\n      <combobox-styled\n        :options=\"forClientOptions\"\n        v-model=\"forClient\"\n      />\n    </div>\n    <button-simple\n      @click=\"showEditModal\"\n      class=\"edit-button playlist-button flexrow-item\"\n      icon=\"edit\"\n      v-if=\"isCurrentUserManager\"\n    />\n    <button-simple\n      @click=\"showDeleteModal\"\n      class=\"delete-button playlist-button flexrow-item\"\n      icon=\"delete\"\n      v-if=\"isCurrentUserManager\"\n    />\n    <span class=\"flexrow-item\">\n      {{ nbCommentedShots }}\n      /\n      {{ shotList.length }}\n    </span>\n    <div\n      class=\"progress flexrow-item\"\n      v-if=\"isCurrentUserClient && shotList.length > 0\"\n    >\n      <span\n        ref=\"review-progress-bar\"\n        :class=\"{\n          'progress-bar': false,\n          complete: nbCommentedShots === shotList.length\n        }\"\n        :style=\"{\n          width: Math.round(100 * nbCommentedShots / shotList.length) + 'px'\n        }\"\n      >\n      </span>\n    </div>\n  </div>\n\n  <div class=\"filler flexrow video-container\" ref=\"video-container\">\n    <raw-video-player\n      class=\"raw-player\"\n      ref=\"raw-player\"\n      :shots=\"shotList\"\n      @shot-change=\"onShotChange\"\n      @time-update=\"onTimeUpdate\"\n      @max-duration-update=\"onMaxDurationUpdate\"\n    />\n    <raw-video-player\n      class=\"raw-player\"\n      ref=\"raw-player-comparison\"\n      :shots=\"shotListToCompare\"\n      v-if=\"isComparing\"\n    />\n    <div class=\"canvas-wrapper\" ref=\"canvas-wrapper\">\n      <canvas\n        id=\"annotation-canvas\"\n        ref=\"annotation-canvas\"\n        class=\"canvas\"\n      >\n      </canvas>\n    </div>\n\n    <task-info\n      ref=\"task-info\"\n      :class=\"{\n        'flexrow-item': true,\n        'task-info-column': true,\n        'hidden': isCommentsHidden\n      }\"\n      :task=\"task\"\n      :is-preview=\"false\"\n    />\n  </div>\n\n  <div\n    class=\"progress-cursor\"\n    ref=\"progress-cursor\"\n  ></div>\n  <div\n    class=\"playlist-progress\"\n    ref=\"playlist-progress\"\n  >\n    <div class=\"video-progress\">\n      <progress\n        ref=\"progress\"\n        value=\"0\"\n        min=\"0\"\n        @click=\"onProgressBarClicked\"\n      >\n        <span\n          id=\"progress-bar\"\n          ref=\"progress-bar\"\n        ></span>\n      </progress>\n    </div>\n  </div>\n\n  <annotation-bar\n    class=\"playlist-annotations\"\n    ref=\"playlist-annotation\"\n    :annotations=\"annotations\"\n    :max-duration-raw=\"maxDurationRaw\"\n    @select-annotation=\"loadAnnotation\"\n    v-if=\"playlist.id\"\n  />\n\n  <div\n    class=\"playlist-footer flexrow\"\n    ref=\"button-bar\"\n    v-if=\"playlist.id\"\n  >\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onPlayClicked\"\n      icon=\"play\"\n      v-if=\"!isPlaying\"\n    />\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onPlayClicked\"\n      icon=\"pause\"\n      v-else\n    />\n    <span class=\"flexrow-item time-indicator\">\n      {{ currentTime }}\n    </span>\n    <span class=\"flexrow-item time-indicator\">\n    /\n    </span>\n    <span class=\"flexrow-item time-indicator\">\n      {{ maxDuration }}\n    </span>\n    <span class=\"flexrow-item time-indicator mr1\">\n      ({{ currentFrame }})\n    </span>\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onPreviousFrameClicked\"\n      icon=\"left\"\n    />\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onNextFrameClicked\"\n      icon=\"right\"\n    />\n\n    <span class=\"flexrow-item time-indicator\">\n      {{ shotList.length > 0 ? playingShotIndex + 1 : 0 }}\n    </span>\n    <span class=\"flexrow-item time-indicator\">\n    /\n    </span>\n    <span class=\"flexrow-item time-indicator mr1\">\n      {{ shotList.length }}\n    </span>\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onPlayPreviousShotClicked\"\n      icon=\"back\"\n    />\n    <button-simple\n      class=\"playlist-button flexrow-item\"\n      @click=\"onPlayNextShotClicked\"\n      icon=\"forward\"\n    />\n    <button-simple\n      :class=\"{\n        'comparison-button': true,\n        'flexrow-item': true,\n        'playlist-button': true,\n        active: isComparing\n      }\"\n      icon=\"compare\"\n      @click=\"onCompareClicked\"\n      v-if=\"taskTypeOptions\"\n    />\n    <combobox\n      class=\"playlist-button flexrow-item comparison-list\"\n      :options=\"taskTypeOptions\"\n      v-model=\"taskTypeToCompare\"\n      v-if=\"isComparing\"\n    />\n    <span class=\"filler\"></span>\n\n    <button-simple\n      :class=\"{\n        'playlist-button': true,\n        'flexrow-item': true,\n        active: isDrawing\n      }\"\n      @click=\"onAnnotateClicked\"\n      icon=\"pencil\"\n    />\n    <button-simple\n      class=\"playlist-button flexrow-item\"\n      icon=\"remove\"\n      @click=\"onDeleteClicked\"\n    />\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onCommentClicked\"\n      icon=\"comment\"\n    />\n    <button-simple\n      class=\"playlist-button flexrow-item\"\n      @click=\"onFilmClicked\"\n      icon=\"film\"\n    />\n\n    <div class=\"flexrow-item playlist-button\" style=\"position: relative\">\n      <a\n        :class=\"{\n          'dl-button': true,\n          'zip-button': true,\n          hidden: isDlButtonsHidden\n        }\"\n        :href=\"zipDlPath\"\n      >\n        {{ $t('playlists.download_zip') }}\n      </a>\n      <span\n        :class=\"{\n          'dl-button': true,\n          'mp4-button': true,\n          hidden: isDlButtonsHidden\n        }\"\n        @click=\"onBuildClicked\"\n        v-if=\"isCurrentUserManager\"\n      >\n        {{ $t('playlists.build_mp4') }}\n      </span>\n      <div\n        :class=\"{\n          'build-list': true,\n          hidden: isDlButtonsHidden\n        }\"\n      >\n        <span v-if=\"!playlist.build_jobs || playlist.build_jobs.length === 0\">\n        {{ $t('playlists.no_build') }}\n        </span>\n        <div\n          v-else\n        >\n          <div class=\"build-title\">\n            {{ $t('playlists.available_build') }}\n          </div>\n          <div\n            class=\"flexrow\"\n            :key=\"job.id\"\n            v-for=\"job in playlist.build_jobs\"\n          >\n            <a\n              class=\"flexrow-item\"\n              :href=\"getBuildPath(job)\"\n            >\n              {{ formatDate(job.created_at) }}\n            </a>\n            <span class=\"filler\"></span>\n            <spinner\n              class=\"build-spinner\"\n              v-if=\"job.status === 'running'\"\n            />\n            <button\n              class=\"delete-job-button\"\n              @click=\"onRemoveBuildJob(job)\"\n              v-else\n            >\n              x\n            </button>\n          </div>\n        </div>\n      </div>\n      <button-simple\n        class=\"playlist-button\"\n        icon=\"download\"\n        @click=\"toggleDlButtons\"\n      />\n    </div>\n\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onFullscreenClicked\"\n      icon=\"maximize\"\n      v-if=\"isFullScreenEnabled\"\n    />\n  </div>\n\n  <div\n    :class=\"{\n      'playlisted-shots': true,\n      flexrow: true,\n      hidden: isShotsHidden\n    }\"\n    ref=\"playlisted-shots\"\n    v-if=\"playlist.id\"\n  >\n    <spinner class=\"spinner\" v-if=\"isLoading\" />\n    <div\n      class=\"flexrow-item has-text-centered\"\n      :key=\"shot.id\"\n      v-for=\"(shot, index) in shotList\"\n      v-else\n    >\n      <playlisted-shot\n        :ref=\"'shot-' + index\"\n        :index=\"index\"\n        :shot=\"shot\"\n        :is-playing=\"playingShotIndex === index\"\n        @play-click=\"playShot\"\n        @remove-shot=\"removeShot\"\n        @preview-changed=\"onPreviewChanged\"\n        @shot-dropped=\"onShotDropped\"\n      />\n    </div>\n  </div>\n\n  <edit-playlist-modal\n    :active=\"modals.edit\"\n    :is-loading=\"loading.editPlaylist\"\n    :is-error=\"errors.editError\"\n    :playlist-to-edit=\"playlist\"\n    @cancel=\"hideEditModal\"\n    @confirm=\"confirmEditPlaylist\"\n  />\n\n  <delete-modal\n    :active=\"modals.delete\"\n    :is-loading=\"loading.deletePlaylist\"\n    :is-error=\"errors.deletePlaylist\"\n    :text=\"deleteText\"\n    :error-text=\"$t('playlists.delete_error')\"\n    @confirm=\"confirmRemovePlaylist\"\n    @cancel=\"hideDeleteModal\"\n  />\n</div>\n</template>\n\n<script>\n/*\n * This modules manages all the options available while playing a playlist.\n * It is made to work with a single playlist.\n */\nimport moment from 'moment-timezone'\nimport { mapActions, mapGetters } from 'vuex'\nimport { fabric } from 'fabric'\n\nimport { roundToFrame } from '../../../lib/video'\nimport AnnotationBar from './AnnotationBar'\nimport ButtonSimple from '../../widgets/ButtonSimple'\nimport Combobox from '../../widgets/Combobox'\nimport ComboboxStyled from '../../widgets/ComboboxStyled'\nimport DeleteModal from '../../modals/DeleteModal'\nimport EditPlaylistModal from '../../modals/EditPlaylistModal'\nimport PlaylistedShot from './PlaylistedShot'\nimport RawVideoPlayer from './RawVideoPlayer'\nimport Spinner from '../../widgets/Spinner'\nimport TaskInfo from '../../sides/TaskInfo'\n\nimport { annotationMixin } from '../../previews/annotation_mixin'\n\nexport default {\n  name: 'playlist-player',\n  mixins: [annotationMixin],\n\n  components: {\n    AnnotationBar,\n    ButtonSimple,\n    Combobox,\n    ComboboxStyled,\n    DeleteModal,\n    EditPlaylistModal,\n    PlaylistedShot,\n    RawVideoPlayer,\n    Spinner,\n    TaskInfo\n  },\n\n  props: {\n    playlist: {\n      type: Object,\n      default: () => {}\n    },\n    shots: {\n      type: Object,\n      default: () => {}\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data () {\n    return {\n      annotations: [],\n      currentTime: '00:00.00',\n      currentTimeRaw: 0,\n      forClient: 'false',\n      fabricCanvas: null,\n      isDlButtonsHidden: true,\n      isCommentsHidden: true,\n      isComparing: false,\n      isDrawing: false,\n      isPlaying: false,\n      isShotsHidden: false,\n      maxDuration: '00:00.00',\n      maxDurationRaw: 0,\n      playingShotIndex: 0,\n      shotList: [],\n      shotListToCompare: [],\n      task: null,\n      taskTypeOptions: [],\n      taskTypeToCompare: null,\n      modals: {\n        edit: false,\n        delete: false\n      },\n      loading: {\n        playlists: false,\n        editPlaylist: false,\n        deletePlaylist: false\n      },\n      errors: {\n        playlists: false,\n        editPlaylist: false,\n        deletePlaylist: false\n      },\n      forClientOptions: [\n        { label: this.$t('playlists.for_client'), value: 'true' },\n        { label: this.$t('playlists.for_studio'), value: 'false' }\n      ]\n    }\n  },\n\n  mounted () {\n    this.shotList = Object.values(this.shots)\n    this.updateProgressBar()\n    this.$nextTick(() => {\n      window.addEventListener('keydown', this.onKeyDown, false)\n      window.addEventListener('resize', this.onWindowResize)\n      if (!this.$el.nomousemove) this.$el.onmousemove = this.onMouseMove\n      this.setupCanvas()\n    })\n  },\n\n  beforeDestroy () {\n    window.removeEventListener('keydown', this.onKeyDown)\n    window.removeEventListener('resize', this.onWindowResize)\n    this.$el.onmousemove = null\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction',\n      'isCurrentUserClient',\n      'isCurrentUserManager',\n      'taskMap',\n      'taskTypeMap',\n      'user'\n    ]),\n\n    isFullScreenEnabled () {\n      return !!(\n        document.fullscreenEnabled ||\n        document.mozFullScreenEnabled ||\n        document.msFullscreenEnabled ||\n        document.webkitSupportsFullscreen ||\n\n        document.webkitFullscreenEnabled ||\n        document.createElement('video').webkitRequestFullScreen\n      )\n    },\n\n    zipDlPath () {\n      return `/api/data/playlists/${this.playlist.id}/download/zip`\n    },\n\n    canvas () {\n      return this.$refs['canvas-wrapper']\n    },\n\n    container () {\n      return this.$refs.container\n    },\n\n    currentFrame () {\n      return `${Math.floor(this.currentTimeRaw * this.fps)}`.padStart(3, '0')\n    },\n\n    fps () {\n      return this.currentProduction.fps || 24\n    },\n\n    rawPlayer () {\n      return this.$refs['raw-player']\n    },\n\n    rawPlayerComparison () {\n      return this.$refs['raw-player-comparison']\n    },\n\n    progress () {\n      return this.$refs.progress\n    },\n\n    progressBar () {\n      return this.$refs['progress-bar']\n    },\n\n    progressCursor () {\n      return this.$refs['progress-cursor']\n    },\n\n    video () {\n      return this.$refs.movie\n    },\n\n    deleteText () {\n      if (this.playlist) {\n        return this.$t('playlists.delete_text', { name: this.playlist.name })\n      } else {\n        return ''\n      }\n    },\n\n    timezone () {\n      return this.user.timezone || moment.tz.guess()\n    },\n\n    nbCommentedShots () {\n      const isCommentedByClient = shot => shot.is_commented\n      return this.shotList.filter(isCommentedByClient).length\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'deletePlaylist',\n      'editPlaylist',\n      'removeBuildJob',\n      'runPlaylistBuild'\n    ]),\n\n    getBuildPath (job) {\n      return `/api/data/playlists/${this.playlist.id}/jobs/${job.id}/build/mp4`\n    },\n\n    formatDate (creationDate) {\n      const date = moment.tz(creationDate, 'UTC').tz(this.timezone)\n      return date.format('YYYY-MM-DD HH:mm')\n    },\n\n    formatTime (seconds) {\n      let milliseconds = `.${Math.round((seconds % 1) * 100)}`\n      if (milliseconds.length === 2) milliseconds += '0'\n      try {\n        return new Date(1000 * seconds)\n          .toISOString()\n          .substr(14, 5) + milliseconds\n      } catch (err) {\n        console.log(err)\n        return '00:00.00'\n      }\n    },\n\n    getTimelinePosition (time, index) {\n      if (this.$refs.movie) {\n        let position = Math.round(\n          (time / this.$refs.movie.duration) * this.progress.offsetWidth\n        )\n        position = position - index * 10 - 5\n        if (position < 0) position = 0\n        if (position + 10 > this.progress.offsetWidth) {\n          position = position - 5\n        }\n        return position\n      } else {\n        return 0\n      }\n    },\n\n    displayBars () {\n      this.$refs['header'].style.display = 'flex'\n      this.$refs['button-bar'].style.display = 'flex'\n      if (this.$refs['button-bar']) {\n        this.$refs['playlist-progress'].style.display = 'flex'\n        this.$refs['button-bar'].style.opacity = 1\n        this.$refs['playlist-progress'].style.opacity = 1\n      }\n      this.$refs['header'].style.opacity = 1\n      this.$refs['container'].style.cursor = 'default'\n    },\n\n    hideBars () {\n      this.$refs['header'].style.opacity = 0\n      this.$refs['button-bar'].style.opacity = 0\n      this.$refs['playlist-progress'].style.opacity = 0\n      setTimeout(() => {\n        this.$refs['header'].style.display = 'none'\n        this.$refs['button-bar'].style.display = 'none'\n        this.$refs['playlist-progress'].style.display = 'none'\n        this.$refs['container'].style.cursor = 'none'\n      }, 500)\n    },\n\n    showEditModal () {\n      this.modals.edit = true\n    },\n\n    hideEditModal () {\n      this.modals.edit = false\n    },\n\n    showDeleteModal () {\n      this.modals.delete = true\n    },\n\n    hideDeleteModal () {\n      this.modals.delete = false\n    },\n\n    confirmRemovePlaylist () {\n      this.loading.deletePlaylist = true\n      this.errors.deletePlaylist = false\n      this.deletePlaylist({\n        playlist: this.playlist,\n        callback: (err) => {\n          if (err) this.errors.deletePlaylist = true\n          this.loading.deletePlaylist = false\n          this.$emit('playlist-deleted')\n          this.modals.delete = false\n        }\n      })\n    },\n\n    confirmEditPlaylist (form) {\n      this.loading.editPlaylist = true\n      this.errors.editPlaylist = false\n      this.editPlaylist({\n        data: {\n          name: form.name,\n          id: this.playlist.id\n        },\n        callback: (err) => {\n          if (err) this.errors.editPlaylist = true\n          this.loading.editPlaylist = false\n          this.modals.edit = false\n          this.playlist.name = form.name\n        }\n      })\n    },\n\n    updateProgressBar () {\n      const factor = this.currentTimeRaw / this.maxDurationRaw\n      this.progress.value = this.currentTimeRaw\n      this.progressBar.style.width = Math.floor(factor * 100) + '%'\n      const progressCoordinates = this.progress.getBoundingClientRect()\n      const x = progressCoordinates.width * factor + progressCoordinates.x\n      this.progressCursor.style.left = Math.round(x - 7) + 'px'\n      this.progressCursor.style.top = Math.round(progressCoordinates.y - 3) + 'px'\n    },\n\n    updateTaskPanel () {\n      if (this.shotList.length > 0) {\n        const shot = this.shotList[this.playingShotIndex]\n        if (shot) this.task = this.taskMap[shot.preview_file_task_id]\n        else this.task = null\n      } else {\n        this.task = null\n      }\n    },\n\n    scrollToShot (index) {\n      const shotEl = this.$refs['shot-' + index]\n      if (shotEl && shotEl[0]) {\n        const shotWidget = shotEl[0].$el\n        const playlistEl = this.$refs['playlisted-shots']\n        const shot = this.shotList[index]\n        this.annotations = shot.preview_file_annotations || []\n        if (shotWidget) {\n          const margin = 30\n          const rect = shotWidget.getBoundingClientRect()\n          const listRect = playlistEl.getBoundingClientRect()\n          const isRight = rect.right > listRect.right - margin\n          const isLeft = rect.left < listRect.left - margin\n\n          if (isLeft) {\n            const scrollingRequired = rect.left - listRect.left - margin\n            playlistEl.scrollLeft = playlistEl.scrollLeft + scrollingRequired\n          } else if (isRight) {\n            const scrollingRequired = rect.right - listRect.right + margin\n            playlistEl.scrollLeft = playlistEl.scrollLeft + scrollingRequired\n          }\n        }\n      }\n    },\n\n    scrollToRight () {\n      if (this.shotList.length > 0) {\n        this.scrollToShot(this.shotList.length - 1)\n      }\n    },\n\n    play () {\n      this.rawPlayer.play()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].play()\n      }\n      this.isPlaying = this.$refs['raw-player'].isPlaying\n      this.hideCanvas()\n      this.clearCanvas()\n    },\n\n    pause () {\n      this.showCanvas()\n      this.rawPlayer.pause()\n      if (this.isComparing) this.$refs['raw-player-comparison'].pause()\n      this.isPlaying = false\n    },\n\n    playShot (shotIndex) {\n      const shot = this.shotList[shotIndex]\n      this.hideCanvas()\n      this.clearCanvas()\n      if (shot.preview_file_extension === 'mp4') {\n        this.annotations = shot.preview_file_annotations || []\n        this.playingShotIndex = shotIndex\n        this.scrollToShot(this.playingShotIndex)\n        this.rawPlayer.loadShot(shotIndex)\n        if (this.isComparing) {\n          this.$refs['raw-player-comparison'].loadShot(shotIndex)\n        }\n        if (this.isPlaying) {\n          this.rawPlayer.play()\n          if (this.isComparing) this.$refs['raw-player-comparison'].play()\n        }\n      } else {\n        this.annotations = []\n      }\n    },\n\n    goPreviousFrame () {\n      this.clearCanvas()\n      this.rawPlayer.goPreviousFrame()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].goPreviousFrame()\n      }\n      const annotation = this.getAnnotation(this.rawPlayer.getCurrentTime())\n      if (annotation) this.loadAnnotation(annotation)\n    },\n\n    goNextFrame () {\n      this.clearCanvas()\n      this.rawPlayer.goNextFrame()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].goNextFrame()\n      }\n      const annotation = this.getAnnotation(this.rawPlayer.getCurrentTime())\n      if (annotation) this.loadAnnotation(annotation)\n    },\n\n    removeShot (shot) {\n      this.$emit('remove-shot', shot)\n      this.$options.silent = true\n      const shotIndex = this.shotList.findIndex(s => s.id === shot.id)\n      this.shotList.splice(shotIndex, 1)\n      setTimeout(() => {\n        this.$options.silent = false\n      }, 1000)\n    },\n\n    setFullScreen () {\n      if (this.container.requestFullscreen) {\n        this.container.requestFullscreen()\n      } else if (this.container.mozRequestFullScreen) {\n        this.container.mozRequestFullScreen()\n      } else if (this.container.webkitRequestFullScreen) {\n        this.container.webkitRequestFullScreen()\n      } else if (this.container.msRequestFullscreen) {\n        this.container.msRequestFullscreen()\n      }\n      this.container.setAttribute('data-fullscreen', !!true)\n    },\n\n    exitFullScreen () {\n      if (document.exitFullscreen) {\n        document.exitFullscreen()\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen()\n      } else if (document.webkitCancelFullScreen) {\n        document.webkitCancelFullScreen()\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen()\n      }\n      this.container.setAttribute('data-fullscreen', !!false)\n    },\n\n    isFullScreen () {\n      return !!(\n        document.fullScreen ||\n        document.webkitIsFullScreen ||\n        document.mozFullScreen ||\n        document.msFullscreenElement ||\n        document.fullscreenElement\n      )\n    },\n\n    onProgressBarClicked (e) {\n      this.clearCanvas()\n      var pos =\n        (e.pageX - this.progress.offsetLeft) / this.progress.offsetWidth\n      const currentTime = pos * this.maxDurationRaw\n      this.rawPlayer.setCurrentTime(currentTime)\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].setCurrentTime(currentTime)\n      }\n    },\n\n    onPreviousFrameClicked () {\n      this.goPreviousFrame()\n    },\n\n    onNextFrameClicked () {\n      this.goNextFrame()\n    },\n\n    onPlayPreviousShotClicked () {\n      this.rawPlayer.loadPreviousShot()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].loadPreviousShot()\n      }\n      if (this.isPlaying) this.play()\n    },\n\n    onPlayNextShotClicked () {\n      this.rawPlayer.loadNextShot()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].loadNextShot()\n      }\n      if (this.isPlaying) this.play()\n    },\n\n    onPlayPauseClicked () {\n      if (!this.isPlaying) {\n        this.play()\n      } else {\n        this.pause()\n      }\n    },\n\n    onFullscreenClicked () {\n      if (this.isFullScreen()) {\n        this.exitFullScreen()\n      } else {\n        this.setFullScreen()\n      }\n    },\n\n    onKeyDown (event) {\n      this.displayBars()\n      if (!['INPUT', 'TEXTAREA'].includes(event.target.tagName)) {\n        if (event.keyCode === 46 && this.fabricCanvas) {\n          this.deleteSelection()\n        } else if (event.keyCode === 37) {\n          event.preventDefault()\n          event.stopPropagation()\n          this.goPreviousFrame()\n        } else if (event.keyCode === 39) {\n          event.preventDefault()\n          event.stopPropagation()\n          this.goNextFrame()\n        } else if (event.keyCode === 32) {\n          event.preventDefault()\n          event.stopPropagation()\n          this.onPlayPauseClicked()\n        }\n      }\n    },\n\n    onWindowResize () {\n      const now = (new Date().getTime())\n      this.lastCall = this.lastCall || 0\n      if (now - this.lastCall > 600) {\n        this.lastCall = now\n        this.$nextTick(this.resetHeight)\n      }\n    },\n\n    onFilmClicked () {\n      this.isShotsHidden = !this.isShotsHidden\n      this.$nextTick(() => {\n        this.resetHeight()\n        this.scrollToShot(this.playingShotIndex)\n      })\n    },\n\n    onCommentClicked () {\n      let height = this.$refs['video-container'].offsetHeight\n      this.isCommentsHidden = !this.isCommentsHidden\n      if (!this.isCommentsHidden) {\n        this.$refs['task-info'].$el.style.height = `${height}px`\n      }\n      this.$nextTick(() => {\n        this.$refs['task-info'].focusCommentTextarea()\n        this.resetHeight()\n      })\n    },\n\n    onCompareClicked () {\n      this.isComparing = !this.isComparing\n    },\n\n    onPlayClicked () {\n      if (this.rawPlayer.isPlaying) {\n        this.pause()\n      } else {\n        this.play()\n      }\n    },\n\n    onTimeUpdate () {\n      if (this.rawPlayer.currentPlayer) {\n        this.currentTimeRaw = this.rawPlayer.currentPlayer.currentTime\n      } else {\n        this.currentTimeRaw = 0\n      }\n      this.currentTime = this.formatTime(this.currentTimeRaw)\n      this.updateProgressBar()\n    },\n\n    onMaxDurationUpdate (duration) {\n      this.maxDurationRaw = duration\n      this.maxDuration = this.formatTime(duration)\n      this.progress.setAttribute('max', this.maxDurationRaw)\n    },\n\n    onMouseMove () {\n      const buttonBar = this.$refs['button-bar']\n      if (buttonBar && buttonBar.style.opacity !== 1) {\n        this.displayBars()\n      }\n      let isMovieFullScreen =\n        this.isFullScreen() && this.isShotsHidden && this.isCommentsHidden\n      if (isMovieFullScreen) {\n        if (this.timer) clearTimeout(this.timer)\n        this.timer = setTimeout(() => {\n          let isMovieFullScreen =\n            this.isFullScreen() && this.isShotsHidden && this.isCommentsHidden\n          if (isMovieFullScreen) this.hideBars()\n        }, 2000)\n      }\n    },\n\n    onShotChange (shotIndex) {\n      this.playingShotIndex = shotIndex\n      if (this.rawPlayerComparison) {\n        const comparisonIndex = this.rawPlayerComparison.playingIndex\n        if (comparisonIndex < shotIndex) {\n          this.rawPlayerComparison.playNext()\n        } else {\n          this.rawPlayerComparison.setCurrentTime(0)\n          this.rawPlayerComparison.play()\n        }\n      }\n      if (!this.$options.silent) this.scrollToShot(this.playingShotIndex)\n    },\n\n    onPreviewChanged (shot, previewFileId) {\n      this.$emit('preview-changed', shot, previewFileId)\n    },\n\n    onShotDropped (info) {\n      this.$emit('order-change', info)\n    },\n\n    resetHeight () {\n      this.$nextTick(() => {\n        let height = this.$refs['container'].offsetHeight\n        height -= this.$refs['header'].offsetHeight\n        height -= this.$refs['playlist-progress'].offsetHeight\n        if (this.$refs['button-bar']) {\n          height -= this.$refs['button-bar'].offsetHeight\n        }\n        if (this.$refs['playlisted-shots']) {\n          height -= this.$refs['playlisted-shots'].offsetHeight\n        }\n        if (this.$refs['playlist-annotation']) {\n          height -= this.$refs['playlist-annotation'].$el.offsetHeight\n        }\n        this.$refs['video-container'].style.height = `${height}px`\n        if (!this.isCommentsHidden) {\n          this.$refs['task-info'].$el.style.height = `${height}px`\n        }\n        this.rawPlayer.resetHeight()\n        if (this.isComparing) {\n          this.$refs['raw-player-comparison'].resetHeight()\n        }\n        this.$nextTick(() => {\n          this.resetCanvas()\n          this.updateProgressBar()\n        })\n      })\n    },\n\n    resetCanvas () {\n      this.resetCanvasSize()\n      this.fabricCanvas.renderAll()\n      this.clearCanvas()\n      const annotation = this.getAnnotation(this.currentTimeRaw)\n      if (annotation) this.loadAnnotation(annotation)\n    },\n\n    resetCanvasSize () {\n      if (this.rawPlayer) {\n        const width = this.rawPlayer.$el.offsetWidth\n        const height = this.rawPlayer.$el.offsetHeight\n        this.fabricCanvas.setDimensions({ width, height })\n      }\n    },\n\n    rebuildComparisonOptions () {\n      const shots = Object.values(this.shots)\n      if (shots.length > 0) {\n        let taskTypeIds = Object.keys(shots[0].preview_files)\n        Object.values(this.shots).forEach((shot) => {\n          const shotTaskTypeIds = Object.keys(shot.preview_files)\n          taskTypeIds = taskTypeIds.filter(\n            value => shotTaskTypeIds.includes(value)\n          )\n        })\n        this.taskTypeOptions = taskTypeIds.map((taskTypeId) => {\n          return {\n            label: this.taskTypeMap[taskTypeId].name,\n            value: this.taskTypeMap[taskTypeId].id\n          }\n        })\n        if (this.taskTypeOptions.length > 0) {\n          this.taskTypeToCompare = this.taskTypeOptions[0].value\n        }\n      } else {\n        this.taskTypeOptions = []\n      }\n    },\n\n    rebuildShotListToCompare () {\n      if (this.taskTypeToCompare) {\n        this.shotListToCompare = this.shotList.map((shot) => {\n          const preview = shot.preview_files[this.taskTypeToCompare][0]\n          return ({\n            preview_file_id: preview.id,\n            preview_file_extension: 'mp4'\n          })\n        })\n      } else {\n        this.buildShotListToCompare = []\n      }\n    },\n\n    resetComparison () {\n      this.rebuildShotListToCompare()\n      this.$nextTick(() => {\n        this.pause()\n        const player = this.$refs['raw-player-comparison']\n        player.loadShot(this.playingShotIndex)\n        player.setCurrentTime(this.currentTimeRaw)\n      })\n    },\n\n    clearCanvas () {\n      if (this.fabricCanvas) {\n        this.fabricCanvas.clear()\n      }\n    },\n\n    onAnnotateClicked () {\n      this.showCanvas()\n      if (this.isDrawing) {\n        this.fabricCanvas.isDrawingMode = false\n        this.isDrawing = false\n      } else {\n        this.fabricCanvas.isDrawingMode = true\n        this.isDrawing = true\n      }\n    },\n\n    showCanvas () {\n      this.canvas.style.display = 'block'\n    },\n\n    hideCanvas () {\n      this.canvas.style.display = 'none'\n    },\n\n    setupCanvas () {\n      this.fabricCanvas = new fabric.Canvas('annotation-canvas', {\n        width: 400,\n        height: 400\n      })\n      this.fabricCanvas.freeDrawingBrush.color = '#ff3860'\n      this.fabricCanvas.freeDrawingBrush.width = 4\n      this.fabricCanvas.on('object:moved', this.saveAnnotations)\n      this.fabricCanvas.on('mouse:up', () => {\n        if (this.isDrawing) this.saveAnnotations()\n      })\n      this.resetCanvas()\n      this.fabricCanvas.renderAll()\n    },\n\n    loadAnnotation (annotation) {\n      this.pause()\n      const currentTime = annotation.time || 0\n      this.rawPlayer.setCurrentTime(currentTime)\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].setCurrentTime(currentTime)\n      }\n      this.currentTimeRaw = currentTime\n      this.updateProgressBar()\n\n      this.fabricCanvas.isDrawingMode = false\n      this.isDrawing = false\n      this.clearCanvas()\n\n      let scaleMultiplierX = 1\n      let scaleMultiplierY = 1\n      if (annotation.width) {\n        scaleMultiplierX = this.fabricCanvas.width / annotation.width\n        scaleMultiplierY = this.fabricCanvas.width / annotation.width\n      }\n      if (annotation.height) {\n        scaleMultiplierY = this.fabricCanvas.height / annotation.height\n      }\n\n      annotation.drawing.objects.forEach((obj) => {\n        const base = {\n          left: obj.left * scaleMultiplierX,\n          top: obj.top * scaleMultiplierY,\n          fill: 'transparent',\n          stroke: '#ff3860',\n          strokeWidth: 4,\n          radius: obj.radius,\n          width: obj.width,\n          height: obj.height,\n          scaleX: obj.scaleX * scaleMultiplierX,\n          scaleY: obj.scaleY * scaleMultiplierY\n        }\n        if (obj.type === 'path') {\n          let strokeMultiplier = 1\n          if (obj.canvasWidth) {\n            strokeMultiplier = obj.canvasWidth / this.fabricCanvas.width\n          }\n          const path = new fabric.Path(\n            obj.path,\n            {\n              ...base,\n              strokeWidth: 3 * strokeMultiplier,\n              canvasWidth: obj.canvasWidth\n            }\n          )\n          path.setControlsVisibility({\n            mt: false,\n            mb: false,\n            ml: false,\n            mr: false,\n            bl: false,\n            br: false,\n            tl: false,\n            tr: false,\n            mtr: false\n          })\n          this.fabricCanvas.add(path)\n        }\n      })\n    },\n\n    saveAnnotations () {\n      const currentTime = roundToFrame(this.currentTimeRaw, this.fps) || 0\n      if (!this.annotations) return\n      const annotation = this.getAnnotation(currentTime)\n      const annotations = this.getNewAnnotations(currentTime, annotation)\n      const shot = this.shotList[this.playingShotIndex]\n      const preview = {\n        id: shot.preview_file_id,\n        task_id: shot.preview_file_task_id,\n        annotations: shot.preview_file_annotations\n      }\n      this.$emit('annotationchanged', {\n        preview: preview,\n        annotations: annotations\n      })\n    },\n\n    onDeleteClicked () {\n      this.deleteSelection()\n    },\n\n    deleteSelection () {\n      this.fabricCanvas.remove(this.fabricCanvas.getActiveObject())\n      this.saveAnnotations()\n    },\n\n    getAnnotation (time) {\n      time = roundToFrame(time, this.fps)\n      if (this.annotations) {\n        return this.annotations.find(\n          (annotation) => annotation.time === time\n        )\n      } else {\n        return null\n      }\n    },\n\n    toggleDlButtons () {\n      this.isDlButtonsHidden = !this.isDlButtonsHidden\n    },\n\n    onBuildClicked () {\n      this.runPlaylistBuild(this.playlist)\n    },\n\n    onRemoveBuildJob (job) {\n      job.playlist_id = this.playlist.id\n      this.removeBuildJob(job)\n    }\n  },\n\n  watch: {\n    playingShotIndex () {\n      this.updateTaskPanel()\n    },\n\n    isComparing () {\n      if (this.isComparing) {\n        this.resetComparison()\n      }\n      this.$nextTick(this.resetCanvas)\n    },\n\n    taskTypeToCompare () {\n      if (this.isComparing) {\n        this.resetComparison()\n      }\n    },\n\n    shots () {\n      const playlistEl = this.$refs['playlisted-shots']\n      const scrollLeft = playlistEl ? playlistEl.scrollLeft : 0\n      this.shotList = Object.values(this.shots)\n      this.playingShotIndex = 0\n      this.pause()\n      this.rawPlayer.setCurrentTime(0)\n      this.currentTimeRaw = 0\n      this.updateProgressBar()\n      this.updateTaskPanel()\n      this.rebuildComparisonOptions()\n      this.clearCanvas()\n      this.annotations = []\n      if (this.shotList.length === 0) {\n        this.rawPlayer.clear()\n        if (this.isComparing) {\n          this.$refs['raw-player-comparison'].clear()\n        }\n        this.maxDurationRaw = 0\n        this.maxDuration = '00:00.00'\n      } else {\n        if (\n          this.shotList[0].preview_file_extension !== 'mp4'\n        ) {\n          this.$nextTick(() => {\n            this.rawPlayer.loadNextShot()\n          })\n        }\n        this.$nextTick(() => {\n          if (playlistEl) playlistEl.scrollLeft = scrollLeft\n        })\n      }\n      this.resetHeight()\n    },\n\n    forClient () {\n      const forClient = this.forClient === 'true'\n      console.log(forClient, this.playlist.for_client)\n      if (this.playlist.for_client !== forClient) {\n        console.log('emit', forClient)\n        this.$emit('for-client-changed', forClient)\n      }\n    },\n\n    playlist () {\n      this.forClient = Boolean(this.playlist.for_client).toString()\n      this.$nextTick(() => {\n        this.updateProgressBar()\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.playlist-player {\n  background: $dark-grey;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .playlist-button {\n    margin: 0;\n    background: $dark-grey-light;\n    border: 0;\n    border-radius: 0;\n    color: $white-grey;\n\n    &:hover {\n      background: $dark-grey-lighter;\n    }\n\n    &.active {\n      color: $green;\n    }\n  }\n}\n\n.playlist-header {\n  color: $white-grey;\n  background: $dark-grey-light;\n\n  .playlist-name {\n    flex: 1;\n    font-size: 1.5em;\n    padding: 10px;\n    padding-left: 1em;\n  }\n\n  .edit-button,\n  .delete-button {\n    height: 50px;\n    width: 50px;\n  }\n}\n\n.playlisted-shots,\n.playlist-progress,\n.playlist-footer {\n  background: $dark-grey-light;\n  color: $white-grey;\n}\n\n.playlisted-shots {\n  border-top: 1px solid $dark-grey-strong;\n  padding: 0.5em;\n  overflow-x: auto;\n  align-items: flex-start;\n  height: 240px;\n  min-height: 240px;\n}\n\n.task-info-column {\n  min-width: 450px;\n  max-width: 450px;\n  overflow-y: auto;\n}\n\n.loading-background {\n  width: 100%;\n  height: 100%;\n  background: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.spinner {\n  margin: auto;\n}\n\n.icon {\n  margin-top: -4px;\n  height: 20px;\n}\n\n.smaller {\n  height: 16px;\n}\n\n.right {\n  margin-left: auto;\n}\n\n.video-player {\n  display: flex;\n  flex-direction: column;\n  align-content: flex-end;\n  height: 100%;\n}\n\n.video-wrapper {\n  flex: 1;\n  display: flex;\n  background: black;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  margin: auto;\n  width: 100%;\n}\n\n.annotation-movie {\n  margin: auto;\n  width: 100%;\n}\n\n.time-indicator {\n  color: $light-grey;\n  padding-left: 0.8em;\n  margin-right: 0;\n}\n\n.video-container {\n  position: relative;\n}\n\n.canvas-wrapper {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.buttons {\n  height: 32px;\n}\n\n.comparison-combobox {\n  margin-bottom: 0;\n}\n\n.buttons .comparison-button {\n  margin-left: 1em;\n}\n\nprogress::-moz-progress-bar {\n  background-color: #43B581;\n}\n\nprogress::-webkit-progress-value {\n  background-color: #43B581;\n}\n\nprogress {\n  width: 100%;\n  border-radius: 0;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: $grey;\n  height: 8px;\n  display: block;\n}\n\n.progress span#progress-bar {\n  width: 100%;\n  border-radius: 0;\n  margin: 0;\n  padding: 0;\n  background-color: #43B581;\n}\n\n.video-progress {\n  cursor: pointer;\n  width: 100%;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: $grey;\n  height: 8px;\n}\n\n.mr1 {\n  margin-right: 1em;\n}\n\n.playlist-progress {\n  width: 100%;\n}\n\n.playlist-header,\n.playlist-progress,\n.playlist-progress {\n  transition: opacity 0.5s ease\n}\n\n.progress-cursor {\n  position: absolute;\n  display: block;\n  background-color: #43B581;\n  border-radius: 50%;\n  width: 14px;\n  height: 14px;\n  z-index: 200;\n  cursor: pointer;\n}\n\n.comparison-list,\n.comparison-list p,\n.comparison-list select {\n  font-size: 0.8em;\n}\n.comparison-list select {\n  height: 2.2em;\n}\n\n.dl-button {\n  background: $dark-grey;\n  border: 1px solid $dark-grey;\n  color: $white;\n  position: absolute;\n  width: 180px;\n  padding: 8px;\n\n  &:hover {\n    background: $dark-grey-light;\n  }\n\n  &.zip-button {\n    left: -110px;\n    top: -200px;\n  }\n\n  &.mp4-button {\n    left: -110px;\n    top: -160px;\n    cursor: pointer;\n  }\n}\n\n.build-list {\n  background: $dark-grey;\n  border: 1px solid $dark-grey;\n  position: absolute;\n  width: 180px;\n  left: -110px;\n  top: -120px;\n  height: 120px;\n  overflow-y: auto;\n  padding: 8px;\n  z-index: 300;\n}\n\n.build-title {\n  margin-bottom: 0.5em;\n}\n\n.delete-job-button {\n  background: transparent;\n  border-radius: 50%;\n  color: $light-grey-light;\n  cursor: pointer;\n  padding: 3px;\n\n  &:hover {\n    background: $dark-grey-light;\n  }\n}\n\n.build-spinner {\n  width: 15px;\n  max-width: 15px;\n}\n\n.spinner {\n  margin-top: 80px;\n  margin-left: 1em;\n}\n\n.progress {\n  width: 100px;\n  height: 10px;\n  margin-right: 1em;\n  border-radius: 5px;\n  background: $grey;\n\n  span {\n    background: $dark-purple;\n    height: 10px;\n    display: block;\n\n    &.complete {\n      background: $green;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlaylistPlayer.vue?vue&type=template&id=257e3cae&scoped=true&\"\nimport script from \"./PlaylistPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./PlaylistPlayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlaylistPlayer.vue?vue&type=style&index=0&id=257e3cae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"257e3cae\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"productions page fixed-page\">\n    <div class=\"columns\">\n\n      <div class=\"playlist-list-column column\">\n        <button\n          :class=\"{\n            button: true,\n            'is-loading': loading.addPlaylist\n          }\"\n          @click=\"addPlaylist\"\n          key=\"new-playlist-button\"\n          v-if=\"isCurrentUserManager\"\n        >\n          <plus-icon class=\"icon is-small\" />\n          {{ $t('playlists.new_playlist') }}\n        </button>\n\n        <div\n          class=\"playlists\"\n          v-if=\"!loading.playlists\"\n        >\n          <router-link\n            :key=\"playlist.id\"\n            :to=\"getPlaylistPath(playlist.id)\"\n            :class=\"{\n              'playlist-item': true,\n              'for-client': playlist.for_client,\n              selected: playlist.id === currentPlaylist.id\n            }\"\n            v-for=\"playlist in playlists\"\n          >\n            <span>\n              {{ playlist.name }}\n            </span>\n            <span class=\"playlist-date\" title=\"last modified\">\n              {{ formatDate(playlist.updated_at)}}\n            </span>\n          </router-link>\n        </div>\n        <spinner\n          class=\"mt2\"\n          v-else\n        />\n        <error-text\n          text=\"$t('playlists.loading_error')\"\n          v-if=\"errors.playlistLoading\"\n        />\n      </div>\n\n      <div class=\"playlist-column column\">\n        <playlist-player\n          ref=\"playlist-player\"\n          :playlist=\"currentPlaylist\"\n          :shots=\"currentShots\"\n          :is-loading=\"loading.playlist\"\n          @preview-changed=\"onPreviewChanged\"\n          @playlist-deleted=\"goFirstPlaylist\"\n          @remove-shot=\"removeShot\"\n          @order-change=\"onOrderChange\"\n          @annotationchanged=\"onAnnotationChanged\"\n          @for-client-changed=\"onForClientChanged\"\n        />\n      </div>\n\n      <div\n        class=\"addition-column column\"\n        v-if=\"isCurrentUserManager\"\n      >\n        <spinner\n          class=\"mt2\"\n          key=\"shot-loader\"\n          v-if=\"isShotsLoading\"\n        />\n        <div v-else>\n          <div class=\"addition-header\">\n            <page-subtitle\n              :text=\"$t('playlists.add_shots')\"\n            />\n            <button\n              :class=\"{\n                button: true,\n                'add-sequence': true,\n                'is-loading': this.loading.addWeekly\n              }\"\n              :disabled=\"isAdditionLoading\"\n              @click=\"addAllPending\"\n            >\n              {{ $t('playlists.build_weekly') }}\n            </button>\n            <button\n              :class=\"{\n                button: true,\n                'add-sequence': true,\n                'is-loading': this.loading.addDaily\n              }\"\n              :disabled=\"isAdditionLoading\"\n              @click=\"addDailyPending\"\n            >\n              {{ $t('playlists.build_daily') }}\n            </button>\n\n            <div\n              class=\"mt1\"\n              key=\"shot-list-header\"\n              v-if=\"episodes.length > 0 || !isTVShow\"\n            >\n              <div>\n                <combobox\n                  class=\"select-sequence-combobox\"\n                  :label=\"$t('shots.fields.sequence')\"\n                  :options=\"sequenceOptions\"\n                  v-model=\"sequenceId\"\n                  v-if=\"sequenceOptions.length > 0\"\n                />\n                <div v-if=\"sequenceOptions.length === 0\">\n                  {{ $t('playlists.no_sequence_for_episode') }}\n                </div>\n                <button\n                  :class=\"{\n                    button: true,\n                    'add-sequence': true,\n                    'is-loading': this.loading.addSequence\n                  }\"\n                  :disabled=\"isAdditionLoading\"\n                  @click=\"addSequence\"\n                  v-if=\"sequenceOptions.length > 0\"\n                >\n                  {{ $t('playlists.add_sequence') }}\n                </button>\n              </div>\n            </div>\n            <div v-else>\n              {{ $t('playlists.no_shot_for_production') }}\n            </div>\n\n            <div v-if=\"sequenceShots.length === 0 && sequenceId\">\n              {{ $t('playlists.no_shot_for_sequence') }}\n            </div>\n          </div>\n\n          <div\n            :class=\"{\n              'addition-shot': true,\n              playlisted: currentShots[shot.id] !== undefined\n            }\"\n            :key=\"shot.id\"\n            @click.prevent=\"addShotToPlaylist(shot)\"\n            v-for=\"shot in sequenceShots\"\n          >\n            <span class=\"thumbnail-wrapper\">\n              <light-entity-thumbnail\n                :preview-file-id=\"shot.preview_file_id\"\n                :width=\"150\"\n                :height=\"100\"\n              />\n            </span>\n            {{ shot.name }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport moment from 'moment-timezone'\nimport { mapGetters, mapActions } from 'vuex'\nimport { PlusIcon } from 'vue-feather-icons'\nimport { formatDate } from '../../lib/time'\nimport {\n  updateModelFromList,\n  removeModelFromList\n} from '../../lib/models'\n\nimport Combobox from '../widgets/Combobox'\nimport LightEntityThumbnail from '../widgets/LightEntityThumbnail'\nimport ErrorText from '../widgets/ErrorText'\nimport PageSubtitle from '../widgets/PageSubtitle'\nimport PlaylistPlayer from './playlists/PlaylistPlayer'\nimport Spinner from '../widgets/Spinner'\n\nexport default {\n  name: 'productions',\n\n  components: {\n    Combobox,\n    LightEntityThumbnail,\n    ErrorText,\n    PageSubtitle,\n    PlaylistPlayer,\n    PlusIcon,\n    Spinner\n  },\n\n  data () {\n    return {\n      currentPlaylist: { name: this.$t('playlists.no_selection') },\n      currentShot: 0,\n      currentShots: {},\n      sequenceId: null,\n      sequenceOptions: [],\n      sequenceShots: [],\n      modals: {\n        isDeleteDisplayed: false,\n        isEditDisplayed: false\n      },\n      loading: {\n        playlist: false,\n        playlists: false,\n        addPlaylist: false,\n        addDaily: false,\n        addSequence: false,\n        addWeekly: false,\n        deletePlaylist: false\n      },\n      errors: {\n        playlistLoading: false,\n        addPlaylist: false,\n        deletePlaylist: false\n      }\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'episodes',\n      'isShotsLoading',\n      'isTVShow',\n      'isCurrentUserManager',\n      'playlistMap',\n      'playlists',\n      'playlistsPath',\n      'playlistMap',\n      'sequences',\n      'shotMap',\n      'taskTypeMap'\n    ]),\n\n    isAdditionLoading () {\n      return (\n        this.loading.addSequence ||\n        this.loading.addWeekly ||\n        this.loading.addDaily\n      )\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'addNewBuildJob',\n      'addShotPreviewToPlaylist',\n      'changePlaylistOrder',\n      'changePlaylistPreview',\n      'editPlaylist',\n      'getPending',\n      'loadPlaylist',\n      'loadPlaylists',\n      'loadShotPreviewFiles',\n      'loadShots',\n      'markBuildJobAsDone',\n      'newPlaylist',\n      'refreshPlaylist',\n      'removeShotPreviewFromPlaylist',\n      'removeBuildJobFromList',\n      'updatePreviewAnnotation'\n    ]),\n\n    formatDate (dateString) {\n      return formatDate(dateString)\n    },\n\n    getPlaylistPath (playlistId, section) {\n      let route = {\n        name: section ? `${section}-playlist` : 'playlist',\n        params: {\n          production_id: this.currentProduction.id,\n          playlist_id: playlistId\n        }\n      }\n      if (this.isTVShow && this.currentEpisode) {\n        route.name = `episode-${route.name}`\n        route.params.episode_id = this.currentEpisode.id\n      }\n      return route\n    },\n\n    loadShotsData (callback) {\n      const loadPlaylists = () => {\n        if (this.episodes.length > 0 || !this.isTVShow) {\n          this.setAdditionSequences()\n        }\n        this.loadPlaylistsData()\n        if (callback) callback()\n      }\n\n      if (this.sequences.length === 0) {\n        this.loadShots(loadPlaylists)\n      } else {\n        loadPlaylists()\n      }\n    },\n\n    loadPlaylistsData () {\n      const setFirstPlaylist = () => {\n        this.setCurrentPlaylist(() => {\n          if (!this.currentPlaylist || !this.currentPlaylist.id) {\n            this.goFirstPlaylist()\n          }\n        })\n      }\n      if (this.playlists.length === 0) {\n        this.loading.playlists = true\n        this.loadPlaylists((err) => {\n          if (err) this.errors.loadPlaylists = true\n          this.loading.playlists = false\n          if (!err) setFirstPlaylist()\n        })\n      } else {\n        setFirstPlaylist()\n      }\n    },\n\n    rebuildCurrentShots () {\n      this.currentShots = {}\n      const tmpShots = {}\n      if (this.currentPlaylist && this.currentPlaylist.shots) {\n        this.currentPlaylist.shots.forEach((shotPreview) => {\n          this.addShotToCurrentShots(shotPreview, tmpShots)\n        })\n      }\n      this.currentShots = tmpShots\n    },\n\n    /*\n     * Add to current playlist the shot related to given preview.\n     * Use given preview as current preview for this shot and store other\n     * previews in given shot.\n     */\n    addShotToCurrentShots (previewFile, playlistShotMap) {\n      const shot = this.shotMap[previewFile.shot_id]\n      if (shot) {\n        const entityName =\n          shot.tasks.length > 0 ? shot.tasks[0].entity_name : shot.name\n        const playlistShot = {\n          id: previewFile.shot_id,\n          name: shot.name,\n          sequence_name: shot.sequence_name,\n          entity_name: entityName,\n          preview_files: previewFile.preview_files,\n          preview_file_id:\n            previewFile.id ||\n            previewFile.preview_file_id ||\n            shot.preview_file_id,\n          preview_file_extension:\n            previewFile.extension ||\n            previewFile.preview_file_extension ||\n            shot.preview_file_extension,\n          preview_file_task_id:\n            previewFile.task_id ||\n            previewFile.preview_file_task_id ||\n            shot.preview_file_task_id,\n          preview_file_annotations:\n            previewFile.annotations ||\n            previewFile.preview_file_annotations ||\n            shot.preview_file_annotations\n        }\n        playlistShotMap[previewFile.shot_id] = playlistShot\n        return playlistShot\n      } else {\n        return null\n      }\n    },\n\n    clearCurrentPlaylist () {\n      this.currentPlaylist = {}\n      this.currentShots = {}\n    },\n\n    resetPlaylist () {\n      this.clearCurrentPlaylist()\n      this.setCurrentPlaylist()\n    },\n\n    addPlaylist () {\n      const newPlaylist = {\n        name: `${moment().format('YYYY-MM-DD HH:mm:ss')}`,\n        production_id: this.currentProduction.id\n      }\n\n      if (this.isTVShow && this.currentEpisode) {\n        newPlaylist.episode_id = this.currentEpisode.id\n      }\n\n      this.loading.addPlaylist = true\n      this.errors.addPlaylist = false\n      this.newPlaylist({\n        data: newPlaylist,\n        callback: (err, playlist) => {\n          if (err) this.errors.addPlaylist = true\n          this.$router.push(this.getPlaylistPath(playlist.id))\n          this.loading.addPlaylist = false\n        }\n      })\n    },\n\n    setCurrentPlaylist (callback) {\n      const playlistId = this.$route.params.playlist_id\n      const playlist = this.playlistMap[playlistId]\n      this.loading.playlist = true\n      if (playlist) {\n        this.loadPlaylist({\n          playlist,\n          callback: (err, playlist) => {\n            this.loading.playlist = false\n            if (err) console.log(err)\n            this.currentPlaylist = playlist\n            this.rebuildCurrentShots()\n            if (callback) callback()\n          }\n        })\n      } else {\n        this.currentPlaylist = {\n          name: this.$t('playlists.no_selection')\n        }\n        this.currentShots = {}\n      }\n    },\n\n    goFirstPlaylist () {\n      if (this.playlists.length > 0) {\n        this.$router.push({\n          name: 'playlist',\n          params: {\n            production_id: this.currentProduction.id,\n            playlist_id: this.playlists[0].id\n          }\n        })\n      } else {\n        this.$router.push(this.playlistsPath)\n      }\n    },\n\n    clearAdditionColumn () {\n      this.sequenceOptions = []\n      this.sequenceId = null\n    },\n\n    setAdditionSequences () {\n      let sequences = []\n      if (this.isTVShow && this.currentEpisode) {\n        sequences = this.sequences.filter((sequence) => {\n          return sequence.parent_id === this.currentEpisode.id\n        })\n      } else {\n        sequences = this.sequences\n      }\n\n      this.sequenceOptions = sequences.map(\n        (sequence) => ({ label: sequence.name, value: sequence.id })\n      )\n      this.sequenceId = sequences.length > 0 ? sequences[0].id : null\n    },\n\n    setAdditionShots () {\n      this.sequenceShots = Object.values(this.shotMap).filter((shot) => {\n        return shot.sequence_id === this.sequenceId\n      })\n    },\n\n    // if (this.currentPlaylist.id && !this.currentShots[shot.id]) {\n    addShot (shot) {\n      return this.loadShotPreviewFiles(shot)\n        .then(previewFiles => this.addShotPreviewToPlaylist({\n          playlist: this.currentPlaylist,\n          previewFiles: previewFiles,\n          shot: { ...shot }\n        }))\n        .then((shotPreview) => {\n          return new Promise((resolve, reject) => {\n            const playlistShot =\n              this.addShotToCurrentShots(shotPreview, this.currentShots)\n            this.$refs['playlist-player'].shotList.push(playlistShot)\n            this.$nextTick(() => {\n              this.$refs['playlist-player'].scrollToRight()\n              resolve()\n            })\n          })\n        })\n        .catch((err) => console.error(err))\n    },\n\n    addShotToPlaylist (shot) {\n      this.$options.silent = true\n      this.addShot(shot)\n        .then(() => {\n          setTimeout(() => {\n            this.$options.silent = false\n          }, 500)\n        })\n    },\n\n    addSequence () {\n      this.$options.silent = true\n      this.loading.addSequence = true\n      const shots = [...this.sequenceShots].reverse()\n      this.addShots(shots, () => {\n        this.loading.addSequence = false\n        this.$options.silent = false\n      })\n    },\n\n    addAllPending () {\n      this.$options.silent = true\n      this.loading.addWeekly = true\n      this.getPending(false)\n        .then((shots) => {\n          this.addShots(shots.reverse(), () => {\n            this.loading.addWeekly = false\n            this.$options.silent = false\n          })\n        })\n    },\n\n    addDailyPending () {\n      this.loading.addDaily = true\n      this.$options.silent = true\n      this.getPending(true)\n        .then((shots) => {\n          this.addShots(shots.reverse(), () => {\n            this.loading.addDaily = false\n            this.$options.silent = false\n          })\n        })\n    },\n\n    addShots (shots, callback) {\n      if (shots && shots.length > 0) {\n        const shot = shots.pop()\n        this.addShot(shot)\n          .then(() => {\n            this.addShots(shots, callback)\n          })\n      } else {\n        callback()\n      }\n    },\n\n    removeShot (shot) {\n      this.removeShotPreviewFromPlaylist({\n        playlist: this.currentPlaylist,\n        shot,\n        callback: () => {\n          delete this.currentShots[shot.id]\n        }\n      })\n    },\n\n    onPreviewChanged (shot, previewFileId) {\n      this.changePlaylistPreview({\n        playlist: this.currentPlaylist,\n        shot,\n        previewFileId\n      })\n    },\n\n    onOrderChange (info) {\n      this.changePlaylistOrder({\n        playlist: this.currentPlaylist,\n        info\n      })\n    },\n\n    onAnnotationChanged ({ preview, annotations }) {\n      const taskId = preview.task_id\n      this.updatePreviewAnnotation({ taskId, preview, annotations })\n    },\n\n    onForClientChanged (forClient) {\n      this.editPlaylist({\n        data: {\n          id: this.currentPlaylist.id,\n          for_client: forClient\n        }\n      })\n    }\n  },\n\n  mounted () {\n    setTimeout(() => { // Needed to ensure playlist is loaded after topbar\n      this.loadShotsData(() => {\n        this.setAdditionSequences()\n        this.resetPlaylist()\n      })\n    }, 0)\n  },\n\n  watch: {\n    $route () {\n      this.setCurrentPlaylist()\n    },\n\n    sequenceId () {\n      this.setAdditionShots()\n    },\n\n    currentProduction () {\n      this.$store.commit('LOAD_SEQUENCES_END', [])\n      this.$store.commit('LOAD_PLAYLISTS_END', [])\n      this.loadShotsData(() => {\n        this.setAdditionSequences()\n        this.resetPlaylist()\n      })\n    },\n\n    currentEpisode () {\n      this.$store.commit('LOAD_SEQUENCES_END', [])\n      this.$store.commit('LOAD_PLAYLISTS_END', [])\n      if (this.currentEpisode) {\n        this.loadShotsData(() => {\n          this.setAdditionSequences()\n          this.resetPlaylist()\n        })\n      }\n    }\n  },\n\n  metaInfo () {\n    if (this.isTVShow) {\n      return {\n        title: `${this.currentProduction ? this.currentProduction.name : ''} ` +\n               `- ${this.currentEpisode ? this.currentEpisode.name : ''} |` +\n               ` ${this.$t('playlists.title')} - Kitsu`\n      }\n    } else {\n      return {\n        title: `${this.currentProduction ? this.currentProduction.name : ''}` +\n               ` ${this.$t('playlists.title')}` +\n               ` - Kitsu`\n      }\n    }\n  },\n\n  socket: {\n    events: {\n      'playlist:new' (eventData) {\n        if (!this.playlistMap[eventData.playlist_id]) {\n          this.refreshPlaylist(eventData.playlist_id)\n        }\n      },\n\n      'playlist:update' (eventData) {\n        if (\n          this.playlistMap[eventData.playlist_id] &&\n          !this.$options.silent\n        ) {\n          this.refreshPlaylist(eventData.playlist_id)\n            .then((playlist) => {\n              if (this.currentPlaylist.id === playlist.id) {\n                Object.assign(this.currentPlaylist, playlist)\n                this.rebuildCurrentShots()\n              }\n            })\n        }\n      },\n\n      'playlist:delete' (eventData) {\n        this.$store.commit('DELETE_PLAYLIST_END', {\n          id: eventData.playlist_id\n        })\n      },\n\n      'build-job:new' (eventData) {\n        if (eventData.playlist_id === this.currentPlaylist.id) {\n          this.currentPlaylist.build_jobs = [{\n            id: eventData.build_job_id,\n            created_at: eventData.created_at,\n            status: 'running',\n            playlist_id: this.currentPlaylist.id\n          }].concat(this.currentPlaylist.build_jobs)\n        }\n      },\n\n      'build-job:update' (eventData) {\n        if (eventData.playlist_id === this.currentPlaylist.id) {\n          updateModelFromList(this.currentPlaylist.build_jobs, {\n            id: eventData.build_job_id,\n            status: eventData.status\n          })\n        }\n      },\n\n      'build-job:delete' (eventData) {\n        if (eventData.playlist_id === this.currentPlaylist.id) {\n          this.currentPlaylist.build_jobs =\n            removeModelFromList(this.currentPlaylist.build_jobs, {\n              id: eventData.build_job_id\n            })\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .playlist-item {\n    background: $dark-grey-lightmore;\n    box-shadow: 0px 0px 6px #333;\n    border-color: $dark-grey;\n    color: $white-grey;\n\n    &.for-client {\n      background: $purple-grey;\n      border: 1px solid $dark-grey;\n    }\n\n    &.selected {\n      border-right: 3px solid $dark-green;\n    }\n  }\n\n  .playlist-list-column {\n    background: $dark-grey-light;\n    border-color: $dark-grey;\n    box-shadow: 0px 0px 6px #333;\n  }\n\n  .addition-column {\n    background: $dark-grey-light;\n    border-left: 1px solid $dark-grey;\n    box-shadow: 0px 0px 6px #333;\n  }\n\n  span.thumbnail-picture {\n    box-shadow: 0px 0px 6px #333;\n  }\n}\n\n.page {\n  display: flex;\n  padding-left: 0;\n  padding-right: 0;\n  padding-bottom: 0;\n}\n\n.page .columns {\n  margin-top: 0px;\n  margin-bottom: 0;\n  overflow-y: auto;\n  flex: 1;\n}\n\n.playlist-list-column {\n  max-width: 300px;\n  background: #F4F5F9;\n  overflow-y: auto;\n  padding: 1em 1em 1em 2em;\n  border-right: 1px solid #DDD;\n  box-shadow: 0px 0px 6px #F0F0F0;\n  z-index: 201;\n}\n\n.playlist-item {\n  display: block;\n  background: white;\n  padding: 0.4em;\n  margin: 0.2em;\n  border: 1px solid $white-grey;\n  box-shadow: 0px 0px 6px #DDD;\n  color: $grey-strong;\n\n  &.for-client {\n    background: $purple-light;\n    border: 1px solid $purple;\n  }\n}\n\n.playlist-item.selected {\n  border-right: 3px solid $light-green;\n}\n\n.playlist-list-column .button {\n  width: 100%;\n}\n\n.addition-column {\n  max-width: 200px;\n  margin-right: 12px;\n  padding: 0;\n  background: #F4F5F9;\n  overflow-y: auto;\n  border-left: 1px solid #DDD;\n  box-shadow: 0px 0px 6px #F0F0F0;\n  overflow-y: scroll;\n  z-index: 201;\n}\n\n.addition-shot {\n  padding: 0;\n  cursor: pointer;\n  text-align: center;\n  margin: 0 0 0.5em 0;\n  opacity: 0.5;\n  display: flex;\n  flex-direction: column;\n\n  a {\n    margin: auto;\n  }\n\n  &:hover {\n    opacity: 0.75\n  }\n\n  &.playlisted {\n    opacity: 1\n  }\n}\n\nspan.thumbnail-picture {\n  box-shadow: 0px 0px 6px #DDD;\n  margin-bottom: 2px;\n}\n\n.addition-column .thumbnail-empty {\n  margin-left: 1.5em;\n}\n\n.addition-header {\n  padding: 0 1em;\n\n  .subtitle {\n    margin-top: 1em;\n  }\n}\n\n.select-sequence-combobox {\n  margin-bottom: 1em;\n}\n\n.add-sequence {\n  margin-bottom: 0.4em;\n}\n\n.playlist-column {\n  padding: 0;\n  overflow: hidden;\n  flex: 1;\n}\n\n.playlist-column:last-child {\n  padding-right: 1em;\n}\n\n.playlist-date {\n  display: block;\n  color: $grey;\n  font-size: 0.8em;\n}\n\n.thumbnail-wrapper {\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Playlist.vue?vue&type=template&id=6984aa8e&scoped=true&\"\nimport script from \"./Playlist.vue?vue&type=script&lang=js&\"\nexport * from \"./Playlist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Playlist.vue?vue&type=style&index=0&id=6984aa8e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6984aa8e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightCombobox.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightCombobox.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComboboxStyled.vue?vue&type=style&index=0&id=22a2ef64&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComboboxStyled.vue?vue&type=style&index=0&id=22a2ef64&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistedShot.vue?vue&type=style&index=0&id=54a341ae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistedShot.vue?vue&type=style&index=0&id=54a341ae&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RawVideoPlayer.vue?vue&type=style&index=0&id=fc2c9bcc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RawVideoPlayer.vue?vue&type=style&index=0&id=fc2c9bcc&lang=scss&scoped=true&\""],"sourceRoot":""}