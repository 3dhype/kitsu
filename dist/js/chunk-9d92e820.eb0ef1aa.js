(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d92e820"],{"9f62":function(t,e,a){"use strict";var s=a("c607"),n=a.n(s);n.a},c607:function(t,e,a){},e186:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logs page"},[a("div",[a("page-title",{staticClass:"flexrow-item mt1 mb1",attrs:{text:t.$t("logs.title")}})],1),a("div",{staticClass:"flexrow"},[a("date-field",{staticClass:"flexrow-item",attrs:{"disabled-dates":{from:t.today},label:t.$t("logs.current_date_label")},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}}),a("button-simple",{staticClass:"flexrow-item",attrs:{icon:"refresh"},on:{click:t.loadDayEvents}})],1),t.isLoading||0!==t.events.length?t._e():a("div",{staticClass:"mt2"},[t._v(" "+t._s(t.$t("logs.empty_list"))+" ")]),t.isLoading?a("div",{staticClass:"has-text-centered"},[a("spinner")],1):a("div",{staticClass:"log-list mt2"},t._l(t.events,(function(e){return a("div",{key:e.id,staticClass:"mt05 event-line",on:{click:function(a){return t.selectLine(e)}}},[a("div",[a("span",{staticClass:"date tag mr1"},[t._v(t._s(t.formatDate(e.created_at))+" ")]),a("span",{staticClass:"type tag",attrs:{title:e.name.split(":")[1],"data-status":t.formatType(e)}},[t._v(" "+t._s(t.formatType(e))+" ")]),a("span",{staticClass:"name tag mr1"},[t._v(t._s(e.name.split(":")[0]))])]),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.selectedEvents[e.id],expression:"selectedEvents[event.id]"}]},[a("li",{staticClass:"flexrow"},[a("span",{staticClass:"key"},[t._v("user")]),a("people-avatar",{staticClass:"flexrow-item",attrs:{size:20,person:t.personMap[e.user_id]}}),a("people-name",{staticClass:"flexrow-item",attrs:{person:t.personMap[e.user_id]}})],1),t._l(Object.keys(e.data).sort(),(function(s){return a("li",{key:e.id+"-"+s,staticClass:"variable"},[a("span",{staticClass:"key"},[t._v(t._s(s))]),t.isLink(s)?a("a",{attrs:{href:t.getLink(e,s)}},[t._v(" "+t._s(e.data[s])+" ")]):a("span",[t._v(t._s(e.data[s]))])])}))],2)])})),0)])},n=[],i=(a("99af"),a("caad"),a("b0c0"),a("ac1f"),a("1276"),a("5530")),l=a("2f62"),c=a("c1df"),r=a.n(c),o=a("ba4c"),d=a.n(o),u=a("3657"),f=a("de40"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field"},[t.label?a("label",{staticClass:"label"},[t._v(t._s(t.label))]):t._e(),a("p",{staticClass:"control flexrow"},[a("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:t.locale,"disabled-dates":t.disabledDates,"monday-first":!0,format:"yyyy-MM-dd"},model:{value:t.localValue,callback:function(e){t.localValue=e},expression:"localValue"}})],1)])},v=[],m=a("2430"),b=a("fa33"),_={name:"text-field",components:{Datepicker:b["a"]},props:{disabledDates:{default:function(){},type:Object},label:{default:"",type:String},value:{default:new Date,type:Date}},data:function(){return{localValue:null}},mounted:function(){this.localValue=this.value},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])(["user"])),{},{locale:function(){return"fr_FR"===this.user.locale?m["fr"]:m["en"]}}),methods:Object(i["a"])({},Object(l["b"])([])),watch:{localValue:function(){this.$emit("input",this.localValue)}}},h=_,g=a("2877"),y=Object(g["a"])(h,p,v,!1,null,"4fc5d296",null),w=y.exports,D=a("eb8c"),C=a("0073"),j=a("8d07"),k=a("be83"),O={name:"logs",components:{ButtonSimple:f["a"],DateField:w,PageTitle:j["a"],PeopleAvatar:D["a"],PeopleName:C["a"],Spinner:k["a"]},data:function(){return{currentDate:new Date,events:[],isLoading:!0,selectedEvents:{}}},mounted:function(){this.loadDayEvents()},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])(["personMap","productionMap","user"])),{},{today:function(){return r()().toDate()}}),methods:Object(i["a"])(Object(i["a"])({},Object(l["b"])(["loadEvents"])),{},{formatDate:function(t){return r.a.tz(t,"UTC").tz(this.user.timezone).format("YYYY-MM-DD HH:mm:ss")},formatType:function(t){return t.name.split(":")[1].substring(0,3)},loadDayEvents:function(){var t=this,e=r()(this.currentDate).add(1,"days"),a=r()(this.currentDate);this.selectedEvents={},this.isLoading=!0,this.loadEvents({after:Object(u["d"])(a),before:Object(u["d"])(e)}).then((function(e){t.isLoading=!1,t.events=e})).catch((function(e){t.isLoading=!1,console.error(e)}))},selectLine:function(t){d.a.set(this.selectedEvents,t.id,!this.selectedEvents[t.id])},isLink:function(t){var e=["project_id","task_id"];return e.includes(t)},getLink:function(t,e){var a=t.data.project_id,s=e.substring(0,e.length-3);if("project"===s)return"/productions/".concat(a,"/news-feed");var n=t.data[e];return"/productions/".concat(a,"/").concat(s,"s/").concat(n)}}),watch:{currentDate:function(){this.loadDayEvents()}},metaInfo:function(){return{title:"".concat(this.$t("logs.title")," - Kitsu")}}},x=O,E=(a("9f62"),Object(g["a"])(x,s,n,!1,null,"611db9db",null));e["default"]=E.exports}}]);
//# sourceMappingURL=chunk-9d92e820.eb0ef1aa.js.map