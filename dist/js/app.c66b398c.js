(function(e){function t(t){for(var n,i,r=t[0],c=t[1],l=t[2],d=0,u=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&u.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(u.length)u.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],n=!0,i=1;i<s.length;i++){var r=s[i];0!==a[r]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=s[0]))}return e}var n={},i={app:0},a={app:0},o=[];function r(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0136372e":"8f5602e3","chunk-02a0b3c6":"7ee042b8","chunk-089a0c74":"d06eb2ca","chunk-0bb4cafd":"fb71a9d6","chunk-125f0106":"c10341bd","chunk-26594d4e":"a37bfd45","chunk-2d0c7360":"32b54068","chunk-2d0cfa35":"084e5f80","chunk-2d0dacb1":"ae467b85","chunk-2d21082e":"6175b0c5","chunk-2d22d490":"77ee260e","chunk-3b856e00":"f7144db1","chunk-3b93794f":"ee94c71b","chunk-404605b6":"e5894870","chunk-4fd17b4a":"ecd91d1a","chunk-5283bd24":"60c5482b","chunk-5f7eea03":"ba48b0a4","chunk-645ce67c":"bb87a1b2","chunk-6dff9cd1":"25a98b9e","chunk-72fdfea6":"70f1e3d0","chunk-fb3214cc":"38420821"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={"chunk-0136372e":1,"chunk-02a0b3c6":1,"chunk-089a0c74":1,"chunk-0bb4cafd":1,"chunk-125f0106":1,"chunk-26594d4e":1,"chunk-3b856e00":1,"chunk-3b93794f":1,"chunk-404605b6":1,"chunk-4fd17b4a":1,"chunk-5283bd24":1,"chunk-5f7eea03":1,"chunk-645ce67c":1,"chunk-6dff9cd1":1,"chunk-72fdfea6":1,"chunk-fb3214cc":1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=new Promise((function(t,s){for(var n="css/"+({}[e]||e)+"."+{"chunk-0136372e":"2a9039ab","chunk-02a0b3c6":"38154faf","chunk-089a0c74":"7cc4ec94","chunk-0bb4cafd":"5e972342","chunk-125f0106":"225e3dee","chunk-26594d4e":"e7db45ae","chunk-2d0c7360":"31d6cfe0","chunk-2d0cfa35":"31d6cfe0","chunk-2d0dacb1":"31d6cfe0","chunk-2d21082e":"31d6cfe0","chunk-2d22d490":"31d6cfe0","chunk-3b856e00":"e4e7d405","chunk-3b93794f":"8cb853ae","chunk-404605b6":"6e1e0dea","chunk-4fd17b4a":"b8802145","chunk-5283bd24":"f1bfc7c4","chunk-5f7eea03":"62ed6769","chunk-645ce67c":"5ed74fb9","chunk-6dff9cd1":"cf76a490","chunk-72fdfea6":"bfef793d","chunk-fb3214cc":"a7feb338"}[e]+".css",a=c.p+n,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var l=o[r],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===n||d===a))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){l=u[r],d=l.getAttribute("data-href");if(d===n||d===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete i[e],p.parentNode.removeChild(p),s(o)},p.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){i[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,s){n=a[e]=[t,s]}));t.push(n[2]=o);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=r(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(p);var s=a[e];if(0!==s){if(s){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",u.name="ChunkLoadError",u.type=n,u.request=i,s[1](u)}a[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(s,n,function(t){return e[t]}.bind(null,n));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var p=d;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0073":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"person-name"},[e._v(" "+e._s(e.person.first_name+" "+e.person.last_name)+" ")])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"person-name",props:{person:{type:Object,required:!0}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]))},d=l,u=(s("ea46"),s("2877")),p=Object(u["a"])(d,n,i,!1,null,"51084c62",null);t["a"]=p.exports},"0263":function(e,t,s){"use strict";s("a4d3"),s("e01a"),s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("d81d"),s("fb6a"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("07ac"),s("25f0"),s("2532"),s("3ca3"),s("4d90"),s("159b"),s("ddb0");var n,i=s("ade3"),a=s("2909"),o=s("ba4c"),r=s.n(o),c=s("c1df"),l=s.n(c),d=s("54b2"),u=s("ce6b"),p=s("edbf"),h={getShot:function(e,t){return p["a"].getModel("shots",e)},getShots:function(e,t,s){var n="/api/data/shots/with-tasks";e&&(n+="?project_id=".concat(e.id)),t&&(n+="&episode_id=".concat(t.id)),p["a"].get(n,s)},getSequence:function(e){return p["a"].getModel("sequences",e)},getSequences:function(e,t,s){var n="/api/data/projects/".concat(e.id,"/sequences");t&&(n="/api/data/episodes/".concat(t.id,"/sequences")),p["a"].get(n,s)},getEpisode:function(e){return p["a"].getModel("episodes",e)},getEpisodes:function(e,t){var s="/api/data/projects/".concat(e.id,"/episodes");p["a"].get(s,t)},getShotType:function(e){p["a"].get("/api/data/shot-type",e)},newShot:function(e,t){var s={name:e.name,description:e.description,sequence_id:e.sequence_id};p["a"].post("/api/data/projects/".concat(e.project_id,"/shots"),s,t)},newSequence:function(e,t){var s={name:e.name,episode_id:e.episode_id};p["a"].post("/api/data/projects/".concat(e.project_id,"/sequences"),s,t)},newEpisode:function(e,t){var s={name:e.name};p["a"].post("/api/data/projects/".concat(e.project_id,"/episodes"),s,t)},updateShot:function(e,t){var s={name:e.name,parent_id:e.sequence_id,description:e.description,nb_frames:parseInt(e.nb_frames),data:e.data};void 0===e.frameOut&&void 0===e.frameIn&&void 0===e.fps||Object.assign(s.data,{frame_in:e.frameIn,frame_out:e.frameOut,fps:e.fps}),p["a"].put("/api/data/entities/".concat(e.id),s,t)},updateSequence:function(e,t){var s={name:e.name,description:e.description};p["a"].put("/api/data/entities/".concat(e.id),s,t)},updateEpisode:function(e,t){var s={name:e.name,description:e.description};p["a"].put("/api/data/entities/".concat(e.id),s,t)},deleteShot:function(e,t){e.canceled?p["a"].del("/api/data/shots/".concat(e.id,"?force=true"),t):p["a"].del("/api/data/shots/".concat(e.id),t)},deleteSequence:function(e,t){p["a"].del("/api/data/sequences/".concat(e.id,"?force=true"),t)},deleteEpisode:function(e,t){p["a"].del("/api/data/episodes/".concat(e.id,"?force=true"),t)},restoreShot:function(e,t){var s={canceled:!1};p["a"].put("/api/data/entities/".concat(e.id),s,t)},postCsv:function(e,t,s){var n="/api/import/csv/projects/".concat(e.id,"/shots");return s&&(n+="?update=true"),p["a"].ppost(n,t)},getEpisodeStats:function(e){return p["a"].pget("/api/data/projects/".concat(e,"/episodes/stats"))},loadShotHistory:function(e){return p["a"].pget("/api/data/shots/".concat(e,"/versions"))}},f=s("fa53"),m=s("52ad"),b=s("ef8b"),_=s("de26"),v=s("2229"),y=s("6185"),g=s("66e7"),k=s("09d3"),w=s("bcd2"),S=s("2017"),O=s("ca76"),C=s("9fb0");function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var E="average",j="count",x="total",D={shots:[],shotIndex:[]},A={getTask:function(e){return f["a"].state.taskMap[e]},getTaskStatus:function(e){return f["a"].state.taskStatusMap[e]},getTaskType:function(e){return b["a"].state.taskTypeMap[e]},getPerson:function(e){return m["a"].state.personMap[e]},getShotName:function(e){var t="".concat(e.sequence_name," / ").concat(e.name);return e.episode_name&&(t="".concat(e.episode_name," / ").concat(t)),t},dateDigit:function(e){return e.toString().padStart(2,"0")},populateTask:function(e,t,s){e.name=A.getTaskType(e.task_type_id).priority.toString(),e.task_status_short_name=A.getTaskStatus(e.task_status_id).short_name;var n=A.getShotName(t);return Object.assign(e,{project_id:t.production_id,entity_name:n,entity_type_name:"Shot",sequence_name:t.sequence_name,entity:{id:t.id,preview_file_id:t.preview_file_id}}),e},setListStats:function(e,t){var s=0,n=0;t.forEach((function(e){s+=e.timeSpent,n+=e.nb_frames})),Object.assign(e,{displayedShotsLength:t.length,displayedShotsTimeSpent:s,displayedShotsFrames:n})},sortValidationColumns:function(e,t,s){var n=Object(a["a"])(e);return Object(v["o"])(n,s)},getPeriod:function(e,t){var s,n=A.getTaskEndDate(e,t);return"day"===t?s=l()(n,"YYYY-MM").format("YYYY-MM"):"month"===t?s=l()(n,"YYYY").format("YYYY"):"week"===t&&(s=l()(n,"YYYY-MM-DD").format("GGGG")),s},getDateFromParameters:function(e){var t=e.detailLevel,s=e.year,n=e.week,i=e.month,a=e.day;return"day"===t?"".concat(s,"-").concat(A.dateDigit(i),"-").concat(A.dateDigit(a)):"month"===t?"".concat(s,"-").concat(A.dateDigit(i)):"week"===t?"".concat(s,"-").concat(n):"".concat(s)},getTaskEndDate:function(e,t){var s;return"day"===t?s=l()(e.end_date,"YYYY-MM-DD").format("YYYY-MM-DD"):"month"===t?s=l()(e.end_date,"YYYY-MM").format("YYYY-MM"):"week"===t&&(s=l()(e.end_date,"YYYY-MM-DD").format("GGGG-W")),s},initQuota:function(e,t,s,n){e[t]||(e[t]={});var i=e[t];return i[s]||(i[s]=0),i[E]||(i[E]={}),i[E][n]||(i[E][n]=0),i[j]||(i[j]={}),i[j][n]||(i[j][n]=0),i[x]||(i[x]={}),i[x][n]||(i[x][n]=0),i},buildResult:function(e,t){var s=t.shotSearch,n=t.production,i=t.sorting,a=t.taskStatusMap,o=t.taskTypeMap,r=t.taskMap,c=Object.values(o),l=Object.values(a),d=s,u=Object(O["e"])(d)||[],p=Object(O["d"])(D.shotIndex,c,l,n.descriptors,d),h=Object(S["h"])(D.shotIndex,u)||D.shots;h=Object(O["a"])(h,p,r),h=Object(v["k"])(h,i,a,o,r),D.result=h;var f=h.slice(0,_["a"]),m=f.length,b=e.nbValidationColumns;A.setListStats(e,h),Object.assign(e,{displayedShots:f,shotFilledColumns:Object(g["a"])(f),shotSearchText:s,shotSelectionGrid:Object(y["b"])(m,b)})}},M={shotMap:{},sequences:[],episodes:[],shotSearchText:"",shotSearchQueries:[],sequenceSearchQueries:[],sequenceSearchText:"",sequenceStats:{},episodeSearchText:"",episodeStats:{},shotSorting:[],currentEpisode:null,episodeValidationColumns:[],isFps:!1,isFrameIn:!1,isFrameOut:!1,isTime:!1,isShotDescription:!1,displayedShots:[],displayedShotsLength:0,displayedShotsTimeSpent:0,displayedShotsFrames:0,displayedSequences:[],displayedSequencesLength:0,displayedEpisodes:[],displayedEpisodesLength:0,sequenceIndex:{},shotFilledColumns:{},sequenceMap:{},episodeMap:{},shotCreated:"",shotSelectionGrid:{},sequenceSelectionGrid:{},isShotsLoading:!1,isShotsLoadingError:!1,shotsCsvFormData:null,editShot:{isLoading:!1,isError:!1},deleteShot:{isLoading:!1,isError:!1},restoreShot:{isLoading:!1,isError:!1},shotListScrollPosition:0,sequenceListScrollPosition:0,episodeListScrollPosition:0,searchSequenceFilters:[],shotValidationColumns:[]},L=P({},M),I={sequences:function(e){return e.sequences},sequenceMap:function(e){return e.sequenceMap},sequenceStats:function(e){return e.sequenceStats},episodes:function(e){return e.episodes},episodeMap:function(e){return e.episodeMap},episodeStats:function(e){return e.episodeStats},shotValidationColumns:function(e){return e.shotValidationColumns},currentEpisode:function(e){return e.currentEpisode},shotSearchQueries:function(e){return e.shotSearchQueries},sequenceSearchQueries:function(e){return e.sequenceSearchQueries},shotMap:function(e){return e.shotMap},shotSorting:function(e){return e.shotSorting},isFps:function(e){return e.isFps},isFrameIn:function(e){return e.isFrameIn},isFrameOut:function(e){return e.isFrameOut},isTime:function(e){return e.isTime},isShotDescription:function(e){return e.isShotDescription},shotSearchText:function(e){return e.shotSearchText},sequenceSearchText:function(e){return e.sequenceSearchText},episodeSearchText:function(e){return e.episodeSearchText},shotSelectionGrid:function(e){return e.shotSelectionGrid},sequenceSelectionGrid:function(e){return e.sequenceSelectionGrid},displayedShots:function(e){return e.displayedShots},displayedShotsLength:function(e){return e.displayedShotsLength},displayedShotsTimeSpent:function(e){return e.displayedShotsTimeSpent},displayedShotsFrames:function(e){return e.displayedShotsFrames},displayedSequences:function(e){return e.displayedSequences},displayedSequencesLength:function(e){return e.displayedSequencesLength},displayedEpisodes:function(e){return e.displayedEpisodes},displayedEpisodesLength:function(e){return e.displayedEpisodesLength},shotFilledColumns:function(e){return e.shotFilledColumns},displayedShotsBySequence:function(e){return Object(g["b"])(e.displayedShots,"sequence_name")},isShotsLoading:function(e){return e.isShotsLoading},isShotsLoadingError:function(e){return e.isShotsLoadingError},editShot:function(e){return e.editShot},deleteShot:function(e){return e.deleteShot},restoreShot:function(e){return e.restoreShot},shotCreated:function(e){return e.shotCreated},shotsCsvFormData:function(e){return e.shotsCsvFormData},shotListScrollPosition:function(e){return e.shotListScrollPosition},sequenceListScrollPosition:function(e){return e.sequenceListScrollPosition},episodeListScrollPosition:function(e){return e.episodeListScrollPosition},episodeValidationColumns:function(e){return e.episodeValidationColumns},shotsByEpisode:function(e){for(var t=[],s=[],n=null,i=0,a=Object.values(e.shotMap);i<a.length;i++){var o=a[i];n&&o.sequence_name!==n.sequence_name&&(t.push(s.slice(0)),s=[]),s.push(o),n=o}return t.push(s),t},searchSequenceFilters:function(e){return e.searchSequenceFilters},getSequenceOptions:function(e){return e.sequences.map((function(e){return{label:e.name,value:e.id}}))},getEpisodeOptions:function(e){return e.episodes.map((function(e){return{label:e.name,value:e.id}}))},isSingleEpisode:function(e){return e.episodes.length<2},episodeOptions:function(e){return e.episodes.map((function(e){return{label:e.name,value:e.id}}))}},$={getPending:function(e){e.commit;var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(e,s){var n=[];D.shots.forEach((function(e){var s=!1;e.tasks.forEach((function(e){var n=f["a"].state.taskMap[e];if(!s)if(t){if(n.last_comment_date){var i=l()(n.last_comment_date),a=l()().subtract(1,"days");s="wfa"===n.task_status_short_name&&i.isAfter(a)}}else s="wfa"===n.task_status_short_name})),s&&n.push(e)})),e(n)}))},clearEpisodes:function(e){var t=e.commit;t(C["P"])},loadEpisodes:function(e,t){var s=e.commit,n=(e.state,e.rootGetters),i=n.currentProduction;h.getEpisodes(i,(function(e,n){e&&console.error(e),s(C["Rc"],n),t&&t()}))},loadShots:function(e,t){var s=e.commit,n=(e.dispatch,e.state),i=e.rootGetters,a=i.currentProduction,o=i.userFilters,r=i.taskTypeMap,c=i.taskMap,l=i.personMap,d=i.isTVShow,u=d?i.currentEpisode:null;return d&&!u?t():n.isShotsLoading?t():(s(C["td"]),void h.getSequences(a,u,(function(e,n){e?s(C["sd"]):h.getShots(a,u,(function(e,i){e?s(C["sd"]):(s(C["od"],n),s(C["rd"],{production:a,shots:i,userFilters:o,taskTypeMap:r,taskMap:c,personMap:l})),t&&t(e)}))})))},loadEpisode:function(e,t){var s=e.commit,n=e.state;return h.getEpisode(t).then((function(e){n.episodeMap[e.id]?s(C["zf"],e):s(C["c"],e)})).catch((function(e){return console.error(e)}))},loadSequence:function(e,t){var s=e.commit,n=e.state;return h.getSequence(t).then((function(e){n.sequenceMap[e.id]?s(C["Df"],e):s(C["o"],e)})).catch((function(e){return console.error(e)}))},loadShot:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=i.personMap,o=i.currentProduction,r=i.taskMap,c=i.taskTypeMap;return h.getShot(t).then((function(e){n.shotMap[e.id]?s(C["Ef"],e):s(C["p"],{shot:e,taskTypeMap:c,taskMap:r,personMap:a,production:o})})).catch((function(e){return console.error(e)}))},loadShotCasting:function(e,t){var s=e.commit,n=e.rootGetters,i=n.assetMap;return d["a"].getShotCasting(t).then((function(e){s(C["ud"],{shot:t,casting:e,assetMap:i})}))},newShot:function(e,t){var s=e.commit,n=e.dispatch,i=(e.rootGetters,t.shot),a=t.callback;s(C["Zd"]),h.newShot(i,(function(e,t){if(e)s(C["Yd"]),a&&a(e);else{s(C["Xd"],t);var i=L.shotValidationColumns,o=i.map((function(e){return n("createTask",{entityId:t.id,projectId:t.project_id,taskTypeId:e,type:"shots"})}));Promise.all(o).then((function(){a&&a(null,t)})).catch((function(e){console.error(e)}))}}))},newSequence:function(e,t){var s=e.commit,n=(e.state,t.sequence),i=t.callback;s(C["Wd"]),h.newSequence(n,(function(e,t){e?s(C["Vd"]):s(C["Ud"],t),i&&i(e,t)}))},newEpisode:function(e,t){var s=e.commit;e.state;s(C["Sd"]),h.newEpisode(t.episode,(function(e,n){e?s(C["Rd"]):s(C["Qd"],n),t.callback&&t.callback(e,n)}))},editShot:function(e,t){var s=e.commit;e.state;s(C["nc"]),h.updateShot(t.data,(function(e,n){e?s(C["mc"]):s(C["lc"],n),t.callback&&t.callback(e)}))},editEpisode:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(C["Yb"]),h.updateEpisode(t,(function(t,i){t?(s(C["Xb"]),n(t)):(s(C["Wb"],i),e(i))}))}))},editSequence:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(C["kc"]),h.updateSequence(t,(function(t,i){t?(s(C["jc"]),n(t)):(s(C["ic"],i),e(i))}))}))},deleteShot:function(e,t){var s=e.commit,n=e.state,i=t.shot,a=t.callback;s(C["Ab"]),h.deleteShot(i,(function(e){if(e)s(C["zb"]);else{var t=n.shotMap[i.id];t&&t.tasks.length>0&&!t.canceled?s(C["t"],t):s(C["xe"],i),s(C["yb"],i)}a&&a(e)}))},deleteEpisode:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(C["kb"]),h.deleteEpisode(t,(function(i){i?(s(C["jb"]),n(i)):(s(C["pe"],t),e(t))}))}))},deleteSequence:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(C["xb"]),h.deleteSequence(t,(function(i){i?s(C["wb"]):s(C["ve"],t),i?n(i):e(t)}))}))},restoreShot:function(e,t){var s=e.commit;e.state;s(C["Ie"]);var n=t.shot;h.restoreShot(n,(function(e){e?s(C["He"]):s(C["Ge"],n),t.callback&&t.callback(e)}))},uploadShotFile:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters;s(C["Fc"]);var a=i.currentProduction;return h.postCsv(a,n.shotsCsvFormData,t).then((function(){s(C["Ec"]),Promise.resolve()}))},displayMoreShots:function(e){var t=e.commit,s=e.rootGetters;t(C["Lb"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},displayMoreSequences:function(e){var t=e.commit;t(C["Kb"])},displayMoreEpisodes:function(e){var t=e.commit;t(C["Jb"])},setShotSearch:function(e,t){var s=e.commit,n=e.rootGetters,i=n.taskStatusMap,a=n.taskTypeMap,o=n.taskMap,r=n.currentProduction;s(C["jf"],{shotSearch:t,taskStatusMap:i,taskMap:o,taskTypeMap:a,production:r})},saveShotSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=L.shotSearchQueries.find((function(e){return e.name===t})),o=n.currentProduction;a?e():u["a"].createFilter("shot",t,t,o.id,null,(function(t,n){s(C["Me"],{searchQuery:n,production:o}),t?i(t):e(n)}))}))},removeShotSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;u["a"].removeFilter(t,(function(n){s(C["ye"],{searchQuery:t,production:a}),n?i(n):e()}))}))},saveSequenceSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=L.sequenceSearchQueries.find((function(e){return e.name===t})),o=n.currentProduction;a?e():u["a"].createFilter("sequence",t,t,o.id,null,(function(t,n){s(C["Le"],{searchQuery:n,production:o}),t?i(t):e(n)}))}))},removeSequenceSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;u["a"].removeFilter(t,(function(n){s(C["we"],{searchQuery:t,production:a}),n?i(n):e()}))}))},initSequences:function(e){e.commit;var t=e.dispatch,s=e.state,n=e.rootState;e.rootGetters;return new Promise((function(e,i){var a=n.route.params.production_id;t("setLastProductionScreen","sequences"),0!==s.sequences.length&&s.sequences[0].production_id===a||t("loadShots",(function(s){s?i(s):(t("computeSequenceStats"),e())}))}))},setSequenceSearch:function(e,t){var s=e.commit,n=e.rootGetters;s(C["hf"],{sequenceSearch:t,production:n.currentProduction})},setSequenceListScrollPosition:function(e,t){var s=e.commit;s(C["gf"],t)},computeSequenceStats:function(e){var t=e.commit,s=e.rootGetters,n=s.taskStatusMap,i=s.taskMap;t(C["V"],{taskStatusMap:n,taskMap:i})},setCurrentEpisode:function(e,t){var s=e.commit,n=e.rootGetters;s(C["Se"],t);var i=n.currentProduction.id;s(C["Ce"],{productionId:i,episodeId:t})},initEpisodes:function(e){e.commit;var t=e.dispatch,s=e.state,n=e.rootState,i=e.rootGetters;return new Promise((function(e,a){var o=n.route.params.production_id,r=i.isTVShow;t("setLastProductionScreen","episodes"),0!==s.episodes.length&&s.episodes[0].production_id===o||(r?t("loadEpisodes",(function(){return t("loadEpisodeStats",o)})):(t("computEpisodeStats"),e()))}))},loadEpisodeStats:function(e,t){var s=e.commit;return new Promise((function(e,n){s(C["We"],{}),h.getEpisodeStats(t).then((function(t){s(C["We"],t),e()})).catch(n)}))},setEpisodeSearch:function(e,t){var s=e.commit;s(C["Ve"],t)},setEpisodeListScrollPosition:function(e,t){var s=e.commit;s(C["Ue"],t)},computeEpisodeStats:function(e){var t=e.commit,s=e.dispatch,n=e.rootGetters,i=n.taskStatusMap,a=n.taskMap,o=n.isTVShow;o?s("loadEpisodeStats",n.currentProduction.id):t(C["U"],{taskStatusMap:i,taskMap:a})},getShotsCsvLines:function(e){var t=e.state,s=e.rootGetters,n=s.currentProduction,i=D.shots;D.result&&D.result.length>0&&(i=D.result);var o=i.map((function(e){var i=[e.sequence_name,e.name,e.description];return Object(v["d"])(Object(a["a"])(n.descriptors)).filter((function(e){return"Shot"===e.entity_type})).forEach((function(t){i.push(e.data[t.field_name])})),i.push(e.nb_frames),t.isFrameIn&&i.push(e.data.frame_in),t.isFrameOut&&i.push(e.data.frame_out),t.isFps&&i.push(e.data.fps),t.isTime&&i.push(e.timeSpent),t.shotValidationColumns.forEach((function(t){var n=s.taskMap[e.validations[t]];n?i.push(n.task_status_short_name):i.push("")})),i}));return o},loadShotHistory:function(e,t){e.commit,e.state;return h.loadShotHistory(t)},computeQuota:function(e,t){e.commit,e.state;var s=e.rootGetters,n=t.taskTypeId,i=t.detailLevel,a=t.countMode,o=s.taskMap,r=s.taskStatusMap,c=s.currentProduction,l={};return D.shots.forEach((function(e){var t=o[e.validations[n]],s=t&&r[t.task_status_id].is_done;if(s){var d=A.getPeriod(t,i),u=A.getTaskEndDate(t,i);t.assignees.forEach((function(t){var s=A.initQuota(l,t,u,d);if(e.nb_frames){var n=e.nb_frames;"seconds"===a&&(n=Object(w["a"])(e.nb_frames,c,e));var i=0===s[u];i&&s[j][d]++,s[u]+=n,s[x][d]+=n,"seconds"===a&&(s[x][d]=Math.round(100*s[x][d])/100,s[u]=Math.round(100*s[u])/100),s[E][d]=s[x][d]/s[j][d]}}))}})),Promise.resolve(l)},getPersonShots:function(e,t){e.commit,e.state;var s=e.rootGetters,n=t.taskTypeId,i=t.detailLevel,a=t.personId,o=t.year,r=t.month,c=t.week,l=t.day,d=s.taskStatusMap,u=A.getDateFromParameters({detailLevel:i,year:o,month:r,week:c,day:l}),p=D.shots.filter((function(e){var t=s.taskMap[e.validations[n]];if(t){var o=d[t.task_status_id],r=A.getTaskEndDate(t,i);return t&&o.is_done&&t.assignees.includes(a)&&r===u}return!1})).map((function(e){return P({},e,{full_name:A.getShotName(e)})}));return Promise.resolve(p)},changeShotSort:function(e,t){var s=e.commit,n=e.rootGetters,i=n.taskStatus,a=n.taskTypeMap,o=n.taskMap,r=n.currentProduction,c=t?[t]:[];s(C["N"],{taskStatusMap:i,taskTypeMap:a,taskMap:o,production:r,sorting:c})}},q=(n={},Object(i["a"])(n,C["S"],(function(e){D.shots=[],D.result=[],D.shotIndex={},e.shotMap={},e.sequences=[],e.sequenceIndex={},e.displayedShots=[],e.displayedShotsLength=0,e.displayedTimeSpent=0,e.displayedFrames=0,e.shotSearchQueries=[],e.displayedSequences=[],e.displayedSequencesLength=0,e.displayedEpisodes=[],e.displayedEpisodesLength=0})),Object(i["a"])(n,C["td"],(function(e){D.shots=[],D.result=[],D.shotIndex={},e.shotMap={},e.shotValidationColumns=[],e.sequences=[],e.isShotsLoading=!0,e.isShotsLoadingError=!1,e.sequenceIndex={},e.displayedShots=[],e.displayedShotsLength=0,e.displayedTimeSpent=0,e.displayedFrames=0,e.shotSearchQueries=[],e.displayedSequences=[],e.displayedSequencesLength=0,e.displayedEpisodes=[],e.displayedEpisodesLength=0})),Object(i["a"])(n,C["sd"],(function(e){e.isShotsLoading=!1,e.isShotsLoadingError=!0})),Object(i["a"])(n,C["rd"],(function(e,t){var s=t.production,n=t.shots,i=t.userFilters,a=t.taskMap,o=t.taskTypeMap,r=t.personMap,c={},l=!1,d=!1,u=!1,p=!1,h=!1;n=Object(v["l"])(n),D.shots=n,D.result=n,D.shotIndex=Object(S["e"])(n),e.shotMap={},n.forEach((function(t){var n=[],i={},f=0;t.project_name=s.name,t.production_id=s.id,t.tasks.forEach((function(e){A.populateTask(e,t,s),f+=e.duration,e.episode_id=t.episode_id,a[e.id]=e,i[e.task_type_id]=e.id,n.push(e.id);var l=o[e.task_type_id];c[l.name]||(c[l.name]=l.id),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return r[e].name.localeCompare(r[t])})))})),t.tasks=n,t.validations=i,t.timeSpent=f,!l&&t.data.fps&&(l=!0),!d&&t.data.frame_in&&(d=!0),!u&&t.data.frame_out&&(u=!0),!h&&t.timeSpent>0&&(h=!0),!p&&t.description&&(p=!0),e.shotMap[t.id]=t}));var f=n.slice(0,_["a"]),m=Object(g["a"])(f);e.shotValidationColumns=A.sortValidationColumns(Object.values(c),m,o),e.nbValidationColumns=e.shotValidationColumns.length,e.isFps=l,e.isFrameIn=d,e.isFrameOut=u,e.isTime=h,e.isShotDescription=p,e.isShotsLoading=!1,e.isShotsLoadingError=!1,e.displayedShots=f,e.shotFilledColumns=m;var b=e.displayedShots.length,k=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(b,k),A.setListStats(e,n),i.shot&&i.shot[s.id]?e.shotSearchQueries=i.shot[s.id]:e.shotSearchQueries=[],i.sequence&&i.sequence[s.id]?e.sequenceSearchQueries=i.sequence[s.id]:e.sequenceSearchQueries=[]})),Object(i["a"])(n,C["Me"],(function(e,t){var s=t.searchQuery;e.shotSearchQueries.push(s),e.shotSearchQueries=Object(v["d"])(e.shotSearchQueries)})),Object(i["a"])(n,C["ye"],(function(e,t){var s=t.searchQuery,n=e.shotSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.shotSearchQueries.splice(n,1)})),Object(i["a"])(n,C["Le"],(function(e,t){var s=t.searchQuery;e.sequenceSearchQueries.push(s),e.sequenceSearchQueries=Object(v["d"])(e.sequenceSearchQueries)})),Object(i["a"])(n,C["we"],(function(e,t){var s=t.searchQuery;e.sequenceSearchQueries=e.sequenceSearchQueries.filter((function(e){return e.name!==s.name}))})),Object(i["a"])(n,C["od"],(function(e,t){var s={};t.forEach((function(t){if(s[t.id]=t,t.parent_id){var n=e.episodeMap[t.parent_id];n&&Object.assign(t,{episode_id:n.id,episode_name:n.name})}}));var n=Object(v["j"])(t);e.sequenceMap=s,e.sequences=n,e.sequenceIndex=Object(S["d"])(n),e.displayedSequences=n.slice(0,2*_["a"]),e.displayedSequencesLength=n.length})),Object(i["a"])(n,C["Rc"],(function(e,t){var s={};t||(t=[]),t.forEach((function(e){s[e.id]=e})),e.episodeMap=s,e.episodes=Object(v["d"])(t),e.episodeIndex=Object(S["b"])(e.episodes),e.displayedEpisodes=e.episodes.slice(0,_["a"]),e.displayedEpisodesLength=e.episodes.length,e.episodes.length>0?e.currentEpisode=e.episodes[0]:e.currentEpisode=null})),Object(i["a"])(n,C["vd"],(function(e,t){var s=t.shot,n=t.taskTypeMap;s.tasks.forEach((function(e){A.populateTask(e,s)})),s.tasks=Object(v["n"])(s.tasks,n),e.shotMap[s.id]=s})),Object(i["a"])(n,C["nf"],(function(e,t){e.shotsCsvFormData=t})),Object(i["a"])(n,C["Fc"],(function(e){})),Object(i["a"])(n,C["Ec"],(function(e){e.shotsCsvFormData=null})),Object(i["a"])(n,C["Uc"],(function(e,t){e.openProductions=t})),Object(i["a"])(n,C["nc"],(function(e,t){e.editShot.isLoading=!0,e.editShot.isError=!1})),Object(i["a"])(n,C["mc"],(function(e){e.editShot.isLoading=!1,e.editShot.isError=!0})),Object(i["a"])(n,C["lc"],(function(e,t){var s=e.shotMap[t.id],n=e.sequences.find((function(e){return e.id===t.parent_id}));if(t.sequence_name=n.name,s)Object.assign(s,t);else{D.shots.push(t),D.shots=Object(v["l"])(D.shots),e.shotMap[t.id]=t;var i=e.displayedShots.length,a=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(i,a)}e.editShot={isLoading:!1,isError:!1},D.shotIndex=Object(S["e"])(D.shots),e.shotCreated=t.name,e.shotSearchText?A.setListStats(e,D.result):A.setListStats(e,D.shots),t.data.fps&&(e.isFps=!0),t.data.frame_in&&(e.isFrameIn=!0),t.data.frame_out&&(e.isFrameOut=!0),s.description&&!e.isShotDescription&&(e.isShotDescription=!0)})),Object(i["a"])(n,C["kc"],(function(e,t){})),Object(i["a"])(n,C["jc"],(function(e){})),Object(i["a"])(n,C["ic"],(function(e,t){var s=e.sequenceMap[t.id];s&&Object.assign(s,t),e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(i["a"])(n,C["Yb"],(function(e,t){})),Object(i["a"])(n,C["Xb"],(function(e){})),Object(i["a"])(n,C["Wb"],(function(e,t){var s=e.episodeMap[t.id];s&&Object.assign(s,t),e.episodeIndex=Object(S["b"])(e.episodes)})),Object(i["a"])(n,C["Ab"],(function(e){e.deleteShot={isLoading:!0,isError:!1}})),Object(i["a"])(n,C["zb"],(function(e){e.deleteShot={isLoading:!1,isError:!0}})),Object(i["a"])(n,C["yb"],(function(e,t){e.deleteShot={isLoading:!1,isError:!1}})),Object(i["a"])(n,C["xb"],(function(e){})),Object(i["a"])(n,C["wb"],(function(e){})),Object(i["a"])(n,C["kb"],(function(e){})),Object(i["a"])(n,C["jb"],(function(e){})),Object(i["a"])(n,C["Ie"],(function(e){e.restoreShot={isLoading:!0,isError:!1}})),Object(i["a"])(n,C["He"],(function(e){e.restoreShot={isLoading:!1,isError:!0}})),Object(i["a"])(n,C["Ge"],(function(e,t){var s=e.shotMap[t.id];s.canceled=!1,e.restoreShot={isLoading:!1,isError:!1},D.shotIndex=Object(S["e"])(D.shots)})),Object(i["a"])(n,C["ae"],(function(e,t){t.comment,t.taskId})),Object(i["a"])(n,C["jf"],(function(e,t){var s=e.shotSorting;t.sorting=s,A.buildResult(e,t)})),Object(i["a"])(n,C["hf"],(function(e,t){var s=t.sequenceSearch,n=t.production,i=Object(O["e"])(s),a=Object(S["h"])(e.sequenceIndex,i)||e.sequences;e.searchSequenceFilters=Object(O["d"])(D.shotIndex,[],[],n.descriptors.filter((function(e){return"Shot"===e.entity_type})),s),e.displayedSequences=a.slice(0,2*_["a"]),e.displayedSequencesLength=a.length,e.sequenceSearchText=s})),Object(i["a"])(n,C["Ve"],(function(e,t){var s=Object(O["e"])(t),n=Object(S["h"])(e.episodeIndex,s)||e.episodes;e.displayedEpisodes=n.slice(0,_["a"]),e.displayedEpisodesLength=n.length,e.episodeSearchText=t})),Object(i["a"])(n,C["Zd"],(function(e){})),Object(i["a"])(n,C["Yd"],(function(e){})),Object(i["a"])(n,C["Xd"],(function(e,t){var s=e.sequenceMap[t.parent_id],n=e.episodeMap[s.parent_id];t.production_id=t.project_id,t.sequence_name=s.name,t.sequence_id=s.id,t.episode_name=n?n.name:null,t.episode_id=n?n.id:null,t.preview_file_id="",t.tasks=[],t.validations={},t.data={},D.shots.push(t),D.shots=Object(v["l"])(D.shots),e.displayedShots=D.shots.slice(0,_["a"]),A.setListStats(e,D.shots),e.shotFilledColumns=Object(g["a"])(e.displayedShots),e.shotMap[t.id]=t,D.shotIndex=Object(S["e"])(D.shots);var i=e.displayedShots.length,a=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(i,a),t.data.fps&&(e.isFps=!0),t.data.frame_in&&(e.isFrameIn=!0),t.data.frame_out&&(e.isFrameOut=!0)})),Object(i["a"])(n,C["Wd"],(function(e){})),Object(i["a"])(n,C["Vd"],(function(e){})),Object(i["a"])(n,C["Ud"],(function(e,t){if(t.parent_id){var s=e.episodeMap[t.parent_id];t.episode_id=s.id,t.episode_name=s.name}e.sequences.push(t),e.sequences=Object(v["j"])(e.sequences),e.sequenceMap[t.id]=t,e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(i["a"])(n,C["Sd"],(function(e){})),Object(i["a"])(n,C["Rd"],(function(e){})),Object(i["a"])(n,C["Qd"],(function(e,t){e.episodes.push(t),e.episodes=Object(v["d"])(e.episodes),e.displayedEpisodes=e.episodes,e.episodeMap[t.id]=t})),Object(i["a"])(n,C["W"],(function(e,t){t.forEach((function(t){if(t){var s=e.shotMap[t.entity_id];if(s){var n=P({},s.validations);r.a.set(n,t.task_type_id,t.id),delete s.validations,r.a.set(s,"validations",n)}}}))})),Object(i["a"])(n,C["Lb"],(function(e,t){t.taskTypeMap,t.taskStatusMap,t.taskMap,t.production;var s=D.result;e.displayedShots=s.slice(0,e.displayedShots.length+_["a"]),e.shotFilledColumns=Object(g["a"])(e.displayedShots);var n=e.displayedShots.length-_["a"],i=e.displayedShots.length,a=e.nbValidationColumns;n>=0&&(e.shotSelectionGrid=Object(y["a"])(e.shotSelectionGrid,n,i,a))})),Object(i["a"])(n,C["Kb"],(function(e,t){var s=e.sequences;if(e.sequenceSearchText.length>0){var n=Object(O["e"])(e.sequenceSearchText);s=Object(S["h"])(e.sequenceIndex,n)}e.displayedSequences=s.slice(0,e.displayedSequences.length+_["a"])})),Object(i["a"])(n,C["Jb"],(function(e,t){var s=e.episodes;if(e.episodeSearchText.length>0){var n=Object(O["e"])(e.episodeSearchText);s=Object(S["h"])(e.episodeIndex,n)}e.displayedEpisodes=s.slice(0,e.displayedEpisodes.length+_["a"])})),Object(i["a"])(n,C["Te"],(function(e,t){e.shotSearchText="",e.sequenceSearchText=""})),Object(i["a"])(n,C["P"],(function(e){e.episodes=[],e.currentEpisode=null})),Object(i["a"])(n,C["ef"],(function(e,t){var s=t.entityId,n=(t.taskId,t.previewId),i=t.taskMap,a=e.shotMap[s];a&&(a.preview_file_id=n,a.tasks.forEach((function(e){var t=i[e];t&&(t.entity.preview_file_id=n)})))})),Object(i["a"])(n,C["if"],(function(e,t){e.shotListScrollPosition=t})),Object(i["a"])(n,C["gf"],(function(e,t){e.sequenceListScrollPosition=t})),Object(i["a"])(n,C["Ue"],(function(e,t){e.episodeListScrollPosition=t})),Object(i["a"])(n,C["ue"],(function(e,t){e.shotSelectionGrid[0]&&e.shotSelectionGrid[t.x]&&(e.shotSelectionGrid[t.x][t.y]=!1)})),Object(i["a"])(n,C["m"],(function(e,t){e.shotSelectionGrid[0]&&e.shotSelectionGrid[t.x]&&(e.shotSelectionGrid[t.x][t.y]=!0)})),Object(i["a"])(n,C["R"],(function(e,t){var s=JSON.parse(JSON.stringify(e.shotSelectionGrid));e.shotSelectionGrid=Object(y["c"])(s)})),Object(i["a"])(n,C["be"],(function(e,t){var s=e.shotMap[t.entity_id];s&&t&&(t=A.populateTask(t,s),s.tasks.push(t),r.a.set(s.validations,t.task_type_id,t.id))})),Object(i["a"])(n,C["Bb"],(function(e,t){var s=e.displayedShots.find((function(e){return e.id===t.entity_id}));if(s){var n=JSON.parse(JSON.stringify(s.validations));delete n[t.task_type_id],delete s.validations,r.a.set(s,"validations",n);var i=s.tasks.findIndex((function(e){return e===t.id}));s.tasks.splice(i,1)}})),Object(i["a"])(n,C["W"],(function(e,t){t.forEach((function(t){if(t){var s=e.shotMap[t.entity_id];if(s){var n=P({},s.validations);r.a.set(n,t.task_type_id,t.id),delete s.validations,r.a.set(s,"validations",n)}}}))})),Object(i["a"])(n,C["n"],(function(e,t){var s=JSON.parse(JSON.stringify(e.shotSelectionGrid));t.forEach((function(e){s[0]&&s[e.x]&&(s[e.x][e.y]=!0)})),e.shotSelectionGrid=s})),Object(i["a"])(n,C["Se"],(function(e,t){t&&(e.currentEpisode=e.episodeMap[t])})),Object(i["a"])(n,C["We"],(function(e,t){var s={};t.all&&Object.keys(t.all).forEach((function(e){"all"===e||t.all[e].name||(s[e]=!0)})),e.episodeStats=t,e.episodeValidationColumns=Object.keys(s)})),Object(i["a"])(n,C["V"],(function(e,t){var s=t.taskMap,n=t.taskStatusMap,i=D.shots;e.searchSequenceFilters.length>0&&(i=Object(O["a"])(D.shots,e.searchSequenceFilters,{})),e.sequenceStats=Object(k["a"])(i,"sequence_id",n,s)})),Object(i["a"])(n,C["U"],(function(e,t){var s=t.taskMap,n=t.taskStatusMap;e.episodeStats=Object(k["a"])(D.shots,"episode_id",n,s)})),Object(i["a"])(n,C["c"],(function(e,t){e.episodes.push(t);var s=Object(v["d"])(e.episodes);e.episodeMap[t.id]=t,e.episodes=s,e.displayedEpisodes.push(t),e.displayedEpisodes=Object(v["d"])(e.displayedEpisodes),e.episodeIndex=Object(S["b"])(s),e.displayedEpisodesLength=s.length})),Object(i["a"])(n,C["zf"],(function(e,t){Object.assign(e.episodeMap[t.id],t),e.episodeIndex=Object(S["d"])(e.episodes)})),Object(i["a"])(n,C["pe"],(function(e,t){delete e.episodeMap[t.id],e.episodes=Object(g["e"])(e.episodes,t),e.displayedEpisodes=Object(g["e"])(e.displayedEpisodes,t),e.episodeIndex=Object(S["b"])(e.episodes)})),Object(i["a"])(n,C["o"],(function(e,t){e.sequences.push(t);var s=Object(v["j"])(e.sequences);if(e.sequenceMap[t.id]=t,t.parent_id){var n=e.episodeMap[t.parent_id];n&&Object.assign(t,{episode_id:n.id,episode_name:n.name})}e.sequences=s,e.displayedSequences.push(t),e.displayedSequences=Object(v["j"])(e.displayedSequences),e.sequenceIndex=Object(S["d"])(s),e.displayedSequencesLength=s.length})),Object(i["a"])(n,C["Df"],(function(e,t){Object.assign(e.sequenceMap[t.id],t),e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(i["a"])(n,C["ve"],(function(e,t){delete e.sequenceMap[t.id],e.sequences=Object(g["e"])(e.sequences,t),e.displayedSequences=Object(g["e"])(e.displayedSequences,t),e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(i["a"])(n,C["p"],(function(e,t){t.taskTypeMap;var s=t.taskMap,n=t.personMap,i=t.production,a=t.shot,o=[],r={},c=0;a.project_name=i.name,a.production_id=i.id,a.tasks.forEach((function(e){A.populateTask(e,a,i),c+=e.duration,e.episode_id=a.episode_id,s[e.id]=e,r[e.task_type_id]=e.id,o.push(e.id),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return n[e].name.localeCompare(n[t])})))})),a.tasks=o,a.validations=r,a.timeSpent=c,D.shots.push(a),D.shots=Object(v["l"])(D.shots),e.shotMap[a.id]=a,e.displayedShots.push(a),e.displayedShots=Object(v["l"])(e.displayedShots),e.displayedShotsLength=D.shots.length,e.shotFilledColumns=Object(g["a"])(e.displayedShots);var l=e.displayedShots.length,d=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(l,d),e.shotMap[a.id]=a})),Object(i["a"])(n,C["Ef"],(function(e,t){Object.assign(e.shotMap[t.id],t),D.shotIndex=Object(S["e"])(D.shots)})),Object(i["a"])(n,C["xe"],(function(e,t){D.shots=Object(g["e"])(D.shots,t),e.displayedShots=Object(g["e"])(e.displayedShots,t),delete e.shotMap[t.id],t.timeSpent&&(e.displayedShotsTimeSpent-=t.timeSpent),t.nb_frames&&(e.displayedShotsFrames-=t.nb_frames)})),Object(i["a"])(n,C["t"],(function(e,t){t.canceled=!0})),Object(i["a"])(n,C["N"],(function(e,t){var s=t.taskStatusMap,n=t.taskTypeMap,i=t.taskMap,a=t.production,o=t.sorting,r=e.shotSearchText;e.shotSorting=o,A.buildResult(e,{shotSearch:r,taskStatusMap:s,taskTypeMap:n,taskMap:i,production:a,sorting:o})})),Object(i["a"])(n,C["Be"],(function(e){Object.assign(e,P({},M)),D.shots=[],D.result=[],D.shotIndex={}})),n);t["a"]={state:L,getters:I,actions:$,mutations:q,cache:D}},"0294":function(e,t,s){},"02a9":function(e,t,s){},"03b1":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"actions has-text-right"},[e.hideHistory?e._e():s("button",{staticClass:"button",attrs:{"data-test":"button-history"},on:{click:function(t){return e.$emit("history-clicked")}}},[s("clock-icon",{staticClass:"icon is-small only-icon"})],1),e.hideEdit||e.entry.canceled?e._e():s("router-link",{staticClass:"button",attrs:{"data-test":"button-edit",to:e.editRoute}},[s("edit-icon",{staticClass:"icon is-small only-icon"})],1),e.entry.canceled?s("router-link",{staticClass:"button",attrs:{"data-test":"button-restore",to:e.restoreRoute}},[s("rotate-ccw-icon",{staticClass:"icon is-small only-icon"})],1):e._e(),e.hideDelete||e.entry.canceled||!e.isCurrentUserAdmin?e.hideDelete?e._e():s("router-link",{staticClass:"button",attrs:{"data-test":"button-delete",to:e.deleteRoute}},[s("trash-icon",{staticClass:"icon is-small only-icon"})],1):s("router-link",{staticClass:"button",attrs:{"data-test":"button-delete-admin",to:e.deleteRoute}},[s("trash-icon",{staticClass:"icon is-small only-icon"})],1)],1)},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("0a35");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"row-actions",components:{ClockIcon:r["h"],EditIcon:r["o"],RotateCcwIcon:r["D"],TrashIcon:r["J"]},props:{entry:{type:Object,default:function(){return{}}},editRoute:{type:Object,default:function(){return{name:"home"}}},deleteRoute:{type:Object,default:function(){return{name:"home"}}},restoreRoute:{type:Object,default:null},hideEdit:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1},hideHistory:{type:Boolean,default:!0}},computed:l({},Object(o["c"])(["isCurrentUserAdmin"])),methods:l({},Object(o["b"])([]))},u=d,p=(s("ccfd"),s("2877")),h=Object(p["a"])(u,n,i,!1,null,"240d9ff5",null);t["a"]=h.exports},"0552":function(e,t,s){},"063c":function(e,t,s){},"08a5":function(e,t,s){"use strict";var n=s("40f7"),i=s.n(n);i.a},"09a4":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"production-name"},[s("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltipOptions,expression:"tooltipOptions"}],staticClass:"flexrow"},[e.noLink?s("div",[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.entry),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.entry.has_avatar?s("span",[s("img",{attrs:{src:e.getThumbnailPath(e.entry)}})]):s("span",[e._v(" "+e._s(e.generateAvatar(e.entry))+" ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.entry.name)+" ")])]):s("router-link",{attrs:{to:e.productionRoute}},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.entry),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.entry.has_avatar?s("span",[s("img",{attrs:{src:e.getThumbnailPath(e.entry)}})]):s("span",[e._v(" "+e._s(e.generateAvatar(e.entry))+" ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.entry.name)+" ")])])],1)])},i=[],a=(s("a4d3"),s("99af"),s("4de4"),s("4160"),s("a15b"),s("b0c0"),s("a9e3"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("7930"),r=s("2f62");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"production-name-cell",props:{entry:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String},isTooltip:{default:!1,type:Boolean},noLink:{default:!1,type:Boolean}},computed:l({},Object(r["c"])([]),{productionRoute:function(){var e={name:this.lastProductionScreen,params:{production_id:this.entry.id}};return this.entry.first_episode_id&&(e.name="episode-".concat(this.lastProductionScreen),e.params.episode_id=this.entry.first_episode_id),e},productionInfo:function(){var e=this.entry?this.entry.fps:null,t=this.entry?this.entry.ratio:null,s=this.entry?this.entry.resolution:null,n=[];return e&&n.push("".concat(this.$t("productions.fields.fps"),": ").concat(e)),t&&n.push("".concat(this.$t("productions.fields.ratio"),": ").concat(t)),s&&n.push("".concat(this.$t("productions.fields.resolution"),": ").concat(s)),n.length>0&&this.isTooltip?n.join("<br>"):""},tooltipOptions:function(){return{content:this.productionInfo,delay:{hide:5e3}}}}),methods:l({},Object(r["b"])([]),{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return o["a"].fromString(e.name)},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")}})},u=d,p=(s("754d"),s("2877")),h=Object(p["a"])(u,n,i,!1,null,"6fe23a16",null);t["a"]=h.exports},"09d3":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return r}));s("4160"),s("d81d"),s("b0c0"),s("b680"),s("b64b"),s("159b");var n=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"count";if(!e[t]||!e[t][s])return[];var i=e[t][s],a="count"===n?"count":"frames";return Object.keys(i).map((function(e){var t=i[e],s="todo"===t.name?"#6F727A":t.color;return[t.name,t[a],s]})).sort((function(e,t){return e[0]&&t[0]?e[0].localeCompare(t[0]):!e[0]&&t[0]?-1:(e[0]&&t[0],1)}))},i=function(e,t,s){return n(e,t,s).map((function(e){return e[2]}))},a=function(e,t,s,n){var i={all:{all:{}}};return e.forEach((function(e){if(!e.canceled){var a=e[t];i[a]||(i[a]={all:{}}),e.tasks.forEach((function(t){var r=n[t];o(s,i,a,e,r)}))}})),i},o=function(e,t,s,n,i){if(i){var a=i.task_type_id,o=e[i.task_status_id];if(o){var r=o.id;t[s][a]||(t[s][a]={}),t.all.all[r]||(t.all.all[r]={name:o.short_name,color:o.color,count:0,frames:0}),t.all[a]||(t.all[a]={}),t.all[a][r]||(t.all[a][r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s].all[r]||(t[s].all[r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s][a][r]||(t[s][a][r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s][a][r].count++,t[s].all[r].count++,t.all[a][r].count++,t.all.all[r].count++,n.nb_frames&&(t[s][a][r].frames+=n.nb_frames,t[s].all[r].frames+=n.nb_frames,t.all[a][r].frames+=n.nb_frames,t.all.all[r].frames+=n.nb_frames)}}},r=function(e,t){var s=0;return t>0&&(s=e/t*100),s.toFixed(2)}},"0a4d":function(e,t,s){},"0d11":function(e,t,s){"use strict";var n=s("157c"),i=s.n(n);i.a},"0df1":function(e,t,s){"use strict";var n=s("d48a"),i=s.n(n);i.a},"0ec4":function(e,t,s){},"0f9a":function(e,t,s){"use strict";s("a4d3"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("13d5"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("07ac"),s("25f0"),s("2532"),s("159b");var n,i=s("ade3"),a=s("ba4c"),o=s.n(a),r=s("ce6b"),c=s("52ad"),l=s("e07d"),d=s("48c6"),u=s("2229"),p=s("2017"),h=s("ca76"),f=s("66e7"),m=s("6185"),b=s("9fb0");function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var y={getTaskStatus:function(e){return l["a"].state.taskStatusMap[e]}},g={user:null,isAuthenticated:!1,avatarFormData:null,isSaveProfileLoading:!1,isSaveProfileLoadingError:!1,changePassword:{isLoading:!1,isError:!1,isSuccess:!1,isValid:!0},isTodosLoading:!1,isTodosLoadingError:!1,todos:[],displayedTodos:[],displayedDoneTasks:[],todosIndex:{},todosSearchText:"",todoSelectionGrid:{},todoSearchQueries:[],userFilters:{},todoListScrollPosition:0,timeSpentMap:{},timeSpentTotal:0},k=v({},g),w={user:function(e){return e.user},isAuthenticated:function(e){return e.isAuthenticated},isCurrentUserManager:function(e){return e.user&&["admin","manager"].includes(e.user.role)},isCurrentUserAdmin:function(e){return e.user&&"admin"===e.user.role},isCurrentUserCGArtist:function(e){return e.user&&"user"===e.user.role},isCurrentUserClient:function(e){return e.user&&"client"===e.user.role},isSaveProfileLoading:function(e){return e.isSaveProfileLoading},isSaveProfileLoadingError:function(e){return e.isSaveProfileLoadingError},changePassword:function(e){return e.changePassword},displayedTodos:function(e){return e.displayedTodos},displayedDoneTasks:function(e){return e.displayedDoneTasks},todosSearchText:function(e){return e.todosSearchText},todoSelectionGrid:function(e){return e.todoSelectionGrid},todoSearchQueries:function(e){return e.todoSearchQueries},userFilters:function(e){return e.userFilters},isTodosLoading:function(e){return e.isTodosLoading},isTodosLoadingError:function(e){return e.isTodosLoadingError},todoListScrollPosition:function(e){return e.todoListScrollPosition},timeSpentMap:function(e){return e.timeSpentMap},timeSpentTotal:function(e){return e.timeSpentTotal}},S={saveProfile:function(e,t){var s=e.commit,n=e.state;s(b["Tf"]),r["a"].updatePerson(t.form).then((function(){t.form.id=n.user.id,s(b["Uf"],t.form)})).catch((function(e){console.error(e),s(b["Sf"])}))},checkNewPasswordValidityAndSave:function(e,t){var s=e.commit,n=e.state,i=t.form,a=t.callback;d["a"].isPasswordValid(i.password,i.password2)?S.changeUserPassword({commit:s,state:n},{form:i,callback:a}):(s(b["Jf"]),a&&a())},changeUserPassword:function(e,t){var s=e.commit;e.state;s(b["Hf"]),r["a"].changePassword(t.form,(function(e){s(e?b["Gf"]:b["If"]),t.callback&&t.callback()}))},loadTodos:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=t.callback,o=t.forced,c=t.date,l=i.userFilters,d=i.taskTypeMap;0===n.todos.length||o?(s(b["Of"]),r["a"].loadTodos((function(e,t){e?(s(b["Nf"]),a&&a(e)):r["a"].loadDone((function(e,n){e?s(b["Nf"]):s(b["Kf"],n),r["a"].loadTimeSpents(c,(function(e,n){e?s(b["Nf"]):(s(b["Lf"],n),s(b["Mf"],{tasks:t,userFilters:l,taskTypeMap:d})),a&&a(e)}))}))}))):a&&a()},uploadAvatar:function(e,t){var s=e.commit,n=e.state;r["a"].postAvatar(n.user.id,n.avatarFormData,(function(e){e||s(b["Ff"],n.user.id),t&&t(e)}))},setTodosSearch:function(e,t){var s=e.commit;e.state;s(b["lf"],t)},loadUserSearchFilters:function(e,t){var s=e.commit;r["a"].getUserSearchFilters((function(e,n){e?s(b["Hd"]):s(b["Gd"],n),t(e)}))},saveTodoSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,n){var i=k.todoSearchQueries.find((function(e){return e.name===t}));i?e():r["a"].createFilter("todos",t,t,null,null,(function(t,i){s(b["Oe"],{searchQuery:i}),t?n(t):e(i)}))}))},removeTodoSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,n){r["a"].removeFilter(t,(function(i){s(b["Ae"],{searchQuery:t}),i?n(i):e()}))}))},setTodoListScrollPosition:function(e,t){var s=e.commit;e.rootGetters;s(b["mf"],t)},loadContext:function(e,t){var s=e.commit;return r["a"].getContext().then((function(e){s(b["Gd"],e.search_filters),s(b["ld"],e.project_status),s(b["zd"],e.task_status),s(b["Dd"],e.task_types),s(b["Xc"],e.persons),s(b["Nc"],e.custom_actions),s(b["Kc"],e.asset_types),s(b["Sc"],e.notifications),s(b["Uc"],e.projects)}))}},O=(n={},Object(i["a"])(n,b["Pf"],(function(e,t){e.user=c["a"].helpers.addAdditionalInformation(t),e.isAuthenticated=!0})),Object(i["a"])(n,b["Rf"],(function(e,t){e.user=null,e.isAuthenticated=!1})),Object(i["a"])(n,b["Qf"],(function(e,t){e.user=null,e.isAuthenticated=!1})),Object(i["a"])(n,b["Tf"],(function(e){e.isSaveProfileLoading=!0,e.isSaveProfileLoadingError=!1})),Object(i["a"])(n,b["Sf"],(function(e){e.isSaveProfileLoading=!1,e.isSaveProfileLoadingError=!0})),Object(i["a"])(n,b["Uf"],(function(e,t){Object.assign(e.user,t),Object.assign(e.user,c["a"].helpers.addAdditionalInformation(e.user)),e.isSaveProfileLoading=!1,e.isSaveProfileLoadingError=!1})),Object(i["a"])(n,b["Zb"],(function(e,t){e.user&&t&&e.user.id===t.id&&(Object.assign(e.user,t),Object.assign(e.user,c["a"].helpers.addAdditionalInformation(e.user)))})),Object(i["a"])(n,b["Hf"],(function(e){e.changePassword={isLoading:!0,isError:!1,isSuccess:!1,isValid:!0}})),Object(i["a"])(n,b["Gf"],(function(e){e.changePassword={isLoading:!1,isError:!0,isSuccess:!1,isValid:!0}})),Object(i["a"])(n,b["If"],(function(e){e.changePassword={isLoading:!1,isError:!1,isSuccess:!0,isValid:!0}})),Object(i["a"])(n,b["Jf"],(function(e){e.changePassword={isLoading:!1,isError:!1,isSuccess:!1,isValid:!1}})),Object(i["a"])(n,b["Of"],(function(e){e.isTodosLoadingError=!1,e.isTodosLoading=!0,e.timeSpents={},e.timeSpentTotal=0})),Object(i["a"])(n,b["Mf"],(function(e,t){var s=t.tasks,n=t.userFilters,i=t.taskTypeMap;e.isTodosLoading=!1,s.forEach(f["c"]),s.forEach((function(e){var t=y.getTaskStatus(e.task_status_id);e.taskStatus=t})),e.todoSelectionGrid=Object(m["b"])(s.length,1),e.todos=Object(u["n"])(s,i),e.todosIndex=Object(p["g"])(s);var a=Object(h["e"])(e.todosSearchText),o=Object(p["h"])(e.todosIndex,a);e.displayedTodos=o||e.todos,n.todos&&n.todos.all?e.todoSearchQueries=n.todos.all:e.todoSearchQueries=[]})),Object(i["a"])(n,b["Kf"],(function(e,t){t.forEach(f["c"]),t.forEach((function(e){var t=y.getTaskStatus(e.task_status_id);e.taskStatus=t})),e.displayedDoneTasks=t})),Object(i["a"])(n,b["Nf"],(function(e,t){e.isTodosLoadingError=!0})),Object(i["a"])(n,b["G"],(function(e,t){e.avatarFormData=t})),Object(i["a"])(n,b["Ff"],(function(e){if(e.user){var t=Math.random().toString(36).substring(7);e.user.has_avatar=!0,o.a.set(e.user,"uniqueHash",t),e.user.avatarPath="/api/pictures/thumbnails/persons/".concat(e.user.id,".png")}})),Object(i["a"])(n,b["ae"],(function(e,t){var s=t.comment,n=t.taskId,i=e.todos.find((function(e){return e.id===n}));if(i){var a=y.getTaskStatus(s.task_status_id);Object.assign(i,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color,last_comment:s}),e.todosIndex=Object(p["g"])(e.todos)}})),Object(i["a"])(n,b["lf"],(function(e,t){var s=Object(h["e"])(t),n=Object(p["h"])(e.todosIndex,s);e.todosSearchText=t,e.displayedTodos=n||e.todos})),Object(i["a"])(n,b["Oe"],(function(e,t){var s=t.searchQuery;e.todoSearchQueries.push(s),e.todoSearchQueries=Object(u["d"])(e.todoSearchQueries)})),Object(i["a"])(n,b["Ae"],(function(e,t){var s=t.searchQuery,n=e.todoSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.todoSearchQueries.splice(n,1)})),Object(i["a"])(n,b["m"],(function(e,t){e.todoSelectionGrid&&e.todoSelectionGrid[0]&&(e.todoSelectionGrid[t.x][t.y]=!0)})),Object(i["a"])(n,b["ue"],(function(e,t){e.todoSelectionGrid&&e.todoSelectionGrid[t.x]&&(e.todoSelectionGrid[t.x][t.y]=!1)})),Object(i["a"])(n,b["R"],(function(e){e.todoSelectionGrid=Object(m["c"])(e.todoSelectionGrid)})),Object(i["a"])(n,b["mf"],(function(e,t){e.todoListScrollPosition=t})),Object(i["a"])(n,b["Hd"],(function(e){})),Object(i["a"])(n,b["Gd"],(function(e,t){e.userFilters=t})),Object(i["a"])(n,b["kf"],(function(e,t){e.user.id===t.person_id&&(e.timeSpentMap[t.task_id]=t),e.timeSpentTotal=Object.values(e.timeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(i["a"])(n,b["Lf"],(function(e,t){var s={};t.forEach((function(e){s[e.task_id]=e})),e.timeSpentMap=s,e.timeSpentTotal=Object.values(e.timeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(i["a"])(n,b["Je"],(function(e,t){var s=t.searchQuery,n=t.production;n&&(e.userFilters.task||(e.userFilters.task={}),e.userFilters.task[n.id]||(e.userFilters.task[n.id]=[]),e.userFilters.task[n.id].includes(s)||(e.userFilters.task[n.id].push(s),e.userFilters.task[n.id]=Object(u["d"])(e.userFilters.task[n.id])))})),Object(i["a"])(n,b["Me"],(function(e,t){var s=t.searchQuery,n=t.production;e.userFilters.shot[n.id]||(e.userFilters.shot[n.id]=[]),e.userFilters.shot[n.id].includes(s)||(e.userFilters.shot[n.id].push(s),e.userFilters.shot[n.id]=Object(u["d"])(e.userFilters.shot[n.id]))})),Object(i["a"])(n,b["me"],(function(e){})),Object(i["a"])(n,b["Be"],(function(e){Object.assign(e,v({},g))})),n);t["a"]={namespace:!0,state:k,getters:w,actions:S,mutations:O}},"0fcb":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[e.entry.description&&e.entry.description.length>0&&!e.full?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltipOptions,expression:"tooltipOptions"}],staticClass:"description",domProps:{innerHTML:e._s(e.compileMarkdown(e.shortenText(e.entry.description,20)))},on:{click:e.onClick}}):s("span",{domProps:{innerHTML:e._s(e.compileMarkdown(e.entry.description))}})])},i=[],a=(s("a4d3"),s("e01a"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("e0c1"),r=s.n(o),c=s("2f62"),l=s("8c97");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"description-cell",data:function(){return{isOpen:!1,timeout:null}},components:{},props:{entry:{type:Object,default:function(){}},full:{type:Boolean,default:!1}},computed:u({},Object(c["c"])([]),{tooltipOptions:function(){return{content:this.compileMarkdown(this.entry.description),show:this.isOpen,trigger:"manual"}}}),methods:u({},Object(c["b"])([]),{compileMarkdown:function(e){return r()(e||"")},shortenText:l["a"].shortenText,onClick:function(){this.isOpen=!this.isOpen}})},h=p,f=(s("271f"),s("2877")),m=Object(f["a"])(h,n,i,!1,null,"2067aff3",null);t["a"]=m.exports},1:function(e,t){},1149:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v(e._s(e.label))]),s("p",{staticClass:"control"},[s("textarea",{ref:"input",staticClass:"input",class:"input "+e.inputClass,attrs:{placeholder:e.placeholder,type:e.type},domProps:{value:e.value},on:{input:function(t){return e.updateValue()},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},e.emitKeyup]}})])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"textarea-field",props:{label:{default:"",type:String},value:{default:"",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},emitKeyup:function(e){this.$emit("keyup",e)},focus:function(){this.$refs.input.focus()}})},d=l,u=(s("736c"),s("2877")),p=Object(u["a"])(d,n,i,!1,null,"e433a15c",null);t["a"]=p.exports},"128f":function(e,t,s){"use strict";var n=s("e0b5"),i=s.n(n);i.a},1338:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n={computed:{},methods:{onKeyDown:function(e){var t=this.lastSelection?this.lastSelection:{x:0,y:0},s=t.x,n=t.y,i=null;e.altKey&&(37===e.keyCode?i=this.select(s,n-1):38===e.keyCode?i=this.select(s-1,n):39===e.keyCode?i=this.select(s,n+1):40===e.keyCode&&(i=this.select(s+1,n)),this.scrollToValidationCell(i),this.stopEvent(e))},stopEvent:function(e){e||(e=window.event),e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},setScrollLeftPosition:function(e){this.$refs.body&&(this.$refs.body.scrollLeft=e)},select:function(e,t){var s="validation-"+e+"-"+t,n=this.$refs[s];return n&&n[0].$el.click(),n?n[0]:0},scrollToValidationCell:function(e){if(e){var t=20,s=e.$el.getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),i=s.bottom>n.bottom-t,a=s.top<n.top+t,o=s.right>n.right-t,r=s.left<n.left+t;if(i){var c=s.bottom-n.bottom+t;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var l=n.top-s.top+t;this.setScrollPosition(this.$refs.body.scrollTop-l)}if(o){var d=s.right-n.right+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft+d)}else if(r){var u=n.left-s.left+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}}}}},"13a8":function(e,t,s){"use strict";var n=s("2c0c"),i=s.n(n);i.a},"14a8":function(e,t,s){},1517:function(e,t,s){},"157c":function(e,t,s){},"15b1":function(e,t,s){"use strict";var n=s("c086"),i=s.n(n);i.a},"16ce":function(e,t,s){},"186e":function(e,t,s){},"187f":function(e,t,s){},"18f2":function(e,t,s){},"1d3d":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.productionToEdit&&e.productionToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("productions.edit_title"))+" "+e._s(e.productionToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("productions.new_production"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("productions.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.productionToEdit&&e.productionToEdit.id?s("combobox",{attrs:{label:e.$t("productions.fields.status"),options:e.productionStatusOptions,localeKeyPrefix:"productions.status."},on:{enter:e.runConfirmation},model:{value:e.form.project_status_id,callback:function(t){e.$set(e.form,"project_status_id",t)},expression:"form.project_status_id"}}):e._e(),s("combobox",{attrs:{label:e.$t("productions.fields.type"),options:e.productionTypeOptions,localeKeyPrefix:"productions.type."},on:{enter:e.runConfirmation},model:{value:e.form.production_type,callback:function(t){e.$set(e.form,"production_type",t)},expression:"form.production_type"}}),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"fpsField",attrs:{label:e.$t("productions.fields.fps")},on:{enter:e.runConfirmation},model:{value:e.form.fps,callback:function(t){e.$set(e.form,"fps",t)},expression:"form.fps"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"ratioField",attrs:{label:e.$t("productions.fields.ratio")},on:{enter:e.runConfirmation},model:{value:e.form.ratio,callback:function(t){e.$set(e.form,"ratio",t)},expression:"form.ratio"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"resolutionField",attrs:{label:e.$t("productions.fields.resolution")},on:{enter:e.runConfirmation},model:{value:e.form.resolution,callback:function(t){e.$set(e.form,"resolution",t)},expression:"form.resolution"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("div",[s("span",{staticClass:"label"},[e._v(e._s(e.$t("productions.picture")))]),s("file-upload",{ref:"fileField",attrs:{label:e.$t("main.csv.upload_file"),accept:".png,.jpg,.jpeg"},on:{fileselected:e.onFileSelected}})],1):e._e()],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.runConfirmation}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),e.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")]):s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])],1),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("assets.edit_fail"))+" ")]):e._e()])])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("d065"),c=s("992f"),l=s("4085"),d=s("7bf8");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={name:"edit-production-modal",mixins:[r["a"]],components:{Combobox:c["a"],FileUpload:l["a"],TextField:d["a"]},props:["text","active","cancelRoute","isLoading","isError","errorText","productionToEdit"],data:function(){var e={formData:null,productionTypeOptions:[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]};return this.productionToEdit&&this.productionToEdit.id?e.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"}:e.form={name:"",project_status_id:this.productionStatus?this.productionStatus[0].id:null,fps:"",ratio:"",resolution:"",production_type:"short"},e},created:function(){this.resetForm(),this.productionTypeOptions=[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]},mounted:function(){this.productionStatus.length>0&&(this.form.project_status_id=this.productionStatus[0].id)},computed:p({},Object(o["c"])(["productions","productionStatus","productionStatusOptions"])),methods:p({},Object(o["b"])([]),{runConfirmation:function(){this.$emit("confirm",this.form)},onFileSelected:function(e){this.formData=e,this.$emit("fileselected",e)},resetForm:function(){var e=this;this.productionToEdit&&this.productionToEdit.id?(this.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"},this.form.project_status_id=null,this.$nextTick((function(){e.form.project_status_id=e.productionToEdit.project_status_id}))):this.form={name:"",project_status_id:this.productionStatusOptions[0].value,fps:"",ratio:"",resolution:"",production_type:"short"}}}),watch:{productionToEdit:function(){this.resetForm()},active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.nameField.focus(),e.formData=null,e.$refs.fileField&&e.$refs.fileField.reset()}),100)}}},f=h,m=(s("bcc3"),s("2877")),b=Object(m["a"])(f,n,i,!1,null,"980a501c",null);t["a"]=b.exports},"1dc9":function(e,t,s){},"1e4c":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isSimple?s("span",{staticClass:"select"},[s("select",{ref:"select",staticClass:"select-input",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,n){return s("option",{key:n+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v(" "+e._s(e.getOptionLabel(t))+" ")])})),0)]):s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0}},[s("select",{ref:"select",staticClass:"select-input",attrs:{disabled:e.disabled},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,n){return s("option",{key:n+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v(" "+e._s(e.getOptionLabel(t))+" ")])})),0)])])])},i=[],a=(s("a9e3"),{name:"combobox",props:{label:{default:"",type:String},value:{default:0,type:Number},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isSimple:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",parseInt(this.$refs.select.value))},emitEnter:function(){this.$emit("enter",parseInt(this.$refs.select.value))},getOptionLabel:function(e){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+e.label.toLowerCase()):e.label}}}),o=a,r=(s("e007"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"4e1af092",null);t["a"]=c.exports},"1ea9":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",class:{dark:!0,"full-height":!e.isAddingEntity,"playlist-player":!0}},[e.tempMode?e._e():s("div",{ref:"header",staticClass:"playlist-header flexrow"},[e.playlist&&e.playlist.for_client?s("div",{staticClass:"flexrow-item for-client"},[e._v(" "+e._s(e.$t("playlists.client_playlist"))+" ")]):e._e(),s("span",{staticClass:"flexrow-item playlist-name"},[e._v(" "+e._s(e.playlist.name)+" ")]),e.isCurrentUserManager&&!e.isAddingEntity?s("button-simple",{staticClass:"playlist-button add-entities-button flexrow-item",attrs:{icon:"plus",text:e.addEntitiesText},on:{click:function(t){return e.$emit("show-add-entities")}}}):e._e(),e.isCurrentUserManager?s("button-simple",{staticClass:"edit-button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.edit"),icon:"edit"},on:{click:function(t){return e.$emit("edit-clicked")}}}):e._e(),e.isCurrentUserManager?s("button-simple",{staticClass:"delete-button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.delete"),icon:"delete"},on:{click:e.showDeleteModal}}):e._e()],1),e.isAddingEntity?e._e():s("div",{ref:"video-container",staticClass:"filler flexrow video-container"},[s("raw-video-player",{ref:"raw-player",staticClass:"raw-player",attrs:{entities:e.entityList,"is-repeating":e.isRepeating},on:{"metadata-loaded":e.onMetadataLoaded,"entity-change":e.onEntityChange,"time-update":e.onTimeUpdate,"max-duration-update":e.onMaxDurationUpdate}}),e.isComparing?s("raw-video-player",{ref:"raw-player-comparison",staticClass:"raw-player",attrs:{"is-repeating":e.isRepeating,muted:!0,entities:e.entityListToCompare}}):e._e(),s("div",{ref:"canvas-wrapper",staticClass:"canvas-wrapper"},[s("canvas",{ref:"annotation-canvas",staticClass:"canvas",attrs:{id:"playlist-annotation-canvas"}})]),s("task-info",{ref:"task-info",class:{"flexrow-item":!0,"task-info-column":!0,hidden:e.isCommentsHidden},attrs:{task:e.task,"is-preview":!1}})],1),e.isAddingEntity?e._e():s("div",{ref:"playlist-progress",staticClass:"playlist-progress"},[s("div",{staticClass:"video-progress"},[s("progress",{ref:"progress",attrs:{value:"0",min:"0"},on:{click:e.onProgressBarClicked}},[s("span",{ref:"progress-bar",attrs:{id:"progress-bar"}})])])]),e.playlist.id&&!e.isAddingEntity?s("annotation-bar",{ref:"playlist-annotation",staticClass:"playlist-annotations",attrs:{annotations:e.annotations,"max-duration-raw":e.maxDurationRaw},on:{"select-annotation":e.loadAnnotation}}):e._e(),e.playlist.id&&!e.isAddingEntity?s("div",{ref:"button-bar",staticClass:"playlist-footer flexrow"},[e.isPlaying?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.pause"),icon:"pause"},on:{click:e.onPlayClicked}}):s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.play"),icon:"play"},on:{click:e.onPlayClicked}}),s("button",{class:{button:!0,"flexrow-item":!0,"playlist-button":!0,active:e.isRepeating},on:{click:e.onRepeatClicked}},[s("repeat-icon",{staticClass:"icon is-small",staticStyle:{"margin-top":"1px"}})],1),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" "+e._s(e.currentTime)+" ")]),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" / ")]),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" "+e._s(e.maxDuration)+" ")]),s("span",{staticClass:"flexrow-item time-indicator mr1"},[e._v(" ("+e._s(e.currentFrame)+") ")]),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.previous_frame"),icon:"left"},on:{click:e.onPreviousFrameClicked}}),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.next_frame"),icon:"right"},on:{click:e.onNextFrameClicked}}),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" "+e._s(e.entityList.length>0?e.playingEntityIndex+1:0)+" ")]),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" / ")]),s("span",{staticClass:"flexrow-item time-indicator mr1"},[e._v(" "+e._s(e.entityList.length)+" ")]),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.previous_shot"),icon:"back"},on:{click:e.onPlayPreviousEntityClicked}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.next_shot"),icon:"forward"},on:{click:e.onPlayNextEntityClicked}}),e.taskTypeOptions?s("button-simple",{class:{"comparison-button":!0,"flexrow-item":!0,"playlist-button":!0,active:e.isComparing},attrs:{title:e.$t("playlists.actions.split_screen"),icon:"compare"},on:{click:e.onCompareClicked}}):e._e(),e.isComparing?s("combobox",{staticClass:"playlist-button flexrow-item comparison-list",attrs:{options:e.taskTypeOptions},model:{value:e.taskTypeToCompare,callback:function(t){e.taskTypeToCompare=t},expression:"taskTypeToCompare"}}):e._e(),s("span",{staticClass:"filler"}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{icon:"undo",title:e.$t("playlists.actions.annotation_undo")},on:{click:e.undoLastAction}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.annotation_redo"),icon:"redo"},on:{click:e.redoLastAction}}),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawing,expression:"isDrawing"}],staticClass:"annotation-tools"},[s("pencil-picker",{attrs:{isOpen:e.isShowingPencilPalette,pencil:e.pencil,sizes:this.pencilPalette},on:{"toggle-palette":e.onPickPencil,change:e.onChangePencil}}),s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.color,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeColor}})],1)]),s("button-simple",{class:{"playlist-button":!0,"flexrow-item":!0,active:e.isDrawing},attrs:{title:e.$t("playlists.actions.annotation"),icon:"pencil"},on:{click:e.onAnnotateClicked}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{icon:"remove",title:e.$t("playlists.actions.annotation_delete")},on:{click:e.onDeleteClicked}}),s("div",{staticClass:"separator"}),e.tempMode?e._e():s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.change_task_type"),icon:"layers"},on:{click:e.showTaskTypeModal}}),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.comments"),icon:"comment"},on:{click:e.onCommentClicked}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.entity_list"),icon:"film"},on:{click:e.onFilmClicked}}),e.tempMode?e._e():s("div",{staticClass:"flexrow-item playlist-button",staticStyle:{position:"relative"}},[s("a",{class:{"dl-button":!0,"zip-button":!0,hidden:e.isDlButtonsHidden},attrs:{href:e.zipDlPath}},[e._v(" "+e._s(e.$t("playlists.download_zip"))+" ")]),e.isCurrentUserManager?s("span",{class:{"dl-button":!0,"mp4-button":!0,hidden:e.isDlButtonsHidden},on:{click:e.onBuildClicked}},[e._v(" "+e._s(e.$t("playlists.build_mp4"))+" ")]):e._e(),s("div",{class:{"build-list":!0,hidden:e.isDlButtonsHidden}},[e.playlist.build_jobs&&0!==e.playlist.build_jobs.length?s("div",[s("div",{staticClass:"build-title"},[e._v(" "+e._s(e.$t("playlists.available_build"))+" ")]),e._l(e.playlist.build_jobs,(function(t){return s("div",{key:t.id,staticClass:"flexrow"},[s("a",{staticClass:"flexrow-item",attrs:{href:e.getBuildPath(t)}},[e._v(" "+e._s(e.formatDate(t.created_at))+" ")]),s("span",{staticClass:"filler"}),"running"===t.status?s("spinner",{staticClass:"build-spinner"}):s("button",{staticClass:"delete-job-button",on:{click:function(s){return e.onRemoveBuildJob(t)}}},[e._v(" x ")])],1)}))],2):s("span",[e._v(" "+e._s(e.$t("playlists.no_build"))+" ")])]),s("button-simple",{staticClass:"playlist-button",attrs:{title:e.$t("playlists.actions.download"),icon:"download"},on:{click:e.toggleDlButtons}})],1),e.isFullScreenEnabled?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.fullscreen"),icon:"maximize"},on:{click:e.onFullscreenClicked}}):e._e()],1):e._e(),e.playlist.id?s("div",{ref:"playlisted-entities",class:{"playlisted-entities":!0,flexrow:!0,hidden:e.isEntitiesHidden}},[e.isLoading?s("spinner",{staticClass:"spinner"}):e._l(e.entityList,(function(t,n){return s("div",{key:t.id,staticClass:"flexrow-item has-text-centered playlisted-wrapper"},[s("playlisted-entity",{ref:"entity-"+n,refInFor:!0,attrs:{index:n,entity:t,"is-playing":e.playingEntityIndex===n},on:{"play-click":e.playEntity,"remove-entity":e.removeEntity,"preview-changed":e.onPreviewChanged,"entity-dropped":e.onEntityDropped}})],1)}))],2):e._e(),s("delete-modal",{attrs:{active:e.modals.delete,"is-loading":e.loading.deletePlaylist,"is-error":e.errors.deletePlaylist,text:e.deleteText,"error-text":e.$t("playlists.delete_error")},on:{confirm:e.confirmRemovePlaylist,cancel:e.hideDeleteModal}}),s("select-task-type-modal",{attrs:{active:e.modals.taskType,"task-type-list":e.entityTaskTypes},on:{confirm:e.confirmChangeTaskType,cancel:e.hideTaskTypeModal}})],1)},i=[],a=(s("a4d3"),s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("d81d"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("07ac"),s("25f0"),s("2532"),s("4d90"),s("159b"),s("ade3")),o=s("7f45"),r=s.n(o),c=s("2f62"),l=s("7a94"),d=s("0a35"),u=s("bcd2"),p=s("8707"),h=s("de40"),f=s("7096"),m=s("992f"),b=s("5f48"),_=s("7f06"),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flexrow wrapper"},[s("drag",{attrs:{"transfer-data":e.entity.id},on:{drag:e.onDragged}},[s("div",{class:{"playlisted-entity":!0,playing:e.isPlaying}},[s("div",{staticClass:"thumbnail-wrapper",on:{click:function(t){return t.preventDefault(),e.onPlayClick(t)}}},[e.isCurrentUserManager?s("span",{staticClass:"remove-button flexrow-item",attrs:{title:e.$t("playlists.remove")},on:{click:function(t){return t.preventDefault(),e.onRemoveClick(t)}}},[s("x-icon")],1):e._e(),s("light-entity-thumbnail",{attrs:{width:"150px",height:"103px","preview-file-id":e.previewFileId}})],1),s("div",{staticClass:"entity-title"},[e._v(" "+e._s(e.entity.parent_name)+" / "+e._s(e.entity.name)+" ")]),e.taskTypeOptions.length>0?s("div",{staticClass:"preview-choice"},[s("combobox",{ref:"task-type-combobox",attrs:{thin:!0,options:e.taskTypeOptions},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),s("combobox",{staticClass:"version-combo",attrs:{thin:!0,options:e.previewFileOptions},model:{value:e.previewFileId,callback:function(t){e.previewFileId=t},expression:"previewFileId"}})],1):s("div",[e._v(" "+e._s(e.$t("playlists.no_preview"))+" ")])])]),s("drop",{on:{drop:e.onDropped}},[s("div",{ref:"drop-area",staticClass:"drop-area"})])],1)},y=[],g=(s("45fc"),s("a9e3"),s("ceca")),k=s.n(g),w=s("d793");function S(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var C={name:"playlisted-entity",components:{Combobox:m["a"],LightEntityThumbnail:w["a"],XIcon:d["N"]},data:function(){return{taskTypeId:null,previewFileId:this.entity.preview_file_id}},props:{index:{default:0,type:Number},isPlaying:{default:!1,type:Boolean},entity:{default:function(){},type:Object}},mounted:function(){this.setCurrentParameters(),this.setListeners()},computed:O({},Object(c["c"])(["taskTypeMap","isCurrentUserManager"]),{dropArea:function(){return this.$refs["drop-area"]},taskTypeOptions:function(){var e=this;return this.entity.preview_files?Object.keys(this.entity.preview_files).map((function(t){return e.taskTypeMap[t]})).sort(k()("priority",1).thenBy("name")).map((function(e){return{label:e.name,value:e.id}})):[]},previewFileOptions:function(){var e=this.entity.preview_files[this.taskTypeId]||[];return e.map((function(e){return{label:"v".concat(e.revision),value:e.id}}))}}),methods:{getTaskTypeIdForPreviewFile:function(e,t){var s=this;return e.find((function(e){var n=s.entity.preview_files[e];return n.some((function(e){return e.id===t}))}))},setCurrentParameters:function(){var e=Object.keys(this.entity.preview_files);e.length>0&&(this.entity.preview_file_id&&(this.taskTypeId=this.getTaskTypeIdForPreviewFile(e,this.entity.preview_file_id)),this.taskTypeId||(this.taskTypeId=e[0]))},onPlayClick:function(){this.$emit("play-click",this.index)},onRemoveClick:function(e){e.preventDefault(),e.stopPropagation(),this.$emit("remove-entity",this.entity)},setListeners:function(){this.dropArea.addEventListener("dragover",this.onDragover),this.dropArea.addEventListener("dragleave",this.onDragleave)},onDragged:function(){},onDragleave:function(){this.dropArea.style.background="transparent",this.dropArea.style.width="15px"},onDragover:function(){this.dropArea.style.width="60px"},onDropped:function(e){this.dropArea.style.background="transparent",this.dropArea.style.width="15px",this.$emit("entity-dropped",{before:this.entity.id,after:e})}},watch:{taskTypeId:function(){var e=this,t=this.entity.preview_files[this.taskTypeId];if(t&&t.length>0){var s=t.some((function(t){return t.id===e.entity.preview_file_id}));this.previewFileId=s?this.entity.preview_file_id:t[0].id}},previewFileId:function(){this.$emit("preview-changed",this.entity,this.previewFileId)}}},T=C,P=(s("2cbc"),s("2877")),E=Object(P["a"])(T,v,y,!1,null,"4540ebaa",null),j=E.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"video-wrapper filler flexrow-item"},[s("video",{ref:"player1",attrs:{preload:"auto"},domProps:{muted:e.muted},on:{ended:e.playNext}}),s("video",{ref:"player2",attrs:{preload:"auto"},domProps:{muted:e.muted},on:{ended:e.playNext}})])},D=[];function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function M(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var L={name:"raw-video-player",components:{},props:{entities:{type:Array,default:function(){return[]}},muted:{type:Boolean,default:!1},isRepeating:{type:Boolean,default:!1}},data:function(){return{currentPlayer:this.player1,isPlaying:!1,nextPlayer:this.player2,playingIndex:0}},mounted:function(){this.resetHeight(),this.player1.addEventListener("loadedmetadata",this.emitLoadedEvent),window.addEventListener("resize",this.resetHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.resetHeight),this.player1.removeEventListener("loadedmetadata",this.emitLoadedEvent)},computed:M({},Object(c["c"])(["currentProduction"]),{container:function(){return this.$refs.container},fps:function(){return this.currentProduction.fps||24},player1:function(){return this.$refs.player1},player2:function(){return this.$refs.player2}}),methods:{emitLoadedEvent:function(e){this.$emit("metadata-loaded",e)},getMoviePath:function(e){return"/api/movies/originals/preview-files/".concat(e,".mp4")},getWidth:function(){return this.currentPlayer?this.currentPlayer.offsetWidth:0},getHeight:function(){return this.currentPlayer?this.currentPlayer.offsetHeight:0},getVideoRatio:function(){var e=this.getVideoHeight();return e?this.getVideoWidth()/e:0},getVideoWidth:function(){return this.currentPlayer?this.currentPlayer.videoWidth:0},getVideoHeight:function(){return this.currentPlayer?this.currentPlayer.videoHeight:0},clear:function(){this.currentPlayer&&(this.currentPlayer.src="",this.currentPlayer.removeAttribute("src"),this.currentPlayer.load())},resetHeight:function(){var e=this;this.$nextTick((function(){e.currentPlayer&&(e.currentPlayer.style.height="0px"),e.nextPlayer&&(e.nextPlayer.style.height="0px");var t=e.container.offsetHeight;e.currentPlayer&&(e.currentPlayer.style.height="".concat(t,"px")),e.nextPlayer&&(e.nextPlayer.style.height="".concat(t,"px"))}))},getNextIndex:function(e){var t=e+1>=this.entities.length?0:e+1;while(t!==e&&this.entities[t]&&"mp4"!==this.entities[t].preview_file_extension)t++,t>=this.entities.length&&(t=0);return t},getPreviousIndex:function(e){var t=e-1>=0?e-1:this.entities.length-1;while(t!==e&&this.entities[t]&&"mp4"!==this.entities[t].preview_file_extension)t--,t<0&&(t=this.entities.length);return t},goPreviousFrame:function(){var e=this.currentPlayer.currentTime-1/this.fps;e<0?this.setCurrentTime(0):this.setCurrentTime(e)},goNextFrame:function(){var e=this.currentPlayer.currentTime+1/this.fps;e>this.currentPlayer.duration?this.setCurrentTime(this.video.duration):this.setCurrentTime(e)},loadPreviousEntity:function(){this.loadEntity(this.getPreviousIndex(this.currentIndex)),this.$emit("entity-change",this.currentIndex)},loadNextEntity:function(){this.loadEntity(this.getNextIndex(this.currentIndex)),this.$emit("entity-change",this.currentIndex)},reloadCurrentEntity:function(){this.loadEntity(this.currentIndex)},loadEntity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e<this.entities.length){var t=this.getNextIndex(e),s=this.entities[e],n=this.entities[t];this.currentIndex=e,this.currentPlayer=this.player1,this.nextPlayer=this.player2,this.currentPlayer.removeEventListener("loadedmetadata",this.updateMaxDuration),this.currentPlayer.addEventListener("loadedmetadata",this.updateMaxDuration),this.currentPlayer.src=this.getMoviePath(s.preview_file_id),this.nextPlayer.src=this.getMoviePath(n.preview_file_id),this.currentPlayer.style.display="block",this.nextPlayer.style.display="none",this.resetHeight(),this.currentPlayer.removeEventListener("timeupdate",this.updateTime),this.currentPlayer.addEventListener("timeupdate",this.updateTime),this.$emit("entity-change",this.currentIndex)}},pause:function(){this.currentPlayer&&this.currentPlayer.pause(),this.isPlaying=!1},play:function(){var e=this.entities[this.currentIndex];e&&(e.preview_file_id||this.loadNextEntitn(),e=this.entities[this.currentIndex],e.preview_file_id&&(this.currentPlayer&&this.currentPlayer.play(),this.isPlaying=!0))},playNext:function(){if(this.isRepeating)this.currentPlayer.currentTime=0,this.currentPlayer.play();else{var e=this.getNextIndex(this.currentIndex);this.currentIndex=e,this.$emit("entity-change",this.currentIndex),this.currentPlayer.style.display="none",this.nextPlayer.style.display="block",this.nextPlayer.play(),this.switchPlayers(),this.updateMaxDuration()}},getCurrentTime:function(){return this.currentPlayer.currentTime},setCurrentTime:function(e){e=Object(u["b"])(e,this.fps),this.currentPlayer&&(this.currentPlayer.currentTime=e)},switchPlayers:function(){var e=this.getNextIndex(this.currentIndex),t=this.entities[e];this.tmpPlayer=this.currentPlayer,this.currentPlayer=this.nextPlayer,this.nextPlayer=this.tmpPlayer,this.nextPlayer.src=this.getMoviePath(t.preview_file_id),this.resetHeight(),this.currentPlayer.removeEventListener("timeupdate",this.updateTime),this.nextPlayer.removeEventListener("timeupdate",this.updateTime),this.currentPlayer.addEventListener("timeupdate",this.updateTime)},updateTime:function(e){this.$emit("time-update",e)},updateMaxDuration:function(){this.$emit("max-duration-update",this.currentPlayer.duration)}},watch:{entities:function(){if(this.entities.length>0){this.loadEntity(0),this.pause(),this.setCurrentTime(0);var e=this.entities[this.currentIndex];e&&!e.preview_file_id&&this.loadNextEntity()}setTimeout(this.resetHeight,300)}}},I=L,$=(s("28de"),Object(P["a"])(I,x,D,!1,null,"0758c5fc",null)),q=$.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("playlists.select_task_type"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox-task-type",{attrs:{"task-type-list":e.taskTypeList,value:e.taskTypeId},on:{input:e.onTaskTypeChanged}})],1),s("p",[e._v(" "+e._s(e.$t("playlists.apply_task_type_change"))+" ")]),s("p",{staticClass:"has-text-right mt2"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.runConfirmation}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("playlist.change_task_type_fails"))+" ")]):e._e()])])])},N=[],R=s("e4fd"),B=s("d065"),z={name:"select-task-type-modal",mixins:[B["a"]],components:{ComboboxTaskType:R["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},taskTypeList:{type:Array,default:function(){}}},data:function(){return{taskTypeId:""}},methods:{onTaskTypeChanged:function(e){this.taskTypeId=e},runConfirmation:function(){this.$emit("confirm",this.taskTypeId)}},watch:{active:function(){this.taskTypeId=this.taskTypeList[0].id}}},V=z,U=(s("e90c"),Object(P["a"])(V,F,N,!1,null,"6b07740b",null)),H=U.exports,Y=s("be83"),W=s("9d94"),G=s("9fbc");function K(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Q(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?K(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):K(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var J={name:"playlist-player",mixins:[G["a"]],components:{AnnotationBar:p["a"],ButtonSimple:h["a"],ColorPicker:f["a"],Combobox:m["a"],DeleteModal:b["a"],PencilPicker:_["a"],PlaylistedEntity:j,RawVideoPlayer:q,SelectTaskTypeModal:H,Spinner:Y["a"],TaskInfo:W["a"],RepeatIcon:d["C"]},props:{playlist:{type:Object,default:function(){}},entities:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isAddingEntity:{type:Boolean,default:!1},isAssetPlaylist:{type:Boolean,default:!1},tempMode:{type:Boolean,default:!1}},data:function(){return{annotations:[],color:"#ff3860",currentTime:"00:00.00",currentTimeRaw:0,fabricCanvas:null,isDlButtonsHidden:!0,isCommentsHidden:!0,isComparing:!1,isDrawing:!1,isPlaying:!1,isRepeating:!1,isShowingPalette:!1,isShowingPencilPalette:!1,isEntitiesHidden:!1,maxDuration:"00:00.00",maxDurationRaw:0,palette:["#ff3860","#008732","#5E60BA","#f57f17"],pencil:"big",pencilPalette:["big","medium","small"],playingEntityIndex:0,entityList:[],entityListToCompare:[],task:null,taskTypeOptions:[],taskTypeToCompare:null,modals:{edit:!1,delete:!1,taskType:!1},loading:{playlists:!1,editPlaylist:!1,deletePlaylist:!1},errors:{playlists:!1,editPlaylist:!1,deletePlaylist:!1},forClientOptions:[{label:this.$t("playlists.for_client"),value:"true"},{label:this.$t("playlists.for_studio"),value:"false"}]}},mounted:function(){var e=this;this.entities?this.entityList=Object.values(this.entities):this.entityList=[],this.updateProgressBar(),this.$nextTick((function(){window.addEventListener("keydown",e.onKeyDown,!1),window.addEventListener("resize",e.onWindowResize),e.$el.nomousemove||(e.$el.onmousemove=e.onMouseMove),e.setupFabricCanvas(),e.resetCanvas()}))},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize),this.$el.onmousemove=null},computed:Q({},Object(c["c"])(["assetTaskTypes","currentProduction","isCurrentUserClient","isCurrentUserManager","taskMap","taskTypeMap","shotTaskTypes","user"]),{isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)},zipDlPath:function(){return"/api/data/playlists/".concat(this.playlist.id,"/download/zip")},currentFrame:function(){return"".concat(Math.floor(this.currentTimeRaw*this.fps)).padStart(3,"0")},deleteText:function(){return this.playlist?this.$t("playlists.delete_text",{name:this.playlist.name}):""},timezone:function(){return this.user.timezone||r.a.tz.guess()},entityTaskTypes:function(){return"asset"===this.playlist.for_entity?this.assetTaskTypes:this.shotTaskTypes},addEntitiesText:function(){return this.isAssetPlaylist?this.$t("playlists.add_assets"):this.$t("playlists.add_shots")},fps:function(){return this.currentProduction.fps||24},canvas:function(){return this.$refs["canvas-wrapper"]},container:function(){return this.$refs.container},rawPlayer:function(){return this.$refs["raw-player"]},rawPlayerComparison:function(){return this.$refs["raw-player-comparison"]},progress:function(){return this.$refs.progress},progressBar:function(){return this.$refs["progress-bar"]},progressCursor:function(){return this.$refs["progress-cursor"]},video:function(){return this.$refs.movie}}),methods:Q({},Object(c["b"])(["changePlaylistType","deletePlaylist","editPlaylist","removeBuildJob","runPlaylistBuild"]),{getBuildPath:function(e){return"/api/data/playlists/".concat(this.playlist.id,"/jobs/").concat(e.id,"/build/mp4")},formatDate:function(e){var t=r.a.tz(e,"UTC").tz(this.timezone);return t.format("YYYY-MM-DD HH:mm")},formatTime:function(e){var t=".".concat(Math.round(e%1*100));2===t.length&&(t+="0");try{return new Date(1e3*e).toISOString().substr(14,5)+t}catch(s){return console.error(s),"00:00.00"}},getTimelinePosition:function(e,t){if(this.$refs.movie&&this.progress){var s=Math.round(e/this.$refs.movie.duration*this.progress.offsetWidth);return s=s-10*t-5,s<0&&(s=0),s+10>this.progress.offsetWidth&&(s-=5),s}return 0},displayBars:function(){this.$refs["button-bar"]&&(this.$refs.header&&(this.$refs.header.style.display="flex",this.$refs.header.style.opacity=1),this.$refs["button-bar"]&&(this.$refs["button-bar"].style.display="flex",this.$refs["button-bar"].style.opacity=1,this.$refs["playlist-progress"].style.display="flex",this.$refs["playlist-progress"].style.opacity=1),this.container.style.cursor="default")},hideBars:function(){var e=this;this.$refs.header.style.opacity=0,this.$refs["button-bar"].style.opacity=0,this.$refs["playlist-progress"].style.opacity=0,setTimeout((function(){e.$refs.header.style.display="none",e.$refs["button-bar"].style.display="none",e.$refs["playlist-progress"].style.display="none",e.container.style.cursor="none"}),500)},showDeleteModal:function(){this.modals.delete=!0},hideDeleteModal:function(){this.modals.delete=!1},confirmRemovePlaylist:function(){var e=this;this.loading.deletePlaylist=!0,this.errors.deletePlaylist=!1,this.deletePlaylist({playlist:this.playlist,callback:function(t){t&&(e.errors.deletePlaylist=!0),e.loading.deletePlaylist=!1,e.$emit("playlist-deleted"),e.modals.delete=!1}})},updateProgressBar:function(){if(this.progress){var e=this.currentTimeRaw/this.maxDurationRaw;this.progress.value=this.currentTimeRaw,this.progressBar.style.width=Math.floor(100*e)+"%"}},updateTaskPanel:function(){if(this.entityList.length>0){var e=this.entityList[this.playingEntityIndex];this.task=e?this.taskMap[e.preview_file_task_id]:null}else this.task=null},scrollToEntity:function(e){var t=this.$refs["entity-"+e];if(t&&t[0]){var s=t[0].$el,n=this.$refs["playlisted-entities"],i=this.entityList[e];if(this.annotations=i.preview_file_annotations||[],s){var a=30,o=s.getBoundingClientRect(),r=n.getBoundingClientRect(),c=o.right>r.right-a,l=o.left<r.left-a;if(l){var d=o.left-r.left-a;n.scrollLeft=n.scrollLeft+d}else if(c){var u=o.right-r.right+a;n.scrollLeft=n.scrollLeft+u}}}},scrollToRight:function(){this.entityList.length>0&&this.scrollToEntity(this.entityList.length-1)},play:function(){this.rawPlayer.play(),this.isComparing&&this.$refs["raw-player-comparison"].play(),this.isPlaying=this.$refs["raw-player"].isPlaying,this.hideCanvas(),this.clearCanvas()},pause:function(){this.showCanvas();var e=this.$refs["raw-player-comparison"];this.rawPlayer&&this.rawPlayer.pause(),e&&e.pause(),this.isPlaying=!1},playEntity:function(e){var t=this.entityList[e];this.hideCanvas(),this.clearCanvas(),"mp4"===t.preview_file_extension?(this.annotations=t.preview_file_annotations||[],this.playingEntityIndex=e,this.scrollToEntity(this.playingEntityIndex),this.rawPlayer.loadEntity(e),this.isComparing&&this.$refs["raw-player-comparison"].loadEntity(e),this.isPlaying&&(this.rawPlayer.play(),this.isComparing&&this.$refs["raw-player-comparison"].play())):this.annotations=[]},goPreviousFrame:function(){this.clearCanvas(),this.rawPlayer.goPreviousFrame(),this.isComparing&&this.$refs["raw-player-comparison"].goPreviousFrame();var e=this.getAnnotation(this.rawPlayer.getCurrentTime());e&&this.loadAnnotation(e)},goNextFrame:function(){this.clearCanvas(),this.rawPlayer.goNextFrame(),this.isComparing&&this.$refs["raw-player-comparison"].goNextFrame();var e=this.getAnnotation(this.rawPlayer.getCurrentTime());e&&this.loadAnnotation(e)},removeEntity:function(e){var t=this;this.$emit("remove-entity",e),this.$options.silent=!0;var s=this.entityList.findIndex((function(t){return t.id===e.id}));this.entityList.splice(s,1),setTimeout((function(){t.$options.silent=!1}),1e3)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0)},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1)},isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},onProgressBarClicked:function(e){this.clearCanvas();var t=(e.pageX-this.progress.offsetLeft)/this.progress.offsetWidth,s=t*this.maxDurationRaw;this.rawPlayer.setCurrentTime(s),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(s)},onPreviousFrameClicked:function(){this.goPreviousFrame()},onNextFrameClicked:function(){this.goNextFrame()},onPlayPreviousEntityClicked:function(){this.rawPlayer.loadPreviousEntity(),this.isComparing&&this.$refs["raw-player-comparison"].loadPreviousEntity(),this.isPlaying&&this.play()},onPlayNextEntityClicked:function(){this.rawPlayer.loadNextEntity(),this.isComparing&&this.$refs["raw-player-comparison"].loadNextEntity(),this.isPlaying&&this.play()},onPlayPauseClicked:function(){this.isPlaying?this.pause():this.play()},onRepeatClicked:function(){this.isRepeating=!this.isRepeating},onFullscreenClicked:function(){this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},onKeyDown:function(e){this.displayBars(),["INPUT","TEXTAREA"].includes(e.target.tagName)||(46===e.keyCode&&this.fabricCanvas?this.deleteSelection():37===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.goPreviousFrame()):39===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.goNextFrame()):32===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.onPlayPauseClicked()):e.ctrlKey&&e.altKey&&68===e.keyCode?this.onAnnotateClicked():e.ctrlKey&&90===e.keyCode?this.undoLastAction():e.altKey&&82===e.keyCode&&this.redoLastAction())},onWindowResize:function(){var e=this,t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>600&&(this.lastCall=t,setTimeout((function(){e.resetHeight(),e.resetCanvas(),e.reloadAnnotations()}),100))},reloadAnnotations:function(){var e=this,t=this.annotations.map((function(e){return Q({},e)}));this.annotations=[],setTimeout((function(){e.annotations=t,e.reloadCurrentAnnotation()}),200)},onFilmClicked:function(){var e=this;this.isEntitiesHidden=!this.isEntitiesHidden,this.$nextTick((function(){e.resetHeight(),e.scrollToEntity(e.playingEntityIndex)}))},reloadCurrentAnnotation:function(){var e=this.getAnnotation(this.currentTimeRaw);e&&this.loadAnnotation(e)},onCommentClicked:function(){var e=this,t=this.$refs["video-container"].offsetHeight;this.isCommentsHidden=!this.isCommentsHidden,this.isCommentsHidden||(this.$refs["task-info"].$el.style.height="".concat(t,"px")),this.$nextTick((function(){e.$refs["task-info"].focusCommentTextarea(),e.resetHeight(),setTimeout(e.reloadCurrentAnnotation,300)}))},onCompareClicked:function(){this.isComparing=!this.isComparing},onPlayClicked:function(){this.rawPlayer.isPlaying?this.pause():this.play()},onTimeUpdate:function(){this.rawPlayer.currentPlayer?this.currentTimeRaw=this.rawPlayer.currentPlayer.currentTime:this.currentTimeRaw=0,this.currentTime=this.formatTime(this.currentTimeRaw),this.updateProgressBar()},onMaxDurationUpdate:function(e){this.maxDurationRaw=e,this.maxDuration=this.formatTime(e),this.progress&&this.progress.setAttribute("max",this.maxDurationRaw)},onMouseMove:function(){var e=this,t=this.$refs["button-bar"];t&&1!==t.style.opacity&&this.displayBars();var s=this.isFullScreen()&&this.isEntitiesHidden&&this.isCommentsHidden;s&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t=e.isFullScreen()&&e.isEntitiesHidden&&e.isCommentsHidden;t&&e.hideBars()}),2e3))},onEntityChange:function(e){if(this.playingEntityIndex=e,this.rawPlayerComparison){var t=this.rawPlayerComparison.playingIndex;t<e?this.rawPlayerComparison.playNext():(this.rawPlayerComparison.setCurrentTime(0),this.rawPlayerComparison.play())}this.$options.silent||this.scrollToEntity(this.playingEntityIndex)},onPreviewChanged:function(e,t){this.pause(),this.$emit("preview-changed",e,t);var s=this.entityList.find((function(t){return t.id===e.id}));s.preview_file_id=t,this.rawPlayer&&this.rawPlayer.reloadCurrentEntity()},onEntityDropped:function(e){var t=this.$refs["playlisted-entities"],s=t.scrollLeft,n=this.entityList.find((function(t){return t.id===e.after})),i=this.entityList.findIndex((function(t){return t.id===e.after})),a=this.entityList.findIndex((function(t){return t.id===e.before}));i>=0&&a>=0&&(this.entityList.splice(i,1),i>a&&a++,this.entityList.splice(a,0,n)),this.$nextTick((function(){t.scrollLeft=s})),this.$emit("order-change",e)},resetHeight:function(){var e=this;this.$nextTick((function(){var t=window.innerHeight-90;e.tempMode||(t=e.container?e.container.offsetHeight:0),t-=e.$refs.header?e.$refs.header.offsetHeight:0,e.$refs["playlist-progress"]&&(t-=e.$refs["playlist-progress"].offsetHeight),e.$refs["button-bar"]&&(t-=e.$refs["button-bar"].offsetHeight),e.$refs["playlisted-entities"]&&(t-=e.$refs["playlisted-entities"].offsetHeight),e.$refs["playlist-annotation"]&&(t-=e.$refs["playlist-annotation"].$el.offsetHeight),e.$refs["video-container"]&&(e.$refs["video-container"].style.height="".concat(t,"px")),e.isCommentsHidden||(e.$refs["task-info"].$el.style.height="".concat(t,"px")),e.rawPlayer&&e.rawPlayer.resetHeight(),e.isComparing&&e.$refs["raw-player-comparison"].resetHeight(),e.$nextTick((function(){e.resetCanvas(),e.updateProgressBar()}))}))},resetCanvas:function(){this.resetCanvasSize(),this.fabricCanvas&&this.fabricCanvas.renderAll(),this.clearCanvas()},resetCanvasSize:function(){var e=this;this.rawPlayer&&this.fabricCanvas&&this.$nextTick((function(){if(e.$refs["canvas-wrapper"]){var t=e.rawPlayer.getVideoRatio(),s=e.rawPlayer.$el.offsetWidth,n=e.rawPlayer.$el.offsetHeight,i=t?n*t:s;if(s>i){var a=Math.round((s-i)/2);e.$refs["canvas-wrapper"].style.left=a+"px",e.$refs["canvas-wrapper"].style.top="0px",e.fabricCanvas.setDimensions({width:i,height:n})}else{var o=t?Math.round(s/t):n,r=Math.round((n-o)/2);e.$refs["canvas-wrapper"].style.left="0px",e.$refs["canvas-wrapper"].style.top=r+"px",e.fabricCanvas.setDimensions({width:s,height:o})}}}))},rebuildComparisonOptions:function(){var e=this,t=Object.values(this.entities);if(t.length>0){var s=Object.keys(t[0].preview_files);t.forEach((function(e){var t=Object.keys(e.preview_files);s=s.filter((function(e){return t.includes(e)}))})),this.taskTypeOptions=s.map((function(t){return{label:e.taskTypeMap[t].name,value:e.taskTypeMap[t].id}})),this.taskTypeOptions.length>0&&(this.taskTypeToCompare=this.taskTypeOptions[0].value)}else this.taskTypeOptions=[]},rebuildEntityListToCompare:function(){var e=this;this.taskTypeToCompare?this.entityListToCompare=this.entityList.map((function(t){var s=t.preview_files[e.taskTypeToCompare][0];return{preview_file_id:s.id,preview_file_extension:"mp4"}})):this.buildEntityListToCompare=[]},resetComparison:function(){var e=this;this.rebuildEntityListToCompare(),this.$nextTick((function(){e.pause();var t=e.$refs["raw-player-comparison"];t.loadEntity(e.playingEntityIndex),t.setCurrentTime(e.currentTimeRaw)}))},clearCanvas:function(){this.fabricCanvas&&this.fabricCanvas.clear()},onAnnotateClicked:function(){this.showCanvas(),this.isDrawing?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.fabricCanvas.isDrawingMode=!0,this.isDrawing=!0)},showCanvas:function(){this.canvas&&(this.canvas.style.display="block")},hideCanvas:function(){this.canvas&&(this.canvas.style.display="none")},loadAnnotation:function(e){var t=this;this.pause();var s=e.time||0;if(this.rawPlayer){this.rawPlayer.setCurrentTime(s),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(s),this.currentTimeRaw=s,this.updateProgressBar(),this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.clearCanvas();var n=1,i=1;e.width&&(n=this.fabricCanvas.width/e.width,i=this.fabricCanvas.width/e.width),e.height&&(i=this.fabricCanvas.height/e.height),e.drawing.objects.forEach((function(e){var s={left:e.left*n,top:e.top*i,fill:"transparent",stroke:e.stroke,strokeWidth:e.strokeWidth,radius:e.radius,width:e.width,height:e.height,scaleX:e.scaleX*n,scaleY:e.scaleY*i};if("path"===e.type){var a=1;e.canvasWidth&&(a=e.canvasWidth/t.fabricCanvas.width);var o=new l["fabric"].Path(e.path,Q({},s,{strokeWidth:e.strokeWidth*a,canvasWidth:e.canvasWidth}));o.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(o)}}))}},saveAnnotations:function(){var e=Object(u["b"])(this.currentTimeRaw,this.fps)||0;if(this.annotations){var t=this.getAnnotation(e),s=this.getNewAnnotations(e,t),n=this.entityList[this.playingEntityIndex],i={id:n.preview_file_id,task_id:n.preview_file_task_id,annotations:n.preview_file_annotations};this.$emit("annotationchanged",{preview:i,annotations:s})}},onDeleteClicked:function(){this.deleteSelection()},getAnnotation:function(e){return e=Object(u["b"])(e,this.fps),this.annotations?this.annotations.find((function(t){return t.time===e})):null},toggleDlButtons:function(){this.isDlButtonsHidden=!this.isDlButtonsHidden},onBuildClicked:function(){this.runPlaylistBuild(this.playlist)},onRemoveBuildJob:function(e){e.playlist_id=this.playlist.id,this.removeBuildJob(e)},onMetadataLoaded:function(e){var t=this;this.$nextTick((function(){t.resetCanvasSize()}))},showTaskTypeModal:function(){this.modals.taskType=!0},hideTaskTypeModal:function(){this.modals.taskType=!1},confirmChangeTaskType:function(e){this.$emit("task-type-changed",e),this.modals.taskType=!1}}),watch:{playingEntityIndex:function(){this.updateTaskPanel(),this.resetUndoStacks()},isComparing:function(){this.isComparing&&this.resetComparison(),this.$nextTick(this.resetCanvas)},taskTypeToCompare:function(){this.isComparing&&this.resetComparison()},entities:function(){var e=this,t=this.$refs["playlisted-entities"],s=t?t.scrollLeft:0;this.entityList=Object.values(this.entities),this.playingEntityIndex=0,this.pause(),this.rawPlayer&&this.rawPlayer.setCurrentTime(0),this.currentTimeRaw=0,this.updateProgressBar(),this.updateTaskPanel(),this.rebuildComparisonOptions(),this.clearCanvas(),this.annotations=[],0===this.entityList.length?(this.rawPlayer&&this.rawPlayer.clear(),this.isComparing&&this.$refs["raw-player-comparison"].clear(),this.maxDurationRaw=0,this.maxDuration="00:00.00"):("mp4"!==this.entityList[0].preview_file_extension&&this.$nextTick((function(){e.rawPlayer.loadNextEntity()})),this.$nextTick((function(){t&&(t.scrollLeft=s)}))),this.resetHeight(),this.resetCanvas()},playlist:function(){var e=this;this.forClient=Boolean(this.playlist.for_client).toString(),this.$nextTick((function(){e.updateProgressBar(),e.clearCanvas()}))},isAddingEntity:function(){var e=this;this.$nextTick((function(){e.updateProgressBar()}))}}},X=J,Z=(s("90f5"),Object(P["a"])(X,n,i,!1,null,"7a15b568",null));t["a"]=Z.exports},"1f53":function(e,t,s){"use strict";var n=s("8cde"),i=s.n(n);i.a},2:function(e,t){},2017:function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"g",(function(){return a})),s.d(t,"f",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"b",(function(){return d})),s.d(t,"h",(function(){return u}));s("a4d3"),s("e01a"),s("d28b"),s("99af"),s("4de4"),s("4160"),s("c975"),s("d81d"),s("13d5"),s("b0c0"),s("d3b7"),s("ac1f"),s("6062"),s("3ca3"),s("5319"),s("1276"),s("159b"),s("ddb0");var n=s("2909"),i=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s={},n={};return e.forEach((function(e){var i;e&&(i=e.name?t?e.name.split(" "):[e.name]:[],f(s,n,e,i))})),s},a=function(e){var t={},s={};return e.forEach((function(e){var n=e.full_entity_name.replace(/_/g," ").replace(/-/g," "),i=n.split(" ").concat([e.task_type_name,e.task_status_short_name,e.project_name]);f(t,s,e,i)})),t},o=function(e,t){var s={},n={};return e.forEach((function(e){var i=e.entity_name.replace(/_/g," ").replace(/-/g," "),a=i.split(" ").concat([e.task_status_short_name]);e.assignees.forEach((function(e){var s=t[e];s&&a.push(s.first_name,s.last_name)})),f(s,n,e,a)})),s},r=function(e){var t={},s={};return e.forEach((function(e){var n=e.name.replace(/_/g," ").replace(/-/g," "),i=e.asset_type_name.split(" "),a=n.split(" ").concat(i);f(t,s,e,a)})),t},c=function(e){var t={},s={};return e.forEach((function(e){var n=[e.name,e.sequence_name,e.episode_name];f(t,s,e,n)})),t},l=function(e){var t={},s={};return e.forEach((function(e){var n=[e.name,e.episode_name];f(t,s,e,n)})),t},d=function(e){var t={},s={};return e.forEach((function(e){var n=[e.name];f(t,s,e,n)})),t},u=function(e,t){t||(t=[]);var s=t.map((function(t){return h(e,t)})).filter((function(e){return null!==e}));return s.length>0?s.reduce(p,Object(n["a"])(s[0])):null},p=function(e,t){return e.filter((function(e){return t.has(e)}))},h=function(e,t){return t&&t.indexOf("=")<0?e[t.toLowerCase()]?new Set(e[t.toLowerCase()]):new Set([]):null},f=function(e,t,s,n){var i=!0,a=!1,o=void 0;try{for(var r,c=n[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var l=r.value,d="";if(l){var u=!0,p=!1,h=void 0;try{for(var f,m=l[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){var b=f.value;d+=b.toLowerCase(),void 0===e[d]&&(e[d]=[],t[d]={}),t[d][s.id]||(e[d].push(s),t[d][s.id]=!0)}}catch(_){p=!0,h=_}finally{try{u||null==m.return||m.return()}finally{if(p)throw h}}}}}catch(_){a=!0,o=_}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return e}},2229:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"l",(function(){return o})),s.d(t,"j",(function(){return r})),s.d(t,"h",(function(){return c})),s.d(t,"n",(function(){return l})),s.d(t,"e",(function(){return d})),s.d(t,"m",(function(){return u})),s.d(t,"g",(function(){return p})),s.d(t,"f",(function(){return h})),s.d(t,"d",(function(){return f})),s.d(t,"c",(function(){return m})),s.d(t,"o",(function(){return b})),s.d(t,"i",(function(){return _})),s.d(t,"a",(function(){return v})),s.d(t,"k",(function(){return y}));s("b0c0");var n=s("ceca"),i=s.n(n),a=function(e){return e.sort(i()("canceled").thenBy((function(e,t){return e.asset_type_name.localeCompare(t.asset_type_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},o=function(e){return e.sort(i()("canceled").thenBy(w).thenBy((function(e,t){return e.sequence_name.localeCompare(t.sequence_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},r=function(e){return e.sort(i()("canceled").thenBy((function(e,t){return e.episode_name?e.episode_name.localeCompare(t.episode_name):0})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},c=function(e){return e.sort((function(e,t){return e.project_status_name===t.project_status_name?e.name.localeCompare(t.name):-1*e.project_status_name.localeCompare(t.project_status_name)}))},l=function(e,t){return e.sort(i()("priority",-1).thenBy((function(e,t){return e.project_name?e.project_name.localeCompare(t.project_name):0})).thenBy((function(e,s){var n=t[e.task_type_id],i=t[s.task_type_id];return n.name.localeCompare(i.name)})).thenBy((function(e,t){return e.full_entity_name?e.full_entity_name.localeCompare(t.full_entity_name):e.entity_name.localeCompare(t.entity_name)})))},d=function(e){return e.sort(i()("pinned",-1).thenBy("created_at",-1))},u=function(e){return e.sort(i()("for_shots").thenBy("priority").thenBy("name"))},p=function(e){return e.sort(i()("created_at",-1).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},h=function(e){return e.sort(i()("active",-1).thenBy((function(e,t){return e.first_name?e.first_name.localeCompare(t.first_name):-1})).thenBy((function(e,t){return e.last_name?e.last_name.localeCompare(t.last_name):-1})))},f=function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))},m=function(e){return e.sort(i()("created_at",-1))},b=function(e,t){return e.sort((function(e,s){var n=t[e],i=t[s];return n.priority===i.priority?n.name.localeCompare(i.name):n.priority>i.priority?1:-1}))},_=function(e,t){return e.sort(i()("for_shots").thenBy("priority").thenBy("name").thenBy("start_date"))},v=function(e,t,s,n,o){if(t&&t.length>0){var r=t[0],c=k(o,r);"metadata"===r.type&&(c=g(r)),e=e.sort(i()("canceled").thenBy(c).thenBy((function(e,t){return e.asset_type_name.localeCompare(t.asset_type_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))}else e=a(e);return e},y=function(e,t,s,n,a){if(t&&t.length>0){var r=t[0],c=k(a,r);"metadata"===r.type&&(c=g(r)),e=e.sort(i()("canceled").thenBy(c).thenBy(w).thenBy((function(e,t){return e.sequence_name.localeCompare(t.sequence_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))}else e=o(e);return e},g=function(e){return function(t,s){var n=t.data[e.column]?t.data[e.column]:"",i=s.data[e.column]?s.data[e.column]:"";return n?i?n.localeCompare(i):-1:1}},k=function(e,t){return function(s,n){var i=s.validations[t.column],a=n.validations[t.column];if(!i)return-1;if(!a)return 1;var o=e[i].task_status_short_name,r=e[a].task_status_short_name;return o.localeCompare(r)}},w=function(e,t){return e.episode_name?e.episode_name.localeCompare(t.episode_name):0}},"237b":function(e,t,s){"use strict";var n=s("32d3"),i=s.n(n);i.a},"256f":function(e,t,s){},"271f":function(e,t,s){"use strict";var n=s("187f"),i=s.n(n);i.a},"274f":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.productionId?s("router-link",{attrs:{to:e.taskTypePath}},[s("span",{staticClass:"tag task-type-name",style:{"border-left":"4px solid "+e.color}},[e._v(" "+e._s(e.taskType.name)+" ")])]):s("div",{staticClass:"tag task-type-name no-link",style:{"border-left":"4px solid "+e.color}},[e._v(" "+e._s(e.taskType.name)+" ")])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"task-type-name",components:{},props:["taskType","productionId"],computed:c({},Object(o["c"])([]),{color:function(){return"#000000"===this.taskType.color.toUpperCase()?"$grey-strong":this.taskType.color},taskTypePath:function(){var e={name:"task-type",params:{production_id:this.productionId,task_type_id:this.taskType.id,type:this.taskType.for_shots?"shots":"assets"}};return(this.taskType.episode_id||this.$route.params.episode_id)&&(e.name="episode-task-type",e.params.episode_id=this.taskType.episode_id||this.$route.params.episode_id),e}}),methods:c({},Object(o["b"])([]))},d=l,u=(s("128f"),s("2877")),p=Object(u["a"])(d,n,i,!1,null,"fde56c72",null);t["a"]=p.exports},2866:function(e,t,s){"use strict";var n=s("0552"),i=s.n(n);i.a},"28de":function(e,t,s){"use strict";var n=s("346e"),i=s.n(n);i.a},"29f8":function(e,t,s){},"2c0c":function(e,t,s){},"2c1a":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[e._v(e._s(e.text))]),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userLockText,expression:"userLockText"}],ref:"confirmation-name",staticClass:"input",attrs:{type:"text"},domProps:{value:e.userLockText},on:{input:function(t){t.target.composing||(e.userLockText=t.target.value)}}})]),e.isError?s("p",{staticClass:"is-danger"},[e._v(e._s(e.errorText))]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":e.isLoading},attrs:{disabled:e.isLocked},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])],1)])])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"hard-delete-modal",data:function(){return{userLockText:""}},props:{text:{type:String,default:""},active:{type:Boolean,default:!1},cancelRoute:{type:Object,default:function(){}},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},lockText:{type:String,default:"locked"}},computed:c({},Object(o["c"])([]),{isLocked:function(){return"locked"===this.lockText||this.lockText!==this.userLockText}}),methods:c({},Object(o["b"])([])),watch:{active:function(){var e=this;this.active&&(this.userLockText="",this.$nextTick((function(){e.$refs["confirmation-name"]&&e.$refs["confirmation-name"].focus()})))}}},d=l,u=(s("fd3f"),s("2877")),p=Object(u["a"])(d,n,i,!1,null,"645b5b5b",null);t["a"]=p.exports},"2cbc":function(e,t,s){"use strict";var n=s("dd79"),i=s.n(n);i.a},"2dba":function(e,t,s){"use strict";var n=s("6922"),i=s.n(n);i.a},"2e9c":function(e,t,s){"use strict";var n=s("d017"),i=s.n(n);i.a},"2fe8":function(e,t,s){},3:function(e,t){},"32d3":function(e,t,s){},3388:function(e,t,s){"use strict";var n=s("ec12"),i=s.n(n);i.a},3455:function(e,t,s){"use strict";s("99af"),s("4160"),s("a15b"),s("d81d"),s("13d5"),s("b0c0"),s("b64b"),s("d3b7"),s("07ac"),s("ac1f"),s("5319"),s("159b");var n=s("2909"),i=s("369b"),a=s.n(i),o=s("3657"),r=s("09d3"),c={generateTimesheet:function(e,t,s,n,i,a,o,r,l){var d=c.getTimesheetHeaders(n,i,a,o,r,l),u=c.getTimesheetEntries(d,s,t);c.buildCsvFile(e,u)},getTimesheetHeaders:function(e,t,s,n,i,a){var r=["Person"],c=[];for(var l in"month"===e?c=Object(o["f"])(t,n,i):"week"===e?c=Object(o["h"])(t,n,a):"day"===e&&(c=Object(o["b"])(t,s,n,i)),c)r.push(l);return r},getTimesheetEntries:function(e,t,s){var n=[e];return t.forEach((function(t){var i=[t.full_name];e.forEach((function(e,n){n>0&&(n--,s&&s[n]&&s[n][t.id]?i.push(s[n][t.id]/60):i.push("-"))})),n.push(i)})),n},turnEntriesToCsvString:function(e){var t=[];return e.forEach((function(e){var s=e.map((function(e){var t="".concat(e||"");return'"'.concat(t.replace(/"/g,""),'"')})),n=s.join(";");console.log(n),n.length>2&&t.push(n)})),t.join("\n")},buildCsvFile:function(e,t){var s=c.turnEntriesToCsvString(t),n="data:text/csv;charset=utf-8,"+s,i=encodeURI(n),a=document.createElement("a");return a.setAttribute("href",i),a.setAttribute("download","".concat(e,".csv")),document.body.appendChild(a),a.click(),s},generateStatReports:function(e,t,s,i,a,o){var r=c.getStatReportsHeaders(t,s,i),l=c.getStatReportsEntries(t,s,i,a,o),d=[r].concat(Object(n["a"])(l));return c.buildCsvFile(e,d)},getStatReportsHeaders:function(e,t,s){var n=l(e,t),i=["name","","All",""];return n.reduce((function(e,s){if("all"!==s){var n=t[s].name;return e.concat([n,""])}return e}),i)},getStatReportsEntries:function(e,t,s,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"count",a=[],o=l(e,t),r=d(e,n);return r.forEach((function(t){var r=p(e,t),c=u(e,r,i,t),l=f(n,s,i,e,r,t,c);o.forEach((function(s){if("all"!==s){var n=e[t][s];if(n){var a=h(e,n,i,t,s);m(e,i,t,s,r,a,l)}else Object.keys(e[t].all).forEach((function(e){l[e]=l[e].concat(["",""])}))}})),a=a.concat(Object.values(l).sort((function(e,t){return e[1].localeCompare(t[1])}))),a.push([""])})),a},processCSV:function(e,t){return new Promise((function(s,n){a.a.parse(e,{config:t,encoding:"ISO-8859-1",error:n,complete:function(e){s(e.data)}})}))}},l=function(e,t){return Object.keys(e.all).sort((function(e,s){return"all"===e?1:"all"===s?-1:t[e].priority-t[s].priority}))},d=function(e,t){return Object.keys(e).sort((function(e,s){return"all"===e?-1:"all"===s?1:t[e].name.localeCompare(t[s].name)}))},u=function(e,t,s,n){var i=0;return t.forEach((function(t){var a=e[n].all[t];i+=a[s]})),i},p=function(e,t){return Object.keys(e[t].all)},h=function(e,t,s,n,i){var a=0;return Object.keys(t).forEach((function(t){var o=e[n][i][t];a+=o[s]})),a},f=function(e,t,s,n,i,a,o){var c={};return i.forEach((function(i){var l=t[i],d=e[a],u=d?d.name:"All",p=n[a].all[i],h=p[s],f=Object(r["d"])(h,o);c[i]=[u,l.name,h,f+"%"]})),c},m=function(e,t,s,n,i,a,o){i.forEach((function(i){var c=e[s][n][i],l=0;c&&(l=c[t]);var d=Object(r["d"])(l,a);o[i]=o[i].concat([l,d+"%"])}))};t["a"]=c},"346e":function(e,t,s){},3657:function(e,t,s){"use strict";s.d(t,"j",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"i",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"b",(function(){return d})),s.d(t,"h",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"e",(function(){return h})),s.d(t,"g",(function(){return f})),s.d(t,"c",(function(){return m}));s("99af"),s("4160"),s("d81d"),s("a9e3"),s("d3b7"),s("159b"),s("ddb0");var n=s("2909"),i=s("7f45"),a=s.n(i),o=function(e,t){var s=t-e+1;return s<0&&(s=0),Object(n["a"])(Array(s).keys()).map((function(t){return t+e}))},r=function(e){var t=a.a.tz(e,"UTC");return a()().diff(t,"days")>1?t.format("YYYY-MM-DD HH:mm"):a()(t.format()).fromNow()},c=function(e){var t=a()().year();return a()("".concat(t,"-").concat(e),"YYYY-M").format("MMM")},l=function(e,t,s){return o(1,t===e?s:12)},d=function(e,t,s,n){if(s===e&&n===t)return o(1,a()().date());var i=a()("".concat(e,"-").concat(Number(t)),"YYYY-M","en");return o(1,i.endOf("month").date())},u=function(e,t){return o(1,t===e?a()().week():52)},p=function(e){var t=a()();return e.forEach((function(e){e.startDate.isBefore(t)&&(t=e.startDate.clone())})),t},h=function(e){var t=a()().add(3,"months");return e.forEach((function(e){e.endDate.isAfter(t)&&(t=e.endDate.clone())})),t},f=function(e){return e?a()(e,"YYYY-MM-DD","en"):a()()},m=function(e,t){return t?a()(t,"YYYY-MM-DD","en"):e.clone().add("days",1)}},3722:function(e,t,s){"use strict";var n=s("a4d5"),i=s.n(n);i.a},"3a7d":function(e,t,s){},"3c7c":function(e,t,s){"use strict";var n=s("4478"),i=s.n(n);i.a},"3c89":function(e,t,s){"use strict";var n=s("549e"),i=s.n(n);i.a},"3dcc":function(e,t,s){},"3fac":function(e,t,s){},4085:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"wrapper",staticClass:"file-upload-wrapper",on:{drop:e.onDrop,dragover:e.onDragover,dragleave:e.onDragleave}},[s("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[s("div",{staticClass:"dropbox"},[s("label",{class:{button:!0,"is-primary":e.isPrimary}},[e._v(" "+e._s(e.label)+" "),s("input",{ref:"uploadInput",staticClass:"visuallyhidden",attrs:{type:"file",accept:e.accept,name:e.uploadFieldName,disabled:e.isSaving||e.disabled,multiple:e.multiple},on:{change:function(t){return e.filesChange(t.target.name,t.target.files)}}})]),this.uploadedFiles.length>1?s("span",{staticClass:"file-upload-status"},[e._v(" "+e._s(this.uploadedFiles.length)+" "+e._s(e.$tc("main.files_selected"))+" ")]):e._e(),1===this.uploadedFiles.length?s("span",{staticClass:"file-upload-status"},[e._v(" "+e._s(this.uploadedFiles[0])+" ")]):e._e()])])])},i=[],a=(s("4160"),s("b0c0"),{name:"file-upload",props:{accept:{default:".csv",type:String},isPrimary:{default:!0,type:Boolean},label:{type:String,required:!0},multiple:{default:!1,type:Boolean},uploadFieldName:{default:"file",type:String},disabled:{type:Boolean,default:!1}},data:function(){return{isInitial:!0,isSaving:!1,uploadedFiles:[]}},mounted:function(){var e=this;this.reset();var t=["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"];t.forEach((function(t){e.$refs.wrapper.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))}))},computed:{},methods:{filesChange:function(e,t){for(var s=[],n=0,i=t.length;n<i;n++){var a=t[n],o=new FormData;o.append(this.uploadFieldName,a,a.name),s.push(o),this.multiple?this.uploadedFiles.push(a.name):this.uploadedFiles=[a.name]}this.multiple?this.$emit("fileselected",s):this.$emit("fileselected",s[0])},reset:function(){this.isSaving=!1,this.isInitial=!0,this.uploadedFiles=[],this.$refs.uploadInput.value=""},onDragover:function(){this.isDragging=!0},onDragleave:function(){this.isDragging=!1},onDrop:function(e){e.dataTransfer.files&&(this.isDragging=!1,this.isSaving=!1,this.filesChange("file",e.dataTransfer.files))}},watch:{}}),o=a,r=(s("9856"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"2dc0c4ee",null);t["a"]=c.exports},"40dc":function(e,t,s){},"40f7":function(e,t,s){},"41e2":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"picture-player"},[s("div",{ref:"picture-wrapper",staticClass:"picture-wrapper"},[s("div",{ref:"canvas-wrapper",staticClass:"canvas-wrapper"},[e.readOnly?e._e():s("canvas",{ref:"annotation-canvas",staticClass:"canvas",style:{display:"block"},attrs:{id:"annotation-canvas"}})]),e.isFullScreen()?s("img",{ref:"picture",attrs:{src:e.pictureDlPath}}):s("img",{ref:"picture",attrs:{src:e.picturePath}}),e.isLoading?s("spinner"):e._e()],1),s("div",{ref:"button-bar",staticClass:"buttons flexrow pull-bottom"},[s("div",{staticClass:"left flexrow"},[e.readOnly?e._e():s("button",{staticClass:"button flexrow-item",on:{click:e.onPreviousClicked}},[s("chevron-left-icon",{staticClass:"icon"})],1),e.readOnly?e._e():s("span",{staticClass:"flexrow-item bar-element"},[e._v(" "+e._s(e.currentIndex)+" / "+e._s(e.preview.previews.length)+" ")]),e.readOnly?e._e():s("button",{staticClass:"button flexrow-item",on:{click:e.onNextClicked}},[s("chevron-right-icon",{staticClass:"icon"})],1),e.readOnly?e._e():s("button",{staticClass:"button flexrow-item",on:{click:e.onAddPreviewClicked}},[s("plus-icon",{staticClass:"icon"})],1),e.currentIndex>1&&!e.light&&!e.readOnly?s("button",{staticClass:"button flexrow-item",on:{click:e.onRemovePreviewClicked}},[s("trash-icon",{staticClass:"icon"})],1):e._e()]),s("div",{staticClass:"right flexrow"},[e.fullScreen&&!e.readOnly?s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{icon:"undo"},on:{click:e.undoLastAction}}):e._e(),e.fullScreen&&!e.readOnly?s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{icon:"redo"},on:{click:e.redoLastAction}}):e._e(),e.isFullScreenEnabled&&!e.readOnly?s("button",{staticClass:"button flexrow-item",on:{click:e.onDeleteClicked}},[s("x-icon",{staticClass:"icon"})],1):e._e(),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawing,expression:"isDrawing"}],staticClass:"annotation-tools"},[s("pencil-picker",{attrs:{isOpen:e.isShowingPencilPalette,pencil:e.pencil,sizes:this.pencilPalette},on:{"toggle-palette":e.onPickPencil,change:e.onChangePencil}}),s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.color,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeColor}})],1)]),e.isFullScreenEnabled&&!e.readOnly?s("button",{class:{button:!0,"flexrow-item":!0,active:e.isDrawing},on:{click:e.onPencilAnnotateClicked}},[s("edit-2-icon",{staticClass:"icon"})],1):e._e(),e.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:e.onFullscreenClicked}},[s("maximize-icon",{staticClass:"icon"})],1):e._e(),e.readOnly?e._e():s("a",{staticClass:"button flexrow-item",attrs:{href:e.pictureDlPath}},[s("download-icon",{staticClass:"icon"})],1)],1)])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("caad"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("bf19"),s("ade3")),o=s("2909"),r=s("7a94"),c=s("0a35"),l={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("picture").webkitRequestFullScreen)}},methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}}},d=s("9fbc"),u=s("de40"),p=s("7096"),h=s("7f06"),f=s("be83");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _={name:"picture-viewer",components:{ButtonSimple:u["a"],ChevronLeftIcon:c["f"],ChevronRightIcon:c["g"],ColorPicker:p["a"],DownloadIcon:c["m"],Edit2Icon:c["n"],MaximizeIcon:c["w"],PencilPicker:h["a"],PlusIcon:c["B"],Spinner:f["a"],TrashIcon:c["J"],XIcon:c["N"]},mixins:[d["a"],l],props:{preview:{type:Object,default:function(){}},light:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},data:function(){return{annotations:this.preview.annotations?Object(o["a"])(this.preview.annotations):[],currentIndex:1,color:"#ff3860",fabricCanvas:null,fullScreen:!1,isLoading:!0,isDrawing:!1,isShowingPalette:!1,palette:["#ff3860","#008732","#5E60BA","#f57f17"],pencil:"big",pencilPalette:["big","medium","small"]}},mounted:function(){var e=this;this.container.style.height=this.getDefaultHeight()+"px",setTimeout((function(){e.picture.complete?(e.isLoading=!1,e.mountPicture()):e.picture.addEventListener("load",(function(){e.isLoading=!1,e.mountPicture()})),window.addEventListener("keydown",e.onKeyDown),window.addEventListener("resize",e.onWindowResize);var t=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","msfullscreenchange"];t.forEach((function(t){return window.addEventListener(t,e.exitHandler)}))}),0)},computed:{container:function(){return this.$refs.container},canvas:function(){return this.$refs.canvas},picture:function(){return this.$refs.picture},pictureWrapper:function(){return this.$refs["picture-wrapper"]},picturePath:function(){var e=this.preview.previews[this.currentIndex-1].id;return"/api/pictures/previews/preview-files/".concat(e,".png")},pictureDlPath:function(){var e=this.preview.previews[this.currentIndex-1].id;return"/api/pictures/originals/preview-files/".concat(e,"/download")},currentPreview:function(){return this.preview.previews[this.currentIndex-1]}},beforeDestroy:function(){this.clearCanvas(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},methods:{exitHandler:function(){!this.isFullScreen()&&this.fullScreen&&(this.fullScreen=!1)},mountPicture:function(){this.container.style.height=this.getDefaultHeight()+"px",this.fabricCanvas||this.setupFabricCanvas(),this.loadAnnotation(0),this.$nextTick(this.fixCanvasSize)},setupFabricCanvas:function(){var e=this;if(!this.readOnly){var t=this.getDimensions(),s=t.width,n=t.height,i=new r["fabric"].Canvas("annotation-canvas");this.container.style.height=this.getDefaultHeight()+"px",i.setDimensions({width:s,height:n}),i.freeDrawingBrush.color=this.color,i.freeDrawingBrush.width=4,i.off("object:added",this.stackAddAction),i.on("object:added",this.stackAddAction),i.on("mouse:up",(function(){e.isDrawing&&(e.clearUndoneStack(),e.saveAnnotations())})),this.fabricCanvas=i}},clearCanvas:function(){var e=this;this.fabricCanvas&&this.fabricCanvas.getObjects().forEach((function(t){e.fabricCanvas.remove(t)}))},getDefaultHeight:function(){return this.isFullScreen()?screen.height:screen.width>1300&&(!this.light||this.readOnly)?500:200},getDimensions:function(){var e=1;this.picture.naturalWidth&&(e=this.picture.naturalHeight/this.picture.naturalWidth);var t=this.container.offsetWidth-1,s=Math.floor(t*e);return s>this.getDefaultHeight()&&(s=this.getDefaultHeight()),s-=32,t=Math.floor(s/e),{width:t,height:s}},onAddPreviewClicked:function(){this.$emit("add-preview")},onRemovePreviewClicked:function(){this.$emit("remove-extra-preview",this.currentPreview)},onFullscreenClicked:function(){this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1),this.fullScreen=!1},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0),this.fullScreen=!0},onDeleteClicked:function(){this.deleteSelection()},onPickColor:function(){this.isShowingPalette?this.isShowingPalette=!1:this.isShowingPalette=!0},onChangeColor:function(e){this.color=e,this.fabricCanvas.freeDrawingBrush.color=this.color,this.isShowingPalette=!1},onPencilAnnotateClicked:function(){this.fabricCanvas.isDrawingMode?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.fabricCanvas.isDrawingMode=!0,this.isDrawing=!0)},onWindowResize:function(){var e=this,t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>600&&(this.lastCall=t,setTimeout((function(){e.clearCanvas(),e.mountPicture(),e.reloadAnnotations(),e.$nextTick(e.fixCanvasSize)}),10))},onKeyDown:function(e){["INPUT","TEXTAREA"].includes(e.target.tagName)||(46===e.keyCode&&this.fabricCanvas?this.deleteSelection():e.ctrlKey&&e.altKey&&68===e.keyCode?this.onAnnotateClicked():e.ctrlKey&&90===e.keyCode?this.undoLastAction():e.altKey&&82===e.keyCode&&this.redoLastAction())},saveAnnotations:function(){var e=this,t=b({},this.getAnnotation(0));this.fabricCanvas.getObjects().forEach((function(t){"path"===t.type&&(t.canvasWidth||(t.canvasWidth=e.fabricCanvas.width),t.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.hasControls=!1)})),t?(t.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),t.width=this.fabricCanvas.width,t.height=this.fabricCanvas.height):t={time:0,width:this.fabricCanvas.width,height:this.fabricCanvas.height,drawing:this.fabricCanvas.toJSON(["canvasWidth"])},this.annotations=[],this.annotations.push(t),this.$emit("annotation-changed",{preview:this.currentPreview,annotations:Object(o["a"])(this.annotations)})},getAnnotation:function(e){return Object(o["a"])(this.annotations)[e]},clearAnnotations:function(){var e=this;this.fabricCanvas&&this.fabricCanvas.getObjects().forEach((function(t){["rect","circle","path"].includes(t.type)&&e.fabricCanvas.remove(t)}))},loadAnnotation:function(e){var t=this,s=this.getAnnotation(e);if(this.clearAnnotations(),s){var n=this.getDimensions(),i=1,a=1;s.width&&(i=n.width/s.width,a=n.width/s.width),s.height&&(a=n.height/s.height),s.drawing.objects.forEach((function(e){var o={left:e.left*i,top:e.top*a,fill:"transparent",stroke:e.stroke,strokeWidth:e.strokeWidth,radius:e.radius*i,width:e.width,height:e.height,scaleX:e.scaleX*i,scaleY:e.scaleY*a,lockMovementX:!0,lockMovementY:!0};if("path"===e.type){var c=1;e.canvasWidth&&(c=s.width/n.width);var l=new r["fabric"].Path(e.path,b({},o,{strokeWidth:e.strokeWidth*c,canvasWidth:e.canvasWidth}));l.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(l),t.$options.doneActionStack.pop()}}))}},reloadAnnotations:function(){return this.currentPreview.annotations?this.annotations=this.currentPreview.annotations:this.annotations=[],this.annotations},onPreviousClicked:function(){this.currentIndex>1?this.currentIndex--:this.currentIndex=this.preview.previews.length},onNextClicked:function(){this.currentIndex<this.preview.previews.length?this.currentIndex++:this.currentIndex=1},displayFirst:function(){this.currentIndex>1?this.currentIndex=1:this.reset()},displayLast:function(){this.currentIndex=this.preview.previews.length},reset:function(){this.clearAnnotations(),this.annotations=[],this.reloadAnnotations(),this.mountPicture(),this.isDrawing=!1,this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=!1)},fixCanvasSize:function(){var e=this,t=this.getDimensions(),s=t.width,n=t.height;if(this.picture.width=s,this.picture.height=n,this.fabricCanvas){this.fabricCanvas.setDimensions({width:s,height:n});var i=this.container.offsetWidth,a=Math.round((i-s)/2);this.$refs["canvas-wrapper"].style.left=a+"px",setTimeout((function(){e.fabricCanvas.calcOffset()}),10)}}},watch:{preview:function(){this.currentIndex>1?this.currentIndex=1:this.reset(),this.resetUndoStacks()},currentIndex:function(){this.reset(),this.resetUndoStacks()},light:function(){this.onWindowResize()}}},v=_,y=(s("e708"),s("2877")),g=Object(y["a"])(v,n,i,!1,null,"7e917fd2",null);t["a"]=g.exports},4267:function(e,t,s){"use strict";var n=s("ea16"),i=s.n(n);i.a},4360:function(e,t,s){"use strict";var n={};s.r(n),s.d(n,"route",(function(){return c}));var i,a=s("ba4c"),o=s.n(a),r=s("2f62"),c=function(e){return e.route},l=(s("a4d3"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("d81d"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),d=s("edbf"),u={getAssetTypes:function(e){d["a"].get("/api/data/asset-types",e)},getAssetType:function(e,t){d["a"].get("/api/data/entity-types/".concat(e),t)},newAssetType:function(e,t){var s={name:e.name};d["a"].post("/api/data/entity-types",s,t)},updateAssetType:function(e,t){var s={name:e.name};d["a"].put("/api/data/entity-types/".concat(e.id),s,t)},deleteAssetType:function(e,t){d["a"].del("/api/data/entity-types/".concat(e.id),t)}},p=s("9fb0"),h=s("2229");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){Object(l["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var b,_={assetTypes:[],assetTypeMap:{},isAssetTypesLoading:!1,isAssetTypesLoadingError:!1,editAssetType:{isLoading:!1,isError:!1},deleteAssetType:{isLoading:!1,isError:!1}},v=m({},_),y={assetTypes:function(e){return e.assetTypes},assetTypeMap:function(e){return e.assetTypeMap},isAssetTypesLoading:function(e){return e.isAssetTypesLoading},isAssetTypesLoadingError:function(e){return e.isAssetTypesLoadingError},editAssetType:function(e){return e.editAssetType},deleteAssetType:function(e){return e.deleteAssetType},getAssetType:function(e,t){return function(t){return e.assetTypes.find((function(e){return e.id===t}))}},getAssetTypeOptions:function(e){return e.assetTypes.map((function(e){return{label:e.name,value:e.id}}))}},g={loadAssetTypes:function(e,t){var s=e.commit;e.state;s(p["Mc"]),u.getAssetTypes((function(e,n){e?s(p["Lc"]):s(p["Kc"],n),t&&t(e)}))},loadAssetType:function(e,t){var s=e.commit;e.state;u.getAssetType(t,(function(e,t){e?console.error(e):s(p["Pb"],t)}))},newAssetType:function(e,t){var s=e.commit;e.state;s(p["Rb"],t.data),u.newAssetType(t.data,(function(e,n){e?s(p["Qb"]):s(p["Pb"],n),t.callback&&t.callback(e)}))},editAssetType:function(e,t){var s=e.commit;e.state;s(p["Rb"]),u.updateAssetType(t.data,(function(e,n){e?s(p["Qb"]):s(p["Pb"],n),t.callback&&t.callback(e)}))},deleteAssetType:function(e,t){var s=e.commit;e.state;s(p["eb"]);var n=t.assetType;u.deleteAssetType(n,(function(e){e?s(p["db"]):s(p["cb"],n),t.callback&&t.callback(e)}))}},k=(i={},Object(l["a"])(i,p["Mc"],(function(e){e.isAssetTypesLoading=!0,e.isAssetTypesLoadingError=!1})),Object(l["a"])(i,p["Lc"],(function(e){e.isAssetTypesLoading=!1,e.isAssetTypesLoadingError=!0})),Object(l["a"])(i,p["Kc"],(function(e,t){e.isAssetTypesLoading=!1,e.isAssetTypesLoadingError=!1,e.assetTypes=t,e.assetTypes=Object(h["d"])(e.assetTypes),e.assetTypeMap={},e.assetTypes.forEach((function(t){e.assetTypeMap[t.id]=t}))})),Object(l["a"])(i,p["Rb"],(function(e,t){e.editAssetType.isLoading=!0,e.editAssetType.isError=!1})),Object(l["a"])(i,p["Qb"],(function(e){e.editAssetType.isLoading=!1,e.editAssetType.isError=!0})),Object(l["a"])(i,p["Pb"],(function(e,t){var s=y.getAssetType(e)(t.id);s&&s.id?Object.assign(s,t):(e.assetTypes.push(t),e.assetTypeMap[t.id]=t),e.editAssetType={isLoading:!1,isError:!1},e.assetTypes=Object(h["d"])(e.assetTypes)})),Object(l["a"])(i,p["eb"],(function(e){e.deleteAssetType={isLoading:!0,isError:!1}})),Object(l["a"])(i,p["db"],(function(e){e.deleteAssetType={isLoading:!1,isError:!0}})),Object(l["a"])(i,p["cb"],(function(e,t){var s=e.assetTypes.findIndex((function(e){return e.id===t.id}));s>=0&&e.assetTypes.splice(s,1),delete e.assetTypeMap[t.id],e.deleteAssetType={isLoading:!1,isError:!1}})),Object(l["a"])(i,p["Be"],(function(e){Object.assign(e,m({},_))})),i),w={state:v,getters:y,actions:g,mutations:k},S=s("7d26"),O=(s("99af"),s("07ac"),s("54b2")),C=s("66e7");function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){Object(l["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var E,j={castingSequenceId:"",castingShotId:0,castingSequenceShots:[],castingAssetTypeAssets:[],castingEpisodeSequences:[],castingSequenceOptions:[],castingAssetTypesOptions:[],castingCurrentShot:null,casting:{},castingByType:[]},x=P({},j),D={castingEpisodeSequences:function(e){return e.castingEpisodeSequences},castingSequenceId:function(e){return e.castingSequenceId},castingSequenceShots:function(e){return e.castingSequenceShots},castingAssetTypeAssets:function(e){return e.castingAssetTypeAssets},castingSequenceOptions:function(e){return e.castingSequenceOptions},castingAssetTypesOptions:function(e){return e.castingAssetTypesOptions},casting:function(e){return e.casting},castingByType:function(e){return e.castingByType},castingCurrentShot:function(e){return e.castingCurrentShot}},A={setCastingSequence:function(e,t){var s=e.commit,n=e.rootState;if(!t)return console.error("SequenceId is undefined, no casting can be set.");var i=n.productions.currentProduction,a=n.assets.assetMap,o=Object.values(n.shots.shotMap).filter((function(e){return e.sequence_id===t}));return s(p["C"],t),s(p["E"],o),O["a"].getSequenceCasting(i.id,t).then((function(e){s(p["z"],{casting:e,assetMap:a})}))},setCastingAssetType:function(e,t){var s=e.commit,n=e.rootState;if(!t)return console.error("assetTypeId is undefined, no casting can be set.");var i=n.productions.currentProduction,a=n.assets.assetMap,o=Object.values(n.assets.assetMap).filter((function(e){return e.asset_type_id===t}));return s(p["x"],t),s(p["w"],o),O["a"].getAssetTypeCasting(i.id,t).then((function(e){s(p["z"],{casting:e,assetMap:a})}))},setCastingEpisode:function(e,t){var s=e.commit,n=e.rootState,i=n.shots.sequences;s(p["D"],i),s(p["A"],t)},setCastingAssetTypes:function(e){var t=e.commit,s=e.rootState,n=s.assets.assetTypes;t(p["y"],n)},addAssetToCasting:function(e,t){var s=e.commit,n=e.rootState,i=t.entityId,a=t.assetId,o=t.nbOccurences,r=n.assets.assetMap[a];s(p["u"],{entityId:i,asset:r,nbOccurences:o})},removeAssetFromCasting:function(e,t){var s=e.commit,n=e.rootState,i=t.entityId,a=t.assetId,o=t.nbOccurences,r=n.assets.assetMap[a];s(p["v"],{entityId:i,asset:r,nbOccurences:o})},saveCasting:function(e,t){e.commit;var s=e.rootGetters;if(!t)return console.error("ShotId is undefined, no casting can be saved.");var n=s.currentProduction,i=[];return Object.values(x.casting[t]).forEach((function(e){i.push({asset_id:e.asset_id,nb_occurences:e.nb_occurences||1,label:e.label})})),O["a"].updateCasting(n.id,t,i)},uploadCastingFile:function(e,t){e.commit,e.state;var s=e.rootGetters,n=s.currentProduction;return O["a"].postCastingCsv(n,t)},setAssetLinkLabel:function(e,t){var s=e.commit,n=e.dispatch,i=(e.state,e.rootGetters,t.label),a=t.asset,o=t.targetEntityId;return s(p["B"],{label:i,asset:a,targetEntityId:o}),n("saveCasting",o)}},M=(b={},Object(l["a"])(b,p["E"],(function(e,t){var s=[],n=[];e.castingSequenceShots=t,t.forEach((function(e){s[e.id]=[],n[e.id]=[]})),e.casting=s,e.castingByType=n})),Object(l["a"])(b,p["w"],(function(e,t){var s=[],n=[];e.castingAssetTypeAssets=t,t.forEach((function(e){s[e.id]=[],n[e.id]=[]})),e.casting=s,e.castingByType=n})),Object(l["a"])(b,p["D"],(function(e,t){e.castingEpisodeSequences=t,e.castingSequenceOptions=t.map((function(e){var t={name:"breakdown-sequence",params:{production_id:e.project_id,sequence_id:e.id}};return e.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=e.episode_id),{label:e.name,value:e.id,route:t}}))})),Object(l["a"])(b,p["y"],(function(e,t){e.castingAssetTypesOptions=t.map((function(e){var t={name:"breakdown-asset-type",params:{production_id:e.project_id,asset_type_id:e.id}};return e.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=e.episode_id),{label:e.name,value:e.id,route:t}}))})),Object(l["a"])(b,p["C"],(function(e,t){e.castingSequenceId=t})),Object(l["a"])(b,p["A"],(function(e,t){e.castingEpisodeId=t})),Object(l["a"])(b,p["x"],(function(e,t){e.castingAssetTypeId=t})),Object(l["a"])(b,p["z"],(function(e,t){var s=t.casting,n=(t.assetMap,{}),i=Object.keys(s);i.forEach((function(e){var t=s[e];n[e]=Object(C["b"])(t,"asset_type_name")})),Object.assign(e.casting,s),e.casting=P({},e.casting),Object.assign(e.castingByType,n),e.castingByType=P({},e.castingByType)})),Object(l["a"])(b,p["u"],(function(e,t){var s=t.entityId,n=t.asset,i=t.nbOccurences;e.casting[s]||(e.casting[s]=[]);var a=e.casting[s].find((function(e){return e.asset_id===n.id}));if(a)a.nb_occurences+=i;else{var o={asset_id:n.id,name:n.name,asset_name:n.name,asset_type_name:n.asset_type_name,nb_occurences:i,preview_file_id:n.preview_file_id};e.casting[s].push(o)}e.casting[s]=Object(h["b"])(e.casting[s]),e.castingByType[s]=Object(C["b"])(e.casting[s],"asset_type_name")})),Object(l["a"])(b,p["v"],(function(e,t){var s=t.entityId,n=t.asset,i=t.nbOccurences,a=e.casting[s].find((function(e){return e.asset_id===n.id}));a&&(a.nb_occurences-=i,a.nb_occurences<1&&(delete e.casting[s][n.id],e.casting[s]=e.casting[s].filter((function(e){return e.asset_id!==n.id}))),e.castingByType[s]=Object(C["b"])(e.casting[s],"asset_type_name"))})),Object(l["a"])(b,p["ud"],(function(e,t){e.state,e.rootState;var s=t.shot,n=t.casting;s.casting=n,o.a.set(s,"castingAssetsByType",Object(C["b"])(n,"asset_type_name"))})),Object(l["a"])(b,p["Jc"],(function(e,t){e.state,e.rootState;var s=t.asset,n=t.castIn;n.forEach((function(e){e.episode_name&&(e.sequence_name="".concat(e.episode_name," / ").concat(e.sequence_name))})),s.castIn=n,o.a.set(s,"castInShotsBySequence",Object(C["b"])(n,"sequence_name"))})),Object(l["a"])(b,p["B"],(function(e,t){var s=t.label,n=t.asset,i=t.targetEntityId,a=e.casting[i].find((function(e){return e.asset_id===n.asset_id}));a.label=s})),Object(l["a"])(b,p["Be"],(function(e){Object.assign(e,P({},j))})),b),L={state:x,getters:D,actions:A,mutations:M},I=(s("caad"),s("d3b7"),s("db82")),$=s.n(I),q={getCustomActions:function(e){d["a"].get("/api/data/custom-actions",e)},newCustomAction:function(e,t){var s={name:e.name,url:e.url};d["a"].post("/api/data/custom-actions/",s,t)},updateCustomAction:function(e,t){var s={name:e.name,url:e.url,entity_type:e.entityType,is_ajax:"true"===e.isAjax};d["a"].put("/api/data/custom-actions/".concat(e.id),s,t)},deleteCustomAction:function(e,t){d["a"].del("/api/data/custom-actions/".concat(e.id),t)},postCustomAction:function(e,t){return new Promise((function(s,n){$.a.post(e).withCredentials().send(t).end((function(e,t){e?n(e):s()}))}))}};function F(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function N(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?F(Object(s),!0).forEach((function(t){Object(l["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var R,B={customActions:[],isCustomActionsLoading:!1,isCustomActionsLoadingError:!1,editCustomAction:{isLoading:!1,isError:!1},deleteCustomAction:{isLoading:!1,isError:!1}},z=N({},B),V={customActions:function(e){return e.customActions},isCustomActionsLoading:function(e){return e.isCustomActionsLoading},isCustomActionsLoadingError:function(e){return e.isCustomActionsLoadingError},editCustomAction:function(e){return e.editCustomAction},deleteCustomAction:function(e){return e.deleteCustomAction},customAction:function(e,t,s){return function(t){return e.customActions.find((function(e){return e.id===t}))}},allCustomActions:function(e){return e.customActions.filter((function(e){return"all"===e.entity_type}))},assetCustomActions:function(e){return e.customActions.filter((function(e){return["all","asset"].includes(e.entity_type)}))},shotCustomActions:function(e){return e.customActions.filter((function(e){return["all","shot"].includes(e.entity_type)}))}},U={loadCustomActions:function(e,t){var s=e.commit;e.state;s(p["Pc"]),q.getCustomActions((function(e,n){e?s(p["Oc"]):s(p["Nc"],n),t&&t(e)}))},newCustomAction:function(e,t){var s=e.commit,n=(e.state,t.data),i=t.callback;s(p["Vb"],n),q.newCustomAction(n,(function(e,t){e?s(p["Ub"]):s(p["Tb"],t),i&&i(e)}))},editCustomAction:function(e,t){var s=e.commit,n=(e.state,t.data),i=t.callback;s(p["Vb"]),q.updateCustomAction(n,(function(e,t){e?s(p["Ub"]):s(p["Tb"],t),i&&i(e)}))},deleteCustomAction:function(e,t){var s=e.commit,n=(e.state,t.customAction),i=t.callback;s(p["ib"]),q.deleteCustomAction(n,(function(e){e?s(p["hb"]):s(p["gb"],n),i&&i(e)}))},postCustomAction:function(e,t){e.commit;var s=t.data,n=t.url;q.postCustomAction(n,s)}},H=(E={},Object(l["a"])(E,p["Pc"],(function(e){e.isCustomActionsLoading=!0,e.isCustomActionsLoadingError=!1})),Object(l["a"])(E,p["Oc"],(function(e){e.isCustomActionsLoading=!1,e.isCustomActionsLoadingError=!0})),Object(l["a"])(E,p["Nc"],(function(e,t){e.isCustomActionsLoading=!1,e.isCustomActionsLoadingError=!1,e.customActions=t,e.customActions=Object(h["d"])(e.customActions)})),Object(l["a"])(E,p["Vb"],(function(e,t){e.editCustomAction.isLoading=!0,e.editCustomAction.isError=!1})),Object(l["a"])(E,p["Ub"],(function(e){e.editCustomAction.isLoading=!1,e.editCustomAction.isError=!0})),Object(l["a"])(E,p["Tb"],(function(e,t){var s=V.customAction(e)(t.id);s&&s.id?Object.assign(s,t):(e.customActions.push(t),e.customActions=Object(h["d"])(e.customActions)),e.editCustomAction={isLoading:!1,isError:!1}})),Object(l["a"])(E,p["ib"],(function(e){e.deleteCustomAction={isLoading:!0,isError:!1}})),Object(l["a"])(E,p["hb"],(function(e){e.deleteCustomAction={isLoading:!1,isError:!0}})),Object(l["a"])(E,p["gb"],(function(e,t){var s=e.customActions.findIndex((function(e){return e.id===t.id}));e.customActions.splice(s,1),e.deleteCustomAction={isLoading:!1,isError:!1}})),Object(l["a"])(E,p["Be"],(function(e){Object.assign(e,N({},B))})),E),Y={state:z,getters:V,actions:U,mutations:H},W=s("48c6");function G(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function K(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?G(Object(s),!0).forEach((function(t){Object(l["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Q,J={email:"",password:"",isLdap:!1,isLoginLoading:!1,isLoginError:!1,isDataLoading:!1},X=K({},J),Z={email:function(e){return e.email},password:function(e){return e.password},isLdap:function(e){return e.isLdap},isLoginLoading:function(e){return e.isLoginLoading},isLoginError:function(e){return e.isLoginError},isDataLoading:function(e){return e.isDataLoading}},ee={changeEmail:function(e,t){var s=e.commit;e.state;s(p["H"],t)},changePassword:function(e,t){var s=e.commit;e.state;s(p["I"],t)},logIn:function(e,t){var s=e.commit,n=e.state;s(p["Jd"]),W["a"].logIn(n.email,n.password,(function(e){e?(s(p["Id"]),t(e,!1)):(s(p["Kd"]),t(null,!0))}))},logout:function(e,t){var s=e.commit;e.state;W["a"].logout((function(e){e?(s(p["Ld"]),t(null,!1)):(s(p["Be"]),s(p["Md"]),s(p["vf"]),t(null,!0))}))},resetPassword:function(e,t){e.commit;return new Promise((function(e,s){W["a"].resetPassword(t).then(e).catch(s)}))},resetChangePassword:function(e,t){var s=e.commit,n=t.token,i=t.password,a=t.password2;return new Promise((function(e,t){W["a"].resetChangePassword(n,i,a).then((function(){s(p["Kd"]),e()})).catch(t)}))}},te=(R={},Object(l["a"])(R,p["H"],(function(e,t){e.email=t})),Object(l["a"])(R,p["I"],(function(e,t){e.password=t})),Object(l["a"])(R,p["Jd"],(function(e){e.isLoginLoading=!0,e.isLoginError=!1})),Object(l["a"])(R,p["Kd"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!1})),Object(l["a"])(R,p["Id"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!0})),Object(l["a"])(R,p["Md"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!1})),Object(l["a"])(R,p["Y"],(function(e,t){e.isDataLoading=!0,t&&void 0!==t.isLdap&&(e.isLdap=t.isLdap)})),Object(l["a"])(R,p["X"],(function(e){e.isDataLoading=!1})),Object(l["a"])(R,p["Be"],(function(e,t){Object.assign(e,K({},J))})),R),se={state:X,getters:Z,actions:ee,mutations:te};function ne(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ie(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(s),!0).forEach((function(t){Object(l["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ne(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ae,oe={currentProductionScreen:"assets",isDarkTheme:!1,isSidebarHidden:!0,isUserMenuHidden:!0,lastProductionScreen:"assets",lastProductionViewed:null},re=ie({},oe),ce={isDarkTheme:function(e){return e.isDarkTheme},isSidebarHidden:function(e){return e.isSidebarHidden},isUserMenuHidden:function(e){return e.isUserMenuHidden},lastProductionScreen:function(e){return e.lastProductionScreen},lastProductionViewed:function(e){return e.lastProductionViewed},currentProductionScreen:function(e){return e.currentProductionScreen}},le={toggleDarkTheme:function(e){var t=e.commit,s=e.state;t(p["tf"]),localStorage&&localStorage.setItem("dark-theme",s.isDarkTheme)},toggleSidebar:function(e){var t=e.commit;e.state;t(p["uf"])},toggleUserMenu:function(e){var t=e.commit;e.state;t(p["vf"])},setLastProductionScreen:function(e,t){var s=e.commit;e.state;s(p["af"],t)}},de=(Q={},Object(l["a"])(Q,p["tf"],(function(e){e.isDarkTheme=!e.isDarkTheme})),Object(l["a"])(Q,p["uf"],(function(e){e.isSidebarHidden=!e.isSidebarHidden})),Object(l["a"])(Q,p["vf"],(function(e){e.isUserMenuHidden=!e.isUserMenuHidden})),Object(l["a"])(Q,p["af"],(function(e,t){e.lastProductionScreen=t})),Object(l["a"])(Q,p["Te"],(function(e,t){t&&(e.lastProductionViewed=t)})),Object(l["a"])(Q,p["Be"],(function(e){var t=e.isDarkTheme;Object.assign(e,ie({},oe)),e.isDarkTheme=t})),Q),ue={state:re,getters:ce,actions:le,mutations:de},pe=s("2909"),he=(s("a15b"),function(e,t){var s="".concat(e,"?"),n=[];return Object.keys(t).forEach((function(e){t[e]&&n.push("".concat(e,"=").concat(t[e]))})),s+n.join("&")}),fe={getLastNews:function(e){return new Promise((function(t,s){var n=e.productionId;delete e.productionId;var i=he("/api/data/projects/".concat(n,"/news"),e);d["a"].get(i,(function(e,n){e?s(e):t(n)}))}))},getNews:function(e,t){return new Promise((function(s,n){var i="/api/data/projects/".concat(e,"/news/").concat(t);d["a"].get(i,(function(e,t){e?n(e):s(t[0])}))}))}};function me(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function be(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?me(Object(s),!0).forEach((function(t){Object(l["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):me(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _e,ve={newsList:[]},ye=be({},ve),ge={newsList:function(e){return e.newsList},newsListByDay:function(e){if(0===e.newsList.length)return[];var t=[],s=[],n=e.newsList[0].created_at.substring(0,10);return e.newsList.forEach((function(e){var i=e.created_at.substring(0,10);i!==n&&(t.push(s),n=i,s=[]),s.push(e)})),0!==s.length&&t.push(s),t}},ke={loadNews:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){s(p["Q"]),fe.getLastNews(t).then((function(e){return s(p["k"],e)})).then(e).catch(n)}))},loadMoreNews:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){fe.getLastNews(t).then((function(e){return s(p["k"],e)})).then(e).catch(n)}))},loadSingleNews:function(e,t){var s=e.commit,n=(e.state,t.productionId),i=t.newsId;return new Promise((function(e,t){fe.getNews(n,i).then((function(e){return s(p["d"],e)})).catch(t)}))}},we=(ae={},Object(l["a"])(ae,p["Q"],(function(e){e.newsList=[]})),Object(l["a"])(ae,p["k"],(function(e,t){e.newsList=[].concat(Object(pe["a"])(e.newsList),Object(pe["a"])(Object(h["c"])(t)))})),Object(l["a"])(ae,p["d"],(function(e,t){e.newsList.unshift(t)})),Object(l["a"])(ae,p["Pd"],(function(e,t){var s=t.commentId,n=t.previewId,i=t.extension;if(s){var a=e.newsList.find((function(e){return e.comment_id===s}));a&&(a.preview_file_id=n,a.preview_file_extension=i)}})),Object(l["a"])(ae,p["Be"],(function(e){Object.assign(e,be({},ve))})),ae),Se={state:ye,getters:ge,actions:ke,mutations:we},Oe={getNotifications:function(e){d["a"].get("/api/data/user/notifications",e)},getNotification:function(e,t){d["a"].get("/api/data/user/notifications/".concat(e),t)}};function Ce(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Te(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(s),!0).forEach((function(t){Object(l["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ce(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Pe,Ee={notifications:[]},je=Te({},Ee),xe={notifications:function(e){return e.notifications},isNewNotification:function(e){var t=e.notifications.filter((function(e){return!e.read}));return t.length>0}},De={loadNotifications:function(e,t){var s=e.commit;e.state;if(!t)return new Promise((function(e,t){s(p["Sc"],[]),Oe.getNotifications((function(n,i){n?t(n):(s(p["Sc"],i),e())}))}));s(p["Sc"],[]),Oe.getNotifications((function(e,n){e?t(e):(s(p["Sc"],n),t())}))},loadNotification:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){Oe.getNotification(t,(function(t,i){t?n(t):(s(p["Tc"],i),e())}))}))},markAllNotificationsAsRead:function(e){var t=e.commit;t(p["Nd"])}},Ae=(_e={},Object(l["a"])(_e,p["Sc"],(function(e,t){e.notifications=Object(h["c"])(t)})),Object(l["a"])(_e,p["Tc"],(function(e,t){e.notifications.push(t),e.notifications=Object(h["c"])(e.notifications)})),Object(l["a"])(_e,p["Nd"],(function(e){e.notifications.forEach((function(e){e.read=!0}))})),Object(l["a"])(_e,p["ce"],(function(e,t){var s=t.commentId,n=t.previewId,i=e.notifications.find((function(e){return e.comment_id===s}));i&&(i.preview_file_id=n)})),Object(l["a"])(_e,p["Be"],(function(e){Object.assign(e,Te({},Ee))})),_e),Me={state:je,getters:xe,actions:De,mutations:Ae},Le=s("52ad"),Ie=s("0f9a"),$e=s("487c");function qe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(s),!0).forEach((function(t){Object(l["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ne,Re={playlists:[],playlistMap:{}},Be=Fe({},Re),ze={playlists:function(e){return e.playlists},playlistMap:function(e){return e.playlistMap}},Ve={loadPlaylists:function(e,t){var s=e.commit,n=e.rootGetters,i=n.currentProduction,a=n.currentEpisode,o=n.isTVShow;if(o&&!a)return t?t():null;s(p["ed"]),$e["a"].getPlaylists(i,a,(function(e,n){e?s(p["dd"]):s(p["cd"],n),t&&t(e)}))},loadPlaylist:function(e,t){var s=e.commit,n=e.rootGetters,i=t.playlist,a=t.callback,o=n.currentProduction;s(p["hd"]),$e["a"].getPlaylist(o,i,(function(e,t){e?s(p["gd"]):s(p["fd"],t),a&&a(e,t)}))},refreshPlaylist:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;$e["a"].getPlaylist(a,{id:t},(function(t,n){t?i(t):(s(p["cc"],n),e(n))}))}))},loadEntityPreviewFiles:function(e,t){e.commit;return $e["a"].getEntityPreviewFiles(t)},newPlaylist:function(e,t){var s=e.commit,n=t.data,i=t.callback;s(p["ec"],n),$e["a"].newPlaylist(n,(function(e,t){e?s(p["dc"]):s(p["cc"],t),i&&i(e,t)}))},editPlaylist:function(e,t){var s=e.commit,n=t.data,i=t.callback;s(p["ec"]),$e["a"].updatePlaylist(n,(function(e,t){e?s(p["dc"]):s(p["cc"],t),i&&i(e,t)}))},deletePlaylist:function(e,t){var s=e.commit,n=t.playlist,i=t.callback;s(p["rb"]),$e["a"].deletePlaylist(n,(function(e){e?s(p["qb"]):s(p["pb"],n),i&&i(e)}))},pushEntityToPlaylist:function(e,t){var s=e.commit,n=e.dispatch,i=t.playlist,a=t.entity,o=t.previewFiles;t.callback;return new Promise((function(e,t){s(p["Qc"],{playlist:i,entity:a,previewFiles:o}),s(p["b"],{playlist:i,entity:a}),n("editPlaylist",{data:i,callback:function(s){console.log("err",s),s&&t(s),e(a)}})}))},removeEntityPreviewFromPlaylist:function(e,t){var s=e.commit,n=e.dispatch,i=t.playlist,a=t.entity,o=t.callback;s(p["oe"],{playlist:i,entity:a}),n("editPlaylist",{data:i,callback:o})},changePlaylistOrder:function(e,t){var s=e.commit,n=e.dispatch,i=t.playlist,a=t.info,o=t.callback;s(p["J"],{playlist:i,info:a}),n("editPlaylist",{data:i,callback:o})},changePlaylistPreview:function(e,t){var s=e.commit,n=e.dispatch,i=t.playlist,a=t.entity,o=t.previewFileId,r=t.callback;s(p["K"],{playlist:i,entityId:a.id,previewFileId:o}),n("editPlaylist",{data:i,callback:r})},removeBuildJob:function(e,t){var s=e.commit;s(p["ne"],t),$e["a"].deleteBuildJob(t)},removeBuildJobFromList:function(e,t){var s=e.commit;s(p["ne"],t)},addNewBuildJob:function(e,t){var s=e.commit;s(p["h"],t)},markBuildJobAsDone:function(e,t){var s=e.commit;s(p["Od"],t)},runPlaylistBuild:function(e,t){e.commit;$e["a"].runPlaylistBuild(t)},changePlaylistType:function(e,t){var s=e.commit,n=e.dispatch,i=t.playlist,a=t.taskTypeId,o=t.callback;return s(p["L"],{playlist:i,taskTypeId:a}),n("editPlaylist",{data:i,callback:o})},loadTempPlaylist:function(e,t){e.commit,e.dispatch;var s=e.rootGetters,n=s.currentProduction;return $e["a"].loadTempPlaylist(n,t)}},Ue=(Pe={},Object(l["a"])(Pe,p["ed"],(function(e){})),Object(l["a"])(Pe,p["dd"],(function(e){})),Object(l["a"])(Pe,p["cd"],(function(e,t){e.playlists=t,e.playlists=Object(h["g"])(e.playlists),e.playlistMap={},t.forEach((function(t){t.entities||(t.entities=[]),e.playlistMap[t.id]=t}))})),Object(l["a"])(Pe,p["hd"],(function(e){})),Object(l["a"])(Pe,p["gd"],(function(e){})),Object(l["a"])(Pe,p["fd"],(function(e,t){e.playlistMap[t.id].build_jobs=t.build_jobs})),Object(l["a"])(Pe,p["ec"],(function(e,t){})),Object(l["a"])(Pe,p["dc"],(function(e){})),Object(l["a"])(Pe,p["cc"],(function(e,t){var s=e.playlistMap[t.id];s&&s.id?Object.assign(s,t):(e.playlists=[t].concat(e.playlists),e.playlistMap[t.id]=t)})),Object(l["a"])(Pe,p["rb"],(function(e){})),Object(l["a"])(Pe,p["qb"],(function(e){})),Object(l["a"])(Pe,p["pb"],(function(e,t){e.playlists=Object(C["e"])(e.playlists,t),delete e.playlistMap[t.id]})),Object(l["a"])(Pe,p["Qc"],(function(e,t){t.playlist;var s=t.entity,n=t.previewFiles,i=[];if(Object.keys(n).forEach((function(e){n[e].forEach((function(e){i.push(e)}))})),i=Object(h["c"])(i),i.length>0){var a=i[0];s.preview_file_id=a.id,s.preview_file_extension=a.extension,s.preview_file_annotations=a.annotations,s.preview_file_task_id=a.task_id}s.preview_files=n})),Object(l["a"])(Pe,p["b"],(function(e,t){var s=t.playlist,n=t.entity;s.shots||(s.shots=[]),s.shots.push({entity_id:n.id,preview_file_id:n.preview_file_id,preview_file_extension:n.preview_file_extension,preview_file_annotations:n.preview_file_annotations,preview_files:n.preview_files})})),Object(l["a"])(Pe,p["oe"],(function(e,t){var s=t.playlist,n=t.entity;s.shots||(s.shots=[]);var i=s.shots.findIndex((function(e){return e.entity_id===n.id}));s.shots.splice(i,1)})),Object(l["a"])(Pe,p["J"],(function(e,t){var s=t.playlist,n=t.info,i=s.shots.find((function(e){return e.entity_id===n.after})),a=s.shots.findIndex((function(e){return e.entity_id===n.after})),o=s.shots.findIndex((function(e){return e.entity_id===n.before}));a>=0&&o>=0&&(s.shots.splice(a,1),a>o&&o++,s.shots.splice(o,0,i))})),Object(l["a"])(Pe,p["K"],(function(e,t){var s=t.playlist,n=t.entityId,i=t.previewFileId,a=s.shots.find((function(e){return e.entity_id===n}));a.preview_file_id=i})),Object(l["a"])(Pe,p["h"],(function(e,t){var s=e.playlistMap[t.playlist_id];s.build_jobs=[{id:t.build_job_id,created_at:t.created_at,status:"running",playlist_id:s.id}].concat(s.build_jobs)})),Object(l["a"])(Pe,p["Od"],(function(e,t){var s=e.playlistMap[t.playlist_id];Object(C["f"])(s.build_jobs,{id:t.build_job_id,status:"succeeded"})})),Object(l["a"])(Pe,p["ne"],(function(e,t){var s=e.playlistMap[t.playlist_id];o.a.set(s,"build_jobs",Object(C["e"])(s.build_jobs,t))})),Object(l["a"])(Pe,p["L"],(function(e,t){var s=t.playlist,n=t.taskTypeId;s&&s.shots.forEach((function(e){if(e.preview_files[n]){var t=e.preview_files[n][0];e.preview_file_id=t.id,e.preview_file_extension=t.extension,e.preview_file_annotations=t.annotations,e.extension=t.extension,e.annotations=t.annotations}}))})),Object(l["a"])(Pe,p["Be"],(function(e){Object.assign(e,Fe({},Re))})),Pe),He={state:Be,getters:ze,actions:Ve,mutations:Ue},Ye=s("f83f"),We={getMilestones:function(e){return new Promise((function(t,s){var n="/api/data/projects/".concat(e.id,"/milestones");d["a"].get(n,(function(e,n){e?s(e):t(n)}))}))},createMilestone:function(e,t){return new Promise((function(s,n){var i={date:t.date.format("YYYY-MM-DD"),name:t.name,task_type_id:t.task_type_id,project_id:e.id};d["a"].post("/api/data/milestones",i,(function(e,t){e?n(e):s(t)}))}))},updateMilestone:function(e){return new Promise((function(t,s){var n={date:e.date.format("YYYY-MM-DD"),name:e.name,task_type_id:e.task_type_id},i="/api/data/milestones/".concat(e.id);d["a"].put(i,n,(function(e,n){e?s(e):t(n)}))}))},deleteMilestone:function(e){return new Promise((function(t,s){var n="/api/data/milestones/".concat(e.id);d["a"].del(n,(function(n){n?s(n):t(e)}))}))},getScheduleItems:function(e){return new Promise((function(t,s){d["a"].get("/api/data/projects/".concat(e.id,"/schedule-items/task-types"),(function(e,n){e?s(e):t(n)}))}))},getAssetTypeScheduleItems:function(e,t){return this.getEntitycheduleItems(e,t,"asset-types")},getSequenceScheduleItems:function(e,t){return this.getEntitycheduleItems(e,t,"sequences")},getEpisodeScheduleItems:function(e,t){return this.getEntitycheduleItems(e,t,"episodes")},getEntitycheduleItems:function(e,t,s){return new Promise((function(n,i){d["a"].get("/api/data/projects/".concat(e.id,"/schedule-items/")+"".concat(t.id,"/").concat(s),(function(e,t){e?i(e):n(t)}))}))},updateScheduleItem:function(e){return new Promise((function(t,s){e.endDate||(e.endDate=e.startDate.add("days",1).clone());var n=e.man_days,i={start_date:e.startDate.format("YYYY-MM-DD"),end_date:e.endDate.format("YYYY-MM-DD")};n&&(i.man_days=parseInt(n)),d["a"].put("/api/data/schedule-items/".concat(e.id),i,(function(e,n){e?s(e):t(n)}))}))}};function Ge(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ke(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(s),!0).forEach((function(t){Object(l["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ge(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Qe={milestones:{}},Je=Ke({},Qe),Xe={milestones:function(e){return e.milestones}},Ze={loadScheduleItems:function(e,t){e.commit;return We.getScheduleItems(t)},loadAssetTypeScheduleItems:function(e,t){e.commit;var s=t.production,n=t.taskType;return We.getAssetTypeScheduleItems(s,n)},loadSequenceScheduleItems:function(e,t){e.commit;var s=t.production,n=t.taskType;return We.getSequenceScheduleItems(s,n)},loadEpisodeScheduleItems:function(e,t){e.commit;var s=t.production,n=t.taskType;return We.getEpisodeScheduleItems(s,n)},saveScheduleItem:function(e,t){e.commit;return We.updateScheduleItem(t)},loadMilestones:function(e){var t=e.commit,s=e.rootState,n=s.productions.currentProduction;return We.getMilestones(n).then((function(e){t(p["g"],e)}))},saveMilestone:function(e,t){var s=e.commit,n=e.rootState,i=n.productions.currentProduction;return t.id?We.updateMilestone(t).then((function(e){s(p["f"],e)})):We.createMilestone(i,t).then((function(e){s(p["f"],e)}))},deleteMilestone:function(e,t){var s=e.commit;e.rootState;return We.deleteMilestone(t).then((function(e){s(p["re"],e)}))}},et=(Ne={},Object(l["a"])(Ne,p["f"],(function(e,t){e.milestones[t.date]=t})),Object(l["a"])(Ne,p["g"],(function(e,t){e.milestones={},t.forEach((function(t){e.milestones[t.date]=t}))})),Object(l["a"])(Ne,p["re"],(function(e,t){delete e.milestones[t.date.format("YYYY-MM-DD")]})),Object(l["a"])(Ne,p["Be"],(function(e){Object.assign(e,Ke({},Qe))})),Ne),tt={state:Je,getters:Xe,actions:Ze,mutations:et},st=s("0263"),nt=s("ef8b"),it=s("e07d"),at=s("fa53");o.a.use(r["a"]);var ot={assetTypes:w,assets:S["a"],breakdown:L,customActions:Y,login:se,main:ue,people:Le["a"],playlists:He,productions:Ye["a"],news:Se,notifications:Me,schedule:tt,shots:st["a"],tasks:at["a"],taskTypes:nt["a"],taskStatus:it["a"],user:Ie["a"]};t["a"]=new r["a"].Store({getters:n,strict:!0,modules:ot})},"43ea":function(e,t,s){},"440f":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("main.csv.import_title"))+" ")]),s("p",{staticClass:"description"},[e._v(" "+e._s(e.$t("main.csv.required_fields"))+" "),s("ul",e._l(e.columns,(function(t){return s("li",{key:t},[e._v(" "+e._s(t)+" ")])})),0)]),s("tabs",{on:{update:e.onTabUpdate}},[s("tab",{attrs:{name:e.$t("main.csv.tab_select_file"),selected:!0}},[s("p",[e._v(" "+e._s(e.$t("main.csv.select_file"))+" ")]),s("file-upload",{ref:"inputFile",attrs:{label:e.$t("main.csv.upload_file")},on:{fileselected:e.onFileSelected}})],1),s("tab",{attrs:{name:e.$t("main.csv.tab_paste_code")}},[s("p",[e._v(" "+e._s(e.$t("main.csv.paste_code"))+" ")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.pastedCode,expression:"pastedCode"}],staticClass:"paste-area",attrs:{placeholder:e.pasteAreaPlacholder},domProps:{value:e.pastedCode},on:{input:function(t){t.target.composing||(e.pastedCode=t.target.value)}}})])],1),s("modal-footer",{attrs:{"confirm-label":e.$t("main.csv.preview"),"error-text":e.$t("main.csv.error_upload"),"is-loading":e.isLoading,"is-disabled":void 0===e.formData,"is-error":e.isError},on:{confirm:e.onConfirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("ac1f"),s("25f0"),s("5319"),s("159b"),s("ade3")),o=s("2f62"),r=s("d065"),c=s("4085"),l=s("d5c9"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"tabs"},[s("ul",e._l(e.tabs,(function(t,n){return s("li",{key:t.name,ref:"tab-"+n,refInFor:!0,class:{"is-active":t.isActive}},[s("a",{on:{click:function(s){return e.selectTab(t)}}},[e._v(" "+e._s(t.name)+" ")])])})),0)]),s("div",{staticClass:"tabs-details"},[e._t("default")],2)])},u=[],p=(s("b0c0"),{name:"tabs",data:function(){return{tabs:[]}},created:function(){this.tabs=this.$children},mounted:function(){this.$emit("update",this.tabs)},methods:{selectTab:function(e){this.tabs.forEach((function(t){t.isActive=t.name===e.name})),this.$emit("update",this.tabs)}}}),h=p,f=(s("4b24"),s("2877")),m=Object(f["a"])(h,d,u,!1,null,"2ac014c1",null),b=m.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[e._t("default")],2)},v=[],y={name:"tab",props:{name:{required:!0},selected:{default:!1}},data:function(){return{isActive:!1}},computed:{href:function(){return"#"+this.name.toLowerCase().replace(/ /g,"-")}},mounted:function(){this.isActive=this.selected}},g=y,k=Object(f["a"])(g,_,v,!1,null,null,null),w=k.exports;function S(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var C={name:"import-people-modal",mixins:[r["a"]],components:{FileUpload:c["a"],ModalFooter:l["a"],Tabs:b,Tab:w},data:function(){return{formData:null,pastedCode:"",tabs:[]}},props:{active:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},mounted:function(){this.formData=null},computed:O({},Object(o["c"])([]),{pasteAreaPlacholder:function(){var e=this.columns.toString();return e=e.replace(/,/g,";"),e}}),methods:O({},Object(o["b"])([]),{onTabUpdate:function(e){this.tabs=e},onFileSelected:function(e){this.formData=e},onConfirmClicked:function(){var e="",t=null;!0===this.tabs[0].isActive?(t=this.formData,e="file"):!0===this.tabs[1].isActive&&(t=this.pastedCode,e="text"),this.$emit("confirm",t,e)},reset:function(){this.$refs.inputFile.reset()}}),watch:{active:function(){this.reset()}}},T=C,P=(s("bfa0"),Object(f["a"])(T,n,i,!1,null,"34926ca0",null));t["a"]=P.exports},4478:function(e,t,s){},4636:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("combobox",{attrs:{label:e.label,disabled:e.disabled,options:e.booleanOptions,value:e.value},on:{input:e.emitValue,enter:e.emitEnter}})},i=[],a=s("992f"),o={name:"combobox-boolean",components:{Combobox:a["a"]},props:{label:{default:"",type:String},value:{default:"false",type:String},options:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{booleanOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}]}},computed:{},methods:{emitValue:function(e){this.$emit("input",e)},emitEnter:function(e){this.$emit("enter",e)}}},r=o,c=s("2877"),l=Object(c["a"])(r,n,i,!1,null,"5da9e2c2",null);t["a"]=l.exports},4678:function(e,t,s){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=a(e);return s(t)}function a(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=a,e.exports=i,i.id="4678"},4736:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"production-name"},[s("router-link",{staticClass:"flexrow",attrs:{title:e.productionInfo,to:e.productionRoute}},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.project),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.project.has_avatar?s("img",{style:{width:e.size+"px",height:e.size+"px"},attrs:{src:e.getThumbnailPath(e.project)}}):s("span",[e._v(" "+e._s(e.generateAvatar(e.project))+" ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item avatar-name"},[e._v(" "+e._s(e.project.name)+" ")])])],1)},i=[],a=(s("a4d3"),s("99af"),s("4de4"),s("4160"),s("b0c0"),s("a9e3"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("7930"),r=s("2f62");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"production-name",props:{project:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String}},computed:l({},Object(r["c"])([]),{productionRoute:function(){var e={name:this.lastProductionScreen,params:{production_id:this.project.id}};return this.project.first_episode_id&&(e.name="episode-".concat(this.lastProductionScreen),e.params.episode_id=this.project.first_episode_id),e},productionInfo:function(){var e=this.project.fps,t=this.project.ratio,s=this.project.resolution;return e||t||s?"fps: ".concat(e,"\nratio: ").concat(t,"\nresolution: ").concat(s):""}}),methods:l({},Object(r["b"])([]),{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return o["a"].fromString(e.name)},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")}})},u=d,p=(s("3388"),s("2877")),h=Object(p["a"])(u,n,i,!1,null,"3908ad35",null);t["a"]=h.exports},"487c":function(e,t,s){"use strict";s("99af"),s("b0c0"),s("d3b7");var n=s("edbf");t["a"]={getPlaylists:function(e,t,s){var i="/api/data/projects/".concat(e.id);i+=t?"/episodes/".concat(t.id,"/playlists"):"/playlists",n["a"].get(i,s)},getPlaylist:function(e,t,s){var i="/api/data/projects/".concat(e.id,"/playlists/").concat(t.id);n["a"].get(i,s)},getEntityPreviewFiles:function(e,t){var s="/api/data/playlists/entities/".concat(e.id,"/preview-files");return n["a"].pget(s)},newPlaylist:function(e,t){var s={name:e.name,project_id:e.production_id,episode_id:e.episode_id,for_client:e.for_client,for_entity:e.for_entity};console.log(s),n["a"].post("/api/data/playlists/",s,t)},updatePlaylist:function(e,t){var s={};e.name&&(s.name=e.name),void 0!==e.for_client&&(s.for_client=e.for_client),e.shots&&(s.shots=e.shots),e.for_entity&&(s.for_entity=e.for_entity),n["a"].put("/api/data/playlists/".concat(e.id),s,t)},deletePlaylist:function(e,t){n["a"].del("/api/data/playlists/".concat(e.id),t)},deleteBuildJob:function(e,t){return new Promise((function(t,s){var i="/api/data/playlists/".concat(e.playlist_id,"/jobs/").concat(e.id);n["a"].del(i,(function(e){e?s(e):t()}))}))},runPlaylistBuild:function(e){return new Promise((function(t,s){var i="/api/data/playlists/".concat(e.id,"/build/mp4");n["a"].get(i,(function(e){e?s(e):t()}))}))},loadTempPlaylist:function(e,t){var s="/api/data/projects/".concat(e.id,"/playlists/temp");return n["a"].ppost(s,{task_ids:t})}}},"48c6":function(e,t,s){"use strict";s("caad"),s("d3b7");var n=s("db82"),i=s.n(n),a=s("4360"),o=s("9fb0"),r={logIn:function(e,t,s){i.a.post("/api/auth/login").send({email:e,password:t}).end((function(e,t){if(e)t.body.default_password&&(e.default_password=t.body.default_password,e.token=t.body.token),s(e);else if(t.body.login){var n=t.body.user,i=t.body.ldap;a["a"].commit(o["Y"],{isLdap:i}),s(null,n)}else a["a"].commit(o["Qf"]),s(new Error("Login failed"))}))},logout:function(e){i.a.get("/api/auth/logout").end((function(t,s){t&&(console.error(t),e(t)),a["a"].commit(o["Rf"]),e()}))},resetPassword:function(e){return new Promise((function(t,s){i.a.post("/api/auth/reset-password").send({email:e}).end((function(e,n){e?s(e):t()}))}))},resetChangePassword:function(e,t,s){return new Promise((function(n,a){i.a.put("/api/auth/reset-password").send({token:e,password:t,password2:s}).end((function(e,t){e?a(e):n()}))}))},isServerLoggedIn:function(e){i.a.get("/api/auth/authenticated").end((function(t,s){if(t&&s&&[401,422].includes(s.statusCode))a["a"].commit(o["Qf"]),e(null);else if(t)a["a"].commit(o["Qf"]),e(t);else if(s&&null===s.body)a["a"].commit(o["Qf"]),e(t);else{var n=s.body.user,i=s.body.organisation||{},r=s.body.ldap;i.use_original_file_name=i.use_original_file_name?"true":"false",a["a"].commit(o["bf"],i),a["a"].commit(o["Pf"],n),e(null,r)}}))},requireAuth:function(e,t,s){var n=function(t){a["a"].state.user.isAuthenticated?(a["a"].commit(o["Y"],{isLdap:t}),s()):a["a"].dispatch("getOrganisation").then((function(){s({path:"/login",query:{redirect:e.fullPath}})})).catch((function(t){console.error(t),s({path:"/login",query:{redirect:e.fullPath}})}))};null===a["a"].state.user.user?r.isServerLoggedIn((function(t,i){t?s({path:"/server-down",query:{redirect:e.fullPath}}):n(i)})):n()},isPasswordValid:function(e,t){return e.length>6&&e===t}};t["a"]=r},4918:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("main.csv.preview_title"))+" ")]),s("div",{staticClass:"description"},[s("div",{staticClass:"flex-item"},[s("p",[e._v(" "+e._s(e.$t("main.csv.preview_description"))+" "),s("br"),e._v(" "+e._s(e.$t("main.csv.preview_required"))+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.disableUpdate,expression:"!disableUpdate"}]},[s("h2",{staticClass:"legend-title"},[e._v(e._s(e.$t("main.csv.options.title")))]),s("checkbox",{attrs:{toggle:!0,label:e.$t("main.csv.options.update")},model:{value:e.updateData,callback:function(t){e.updateData=t},expression:"updateData"}})],1)]),s("div",{staticClass:"flex-item"},[s("ul",{staticClass:"legend"},[s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term"}),e._v(" "+e._s(e.$t("main.csv.legend_ok"))+" ")]),s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term ignored"}),e._v(" "+e._s(e.$t("main.csv.legend_ignored"))+" ")]),s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term missing"}),e._v(" "+e._s(e.$t("main.csv.legend_missing"))+" ")]),s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term disabled"}),e._v(" "+e._s(e.$t("main.csv.legend_disabled"))+" ")]),s("li",{directives:[{name:"show",rawName:"v-show",value:!e.disableUpdate,expression:"!disableUpdate"}],staticClass:"legend-definition"},[s("span",{staticClass:"legend-term overwrite"}),e._v(" "+e._s(e.$t("main.csv.legend_overwrite"))+" ")])])])]),s("div",{staticClass:"render-container"},[s("table",{staticClass:"render"},[s("colgroup",[e._l(e.parsedCsv[0],(function(t,n){return s("col",{key:"col-"+n,class:e.stateColumn(t)})})),e._l(e.columnsRequired,(function(e){return s("col",{key:"col-missing-"+e,staticClass:"missing"})}))],2),s("thead",[s("tr",{staticClass:"render-headers"},[e._l(e.parsedCsv[0],(function(t,n){return s("th",{key:"header-"+n},[s("div",{staticClass:"render-select"},[s("combobox",{attrs:{options:e.columnOptions,value:t,error:e.isDuplicated(n)},on:{input:e.checkForDuplicate},model:{value:e.columnSelect[n],callback:function(t){e.$set(e.columnSelect,n,t)},expression:"columnSelect[index]"}})],1),e._v(" "+e._s(t||"-")+" ")])})),e._l(e.columnsRequired,(function(t){return s("th",{key:"header-"+t},[e._v(" "+e._s(t)+" ")])}))],2)]),s("tbody",e._l(e.startFrom(e.parsedCsv,1),(function(t,n){return t&&t.length>1?s("tr",{key:"line-"+n,class:{overwrite:e.updateData&&e.existingData(n),disabled:!e.updateData&&e.existingData(n)}},[e._l(t,(function(t,n){return s("td",{key:"cell-"+n},[e._v(" "+e._s(t||"-")+" ")])})),e._l(e.columnsRequired,(function(t){return s("td",{key:"cell-"+t},[e._v(" "+e._s("-")+" ")])}))],2):e._e()})),0)])]),s("div",{staticClass:"render-footer"},[s("button-simple",{attrs:{text:e.$t("main.csv.preview_reupload")},on:{click:e.onReupload}}),s("modal-footer",{attrs:{"error-text":e.$t("main.csv.error_upload"),"is-loading":e.isLoading,"is-disabled":void 0===e.formData,"is-error":e.isError},on:{confirm:e.onConfirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("caad"),s("c975"),s("fb6a"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("2532"),s("159b"),s("2909")),o=s("ade3"),r=s("2f62"),c=s("d065"),l=s("992f"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("div",{class:{"checkbox-field":!0,toggle:e.toggle}},[s("input",{ref:"checkbox",staticClass:"visuallyhidden",attrs:{type:"checkbox",id:e.id,disabled:e.disabled},domProps:{checked:e.checked},on:{change:function(t){return e.updateStatus()}}}),s("label",{attrs:{for:e.id}},[s("span",[e._v(e._s(e.label))])])])])},u=[],p={name:"checkbox",model:{prop:"checked",event:"change"},props:{disabled:{default:!1,type:Boolean},label:{default:"",type:String,required:!0},checked:{default:!1,type:Boolean},toggle:{type:Boolean,default:!1}},data:function(){return{id:null}},mounted:function(){this.id=this._uid},computed:{},methods:{updateStatus:function(){this.$emit("change",this.$refs.checkbox.checked)}}},h=p,f=(s("9bb3"),s("2877")),m=Object(f["a"])(h,d,u,!1,null,"98810fa2",null),b=m.exports,_=s("de40"),v=s("d5c9");function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var k={name:"import-render-modal",mixins:[c["a"]],components:{ButtonSimple:_["a"],Combobox:l["a"],Checkbox:b,ModalFooter:v["a"]},data:function(){return{duplicates:[],formData:null,form:{name:""},updateData:!1}},props:{active:{type:Boolean,default:!1},parsedCsv:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},dataMatchers:{type:Array,default:function(){return[]}},database:{type:Object,default:function(){}},disableUpdate:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},mounted:function(){this.formData=null},computed:g({},Object(r["c"])(["isTVShow","shotMetadataDescriptors"]),{columnsRequired:function(){var e=this;return 0!==this.parsedCsv.length?this.columns.filter((function(t){return!e.parsedCsv[0].includes(t)})):void 0},columnsAllowed:function(){var e=Object(a["a"])(this.columns);return this.shotMetadataDescriptors.forEach((function(t){e.includes(t.name)||e.push(t.name)})),e},columnOptions:function(){var e=[{label:this.$t("main.csv.choose"),value:this.$t("main.csv.unknown")}];return this.columnsAllowed.forEach((function(t){e.push({label:t,value:t})})),e},columnSelect:function(){return this.parsedCsv[0]},indexMatchers:function(){var e=this,t=[];return this.dataMatchers.forEach((function(s){t.push(e.parsedCsv[0].indexOf(s))})),t}}),methods:g({},Object(r["b"])([]),{onConfirmClicked:function(){this.$emit("confirm",this.parsedCsv,this.updateData)},onReupload:function(){this.$emit("reupload")},startFrom:function(e,t){return e.slice(t)},stateColumn:function(e){if(!this.columnsAllowed.includes(e))return"ignored"},checkForDuplicate:function(){var e=this,t=this.$t("main.csv.unknown");this.duplicates=this.columnSelect.filter((function(t,s){return e.columnSelect.indexOf(t)!==s})).filter((function(e){return e!==t}))},isDuplicated:function(e){if(this.duplicates.includes(this.columnSelect[e]))return!0},existingData:function(e){var t=this.parsedCsv[e+1],s=this.database,n=this.indexMatchers,i="";return n.forEach((function(e){i+=t[e]})),s[i]}})},w=k,S=(s("13a8"),Object(f["a"])(w,n,i,!1,null,"0f771802",null));t["a"]=S.exports},"49b6e":function(e,t,s){"use strict";var n=s("0ec4"),i=s.n(n);i.a},"4b0a":function(e,t,s){},"4b24":function(e,t,s){"use strict";var n=s("ba8a"),i=s.n(n);i.a},"4cd2":function(e,t,s){"use strict";var n=s("9877"),i=s.n(n);i.a},"4d04":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"wrapper",staticClass:"flexrow search-field-wrapper",on:{click:e.focus}},[s("div",{staticClass:"flexrow-item"},[s("search-icon",{staticClass:"search-icon"})],1),s("div",{staticClass:"flexrow-item search-field"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"input",staticClass:"search-input",attrs:{type:"text",placeholder:e.placeholder},on:{input:e.onSearchChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSaveClicked(t)},focus:e.setFocusedStyle,blur:e.unsetFocusedStyle}})]),s("div",{staticClass:"flexrow-item erase-search"},[s("span",{staticClass:"tag",on:{click:e.clearSearch}},[e._v(" x ")])]),e.canSave?s("div",{staticClass:"flexrow-item save-search"},[s("button",{staticClass:"button save-button",on:{click:e.onSaveClicked}},[s("save-icon",{staticClass:"icon is-small only-icon"})],1)]):e._e()])},i=[],a=(s("498a"),s("0a35")),o={name:"search-field",data:function(){return{}},props:{placeholder:{type:String,default:""},canSave:{type:Boolean,default:!1}},components:{SaveIcon:a["E"],SearchIcon:a["F"]},computed:{},methods:{onSearchChange:function(){this.$emit("change",this.$refs.input.value)},onSaveClicked:function(){var e=this.$refs.input.value.trim();e.length>0&&this.canSave&&this.$emit("save",e)},getValue:function(e){return this.$refs.input.value},setValue:function(e){this.$refs.input.value=e},focus:function(){this.$refs.input.focus()},clearSearch:function(){this.setValue(""),this.onSearchChange()},setFocusedStyle:function(){this.$refs.wrapper.className="flexrow search-field-wrapper focused"},unsetFocusedStyle:function(){this.$refs.wrapper.className="flexrow search-field-wrapper"}}},r=o,c=(s("4cd2"),s("2877")),l=Object(c["a"])(r,n,i,!1,null,"16287d36",null);t["a"]=l.exports},"4f18":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b");var n=s("ade3"),i=s("2f62");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var r={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:o({},Object(i["c"])(["organisation"])),methods:{formatDuration:function(e){return e?(e/60/this.organisation.hours_by_day).toLocaleString("fullwide",{maximumFractionDigits:1}):0},formatBoolean:function(e){return e?this.$t("main.yes"):this.$t("main.no")},formatEstimation:function(e){return e?e<10?e:this.formatDuration(e):0}}}},5027:function(e,t,s){},5037:function(e,t,s){"use strict";var n=s("5991"),i=s.n(n);i.a},5125:function(e,t,s){},"52ad":function(e,t,s){"use strict";s("a4d3"),s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("d81d"),s("13d5"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("07ac"),s("25f0"),s("159b");var n,i=s("ade3"),a=s("ba4c"),o=s.n(a),r=s("ce6b"),c=s("7930"),l=s("6185"),d=s("66e7"),u=s("2229"),p=s("2017"),h=s("ca76"),f=s("e07d"),m=s("9fb0");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var v={addAdditionalInformation:function(e){if(e&&(e.first_name&&e.last_name?(e.name="".concat(e.first_name," ").concat(e.last_name),e.initials="".concat(e.first_name[0]).concat(e.last_name[0])):e.first_name?(e.name=e.first_name,e.initials=e.first_name[0]):e.last_name?(e.name=e.last_name,e.initials=e.last_name[0]):e.email?(e.name=e.email,e.initials=e.email[0]):e.initials="NN",o.a.set(e,"initials",e.initials.toUpperCase()),e.color=c["a"].fromString(e.name),e.has_avatar&&!e.uniqueHash)){var t=Math.random().toString(36).substring(7);o.a.set(e,"uniqueHash",t),e.avatarPath="/api/pictures/thumbnails/persons/".concat(e.id,".png")}return e},getTaskStatus:function(e){return f["a"].state.taskStatusMap[e]}},y={organisation:{name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:"false"},people:[],displayedPeople:[],peopleIndex:{},personMap:{},isPeopleLoading:!1,isPeopleLoadingError:!0,isImportPeopleModalShown:!1,isImportPeopleLoading:!1,isImportPeopleLoadingError:!1,isEditModalShown:!1,isEditLoading:!1,isEditLoadingError:!1,personToEdit:{role:"user"},isDeleteModalShown:!1,isDeleteLoading:!1,isDeleteLoadingError:!1,personToDelete:void 0,personCsvFormData:void 0,person:{},personTasks:[],displayedPersonTasks:[],displayedPersonDoneTasks:[],personTasksIndex:{},personTasksSearchText:"",personTaskSelectionGrid:{},personTaskSearchQueries:[],personTasksScrollPosition:0,timesheet:{},personTimeSpentMap:{},personTimeSpentTotal:0},g=_({},y),k={organisation:function(e){return e.organisation},people:function(e){return e.people},displayedPeople:function(e){return e.displayedPeople},peopleIndex:function(e){return e.peopleIndex},personMap:function(e){return e.personMap},isPeopleLoading:function(e){return e.isPeopleLoading},isPeopleLoadingError:function(e){return e.isPeopleLoadingError},isImportPeopleModalShown:function(e){return e.isImportPeopleModalShown},isImportPeopleLoading:function(e){return e.isImportPeopleLoading},isImportPeopleLoadingError:function(e){return e.isImportPeopleLoadingError},isDeleteModalShown:function(e){return e.isDeleteModalShown},isDeleteLoading:function(e){return e.isDeleteLoading},isDeleteLoadingError:function(e){return e.isDeleteLoadingError},personToDelete:function(e){return e.personToDelete},isEditModalShown:function(e){return e.isEditModalShown},isEditLoading:function(e){return e.isEditLoading},isEditLoadingError:function(e){return e.isEditLoadingError},personToEdit:function(e){return e.personToEdit},personCsvFormData:function(e){return e.personCsvFormData},displayedPersonTasks:function(e){return e.displayedPersonTasks},displayedPersonDoneTasks:function(e){return e.displayedPersonDoneTasks},personTasksSearchText:function(e){return e.personTasksSearchText},personTaskSearchQueries:function(e){return e.personTaskSearchQueries},personTaskSelectionGrid:function(e){return e.personTaskSelectionGrid},personTasksScrollPosition:function(e){return e.personTasksScrollPosition},getPerson:function(e,t){return function(t){return e.personMap[t]}},getPersonOptions:function(e){return e.people.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}))},timesheet:function(e){return e.timesheet},personTimeSpentMap:function(e){return e.personTimeSpentMap},personTimeSpentTotal:function(e){return e.personTimeSpentTotal}},w={getOrganisation:function(e){var t=e.commit;return r["a"].getOrganisation().then((function(e){t(m["bf"],e)}))},saveOrganisation:function(e,t){var s=e.commit;return new Promise((function(e,n){t.id=g.organisation.id,r["a"].updateOrganisation(t).then((function(t){s(m["bf"],t),e()})).catch(n)}))},uploadOrganisationLogo:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){var a=n.organisation.id;r["a"].postOrganisationLogo(a,t).then((function(t){s(m["bf"],{has_avatar:!0}),e()})).catch(i)}))},loadPeople:function(e,t){var s=e.commit;e.state;s(m["Zc"]),r["a"].getPeople((function(e,n){e?s(m["Yc"]):s(m["Xc"],n.map((function(e){return e.departments=e.departments||"",e}))),t&&t(e)}))},loadPerson:function(e,t){var s=e.commit;e.state;r["a"].getPerson(t,(function(e,t){e?console.error(e):t.email&&(s(m["bc"],t),s(m["Zb"],t))}))},newPerson:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){s(m["bc"],t),r["a"].newPerson(n.personToEdit).then((function(t){s(m["xc"]),e(t)})).catch((function(e){s(m["ac"]),i(e)}))}))},newPersonAndInvite:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){s(m["bc"],t),r["a"].newPerson(n.personToEdit).then(r["a"].invitePerson).then((function(){s(m["xc"]),e()})).catch((function(e){s(m["ac"]),i(e)}))}))},invitePerson:function(e){e.commit;var t=e.state;return r["a"].invitePerson(t.personToEdit)},editPerson:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){s(m["bc"],t),r["a"].updatePerson(n.personToEdit).then((function(t){s(m["Zb"],n.personToEdit),s(m["xc"]),e(t)})).catch((function(e){s(m["ac"]),i(e)}))}))},deletePeople:function(e,t){var s=e.commit,n=e.state;s(m["ob"]),r["a"].deletePerson(n.personToDelete.id,(function(e,i){e?s(m["nb"]):(s(m["mb"],n.personToDelete),s(m["wc"])),t&&t(e)}))},uploadPersonFile:function(e,t){var s=e.commit,n=e.state;return s(m["Dc"]),r["a"].postCsv(n.personCsvFormData,t).then((function(){s(m["Bc"]),Promise.resolve()})).catch((function(e){s(m["Cc"]),Promise.reject(e)}))},loadPersonTasks:function(e,t){var s=e.commit,n=(e.state,e.rootGetters),i=t.personId,a=(t.forced,t.date),o=t.callback,c=n.userFilters,l=n.taskTypeMap;s(m["bd"],{personId:i,tasks:[],userFilters:c,taskTypeMap:l}),s(m["ad"],[]),r["a"].getPersonTasks(i,(function(e,t){e&&(t=[]),r["a"].getPersonDoneTasks(i,(function(e,n){e&&(n=[]),s(m["ad"],n),r["a"].getTimeSpents(i,a,(function(e,n){e&&(n=[]),s(m["ge"],n),s(m["bd"],{personId:i,tasks:t,userFilters:c,taskTypeMap:l}),o&&o(e)}))}))}))},loadAggregatedPersonTimeSpents:function(e,t){e.commit,e.state,e.rootGetters;var s=t.personId,n=t.detailLevel,i=t.year,a=t.month,o=t.week,c=t.day;return new Promise((function(e,t){r["a"].getAggregatedPersonTimeSpents(s,n,i,a,o,c).then((function(t){e(t)})).catch((function(e){return t(e)}))}))},showPersonImportModal:function(e,t){var s=e.commit;e.state;s(m["qf"])},hidePersonImportModal:function(e,t){var s=e.commit;e.state;s(m["yc"])},showPersonEditModal:function(e,t){var s=e.commit;e.state;s(m["pf"],t)},hidePersonEditModal:function(e,t){var s=e.commit;e.state;s(m["xc"],t)},showPersonDeleteModal:function(e,t){var s=e.commit;e.state;s(m["of"],t)},hidePersonDeleteModal:function(e,t){var s=e.commit;e.state;s(m["wc"],t)},setPersonTasksSearch:function(e,t){var s=e.commit;e.state;s(m["df"],t)},savePersonTasksSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,n){var i=g.personTaskSearchQueries.find((function(e){return e.name===t}));i?e():r["a"].createFilter("persontasks",t,t,null,null,(function(t,i){s(m["Ke"],{searchQuery:i}),t?n(t):e(i)}))}))},removePersonTasksSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,n){r["a"].removeFilter(t,(function(i){s(m["se"],{searchQuery:t}),i?n(i):e()}))}))},setTimeSpent:function(e,t){var s=e.commit,n=t.personId,i=t.taskId,a=t.date,o=t.duration;return new Promise((function(e,t){r["a"].setTimeSpent(i,n,a,o,(function(n,i){n?t(n):(s(m["kf"],i),e())}))}))},setPersonTasksScrollPosition:function(e,t){var s=e.commit;s(m["cf"],t)},loadTimesheets:function(e,t){var s=e.commit,n=t.detailLevel,i=t.year,a=t.month;return new Promise((function(e,t){var o=1===a.length?"0".concat(parseInt(a)+1):"".concat(a),c=r["a"].getMonthTable;"day"===n&&(c=r["a"].getDayTable),"week"===n&&(c=r["a"].getWeekTable),"year"===n&&(c=r["a"].getYearTable),c(i,o).then((function(t){s(m["ee"],t),e()})).catch(t)}))},peopleSearchChange:function(e,t){var s=e.commit;s(m["de"],t)}},S=(n={},Object(i["a"])(n,m["Zc"],(function(e){e.isPeopleLoading=!0,e.isPeopleLoadingError=!1,e.personMap={}})),Object(i["a"])(n,m["Yc"],(function(e){e.isPeopleLoading=!1,e.isPeopleLoadingError=!0})),Object(i["a"])(n,m["Xc"],(function(e,t){e.isPeopleLoading=!1,e.isPeopleLoadingError=!1,e.people=Object(u["f"])(t),e.displayedPeople=e.people,e.people.forEach((function(t){t=v.addAdditionalInformation(t),e.personMap[t.id]=t})),e.peopleIndex=Object(p["c"])(e.people)})),Object(i["a"])(n,m["ob"],(function(e){e.isDeleteLoading=!0,e.isDeleteLoadingError=!1})),Object(i["a"])(n,m["mb"],(function(e,t){if(e.isDeleteLoading=!1,e.personToDelete=void 0,t){var s=e.people.findIndex((function(e){return e.id===t.id}));s>=0&&e.people.splice(s,1),delete e.personMap[t.id]}})),Object(i["a"])(n,m["nb"],(function(e){e.isDeleteLoading=!1,e.isDeleteLoadingError=!0})),Object(i["a"])(n,m["of"],(function(e,t){e.isDeleteModalShown=!0,e.isDeleteLoadingError=!1,e.isDeleteLoading=!1,e.personToDelete=e.people.find((function(e){return e.id===t}))})),Object(i["a"])(n,m["wc"],(function(e,t){e.isDeleteModalShown=!1,e.personToDelete=void 0})),Object(i["a"])(n,m["bc"],(function(e,t){e.isEditLoading=!0,e.isEditLoadingError=!1,e.personToEdit=Object.assign(e.personToEdit,t)})),Object(i["a"])(n,m["Td"],(function(e){})),Object(i["a"])(n,m["Zb"],(function(e,t){e.isEditLoading=!1,e.isEditLoadingError=!1;var s=_({},t);s=v.addAdditionalInformation(s);var n=e.people.findIndex((function(e){return e.id===s.id}));s.name&&(n>=0?(e.personMap[e.personToEdit.id]=s,delete e.people[n],e.people[n]=e.personMap[e.personToEdit.id]):e.personMap[s.id]||(e.people.push(s),e.personMap[s.id]=s),e.people=Object(u["f"])(e.people),e.displayedPeople=e.people,e.peopleIndex=Object(p["c"])(e.people),e.personToEdit={role:"user"})})),Object(i["a"])(n,m["ac"],(function(e){e.isEditLoading=!1,e.isEditLoadingError=!0})),Object(i["a"])(n,m["Dc"],(function(e,t){e.isImportPeopleLoading=!0,e.isImportPeopleLoadingError=!1})),Object(i["a"])(n,m["Bc"],(function(e,t){e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!1})),Object(i["a"])(n,m["Cc"],(function(e){e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!0})),Object(i["a"])(n,m["pf"],(function(e,t){e.isEditModalShown=!0,e.isEditLoadingError=!1,e.isEditLoading=!1,e.personToEdit=void 0!==t?e.people.find((function(e){return e.id===t})):{first_name:"",last_name:"",phone:"",email:"",role:"user"}})),Object(i["a"])(n,m["xc"],(function(e){e.isEditModalShown=!1,e.personToEdit={}})),Object(i["a"])(n,m["qf"],(function(e){e.isImportPeopleModalShown=!0,e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!1})),Object(i["a"])(n,m["yc"],(function(e){e.isImportPeopleModalShown=!1})),Object(i["a"])(n,m["fe"],(function(e,t){e.personCsvFormData=t})),Object(i["a"])(n,m["Ff"],(function(e,t){var s=e.personMap[t];if(s){var n=Math.random().toString(36).substring(7);s.has_avatar=!0,o.a.set(s,"uniqueHash",n),s.avatarPath="/api/pictures/thumbnails/persons/".concat(s.id,".png")}})),Object(i["a"])(n,m["bd"],(function(e,t){var s=t.personId,n=t.tasks,i=t.userFilters,a=t.taskTypeMap;e.person=e.personMap[s],n.forEach(d["c"]),n.forEach((function(e){var t=v.getTaskStatus(e.task_status_id);e.taskStatus=t}));for(var o={},r=0;r<n.length;r++)o[r]={0:!1};e.personTaskSelectionGrid=o,e.personTasks=Object(u["n"])(n,a),e.personTasksIndex=Object(p["g"])(n);var c=Object(h["e"])(e.personTasksSearchText),l=Object(p["h"])(e.personTasksIndex,c);e.displayedPersonTasks=l||e.personTasks,i.persontasks&&i.persontasks.all?e.personTaskSearchQueries=i.persontasks.all:e.personTaskSearchQueries=[]})),Object(i["a"])(n,m["ad"],(function(e,t){t.forEach(d["c"]),e.displayedPersonDoneTasks=t})),Object(i["a"])(n,m["df"],(function(e,t){e.displayedPersonTasks=[];var s=Object(h["e"])(t),n=Object(p["h"])(e.personTasksIndex,s);e.personTasksSearchText=t,e.displayedPersonTasks=n||e.personTasks})),Object(i["a"])(n,m["Ke"],(function(e,t){var s=t.searchQuery;e.personTaskSearchQueries.push(s),e.personTaskSearchQueries=Object(u["d"])(e.personTaskSearchQueries)})),Object(i["a"])(n,m["se"],(function(e,t){var s=t.searchQuery,n=e.personTaskSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.personTaskSearchQueries.splice(n,1)})),Object(i["a"])(n,m["ae"],(function(e,t){var s=t.comment,n=t.taskId,i=e.personTasks.find((function(e){return e.id===n}));if(i){var a=v.getTaskStatus(s.task_status_id);Object.assign(i,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color}),e.personTasksIndex=Object(p["g"])(e.personTasks)}})),Object(i["a"])(n,m["ue"],(function(e,t){e.personTaskSelectionGrid[t.x]&&(e.personTaskSelectionGrid[t.x][0]=!1)})),Object(i["a"])(n,m["m"],(function(e,t){e.personTaskSelectionGrid[t.x]&&(e.personTaskSelectionGrid[t.x][0]=!0)})),Object(i["a"])(n,m["R"],(function(e,t){e.personTaskSelectionGrid=Object(l["c"])(e.personTaskSelectionGrid)})),Object(i["a"])(n,m["ee"],(function(e,t){e.timesheet=t})),Object(i["a"])(n,m["kf"],(function(e,t){e.person.id===t.person_id&&(e.personTimeSpentMap[t.task_id]=t),e.personTimeSpentTotal=Object.values(e.personTimeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(i["a"])(n,m["ge"],(function(e,t){var s={};t.forEach((function(e){s[e.task_id]=e})),e.personTimeSpentMap=s,e.personTimeSpentTotal=Object.values(e.personTimeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(i["a"])(n,m["cf"],(function(e,t){e.personTasksScrollPosition=t})),Object(i["a"])(n,m["de"],(function(e,t){if(t){var s=Object(h["e"])(t);e.displayedPeople=Object(p["h"])(e.peopleIndex,s)}else e.displayedPeople=e.people})),Object(i["a"])(n,m["Uf"],(function(e,t){var s=e.personMap[t.id];s&&(Object.assign(s,t),v.addAdditionalInformation(s))})),Object(i["a"])(n,m["bf"],(function(e,t){Object.assign(e.organisation,t),e.organisation=_({},e.organisation)})),Object(i["a"])(n,m["Be"],(function(e,t){Object.assign(e,_({},y))})),n);t["a"]={state:g,getters:k,actions:w,mutations:S,helpers:v}},"549e":function(e,t,s){},"54b2":function(e,t,s){"use strict";s("99af");var n=s("edbf");t["a"]={getSequenceCasting:function(e,t){var s="/api/data/projects/".concat(e,"/sequences/").concat(t,"/casting");return n["a"].pget(s)},getAssetTypeCasting:function(e,t){var s="/api/data/projects/".concat(e,"/asset-types/").concat(t,"/casting");return n["a"].pget(s)},updateCasting:function(e,t,s,i){var a="/api/data/projects/".concat(e,"/entities/").concat(t,"/casting");return n["a"].pput(a,s)},postCastingCsv:function(e,t){var s="/api/import/csv/projects/".concat(e.id,"/casting");return n["a"].ppost(s,t)},getAssetCastIn:function(e){return n["a"].pget("/api/data/assets/".concat(e.id,"/cast-in"))},getShotCasting:function(e){var t="/api/data/projects/".concat(e.project_id,"/entities/")+"".concat(e.id,"/casting");return n["a"].pget(t)}}},"557f":function(e,t,s){},"55ce":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-queries"},e._l(e.queries,(function(t){return s("span",{key:t.id,staticClass:"tag",on:{click:function(s){return e.changeSearch(s,t)}}},[e._v(" "+e._s(t.name)+" "),s("button",{staticClass:"delete",on:{click:function(s){return s.preventDefault(),e.removeSearch(t)}}})])})),0)},i=[],a={name:"search-query-list",props:{queries:{type:Array,default:function(){return[]}}},components:{},computed:{},methods:{changeSearch:function(e,t){"delete"!==e.target.className&&this.$emit("changesearch",t)},removeSearch:function(e){this.$emit("removesearch",e)}}},o=a,r=(s("a068"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,null,null);t["a"]=c.exports},"56a0":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("div",{staticClass:"status-combo"},[s("div",{staticClass:"flexrow",on:{click:e.toggleStatusList}},[s("div",{staticClass:"selected-status-line flexrow-item"},[s("span",{staticClass:"tag",style:{background:e.backgroundColor(e.currentStatus),color:e.color(e.currentStatus)}},[e._v(" "+e._s(e.currentStatus.short_name)+" ")])]),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),e.showStatusList?s("div",{ref:"select",staticClass:"select-input"},e._l(e.taskStatusList,(function(t){return s("div",{key:t.id,staticClass:"status-line",on:{click:function(s){return e.selectStatus(t)}}},[s("span",{staticClass:"tag",style:{background:e.backgroundColor(t),color:e.color(t)}},[e._v(" "+e._s(t.short_name)+" ")])])})),0):e._e()]),s("combobox-mask",{attrs:{displayed:e.showStatusList},on:{click:e.toggleStatusList}})],1)},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("0a35"),c=s("7930"),l=s("dbde");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"combobox-status",components:{ChevronDownIcon:r["e"],ComboboxMask:l["a"]},data:function(){return{showStatusList:!1}},props:{label:{default:"",type:String},taskStatusList:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){this.selectedTaskStatus=this.taskStatus},computed:u({},Object(o["c"])(["isDarkTheme","taskStatusMap"]),{currentStatus:function(){return this.value?this.taskStatusMap[this.value]:this.taskStatusList[0]}}),methods:{selectStatus:function(e){this.$emit("input",e.id),this.showStatusList=!1},backgroundColor:function(e){return"todo"!==e.short_name||this.isDarkTheme?"todo"===e.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?c["a"].darkenColor(e.color):e.color:"#ECECEC"},color:function(e){return"todo"!==e.short_name||this.isDarkTheme?"white":"#333"},toggleStatusList:function(){this.showStatusList=!this.showStatusList}}},h=p,f=(s("f2a5"),s("2877")),m=Object(f["a"])(h,n,i,!1,null,"405dd33c",null);t["a"]=m.exports},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("ba4c"),i=s.n(n),a=s("31bd"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{theme:!0,dark:e.isDarkTheme}},[e.user&&e.isDataLoading?s("div",{staticClass:"has-text-centered mt2 loading-info"},[s("span",[e._v(e._s(e.$t("main.loading_data"))+"...")]),s("spinner",{staticClass:"mt2"})],1):s("router-view")],1)},r=[],c=(s("a4d3"),s("4de4"),s("4160"),s("c975"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),l=s("2f62"),d=s("be83");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={name:"app",components:{Spinner:d["a"]},computed:p({},Object(l["c"])(["assetMap","assetTypeMap","currentProduction","episodeMap","isCurrentUserAdmin","isDataLoading","isDarkTheme","isLoginLoading","isSavingCommentPreview","route","personMap","productionMap","sequenceMap","shotMap","taskMap","taskStatusMap","taskTypeMap","user"])),mounted:function(){"true"!==localStorage.getItem("dark-theme")||this.isDarkTheme?(document.documentElement.style.background="#FFF",document.body.style.background="#FFF"):(this.$store.commit("TOGGLE_DARK_THEME"),document.documentElement.style.background="#36393F",document.body.style.background="#36393F")},metaInfo:{link:[{rel:"icon",href:"/static/favicon.ico"}]},methods:p({},Object(l["b"])(["getOrganisation","getTask","loadAsset","loadAssetType","loadComment","loadEpisode","loadOpenProductions","loadPerson","loadPersonTasks","loadProduction","loadSequence","loadShot","loadTaskStatus","loadTaskType","refreshPreview","refreshMetadataDescriptor","removeAsset"]),{onAssignation:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=e.person_id,n=[e.task_id];t?this.$store.commit("ASSIGN_TASKS",{selectedTaskIds:n,personId:s}):this.$store.commit("UNASSIGN_TASKS",n),this.route.path.indexOf(e.person_id)>0&&this.loadPersonTasks({personId:e.person_id,forced:!0})}}),watch:{isDarkTheme:function(){this.isDarkTheme?(document.documentElement.style.background="#36393F",document.body.style.background="#36393F"):(document.documentElement.style.background="#FFF",document.body.style.background="#FFF")}},socket:{events:{"project:new":function(e){this.productionMap[e.project_id]||this.loadProduction(e.project_id)},"project:update":function(e){this.productionMap[e.project_id]?this.loadProduction(e.project_id):this.loadOpenProductions()},"project:delete":function(e){this.productionMap[e.project_id]&&this.$store.commit("REMOVE_PRODUCTION",{id:e.project_id})},"sequence:new":function(e){!this.sequenceMap[e.sequence_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&this.loadSequence(e.sequence_id)},"sequence:update":function(e){this.sequenceMap[e.sequence_id]&&this.loadSequence(e.sequence_id)},"sequence:delete":function(e){this.sequenceMap[e.sequence_id]&&this.$store.commit("REMOVE_SEQUENCE",{id:e.sequence_id})},"episode:new":function(e){!this.episodeMap[e.episode_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&this.loadEpisode(e.episode_id)},"episode:update":function(e){this.episodeMap[e.episode_id]&&this.loadEpisode(e.episode_id)},"episode:delete":function(e){this.episodeMap[e.episode_id]&&this.$store.commit("REMOVE_EPISODE",{id:e.episode_id})},"shot:new":function(e){var t=this;!this.shotMap[e.shot_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&setTimeout((function(){t.loadShot(e.shot_id)}),1e3)},"shot:update":function(e){this.shotMap[e.shot_id]&&this.loadShot(e.shot_id)},"shot:delete":function(e){this.shotMap[e.shot_id]&&this.$store.commit("REMOVE_SHOT",{id:e.shot_id})},"asset:new":function(e){var t=this;!this.assetMap[e.asset_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&setTimeout((function(){t.loadAsset(e.asset_id)}),1e3)},"asset:update":function(e){this.assetMap[e.asset_id]&&this.loadAsset(e.asset_id)},"asset:delete":function(e){this.assetMap[e.asset_id]&&this.$store.commit("REMOVE_ASSET",{id:e.asset_id})},"task-type:new":function(e){this.taskTypeMap[e.task_type_id]||this.loadTaskType(e.task_type_id)},"task-type:update":function(e){},"task-type:delete":function(e){this.taskTypeMap[e.task_type_id]&&this.$store.commit("DELETE_TASK_TYPE_END",{id:e.task_type_id})},"task-status:new":function(e){this.taskStatusMap[e.task_status_id]||this.loadTaskStatus(e.task_status_id)},"task-status:update":function(e){this.taskStatusMap[e.task_status_id]&&this.loadTaskStatus(e.task_status_id)},"task-status:delete":function(e){this.taskStatusMap[e.task_status_id]&&this.$store.commit("DELETE_TASK_STATUS_END",{id:e.task_status_id})},"asset-type:new":function(e){this.assetTypeMap[e.asset_type_id]||this.loadAssetType(e.asset_type_id)},"asset-type:update":function(e){this.assetTypeMap[e.asset_type_id]&&this.loadAssetType(e.asset_type_id)},"asset-type:delete":function(e){this.assetTypeMap[e.asset_type_id]&&this.$store.commit("DELETE_ASSET_TYPE_END",{id:e.asset_type_id})},"person:new":function(e){this.personMap[e.person_id]||this.loadPerson(e.person_id)},"person:update":function(e){this.personMap[e.person_id]&&this.loadPerson(e.person_id)},"person:delete":function(e){var t=this.personMap[e.person_id];t&&(this.$store.commit("DELETE_PEOPLE_START",t),this.$store.commit("DELETE_PEOPLE_END",t))},"task:assign":function(e){this.onAssignation(e)},"task:unassign":function(e){this.onAssignation(e,!1)},"comment:new":function(e){var t=e.comment_id;this.isSavingCommentPreview||this.loadComment({commentId:t})},"task:update":function(e){this.taskMap[e.task_id]&&this.getTask({taskId:e.task_id})},"metadata-descriptor:new":function(e){this.refreshMetadataDescriptor(e.metadata_descriptor_id)},"metadata-descriptor:update":function(e){this.refreshMetadataDescriptor(e.metadata_descriptor_id)},"metadata-descriptor:delete":function(e){this.$store.commit("DELETE_METADATA_DESCRIPTOR_END",{id:e.metadata_descriptor_id})},"organisation:update":function(e){this.isCurrentUserAdmin&&this.getOrganisation()}}}},f=h,m=(s("5c0b"),s("2877")),b=Object(m["a"])(f,o,r,!1,null,null,null),_=b.exports,v=s("a925"),y={assets:{cast_in:"Cast in",delete_error:"An error occured while deleting this asset. There are probably data linked to it. Are you sure this asset type has no task linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_fail:"Creation or edition failed, a server error occured.",edit_success:"Asset {name} successfully edited.",edit_title:"Edit asset",empty_list:"There is no asset in the production. What about creating some?",empty_list_client:"There is no asset in this production.",new_asset:"Add an asset",new_assets:"Add assets",new_success:"Asset {name} successfully created.",no_cast_in:"This asset is not cast in any shot.",number:"asset | assets",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this asset.",tasks:"Asset tasks",title:"Assets",fields:{description:"Description",episode:"Ep.",name:"Name",production:"Prod",time_spent:"Time",type:"Type",hidden_from_client:"Displayed to client"}},asset_types:{all_asset_types:"All asset types",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this asset type. There are probably data linked to it. Are you sure this asset type has no asset linked to it?",edit_title:"Edit asset type",new_asset_type:"Add an asset type",number:"asset type | asset types",title:"Asset Types",production_title:"Asset Types Stats",fields:{name:"Name"}},breakdown:{all_assets:"All available assets",empty:"Empty casting",title:"Breakdown",edit_label:"Change the asset's label",label:"Label",options:{fixed:"fixed",animate:"animate"}},comments:{add_comment:"Add a comment...",add_checklist:"Add checklist",add_preview:"Attach preview",change_preview:"Change preview",comment_from_client:"Comment from client",empty_text:"This comment is empty",edit_title:"Edit comment",error:"An error occured while posting comment",no_file_attached:"No file attached",post_status:"Post comment",retake:"Retake",pin:"Pin",pinned:"Pinned",revision:"revision",unpin:"Unpin",validated:"Validated!",validation_required:"Validation Required",set_status_to:"Set status to",fields:{text:"text"}},custom_actions:{delete_text:"Are you sure you want to remove custom action {name} from your database?",delete_error:"An error occured while deleting this custom custom action.",edit_title:"Edit a custom action",new_custom_action:"Add a custom action",number:"custom action | custom actions",run_for_selection:"Run custom action for selected tasks:",title:"Custom Actions",fields:{name:"Name",url:"URL",entity_type:"Entity Type",is_ajax:"Use AJAX"},entity_types:{all:"All",shot:"Shot",asset:"Asset"}},entities:{thumbnails:{error:"An error occured while uploading thumbnails",explaination:"Adding a thumbnail requires to set a new preview. In order to set several thumbnails at the same time, you must chose first a task type that will be used to create the new previews. The thumbnails will be set from this new preview.",explaination_two:'Then you have to select the files you want to upload. To find the right entities, the file names must match the following pattern: "parent name entity name".',select_files:"Select Files",selected_files:"Selected Files",select_task_type:"Select Task Type",title:"Add Thumbnails",upload:"Add Thumbnails"}},episodes:{all_episodes:"All episodes",delete_error:"An error occured while deleting this episode. There are probably data linked to it. Are you sure this episode has no sequence linked to it?",delete_text:"Are you sure you want to remove {name} from your database? Every related shots and previews will be deleted. Pleas confirm by typing the episode name below.",edit_title:"Edit episode",empty_list:"There is no episode in the production. What about creating some?",empty_list_client:"There is no episode in this production.",new_episode:"New episode",number:"episode | episodes",title:"Episode Stats",fields:{name:"name",description:"description"}},keyboard:{altdown:"Move task selection down",altleft:"Move task selection left",altright:"Move task selection right",altup:"Move task selection up",shortcuts:"Shortcuts"},login:{forgot_password:"Forgot password?",login:"Log in",login_failed:"Log in failed, please verify your credentials",login_page:"Cancel",reset_change_password:"Change password",reset_change_password_form_failed:"There is a problem with the password you gave. Please, verify that it is at least 7 chars long and that both passwords match.",reset_change_password_failed:"Changing password failed. Please, restart the whole procedure again.",reset_change_password_succeed:"Your password was changed successfully. Please, go back to the login page to use it.",reset_change_password_title:"Enter a new password",reset_password:"Reset Password",reset_password_failed:"Reset Password failed. Please verify your email.",reset_password_succeed:"Reset Password succeeded. Please check your inbox.",reset_password_title:"Enter your email to reset your password",title:"Log in to Kitsu",fields:{email:"Email",password:"Password",password2:"Password again"}},main:{about:"About",add:"add",all:"All",admin:"Admin",cancel:"Cancel",clear_selection:"Clear current selection",close:"Close",confirmation:"Confirm",confirmation_and_stay:"Confirm and stay",date:"Date",dark_theme:"Dark Theme",days_spent:"day spent | days spent",delete:"Delete",delete_all:"Delete all",delete_text:"Are you sure you want to remove {name} from your database?",documentation:"Documentation",edit:"Edit",empty_comment:"Empty comment",end_date:"End date",files_selected:"files selected",for:"For",go_productions:"Go to productions",history:"history",info:"Information",or:"or",no:"No",loading:"Loading...",loading_data:"Loading data",loading_error:"An error occured while loading data.",logout:"Logout",modify:"Modify",minimize:"Minimize",maximize:"Maximize",nb_frames:"frame | frames",profile:"Profile",production:"Production",remove:"Remove",save:"Save",sort_by:"Sort by",sorted_by:"Sorted by",start_date:"Start date",studio:"Studio",tutorials:"Tutorials",user:"User",white_theme:"White Theme",yes:"Yes",csv:{choose:"Choose",unknown:"Unknown column",error_upload:"An error occured while uploading your CSV.",export_file:"Export",import_file:"Import",import_title:"Import data from a CSV",legend:"Legend",legend_ok:"Recognized data",legend_ignored:"Ignored data",legend_missing:"Missing data",legend_disabled:"Data that will no be updated or created",legend_overwrite:"Data that will be updated",paste:"Paste",paste_code:"Please paste here your CSV data:",preview:"Preview",preview_episode_name:"Episode name",preview_title:"Preview of your imported data",preview_description:"Upload a .csv file to populate your board with posts.",preview_required:"NB: Headers must be included as first row.",preview_reupload:"Reupload .CSV file",required_fields:"Your CSV requires the following columns",select_file:"Please select a file from one of your folder:",tab_select_file:"Upload a CSV file",tab_paste_code:"Paste a CSV data",upload_file:"Browse",options:{title:"Options",update:"Update existing data"}}},menu:{assign_tasks:"Assign tasks",change_priority:"Change priority",change_status:"Change status",create_tasks:"Create tasks",delete_tasks:"Delete tasks",generate_playlists:"Generate playlists",run_custom_action:"Run custom action",set_estimations:"Set estimations"},news:{all:"All",commented_on:"commented on",infos:"Infos",no_news:"There is no news for this production or for this filter.",only_comments:"Only comments",only_previews:"Only previews",set_preview_on:"set preview on",task_status:"Task status",task_type:"Task type",title:"News Feed"},not_found:{text:"There was something wrong with the link you clicked on, we encourage you to come back on the home page.",title:"Page not found... are your looking for something you deleted?"},notifications:{and_change_status:"and changed status to",assigned_you:"assigned you to",commented_on:"commented on",mention_you_on:"mentioned you on",no_notifications:"There is currently no notification for you for your current projects.",title:"Notifications",with_preview:"with a preview"},people:{active:"Active",add_member_to_team:"Add a member to the team: ",create_invite:"Create and send invitation",delete_error:"An error occured while deleting this person. There are probably data linked to it. Are you sure this person has no assignation or wrote no comment?",delete_text:"Are you sure you want to remove {personName} from your database? Every related comments and previews will be deleted. Pleas confirm by typing the full person name below.",edit_title:"Edit person",empty_team:"There is no one listed in the project team.",invite:"Send invitation",invite_error:"An error occured while sending the invitation",invite_success:"Invitation was successfully sent",new_person:"Add a new employee",no_task_assigned:"There are no running tasks assigned to you",persons:"person | persons",running_tasks:"Running tasks",select_person:"Select a person...",team:"Team",title:"People",unactive:"Unactive",csv:{import_file:"Import a .csv file",export_file:"Download as a .csv file",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:",error_upload:"An error occured while uploading your CSV file."},fields:{first_name:"First name",last_name:"Last name",email:"Email",phone:"Phone",role:"Role",old_password:"Current password",password:"New password",password_2:"New password (repeat)",active:"Active"},list:{name:"Name",email:"Email",phone:"Phone",role:"Role",active:"Active"},role:{admin:"Studio Manager",client:"Client",manager:"Supervisor",user:"Artist"}},playlists:{add_assets:"Add assets",add_selection:"Add selection",add_shots:"Add shots",add_sequence:"Add whole sequence",add_episode:"Add whole episode",add_movie:"Add whole movie",apply_task_type_change:"This will set the last revison for given task type on all shots.",available_build:"Available builds",build_daily:"Daily pending",build_weekly:"All Pending",build_mp4:"Build .mp4 (beta)",client_playlist:"Client Playlist",create_for_selection:"Generate a playlist for shot selection",create_title:"Create playlist",created_at:"Created at:",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this playlist.",download_zip:"Download .zip",for_client:"The client",for_studio:"The Studio",edit_title:"Edit playlist",last_creation:"Last creations",last_modification:"Last modifications",loading_error:"A server error occured. Playlists cannot be loaded.",new_playlist:"Add a playlist",no_build:"No build",no_playlist:"There is currently no playlist for this project.",no_preview:"No preview",no_selection:"Please select a playlist on the left.",no_sequence_for_episode:"There is no sequence for this episode",no_shot_for_production:"There is no shot for this production",no_shot_for_sequence:"There is no shot for this sequence",select_shot:"Please select a shot in the right column",select_playlist:"Please select a playlist in the left column",select_task_type:"Change task type for all shots",title:"Playlists",updated_at:"Updated at:",remove:"remove",fields:{name:"Name",for_entity:"Select entity to display",for_client:"To be shared with"},actions:{edit:"Edit playlist",delete:"Delete playlist",fullscreen:"Fullscreen",download:"Download…",entity_list:"Show/Hide entity list",comments:"Show/Hide comments",annotation:"Annotation",annotation_delete:"Delete annotation",annotation_redo:"Redo annotation",annotation_undo:"Undo annotation",annotation_big:"Big",annotation_medium:"Medium",annotation_small:"Small",change_task_type:"Change task type",split_screen:"Split screen",next_shot:"Next shot",previous_shot:"Previous shot",next_frame:"Next frame",previous_frame:"Previous frame",play:"Play",pause:"Pause"}},productions:{current:"Selected production",delete_text:"Are you sure you want to remove {name} from your database? Please, confirm by typing the name of the project you want to delete in the text field.",delete_error:"An error occured while deleting this production. There are probably data linked to it. Are you sure this production has no task, shot or asset linked to it? Kitsu doesn't allow production deletion. If you don't want to see the production anymore, you can close it instead.",edit_title:"Edit production",new_production:"Add a production",number:"production | productions",open_productions:"My productions",picture:"Change picture",title:"Productions",home:{create_new:"Create a new production",empty:"You don't have any production open. What about creating a new one?",no_task:"You have no task assigned. See your supervisor to see what you can do!",no_prod_for_client:"You don't have access to any production. Contact your contractor to obtain an access.",title:"Running Productions",welcome:"Welcome to Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Add specific data required by this project.",add_failed:"An error occured while adding metadata to your project.",add_new_values:"There is currently no available values.",available_values:"Available values",choices:"List of values",delete_text:"Are you sure you want to delete this column and related data for all assets of this production?",delete_error:"An error occured while deleting this metadata column.",error:"An error occured while adding the metadata column. Make sure there is no column with similar name and that all fields are filled. If the problem is persists, please contact the support team.",free:"Free value",title:"Add metadata column"},status:{closed:"Closed",open:"Open",active:"Open",archived:"Closed"},type:{short:"Short",featurefilm:"Feature Film",tvshow:"TV Show"}},profile:{change_avatar:"Change avatar",info_title:"Information",language:"Language",notifications_enabled:"Email notifications enabled",notifications_slack_enabled:"Slack notifications enabled",notifications_slack_user:"Slack username",password_title:"Change password",timezone:"Timezone",title:"Your Profile",avatar:{title:"Change avatar",error_upload:"There was an error while uploading picture."},change_password:{button:"Change password",error:"An error occured while changing password. Please verify your current password.",success:"Your password was successfully changed!",unvalid:"Your new password confirmation doesn't match or your password is too short (7 chars, at least, is expected)."},save:{button:"Save changes",error:"An error occured while saving changes"}},settings:{change_logo:"Change logo",integrations:"Integrations",logo:"Studio logo",no_logo:"There is no logo set.",set_logo:"Set studio logo",title:"Settings",fields:{name:"Studio name",hours_by_day:"Hours by day",slack_token:"Slack Token (Optional)",use_original_name:"Use original file name for downloads"},save:{button:"Save settings",error:"A server error occured while saving settings"}},task_status:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task status. There are probably data linked to it. Are you sure this task status has no task linked to it?",edit_title:"Edit task status",number:"task status | task status",new_task_status:"Add a task status",title:"Task Status",fields:{is_artist_allowed:"Is artist allowed",is_client_allowed:"Is client allowed",color:"Color",is_done:"Is done",is_reviewable:"Is reviewable",is_retake:"Has retake value",name:"Name",short_name:"Short name"}},task_types:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task type. There are probably data linked to it. Are you sure this task type has no task linked to it?",edit_title:"Edit task type",new_task_type:"Add a task type",number:"task type | task types",title:"Task Types",fields:{dedicated_to:"For",color:"Color",name:"Name",allow_timelog:"Timelog",priority:"Priority"}},sequences:{all_sequences:"All sequences",delete_text:"Are you sure you want to remove {name} from your database? Every related shots and previews will be deleted. Please confirm by typing the sequence name below.",delete_error:"An error occured while deleting this sequence. There are probably data linked to it. Are you sure this sequence has no shot linked to it?",edit_title:"Edit sequence",empty_list:"There is no sequence in the production. What about creating some?",empty_list_client:"There is no sequence in this production.",new_sequence:"New sequence",number:"sequence | sequences",title:"Sequence Stats",fields:{name:"name",description:"description"}},schedule:{title:"Schedule",title_main:"Main Schedule",overall_man_days:"Man-days",md:"md",zoom_level:"Zoom level",milestone:{add_milestone:"Add milestone for",edit_milestone:"Edit milestone for",name:"Name",error:"An error occured while adding or editing the milestone. Please try again."}},quota:{average:"Average",count_label:"Count mode",detail_label:"Detail level",details_name:"Name",details_seconds:"Seconds",details_frames:"Frames",month_label:"Month",no_quota:"There is no quota for this task type.",name:"Name",quota_day:"Quota per day",quota_week:"Quota per week",quota_month:"Quota per month",year_label:"Year",title:"Quota",type_label:"Type"},shots:{casting:"Shot casting",creation_explaination:"To add shots you need first to create an episode and a sequence. Type an episode name in the bottom of the left column then click on add to create a new episode. Select this episode and repeat the same operation for sequence. Finally select a sequence and type a shot name in the field in the bottom of the right column. Click on the add button below. Your first shot was created. You can now add many more! If it's not a TV Show, you have to directly create a sequence.",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this shot. There are probably data linked to it. Are you sure this shot has no task linked to it?",edit_success:"Shot {name} successfully edited.",edit_fail:"Creation or edition failed, an error occured. Make sure that you are not renaming the shot with a name already listed for given sequence.",edit_title:"Edit shot",empty_list:"There is no shot in the production. What about creating some?",empty_list_client:"There is no shot in this production.",episodes:"Episodes",history:"Shot values history",new_shot:"Add a shot",new_shots:"Add shots",new_sequences:"Add sequences",new_episodes:"Add episodes",no_casting:"The shot casting is empty.",number:"shot | shots",manage:"Create shots",new_success:"Shot {name} successfully created.",padding:"Shot Padding",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this shot.",sequences:"Sequences",tasks:"Shot Tasks",title:"Shots",fields:{description:"Description",nb_frames:"Frames",episode:"Episode",frame_in:"In",frame_out:"Out",fps:"FPS",name:"Name",production:"Prod",sequence:"Sequence",time_spent:"Time"}},server_down:{text:"Please contact your vendor support, your system administrator or your IT department to understand what is going wrong.",title:"Kitsu encountered an error while reaching its data API."},statistics:{count:"Counts",count_mode:"Count mode",display_mode:"Display mode",frames:"Frames",pie:"Pie charts",shots:"Shots"},tasks:{add_preview:"Add preview",add_preview_error:"An error occured while adding preview.",assign:"Assign one task to: | Assign {nbSelectedTasks} tasks to:",back_to_list:"back to list",bigger:"Widen task panel",change_status_to:"Change task status to:",change_preview:"Change preview",change_priority:"Change priority to:",clear_assignations:"clear assignations",create_for_selection:"Create task for each empty cell:",create_tasks:"Add tasks",create_tasks_shot:"Add tasks for current shots",create_tasks_shot_explaination:"You are going to create a new task for each shot of current list for the given task type. Do you want to continue?",create_tasks_shot_failed:"A server error occured while proceeding creations.",create_tasks_asset:"Add tasks for current assets",create_tasks_asset_explaination:"You are going to create a new task for each asset of current list for the given task type. Do you want to continue?",create_tasks_asset_failed:"A server error occured while proceeding creations.",current:"Task to do",current_status:"Current status :",delete_all_text:"Are you sure you want to delete all tasks for given {name}? Please, confirm by typing the task type name of the tasks you want to delete in the text field.",delete_all_error:"Deleting all tasks for given task type failed.",delete_error:"An error occured while deleting task.",delete_comment:"Are you sure you want to delete last comment?",delete_comment_error:"An error occured while deleting comment.",delete_for_selection:"Delete selected tasks:",delete_preview:"Are you sure you want to delete this preview?",delete_preview_error:"An error occured while deleting preview.",edit_comment:"Edit comment",done:"Done",download_pdf_file:"Download .{extension} file",feedback:"feedback",full_screen:"Display in full screen",hide_assignations:"Hide assignations",hide_infos:"Hide additional information",my_tasks:"My tasks",next:"next task",no_assignation_right:"You are not allowed to manage assignations",no_comment:"There is currently no comment for this task.",no_preview:"There is currently no preview for this task.",no_task_selected:"No task selected",number:"task | tasks",preview:"Previews",previous:"previous task",unsubscribe_notifications:"Unsubscribe from notifications",set_estimations:"Set estimations for selected tasks:",set_preview:"Set this preview as thumbnail",set_preview_error:"An error occured while setting preview as thumbnail",set_preview_done:"This preview is used as thumbnail for the current entity.",select_preview_file:"Please select a picture from your hard drive to be used as a preview for the current task:",show_assignations:"Show assignations",show_infos:"Show additional information",subscribe_notifications:"Subscribe to notifications",validation:"Validation",tasks:"Tasks",with_comment:"With a comment...",fields:{asset_type:"Asset type",assignees:"Assignees",end_date:"Validation date",due_date:"Due date",duration:"Duration",entity:"Entity",entity_name:"Name",estimation:"Estimation",frames:"Fram.",last_comment:"Last comment",last_comment_date:"Last comment",priority:"Priority",production:"Prod",real_end_date:"Validation date",real_start_date:"WIP date",retake_count:"Retakes",sequence:"Sequence",task_status:"Status",task_status_short_name:"Status",task_type:"Type"},colors:{title:"Coloring",neutral:"Neutral",status:"Status color",late:"Late in red"},priority:{emergency:"Emergency",normal:"Normal",high:"High",very_high:"Very High"}},timesheets:{detail_level:"Detail level",done_tasks:"Done tasks",export_timesheet:"Export Timesheet",hours:"hours",month:"Month",time_spents:"Time Spent (hours)",title:"Timesheets",year:"Year"},wrong_browser:{title:"Your browser is not supported by Kitsu",text:"Kitsu can only be used with Firefox and Chrome browsers."}},g={assets:{cast_in:"Echado en",delete_error:"Se ha producido un error al borrar este asset. Es probable que haya datos vinculados a él. ¿Está seguro de que este tipo de asset no tiene ninguna tarea vinculada a él?",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",edit_fail:"La creación o edición falló, se produjo un error.",edit_success:"Asset fijo {name} tratado con éxito.",edit_title:"Editar asset fijo",empty_list:"No hay ningún asset en la producción. ¿Qué tal si creamos algunos?",empty_list_client:"No hay ningún asset en esta producción.",new_asset:"Añadir un asset",new_assets:"Añadir assets",new_success:"Asset fijo {name} creado con éxito.",no_cast_in:"Este asset no es lanzado en ninguna toma.",number:"bienes",restore_text:"¿Está seguro de que desea restaurar {name} en su base de datos?",restore_error:"Se ha producido un error al restaurar este asset.",tasks:"Tareas de los assets",title:"Assets",fields:{description:"Descripción",episode:"Ep.",name:"Nombre",production:"Prod",time_spent:"Tiempo",type:"Tipo"}},asset_types:{all_asset_types:"Todos los tipos de assets",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar este tipo de asset. Es probable que haya datos vinculados a él. ¿Está seguro de que este tipo de asset no tiene ningún asset vinculado a él?",edit_title:"Editar tipo de asset fijo",new_asset_type:"Añadir un tipo de asset fijo",number:"tipo de assets | tipos de assets",title:"Tipos de assets",production_title:"Estadísticas de tipos de assets",fields:{name:"Nombre"}},breakdown:{all_assets:"Todos los assets disponibles",empty:"Fundición en vacío",title:"Casting"},comments:{add_comment:"Añadir un comentario....",add_checklist:"Agregar lista de verificación",add_preview:"Adjuntar vista previa",change_preview:"Cambiar la vista previa",comment_from_client:"Comentario del cliente",empty_text:"Este comentario está vacío",edit_title:"Editar cómo",error:"Se ha producido un error al publicar un comentario",no_file_attached:"No se adjunta ningún archivo",post_status:"Publicar cómo",retake:"Retomar",pin:"Alfiler",pinned:"inmovilizado",revision:"modificación",unpin:"Desenganchar",validated:"Validado!",validation_required:"Validación Requerida",set_status_to:"Fijar el status en",fields:{text:"texto"}},custom_actions:{delete_text:"¿Está seguro de que desea eliminar una acción personalizada {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar esta acción personalizada.",edit_title:"Editar una acción personalizada",new_custom_action:"Añadir una acción personalizada",number:"acción personalizada | acciones personalizadas",run_for_selection:"Ejecute una acción personalizada para las tareas seleccionadas:",title:"Acciones personalizadas",fields:{name:"Nombre",url:"URL",entity_type:"Tipo de entidad",is_ajax:"Usar AJAX"},entity_types:{all:"Todos",shot:"Plan",asset:"Asset"}},episodes:{all_episodes:"Todos los episodios",delete_error:"Se ha producido un error al borrar este episodio. Es probable que haya datos vinculados a él. ¿Estás seguro de que este episodio no tiene una secuencia vinculada a él?",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",edit_title:"Editar episodio",empty_list:"No hay ningún episodio en la producción. ¿Qué tal si creamos algunos?",empty_list_client:"No hay ningún episodio en esta producción.",new_episode:"Nuevo episodio",number:"episodio | episodios",title:"Estadísticas del episodio",fields:{name:"denominar",description:"descripción"}},keyboard:{altdown:"Mueve la selección de una tarea hacia abajo",altleft:"Mueve la selección de una tarea a la izquierda",altright:"Mueve la selección de una tarea a la derecha",altup:"Mueve la selección de una tarea hacia arriba",shortcuts:"Atajos de teclado"},login:{forgot_password:"¿Olvidó su contraseña?",login:"Iniciar sesión",login_failed:"Error de inicio de sesión, por favor verifique sus credenciales",login_page:"Cancelar",reset_change_password:"Cambiar contraseña",reset_change_password_form_failed:"Hay un problema con la contraseña que dio. Por favor, verifique que tenga al menos 7 caracteres y que ambas contraseñas coincidan.",reset_change_password_failed:"Error al cambiar la contraseña. Por favor, reinicie todo el procedimiento de nuevo.",reset_change_password_succeed:"Su contraseña ha sido cambiada con éxito. Por favor, vuelva a la página de inicio de sesión para utilizarlo.",reset_change_password_title:"Introduzca una nueva contraseña",reset_password:"Restablecer contraseña",reset_password_failed:"Error al restablecer la contraseña. Por favor, verifique su correo electrónico.",reset_password_succeed:"Restablecer contraseña correctamente. Por favor, compruebe su bandeja de entrada.",reset_password_title:"Ingrese su correo electrónico para restablecer su contraseña",title:"Iniciar sesión en Kitsu",fields:{email:"Correo electrónico",password:"Contraseña",password2:"Contraseña de nuevo"}},main:{about:"Acerca de",add:"añadir",all:"Todos",admin:"Admin",cancel:"Cancelar",clear_selection:"Borrar la selección actual",documentation:"Documentación",close:"Cerrar",confirmation:"Confirmar",confirmation_and_stay:"Confirmar y quedarse",date:"Fecha",dark_theme:"Tema oscuro",days_spent:"días pasados | días pasados",delete:"Borrar",delete_all:"Borrar todo",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",edit:"Tratar",empty_comment:"Vaciar comentario",end_date:"Fecha de finalización",for:"Para",go_productions:"Ir a producciones",history:"trayectoria",info:"Información",or:"o",no:"No",loading:"Carga...",loading_data:"Carga de datos",loading_error:"Se ha producido un error al cargar los datos.",logout:"Cierre de sesión",modify:"Modificar",minimize:"Minimizar",maximize:"Maximizar",nb_frames:"marcos | marcos",profile:"Perfil",production:"Producción",remove:"Quitar",save:"Guardar",sort_by:"Ordenar por",sorted_by:"Ordenado por",start_date:"Fecha de inicio",studio:"Estudio",user:"Usuario",white_theme:"Tema Blanco",yes:"Sí",csv:{export_file:"Exportación",error_upload:"Se ha producido un error al cargar el archivo CSV.",import_file:"Importar",import_title:"Importar datos de un archivo CSV",required_fields:"Su archivo CSV requiere las siguientes columnas",select_file:"Por favor, seleccione un archivo de una de sus carpetas:"}},menu:{assign_tasks:"Asignar tareas",change_priority:"Modificar prioridad",change_status:"Status de modificación",create_tasks:"Crear tareas",delete_tasks:"Borrar medidas",run_custom_action:"Ejecutar una acción personalizada",set_estimations:"Fijar estimaciones"},news:{all:"Todos",commented_on:"comentado",infos:"Información",no_news:"No hay noticias de esta producción ni de este filtro.",only_comments:"Sólo comentarios",only_previews:"Sólo previsualizaciones",set_preview_on:"establecer vista previa en",task_status:"Status de la tarea",task_type:"Tipo de tarea",title:"Últimas noticias"},not_found:{text:"Había algo mal en el enlace en el que hiciste clic, te animamos a que vuelvas a la página de inicio.",title:"Página no encontrada... ¿buscas algo que has borrado?"},notifications:{and_change_status:"y ha cambiado el status a",assigned_you:"te asignó a",commented_on:"comentado",mention_you_on:"te mencioné en",no_notifications:"Actualmente no hay ninguna notificación para usted para sus proyectos actuales.",title:"Notificaciones",with_preview:"con una vista previa"},people:{active:"Asset",add_member_to_team:"Añada un miembro al equipo:",create_invite:"Crear y enviar invitación",delete_error:"Se ha producido un error al borrar a esta persona. Es probable que haya datos vinculados a él. ¿Está seguro de que esta persona no tiene ninguna cita o escribió ningún comentario?",delete_text:"¿Está seguro de que desea eliminar {personName} de su base de datos?",edit_title:"Tratar persona",empty_team:"No hay nadie en el equipo del proyecto.",invite:"Enviar invitación",invite_error:"Se ha producido un error al enviar la invitación",invite_success:"La invitación fue enviada con éxito",new_person:"Añadir un nuevo empleado",no_task_assigned:"No hay tareas de ejecución asignadas a usted",persons:"persona | personas",running_tasks:"Ejecutar tareas",select_person:"Seleccione una persona....",team:"Equipo",title:"Gente",unactive:"Inasset",csv:{import_file:"Importar un archivo.csv",export_file:"Descargar como archivo.csv",import_title:"Importar datos de un archivo CSV",required_fields:"Su archivo CSV requiere las siguientes columnas",select_file:"Por favor, seleccione un archivo de una de sus carpetas:",error_upload:"Se ha producido un error al cargar el archivo CSV."},fields:{first_name:"Nombre de pila",last_name:"Apellido",email:"Correo electrónico",phone:"llamar",role:"Papel",old_password:"Contraseña actual",password:"Nueva contraseña",password_2:"Nueva contraseña (repetir)",active:"Asset"},list:{name:"Nombre",email:"Correo electrónico",phone:"llamar",role:"Papel",active:"Asset"},role:{admin:"Director del estudio",client:"Mandante",manager:"Supervisor",user:"Artista CG"}},playlists:{add_selection:"Añade la selección",add_shots:"Añadir shots",add_sequence:"Añadir secuencia completa",add_episode:"Añadir episodio completa",add_movie:"Añadir film completa",apply_task_type_change:"Esto posicionará la última revisión para el tipo de tarea dada en todos los shots.",available_build:"Construcciones disponibles",build_daily:"Diario pendiente",build_weekly:"Todos Pendientes",build_mp4:"Construir .mp4",client_playlist:"Playlist clave",created_at:"Creado en:",created_title:"Crear playlist",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar esta lista de reproducción.",download_zip:"Descargar.zip",edit_title:"Editar lista de reproducción",for_client:"El cliente",for_studio:"El estudio",last_creation:"Ultimas creaciones",last_modification:"Ultimas modificaciones",loading_error:"Se ha producido un error en el servidor. Las listas de reproducción no se pueden cargar.",new_playlist:"Añadir una lista de reproducción",no_build:"Sin construcción",no_playlist:"Actualmente no hay ninguna lista de reproducción para este proyecto.",no_preview:"No hay vista previa de esta toma",no_selection:"Por favor, seleccione una lista de reproducción a la izquierda.",no_sequence_for_episode:"No hay secuencia para este episodio",no_shot_for_production:"No hay ninguna toma para esta producción.",no_shot_for_sequence:"No hay ninguna toma para esta secuencia",select_shot:"Por favor, seleccione una toma en la columna de la derecha",select_playlist:"Por favor, seleccione una lista de reproducción en la columna de la izquierda",select_task_type:"Cambiar el tipo de tarea para todos los planes",title:"Listas de reproducción",updated_at:"Actualizado en:",remove:"quitar",fields:{name:"Nombre",for_client:"Par compartir con"}},productions:{current:"Producción seleccionada",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar esta producción. Es probable que haya datos vinculados a él. ¿Estás seguro de que esta producción no tiene ninguna tarea, toma o asset relacionado con ella? Kitsu no permite la eliminación de la producción. Si no quieres ver más la producción, puedes cerrarla.",edit_title:"Editar producción",new_production:"Añadir una producción",number:"producción | producciones",open_productions:"Mis producciones",picture:"Cambiar imagen",title:"Producciones",home:{create_new:"Crear una nueva producción",empty:"No tienes ninguna producción abierta. ¿Qué tal si creamos uno nuevo?",no_task:"No tiene ninguna tarea asignada. Consulte a su supervisor para ver qué puede hacer!",no_prod_for_client:"No tienes acceso a ninguna producción. Póngase en contacto con su contratista para obtener un acceso.",title:"Producciones en marcha",welcome:"Bienvenido a Kitsu"},fields:{fps:"SPD",name:"Nombre",ratio:"razonar",resolution:"Resolución",status:"Estado",type:"Tipo"},metadata:{add_explaination:"Añada los datos específicos requeridos por este proyecto.",add_failed:"Se ha producido un error al añadir metadatos al proyecto.",add_new_values:"Actualmente no hay valores disponibles.",available_values:"Valores disponibles",choices:"Lista de valores",delete_text:"¿Está seguro de que desea borrar esta columna y los datos relacionados para todos los assets de esta producción?",delete_error:"Se ha producido un error al eliminar esta columna de metadatos.",error:"Se ha producido un error al añadir la columna de metadatos. Asegúrese de que no hay ninguna columna con un nombre similar y que todos los campos están completos. Si el problema persiste, póngase en contacto con el equipo de soporte.",free:"Valor libre",title:"Add metadata column"},status:{closed:"Cerrado",open:"Abrir",active:"Abrir",archived:"Cerrado"},type:{short:"Corto",featurefilm:"Largometraje",tvshow:"programa de televisión"}},profile:{change_avatar:"Cambiar avatar",info_title:"Información",language:"Idioma",notifications_enabled:"Notificaciones de correo electrónico habilitadas",notifications_slack_enabled:"Notificaciones de Slack activadas",notifications_slack_user:"Slack ID",password_title:"Cambiar contraseña",timezone:"Zona horaria",title:"Su perfil",avatar:{title:"Cambiar avatar",error_upload:"Se ha producido un error al subir la imagen."},change_password:{button:"Cambiar contraseña",error:"Se ha producido un error al cambiar la contraseña. Por favor, verifique su contraseña actual.",success:"Su contraseña ha sido cambiada con éxito!",unvalid:"La confirmación de su nueva contraseña no coincide o es demasiado corta (se esperan al menos 7 caracteres)."},save:{button:"Guardar cambios",error:"Se ha producido un error al guardar los cambios"}},quota:{average:"Promedio",count_label:"Modo de conteo",detail_label:"Nivel de detalle",nombre_detalles:"Nombre",details_seconds:"Segundos",details_frames:"Frames",month_label:"Mes",no_quota:"No hay cuota para este tipo de tarea",name:"Nombre",quota_day:"Cuota por día",quota_week:"Cuota por semana",quota_month:"Cuota por mes",year_label:"Año",title:"Cupos",type_label:"Tipo"},settings:{change_logo:"Cambiar logotipo",integrations:"Integraciones",logo:"Estudio de logotipos",no_logo:"No hay conjunto de logotipos.",set_logo:"Logotipo de estudio",title:"Ajustes",fields:{name:"Nombre del estudio",hours_by_day:"Horas por día",slack_token:"Slack token (opcional)",use_original_name:"Usar el nombre del archivo original para las descargas"},save:{button:"Grabar parametrizaciones",error:"Se ha producido un error del servidor al guardar la configuración"}},task_status:{delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar este estado de la tarea. Es probable que haya datos vinculados a él. ¿Está seguro de que este status de tarea no tiene ninguna tarea vinculada a él?",edit_title:"Editar el estado de la tarea",number:"estado de la tarea | estado de la tarea",new_task_status:"Añadir un status de tarea",title:"Estado de la tarea",fields:{color:"Color",is_artist_allowed:"Se permite al artista",is_client_allowed:"Se permite al cliente",is_done:"Se hace",is_reviewable:"Es revisable",is_retake:"Tiene valor de retomar",name:"Nombre",short_name:"Denominación breve"}},task_types:{delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar este tipo de tarea. Es probable que haya datos vinculados a él. ¿Está seguro de que este tipo de tarea no tiene ninguna tarea vinculada a ella?",edit_title:"Tratar tipo de tarea",new_task_type:"Añadir un tipo de tarea",number:"tipo de tarea | tipos de tarea",title:"Tipos de tareas",fields:{dedicated_to:"Para",color:"Color",name:"Nombre",allow_timelog:"Registro de tiempo",priority:"Prioridad"}},sequences:{all_sequences:"Todas las secuencias",delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar esta secuencia. Es probable que haya datos vinculados a él. ¿Estás seguro de que esta secuencia no tiene ninguna toma vinculada a ella?",edit_title:"Tratar secuencia",empty_list:"No hay ninguna secuencia en la producción. ¿Qué tal si creamos algunos?",empty_list_client:"No hay secuencia en esta producción.",new_sequence:"Nueva secuencia",number:"secuencia | secuencias",title:"Estadísticas de secuencia",fields:{name:"denominar",description:"descripción"}},schedule:{title:"Calendario",title_main:"Calendario principal",overall_man_days:"Días-hombre",md:"md",zoom_level:"Nivel de zoom",milestone:{add_milestone:"Añadir hito para",edit_milestone:"Tratar hito para",name:"Nombre",error:"Se ha producido un error al añadir o editar el hito. Por favor, inténtalo de nuevo."}},shots:{casting:"Casting",creation_explaination:'Para añadir tomas, primero tienes que crear un episodio y una secuencia. Escriba el nombre de un episodio en la parte inferior de la columna de la izquierda y luego haga clic en añadir para crear un nuevo episodio. Seleccione este episodio y repita la misma operación para la secuencia. Finalmente seleccione una secuencia y escriba el nombre de una toma en el campo en la parte inferior de la columna derecha. Haga clic en el botón "Agregar" que aparece a continuación. Tu primera toma fue creada. Ahora puede añadir muchos más! Si no es un programa de televisión, tienes que crear directamente una secuencia.',delete_text:"¿Está seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar esta imagen. Es probable que haya datos vinculados a él. ¿Estás seguro de que esta toma no tiene ninguna tarea relacionada con ella?",edit_success:"Plan {name} editado con éxito.",edit_fail:"La creación o edición falló, se produjo un error. Asegúrese de que no está renombrando la toma con un nombre ya listado para una secuencia dada.",edit_title:"Editar foto",empty_list:"No hay ninguna toma en la producción. ¿Qué tal si creamos algunos?",empty_list_client:"No hay ninguna toma en esta producción.",episodes:"Episodios",history:"Historial de valores plan",new_shot:"Agregar una foto",new_shots:"Añadir tomas",new_sequences:"Añadir secuencias",new_episodes:"Añadir episodios",no_casting:"El lanzamiento de granadas está vacío.",number:"Plan | Disparos",manage:"Crear tomas",new_success:"Plan {name} creado con éxito.",padding:"Acolchado de chupitos",restore_text:"¿Está seguro de que desea restaurar {name} en su base de datos?",restore_error:"Se ha producido un error al restaurar esta toma.",sequences:"Secuencias",tasks:"Tareas de los chupitos",title:"Plans",fields:{description:"Descripción",nb_frames:"Marcos",episode:"Episodio",frame_in:"En",frame_out:"Fuera",fps:"SPD",name:"Nombre",production:"Prod",sequence:"Secuencia",time_spent:"Tiempo"}},server_down:{text:"Póngase en contacto con el servicio de asistencia técnica de su proveedor, su administrador de sistemas o su departamento de TI para comprender qué es lo que está fallando.",title:"Kitsu encontró un error al alcanzar su API de datos."},statistics:{count:"Conteos",count_mode:"Modo de recuento",display_mode:"Modo de visualización",frames:"Marcos",pie:"Gráficos circulares",shots:"Plans"},tasks:{add_preview:"Añadir vista previa",add_preview_error:"Se ha producido un error al añadir la vista previa.",assign:"Asigne una tarea a: | Asignar {nbSelectedTasks} tareas a:",back_to_list:"volver a la lista",bigger:"Ampliar el panel de tareas",change_status_to:"Cambiar el estado de la tarea a:",change_preview:"Cambiar la vista previa",change_priority:"Cambiar la prioridad a:",clear_assignations:"asignaciones claras",create_for_selection:"Crear tarea para cada celda vacía:",create_tasks:"Añadir tareas",create_tasks_shot:"Añadir tareas para las tomas actuales",create_tasks_shot_explaination:"Va a crear una nueva tarea para cada toma de la lista actual para el tipo de tarea dado. ¿Quieres continuar?",create_tasks_shot_failed:"Se ha producido un error en el servidor durante el proceso de creación.",create_tasks_asset:"Añadir tareas para los assets actuales",create_tasks_asset_explaination:"Va a crear una nueva tarea para cada asset fijo de la lista actual para el tipo de tarea en cuestión. ¿Quieres continuar?",create_tasks_asset_failed:"Se ha producido un error en el servidor durante el proceso de creación.",current:"Tarea a realizar",current_status:"Situación actual",delete_all_text:"¿Está seguro de que desea eliminar todas las tareas de {name}? Por favor, confirme escribiendo el nombre del tipo de tarea que desea eliminar en el campo de texto.",delete_all_error:"Ha fallado la eliminación de todas las tareas de un determinado tipo de tarea.",delete_error:"Se ha producido un error al eliminar la tarea.",delete_comment:"¿Estás seguro de que quieres borrar el último comentario?",delete_comment_error:"Se ha producido un error al eliminar un comentario.",delete_for_selection:"Eliminar tareas seleccionadas:",delete_preview:"¿Estás seguro de que quieres borrar esta vista previa?",delete_preview_error:"Se ha producido un error al eliminar la vista previa.",edit_comment:"Editar cómo",done:"Hecho",download_pdf_file:"Descargar archivo.{extension}",feedback:"retroalimentación",full_screen:"Visualización en pantalla completa",hide_assignations:"Suprimir asignaciones",hide_infos:"Ocultar información adicional",my_tasks:"Mis tareas",next:"tarea siguiente",no_assignation_right:"No se le permite gestionar asignaciones",no_comment:"Actualmente no hay ningún comentario para esta tarea.",no_preview:"Actualmente no hay ninguna vista previa para esta tarea.",no_task_selected:"Ninguna tarea seleccionada",number:"tarea | tareas",preview:"Previsualizaciones",previous:"tarea previa",unsubscribe_notifications:"Darse de baja de las notificaciones",set_estimations:"Establecer estimaciones para las tareas seleccionadas:",set_preview:"Establecer esta vista previa como miniatura",set_preview_error:"Se ha producido un error al configurar la vista previa como miniatura.",set_preview_done:"Esta vista previa se utiliza como miniatura para la entidad actual.",select_preview_file:"Por favor, seleccione una imagen de su disco duro para utilizarla como vista previa de la tarea actual:",show_assignations:"Mostrar asignaciones",show_infos:"Mostrar información adicional",subscribe_notifications:"Suscribirse a las notificaciones",validation:"Validación",tasks:"Tareas",with_comment:"Con un comentario....",fields:{asset_type:"Tipo de asset",assignees:"Asignados",end_date:"Fecha de finalización",due_date:"Dos fechas",duration:"Duración",entity:"Entidad",entity_name:"Nombre",estimation:"Estimación",frames:"Marco.",last_comment:"Último comentario",last_comment_date:"Último comentario",priority:"Prioridad",production:"Prod",real_end_date:"Fecha de validación",real_start_date:"Fecha WIP",retake_count:"Reasignaciones",sequence:"Secuencia",task_status:"Estado",task_status_short_name:"Estado",task_type:"Tipo"},colors:{title:"Colorear",neutral:"Neutral",status:"Color de estado",late:"Tarde en rojo"},priority:{emergency:"Emergencia",normal:"Normal",high:"Alto",very_high:"Muy Alto"}},timesheets:{detail_level:"Nivel de detalle",done_tasks:"Tareas realizadas",export_timesheet:"Hoja de horas de exportación",hours:"horario",month:"Mes",time_spents:"Tiempo empleado (horas)",title:"Hojas horarias",year:"Año"},wrong_browser:{title:"Tu navegador no es compatible con Kitsu",text:"Kitsu sólo puede ser usado con navegadores Firefox y Chrome."}},k={assets:{cast_in:"Eingießen",delete_error:"Beim Löschen dieses Assets ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass dieser Anlagentyp keine Aufgabe hat, die mit ihm verbunden ist?",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",edit_fail:"Erstellung oder Ausgabe fehlgeschlagen, ein Fehler ist aufgetreten.",edit_success:"Anlage {name} erfolgreich bearbeitet.",edit_title:"Anlage bearbeiten",empty_list:"In der Produktion gibt es keine Anlage. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"Es gibt keine Anlage in dieser Produktion.",new_asset:"Hinzufügen einer Anlage",new_assets:"Assets hinzufügen",new_success:"Anlage {name} erfolgreich erstellt.",no_cast_in:"Dieser Gegenstand wird in keinem Schuss geworfen.",number:"Vermögenswerte",restore_text:"Sind Sie sicher, dass Sie {name} in Ihrer Datenbank wiederherstellen möchten?",restore_error:"Bei der Wiederherstellung dieses Assets ist ein Fehler aufgetreten.",tasks:"Asset-Aufgaben",title:"Vermögenswerte",fields:{description:"Beschreibung",episode:"Ep.",name:"Name",production:"Produkt",time_spent:"Zeit",type:"Typ"}},asset_types:{all_asset_types:"Alle asset typen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Anlagentyps ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass diese Anlageart keine Anlage mit ihr verbunden hat?",edit_title:"Anlagenart bearbeiten",new_asset_type:"Hinzufügen einer Anlagenart",number:"asset type | asset types",title:"Vermögensarten",production_title:"Vermögensarten Statistiken",fields:{name:"Name"}},breakdown:{all_assets:"Alle verfügbaren Vermögenswerte",empty:"Leerguss",title:"Aufschlüsselung"},comments:{add_comment:"Einen Kommentar hinzufügen.....",add_checklist:"Checkliste hinzufügen",add_preview:"Vorschau anhängen",comment_from_client:"Kommentar von die Kunde",change_preview:"Änderungsvorschau",empty_text:"Dieser Kommentar ist leer",edit_title:"Bearbeiten Sie, wie",error:"Beim Posten von Kommentaren ist ein Fehler aufgetreten.",no_file_attached:"Keine Datei angehängt",post_status:"Veröffentlichen Sie, wie",retake:"Wiederaufnahme",pin:"Pin",pinned:"Pinned",revision:"Überarbeitung",unpin:"Unbekannt",validated:"Validiert!",validation_required:"Validierung erforderlich",set_status_to:"Status auf setzen",fields:{text:"Text"}},custom_actions:{delete_text:"Sind Sie sicher, dass Sie benutzerdefinierte Aktionen {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser benutzerdefinierten Aktion ist ein Fehler aufgetreten.",edit_title:"Bearbeiten einer benutzerdefinierten Aktion",new_custom_action:"Hinzufügen einer benutzerdefinierten Aktion",number:"benutzerdefinierte Aktion | benutzerdefinierte Aktionen",run_for_selection:"Benutzerdefinierte Aktion für ausgewählte Aufgaben ausführen:",title:"Benutzerdefinierte Aktionen",fields:{name:"Name",url:"URL",entity_type:"Entitätstyp",is_ajax:"AJAX verwenden"},entity_types:{all:"Alle",shot:"Erschossen",asset:"Vermögen"}},episodes:{all_episodes:"Alle Episoden",delete_error:"Beim Löschen dieser Episode ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Bist du sicher, dass diese Episode keine Sequenz hat, die mit ihr verbunden ist?",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",edit_title:"Episode bearbeiten",empty_list:"Es gibt keine Episode in der Produktion. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"Es gibt keine Episode in dieser Produktion.",new_episode:"Neue Episode",number:"episode | episoden",title:"Episodenstatistiken",fields:{name:"Name",description:"Beschreibung"}},keyboard:{altdown:"Verschiebt die Auswahl einer Aufgabe nach unten",altleft:"Verschiebt die Auswahl einer Aufgabe nach links",altright:"Verschiebt die Auswahl einer Aufgabe nach rechts",altup:"Verschiebt die Auswahl einer Aufgabe nach oben",shortcuts:"Klavierklavier"},login:{forgot_password:"Passwort vergessen?",login:"Einloggen",login_failed:"Die Anmeldung ist fehlgeschlagen, bitte überprüfen Sie Ihre Zugangsdaten.",login_page:"Abbrechen",reset_change_password:"Passwort ändern",reset_change_password_form_failed:"Es gibt ein Problem mit dem von dir angegebenen Passwort. Bitte überprüfen Sie, ob es mindestens 7 Zeichen lang ist und ob beide Passwörter übereinstimmen.",reset_change_password_failed:"Die Änderung des Passworts ist fehlgeschlagen. Bitte starten Sie den gesamten Vorgang erneut.",reset_change_password_succeed:"Dein Passwort wurde erfolgreich geändert. Bitte gehen Sie zurück zur Login-Seite, um sie zu verwenden.",reset_change_password_title:"Geben Sie ein neues Passwort ein",reset_password:"Passwort zurücksetzen",reset_password_failed:"Passwort zurücksetzen fehlgeschlagen. Bitte überprüfen Sie Ihre E-Mail-Adresse.",reset_password_succeed:"Passwort zurücksetzen erfolgreich. Bitte überprüfen Sie Ihren Posteingang.",reset_password_title:"Gib deine E-Mail-Adresse ein, um dein Passwort zurückzusetzen.",title:"Einloggen bei Kitsu",fields:{email:"E-Mail",password:"Passwort",password2:"Passwort wiederholen"}},main:{about:"Über",add:"hinzufügen",all:"Alle",admin:"Admin",cancel:"Abbrechen",clear_selection:"Aktuelle Auswahl löschen",documentation:"Dokumentation",close:"Schließen",confirmation:"Bestätigen",confirmation_and_stay:"Bestätigen und bleiben",date:"Datum",dark_theme:"Dunkles Thema",days_spent:"Tag verbracht | Tage verbracht",delete:"Löschen",delete_all:"Alle löschen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",edit:"Bearbeiten",empty_comment:"Leerer Kommentar",end_date:"Enddatum",for:"Für",go_productions:"Zu den Produktionen",history:"Historie",info:"Informationen",or:"oder",no:"Nein",loading:"Laden...",loading_data:"Laden von Daten",loading_error:"Beim Laden von Daten ist ein Fehler aufgetreten.",logout:"Abmeldung",modify:"Modify",minimize:"Minimieren",maximize:"Maximieren",nb_frames:"frame | frames",profile:"Profil",production:"Produktion",remove:"Entfernen",save:"Speichern",start_date:"Startdatum",sort_by:"Sortierent",sorted_by:"Sortiert nach",studio:"Studio",user:"Benutzer",white_theme:"Weißes Thema",yes:"Ja",csv:{export_file:"Exportieren",error_upload:"Beim Hochladen Ihrer CSV-Datei ist ein Fehler aufgetreten.",import_file:"Importieren",import_title:"Daten aus einer CSV-Datei importieren",required_fields:"Ihre CSV-Datei benötigt die folgenden Spalten",select_file:"Bitte wählen Sie eine Datei aus einem Ihrer Ordner aus:"}},menu:{assign_tasks:"Aufgaben zuweisen",change_priority:"Priorität ändern",change_status:"Status ändern",create_tasks:"Aufgaben erstellen",delete_tasks:"Aufgaben löschen",run_custom_action:"Benutzerdefinierte Aktion ausführen",set_estimations:"Schätzungen festlegen"},news:{all:"Alle",commented_on:"kommentiert",infos:"Infos",no_news:"Es gibt keine Neuigkeiten für diese Produktion oder für diesen Filter.",only_comments:"Nur Kommentare",only_previews:"Nur Vorschauen",set_preview_on:"Vorschau einstellen auf",task_status:"Aufgabenstatus",task_type:"Aufgabentyp",title:"News Feed"},not_found:{text:"Mit dem Link, auf den du geklickt hast, war etwas nicht in Ordnung, wir empfehlen dir, auf der Homepage wieder vorbeizuschauen.",title:"Seite nicht gefunden.... suchen Sie nach etwas, das Sie gelöscht haben?"},notifications:{and_change_status:"und änderte den Status auf",assigned_you:"die Sie zugeordnet haben",commented_on:"kommentiert",mention_you_on:"hat dich erwähnt",no_notifications:"Für Ihre aktuellen Projekte gibt es derzeit keine Benachrichtigung für Sie.",title:"Benachrichtigungen",with_preview:"mit einer Vorschau"},people:{active:"Aktiv",add_member_to_team:"Füge ein Mitglied zum Team hinzu:",create_invite:"Einladung erstellen und versenden",delete_error:"Beim Löschen dieser Person ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass diese Person keine Zuordnung hat oder keinen Kommentar geschrieben hat?",delete_text:"Sind Sie sicher, dass Sie {personName} aus Ihrer Datenbank entfernen möchten?",edit_title:"Person bearbeiten",empty_team:"Im Projektteam ist niemand gelistet.",invite:"Einladung senden",invite_error:"Beim Senden der Einladung ist ein Fehler aufgetreten.",invite_success:"Einladung wurde erfolgreich versendet",new_person:"Einen neuen Mitarbeiter hinzufügen",no_task_assigned:"Es gibt keine laufenden Aufgaben, die Ihnen zugeordnet sind.",persons:"Person | Personen",running_tasks:"Laufende Aufgaben",select_person:"Eine Person auswählen.....",team:"Team",title:"Menschen",unactive:"Inaktiv",csv:{import_file:"Importieren einer.csv-Datei",export_file:"Als.csv-Datei herunterladen",import_title:"Daten aus einer CSV-Datei importieren",required_fields:"Ihre CSV-Datei benötigt die folgenden Spalten",select_file:"Bitte wählen Sie eine Datei aus einem Ihrer Ordner aus:",error_upload:"Beim Hochladen Ihrer CSV-Datei ist ein Fehler aufgetreten."},fields:{first_name:"Vorname",last_name:"Nachname",email:"E-Mail",phone:"Phone",role:"Rolle",old_password:"Aktuelles Passwort",password:"Neues Passwort",password_2:"Neues Passwort (wiederholen)",active:"Aktiv"},list:{name:"Name",email:"E-Mail",phone:"Phone",role:"Rolle",active:"Aktiv"},role:{admin:"Studio-Manager",client:"Client",manager:"Vorgesetzter",user:"CG Artist"}},playlists:{add_selection:"Auswahl hinzufügen",add_shots:"Shots hinzufügen",add_episode:"Ganze episode hinzufügen",add_movie:"Ganze film hinzufügen",add_sequence:"Ganze sequenz hinzufügen",apply_task_type_change:"Dadurch wird die letzte Revision für den gegebenen Aufgabentyp auf allen shots positioniert.",available_build:"Verfügbare Builds",build_daily:"Täglich ausstehend",build_weekly:"Alle ausstehend",build_mp4:"Build .mp4",client_playlist:"Kunde Playlist",created_at:"Erstellen Sie die:",create_title:"Playlist erstellen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser Playlist ist ein Fehler aufgetreten.",download_zip:"Download.zip",edit_title:"Wiedergabeliste bearbeiten",for_client:"Der Kunde",for_studio:"Das Studio",last_creation:"Neueste kreationen",last_modification:"Neueste änderungen",loading_error:"Es ist ein Serverfehler aufgetreten. Wiedergabelisten können nicht geladen werden.",new_playlist:"Eine Wiedergabeliste hinzufügen",no_build:"Kein Build",no_playlist:"Für dieses Projekt gibt es derzeit keine Playlist.",no_preview:"Keine Vorschau für diese Aufnahme",no_selection:"Bitte wählen Sie links eine Playlist aus.",no_sequence_for_episode:"Es gibt keine Sequenz für diese Episode.",no_shot_for_production:"Für diese Produktion gibt es keine Chance.",no_shot_for_sequence:"Es gibt keinen Schuss für diese Sequenz.",select_shot:"Bitte wählen Sie einen Schuss in der rechten Spalte aus.",select_playlist:"Bitte wählen Sie eine Playlist in der linken Spalte aus.",select_task_type:"Ändern Sie den Aufgabentyp für alle shots",title:"Wiedergabelisten",updated_at:"Geändert am",remove:"entfernen",fields:{name:"Name",for_client:"Zum teilen mit"}},productions:{current:"Ausgewählte Produktion",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser Produktion ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass diese Produktion keine Aufgabe, keinen Schuss oder Vermögenswert hat, der mit ihr verbunden ist? Kitsu erlaubt es nicht, die Produktion zu löschen. Wenn du die Produktion nicht mehr sehen willst, kannst du sie stattdessen schließen.",edit_title:"Produktion bearbeiten",new_production:"Eine Produktion hinzufügen",number:"Produktion | Produktionen",open_productions:"Meine Produktionen",picture:"Bild ändern",title:"Produktionen",home:{create_new:"Erstellen Sie eine neue Produktion",empty:"Du hast keine offene Produktion. Wie wäre es mit der Erstellung eines neuen?",no_task:"Du hast keine Aufgabe zugewiesen. Wenden Sie sich an Ihren Vorgesetzten, um zu sehen, was Sie tun können!",no_prod_for_client:"Du hast keinen Zugang zu einer Produktion. Wenden Sie sich an Ihren Auftragnehmer, um einen Zugang zu erhalten.",title:"Laufende Produktionen",welcome:"Willkommen bei Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Auflösung",status:"Status",type:"Typ"},metadata:{add_explaination:"Fügen Sie spezifische Daten hinzu, die für dieses Projekt erforderlich sind.",add_failed:"Beim Hinzufügen von Metadaten zu Ihrem Projekt ist ein Fehler aufgetreten.",add_new_values:"Es sind derzeit keine Werte verfügbar.",available_values:"Verfügbare Werte",choices:"Liste der Werte",delete_text:"Sind Sie sicher, dass Sie diese Spalte und die zugehörigen Daten für alle Anlagen dieser Produktion löschen möchten?",delete_error:"Beim Löschen dieser Metadatenspalte ist ein Fehler aufgetreten.",error:"Beim Hinzufügen der Metadatenspalte ist ein Fehler aufgetreten. Stellen Sie sicher, dass es keine Spalte mit ähnlichem Namen gibt und dass alle Felder ausgefüllt sind. Wenn das Problem weiterhin besteht, wenden Sie sich bitte an das Support-Team.",free:"Freier Wert",title:"Metadatenspalte hinzufügen"},status:{closed:"Geschlossen",open:"Offen",active:"Offen",archived:"Geschlossen"},type:{short:"Kurz",featurefilm:"Spielfilm",tvshow:"TV-Show"}},profile:{change_avatar:"Avatar ändern",info_title:"Informationen",language:"Sprache",notifications_enabled:"E-Mail-Benachrichtigungen aktiviert",notifications_slack_enabled:"Slack-Benachrichtigungen aktiviert",notifications_slack_user:"Slack-Benutzername",password_title:"Passwort ändern",timezone:"Zeitzone",title:"Dein Profil",avatar:{title:"Avatar ändern",error_upload:"Beim Hochladen des Bildes ist ein Fehler aufgetreten."},change_password:{button:"Passwort ändern",error:"Beim Ändern des Passworts ist ein Fehler aufgetreten. Bitte überprüfen Sie Ihr aktuelles Passwort.",success:"Dein Passwort wurde erfolgreich geändert!",unvalid:"Deine neue Passwort-Bestätigung stimmt nicht oder dein Passwort ist zu kurz (es werden mindestens 7 Zeichen erwartet)."},save:{button:"Änderungen speichern",error:"Beim Speichern von Änderungen ist ein Fehler aufgetreten."}},quota:{average:"Durchschnitt",count_label:"Zählmodus",detail_label:"Detaillierungsgrad",details_name:"Name",details_seconds:"Sekunden",details_frames:"Frames",month_label:"Monat",no_quota:"Für diese Art von Aufgaben gibt es keine Quote.",name:"Nom",quota_day:"Quote pro Tag",quota_week:"Quote pro Woche",quota_month:"Quote pro Monat",year_label:"Jahr",title:"Quoten",type_label:"Typ"},settings:{change_logo:"Logo ändern",integrations:"Integrationen",logo:"Logo-Studio",no_logo:"Es gibt kein Logo-Set.",set_logo:"Logo Studio-Set",title:"Einstellungen",fields:{name:"Studio-Name",hours_by_day:"Stunden am Tag",slack_token:"Slack Token (Optional)",use_original_name:"Original-Dateinamen für Downloads verwenden"},save:{button:"Einstellungen speichern",error:"Beim Speichern von Einstellungen ist ein Serverfehler aufgetreten."}},task_status:{delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Aufgabenstatus ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass dieser Aufgabenstatus keine Aufgabe zugeordnet hat?",edit_title:"Aufgabenstatus bearbeiten",number:"Aufgabenstatus | Aufgabenstatus",new_task_status:"Hinzufügen eines Aufgabenstatus",title:"Aufgabenstatus",fields:{is_artist_allowed:"Ist der Künstler erlaubt",is_client_allowed:"Ist der Kunde erlaubt",color:"Farbe",is_done:"Ist erledigt",is_reviewable:"Ist überprüfbar",is_retake:"Hat Wiederholungswert",name:"Name",short_name:"Kurzname"}},task_types:{delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Aufgabentyps ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Sind Sie sicher, dass dieser Aufgabentyp keine Aufgabe hat, die mit ihm verknüpft ist?",edit_title:"Aufgabentyp bearbeiten",new_task_type:"Hinzufügen eines Aufgabentyps",number:"Aufgabentyp | Aufgabentypen",title:"Aufgabentypen",fields:{dedicated_to:"Für",color:"Farbe",name:"Name",allow_timelog:"Zeiterfassung",priority:"Priorität"}},sequences:{all_sequences:"Alle Sequenzen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieser Sequenz ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Bist du sicher, dass diese Sequenz keinen Schuss damit zu tun hat?",edit_title:"Sequenz bearbeiten",empty_list:"Es gibt keine Reihenfolge in der Produktion. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"In dieser Produktion gibt es keine Reihenfolge.",new_sequence:"Neue Sequenz",number:"Sequenz | Sequenzen",title:"Sequenz-Statistiken",fields:{name:"Name",description:"Beschreibung"}},schedule:{title:"Zeitplan",title_main:"Hauptterminplan",overall_man_days:"Manntage",md:"md",zoom_level:"Zoomstufe",milestone:{add_milestone:"Meilenstein hinzufügen für",edit_milestone:"Meilenstein bearbeiten für",name:"Name",error:"Beim Hinzufügen oder Bearbeiten des Meilensteins ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut."}},shots:{casting:"Druckguss",creation_explaination:"Um Aufnahmen hinzuzufügen, musst du zuerst eine Episode und eine Sequenz erstellen. Geben Sie unten in der linken Spalte einen Episodennamen ein und klicken Sie dann auf Hinzufügen, um eine neue Episode zu erstellen. Wählen Sie diese Episode aus und wiederholen Sie den gleichen Vorgang für die Sequenz. Wählen Sie schließlich eine Sequenz aus und geben Sie einen Schussnamen in das Feld unten in der rechten Spalte ein. Klicken Sie auf die Schaltfläche Hinzufügen unten. Dein erster Schuss wurde erstellt. Du kannst jetzt viel mehr hinzufügen! Wenn es sich nicht um eine TV-Show handelt, müssen Sie direkt eine Sequenz erstellen.",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen möchten?",delete_error:"Beim Löschen dieses Schusses ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknüpft. Bist du sicher, dass diese Aufnahme keine Aufgabe hat?",edit_success:"Shot {name} erfolgreich bearbeitet.",edit_fail:"Erstellung oder Ausgabe fehlgeschlagen, ein Fehler ist aufgetreten. Achte darauf, dass du den Schuss nicht mit einem Namen umbenennst, der bereits für eine bestimmte Sequenz vergeben wurde.",edit_title:"Schuss bearbeiten",empty_list:"Es gibt keinen Schuss in der Produktion. Wie wäre es mit der Erstellung von solchen?",empty_list_client:"In dieser Produktion gibt es keine Aufnahme.",episodes:"Episoden",history:"Filmaufnahme werte historie",new_shot:"Einen Schuss hinzufügen",new_shots:"Schüsse hinzufügen",new_sequences:"Sequenzen hinzufügen",new_episodes:"Episoden hinzufügen",no_casting:"Der Schuss ist leer.",number:"Schuss | Schüsse",manage:"Schüsse erstellen",new_success:"Schuss {name} erfolgreich erstellt.",padding:"Schusspolsterung",restore_text:"Sind Sie sicher, dass Sie {name} in Ihrer Datenbank wiederherstellen möchten?",restore_error:"Bei der Wiederherstellung dieser Aufnahme ist ein Fehler aufgetreten.",sequences:"Sequenzen",tasks:"Schuss-Aufgaben",title:"Shots",fields:{description:"Beschreibung",nb_frames:"Rahmen",episode:"Episode",frame_in:"In",frame_out:"Aus",fps:"FPS",name:"Name",production:"Produkt",sequence:"Sequenz",time_spent:"Zeit"}},server_down:{text:"Bitte wenden Sie sich an Ihren Lieferantensupport, Ihren Systemadministrator oder Ihre IT-Abteilung, um zu erfahren, was schief läuft.",title:"Kitsu ist beim Erreichen seiner Daten-API auf einen Fehler gestoßen."},statistics:{count:"Zählt",count_mode:"Zählmodus",display_mode:"Anzeigemodus",frames:"Rahmen",pie:"Kreisdiagramme",shots:"Shots"},tasks:{add_preview:"Vorschau hinzufügen",add_preview_error:"Beim Hinzufügen einer Vorschau ist ein Fehler aufgetreten.",assign:"Weisen Sie eine Aufgabe zu: | Aufgaben zuweisen {nbSelectedTasks} Aufgaben zu:",back_to_list:"zurück zur Liste",bigger:"Erweitern Sie das Aufgabenfeld",change_status_to:"Ändern des Aufgabenstatus in:",change_preview:"Änderungsvorschau",change_priority:"Ändern Sie die Priorität auf:",clear_assignations:"klare Zuordnungen",create_for_selection:"Erstellen Sie eine Aufgabe für jede leere Zelle:",create_tasks:"Aufgaben hinzufügen",create_tasks_shot:"Aufgaben für aktuelle Aufnahmen hinzufügen",create_tasks_shot_explaination:"Du wirst eine neue Aufgabe für jeden Schuss der aktuellen Liste für den angegebenen Aufgabentyp erstellen. Willst du fortfahren?",create_tasks_shot_failed:"Beim Fortfahren der Erstellung ist ein Serverfehler aufgetreten.",create_tasks_asset:"Hinzufügen von Aufgaben für aktuelle Assets",create_tasks_asset_explaination:"Sie werden für jede Kühlstelle der aktuellen Liste für den angegebenen Aufgabentyp eine neue Aufgabe erstellen. Willst du fortfahren?",create_tasks_asset_failed:"Beim Fortfahren der Erstellung ist ein Serverfehler aufgetreten.",current:"Zu erledigende Aufgabe",current_status:"Aktueller Status :",delete_all_text:"Sind Sie sicher, dass Sie alle Aufgaben für bestimmte {name}} löschen möchten? Bitte bestätigen Sie dies, indem Sie den Namen des Aufgabentyps der zu löschenden Aufgaben in das Textfeld eingeben.",delete_all_error:"Das Löschen aller Aufgaben für einen bestimmten Aufgabentyp ist fehlgeschlagen.",delete_error:"Beim Löschen der Aufgabe ist ein Fehler aufgetreten.",delete_comment:"Sind Sie sicher, dass Sie den letzten Kommentar löschen möchten?",delete_comment_error:"Beim Löschen eines Kommentars ist ein Fehler aufgetreten.",delete_for_selection:"Löschen Sie ausgewählte Aufgaben:",delete_preview:"Sind Sie sicher, dass Sie diese Vorschau löschen möchten?",delete_preview_error:"Beim Löschen der Vorschau ist ein Fehler aufgetreten.",edit_comment:"Bearbeiten Sie, wie",done:"Erledigt",download_pdf_file:"Datei herunterladen .{extension} Datei",feedback:"Rückmeldung",full_screen:"Anzeige im Vollbildmodus",hide_assignations:"Zuordnungen ausblenden",hide_infos:"Zusätzliche Informationen ausblenden",my_tasks:"Meine Aufgaben",next:"nächste Aufgabe",no_assignation_right:"Sie dürfen keine Zuordnungen verwalten.",no_comment:"Zu dieser Aufgabe gibt es derzeit keinen Kommentar.",no_preview:"Für diese Aufgabe gibt es derzeit keine Vorschau.",no_task_selected:"Keine Aufgabe ausgewählt",number:"Aufgabe | Aufgaben",preview:"Vorschauen",previous:"vorherige Aufgabe",unsubscribe_notifications:"Abmeldung von Benachrichtigungen",set_estimations:"Setzt Schätzungen für ausgewählte Aufgaben:",set_preview:"Diese Vorschau als Miniaturansicht festlegen",set_preview_error:"Bei der Einstellung der Vorschau als Miniaturansicht ist ein Fehler aufgetreten.",set_preview_done:"Diese Vorschau wird als Miniaturansicht für das aktuelle Objekt verwendet.",select_preview_file:"Bitte wählen Sie ein Bild von Ihrer Festplatte aus, das Sie als Vorschau für die aktuelle Aufgabe verwenden möchten:",show_assignations:"Zuordnungen anzeigen",show_infos:"Zusätzliche Informationen anzeigen",subscribe_notifications:"Benachrichtigungen abonnieren",validation:"Validierung",tasks:"Aufgaben",with_comment:"Mit einem Kommentar...",fields:{asset_type:"Anlagenart",assignees:"Zessionare",end_date:"Enddatum",due_date:"Zwei Termine",duration:"Dauer",entity:"Entität",entity_name:"Name",estimation:"Schätzung",frames:"Fram.",last_comment:"Letzter Kommentar",last_comment_date:"Letzter Kommentar",priority:"Priorität",production:"Produkt",real_end_date:"Validierungsdatum",real_start_date:"WIP-Datum",retake_count:"Wiederholungen",sequence:"Sequenz",task_status:"Status",task_status_short_name:"Status",task_type:"Typ"},colors:{title:"Einfärbung",neutral:"Neutral",status:"Statusfarbe",late:"Spät in Rot"},priority:{emergency:"Notfall",normal:"Normal",high:"Hoch",very_high:"Sehr hoch"}},timesheets:{detail_level:"Detaillierungsgrad",done_tasks:"Erledigte Aufgaben",export_timesheet:"Zeiterfassung exportieren",hours:"Stunden",month:"Monat",time_spents:"Zeitaufwand (Stunden)",title:"Stundenzettel",year:"Jahr"},wrong_browser:{title:"Dein Browser wird von Kitsu nicht unterstützt.",text:"Kitsu kann nur mit Firefox und Chrome-Browsern verwendet werden."}},w={asset_types:{all_asset_types:"Tous les types d'assets",delete_error:"Une erreur est survenue en supprimant un type d'asset. Êtes vous sûr qu'aucun asset est lié à ce type d'asset?",delete_text:"Êtes vous sur de vouloir enlever {name} de la base de données ?",edit_title:"Modifier le type d'asset",new_asset_type:"Ajouter un type d'asset",number:"type d'asset | types d'assets",production_title:"Stats types d'assets",title:"Types d'assets",fields:{name:"Nom"}},assets:{cast_in:"Présent dans",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant l'asset, êtes vous sûr de vouloir que l'asset n'ait plus aucun lien ?",edit_fail:"La création ou l'édition a échoué, une erreur est survenue.",edit_title:"Modifier asset",edit_success:"Asset {name} édité avec succès.",empty_list:"Il n'y a pas d'assets dans la production. Voulez vous en créer ?",new_asset:"Ajouter un asset",new_assets:"Ajouter des assets",new_success:"Asset {name} créé avec succès.",no_cast_in:"Cet asset n'apparait dans aucun shot.",number:"asset | assets",restore_text:"Êtes vous sûr de vouloir restaurer {name} dans votre base de données ?",restore_error:"Une erreur est survenue en restaurant l'asset.",tasks:"Tâches de fabrication",title:"Assets",fields:{description:"Description",episode:"Ép.",name:"Nom",production:"Prod",time_spent:"Jours",type:"Type",hidden_from_client:"Visible par le client"}},breakdown:{all_assets:"Tous les assets disponibles",empty:"Casting vide",title:"Casting",edit_label:"Changer le label de l'asset",label:"Label",options:{fixed:"fixe",animate:"animé"}},comments:{add_checklist:"Ajout checklist",add_comment:"Ajouter un commentaire...",add_preview:"Attacher un fichier",comment_from_client:"Commentaire du client",edit_title:"Modifier le commentaire",empty_text:"Ce commentaire est vide",no_file_attached:"Aucun fichier attaché",pin:"Épingler",pinned:"Épinglé",post_status:"Publier",retake:"Reprise",revision:"révision",set_status_to:"Positionner le statut à",unpin:"Désépingler",validated:"Validé !",validation_required:"Validation requise",fields:{text:"Texte"}},custom_actions:{delete_text:"Êtes-vous sûr de supprimer l'action personnalisée {name} de la base de données?",delete_error:"Une erreur est survenue en supprimant l'action personnalisée.",edit_title:"Modifier une action personnalisée",new_custom_action:"Ajouter une action personnalisée",number:"action pesonnalisée | actions personnalisées",run_for_selection:"Lancer une action personnalisée pour les tâche sélectionnées :",title:"Actions",fields:{name:"Nom",url:"URL",entity_type:"Type d'entité",is_ajax:"Utiliser AJAX"},entity_types:{all:"Tous",shot:"Plan",asset:"Asset"}},entities:{thumbnails:{error:"Une erreur s'est produite en téléversant les vignettes",select_files:"Sélectionner les fichiers",selected_files:"Fichiers sélectionnés",select_task_type:"Sélectionner un type de tâche",title:"Ajouter des vignettes",upload:"Téléverser des vignettes"}},episodes:{all_episodes:"Tous les épisodes",edit_title:"Éditer épisode",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ? Tous les plans et préviz liés seront supprimés. Pour confirmer, tapez le nom de l'épisode en dessous",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas d'épisodes dans la production. Voulez vous en créer ?",new_episode:"Nouvel épisode",number:"épisode | épisodes",title:"Stats épisodes",fields:{name:"Nom",description:"Description"}},keyboard:{altdown:"Déplace la sélection d'une tâche vers le bas",altleft:"Déplace la sélection d'une tâche vers la gauche",altright:"Déplace la sélection d'une tâche vers la droite",altup:"Déplace la sélection d'une tâche vers le haut",shortcuts:"Raccourcis claviers"},login:{login:"Se connecter",login_failed:"La connexion a échoué, vérifiez vos identifiants",title:"Se connecter à Kitsu",fields:{email:"Adresse Mail",password:"Mot de passe"}},main:{about:"À propos",add:"Ajouter",all:"Tous",admin:"Admin",back_to_list:"retour à la liste",cancel:"Annuler",confirmation:"Confirmer",confirmation_and_stay:"Confirmer et rester",clear_selection:"Effacer la sélection",close:"Fermer",date:"Date",days_spent:"Jours passés",edit:"Modifier",dark_theme:"Thème sombre",days_spents:"Jours passés",delete:"Supprimer",delete_all:"Supprimer tout",documentation:"Documentation",delete_text:"Etes vous sûr de vouloir supprimer {name} de la base de données ?",empty_comment:"Commentaire vide",end_date:"Date de fin",go_productions:"Aller aux productions",history:"Historique",info:"Information",loading:"Chargement...",loading_data:"Chargement des données",loading_error:"Une erreur est survenue en chargeant les données.",logout:"Se déconnecter",maximize:"Maximiser",minimize:"Minimiser",nb_frames:"Nb de frames",no:"non",or:"ou",production:"Production",profile:"Profil",remove:"Enlever",studio:"Studio",user:"Utilisateur",save:"Enregistrer",sort_by:"Trier par",sorted_by:"Trié(e)s par",start_date:"Date de début",white_theme:"Thème blanc",yes:"oui",csv:{choose:"Choisir",unknown:"Colonne inconnue",error_upload:"Une erreur est survenue en téleversant votre fichier .csv.",export_file:"Exporter",import_file:"Importer",import_title:"Importer depuis un .csv",legend:"Légende",legend_ok:"Données reconnue",legend_ignored:"Données ignorée",legend_missing:"Données manquante",legend_disabled:"Données qui ne seront pas mises à jour",legend_overwrite:"Données qui seront mises à jour",paste:"Coller",paste_code:"Coller vos données CSV :",preview:"Aperçu",preview_episode_name:"Nom de l'épisode",preview_title:"Aperçu de vos données à importer",preview_description:"Importer un fichier .csv pour peupler votre board avec des posts. Vous pouvez aussi ajouter de nouvelles colonnes.",preview_required:"Note: La première ligne doit spécifier les entêtes.",preview_reupload:"Réimporter un fichier .CSV",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionner un fichier depuis votre dossier :",tab_select_file:"Importer un fichier CSV",tab_paste_code:"Coller des données CSV",upload_file:"Parcourir",options:{title:"Options",update:"Mettre à jour les données"}}},menu:{assign_tasks:"Assigner des tâches",create_tasks:"Créer des tâches",change_status:"Changer le statut",change_priority:"Change priority",delete_tasks:"Supprimer des tâches",run_custom_action:"Lancer des actions",set_estimations:"Définir estimations"},notifications:{and_change_status:"et changé le statut à",assigned_you:"vous a assigné à",commented_on:"a commenté",mention_you_on:"vous a mentionné sur",no_notifications:"Il n'y a pas encore de notifications pour vous pour les projets en cours",title:"Notifications",with_preview:"avec une version"},news:{all:"Tous",commented_on:"a commenté sur",infos:"Infos",no_news:"Il n'y a pas de nouveautés pour cette production ou ce filtre",only_comments:"Seulement les commentaires",only_previews:"Seulement les previews",set_preview_on:"a mis un preview sur",task_status:"Statut de tâche",task_type:"Type de tâche",title:"Flux de nouveautés "},playlists:{add_assets:"Ajouter des assets",add_selection:"Ajouter la sélection",add_shots:"Ajouter des plans",add_episode:"Ajouter l'épisode",add_movie:"Ajouter tout le film",add_sequence:"Ajouter séquence",apply_task_type_change:"Cela positionnera la dernière révision du type de tâche donné pour tous les plans.",available_build:"Builds disponibles",build_daily:"Valid. quotidienne",build_weekly:"Valid. hebodomadaire",build_mp4:"Construire .mp4 (beta)",client_playlist:"Playlist Client",created_at:"Créé le :",created_title:"Créer playlist",delete_text:"Êtes vous sûr de vouloir supprimer {name} de la base de données ?",delete_error:"Une erreur est survenue en supprimant la playlist.",download_zip:"Télécharger en .zip",edit_title:"Modifier la playlist",for_client:"Pour le client",for_studio:"Pour le studio",last_creation:"Dernière créations",last_modification:"Dernière modifications",no_preview:"Aucune préviz",remove:"enlever",loading_error:"Une erreur serveur est apparue, les playlists ne peuvent pas être chargées.",new_playlist:"Ajouter une playlist",no_build:"Pas de build",no_playlist:"Il n'y a pas de playlist pour ce projet.",no_selection:"Séléctionnez une playlist sur la gauche.",no_sequence_for_episode:"Il n'y a pas de séquence pour cette épisode",no_shot_for_production:"Il n'y pas de plan pour cette production",select_shot:"Sélectionnez un plan dans la colonne de droite",select_playlist:"Sélectionnez une playlist dans la colonne de gauche",select_task_type:"Changer le type de tâche pour tous les plans",title:"Playlists",updated_at:"Mis à jour le:",fields:{name:"Nom",for_client:"A partager avec",for_entity:"Sélectionne le type d'entité à afficher"},actions:{comments:"Montrer/Cacher les commentaires",annotation:"Annotation",annotation_delete:"Supprimer l'annotation",annotation_redo:"Refaire annotation",annotation_undo:"Annuler annotation",annotation_big:"Gros",annotation_medium:"Moyen",annotation_small:"Petit",change_task_type:"Changer le task type",delete:"Supprimer la playlist",download:"Télécharger…",edit:"Modifier la playlist",entity_list:"Montrer/Cacher la liste d'entités",fullscreen:"Plein écran",split_screen:"Partager l'écran",next_shot:"Prochain shot",previous_shot:"Shot précédent",next_frame:"Prochaine frame",previous_frame:"Frame précédente",play:"Lecture",pause:"Pause"}},people:{active:"Présents",add_member_to_team:"Ajouter un membre à l'équipe: ",create_invite:"Créer et envoyer une invitation",delete_text:"Êtes vous sûr de vouloir retirer {personName} de la base de données? Tous les commentaires et préviz liés seront supprimés. Pour confirmer, tapez le nom complet de la personne en dessous",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à elle. Etes vous sur que cette personne n'a aucune tâche assignée et n'a fait aucun commentaire ?",edit_title:"Modifier les informations de",empty_team:"Personne n'a été affecté à cette production.",episodes:"Épisodes",history:"Historique des valeurs de plans",no_task_assigned:"Il n'y a aucune tâche assignée.",new_person:"Ajouter un employé",padding:"Ecart",persons:"Personnes",picture:"Changer l'image",running_tasks:"Tâches en cours",select_person:"Sélectionner une personne...",team:"Équipe",title:"Employés",unactive:"Absents",csv:{export_file:"Télécharger",import_file:"Importer",import_title:"Import employees from a CSV file",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionnez un fichier de votre disque dur :"},list:{active:"Actif",email:"Adresse Mail",name:"Nom",phone:"Téléphone",role:"Rôle"},fields:{active:"Actif",email:"Adresse email",first_name:"Prénom",last_name:"Nom",old_password:"Mot de passe actuel",password:"Nouveau mot de passe",password_2:"Répétez le nouveau mot de passe",phone:"Téléphone",role:"Rôle"},role:{admin:"Studio Manager",manager:"Superviseur",user:"Graphiste",client:"Client"}},productions:{current:"Production sélectionnée ",delete_text:"Êtes vous sûr de vouloir retirer {name} de la base de données ? Veuiller indiquer le nom du projet dans le champ.",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à cette production. Etes vous sur que cette production n'a aucune tâche, shot ou asset lié ? Kitsu n'autorise pas la suppression de production. Si vous ne souhaitez plus la voir apparaitre, vous pouvez fermer la production.",edit_title:"Modifier la production",new_production:"Ajouter une production",number:"production | productions",open_productions:"Mes productions",picture:"Changer l'image",title:"Productions",home:{create_new:"Créer une nouvelle production",empty:"Vous n'avez pas de production ouverte, voulez vous en créer une nouvelle ?",no_task:"Vous n'avez pas de tâches assignées. Demandez à votre superviseur ce que vous pouvez faire !",title:"Productions en cours",welcome:"Bienvenue sur Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Ajouter des données spécifiques au projet.",add_failed:"Une erreur s'est produite en ajoutant des métadonnées au projet.",add_new_values:"Il n'y a pour le moment aucune valeur enregistrée.",available_values:"Valeurs disponibles",choices:"Liste de valeurs",delete_text:"Êtes vous sûr de vouloir supprimmer cette colonne et toutes les données liées?",delete_error:"Une erreur est survenue en supprimant la colone de métadonnées.",error:"Une erreur est survenue en ajoutant la colone de métadonnées. Assurez vous qu'aucune colonne ne porte le même nom et que les champs sont bien renseignés. Si le problème persiste, contactez le support.",free:"Valeur libre",title:"Ajouter une colonne de métadonnées"},status:{open:"Ouvert",closed:"Fermé"},type:{short:"Format court",featurefilm:"Long Métrage",tvshow:"Série télé"}},profile:{change_avatar:"Changer Avatar",info_title:"Informations",language:"Langue",notifications_enabled:"Notifications mail activées",notifications_slack_enabled:"Notifications Slack activées",notifications_slack_user:"Nom d'utilisateur Slack",password_title:"Changement de mot de passe",timezone:"Fuseau horaire",title:"Votre Profil",avatar:{title:"Changer votre avatar",error_upload:"Une erreur est survenue en envoyant l'image."},change_password:{button:"Changez de mot de passe",success:"Votre mot de passe a été changé avec succès !",unvalid:"Les nouveaux mots de passe sont différents ou votre mot de passe est trop court (7 caractères minimum).",error:"Une erreur s'est produite lors du changement de mot de passe. Veuillez vérifier votre mot de pass actuel."},save:{button:"Sauvegardez vos changements",error:"Une erreur est survenue pendant la sauvegarde de vos changememts."}},schedule:{md:"jh",overall_man_days:"Jours Homme",title:"Planning",title_main:"Planning principal",zoom_level:"Niveau de zoom",milestone:{add_milestone:"Ajouter milestone",delete_milestone:"Supprimer milestone",edit_milestone:"Modifier milestone",error:"Error",name:"Name"}},quota:{average:"Moyenne",count_label:"Mode de comptage",detail_label:"Niveau de détail",details_name:"Nom",details_seconds:"Secondes",details_frames:"Frames",month_label:"Mois",no_quota:"Il n'y a pas de quota pour ce type de tâche.",name:"Nom",quota_day:"Quota par jour",quota_week:"Quota par semaine",quota_month:"Quota par mois",year_label:"Année",title:"Quotas",type_label:"Type"},sequences:{all_sequences:"Toutes les séquences",title:"Stats séquences",number:"séquence | séquences",new_sequence:"Nouvelle séquence",edit_title:"Éditer séquence",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ? Tous les plans et préviz liés seront supprimés. Pour confirmer, tapez le nom de la séquence en dessous",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas de séquence dans la production. Voulez vous en créer ?",fields:{name:"Nom",description:"Description"}},settings:{change_logo:"Changer logo",integrations:"Intégrations",logo:"Logo du studio",no_logo:"Aucun logo n' a été positionné.",set_logo:"Changer le logo",title:"Paramètres",fields:{name:"Nom du studio",slack_token:"Token Slack (optionnel)",hours_by_day:"Heures par jour",use_original_name:"Utiliser les noms de fichiers originaux pour le téléchargement"},save:{button:"Sauvegarder les paramètres",error:"Une erreur serveur est survenue en sauvegardant les paramètres"}},server_down:{text:"Contactez votre fournisseur, votre administrateur système ou votre département informatique pour comprendre ce qui ne va pas.",title:"Kitsu a rencontré une erreur en communiquant avec son API de données."},shots:{casting:"Casting",creation_explaination:"Pour ajouter des shot, you devez d'abord créer un épisode. Taper le nom de l'épisode dans la colonne de gauche en bas. Séléctionnez cette épisode et répétez l'opération pour créer une séquence. Enfin créez un shot en sélectionnant la séquence créée, en tapant son nom en bas de la colonne de droite. Cliquez sur le bouton add pour ajouter le shot. Vous pouvez maintenant créer de nombreux shots. Si cette production n'est pas une série, vous pouvez directement créer une séquence).",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que le plan n'a plus aucun lien ?",description:"Description",edit_fail:"La création ou l'édition a échoué, une erreur est survenue. Assurez-vous qu'il n'y pas déjà un shot portant le nom que vous donnez pour la séqence choisie.",episodes:"Épisodes",edit_title:"Modifier plan",edit_success:"Plan {name} édité avec succès.",empty_list:"Il n'y a pas de plans dans la production. Voulez vous en créer ?",no_casting:"Le casting du plan est vide.",number:"plan | plans",new_episodes:"Ajouter des épisodes",new_sequences:"Ajouter des séquences",new_shot:"Ajouter un plan",new_shots:"Ajouter des plans",new_success:"Plan {name} créé avec succès.",manage:"Créer des plans",restore_error:"Une erreur est survenue en restorant le plan.",restore_text:"Etes vous sûr de vouloir restorer {name} dans la base de données ?",sequence:"Séquence",sequences:"Séquences",tasks:"Tâches de fabrication",padding:"Distance",title:"Plans",fields:{name:"Plan",episode:"Épisode",sequence:"Séquence",frame_in:"In",frame_out:"Out",fps:"FPS",nb_frames:"Frames",description:"Description",production:"Prod"}},statistics:{count:"Comptages",count_mode:"Mode de comptage",display_mode:" Mode d'affichage",frames:"Frames",pie:"Graphiques",shots:"Plans"},task_status:{delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du statut de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce statut de tâche ?",edit_title:"Modifier statut",number:"statut | statuts de tâche",new_task_status:"Ajouter un statut de tâche",title:"Statuts de tâche",fields:{color:"Couleur",is_artist_allowed:"Autorisé aux artistes",is_client_allowed:"Autorisé aux clents",is_done:"Est terminé",is_retake:"A valeur de retake",is_reviewable:"Est vérifiable",name:"Nom",short_name:"Nom court"}},task_types:{delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du type de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce type de tâche ?",edit_title:"Modifier le type de tâches",number:"type de tâche | types de tâches",new_task_type:"Ajouter un type de tâche",title:"Types de tâches",fields:{allow_timelog:"Temps passé",name:"Nom",color:"Couleur",priority:"Priorité",dedicated_to:"Pour"}},tasks:{add_preview:"Attacher une préviz",add_preview_error:"Une erreur est survenue en ajoutant la preview.",assign:"Assigner une tâche à : | Assigner {nbSelectedTasks} tâches à :",back_to_list:"Retour à la liste",bigger:"Élargir le panneau de tâche",change_status_to:"Changer le statut de la tâche à : ",change_priority:"Changer le priorité de la tâche à : ",change_preview:"Modifier preview",clear_assignations:"effacer les assignations",create_tasks:"Ajouter des tâches",create_tasks_shot:"Ajouter des tâches pour les plans affichés",create_tasks_shot_explaination:"Vous allez créer une nouvelle tâche pour chaque plan de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_shot_failed:"Une erreur serveur est survenue pendant la création des tâches.",create_tasks_asset:"Ajouter des tâches pour les assets affichés",create_tasks_asset_explaination:"Vous allez créer une nouvelle tâche pour chaque asset de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_asset_failed:"Une erreur serveur est survenue pendant la création des tâches.",create_for_selection:"Créer une tâche pour chaque cellule vide :",current:"Tâches à faire",current_status:"Statut actuel :",delete_all_error:"Supprimer toutes les tâches pour ce type de tâche a échoué",delete_comment:"Êtes vous sûr de vouloir supprimer ce commentaire ?",delete_comment_error:"Une erreur est survenue en supprimant le commentaire.",delete_error:"Une erreur est survenue en supprimant la tâche.",delete_for_selection:"Delete selected tasks:",delete_preview:"Êtes vous sûr de vouloir supprimer cette préviz ?",delete_preview_error:"Une erreur est survenue en supprimant la preview.",done:"Terminées",download_pdf_file:"Télécharger le fichier .{extension}",feedback:"retours",full_screen:"Afficher en plein écran",hide_assignations:"Cacher assignations",hide_infos:"Cacher informations additionnelles",my_tasks:"Mes tâches",no_preview:"Il n'y a pas de préviz pour cette tâche.",no_task_selected:"Pas de tâche sélectionnée",no_comment:"Il n'y a pas de commentaires pour cette tâche.",no_assignation_right:"vous n'êtes pas autorisé à gérer les assigations.",number:"tâche | tâches",next:"Suivante",preview:"Pré-visualisation",previous:"Précédente",select_preview_file:"Choisissez une preview sur votre disque dur:",set_estimations:"Donner une estimation pour les tâches sélectionnées :",set_preview:"Utilisez cette previz comme vignette",set_preview_error:"Une erreur est survenue en utilisant cette vignette.",set_preview_done:"Cette previz sert de vignette à l'entité courante.",subscribe_notifications:"S'abonner aux notifications",show_assignations:"Voir assignations",show_infos:"Montrer informations additionnelles",unsubscribe_notifications:"Se désabonner des notifications",tasks:"Tâches",with_comment:"Avec un commentaire...",validation:"Validation",fields:{asset_type:"Type d'asset",assignees:"Assignés",duration:"Duration",due_date:"Pour le",end_date:"Date de fin",estimation:"Estimation",entity:"Entité",entity_name:"Nom",frames:"Frames",last_comment_date:"Dernier comm.",priority:"Priorité",production:"Prod",real_end_date:"Date de valid.",real_start_date:"Date de début",retake_count:"Retakes",sequence:"Séquence",task_status:"Statut",last_comment:"Dernier commentaire",task_status_short_name:"Statut",task_type:"Type"},colors:{title:"Coloration",neutral:"Neutre",status:"Couleur des status",late:"En retard en rouge"},priority:{emergency:"Urgence",normal:"Normale",high:"Haute",very_high:"Très haute"}},timesheets:{detail_level:"Niveau de détail",done_tasks:"Tâches terminées",export_timesheet:"Exporter la feuille de temps",month:"Mois",hours:"heures",title:"Feuille de temps",time_spents:"Temps passé (heures)",year:"Année"},wrong_browser:{title:"Votre navigateur n'est pas pris en charges par Kitsu",text:"Kitsu ne peut être utilisé qu'avec les navigateurs Firefox et Chrome."}},S={assets:{cast_in:"角色分配",delete_error:"删除此资源时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此资源类型吗?",delete_text:"您确定要从您的数据库移除{name}吗?",edit_fail:"创建或编辑失败, 有错误出现.",edit_success:"已成功编辑资源{name}.",edit_title:"编辑资源",empty_list:"制作中没有资源. 要创建一些吗?",empty_list_client:"此制作中没有资源.",new_asset:"添加资源",new_assets:"添加多个资源",new_success:"已成功创建资源{name}.",no_cast_in:"任何镜头中都没为此资源分配角色.",number:"资源 | 资源(多个)",restore_text:"您确定要将{name}恢复进您的数据库吗?",restore_error:"恢复此资源时出现错误.",tasks:"资源任务(多个)",title:"资源(多个)",fields:{description:"说明",episode:"片段",name:"名称",production:"制作",type:"类型"}},asset_types:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此资源类型时出现错误. 很可能存在有链接至此的数据. 您确定没有资源链接至此资源类型吗?",edit_title:"编辑资源类型",new_asset_type:"添加资源类型",number:"资源类型 | 资源类型(多种)",title:"资源类型(多种)",fields:{name:"名称"}},breakdown:{all_assets:"所有可用资源",select_shot:"请从左侧选择一镜头来管理其角色分配.",selected_shot:"{sequence_name}中的多个资源 / {name}的角色分配",save_error:"保存支配表时出现错误.",title:"支配表"},comments:{add_comment:"添加注释...",add_preview:"附加预览",change_preview:"更换预览",empty_text:"此条注释为空",edit_title:"编辑注释",error:"发布注释时出现错误",no_file_attached:"未附加文件",post_status:"发布注释",retake:"重拍",validated:"已确认!",validation_required:"需要得到确认",set_status_to:"将状态设为",fields:{text:"文本"}},custom_actions:{delete_text:"您确定要从您的数据库移除自定义操作{name}吗?",delete_error:"删除此自定义操作时出现错误.",edit_title:"编辑自定义操作",new_custom_action:"添加自定义操作",number:"自定义操作 | 自定义操作(多个)",run_for_selection:"为所选的多个任务执行自定义操作:",title:"自定义操作(多个)",fields:{name:"名称",url:"URL",entity_type:"实体类型"},entity_types:{all:"所有",shot:"镜头",asset:"资源"}},episodes:{delete_error:"删除此片段时出现错误. 很可能存在有链接至此的数据. 您确定没有序列链接至此片段吗?",delete_text:"您确定要从您的数据库移除{name}吗?",edit_title:"编辑片段",empty_list:"制作中没有片段. 要创建一些吗?",empty_list_client:"此制作中没有片段.",new_episode:"新建片段",number:"片段 | 片段(多个)",title:"片段(多个)",fields:{name:"名称",description:"说明"}},login:{forgot_password:"密码忘记了?",login:"登录",login_failed:"登录失败, 请核实您的凭据",login_page:"取消",reset_change_password:"更改密码",reset_change_password_form_failed:"您给出的密码有问题. 请核实密码长度大于6个字符且两次密码一致.",reset_change_password_failed:"更改密码失败. 请再次重启整个步骤.",reset_change_password_succeed:"您的密码已成功更改. 请返回到登录页面来使用它.",reset_change_password_title:"输入新密码",reset_password:"重置密码",reset_password_failed:"重置密码失败. 请核实您的电子邮箱.",reset_password_succeed:"已成功重置密码. 请查看您的收件箱.",reset_password_title:"进入您的电子邮件来重置密码",title:"登录Kitsu",fields:{email:"电子邮箱",password:"密码",password2:"再次输入密码"}},main:{add:"添加",all:"全部",admin:"管理员",cancel:"取消",clear_selection:"清除当前所选",documentation:"文档",close:"关闭",confirmation:"确认",confirmation_and_stay:"做确认, 之后不离开",dark_theme:"黑色主题",delete:"删除",delete_all:"全部删除",delete_text:"您确定要从您的数据库移除{name}吗?",edit:"编辑",empty_comment:"空注释",history:"历史",info:"信息",or:"或",no:"否",loading_data:"正在加载数据",loading_error:"加载数据时出现错误.",logout:"退出",modify:"修改",minimize:"最小化",maximize:"最大化",profile:"简介",production:"制作",remove:"移除",save:"保存",studio:"工作室",user:"用户",white_theme:"白色主题",yes:"是",csv:{export_file:"导出",error_upload:"上传您的CSV文件时出现错误.",import_file:"导入",import_title:"从CSV文件导入数据",required_fields:"您的CSV文件需要有如下列项",select_file:"请从您的某个文件夹选择文件:"}},menu:{assign_tasks:"分配多个任务",change_priority:"更改优先级",change_status:"更改状态",create_tasks:"创建多个任务",delete_tasks:"删除多个任务",run_custom_action:"执行自定义操作"},not_found:{text:"您点击的链接有问题, 我们提倡您返回主页.",title:"页面未找到..., 您要找一下自己已删除的内容吗?"},notifications:{and_change_status:", 也已经将状态更改为了",commented_on:"已给出针对性注释, 注释对象为",no_notifications:"目前没有关于您当前项目的通知.",title:"通知(多个)",with_preview:"带有预览"},people:{active:"活动",add_member_to_team:"向团队添加成员: ",delete_error:"删除此人员时出现错误. 很可能存在有链接至此的数据. 您确定此人员没有分配任务或是没写注释吗?",delete_text:"您确定要从您的数据库移除{personName}吗?",edit_title:"编辑人员",empty_team:"项目团队里没有所列人员.",new_person:"添加新员工",no_task_assigned:"在执行任务未进行分配.",persons:"人员 | 人员(多名)",running_tasks:"在执行任务",select_person:"选择人员...",team:"团队",title:"人员(多名)",unactive:"非活动",csv:{import_file:"导入.csv文件",export_file:"下载为.csv文件",import_title:"从CSV文件导入数据",required_fields:"您的CSV文件需要有如下列项",select_file:"请从您的某个文件夹选择文件:",error_upload:"上传您的CSV文件时出现错误."},fields:{first_name:"名称",last_name:"姓氏",email:"电子邮箱",phone:"电话",role:"职责",old_password:"当前密码",password:"新密码",password_2:"新密码(重复)",active:"活动"},list:{name:"名称",email:"电子邮箱",phone:"电话",role:"职责",active:"活动"},role:{admin:"工作室经理",client:"客户",manager:"监制",user:"CG艺术家"}},playlists:{add_shots:"选择多个镜头",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此播放列表时出现错误.",edit_title:"编辑播放列表",loading_error:"出现服务器错误. 多个播放列表无法被加载.",new_playlist:"添加播放列表",no_playlist:"此项目当前没有播放列表.",no_selection:"请从左侧选择播放列表.",no_sequence_for_episode:"此片段没有序列",no_shot_for_production:"此制作没有镜头",no_shot_for_sequence:"此序列没有镜头",select_shot:"请从右列中选择镜头",select_playlist:"请从左列中选择播放列表",title:"播放列表(多个)",remove:"移除",fields:{name:"名称"}},productions:{current:"所选制作",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此制作时出现错误. 很可能存在有链接至此的数据. 您确定没有任务, 镜头或资源链接至此制作吗?",edit_title:"编辑制作",new_production:"添加制作",number:"制作 | 制作(多个)",open_productions:"我的制作",picture:"更换图片",title:"制作(多个)",home:{create_new:"创建新制作",empty:"您什么制作也没开启. 要创建一个新的吗?",no_task:"还没有任务分配给您. 您可以到监制那儿了解一下自己能做些什么!",no_prod_for_client:"您无权访问任何制作. 请联系您的承包商获取访问权限.",title:"执行多个制作",welcome:"欢迎使用Kitsu"},fields:{fps:"FPS",name:"名称",ratio:"宽高比",resolution:"分辨率",status:"状态",type:"类型"},metadata:{add_explaination:"添加此项目需要的特定数据.",add_failed:"向您的项目添加元数据时出现错误.",add_new_values:"当前没有可用值.",available_values:"可用值",choices:"值列表",delete_text:"您确定要删除此列以及此制作的所有资源方面的相关数据吗?",delete_error:"删除此元数据列时出现错误.",error:"添加元数据列时出现错误. 要确保没有相似名称的列, 还要确保填充了所有字段. 如果问题仍然存在, 还请联系我们的支持团队.",free:"空闲值",title:"添加元数据列"},status:{closed:"已关闭",open:"开启",active:"开启",archived:"已关闭"},type:{short:"短片",featurefilm:"故事片",tvshow:"电视节目"}},profile:{info_title:"信息",language:"语种",password_title:"更改密码",timezone:"时区",title:"您的简介",change_avatar:"更换头像",avatar:{title:"更换头像"},change_password:{button:"更改密码",error:"更改密码时出现错误. 请核实您当前的密码.",success:"您的密码已成功更改!",unvalid:"您的确认密码与新密码不相符或您的密码长度太短(预期至少是7个字符)."},save:{button:"保存更改",error:"保存更改时出现错误"}},task_status:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此任务状态时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务状态吗?",edit_title:"编辑任务状态",number:"任务状态 | 任务状态(多种)",new_task_status:"添加任务状态",title:"任务状态(多种)",fields:{color:"颜色",is_done:"已完成",is_reviewable:"可回顾",is_artist_allowed:"得到了艺术家的获准",name:"名称",short_name:"短名称"}},task_types:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此任务类型时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务类型吗?",edit_title:"编辑任务类型",new_task_type:"添加任务类型",number:"任务类型 | 任务类型(多种)",title:"任务类型(多种)",fields:{dedicated_to:"专用于",color:"颜色",name:"名称",allow_timelog:"时间日志",priority:"优先级"}},sequences:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此序列时出现错误. 很可能存在有链接至此的数据. 您确定没有镜头链接至此序列吗?",edit_title:"编辑序列",empty_list:"制作中没有序列. 要创建一些吗?",empty_list_client:"此制作中没有序列.",new_sequence:"新建序列",number:"序列 | 序列(多个)",title:"序列(多个)",fields:{name:"名称",description:"说明"}},shots:{casting:"镜头的角色分配",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此镜头时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此镜头吗?",edit_success:"已成功编辑镜头{name}.",edit_fail:"创建或编辑失败, 有错误出现. 要确保您没要重命名其名称已为给定序列列出的镜头.",edit_title:"编辑镜头",empty_list:"制作中没有镜头. 要创建一些吗?",empty_list_client:"此制作中没有镜头.",new_shot:"添加镜头",new_shots:"添加多个镜头",new_sequences:"添加多个序列",new_episodes:"添加多个片段",no_casting:"镜头的角色分配为空.",number:"镜头 | 镜头(多个)",manage:"创建多个镜头",new_success:"已成功创建镜头{name}.",restore_text:"您确定要将{name}恢复进您的数据库吗?",restore_error:"恢复此镜头时出现错误.",tasks:"镜头任务(多个)",title:"镜头(多个)",fields:{description:"说明",episode:"片段",frame_in:"入镜",frame_out:"出镜",fps:"FPS",name:"镜头",production:"制作",sequence:"序列"}},server_down:{text:"请联系您的供应商支持, 您的系统管理员或您的IT部门来搞清楚出什么问题了.",title:"Kitsu在访问其数据API时出现错误."},tasks:{add_preview:"添加预览",add_preview_error:"添加预览时出现错误.",assign:"将单个任务分配给: | 将{nbSelectedTasks}个任务分配给:",back_to_list:"返回列表",change_status_to:"将任务状态改为:",change_preview:"更换预览",change_priority:"将优先级改为:",clear_assignations:"清除多个任务分配",create_for_selection:"为每个空单元格都创建任务:",create_tasks:"添加多个任务",create_tasks_shot:"为当前的多个镜头添加多个任务",create_tasks_shot_explaination:"您将要为当前列表的每个镜头都创建给定任务类型的新任务. 要继续吗?",create_tasks_shot_failed:"继续进行多个创建时出现服务器错误.",create_tasks_asset:"为当前的多个资源添加多个任务",create_tasks_asset_explaination:"您将要为当前列表的每个资源都创建给定任务类型的新任务. 要继续吗?",create_tasks_asset_failed:"继续进行多个创建时出现服务器错误.",current:"待执行任务",current_status:"当前状态:",delete_all_text:"您确定要删除所有给定{name}的任务吗? 请通过在文本字段输入您想要删除的那些任务的任务类型名称来确认.",delete_all_error:"删除所有给定任务类型的任务失败.",delete_error:"删除任务时出现错误.",delete_comment:"您确定要删除最新注释吗?",delete_comment_error:"删除注释时出现错误",delete_for_selection:"删除所选的多个任务:",delete_preview:"您确定要删除此预览吗?",delete_preview_error:"删除预览时出现错误.",edit_comment:"编辑注释",done:"已完成",download_pdf_file:"下载.{extension}文件",feedback:"反馈",full_screen:"全屏显示",hide_assignations:"隐藏多个任务分配",my_tasks:"我的任务(多个)",next:"下一个任务",no_assignation_right:"不允许您管理多个任务分配",no_comment:"此任务当前没有注释.",no_preview:"此任务当前没有预览.",preview:"预览(多个)",previous:"上一个任务",unsubscribe_notifications:"通过通知取消订阅",set_preview:"将此预览设置为缩略图",set_preview_error:"将预览设置为缩略图时出现错误",set_preview_done:"此预览被用作当前实体的缩略图.",select_preview_file:"请从您的硬盘选择一张要被用作当前任务的预览的图片:",show_assignations:"显示多个任务分配",subscribe_notifications:"订阅通知",validation:"确认",tasks:"任务(多个)",fields:{assignees:"被分配任务人员(多名)",end_date:"结束日期",entity:"实体",last_comment:"最新注释",production:"制作",task_status:"状态",task_type:"类型"},priority:{emergency:"紧急",normal:"正常",high:"高",very_high:"非常高"}},timesheets:{detail_level:"细节层次",done_tasks:"已完成任务",hours:"小时",month:"月",time_spents:"已用时长(小时)",title:"时间表(多个)",year:"年"}},O={de:k,en:y,es:g,zh:S,fr:w};i.a.use(v["a"]);var C=new v["a"]({locale:"en",fallbackLocale:"en",messages:O}),T=C,P=s("8c4f"),E=(s("d3b7"),s("337f")),j=s.n(E),x=s("48c6"),D=s("7f45"),A=s.n(D),M=s("4360"),L={setLocale:function(){var e=M["a"].state.user.user.locale;T.locale=e.substring(0,2),"zh_Hans_CN"===e?A.a.locale("zh_CN"):A.a.locale(e.substring(0,2))}},I=L,$={setTimezone:function(){var e=M["a"].state.user.user.timezone||A.a.tz.guess();A.a.tz.setDefault(e)}},q=s("9fb0"),F=function(e){M["a"].commit(q["Y"]),M["a"].dispatch("loadContext").then((function(){M["a"].commit(q["X"]),e()})).catch((function(e){console.error("An init operation failed: ",e)}))},N=F,R=s("0f9a"),B=s("ef8b"),z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page asset"},[s("div",{staticClass:"page-header flexrow"},[s("router-link",{staticClass:"flexrow-item has-text-centered back-link",attrs:{to:e.assetsPath}},[s("chevron-left-icon")],1),e.currentAsset?s("entity-thumbnail",{staticClass:"asset-thumbnail flexrow-item",attrs:{entity:e.currentAsset,"with-link":!1}}):e._e(),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:e.title}})],1),s("div",{staticClass:"flexrow-item"},[s("button-simple",{attrs:{icon:"edit"},on:{click:function(t){e.modals.edit=!0}}})],1)],1),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:e.$t("assets.tasks")}}),s("entity-task-list",{staticClass:"task-list",attrs:{entries:e.currentAsset?e.currentAsset.tasks:[],"is-loading":!e.currentAsset,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:e.$t("main.info")}}),s("div",{staticClass:"table-body"},[e.currentAsset?s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("assets.fields.description")))]),s("description-cell",{attrs:{entry:e.currentAsset,full:!0}})],1),e._l(e.assetMetadataDescriptors,(function(t){return s("tr",{key:t.id},[s("td",{staticClass:"field-label"},[e._v(e._s(t.name))]),s("td",[e._v(" "+e._s(e.currentAsset.data?e.currentAsset.data[t.field_name]:"")+" ")])])}))],2)]):e._e()])],1)]),s("div",{staticClass:"asset-casted-in"},[s("page-subtitle",{attrs:{text:e.$t("assets.cast_in")}}),e.currentAsset?s("div",[e.currentAsset.castInShotsBySequence&&e.currentAsset.castInShotsBySequence[0].length>0?s("div",e._l(e.currentAsset.castInShotsBySequence,(function(t){return s("div",{key:t.length>0?t[0].sequence_name:"",staticClass:"sequence-shots"},[s("div",{staticClass:"shot-sequence"},[e._v(" "+e._s(t.length>0?t[0].sequence_name:"")+" ")]),s("div",{staticClass:"shot-list"},e._l(t,(function(t){return s("router-link",{key:t.shot_id,staticClass:"shot-link",attrs:{to:{name:"shot",params:{production_id:e.currentProduction.id,shot_id:t.shot_id}}}},[s("entity-thumbnail",{attrs:{entity:t,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[e._v(e._s(t.shot_name))]),t.nb_occurences>1?s("span",[e._v(" ("+e._s(t.nb_occurences)+") ")]):e._e()])],1)})),1)])})),0):s("div",[e._v(" "+e._s(e.$t("assets.no_cast_in"))+" ")])]):s("table-info",{attrs:{"is-loading":e.castIn.isLoadin,"is-error":e.castIn.isError}})],1),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"asset-to-edit":e.currentAsset},on:{cancel:function(t){e.modals.edit=!1},confirm:e.confirmEditAsset}})],1)},V=[],U=(s("b0c0"),s("0a35")),H=s("de40"),Y=s("0fcb"),W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.assetToEdit&&this.assetToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("assets.edit_title"))+" "+e._s(e.assetToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("assets.new_asset"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("assets.fields.type"),options:e.getAssetTypeOptions},model:{value:e.form.entity_type_id,callback:function(t){e.$set(e.form,"entity_type_id",t)},expression:"form.entity_type_id"}}),e.isTVShow?s("combobox",{attrs:{label:e.$t("assets.fields.episode"),options:e.episodeOptions},model:{value:e.form.source_id,callback:function(t){e.$set(e.form,"source_id",t)},expression:"form.source_id"}}):e._e(),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"descriptionField",attrs:{label:e.$t("assets.fields.description")},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._l(e.assetMetadataDescriptors,(function(t){return s("div",{key:t.id},[t.choices.length>0?s("combobox",{attrs:{label:t.name,options:e.getDescriptorChoicesOptions(t)},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:t.name},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)}))],2),s("div",{staticClass:"has-text-right"},[e.assetToEdit&&e.assetToEdit.id?e._e():s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoadingStay},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:e.confirmAndStayClicked}},[e._v(" "+e._s(e.$t("main.confirmation_and_stay"))+" ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:e.confirmClicked}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),e.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v(" "+e._s(e.$t("main.close"))+" ")]):s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.close"))+" ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("assets.edit_fail"))+" ")]):e._e(),s("p",{staticClass:"success has-text-right info-message"},[e._v(" "+e._s(e.assetSuccessText)+" ")])],1)])])])},G=[],K=(s("e01a"),s("99af"),s("d81d"),s("2909")),Q=s("d065"),J=s("7bf8"),X=s("1149"),Z=s("992f");function ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function te(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ee(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var se={name:"edit-asset-modal",mixins:[Q["a"]],components:{TextField:J["a"],TextareaField:X["a"],Combobox:Z["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","assetToEdit","errorText"],data:function(){return{form:{name:"",description:"",source_id:null,data:{}},assetSuccessText:""}},computed:te({},Object(l["c"])(["assets","assetCreated","assetMetadataDescriptors","assetTypes","currentProduction","currentEpisode","episodes","getAssetTypeOptions","getOpenProductionOptions","isTVShow","openProductions"]),{episodeOptions:function(){var e=this.episodes.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:this.$t("main.all"),value:"null"}),e}}),mounted:function(){this.resetForm(),this.assetSuccessText=""},methods:te({},Object(l["b"])([]),{runConfirmation:function(){this.form.name.length>0&&(this.isEditing()?this.confirmClicked():this.confirmAndStayClicked())},focusName:function(){this.$refs.nameField.focus()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.assetToEdit&&this.assetToEdit.id},getDescriptorChoicesOptions:function(e){var t=e.choices.map((function(e){return{label:e,value:e}}));return[{label:"",value:""}].concat(Object(K["a"])(t))},resetForm:function(){this.isEditing()?this.form={entity_type_id:this.assetToEdit.asset_type_id,project_id:this.assetToEdit.project_id,name:this.assetToEdit.name,description:this.assetToEdit.description,source_id:this.assetToEdit.source_id||this.assetToEdit.episode_id,data:te({},this.assetToEdit.data)||{}}:(!this.form.entity_type_id&&this.assetTypes.length>0&&(this.form.entity_type_id=this.assetTypes[0].id),this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.form.name="",this.form.description="",this.form.source_id=this.currentEpisode?this.currentEpisode.id:null,this.form.data={})}}),watch:{assetToEdit:function(){this.resetForm()},assetCreated:function(){this.isEditing()?this.assetSuccessText=this.$t("assets.edit_success",{name:this.assetCreated}):this.assetSuccessText=this.$t("assets.new_success",{name:this.assetCreated})},active:function(){var e=this;this.assetSuccessText="",this.resetForm(),this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)}}},ne=se,ie=(s("6571"),Object(m["a"])(ne,W,G,!1,null,"1f777d9f",null)),ae=ie.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"type"},[e._v(" "+e._s(e.$t("tasks.fields.task_type"))+" ")]),s("th",{staticClass:"status"},[e._v(" "+e._s(e.$t("tasks.fields.task_status"))+" ")]),s("th",{staticClass:"assignees"},[e._v(" "+e._s(e.$t("tasks.fields.assignees"))+" ")]),s("th",{staticClass:"end-cell"})])])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.entries,(function(t){return s("tr",{key:t.task_type_id},[e.getTaskType(t)?s("task-type-name",{staticClass:"type",attrs:{entry:e.getTaskType(t),"production-id":e.currentProduction.id}}):e._e(),s("td",{staticClass:"status"},[e.getTask(t)?s("validation-tag",{attrs:{task:e.getTask(t)}}):e._e()],1),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},e._l(e.getAssignees(t),(function(n){return s("div",{key:n,staticClass:"avatar-wrapper"},[s("people-avatar",{key:t.id+"-"+n,staticClass:"person-avatar flexrow-item",attrs:{person:e.personMap[n],size:30,"font-size":15}})],1)})),0)]),s("td",{staticClass:"end-cell"})],1)})),0)])]):e._e()],1)},re=[],ce=s("58f5"),le=s("e60b"),de=s("fe13"),ue=s("eb8c");function pe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function he(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var fe={name:"todos-list",components:{TableInfo:le["a"],TaskTypeName:ce["a"],PeopleAvatar:ue["a"],ValidationTag:de["a"]},props:{entries:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:he({},Object(l["c"])(["currentProduction","personMap","taskMap","taskTypeMap"])),methods:he({},Object(l["b"])([]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px")},getTask:function(e){return"string"===typeof e?this.taskMap[e]:e},getTaskType:function(e){var t=this.getTask(e);return t?this.taskTypeMap[t.task_type_id]:null},getAssignees:function(e){var t=this.getTask(e);return t?t.assignees:[]}})},me=fe,be=(s("95de"),Object(m["a"])(me,oe,re,!1,null,"f3bf6096",null)),_e=be.exports,ve=s("bb21"),ye=s("8d07"),ge=s("8751");function ke(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function we(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ke(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Se={name:"asset",components:{ButtonSimple:H["a"],ChevronLeftIcon:U["f"],DescriptionCell:Y["a"],EditAssetModal:ae,EntityThumbnail:ve["a"],EntityTaskList:_e,PageSubtitle:ge["a"],PageTitle:ye["a"],TableInfo:le["a"]},data:function(){return{currentAsset:null,castIn:{isLoading:!1,isError:!1},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},created:function(){var e=this;if(this.currentProduction){var t={productionId:this.currentProduction.id};this.currentEpisode&&(t.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",t)}else this.setProduction(this.$route.params.production_id);this.clearSelectedTasks(),this.currentAsset=this.getCurrentAsset(),this.castIn.isLoading=!0,this.castIn.isError=!1,this.currentAsset?this.loadAssetCastIn(this.currentAsset).then((function(){e.castIn.isLoading=!1})).catch((function(t){e.castIn.isError=!0,console.error(t)})):this.loadAsset(this.route.params.asset_id).then((function(){return e.currentAsset=e.getCurrentAsset(),e.loadAssetCastIn(e.currentAsset)})).then((function(){e.castIn.isLoading=!1})).catch((function(t){e.castIn.isError=!0,console.error(t)}))},computed:we({},Object(l["c"])(["assetMap","assetMetadataDescriptors","assetsPath","currentProduction","route"]),{title:function(){return this.currentAsset?"".concat(this.currentAsset.asset_type_name," / ")+"".concat(this.currentAsset.name):"Loading..."},assetThumbnailPath:function(){var e=this.currentAsset.preview_file_id;return"/api/pictures/originals/preview-files/".concat(e,".png")},isPreview:function(){return this.currentAsset&&this.currentAsset.preview_file_id&&this.currentAsset.preview_file_id.length>0}}),methods:we({},Object(l["b"])(["editAsset","loadAsset","loadAssetCastIn","clearSelectedTasks"]),{changeTab:function(e){this.selectedTab=e},getCurrentAsset:function(){return this.assetMap[this.route.params.asset_id]||null},onEditClicked:function(){this.modals.edit=!0},confirmEditAsset:function(e){var t=this;e.id=this.currentAsset.id,this.loading.edit=!0,this.errors.edit=!1,this.editAsset({data:e,callback:function(e){e?(t.loading.edit=!1,t.errors.edit=!0):(t.loading.edit=!1,t.modals.edit=!1)}})}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Oe=Se,Ce=(s("3c7c"),Object(m["a"])(Oe,z,V,!1,null,"e1ede192",null)),Te=Ce.exports,Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"assets page"},[s("div",{staticClass:"asset-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("search-field",{ref:"asset-search-field",attrs:{"can-save":!0,placeholder:"ex: props modeling=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}})],1)]),s("div",{staticClass:"level-right flexrow"},[e.isCurrentUserClient?e._e():s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.thumbnails.title"),icon:"image"},on:{click:e.showAddThumbnailsModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("main.csv.import_file"),icon:"upload"},on:{click:e.showImportModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}}),s("button-link",{staticClass:"flexrow-item",attrs:{text:e.$t("assets.new_asset"),icon:"plus",path:e.newAssetPath}})],1):e._e()])]),s("div",{staticClass:"query-list"},[e.isAssetsLoading||e.initialLoading?e._e():s("search-query-list",{attrs:{queries:e.assetSearchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1)]),s("sorting-info",{attrs:{label:e.$t("main.sorted_by"),sorting:e.assetSorting},on:{"clear-sorting":function(t){return e.onChangeSortClicked(null)}}}),s("asset-list",{ref:"asset-list",attrs:{"displayed-assets":e.displayedAssetsByType,"is-loading":e.isAssetsLoading||e.initialLoading,"is-error":e.isAssetsLoadingError,"validation-columns":e.assetValidationColumns},on:{"add-metadata":e.onAddMetadataClicked,"change-sort":e.onChangeSortClicked,"create-tasks":e.showCreateTasksModal,"delete-all-tasks":e.onDeleteAllTasksClicked,"delete-metadata":e.onDeleteMetadataClicked,"edit-metadata":e.onEditMetadataClicked,scroll:e.saveScrollPosition}})],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e(),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-loading-stay":e.loading.stay,"is-error":e.editAsset.isCreateError,"is-success":e.editAsset.isSuccess,"cancel-route":e.assetsPath,"asset-to-edit":e.assetToEdit},on:{confirm:e.confirmEditAsset,confirmAndStay:e.confirmNewAssetStay}}),s("delete-modal",{ref:"delete-asset-modal",attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.deleteAsset.isLoading,"is-error":e.deleteAsset.isError,"cancel-route":e.assetsPath,text:e.deleteText(),"error-text":e.$t("assets.delete_error")},on:{confirm:e.confirmDeleteAsset}}),s("delete-modal",{ref:"restore-asset-modal",attrs:{active:e.modals.isRestoreDisplayed,"is-loading":e.restoreAsset.isLoading,"is-error":e.restoreAsset.isDeleteError,"cancel-route":e.assetsPath,text:e.restoreText(),"error-text":e.$t("assets.restore_error")},on:{confirm:e.confirmRestoreAsset}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:e.modals.isDeleteAllTasksDisplayed,"is-loading":e.loading.deleteAllTasks,"is-error":e.errors.deleteAllTasks,"cancel-route":e.assetsPath,text:e.deleteAllTasksText(),"error-text":e.$t("tasks.delete_all_error"),"lock-text":e.deleteAllTasksLockText},on:{confirm:e.confirmDeleteAllTasks}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:e.modals.isDeleteMetadataDisplayed,"is-loading":e.loading.deleteMetadata,"is-error":e.errors.deleteMetadata,text:e.$t("productions.metadata.delete_text"),"error-text":e.$t("productions.metadata.delete_error")},on:{cancel:function(t){e.modals.isDeleteMetadataDisplayed=!1},confirm:e.confirmDeleteMetadata}}),s("import-render-modal",{attrs:{active:e.modals.isImportRenderDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"parsed-csv":e.parsedCSV,"form-data":e.assetsCsvFormData,columns:e.columns,dataMatchers:e.dataMatchers,database:e.filteredAssets},on:{reupload:e.resetImport,cancel:e.hideImportRenderModal,confirm:e.uploadImportFile}}),s("import-modal",{ref:"import-modal",attrs:{active:e.modals.isImportDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"form-data":e.assetsCsvFormData,columns:e.columns},on:{confirm:e.renderImport,cancel:e.hideImportModal}}),s("create-tasks-modal",{attrs:{active:e.modals.isCreateTasksDisplayed,"is-loading":e.loading.creatingTasks,"is-loading-stay":e.loading.taskStay,"is-error":e.errors.creatingTasks,title:e.$t("tasks.create_tasks_asset"),text:e.$t("tasks.create_tasks_asset_explaination"),"error-text":e.$t("tasks.create_tasks_asset_failed")},on:{cancel:e.hideCreateTasksModal,confirm:e.confirmCreateTasks,"confirm-and-stay":e.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:e.modals.isAddMetadataDisplayed,"is-loading":e.loading.addMetadata,"is-loading-stay":e.loading.addMetadata,"is-error":e.errors.addMetadata,"descriptor-to-edit":e.descriptorToEdit},on:{cancel:function(t){e.modals.isAddMetadataDisplayed=!1},confirm:e.confirmAddMetadata}}),s("add-thumbnails-modal",{ref:"add-thumbnails-modal",attrs:{active:e.modals.isAddThumbnailsDisplayed,"is-loading":e.loading.addThumbnails,"is-error":e.errors.addThumbnails},on:{cancel:e.hideAddThumbnailsModal,confirm:e.confirmAddThumbnails}})],1)},Ee=[],je=(s("7db0"),s("a15b"),s("fb6a"),s("a434"),s("498a"),s("c1df")),xe=s.n(je),De=s("3455"),Ae=s("d359"),Me=s("2229"),Le=s("8c97"),Ie=(s("ac1f"),s("841c"),{created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{setSearchFromUrl:function(){var e=this.searchField.getValue(),t=this.$route.query.search;!e&&t&&this.searchField.setValue(t)},setSearchInUrl:function(){var e=this.searchField.getValue();this.$route.query.search!==e&&this.$router.push({query:{search:e}})},changeSearch:function(e){this.searchField.setValue(e.search_query),this.searchField.$emit("change",e.search_query),this.resizeHeaders&&this.resizeHeaders()},focusSearchField:function(){this.searchField&&this.searchField.focus()}}}),$e={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{showImportModal:function(){this.modals.isImportDisplayed=!0},hideImportModal:function(){this.modals.isImportDisplayed=!1},showImportRenderModal:function(){this.modals.isImportRenderDisplayed=!0},hideImportRenderModal:function(){this.modals.isImportRenderDisplayed=!1},showCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!0},hideCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!1},showAddThumbnailsModal:function(){this.modals.isAddThumbnailsDisplayed=!0},hideAddThumbnailsModal:function(){this.modals.isAddThumbnailsDisplayed=!1}}},qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":e.hiddenColumns[e.lastHeaderMenuDisplayed],"is-current-user-admin":e.isCurrentUserAdmin},on:{"minimize-clicked":function(t){return e.onMinimizeColumnToggled()},"delete-all-clicked":function(t){return e.onDeleteAllTasksClicked()},"sort-by-clicked":function(t){return e.onSortByTaskTypeClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":e.isCurrentUserAdmin},on:{"edit-clicked":function(t){return e.onEditMetadataClicked()},"delete-clicked":function(t){return e.onDeleteMetadataClicked()},"sort-by-clicked":function(t){return e.onSortByMetadataClicked()}}}),s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[e.isTVShow?s("th",{ref:"th-episode",staticClass:"episode"},[e._v(" "+e._s(e.$t("assets.fields.episode"))+" ")]):e._e(),s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),s("th",{ref:"th-name",staticClass:"name"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.$t("assets.fields.name"))+" ")]),e.isCurrentUserAdmin&&!e.isLoading?s("button-simple",{staticClass:"is-small flexrow-item",attrs:{icon:"plus",text:""},on:{click:e.onAddMetadataClicked}}):e._e()],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetDescription?s("th",{ref:"th-description",staticClass:"description"},[e._v(" "+e._s(e.$t("assets.fields.description"))+" ")]):e._e(),e._l(e.assetMetadataDescriptors,(function(t){return e.isShowInfos?s("th",{key:t.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item descriptor-name"},[e._v(" "+e._s(t.name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showMetadataHeaderMenu(t.id,s)}}})],1)]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetTime?s("th",{ref:"th-spent",staticClass:"time-spent"},[e._v(" "+e._s(e.$t("assets.fields.time_spent"))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,class:{"validation-cell":!e.hiddenColumns[t],"hidden-validation-cell":e.hiddenColumns[t]},style:e.getValidationStyle(t)},[s("div",{staticClass:"flexrow"},[s("router-link",{staticClass:"flexrow-item validation-name",staticStyle:{"margin-right":"0"},attrs:{to:e.taskTypePath(t)}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showHeaderMenu(t,s)}}})],1)])})),s("th",{staticClass:"actions"},[e.isCurrentUserManager&&e.displayedAssets.length>0&&!e.isLoading?s("button-simple",{class:{"is-small":!0,highlighted:e.isEmptyTask},attrs:{icon:"plus",text:e.$t("tasks.create_tasks")},on:{click:function(t){return e.$emit("create-tasks")}}}):e._e()],1)],2)])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("assets.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:e.$t("assets.new_assets"),path:e.newAssetPath()}})],1),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("assets.empty_list_client")))])]):e._e(),e.isLoading?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[e.isListVisible?s("table",{staticClass:"table splitted-table unselectable"},e._l(e.displayedAssets,(function(t,n){return s("tbody",{key:e.getGroupKey(t,n,"asset_type_id"),ref:"body-tbody",refInFor:!0,staticClass:"tbody"},[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[e._v(" "+e._s(t[0]?t[0].asset_type_name:"")+" ")])]),e._l(t,(function(t,i){return s("tr",{key:t.id,class:{canceled:t.canceled}},[e.isTVShow?s("td",{staticClass:"episode"},[e._v(" "+e._s(e.episodeMap[t.episode_id]?e.episodeMap[t.episode_id].name:e.$t("main.all"))+" ")]):e._e(),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:t}})],1),s("td",{class:{name:!0,bold:!t.canceled}},[s("router-link",{staticClass:"asset-link",attrs:{to:e.assetPath(t.id)}},[e._v(" "+e._s(t.name)+" ")])],1),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetDescription?s("description-cell",{staticClass:"description",attrs:{entry:t}}):e._e(),e._l(e.assetMetadataDescriptors,(function(n){return e.isShowInfos?s("td",{key:t.id+"-"+n.id,staticClass:"metadata-descriptor"},[e._v(" "+e._s(t.data?t.data[n.field_name]:"")+" ")]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetTime?s("td",{staticClass:"time-spent"},[e._v(" "+e._s(e.formatDuration(t.timeSpent))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(a,o){return e.isLoading?e._e():s("validation-cell",{key:a+"-"+t.id,ref:"validation-"+e.getIndex(i,n)+"-"+o,refInFor:!0,class:{"validation-cell":!e.hiddenColumns[a],"hidden-validation-cell":e.hiddenColumns[a]},attrs:{column:e.taskTypeMap[a],entity:t,"task-test":e.taskMap[t.validations[a]],selected:e.assetSelectionGrid[e.getIndex(i,n)][o],rowX:e.getIndex(i,n),columnY:o,minimized:e.hiddenColumns[a],"is-static":!0,"is-assignees":e.isShowAssignations},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}})})),e.isCurrentUserManager?s("row-actions",{attrs:{entry:t,"edit-route":e.editPath(t.id),"delete-route":e.deletePath(t.id),"restore-route":e.restorePath(t.id)}}):s("td",{staticClass:"actions"})],2)})),e._m(2,!0)],2)})),0):e._e()]),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-assets"},[e._v(" "+e._s(e.displayedAssetsLength)+" "+e._s(e.$tc("assets.number",e.displayedAssetsLength))+" ")])],1)},Fe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("66a5")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("66a5")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",{staticClass:"empty-line"},[s("td",{attrs:{colspan:"30"}})])}],Ne=s("e9c6"),Re=s("4f18"),Be=s("1338"),ze=s("e211"),Ve=s("03b1"),Ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-menu hidden"},[s("div",{on:{click:function(t){return e.$emit("minimize-clicked")}}},[e.isMinimized?s("span",[e._v(" "+e._s(e.$t("main.maximize"))+" ")]):s("span",[e._v(e._s(e.$t("main.minimize")))])]),s("div",{on:{click:function(t){return e.$emit("sort-by-clicked")}}},[e._v(" "+e._s(e.$t("main.sort_by"))+" ")]),e.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-all-clicked")}}},[e._v(" "+e._s(e.$t("main.delete_all"))+" ")]):e._e()])},He=[];function Ye(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function We(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ye(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ge={name:"table-header-menu",props:{isMinimized:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:We({},Object(l["c"])([])),methods:We({},Object(l["b"])([]))},Ke=Ge,Qe=(s("7369"),Object(m["a"])(Ke,Ue,He,!1,null,"9fb3cb4a",null)),Je=Qe.exports,Xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-menu hidden"},[e.isCurrentUserAdmin?s("div",{on:{click:function(t){return e.$emit("edit-clicked")}}},[e._v(" "+e._s(e.$t("main.edit"))+" ")]):e._e(),s("div",{on:{click:function(t){return e.$emit("sort-by-clicked")}}},[e._v(" "+e._s(e.$t("main.sort_by"))+" ")]),e.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-clicked")}}},[e._v(" "+e._s(e.$t("main.delete"))+" ")]):e._e()])},Ze=[];function et(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?et(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):et(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var st={name:"table-metadata-header-menu",props:{isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:tt({},Object(l["c"])([])),methods:tt({},Object(l["b"])([]))},nt=st,it=(s("de95"),Object(m["a"])(nt,Xe,Ze,!1,null,"49d47fdd",null)),at=it.exports,ot=s("cb0e");function rt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ct(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var lt={name:"asset-list",mixins:[Ne["a"],Re["a"],Be["a"]],props:{displayedAssets:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!0},isError:{type:Boolean,default:!0},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonLink:ze["a"],ButtonSimple:H["a"],DescriptionCell:Y["a"],EntityThumbnail:ve["a"],ChevronDownIcon:U["e"],RowActions:Ve["a"],TableInfo:le["a"],TableHeaderMenu:Je,TableMetadataHeaderMenu:at,ValidationCell:ot["a"]},computed:ct({},Object(l["c"])(["assets","assetFilledColumns","assetMetadataDescriptors","assetSearchText","assetSelectionGrid","episodeMap","currentEpisode","currentProduction","displayedAssetsLength","nbSelectedTasks","isAssetDescription","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserManager","isShowAssignations","isShowInfos","isAssetTime","isTVShow","selectedTasks","taskMap","taskTypeMap"]),{createTasksPath:function(){return this.getPath("create-asset-tasks")},isEmptyList:function(){return 0===this.displayedAssetsLength&&!this.isLoading&&!this.isError&&(!this.assetSearchText||0===this.assetSearchText.length)},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedAssetsLength>0},displayedValidationColumns:function(){var e=this;return this.validationColumns.filter((function(t){return e.assetFilledColumns[t]&&(!e.hiddenColumns[t]||e.isShowInfos)}))}}),methods:ct({},Object(l["b"])(["displayMoreAssets"]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px"),this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreAssets()},loadMoreAssets:function(){this.displayMoreAssets(),this.$nextTick(this.resizeHeaders)},getIndex:function(e,t){var s=0,n=0;while(s<t)n+=this.displayedAssets[s].length,s++;return e+n},newAssetPath:function(){return this.getPath("new-asset")},assetPath:function(e){return this.getPath("asset",e)},editPath:function(e){return this.getPath("edit-asset",e)},deletePath:function(e){return this.getPath("delete-asset",e)},restorePath:function(e){return this.getPath("restore-asset",e)},taskTypePath:function(e){var t={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"assets"}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-task-type",t.params.episode_id=this.currentEpisode.id),t},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.asset_id=t),s},resizeHeaders:function(){this.$refs["th-episode"]?this.resizeSplittedTableHeaders([{index:0,name:"episode"},{index:1,name:"thumbnail"},{index:2,name:"name"},{index:3,name:"description"}]):this.resizeSplittedTableHeaders([{index:0,name:"thumbnail"},{index:1,name:"name"},{index:2,name:"description"}])}}),watch:{validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},dt=lt,ut=(s("8d1e"),Object(m["a"])(dt,qe,Fe,!1,null,"2ce5c9fc",null)),pt=ut.exports,ht=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("productions.metadata.title"))+" ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.confirm},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("combobox",{directives:[{name:"focus",rawName:"v-focus"}],ref:"typeField",attrs:{label:e.$t("assets.fields.type"),options:e.typeOptions},on:{enter:e.confirm},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),s("combobox-boolean",{directives:[{name:"focus",rawName:"v-focus"}],ref:"hiddenField",attrs:{label:e.$t("assets.fields.hidden_from_client")},on:{enter:e.confirm},model:{value:e.form.for_client,callback:function(t){e.$set(e.form,"for_client",t)},expression:"form.for_client"}}),"choices"===e.type?s("div",[s("p",{staticClass:"strong"},[e._v(" "+e._s(e.$t("productions.metadata.available_values"))+" ")]),e.form.values.length>0?s("div",{ref:"valueList",staticClass:"choice-value-wrapper"},e._l(e.form.values,(function(t){return s("p",{key:t,staticClass:"choice-value"},[s("span",[e._v(" "+e._s(t)+" ")]),s("span",{staticClass:"remove-button pull-right",on:{click:function(s){return e.removeValue(t)}}},[e._v(" x ")])])})),0):s("div",[e._v(" "+e._s(e.$t("productions.metadata.add_new_values"))+" ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"addChoiceField",attrs:{"button-label":e.$t("Add value")},on:{enter:e.addValue},model:{value:e.valueToAdd,callback:function(t){e.valueToAdd=t},expression:"valueToAdd"}})],1):e._e(),s("modal-footer",{attrs:{"error-text":e.$t("productions.metadata.error"),"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],1)])])},ft=[],mt=(s("ddb0"),s("66e7")),bt=s("4636"),_t=s("d5c9");function vt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function yt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var gt={name:"add-metadata-modal",mixins:[Q["a"]],components:{Combobox:Z["a"],ComboboxBoolean:bt["a"],ModalFooter:_t["a"],TextField:J["a"]},props:{active:{type:Boolean,default:!1},descriptorToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:"",for_client:"false",values:[]},valueToAdd:"",type:"free",typeOptions:[{label:this.$t("productions.metadata.free"),value:"free"},{label:this.$t("productions.metadata.choices"),value:"choices"}]}},mounted:function(){this.reset()},computed:yt({},Object(l["c"])([]),{isFormFilled:function(){return this.form.name.length>0&&(this.form.values.length>0||"free"===this.type)},valueList:function(){return this.$refs.valueList}}),methods:yt({},Object(l["b"])([]),{addValue:function(){var e=this,t=this.$refs.addChoiceField.value;return!this.form.values.find((function(e){return e===t}))&&t&&(this.form.values.push(t),this.valueToAdd="",this.$nextTick((function(){e.valueList.scrollTop=e.valueList.scrollHeight}))),t},confirm:function(){return"free"===this.type&&(this.form.values=[]),this.$emit("confirm",this.form)},removeValue:function(e){this.form.values=Object(mt["d"])(this.form.values,e)},reset:function(){this.form={name:"",values:[]},this.valueToAdd="",this.descriptorToEdit.name&&(this.form={id:this.descriptorToEdit.id,name:"".concat(this.descriptorToEdit.name),values:Object(K["a"])(this.descriptorToEdit.choices),for_client:this.descriptorToEdit.for_client?"true":"false"}),this.type=this.form.values.length>0?"choices":"free"}}),watch:{active:function(){var e=this;this.active&&(this.reset(),this.$nextTick((function(){e.$refs.nameField.focus()})))}}},kt=gt,wt=(s("ec21"),Object(m["a"])(kt,ht,ft,!1,null,"53f1fbca",null)),St=wt.exports,Ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("entities.thumbnails.title"))+" ")]),s("p",[e._v(" "+e._s(e.$t("entities.thumbnails.explaination"))+" ")]),s("combobox-task-type",{attrs:{label:e.$t("entities.thumbnails.select_task_type"),"task-type-list":e.taskTypeList},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),s("p",[e._v(" "+e._s(e.$t("entities.thumbnails.explaination_two"))+" ")]),s("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("entities.thumbnails.select_files"))+" ")]),s("file-upload",{ref:"preview-field",attrs:{label:e.$t("main.csv.upload_file"),accept:e.extensions,multiple:!0},on:{fileselected:e.onFileSelected}}),e.thumbnailList.length>0?s("label",{staticClass:"label mt2"},[e._v(" "+e._s(e.$t("entities.thumbnails.selected_files"))+" ")]):e._e(),e._l(e.thumbnailList,(function(t){return s("div",{key:t.id,staticClass:"thumbnail-line flexrow"},[s("img",{staticClass:"flexrow-item",attrs:{src:t.src,width:"150",height:"100"}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.parentName)+" / "+e._s(t.name)+" ")]),e.loading[t.id]?s("spinner",{attrs:{size:10}}):e._e(),e.uploaded[t.id]?s("check-icon"):e._e()],1)})),s("modal-footer",{attrs:{"error-text":e.$t("entities.thumbnails.error"),"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],2)])])},Ct=[],Tt=(s("3ca3"),s("2b3d"),s("7d26")),Pt=s("0263"),Et=s("e4fd"),jt=s("4085");function xt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Dt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var At={name:"add-thumbnails-modal",mixins:[Q["a"]],components:{CheckIcon:U["c"],ComboboxTaskType:Et["a"],FileUpload:jt["a"],ModalFooter:_t["a"],Spinner:d["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{extensions:".png,.jpg",forms:[],loading:{},taskTypeId:null,uploaded:{},thumbnailList:[]}},mounted:function(){this.reset()},computed:Dt({},Object(l["c"])(["assetValidationColumns","shotValidationColumns","taskTypeMap","taskMap"]),{isFormFilled:function(){return this.thumbnailList.length>0},taskTypeList:function(){var e=this;return this.isAssets?this.assetValidationColumns.map((function(t){return e.taskTypeMap[t]})):this.shotValidationColumns.map((function(t){return e.taskTypeMap[t]}))},isAssets:function(){return this.$route.path.indexOf("assets")>-1}}),methods:Dt({},Object(l["b"])([]),{reset:function(){this.taskTypeList.length>0&&(this.taskTypeId=this.taskTypeList[0].id),this.$refs["preview-field"].reset&&this.$refs["preview-field"].reset(),this.thumbnailList=[],this.loading={},this.uploaded={}},confirm:function(){return this.$emit("confirm",this.forms.map(this.addTaskInformation))},addEntityToEntityMap:function(e){var t="";return t=this.isAssets?Object(Le["b"])("".concat(e.asset_type_name,"_").concat(e.name)):Object(Le["b"])("".concat(e.sequence_name,"_").concat(e.name)),this.entityMap[t]=e,this.entityMap},addTaskInformation:function(e){var t=this.slugifyFilename(e),s=this.entityMap[t],n=this.taskMap[s.validations[this.taskTypeId]];return e.task=n,e},onFileSelected:function(e){return this.entityMap={},this.uploaded={},this.isAssets?Tt["a"].cache.assets.forEach(this.addEntityToEntityMap):Pt["a"].cache.shots.forEach(this.addEntityToEntityMap),this.forms=this.filterForms(e),this.buildThumbnailList()},filterForms:function(e){var t=this;return e.filter((function(e){var s=t.slugifyFilename(e),n=t.entityMap[s];return n&&n.validations[t.taskTypeId]}))},buildThumbnailList:function(){var e=this;return this.thumbnailList=this.forms.map((function(t){var s=e.entityMap[e.slugifyFilename(t)],n=e.prepareImagePreview(t),i=e.isAssets?s.asset_type_name:s.sequence_name;return t.asset=s,{parentName:i,name:s.name,id:s.id,src:n}})),this.thumbnailList},slugifyFilename:function(e){var t=e.get("file").name;return Object(Le["b"])(t.substring(0,t.length-3))},prepareImagePreview:function(e){return window.URL.createObjectURL(e.get("file"))},markLoading:function(e){this.loading={},this.loading[e]=!0},markUploaded:function(e){this.uploaded[e]=!0}}),watch:{active:function(){this.active&&this.reset()}}},Mt=At,Lt=(s("b872"),Object(m["a"])(Mt,Ot,Ct,!1,null,"497d9e45",null)),It=Lt.exports,$t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("page-title",{attrs:{text:e.title}}),s("p",[e._v(e._s(e.text))]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("tasks.fields.task_type"),options:e.isAssetTasks?e.getAssetTaskTypeOptions:e.getShotTaskTypeOptions},model:{value:e.form.task_type_id,callback:function(t){e.$set(e.form,"task_type_id",t)},expression:"form.task_type_id"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoadingStay},on:{click:e.confirmAndStayClicked}},[e._v(" "+e._s(e.$t("main.confirmation_and_stay"))+" ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.confirmClicked}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.errorText)+" ")]):e._e()])],1)])])},qt=[];function Ft(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Nt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ft(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Rt={name:"create-task-modal",mixins:[Q["a"]],components:{PageTitle:ye["a"],Combobox:Z["a"]},props:{active:{type:Boolean,default:!1},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isLoadingStay:{type:Boolean,default:!1},isSuccess:{type:Boolean,default:!1},text:{type:String,default:""},title:{type:String,default:""}},data:function(){return{form:{task_type_id:""}}},computed:Nt({},Object(l["c"])(["taskTypes","getAssetTaskTypeOptions","getShotTaskTypeOptions"]),{isAssetTasks:function(){return this.$route.path.indexOf("assets")>=0}}),methods:Nt({},Object(l["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},confirmAndStayClicked:function(){this.$emit("confirm-and-stay",this.form)}}),mounted:function(){this.isAssetTasks?this.getAssetTaskTypeOptions.length>0&&(this.form.task_type_id=this.getAssetTaskTypeOptions[0].value):this.getShotTaskTypeOptions.length>0&&(this.form.task_type_id=this.getShotTaskTypeOptions[0].value)}},Bt=Rt,zt=(s("fd61"),Object(m["a"])(Bt,$t,qt,!1,null,"b1c1d4b6",null)),Vt=zt.exports,Ut=s("5f48"),Ht=s("440f"),Yt=s("4918"),Wt=s("2c1a"),Gt=s("4d04"),Kt=s("55ce"),Qt=function(e,t){var s=t._c;return t.props.sorting.length>0?s("div",{staticClass:"has-text-right"},[t._v(" "+t._s(t.props.label)+" "+t._s(t.props.sorting[0].name)+" "),s("a",{on:{click:function(e){return t.listeners["clear-sorting"]()}}},[t._v("x")])]):t._e()},Jt=[],Xt={name:"sorting-info",functional:!0,props:{label:{default:"Sorted by",type:String},sorting:{default:function(){return[]},type:Array}}},Zt=Xt,es=Object(m["a"])(Zt,Qt,Jt,!0,null,null,null),ts=es.exports,ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":e.isShowAssignations},attrs:{title:e.$t(e.isShowAssignations?"tasks.hide_assignations":"tasks.show_assignations")},on:{click:e.toggleAssignations}},[s("users-icon",{staticClass:"icon is-small"})],1)},ns=[];function is(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function as(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?is(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):is(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var os={name:"show-assignations-button",components:{UsersIcon:U["M"]},props:{},computed:as({},Object(l["c"])(["isShowAssignations"])),methods:as({},Object(l["b"])(["showAssignations","hideAssignations"]),{toggleAssignations:function(){this.isShowAssignations?this.hideAssignations():this.showAssignations()}}),mounted:function(){"false"===localStorage.getItem("show-assignations")?this.hideAssignations():this.showAssignations()},watch:{isShowAssignations:function(){localStorage.setItem("show-assignations",this.isShowAssignations,{expires:"1M"})}}},rs=os,cs=Object(m["a"])(rs,ss,ns,!1,null,null,null),ls=cs.exports,ds=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":e.isShowInfos},attrs:{title:e.$t(e.isShowInfos?"tasks.hide_infos":"tasks.show_infos")},on:{click:e.toggleInfos}},[s("database-icon",{staticClass:"icon is-small"})],1)},us=[];function ps(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ps(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var fs={name:"show-infos-button",components:{DatabaseIcon:U["l"]},props:{},computed:hs({},Object(l["c"])(["isShowInfos"])),methods:hs({},Object(l["b"])(["showInfos","hideInfos"]),{toggleInfos:function(){this.isShowInfos?this.hideInfos():this.showInfos()}}),mounted:function(){"false"===localStorage.getItem("show-infos")?this.hideInfos():this.showInfos()},watch:{isShowInfos:function(){localStorage.setItem("show-infos",this.isShowInfos,{expires:"1M"})}}},ms=fs,bs=Object(m["a"])(ms,ds,us,!1,null,null,null),_s=bs.exports,vs=s("9d94");function ys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ys(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ks={name:"assets",mixins:[Ie,$e],components:{AssetList:pt,AddMetadataModal:St,AddThumbnailsModal:It,ButtonLink:ze["a"],ButtonSimple:H["a"],CreateTasksModal:Vt,DeleteModal:Ut["a"],EditAssetModal:ae,HardDeleteModal:Wt["a"],ImportModal:Ht["a"],ImportRenderModal:Yt["a"],SearchField:Gt["a"],SearchQueryList:Kt["a"],ShowAssignationsButton:ls,ShowInfosButton:_s,SortingInfo:ts,TaskInfo:vs["a"]},data:function(){return{initialLoading:!0,modals:{isAddMetadataDisplayed:!1,isAddThumbnailsDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isImportRenderDisplayed:!1,isNewDisplayed:!1},loading:{addMetadata:!1,addThumbnails:!1,creatingTasks:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,importing:!1,stay:!1,taskStay:!1},errors:{addMetadata:!1,addThumbnails:!1,deleteMetadata:!1,creatingTasks:!1,importing:!1},assetToDelete:null,assetToRestore:null,assetToEdit:null,assetFilters:[{type:"Type",value:{name:"open"}}],assetFilterTypes:["Type"],descriptorToEdit:{},columns:["Type","Name","Description"],dataMatchers:["Type","Name"],deleteAllTasksLockText:null,parsedCSV:[]}},computed:gs({},Object(l["c"])(["assetMap","assetsPath","assetListScrollPosition","assetsCsvFormData","assetSearchText","assetSearchQueries","assetTypes","assetValidationColumns","currentEpisode","currentProduction","editAsset","deleteAsset","displayedAssetsByType","openProductions","isAssetsLoading","isAssetsLoadingError","isCurrentUserClient","isCurrentUserManager","isAssetTime","isTVShow","nbSelectedTasks","restoreAsset","selectedTasks","assetSorting","taskTypeMap"]),{newAssetPath:function(){return this.getPath("new-asset")},addThumbnailsModal:function(){return this.$refs["add-thumbnails-modal"]},searchField:function(){return this.$refs["asset-search-field"]},filteredAssets:function(){var e={};return this.displayedAssetsByType.forEach((function(t){t.forEach((function(t){var s="".concat(t.asset_type_name).concat(t.name);e[s]=!0}))})),e}}),created:function(){this.setLastProductionScreen("assets")},mounted:function(){var e=this;this.assetSearchText.length>0&&this.searchField.setValue(this.assetSearchText),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition),Object.keys(this.assetMap).length<2||this.assetValidationColumns.length>0&&!Object.keys(this.assetMap)[0].validations?setTimeout((function(){e.loadAssets((function(t){t||(e.handleModalsDisplay(),setTimeout((function(){e.$refs["asset-list"]&&e.$refs["asset-list"].setScrollPosition(e.assetListScrollPosition)}),500)),setTimeout((function(){e.initialLoading=!1,e.resizeHeaders()}),200)}))}),0):(this.isAssetsLoading||(this.initialLoading=!1),this.onSearchChange(),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition))},methods:gs({},Object(l["b"])(["addMetadataDescriptor","changeAssetSort","commentTaskWithPreview","deleteAllTasks","deleteMetadataDescriptor","getAssetsCsvLines","loadAssets","loadComment","removeAssetSearch","saveAssetSearch","setLastProductionScreen","setAssetSearch","setPreview","uploadAssetFile"]),{confirmNewAssetStay:function(e){var t=this,s="newAsset";this.loading.stay=!0,this.editAsset.isSuccess=!1,this.editAsset.isError=!1,this.$store.dispatch(s,{data:e,callback:function(e){t.loading.stay=!1,e?t.loading.edit=!1:(t.resetLightEditModal(),t.$refs["edit-asset-modal"].focusName(),t.editAsset.isSuccess=!0,t.resizeHeaders())}})},confirmEditAsset:function(e){var t=this,s="newAsset";this.loading.edit=!0,this.editAsset.isCreateError=!1,this.assetToEdit&&this.assetToEdit.id&&(s="editAsset",e.id=this.assetToEdit.id),this.$store.dispatch(s,{data:e,callback:function(e){e?(t.loading.edit=!1,t.editAsset.isCreateError=!0):(t.loading.edit=!1,t.modals.isNewDisplayed=!1,t.$router.push(t.assetsPath),t.resizeHeaders())}})},confirmDeleteAsset:function(){var e=this;this.$store.dispatch("deleteAsset",{asset:this.assetToDelete,callback:function(t){t||e.$router.push(e.assetsPath)}})},confirmRestoreAsset:function(){var e=this;this.$store.dispatch("restoreAsset",{asset:this.assetToRestore,callback:function(t){t||(e.modals.isRestoreDisplayed=!1)}})},confirmCreateTasks:function(e){var t=this;this.loading.creatingTasks=!0,this.runTasksCreation(e,(function(){t.hideCreateTasksModal(),t.loading.creatingTasks=!1}))},confirmCreateTasksAndStay:function(e){var t=this;this.loading.taskStay=!0,this.runTasksCreation(e,(function(){t.loading.taskStay=!1}))},runTasksCreation:function(e,t){var s=this;this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:e.task_type_id,type:"assets",project_id:this.currentProduction.id,callback:function(e){e?s.errors.creatingTasks=!0:s.loadAssets((function(){s.resizeHeaders()})),t(e)}})},confirmDeleteAllTasks:function(){var e=this,t=this.$route.params.task_type_id,s=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllTasks({projectId:s,taskTypeId:t}).then((function(){e.loading.deleteAllTasks=!1,e.loadAssets((function(){e.resizeHeaders()})),e.$router.push(e.assetsPath)})).catch((function(t){console.error(t),e.loading.deleteAllTasks=!1,e.errors.deleteAllTasks=!0}))},confirmDeleteMetadata:function(){var e=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){e.errors.deleteMetadata=!1,e.loading.deleteMetadata=!1,e.modals.isDeleteMetadataDisplayed=!1})).catch((function(t){console.error(t),e.errors.deleteMetadata=!0,e.loading.deleteMetadata=!1}))},resetLightEditModal:function(){var e={name:"",entity_type_id:this.assetToEdit.entity_type_id,production_id:this.currentProduction.id};this.assetToEdit=e},resetEditModal:function(){var e={name:""};this.assetTypes.length>0&&(e.asset_type_id=this.assetTypes[0].id),e.production_id=this.currentProduction.id,this.assetToEdit=e},deleteText:function(){var e=this.assetToDelete;return e?this.$t("assets.delete_text",{name:e.name}):""},deleteAllTasksText:function(){var e=this.taskTypeMap[this.$route.params.task_type_id];return e?this.$t("tasks.delete_all_text",{name:e.name}):""},restoreText:function(){var e=this.assetToRestore;return e?this.$t("assets.restore_text",{name:e.name}):""},handleModalsDisplay:function(){var e=this.$store.state.route.path,t=this.$store.state.route.params.asset_id;if(this.editAsset.isSuccess=!1,this.editAsset.isError=!1,e.indexOf("new")>0)this.resetEditModal(),this.editAsset.isSuccess=!1,this.modals.isNewDisplayed=!0;else if(e.indexOf("edit")>0)this.editAsset.isSuccess=!1,this.assetToEdit=this.assetMap[t],this.modals.isNewDisplayed=!0;else if(e.indexOf("delete-all-tasks")>0){var s=this.taskTypeMap[this.$route.params.task_type_id];this.deleteAllTasksLockText=s.name,this.modals.isDeleteAllTasksDisplayed=!0}else e.indexOf("delete")>0?(this.assetToDelete=this.assetMap[t],this.modals.isDeleteDisplayed=!0):e.indexOf("restore")>0?(this.assetToRestore=this.assetMap[t],this.modals.isRestoreDisplayed=!0):this.modals={isAddMetadataDisplayed:!1,isAddThumbnailsDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isImportRenderDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1}},cleanUpCsv:function(e){return e.forEach((function(e){e.forEach((function(e,t,s){s[t]=e.trim()}))})),e[0].forEach((function(e,t,s){s[t]=e[0].toUpperCase()+e.slice(1)})),e},renderImport:function(e,t){var s=this;this.loading.importing=!0,this.errors.importing=!1,this.formData=e,"file"===t&&(e=e.get("file")),De["a"].processCSV(e).then((function(e){s.cleanUpCsv(e),s.parsedCSV=e,s.hideImportModal(),s.loading.importing=!1,s.showImportRenderModal()}))},uploadImportFile:function(e,t){var s=this,n=new FormData,i="import.csv",a=De["a"].turnEntriesToCsvString(e);console.log(a);var o=new File([a],i,{type:"text/csv"});n.append("file",o),this.loading.importing=!0,this.errors.importing=!1,this.$store.commit("ASSET_CSV_FILE_SELECTED",n),this.uploadAssetFile(t).then((function(){s.hideImportRenderModal(),s.loading.importing=!1,s.loadAssets((function(){s.resizeHeaders()}))})).catch((function(e){console.error(e),s.loading.importing=!1,s.errors.importing=!0}))},resetImport:function(){this.errors.importing=!1,this.hideImportRenderModal(),this.$store.commit("ASSET_CSV_FILE_SELECTED",null),this.$refs["import-modal"].reset(),this.showImportModal()},onSearchChange:function(){var e=this.$refs["asset-search-field"].getValue();1!==e.length&&(this.setAssetSearch(e),this.resizeHeaders(),this.setSearchInUrl())},saveSearchQuery:function(e){this.saveAssetSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},removeSearchQuery:function(e){this.removeAssetSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},saveScrollPosition:function(e){this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",e)},getPath:function(e){var t={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-".concat(e),t.params.episode_id=this.currentEpisode.id),t},resizeHeaders:function(){var e=this;setTimeout((function(){e.$refs["asset-list"]&&e.$refs["asset-list"].resizeHeaders()}),0)},onDeleteAllTasksClicked:function(e){var t=this.getPath("delete-all-asset-tasks"),s=this.taskTypeMap[e];t.params.task_type_id=e,this.deleteAllTasksLockText=s.name,this.$router.push(t)},confirmAddMetadata:function(e){var t=this;this.loading.addMetadata=!0,e.entity_type="Asset",this.addMetadataDescriptor(e).then((function(){t.loading.addMetadata=!1,t.modals.isAddMetadataDisplayed=!1})).catch((function(e){console.error(e),t.loading.addMetadata=!1,t.errors.addMetadata=!0}))},confirmAddThumbnails:function(e){var t=this,s=function(e){return t.addThumbnailsModal.markLoading(e.task.entity_id),t.commentTaskWithPreview({taskId:e.task.id,commentText:"",taskStatusId:e.task.task_status_id,form:e}).then((function(s){s.newComment;var n=s.preview;return t.setPreview({taskId:e.task.id,entityId:e.task.entity_id,previewId:n.id})})).then((function(){return t.addThumbnailsModal.markUploaded(e.task.entity_id),Promise.resolve()}))};this.loading.addThumbnails=!0,Ae["a"].runPromiseMapAsSeries(e,s).then((function(){t.loading.addThumbnails=!1,t.modals.isAddThumbnailsDisplayed=!1}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(e){this.descriptorIdToDelete=e,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(e){this.descriptorToEdit=this.currentProduction.descriptors.find((function(t){return t.id===e})),this.modals.isAddMetadataDisplayed=!0},onExportClick:function(){var e=this;this.getAssetsCsvLines().then((function(t){var s=[xe()().format("YYYY-MM-DD"),"kitsu",e.currentProduction.name,e.$t("assets.title")];e.currentEpisode&&s.splice(3,0,e.currentEpisode.name);var n=Object(Le["b"])(s.join("_")),i=e.isTVShow?["Episode"]:[];i=i.concat([e.$t("assets.fields.type"),e.$t("assets.fields.name"),e.$t("assets.fields.description")]),Object(Me["d"])(Object(K["a"])(e.currentProduction.descriptors)).filter((function(e){return"Asset"===e.entity_type})).forEach((function(e){i.push(e.name)})),e.isAssetTime&&i.push(e.$t("shots.fields.time_spent")),e.assetValidationColumns.forEach((function(t){i.push(e.taskTypeMap[t].name)})),De["a"].buildCsvFile(n,[i].concat(t))}))},resetCsVColumns:function(){var e=this.isTVShow?["Episode"]:[];this.columns=e.concat(["Type","Name","Description"])},onChangeSortClicked:function(e){this.changeAssetSort(e)}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var e=this;this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.resetCsVColumns(),this.isTVShow||(this.initialLoading=!0,this.loadAssets((function(t){e.initialLoading=!1,e.resizeHeaders(),e.setSearchFromUrl(),e.onSearchChange(),t||e.handleModalsDisplay()})))},currentEpisode:function(){var e=this;this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.isTVShow&&this.currentEpisode&&(this.initialLoading=!0,this.loadAssets((function(t){t||(e.handleModalsDisplay(),e.initialLoading=!1,e.resizeHeaders(),e.setSearchFromUrl(),e.onSearchChange())})))},displayedAssets:function(){this.resizeHeaders()}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("assets.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("assets.title")," - Kitsu")}}},ws=ks,Ss=(s("1f53"),Object(m["a"])(ws,Pe,Ee,!1,null,"24e78643",null)),Os=Ss.exports,Cs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login hero is-fullheight"},[s("div",{staticClass:"container has-text-centered"},[s("div",{staticClass:"box has-text-left"},[e._m(0),s("form",[s("div",{staticClass:"field mt1"},[s("p",{staticClass:"control has-icon"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"input is-medium email",attrs:{type:"text",placeholder:e.$t("login.fields.email")},on:{input:e.updateEmail,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmLogIn(t)}}}),s("span",{staticClass:"icon"},[s("mail-icon",{attrs:{width:"20",height:"20"}})],1)])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icon"},[s("input",{staticClass:"input is-medium password",attrs:{type:"password",placeholder:e.$t("login.fields.password")},on:{input:e.updatePassword,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmLogIn(t)}}}),s("span",{staticClass:"icon"},[s("lock-icon",{attrs:{width:"20",height:"20"}})],1)])])]),s("p",{staticClass:"control"},[s("a",{class:{button:!0,"main-button":!0,"is-fullwidth":!0,"is-loading":e.isLoginLoading},on:{click:e.confirmLogIn}},[e._v(" "+e._s(e.$t("login.login"))+" ")])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.isLoginError,expression:"isLoginError"}],staticClass:"control error"},[e._v(" "+e._s(e.$t("login.login_failed"))+" ")]),s("p",{staticClass:"has-text-centered"},[s("router-link",{attrs:{to:{name:"reset-password"}}},[e._v(" "+e._s(e.$t("login.forgot_password"))+" ")])],1)])])])},Ts=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"has-text-centered login-header"},[n("img",{attrs:{src:s("ad6c")}}),n("h1",{staticClass:"title"},[e._v(" Kitsu ")])])}];function Ps(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Es(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ps(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var js={name:"login",components:{MailIcon:U["v"],LockIcon:U["u"]},computed:Es({},Object(l["c"])(["isLoginLoading","isLoginError"])),methods:Es({},Object(l["b"])(["logIn"]),{updateEmail:function(e){this.$store.dispatch("changeEmail",e.target.value)},updatePassword:function(e){this.$store.dispatch("changePassword",e.target.value)},confirmLogIn:function(){var e=this;this.logIn((function(t,s){t&&(t.default_password?e.$router.push({name:"reset-change-password",params:{token:t.token}}):console.error(t)),s&&e.$router.push("/")}))}}),metaInfo:function(){return{title:this.$t("login.title")}}},xs=js,Ds=(s("ca1b"),Object(m["a"])(xs,Cs,Ts,!1,null,"813ef5c6",null)),As=Ds.exports,Ms=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("topbar"),s("action-topbar"),s("sidebar"),s("router-view")],1)},Ls=[],Is=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"topbar"},[s("div",{class:{"is-active":!e.isUserMenuHidden},attrs:{id:"c-mask-user-menu"},on:{click:function(t){return e.toggleUserMenu()}}}),s("nav",{staticClass:"nav"},[s("div",{staticClass:"nav-left"},[e.isCurrentUserClient?e._e():s("a",{staticClass:"nav-item sidebar-button",class:{selected:!e.isSidebarHidden},attrs:{id:"toggle-menu-button"},on:{click:function(t){return e.toggleSidebar()}}},[e._v(" ≡ ")]),e.isProductionContext?s("div",{class:{"nav-item":!0}},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-item"},[s("combobox",{staticClass:"context-selector",attrs:{options:e.openProductionOptions,"is-top":!0},model:{value:e.currentProductionId,callback:function(t){e.currentProductionId=t},expression:"currentProductionId"}}),s("strong",[e._v(" > ")]),s("combobox",{staticClass:"context-selector",attrs:{options:e.navigationOptions,"is-top":!0},model:{value:e.currentProjectSection,callback:function(t){e.currentProjectSection=t},expression:"currentProjectSection"}}),e.isEpisodeContext?s("strong",[e._v(" > ")]):e._e(),e.isEpisodeContext?s("combobox",{staticClass:"context-selector",attrs:{options:e.episodeOptions,"is-top":!0},model:{value:e.currentEpisodeId,callback:function(t){e.currentEpisodeId=t},expression:"currentEpisodeId"}}):e._e()],1)])]):e.lastProduction&&"/open-productions"!==e.$route.path?s("div",{staticClass:"nav-item"},[s("router-link",{staticClass:"flexrow",attrs:{to:e.lastSectionPath}},[s("chevron-left-icon"),e._v(" "+e._s(e.$t("main.go_productions"))+" ")],1)],1):e._e()]),s("div",{staticClass:"nav-right"},[s("notification-bell"),s("div",{ref:"user-name",class:{"nav-item":!0,"user-nav":!0,active:!e.isUserMenuHidden},on:{click:e.toggleUserMenu}},[s("people-avatar",{ref:"avatar",staticClass:"avatar",attrs:{"no-cache":!0,person:e.user,"is-link":!1}}),s("people-name",{staticClass:"user-name",attrs:{person:e.user}})],1)],1)]),s("nav",{directives:[{name:"show",rawName:"v-show",value:!e.isUserMenuHidden,expression:"!isUserMenuHidden"}],ref:"user-menu",staticClass:"user-menu"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/profile"},nativeOn:{click:function(t){return e.toggleUserMenu()}}},[e._v(" "+e._s(e.$t("main.profile"))+" ")])],1),s("li",{on:{click:e.toggleDarkTheme}},[e.isDarkTheme?s("span",[e._v(" "+e._s(e.$t("main.white_theme"))+" ")]):s("span",[e._v(" "+e._s(e.$t("main.dark_theme"))+" ")])]),s("li",[s("a",{attrs:{href:"https://kitsu.cg-wire.com",target:"_blank"}},[e._v(" "+e._s(e.$t("main.documentation"))+" ")])]),s("li",[s("a",{attrs:{href:"https://www.youtube.com/playlist?list=PLp_1gB5ZBHXqnQgZ4TCrAt7smxesaDo29",target:"_blank"}},[e._v(" "+e._s(e.$t("main.tutorials"))+" ")])]),s("li",[s("a",{on:{click:function(t){e.display.shortcutModal=!0}}},[e._v(" "+e._s(e.$t("keyboard.shortcuts"))+" ")])]),e._m(0),e._m(1),s("li",[s("a",{attrs:{href:"https://cg-wire.com/en/about.html",target:"_blank"}},[e._v(" "+e._s(e.$t("main.about"))+" ")])]),s("li",{on:{click:e.onLogoutClicked}},[e._v(" "+e._s(e.$t("main.logout"))+" ")]),s("li",{staticClass:"version"},[e._v(" Kitsu "+e._s(e.kitsuVersion)+" ")])])]),s("shortcut-modal",{attrs:{active:e.display.shortcutModal},on:{cancel:function(t){e.display.shortcutModal=!1}}})],1)},$s=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://slack.cg-wire.com",target:"_blank"}},[e._v(" Slack ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://cgwire.canny.io",target:"_blank"}},[e._v(" Roadmap ")])])}],qs=(s("1276"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"nav-item"},[s("router-link",{attrs:{to:{name:"notifications"}}},[s("bell-icon",{class:e.notificationBellClass})],1)],1)}),Fs=[];function Ns(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Rs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ns(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Bs={name:"notification-bell",components:{BellIcon:U["b"]},props:{isWhite:{type:Boolean,default:!1}},computed:Rs({},Object(l["c"])(["isNewNotification"]),{notificationBellClass:function(){return this.isNewNotification?{"has-notifications":!0}:this.isWhite?{"has-no-notifications":!0,white:!0}:{"has-no-notifications":!0}}})},zs=Bs,Vs=(s("c1eb"),Object(m["a"])(zs,qs,Fs,!1,null,"de55f04e",null)),Us=Vs.exports,Hs=s("0073"),Ys=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("keyboard.shortcuts"))+" ")]),e._l(e.shortcuts,(function(t,n){return s("div",{key:"shortcut-"+n,staticClass:"shortcut"},[s("div",{staticClass:"shortcut-key-wrapper"},e._l(t.keys,(function(i,a){return s("div",{key:"shortcut-key-"+n+"-"+a},[s("span",{staticClass:"shortcut-key"},[e._v(e._s(i))]),a!==t.keys.length-1?s("span",{staticClass:"shortcut-plus"},[e._v("+ ")]):e._e()])})),0),s("span",{staticClass:"shortcut-text"},[e._v(e._s(t.text))])])})),s("div",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],2)])])},Ws=[];function Gs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ks(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gs(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Qs={name:"shot-history-modal",mixins:[Q["a"]],components:{},props:{active:{type:Boolean,default:!1}},data:function(){return{shortcuts:[{keys:["Alt","←"],text:this.$t("keyboard.altleft")},{keys:["Alt","↑"],text:this.$t("keyboard.altup")},{keys:["Alt","→"],text:this.$t("keyboard.altright")},{keys:["Alt","↓"],text:this.$t("keyboard.altdown")}]}},mounted:function(){this.reset()},computed:Ks({},Object(l["c"])([])),methods:Ks({},Object(l["b"])(["loadShotHistory"]),{reset:function(){},formatDate:function(e){}})},Js=Qs,Xs=(s("72b0"),Object(m["a"])(Js,Ys,Ws,!1,null,"17b1b544",null)),Zs=Xs.exports,en=s("9224");function tn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var nn={name:"topbar",components:{Combobox:Z["a"],ChevronLeftIcon:U["f"],NotificationBell:Us,PeopleName:Hs["a"],PeopleAvatar:ue["a"],ShortcutModal:Zs},data:function(){return{currentProductionId:this.$route.params.production_id,currentEpisodeId:this.$route.params.episode_id,currentProjectSection:null,kitsuVersion:en["a"],silent:!1,display:{shortcutModal:!1}}},mounted:function(){var e=this.$refs["user-menu"],t=this.$refs["user-name"];if(t){var s=t.clientWidth;s>100&&(e.style.width="".concat(s,"px"),t.style.width="".concat(s,"px"))}this.setProductionFromRoute()},computed:sn({},Object(l["c"])(["assetsPath","currentEpisode","currentProduction","episodes","episodeOptions","isCurrentUserClient","isDarkTheme","isSidebarHidden","isUserMenuHidden","isTVShow","isNewNotification","lastProductionScreen","lastProductionViewed","openProductions","openProductionOptions","productionMap","user"]),{isShotPage:function(){return this.$route.params.episode_id},isProductionContext:function(){return void 0!==this.$route.params.production_id||this.$route.path.indexOf("tasks")>0},isEpisodeContext:function(){return this.isTVShow&&this.isShotPage&&this.episodes.length>0},lastProduction:function(){var e=this.productionMap[this.lastProductionViewed];return e||(e=this.currentProduction),e},lastSectionPath:function(){var e=this.lastProduction,t=this.lastProductionScreen,s={name:t,params:{production_id:e.id}};return"tvshow"===e.production_type&&(s.name="episode-".concat(t),s.params.episode_id=e.first_episode_id),s},navigationOptions:function(){var e=[{label:this.$t("assets.title"),value:"assets"},{label:this.$t("shots.title"),value:"shots"},{label:this.$t("sequences.title"),value:"sequences"},{label:this.$t("episodes.title"),value:"episodes"},{label:this.$t("asset_types.production_title"),value:"assetTypes"},{label:this.$t("playlists.title"),value:"playlists"}];return this.isCurrentUserClient||(e=e.concat([{label:this.$t("news.title"),value:"newsFeed"},{label:this.$t("breakdown.title"),value:"breakdown"},{label:this.$t("schedule.title"),value:"schedule"},{label:this.$t("quota.title"),value:"quota"},{label:this.$t("people.team"),value:"team"}])),this.isTVShow||e.splice(3,1),e}}),methods:sn({},Object(l["b"])(["clearEpisodes","loadEpisodes","loadNotification","logout","setProduction","setCurrentEpisode","toggleDarkTheme","toggleSidebar","toggleUserMenu"]),{onLogoutClicked:function(){var e=this;this.logout((function(t,s){t&&console.error(t),e.toggleUserMenu(),s&&e.$router.push("/login")}))},getCurrentSectionFromRoute:function(){var e="",t=this.$route.path.split("/");return this.isTVShow&&(e=t[5]),e||(e=t[3],"episodes"===e&&6===t.length&&(e=t[5])),"asset-types"===e&&(e="assetTypes"),"news-feed"===e&&(e="newsFeed"),e},updateRoute:function(){var e=this.getCurrentSectionFromRoute(),t=this.currentProjectSection,s=t&&this.$route.path.indexOf("manage")<0,n=t!==e||this.$route.params.production_id!==this.currentProductionId||this.currentEpisodeId&&this.$route.params.episode_id&&this.$route.params.episode_id!==this.currentEpisodeId;return t&&"newsFeed"===t&&(t="news-feed"),s&&n&&("assetTypes"===t&&(t="production-asset-types"),this.pushContextRoute(t)),this.$route.path},pushContextRoute:function(e){var t=this.currentEpisodeId,s=!!this.currentEpisodeId,n={name:e,params:{production_id:this.currentProductionId}};!this.productionMap[this.currentProductionId]||this.$route.params.production_id===this.currentProductionId&&t||(t=this.productionMap[this.currentProductionId].first_episode_id,s="tvshow"===this.productionMap[this.currentProductionId].production_type);var i=s&&"team"!==e&&"news-feed"!==e&&"schedule"!==e&&"episodes"!==e;i?(n.name="episode-".concat(e),n.params.episode_id=t):"episodes"!==e||s||(n.name="assets"),n.params.production_id&&this.$router.push(n)},clearContext:function(){this.silent=!0,this.currentProductionId=null,this.currentEpisodeId=null,this.currentProjectSection=null,this.setCurrentEpisode(null),this.setProduction(null),this.silent=!1},setProductionFromRoute:function(){var e=this,t=this.$route.params.production_id,s=this.$route.params.episode_id;this.currentProduction&&this.currentProductionId===t&&this.currentProduction.id===t?this.episodes.length<2&&this.isTVShow&&(!this.currentEpisode||this.currentEpisode.id!==s)?this.loadEpisodes((function(){e.setEpisodeFromRoute(),e.updateComboFromRoute()})):("open-productions"===this.assetsPath.name&&t&&this.setProduction(t),this.setEpisodeFromRoute(),this.updateComboFromRoute()):(this.setProduction(t),this.isTVShow?this.loadEpisodes((function(){e.setEpisodeFromRoute(),e.updateComboFromRoute()})):(this.clearEpisodes(),this.updateComboFromRoute()))},setEpisodeFromRoute:function(){var e=this.$route.params.episode_id;this.isTVShow?this.currentEpisode&&this.currentEpisodeId===e&&this.currentEpisode.id===e||!e||this.setCurrentEpisode(e):(this.silent=!0,this.clearEpisodes(),this.currentEpisodeId=null,this.silent=!1)},updateContext:function(e){e?this.setProductionFromRoute():this.clearContext()},updateComboFromRoute:function(){var e=this,t=this.$route.params.production_id,s=this.$route.params.episode_id,n=this.getCurrentSectionFromRoute();this.silent=!0,this.currentProductionId=t,this.currentEpisodeId=s,this.currentProjectSection=n,this.currentProjectSection=null,this.$nextTick((function(){e.currentProjectSection=n,e.silent=!1}))}}),watch:{$route:function(){var e=this.$route.params.production_id;this.updateContext(e)},currentProductionId:function(){this.silent||this.updateRoute()},currentEpisodeId:function(){var e=this;this.silent||this.updateRoute();var t=this.getCurrentSectionFromRoute();this.currentProjectSection=null,this.$nextTick((function(){e.currentProjectSection=t}))},currentProjectSection:function(){this.silent||this.updateRoute()}},socket:{events:{"notification:new":function(e){if(this.user.id===e.person_id){var t=e.notification_id;this.loadNotification(t)}},"person:update":function(e){this.user.id===e.person_id&&this.$refs.avatar.reloadAvatar()}}}},an=nn,on=(s("606f"),Object(m["a"])(an,Is,$s,!1,null,"58a33355",null)),rn=on.exports,cn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{class:{"action-topbar":!0,hidden:e.isHidden}},[s("div",{staticClass:"flexrow action-bar"},[s("div",{staticClass:"flexrow-item more-menu-icon",on:{click:e.toggleMenu}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item hide-small-screen"},[e._v(" "+e._s(e.currentMenuLabel)+" ")]),s("chevron-down-icon",{staticClass:"flexrow-item"})],1)]),"assignation"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("div",{staticClass:"assignation flexrow-item hide-small-screen"},[e._v(" "+e._s(e.$tc("tasks.assign",e.nbSelectedTasks,{nbSelectedTasks:e.nbSelectedTasks}))+" ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("people-field",{ref:"assignation-field",attrs:{people:e.currentTeam},model:{value:e.person,callback:function(t){e.person=t},expression:"person"}})],1),e.isAssignationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0,size:25}})],1):e._e(),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmAssign}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[e._v(" "+e._s(e.$t("main.or"))+" ")]),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[s("button",{staticClass:"button is-link clear-assignation-button hide-small-screen",on:{click:e.clearAssignation}},[e._v(" "+e._s(e.$t("tasks.clear_assignations"))+" ")])])]):s("div",{staticStyle:{"padding-left":"1em"}},[e._v(" "+e._s(e.$t("tasks.no_assignation_right"))+" ")])]):e._e(),"change-status"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.change_status_to"))+" ")]),s("div",{staticClass:"flexrow-item"},[s("combobox-status",{attrs:{"task-status-list":e.taskStatusForCurrentUser},model:{value:e.taskStatusId,callback:function(t){e.taskStatusId=t},expression:"taskStatusId"}})],1),e.isChangeStatusLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmTaskStatusChange}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isChangeStatusLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e(),e.isChangeStatusLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.statusComment,expression:"statusComment"}],staticClass:"comment-text input",attrs:{type:"text",placeholder:e.$t("tasks.with_comment")},domProps:{value:e.statusComment},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.confirmTaskStatusChange(t):null},input:function(t){t.target.composing||(e.statusComment=t.target.value)}}})])])]):e._e(),"priorities"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.change_priority"))+" ")]),s("div",{staticClass:"flexrow-item priority-combobox"},[s("combobox",{attrs:{options:e.priorityOptions},model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})],1),e.isChangePriorityLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmPriorityChange}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isChangePriorityLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e()])]):e._e(),"estimations"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.set_estimations"))+" ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.estimation,expression:"estimation"}],staticClass:"input estimation-input",attrs:{type:"number",min:"0"},domProps:{value:e.estimation},on:{input:function(t){t.target.composing||(e.estimation=t.target.value)}}})]),e.isChangeEstimationLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmEstimationChange}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isChangeEstimationLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e()])]):e._e(),"tasks"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.create_for_selection"))+" ")]),e.isCreationLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmTaskCreation}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),e.isCreationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0}})],1):e._e()])])]):e._e(),"playlists"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("playlists.create_for_selection"))+" ")]),s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmPlaylistGeneration}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])])]):e._e(),"delete-tasks"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.delete_for_selection"))+" ")]),e.isDeletionLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-danger confirm-button",on:{click:e.confirmTaskDeletion}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.errors.deleteTask?s("div",{staticClass:"flexrow-item error"},[e._v(" "+e._s(e.$t("tasks.delete_error"))+" ")]):e._e()])]):e._e(),"custom-actions"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("custom_actions.run_for_selection"))+" ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox-model",{attrs:{models:e.customActions},model:{value:e.customAction,callback:function(t){e.customAction=t},expression:"customAction"}})],1),e.customAction&&!e.customAction.is_ajax?s("div",{staticClass:"flexrow-item"},[s("form",{attrs:{target:"_blank",method:"POST",action:e.customAction.url}},[s("input",{attrs:{type:"hidden",id:"personid",name:"personid"},domProps:{value:e.user.id}}),s("input",{attrs:{type:"hidden",id:"personemail",name:"personemail"},domProps:{value:e.user.email}}),s("input",{attrs:{type:"hidden",id:"projectid",name:"projectid"},domProps:{value:e.currentProduction?e.currentProduction.id:null}}),s("input",{attrs:{type:"hidden",id:"currentpath",name:"currentpath"},domProps:{value:e.currentUrl}}),s("input",{attrs:{type:"hidden",id:"currentserver",name:"currentserver"},domProps:{value:e.currentHost}}),s("input",{attrs:{type:"hidden",id:"selection",name:"selection"},domProps:{value:e.selectedTaskIds}}),s("input",{attrs:{type:"hidden",id:"entitytype",name:"entitytype"},domProps:{value:e.currentEntityType}}),s("button",{staticClass:"button is-success",attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])]):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success",on:{click:e.runCustomAction}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])])]):e._e(),s("div",{staticClass:"flexrow-item clear-selection-container has-text-right"},[s("div",{staticClass:"flexrow has-text-right"},[s("div",{staticStyle:{flex:"1"}}),s("notification-bell",{staticClass:"flexrow-item",attrs:{"is-white":!0}}),s("div",{staticClass:"clear-selection flexrow flexrow-item",on:{click:e.clearSelectedTasks}},[s("x-icon",{staticClass:"flexrow-item"}),s("span",{staticClass:"flexrow-item hide-small-screen"},[e._v(" "+e._s(e.$t("main.clear_selection"))+" ")])],1)],1)])]),s("div",{ref:"moreMenu",class:{"more-menu":!0,"is-hidden":e.isMoreMenuDisplayed}},[e.isCurrentViewAsset||e.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("assignation")}}},[e._v(" "+e._s(e.$t("menu.assign_tasks"))+" ")]):e._e(),s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("change-status")}}},[e._v(" "+e._s(e.$t("menu.change_status"))+" ")]),e.isCurrentViewAsset||e.isCurrentViewShot||e.isCurrentViewPerson?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("priorities")}}},[e._v(" "+e._s(e.$t("menu.change_priority"))+" ")]):e._e(),e.isCurrentViewTaskType||e.isCurrentViewPerson?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("estimations")}}},[e._v(" "+e._s(e.$t("menu.set_estimations"))+" ")]):e._e(),!e.isCurrentViewAsset&&!e.isCurrentViewShot||e.isCurrentViewTaskType?e._e():s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("tasks")}}},[e._v(" "+e._s(e.$t("menu.create_tasks"))+" ")]),e.isCurrentViewShot&&!e.isCurrentViewTaskType?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("playlists")}}},[e._v(" "+e._s(e.$t("menu.generate_playlists"))+" ")]):e._e(),e.isCurrentViewAsset||e.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("delete-tasks")}}},[e._v(" "+e._s(e.$t("menu.delete_tasks"))+" ")]):e._e(),e.isCurrentViewTaskType?e._e():s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("custom-actions")}}},[e._v(" "+e._s(e.$t("menu.run_custom_action"))+" ")])])]),s("div",{class:{"menu-mask":!0,"is-hidden":e.isMoreMenuDisplayed},on:{click:e.toggleMenu}}),s("view-playlist-modal",{attrs:{active:e.modals.playlist,"task-ids":e.selectedTaskIds},on:{cancel:e.hidePlaylistModal}})],1)},ln=[],dn=(s("c740"),s("a9e3"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("combobox",{attrs:{label:e.label,disabled:e.disabled,options:e.modelOptions,value:e.currentModelId},on:{input:e.emitValue,enter:e.emitEnter}})}),un=[],pn={name:"combobox-model",components:{Combobox:Z["a"]},props:{label:{default:"",type:String},value:{default:function(){},type:Object},models:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{currentModelId:"",modelMap:{},modelOptions:[]}},mounted:function(){this.reset()},computed:{},methods:{emitValue:function(e){this.currentModelId=e;var t=this.modelMap[this.currentModelId];this.$emit("input",t)},emitEnter:function(e){this.currentModelId=e;var t=this.modelMap[this.currentModelId];this.$emit("enter",t)},reset:function(){var e=this;this.models.length>0&&(this.currentModelId=this.models[0].id,this.modelMap={},this.modelOptions=this.models.map((function(e){return{label:e.name,value:e.id}})),this.models.forEach((function(t){e.modelMap[t.id]=t})))}},watch:{models:function(){this.reset()}}},hn=pn,fn=Object(m["a"])(hn,dn,un,!1,null,"7a8e9a6c",null),mn=fn.exports,bn=s("56a0"),_n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active},attrs:{id:"temp-playlist-modal"}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content wide"},[s("div",{staticClass:"box"},[e.isPlaylistPage?e._e():s("playlist-player",{ref:"playlist-player",attrs:{playlist:e.currentPlaylist,entities:e.currentEntities,"is-loading":e.isLoading,"temp-mode":!0,"is-asset-playlist":e.isAssetPlaylist},on:{annotationchanged:e.onAnnotationChanged}})],1)])])},vn=[],yn=s("1ea9");function gn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var wn={name:"view-playlist-modal",mixins:[Q["a"]],components:{PlaylistPlayer:yn["a"]},props:{active:{default:!1,type:Boolean}},data:function(){return{currentPlaylist:{id:"temp",name:"Temporary playlist",shots:[],for_entity:"shot"},currentEntities:{},isLoading:!1}},computed:kn({},Object(l["c"])(["taskMap","selectedTasks","shotMap"]),{isPlaylistPage:function(){return this.$route.path.indexOf("playlist")>0},taskIds:function(){return Object.keys(this.selectedTasks)},playlistPlayer:function(){return this.$refs["playlist-player"]},isAssetPlaylist:function(){return this.currentPlaylist.shots.length>0&&void 0===this.currentPlaylist.shots.sequence_name}}),methods:kn({},Object(l["b"])(["loadTempPlaylist","updatePreviewAnnotation"]),{onAnnotationChanged:function(e){var t=e.preview,s=e.annotations,n=t.task_id;this.updatePreviewAnnotation({taskId:n,preview:t,annotations:s})},setupEntities:function(e){var t={};e.forEach((function(e){t[e.id]=e})),console.log("setupEntities, step 1"),this.currentPlaylist.shots=t,this.currentEntities=t,console.log("setupEntities, step 2",t)},initPlaylistPlayer:function(){this.playlistPlayer.setupFabricCanvas()}}),watch:{active:function(){var e=this;this.active?(this.currentEntities={},this.initPlaylistPlayer(),this.isLoading=!0,this.loadTempPlaylist(this.taskIds).then((function(t){e.setupEntities(t),e.isLoading=!1,e.isAssetPlaylist?e.currentPlaylist.for_entity="asset":e.currentPlaylist.for_entity="shot"})).catch(console.error)):(this.playlistPlayer.pause(),this.currentEntities={})}}},Sn=wn,On=(s("9f45"),Object(m["a"])(Sn,_n,vn,!1,null,"6547a1de",null)),Cn=On.exports,Tn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-autocomplete",{ref:"autocomplete",attrs:{items:e.items,"get-label":e.getAssignationLabel,"component-item":e.assignationItem,"min-len":1,"auto-select-one-item":!1,"input-attrs":{placeholder:this.$t("people.select_person")}},on:{"update-items":e.update,input:e.onChange},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}})},Pn=[],En=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{"no-cache":!0,person:e.item,size:30}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.item.name)+" ")])],1)},jn=[],xn={name:"assignation-item",components:{PeopleAvatar:ue["a"]},props:{item:{required:!0},searchText:{required:!0}},computed:{nonHighilightedText:function(){return this.searchText===this.item.first_name?"&nbsp;"+this.item.name.substring(this.searchText.length):this.item.name.substring(this.searchText.length)}}},Dn=xn,An=(s("620e"),Object(m["a"])(Dn,En,jn,!1,null,"c09f3b40",null)),Mn=An.exports,Ln=s("2017");function In(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?In(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):In(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var qn={name:"people-field",data:function(){return{assignationItem:Mn,items:[],item:{},searchText:""}},created:function(){this.items=this.people,this.item=this.value,this.index=Object(Ln["c"])(this.people)},mounted:function(){var e=this;this.items=this.people,this.$refs.autocomplete.$el.children[0].children[0].addEventListener("keyup",(function(t){13===t.keyCode&&e.item&&e.$emit("enter"),e.searchText=e.$refs.autocomplete.$el.children[0].children[0].value,e.item||0!==e.searchText.length||(e.items=[])}))},props:{value:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}}},computed:$n({},Object(l["c"])(["peopleIndex"])),methods:{getAssignationLabel:function(e){return e?e.name:""},update:function(e){if(e&&e.length>0){var t=Object(Ln["h"])(this.index,[e]);this.items=t}else this.items=this.people},onChange:function(){this.$emit("input",this.item)},clear:function(){this.item=null},focus:function(){var e=this.$el.querySelector(".v-autocomplete-input");e&&e.focus()}},watch:{item:function(){this.item||(this.items=this.people)},people:function(){this.items=null,this.items=this.people,this.index=Object(Ln["c"])(this.people)}}},Fn=qn,Nn=(s("f883"),Object(m["a"])(Fn,Tn,Pn,!1,null,null,null)),Rn=Nn.exports;function Bn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Vn={name:"action-topbar",components:{ChevronDownIcon:U["e"],Combobox:Z["a"],ComboboxModel:mn,ComboboxStatus:bn["a"],NotificationBell:Us,PeopleField:Rn,Spinner:d["a"],XIcon:U["N"],ViewPlaylistModal:Cn},data:function(){return{currentTeam:[],customAction:{},customActions:[],estimation:0,isAssignationLoading:!1,isChangeEstimationLoading:!1,isChangePriorityLoading:!1,isChangeStatusLoading:!1,isCreationLoading:!1,isDeletionLoading:!1,isMoreMenuDisplayed:!0,person:null,priority:"0",selectedBar:"assignation",selectedTaskIds:[],taskStatusId:"",statusComment:"",modals:{playlist:!1},priorityOptions:[{label:this.$t("tasks.priority.normal"),value:"0"},{label:this.$t("tasks.priority.high"),value:"1"},{label:this.$t("tasks.priority.very_high"),value:"2"},{label:this.$t("tasks.priority.emergency"),value:"3"}],errors:{deleteTask:!1}}},computed:zn({},Object(l["c"])(["allCustomActions","assetMap","assetCustomActions","currentProduction","getPersonOptions","isCurrentUserManager","nbSelectedTasks","nbSelectedValidations","organisation","people","personMap","selectedTasks","shotCustomActions","taskStatusForCurrentUser","user"]),{isHidden:function(){return 0===this.nbSelectedTasks&&0===this.nbSelectedValidations||!(this.isCurrentViewAsset||this.isCurrentViewTodos||this.isCurrentViewShot)||!this.isCurrentViewTodos&&!this.isCurrentUserManager},currentUrl:function(){return this.$route.path},currentHost:function(){return window.location.host},currentEntityType:function(){return this.isCurrentViewAsset?"asset":"shot"},defaultCustomAction:function(){return this.customActions.length>0?this.customActions[0]:{}},isCurrentViewAsset:function(){return this.$route.path.indexOf("asset")>0&&!this.$route.params.asset_id},isCurrentViewShot:function(){return this.$route.path.indexOf("shot")>0&&!this.$route.params.shot_id},isCurrentViewTodos:function(){return this.$route.path.indexOf("todos")>0||this.$route.path.indexOf("people/")>0},isCurrentViewPerson:function(){return this.$route.path.indexOf("people/")>0},isCurrentViewPersonTasks:function(){return this.$route.path.indexOf("todos")>0},isCurrentViewTaskType:function(){return this.$route.path.indexOf("task-type")>0},isList:function(){return this.isCurrentViewAsset||this.isCurrentViewShot},selectedPersonId:function(){return this.person?this.person.id:null},currentProductionTeam:function(){return this.currentProduction?this.currentProduction.team:[]},currentMenuLabel:function(){var e={assignation:"menu.assign_tasks",estimations:"menu.set_estimations","change-status":"menu.change_status",priorities:"menu.change_priority",playlists:"menu.generate_playlists",tasks:"menu.create_tasks","delete-tasks":"menu.delete_tasks","custom-actions":"menu.run_custom_action"};return this.$t(e[this.selectedBar])},storagePrefix:function(){var e="todos-";return(this.isCurrentViewAsset||this.isCurrentViewShot)&&(e="entities-"),this.isCurrentViewTaskType&&(e="tasks-"),e}}),methods:zn({},Object(l["b"])(["assignSelectedTasks","changeSelectedEstimations","createSelectedTasks","deleteSelectedTasks","unassignSelectedTasks","changeSelectedTaskStatus","changeSelectedPriorities","clearSelectedTasks","postCustomAction"]),{confirmAssign:function(){var e=this;this.selectedPersonId&&(this.isAssignationLoading=!0,this.assignSelectedTasks({personId:this.selectedPersonId,callback:function(){e.isAssignationLoading=!1}}))},confirmTaskStatusChange:function(){var e=this;this.isChangeStatusLoading=!0,this.taskStatusId||(this.taskStatusId=this.taskStatusForCurrentUser[0].id),this.changeSelectedTaskStatus({taskStatusId:this.taskStatusId,comment:this.statusComment,callback:function(){e.isChangeStatusLoading=!1,e.statusComment=""}})},confirmPriorityChange:function(){var e=this;this.isChangePriorityLoading=!0,this.changeSelectedPriorities({priority:Number(this.priority),callback:function(){e.isChangePriorityLoading=!1}})},confirmEstimationChange:function(){var e=this;this.isChangeEstimationLoading=!0;var t=this.organisation.hours_by_day,s=Math.floor(this.estimation*t*60);this.changeSelectedEstimations(s).then((function(){e.isChangeEstimationLoading=!1})).catch((function(t){e.isChangeEstimationLoading=!1,e.isChangeEstimationError=!0,console.error(t)}))},confirmTaskCreation:function(){var e=this,t=this.$route.path.indexOf("shots")>0?"shots":"assets";this.isCreationLoading=!0,this.createSelectedTasks({type:t,projectId:this.currentProduction.id,callback:function(){e.isCreationLoading=!1}})},confirmTaskDeletion:function(){var e=this;this.isDeletionLoading=!0,this.errors.deleteTask=!1,this.deleteSelectedTasks().then((function(){e.isDeletionLoading=!1})).catch((function(t){console.error(t),e.isDeletionLoading=!1,e.errors.deleteTask=!0}))},confirmPlaylistGeneration:function(){this.modals.playlist=!0},hidePlaylistModal:function(){this.modals.playlist=!1},clearAssignation:function(){var e=this;this.isAssignationLoading=!0,this.unassignSelectedTasks({callback:function(){e.isAssignationLoading=!1}})},selectBar:function(e){localStorage.setItem("".concat(this.storagePrefix,"-selected-bar"),e,{expires:"1M"}),this.selectedBar=e,this.toggleMenu()},toggleMenu:function(){this.isMoreMenuDisplayed=!this.isMoreMenuDisplayed},setCurrentTeam:function(){var e=this;return this.people.length>10&&this.currentProduction?this.currentTeam=Object(Me["f"])(this.currentProduction.team.map((function(t){return e.personMap[t]}))):this.currentTeam=this.people,this.currentTeam},runCustomAction:function(){this.postCustomAction({data:{entitytype:this.currentEntityType,originurl:this.currentUrl,originserver:this.currentHost,selection:this.selectedTaskIds,productionid:this.currentProduction.id,userid:this.user.id,useremail:this.user.email},url:this.customAction.url})},onKeyDown:function(e){27===e.keyCode&&(this.modals.playlist||this.$store.commit("CLEAR_SELECTED_TASKS"))}}),mounted:function(){this.customAction=this.defaultCustomAction,this.setCurrentTeam()},watch:{isHidden:function(){if(this.isHidden)window.removeEventListener("keydown",this.onKeyDown);else{window.addEventListener("keydown",this.onKeyDown);var e=this.storagePrefix,t=localStorage.getItem("".concat(e,"-selected-bar"));t?this.selectedBar=t:this.isCurrentViewAsset||this.isCurrentViewShot?this.selectedBar="assignation":this.selectedBar="change-status"}},nbSelectedTasks:function(){var e=this;if(this.selectedTaskIds=Object.keys(this.selectedTasks),this.nbSelectedTasks>0){for(var t=!1,s=!1,n=0,i=Object.keys(this.selectedTasks);n<i.length;n++){var a=i[n],o=this.selectedTasks[a];o.sequence_name?t=!0:s=!0}if(this.customActions=t&&s?this.allCustomActions:t?this.shotCustomActions:this.assetCustomActions,this.customActions.length>0){var r=this.customAction.url&&this.customActions.findIndex((function(t){return t.id===e.customAction.id}))>=0;r||(this.customAction=this.customActions[0])}}},selectedBar:function(){var e=this;"assignation"===this.selectedBar&&this.$nextTick((function(){e.$refs["assignation-field"].focus()}))},currentProduction:function(){this.setCurrentTeam()},currentProductionTeam:function(){this.setCurrentTeam()},people:function(){this.setCurrentTeam()},$route:function(){this.selectedTaskIds=Object.keys(this.selectedTasks),this.nbSelectedTasks>0&&this.clearSelectedTasks()}}},Un=Vn,Hn=(s("deb3"),Object(m["a"])(Un,cn,ln,!1,null,"198ad766",null)),Yn=Hn.exports,Wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar"},[n("aside",{class:{hidden:e.isSidebarHidden}},[n("div",[n("router-link",{staticClass:"home-link",attrs:{to:"/"},on:{click:function(t){return e.toggleSidebar()}}},[n("div",{staticClass:"company-logo has-text-centered"},[e.organisation&&e.organisation.has_avatar?n("img",{attrs:{src:e.logoPath}}):n("img",{attrs:{src:s("ad6c")}})])]),n("section",[e.isCurrentUserClient?e._e():n("div",[n("h2",[e._v(e._s(e.$t("main.user")))]),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"todos"}}},[e._v(" "+e._s(e.$t("tasks.my_tasks"))+" ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"open-productions"}}},[e._v(" "+e._s(e.$t("productions.open_productions"))+" ")])],1)]),e.isCurrentUserAdmin?n("div",[n("h2",[e._v(e._s(e.$t("main.studio")))]),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"productions"}}},[e._v(" "+e._s(e.$t("productions.title"))+" ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"people"}}},[e._v(" "+e._s(e.$t("people.title"))+" ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"timesheets"}}},[e._v(" "+e._s(e.$t("timesheets.title"))+" ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"main-schedule"}}},[e._v(" "+e._s(e.$t("schedule.title_main"))+" ")])],1)]):e._e(),e.isCurrentUserAdmin?n("div",[n("h2",[e._v(e._s(e.$t("main.admin")))]),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:"/task-types"}},[e._v(" "+e._s(e.$t("task_types.title"))+" ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{staticClass:"task-status-link",attrs:{to:"/task-status"}},[e._v(" "+e._s(e.$t("task_status.title"))+" ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:"/asset-types"}},[e._v(" "+e._s(e.$t("asset_types.title"))+" ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"custom-actions"}}},[e._v(" "+e._s(e.$t("custom_actions.title"))+" ")])],1),n("p",{on:{click:function(t){return e.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"settings"}}},[e._v(" "+e._s(e.$t("settings.title"))+" ")])],1)]):e._e()])],1)]),n("div",{class:{"is-active":!e.isSidebarHidden},attrs:{id:"c-mask"},on:{click:function(t){return e.toggleSidebar()}}})])},Gn=[];function Kn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Kn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Jn={name:"sidebar",data:function(){return{title:"",logoPath:""}},mounted:function(){this.reset()},computed:Qn({},Object(l["c"])(["isSidebarHidden","isCurrentUserClient","isCurrentUserCGArtist","isCurrentUserManager","isCurrentUserAdmin","organisation"])),methods:Qn({},Object(l["b"])(["toggleSidebar"]),{reset:function(){this.title=this.organisation.name,this.logoPath="/api/pictures/thumbnails/organisations/"+"".concat(this.organisation.id,".png?t=")+(new Date).toISOString()}}),watch:{organisation:function(){this.reset()}}},Xn=Jn,Zn=(s("bf3e"),Object(m["a"])(Xn,Wn,Gn,!1,null,"4bfc42d9",null)),ei=Zn.exports,ti={name:"main-wrapper",components:{ActionTopbar:Yn,Topbar:rn,Sidebar:ei}},si=ti,ni=(s("c266"),Object(m["a"])(si,Ms,Ls,!1,null,null,null)),ii=ni.exports,ai=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"notifications page"},[e.loading.notifications||e.notifications&&0!==e.notifications.length?e._e():s("div",{staticClass:"empty-list has-text-centered"},[e._v(" "+e._s(e.$t("notifications.no_notifications"))+" ")]),e.loading.notifications?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e._e(),e._l(e.notifications,(function(t){return s("div",{key:t.id,class:{notification:!0,unread:!t.read,selected:t.id===e.currentNotificationId},on:{click:function(s){return e.onNotificationSelected(t)}}},[s("div",{staticClass:"flexrow notification-line"},[s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[e.isMention(t)?s("at-sign-icon",{staticClass:"icon flexrow-item"}):e._e(),e.isComment(t)?s("message-square-icon",{staticClass:"icon flexrow-item"}):e._e(),e.isAssignation(t)?s("user-icon",{staticClass:"icon flexrow-item"}):e._e(),s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNotification(t),"production-id":t.project_id}})],1),s("div",{staticClass:"mt1"},[t.change?s("validation-tag",{staticClass:"validation-tag flexrow-item mt1",attrs:{task:e.buildTaskFromNotification(t)}}):e._e()],1)]),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"notification-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30}}):e._e(),s("router-link",{staticClass:"person-name flexrow-item",attrs:{to:{name:"person",params:{person_id:t.author_id}}}},[e._v(" "+e._s(e.personName(t))+" ")]),e.isComment(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v(" "+e._s(e.$t("notifications.commented_on"))+" ")]):e._e(),e.isAssignation(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v(" "+e._s(e.$t("notifications.assigned_you"))+" ")]):e._e(),e.isMention(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v(" "+e._s(e.$t("notifications.mention_you_on"))+" ")]):e._e(),s("router-link",{staticClass:" flexrow-item",attrs:{to:e.entityPath(t)}},[e._v(" "+e._s(t.project_name)+" / "+e._s(t.full_entity_name)+" ")])],1)]),(e.isComment(t)||e.isMention(t))&&t.comment_text?s("div",{staticClass:"comment-text",domProps:{innerHTML:e._s(e.renderComment(t.comment_text,t.mentions,e.personMap))}}):e._e(),t.preview_file_id?s("div",{staticClass:"flexrow"},[s("paperclip-icon",{staticClass:"icon flexrow-item"}),t.preview_file_id?s("div",{staticClass:"thumbnail-picture-wrapper flexrow-item"},[s("entity-thumbnail",{attrs:{entity:{preview_file_id:t.preview_file_id},height:40}})],1):e._e()],1):e._e(),!e.isComment(t)&&!e.isMention(t)||t.comment_text?e._e():s("div",{staticClass:"comment-text"},[e._v(" "+e._s(e.$t("comments.empty_text"))+" ")]),s("div",{staticClass:"date flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.formatDate(t.created_at))+" ")])])])])])}))],2)]),e.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:e.currentTask,"is-loading":e.loading.currentTask}})],1):e._e()])},oi=[],ri=s("e0c1"),ci=s.n(ri),li=s("66be"),di=s("274f");function ui(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ui(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var hi={name:"notification-page",components:{AtSignIcon:U["a"],EntityThumbnail:ve["a"],PaperclipIcon:U["y"],PeopleAvatar:ue["a"],MessageSquareIcon:U["x"],Spinner:d["a"],TaskInfo:vs["a"],TaskTypeName:di["a"],UserIcon:U["L"],ValidationTag:de["a"]},data:function(){return{loading:{notifications:!1,currentTask:!0},errors:{notifications:!1},currentTask:null,currentNotificationId:null}},mounted:function(){var e=this;this.loading.notifications=!0,this.errors.notifications=!1,this.currentTask=null,this.loadNotifications().then((function(){e.loading.notifications=!1})).catch((function(t){console.error(t),e.errors.notifications=!0}))},computed:pi({},Object(l["c"])(["notifications","personMap","taskTypeMap","taskStatusMap","personMap"])),methods:pi({},Object(l["b"])(["loadNotifications","loadTask","markAllNotificationsAsRead"]),{entityPath:function(e){var t=this.getTaskType(e).for_shots?"shot":"asset",s={name:"task",params:{production_id:e.project_id,task_id:e.task_id,type:t}};return e.episode_id&&(s.name="episode-task",s.params.episode_id=e.episode_id),s},getTaskType:function(e){return this.taskTypeMap[e.task_type_id]},formatDate:function(e){var t=A.a.tz(e,"UTC");return e=A()(t.format()).fromNow(),e[0].toUpperCase()+e.slice(1)},compileMarkdown:function(e){return ci()(e||"")},personName:function(e){var t=this.personMap[e.author_id];return t?t.full_name:""},buildTaskFromNotification:function(e){return{id:e.task_id,task_status_id:e.task_status_id,task_type_id:e.task_type_id,episode_id:e.episode_id}},buildTaskTypeFromNotification:function(e){return pi({},this.taskTypeMap[e.task_type_id],{episode_id:e.episode_id})},onNotificationSelected:function(e){var t=this;this.loading.currentTask=!0,this.loadTask({taskId:e.task_id,callback:function(s,n){s&&console.error(s),t.loading.currentTask=!1,t.currentTask=n,t.currentNotificationId=e.id}})},renderComment:li["b"],isComment:function(e){return!e.notification_type||"comment"===e.notification_type},isMention:function(e){return"mention"===e.notification_type},isAssignation:function(e){return"assignation"===e.notification_type}}),socket:{events:{"preview-file:add-file":function(e){var t=e.comment_id,s=e.preview_file_id;this.$store.commit("NOTIFICATION_ADD_PREVIEW",{previewId:s,commentId:t})}}},beforeDestroy:function(){this.markAllNotificationsAsRead()},metaInfo:function(){return{title:"".concat(this.$t("notifications.title")," - Kitsu")}}},fi=hi,mi=(s("bd9d"),Object(m["a"])(fi,ai,oi,!1,null,"69381fae",null)),bi=mi.exports,_i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"open-productions page"},[e.isOpenProductionsLoading?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e.openProductions.length>0?s("div",{staticClass:"open-productions-box"},[s("img",{attrs:{src:""}}),s("h1",{staticClass:"title has-text-centered"},[e._v(" "+e._s(e.$t("productions.home.title"))+" ")]),s("div",{class:{"open-productions-list":!0,"is-grid":e.openProductions&&e.openProductions.length>4}},e._l(e.openProductions,(function(t){return s("div",{key:t.id,staticClass:"open-production has-text-centered"},[s("router-link",{attrs:{to:e.getPath(t)}},[s("div",{staticClass:"avatar has-text-centered",style:{background:e.getAvatarColor(t)}},[t.has_avatar?s("img",{attrs:{src:e.getThumbnailPath(t)}}):s("span",[e._v(" "+e._s(e.generateAvatar(t))+" ")])]),s("div",{staticClass:"production-name"},[e._v(" "+e._s(t.name)+" ")])]),s("router-link",{staticClass:"secondary",attrs:{to:e.assetsPath(t)}},[e._v(" "+e._s(e.$t("assets.title"))+" ")]),e._v(" - "),s("router-link",{staticClass:"secondary",attrs:{to:e.shotsPath(t)}},[e._v(" "+e._s(e.$t("shots.title"))+" ")])],1)})),0),e.isCurrentUserClient?e._e():s("div",{staticClass:"has-text-centered new-production-link"},[s("a",{on:{click:e.showNewModal}},[e._v(" "+e._s(e.$t("productions.home.create_new"))+" ")])])]):s("div",{staticClass:"has-text-centered welcome"},[e._m(0),s("h1",{staticClass:"title has-text-centered"},[e._v(" "+e._s(e.$t("productions.home.welcome"))+" ")]),e.isCurrentUserManager?s("div",[s("p",{staticClass:"has-text-centered info"},[e._v(" "+e._s(e.$t("productions.home.empty"))+" ")]),s("p",{staticClass:"has-text-centered"},[s("button-simple",{staticClass:"level-item big-button",attrs:{text:e.$t("productions.home.create_new"),"is-responsive":!1},on:{click:e.showNewModal}})],1)]):e.isCurrentUserClient?s("div",[s("p",{staticClass:"has-text-centered"},[e._v(" "+e._s(e.$t("productions.home.no_prod_for_client"))+" ")])]):s("div",[s("p",{staticClass:"has-text-centered"},[e._v(" "+e._s(e.$t("productions.home.no_task"))+" ")])])]),s("edit-production-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.editProduction.isLoading,"is-error":e.editProduction.isError},on:{confirm:e.confirmEditProduction,cancel:e.hideNewModal}})],1)},vi=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"kitsu-logo info"},[n("img",{attrs:{src:s("cb88")}})])}],yi=s("7930"),gi=s("1d3d");function ki(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ki(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Si={name:"open-productions",components:{ButtonSimple:H["a"],EditProductionModal:gi["a"],Spinner:d["a"]},data:function(){return{modals:{isNewDisplayed:!1}}},computed:wi({},Object(l["c"])(["editProduction","isCurrentUserManager","isCurrentUserClient","isOpenProductionsLoading","lastProductionScreen","openProductions"])),methods:wi({},Object(l["b"])(["newProduction"]),{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return yi["a"].fromString(e.name)},getPath:function(e){return this.sectionPath(e,this.lastProductionScreen)},assetsPath:function(e){return this.sectionPath(e,"assets")},shotsPath:function(e){return this.sectionPath(e,"shots")},sequencesPath:function(e){return this.sectionPath(e,"sequences")},sectionPath:function(e,t){var s={name:t,params:{production_id:e.id}};return"tvshow"===e.production_type&&(s.name="episode-".concat(t),s.params.episode_id=e.first_episode_id),s},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")},confirmEditProduction:function(e){var t=this;this.newProduction({data:e,callback:function(e,s){e||(t.modals.isNewDisplayed=!1)}})},showNewModal:function(){this.modals.isNewDisplayed=!0},hideNewModal:function(){this.modals.isNewDisplayed=!1}}),watch:{},metaInfo:function(){return{title:"".concat(this.$t("productions.home.title")," - Kitsu")}}},Oi=Si,Ci=(s("99e1"),Object(m["a"])(Oi,_i,vi,!1,null,"22e1ab85",null)),Ti=Ci.exports,Pi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"news page"},[s("div",{staticClass:"timeline-wrapper"},[s("div",{staticClass:"filters flexrow"},[s("span",{staticClass:"filler"}),s("combobox",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.infos"),options:e.previewOptions},model:{value:e.previewMode,callback:function(t){e.previewMode=t},expression:"previewMode"}}),s("combobox-status",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.task_status"),"task-status-list":e.taskStatusList},model:{value:e.taskStatusId,callback:function(t){e.taskStatusId=t},expression:"taskStatusId"}}),s("combobox-task-type",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.task_type"),"task-type-list":e.taskTypeList},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),s("span",{staticClass:"filler"})],1),s("div",{staticClass:"timeline"},[e.loading.news||e.newsList&&0!==e.newsList.length?e._e():s("div",{staticClass:"empty-list has-text-centered"},[e._v(" "+e._s(e.$t("news.no_news"))+" ")]),e.loading.news?s("div",{staticClass:"has-text-centered mt2"},[s("spinner")],1):e._e(),e._l(e.newsListByDay,(function(t){return s("div",{key:t.length>0?t[0].created_at:""},[s("div",{staticClass:"has-text-centered subtitle timeline-entry"},[s("span",{staticClass:"big-dot"}),e._v(" "+e._s(t.length>0?e.formatDay(t[0].created_at):"")+" ")]),e._l(t,(function(t){return s("div",{key:"news-"+t.id,ref:"news-"+t.id,refInFor:!0},["comments"===e.previewMode?s("div",[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:t.id===e.currentNewsId},on:{click:function(s){return s.preventDefault(),e.onNewsSelected(t)}}},[s("span",{class:{dot:!0,red:e.hasRetakeValue(t),green:e.hasDoneValue(t)}}),s("span",{staticClass:"date flexrow-item"},[e._v(" "+e._s(e.formatTime(t.created_at))+" ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNews(t),"production-id":e.currentProduction.id}})],1),s("div",{staticClass:"flexrow-item validation-wrapper"},[t.change?s("validation-tag",{staticClass:"validation-tag",attrs:{task:e.buildTaskFromNews(t)}}):e._e()],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30,"no-link":!0}}):e._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[e._v(" "+e._s(e.personName(t))+" ")]),s("span",[e._v(" "+e._s(e.$t("news.commented_on"))+" ")]),t.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:t.task_entity_id,preview_file_id:t.entity_preview_file_id}}}):e._e(),s("span",{staticClass:"strong"},[e._v(" "+e._s(t.full_entity_name)+" ")])],1)],1)])])])]):e._e(),t.preview_file_id&&"previews"===e.previewMode?s("div",{staticClass:"preview"},[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:t.id===e.currentNewsId},on:{click:function(s){return s.preventDefault(),e.onNewsSelected(t)}}},[s("span",{class:{dot:!0,red:e.hasRetakeValue(t),green:e.hasDoneValue(t)}}),s("span",{staticClass:"date flexrow-item"},[e._v(" "+e._s(e.formatTime(t.created_at))+" ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNews(t),"production-id":e.currentProduction.id}})],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30,"no-link":!0}}):e._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[e._v(" "+e._s(e.personName(t))+" ")]),s("span",[e._v(" "+e._s(e.$t("news.set_preview_on"))+" ")]),t.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:t.task_entity_id,preview_file_id:t.entity_preview_file_id}}}):e._e(),s("span",{staticClass:"strong"},[e._v(" "+e._s(t.full_entity_name)+" ")])],1)],1)])])]),"previews"==e.previewMode?s("div",{staticClass:"has-text-centered"},["mp4"==t.preview_file_extension?s("div",[s("video-player",{attrs:{preview:{id:t.preview_file_id},"task-type-map":e.taskTypeMap,"read-only":!0,light:!0}})],1):"obj"==t.preview_file_extension?s("model-viewer",{staticClass:"model-viewer",attrs:{"preview-url":e.getPreviewPath(t),"preview-dl-path":e.getPreviewDlPath(t),light:!0,"read-only":!0}}):"png"==t.preview_file_extension?s("picture-viewer",{ref:"preview-picture",refInFor:!0,attrs:{preview:{previews:[{id:t.preview_file_id}]},light:!0,"read-only":!0}}):s("div",{staticClass:"preview-standard-file"},[s("a",{ref:"preview-file",refInFor:!0,staticClass:"button",attrs:{href:e.getPreviewDlPath(t)}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[e._v(" "+e._s(e.$t("tasks.download_pdf_file",{extension:t.preview_file_extension}))+" ")])],1)])],1):e._e()]):e._e()])}))],2)}))],2)])])]),e.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:e.currentTask,"is-loading":e.loading.currentTask}})],1):e._e()])},Ei=[],ji=(s("caad"),s("8078")),xi=s("41e2"),Di=s("7d5f");function Ai(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ai(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Li={name:"news-page",components:{Combobox:Z["a"],ComboboxStatus:bn["a"],ComboboxTaskType:Et["a"],DownloadIcon:U["m"],EntityThumbnail:ve["a"],ModelViewer:ji["a"],PeopleAvatar:ue["a"],PictureViewer:xi["a"],TaskTypeName:di["a"],ValidationTag:de["a"],Spinner:d["a"],TaskInfo:vs["a"],VideoPlayer:Di["a"]},data:function(){return{currentNewsId:null,currentPage:1,currentTask:null,errors:{news:!1},loading:{more:!1,news:!1,currentTask:!0},previewMode:"comments",previewOptions:[{label:this.$t("news.only_comments"),value:"comments"},{label:this.$t("news.only_previews"),value:"previews"}],taskStatusId:"",taskTypeId:""}},mounted:function(){this.$options.silent=!0,this.previewMode=localStorage.getItem("news:preview-mode")||"comments",this.taskTypeId=localStorage.getItem("news:task-type-id")||"",this.taskStatusId=localStorage.getItem("news:task-status-id")||"",this.$options.silent=!1,window.addEventListener("keydown",this.onKeyDown,!1),(0===this.newsList.length||this.currentProduction&&this.newsList[0].project_id!==this.currentProduction.id)&&!this.loading.news&&this.init()},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Mi({},Object(l["c"])(["currentProduction","newsList","newsListByDay","personMap","taskStatusMap","taskTypeMap","taskStatus","taskTypes","user"]),{params:function(){var e={productionId:this.currentProduction.id,only_preview:"previews"===this.previewMode,page_size:"previews"===this.previewMode?6:50,task_type_id:""!==this.taskTypeId?this.taskTypeId:void 0,task_status_id:""!==this.taskStatusId?this.taskStatusId:void 0,page:this.currentPage};return e},taskStatusList:function(){return[{id:"",color:"#999",short_name:this.$t("news.all")}].concat(Object(Me["d"])(Object(K["a"])(this.taskStatus)))},taskTypeList:function(){return[{id:"",color:"#999",name:this.$t("news.all")}].concat(Object(Me["d"])(Object(K["a"])(this.taskTypes)))},timezone:function(){return this.user.timezone||A.a.tz.guess()}}),methods:Mi({},Object(l["b"])(["loadNews","loadSingleNews","loadMoreNews","loadTask"]),{onKeyDown:function(e){if(this.newsList&&this.newsList.length>0&&e.altKey){var t=this.lastSelection?this.lastSelection:0;[37,38].includes(e.keyCode)?(t=t-1<0?t=this.newsList.length-1:t-1,this.onNewsSelected(this.newsList[t])):[39,40].includes(e.keyCode)&&(t=t+1>=this.newsList.length?t=0:t+1,this.onNewsSelected(this.newsList[t]))}},loadFollowingNews:function(){var e=this;this.loading.more||this.loading.news||(this.loading.more=!0,this.currentPage+=1,this.loadMoreNews(this.params).then((function(){e.loading.more=!1})))},formatDay:function(e){var t=A.a.tz(e,"UTC").tz(this.timezone);return t.format("LL")},formatTime:function(e){var t=A.a.tz(e,"UTC").tz(this.timezone);return t.format("HH:mm")},personName:function(e){var t=this.personMap[e.author_id];return t?t.full_name:""},buildTaskFromNews:function(e){return{id:e.task_id,task_status_id:e.task_status_id,task_type_id:e.task_type_id,episode_id:e.episode_id}},buildTaskTypeFromNews:function(e){return Mi({},this.taskTypeMap[e.task_type_id],{episode_id:e.episode_id})},onNewsSelected:function(e){var t=this;this.loading.currentTask=!0,this.lastSelection=this.newsList.findIndex((function(t){return t.id===e.id})),this.loadTask({taskId:e.task_id,callback:function(s,n){s&&console.error(s),t.loading.currentTask=!1,t.currentTask=n,t.currentNewsId=e.id}}),this.scrollToLine(e)},scrollToLine:function(e){var t=this.$refs["news-".concat(e.id)];if(t&&this.$refs.body){var s=30,n=t[0].getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),a=n.bottom>i.bottom-s,o=n.top<i.top+s;if(a){var r=n.bottom-i.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=i.top-n.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},init:function(){var e=this;this.currentPage=1,this.loading.news=!0,this.errors.news=!1,this.currentTask=null,this.loadNews(this.params).then((function(){e.loading.news=!1})).catch((function(t){console.error(t),e.loading.news=!1,e.errors.news=!0}))},onBodyScroll:function(e,t){var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&(this.newsList.length%50===0&&"comments"===this.previewMode||this.newsList.length%6===0&&"previews"===this.previewMode)&&this.loadFollowingNews()},getPreviewPath:function(e){var t=e.preview_file_id,s=e.preview_file_extension;return"/api/pictures/originals/preview-files/".concat(t,".").concat(s)},getPreviewDlPath:function(e){var t=e.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,"/download")},hasRetakeValue:function(e){var t=this.taskStatusMap[e.task_status_id];return!!t&&(e.change&&t.is_retake)},hasDoneValue:function(e){var t=this.taskStatusMap[e.task_status_id];return!!t&&(e.change&&t.is_done)}}),socket:{events:{"preview-file:add-file":function(e){var t=e.comment_id,s=e.preview_file_id,n=e.extension;this.$store.commit("NEWS_ADD_PREVIEW",{previewId:s,commentId:t,extension:n})},"news:new":function(e){e.project_id!==this.currentProduction.id||this.taskTypeId&&this.taskTypeId!==e.task_type_id||this.taskStatusId&&this.taskStatusId!==e.task_status_id||this.loadSingleNews({productionId:this.currentProduction.id,newsId:e.news_id})}}},watch:{currentProduction:function(){this.$options.silent||this.loading.news||this.init()},previewMode:function(){localStorage.setItem("news:preview-mode",this.previewMode),this.$options.silent||this.init()},taskTypeId:function(){localStorage.setItem("news:task-type-id",this.taskTypeId),this.$options.silent||this.init()},taskStatusId:function(){localStorage.setItem("news:task-status-id",this.taskStatusId),this.init()}},metaInfo:function(){return this.currentProduction?{title:"".concat(this.currentProduction.name," ").concat(this.$t("news.title")," - Kitsu")}:{title:"".concat(this.$t("news.title")," - Kitsu")}}},Ii=Li,$i=(s("9dc2"),Object(m["a"])(Ii,Pi,Ei,!1,null,"53e8a2c6",null)),qi=$i.exports,Fi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sequences page fixed-page"},[s("div",{staticClass:"sequence-list-header page-header flexrow"},[s("search-field",{ref:"sequence-search-field",staticClass:"flexrow-item mt1",attrs:{"can-save":!0,placeholder:"ex: e01 s01 anim=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("combobox",{staticClass:"mb0 flexrow-item",attrs:{label:e.$t("statistics.display_mode"),"locale-key-prefix":"statistics.",options:e.displayModeOptions},model:{value:e.displayMode,callback:function(t){e.displayMode=t},expression:"displayMode"}}),s("combobox",{staticClass:"mb0 flexrow-item",attrs:{label:e.$t("statistics.count_mode"),"locale-key-prefix":"statistics.",options:e.countModeOptions},model:{value:e.countMode,callback:function(t){e.countMode=t},expression:"countMode"}}),s("span",{staticClass:"filler"}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download"},on:{click:e.exportStatisticsToCsv}})],1),s("div",{staticClass:"query-list mt1"},[s("search-query-list",{attrs:{queries:e.sequenceSearchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1),s("sequence-list",{ref:"sequence-list",attrs:{"count-mode":e.countMode,"display-mode":e.displayMode,entries:e.displayedSequences,"is-loading":e.isShotsLoading||e.initialLoading,"is-error":e.isShotsLoadingError,"validation-columns":e.shotValidationColumns,"sequence-stats":e.sequenceStats,"show-all":0===e.sequenceSearchText.length},on:{scroll:e.saveScrollPosition}}),s("edit-sequence-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-error":e.errors.edit,"cancel-route":e.sequencesPath,"sequence-to-edit":e.sequenceToEdit},on:{confirm:e.confirmEditSequence}}),s("hard-delete-modal",{attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.loading.del,"is-error":e.errors.del,text:e.deleteText(),"error-text":e.$t("sequences.delete_error"),"cancel-route":e.sequencesPath,"lock-text":e.sequenceToDelete?e.sequenceToDelete.name:""},on:{confirm:e.confirmDeleteSequence}})],1)},Ni=[],Ri=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.sequenceToEdit&&this.sequenceToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("sequences.edit_title"))+" "+e._s(e.sequenceToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("sequences.new_sequence"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("sequences.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:e.$t("sequences.fields.description")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runConfirmation(t):null}},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.confirmClicked}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("sequences.edit_fail"))+" ")]):e._e(),s("p",{staticClass:"success has-text-right info-message"},[e._v(" "+e._s(e.sequenceSuccessText)+" ")])],1)])])])},Bi=[];function zi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ui={name:"edit-sequence-modal",components:{TextField:J["a"],TextareaField:X["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","sequenceToEdit","errorText"],data:function(){return this.sequenceToEdit&&this.sequenceToEdit.id?{form:{id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,production_id:this.sequenceToEdit.project_id},sequenceSuccessText:""}:{form:{id:"",name:"",description:"",fps:""},sequenceSuccessText:""}},computed:Vi({},Object(l["c"])(["currentProduction"])),methods:Vi({},Object(l["b"])([]),{runConfirmation:function(){this.confirmClicked()},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.sequenceToEdit&&this.sequenceToEdit.id},resetForm:function(){this.sequenceSuccessText="",this.isEditing()?this.form={id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description}:(this.form.id=null,this.form.name="",this.form.description="")}}),mounted:function(){this.resetForm()},watch:{active:function(){this.resetForm()},sequenceToEdit:function(){this.resetForm()}}},Hi=Ui,Yi=(s("fb8a"),Object(m["a"])(Hi,Ri,Bi,!1,null,"17e984db",null)),Wi=Yi.exports,Gi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{ref:"th-sequence",staticClass:"name"},[e._v(" "+e._s(e.$t("shots.fields.sequence"))+" ")]),s("th",{staticClass:"description"},[e._v(e._s(e.$t("shots.fields.description")))]),s("th",{staticClass:"validation"},[e._v(e._s(e.$t("main.all")))]),e._l(e.validationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,staticClass:"validation validation-cell",style:e.getValidationStyle(t)},[s("router-link",{attrs:{to:e.taskTypePath(t)}},[e._v(" "+e._s(e.taskTypeMap[t].name)+" ")])],1)})),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("sequences.empty_list")))])]),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("sequences.empty_list_client")))])]):e._e(),e.isLoading?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},[e.showAll&&!e.isEmptyList?s("tr",{staticClass:"all-line"},[s("td",{staticClass:"name"},[e._v(" "+e._s(e.$t("sequences.all_sequences"))+" ")]),s("td",{staticClass:"description"}),s("stats-cell",{staticClass:"all-validation",attrs:{colors:e.chartColors("all","all"),data:e.chartData("all","all"),"frames-data":e.chartData("all","all","frames"),countMode:e.countMode,displayMode:e.displayMode}}),e._l(e.validationColumns,(function(t){return s("stats-cell",{key:"all-"+t,style:e.getValidationStyle(t),attrs:{colors:e.chartColors("all",t),data:e.chartData("all",t),"frames-data":e.chartData("all",t,"frames"),countMode:e.countMode,displayMode:e.displayMode}})})),s("td",{staticClass:"actions"})],2):e._e(),e._l(e.entries,(function(t){return e.isEntryStats(t.id)?s("tr",{key:t.id},[s("td",{staticClass:"name"},[e._v(" "+e._s(t.name)+" ")]),s("td",{staticClass:"description"},[e._v(" "+e._s(t.description)+" ")]),e.isStats(t.id,"all")?s("stats-cell",{attrs:{colors:e.chartColors(t.id,"all"),data:e.chartData(t.id,"all"),"frames-data":e.chartData(t.id,"all","frames"),countMode:e.countMode,displayMode:e.displayMode}}):s("td"),e._l(e.validationColumns,(function(n){return e.isStats(t.id,n)?s("stats-cell",{key:t.id+n,style:e.getValidationStyle(n),attrs:{colors:e.chartColors(t.id,n),data:e.chartData(t.id,n),"frames-data":e.chartData(t.id,n,"frames"),countMode:e.countMode,displayMode:e.displayMode}}):s("td",{style:e.getValidationStyle(n)})})),e.isCurrentUserManager?s("row-actions",{attrs:{entry:t,"edit-route":e.editPath(t.id),"delete-route":e.deletePath(t.id)}}):s("td",{staticClass:"actions"})],2):e._e()}))],2)])]),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-sequences"},[e._v(" "+e._s(e.displayedSequencesLength)+" "+e._s(e.$tc("sequences.number",e.displayedSequencesLength))+" ")])],1)},Ki=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])}],Qi=s("09d3"),Ji=s("b131");function Xi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ea={name:"sequence-list",mixins:[Ne["a"]],components:{RowActions:Ve["a"],StatsCell:Ji["a"],TableInfo:le["a"]},props:{countMode:{type:String,default:"count"},displayMode:{type:String,default:"pie"},entries:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},sequenceStats:{type:Object,default:function(){}},showAll:{type:Boolean,default:!1},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{busy:!1,lastSelection:null}},computed:Zi({},Object(l["c"])(["currentProduction","currentEpisode","displayedSequencesLength","isDarkTheme","isCurrentUserClient","isCurrentUserManager","isTVShow","sequenceSearchText","taskTypeMap"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.sequenceSearchText||0===this.sequenceSearchText.length)}}),methods:Zi({},Object(l["b"])(["displayMoreSequences","loadMoreSequences"]),{chartColors:function(e,t){return Object(Qi["b"])(this.sequenceStats,e,t)},chartData:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"count";return Object(Qi["c"])(this.sequenceStats,e,t,s)},isStats:function(e,t){return this.sequenceStats[e]&&this.sequenceStats[e][t]},isEntryStats:function(e){var t=this;if(!this.sequenceStats[e]&&this.sequenceSearchText)return!1;if(!this.sequenceStats[e])return!0;var s=!1;return Object.keys(this.sequenceStats[e]).forEach((function(n){s=s||t.sequenceStats[e][n]})),s},onHeaderScroll:function(e,t){this.$refs.tableWrapper.scrollLeft=t.scrollLeft},onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px"),this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreSequences()},loadMoreSequences:function(){this.displayMoreSequences(),this.$nextTick(this.resizeHeaders)},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},resizeHeaders:function(){var e=this;this.$nextTick((function(){if(e.$refs["body-tbody"]&&e.$refs["body-tbody"].children.length>0){var t=e.$refs["body-tbody"].children[0].children[0].offsetWidth;e.$refs["th-sequence"].style="min-width: ".concat(t,"px")}}))},editPath:function(e){return this.getPath("edit-sequence",e)},deletePath:function(e){return this.getPath("delete-sequence",e)},taskTypePath:function(e){var t={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"shots"}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-task-type",t.params.episode_id=this.currentEpisode.id),t},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.sequence_id=t),s}})},ta=ea,sa=(s("d7f0"),Object(m["a"])(ta,Gi,Ki,!1,null,"60dba972",null)),na=sa.exports;function ia(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function aa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ia(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var oa={name:"sequences",components:{ButtonSimple:H["a"],Combobox:Z["a"],HardDeleteModal:Wt["a"],EditSequenceModal:Wi,SearchField:Gt["a"],SearchQueryList:Kt["a"],SequenceList:na},data:function(){return{countMode:"count",displayMode:"pie",initialLoading:!0,sequenceToDelete:null,sequenceToEdit:null,countModeOptions:[{label:"shots",value:"count"},{label:"frames",value:"frames"}],displayModeOptions:[{label:"pie",value:"pie"},{label:"count",value:"count"}],errors:{edit:!1,del:!1},loading:{edit:!1,del:!1},modals:{isNewDisplayed:!1,isDeleteDisplayed:!1}}},computed:aa({},Object(l["c"])(["currentEpisode","currentProduction","displayedSequences","isCurrentUserManager","isShotsLoading","isShotsLoadingError","isTVShow","searchSequenceFilters","sequences","sequenceMap","sequencesPath","sequenceStats","sequenceSearchText","sequenceSearchQueries","sequenceListScrollPosition","shotValidationColumns","taskTypeMap","taskStatusMap"])),mounted:function(){var e=this;setTimeout((function(){e.initSequences().then(e.handleModalsDisplay).then(e.resizeHeaders).then((function(){e.initialLoading=!1})),e.setDefaultSearchText(),e.setDefaultListScrollPosition()}),100)},methods:aa({},Object(l["b"])(["computeSequenceStats","deleteSequence","editSequence","hideAssignations","initSequences","loadComment","removeSequenceSearch","saveSequenceSearch","setLastProductionScreen","setSequenceSearch","setSequenceListScrollPosition","showAssignations"]),{setDefaultSearchText:function(){this.sequenceSearchText.length>0&&this.$refs["sequence-search-field"].setValue(this.sequenceSearchText)},setDefaultListScrollPosition:function(){this.$refs["sequence-list"]&&this.$refs["sequence-list"].setScrollPosition(this.sequenceListScrollPosition)},navigateToList:function(){this.$router.push(this.sequencesPath)},confirmEditSequence:function(e){var t=this;this.loading.edit=!0,this.errors.edit=!1,this.editSequence(e).then((function(){t.loading.edit=!1,t.resizeHeaders(),t.navigateToList()})).catch((function(){t.loading.edit=!1,t.errors.edit=!0}))},confirmDeleteSequence:function(){var e=this;this.loading.del=!0,this.deleteSequence(this.sequenceToDelete).then((function(){e.loading.del=!1,e.resizeHeaders(),e.navigateToList()})).catch((function(){e.loading.del=!1,e.errors.del=!0}))},resetEditModal:function(){var e={name:""};this.sequences.length>0&&(e.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(e.production_id=this.openProductions[0].id),this.sequenceToEdit=e},deleteText:function(){var e=this.sequenceToDelete;return e?this.$t("sequences.delete_text",{name:e.name}):""},handleModalsDisplay:function(){var e=this.$store.state.route.path,t=this.$store.state.route.params.sequence_id;this.errors={edit:!1,delete:!1},this.modals={isNewDisplayed:!1,isDeleteDisplayed:!1},e.indexOf("edit")>0?(this.sequenceToEdit=this.sequenceMap[t],this.modals.isNewDisplayed=!0):e.indexOf("delete")>0&&(this.sequenceToDelete=this.sequenceMap[t],this.modals.isDeleteDisplayed=!0)},onSearchChange:function(e){var t=this.$refs["sequence-search-field"].getValue();this.setSequenceSearch(t)},changeSearch:function(e){this.$refs["sequence-search-field"].setValue(e.search_query),this.$refs["sequence-search-field"].$emit("change",e.search_query),this.resizeHeaders()},saveSearchQuery:function(e){this.saveSequenceSearch(e).catch(console.error)},removeSearchQuery:function(e){this.removeSequenceSearch(e).catch(console.error)},saveScrollPosition:function(e){this.setSequenceListScrollPosition(e)},resizeHeaders:function(){var e=this;setTimeout((function(){e.$refs["sequence-list"]&&e.$refs["sequence-list"].resizeHeaders()}),100)},exportStatisticsToCsv:function(){var e=[xe()().format("YYYYMMDD"),this.currentProduction.name,"sequences","statistics"];this.currentEpisode&&e.splice(2,0,this.currentEpisode.name);var t=Object(Le["b"])(e.join("_"));De["a"].generateStatReports(t,this.sequenceStats,this.taskTypeMap,this.taskStatusMap,this.sequenceMap,this.countMode)}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){this.$refs["sequence-search-field"].setValue(""),this.$store.commit("SET_SEQUENCE_LIST_SCROLL_POSITION",0),this.isTVShow||this.initSequences().then(this.handleModalsDisplay).then(this.resizeHeaders)},currentEpisode:function(){var e=this;this.isTVShow&&this.currentEpisode&&this.initSequences().then(this.handleModalsDisplay).then(this.resizeHeaders).then((function(){e.initialLoading=!1}))},searchSequenceFilters:function(){this.computeSequenceStats()}},socket:{events:{"comment:new":function(e){var t=this,s=e.comment_id;this.loadComment({commentId:s,callback:function(){t.computeSequenceStats()}})}}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("sequences.title")," - Kitsu")}:{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" ".concat(this.$t("sequences.title")," - Kitsu")}}},ra=oa,ca=(s("bc6e"),Object(m["a"])(ra,Fi,Ni,!1,null,"787c9aee",null)),la=ca.exports,da=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page shot"},[s("div",{staticClass:"page-header flexrow"},[s("router-link",{staticClass:"flexrow-item has-text-centered back-link",attrs:{to:e.shotsPath}},[s("chevron-left-icon")],1),e.currentShot?s("entity-thumbnail",{staticClass:"shot-thumbnail flexrow-item",attrs:{entity:e.currentShot,"with-link":!1}}):e._e(),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:e.title}})],1),s("div",{staticClass:"flexrow-item"},[s("button-simple",{attrs:{icon:"edit"},on:{click:function(t){e.modals.edit=!0}}})],1)],1),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:e.$t("shots.tasks")}}),s("entity-task-list",{staticClass:"task-list",attrs:{entries:e.currentShot?e.currentShot.tasks:[],"is-loading":!e.currentShot,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:e.$t("main.info")}}),s("div",{staticClass:"table-body"},[e.currentShot?s("table",{staticClass:"table"},[s("tbody",[e.currentShot.data&&e.currentShot.data.fps?s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.fps")))]),s("td",[e._v(" "+e._s(e.currentShot?e.currentShot.data.fps:"")+" ")])]):e._e(),e.currentShot.data&&e.currentShot.data.frame_in?s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.frame_in")))]),s("td",[e._v(" "+e._s(e.currentShot?e.currentShot.data.frame_in:"")+" ")])]):e._e(),e.currentShot.data&&e.currentShot.data.frame_out?s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.frame_out")))]),s("td",[e._v(" "+e._s(e.currentShot?e.currentShot.data.frame_out:"")+" ")])]):e._e(),s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.description")))]),s("description-cell",{attrs:{entry:e.currentShot,full:!0}})],1),s("tr",[s("td",{staticClass:"field-label"},[e._v(e._s(e.$t("shots.fields.nb_frames")))]),s("td",[e._v(" "+e._s(e.currentShot?e.currentShot.nb_frames:"")+" ")])]),e._l(e.shotMetadataDescriptors,(function(t){return s("tr",{key:t.id},[s("td",{staticClass:"field-label"},[e._v(e._s(t.name))]),s("td",[e._v(" "+e._s(e.currentShot.data?e.currentShot.data[t.field_name]:"")+" ")])])}))],2)]):e._e()])],1)]),s("div",{staticClass:"shot-casting"},[s("page-subtitle",{attrs:{text:e.$t("shots.casting")}}),e.currentShot?s("div",[e.currentShot.castingAssetsByType&&e.currentShot.castingAssetsByType[0].length>0?s("div",e._l(e.currentShot.castingAssetsByType,(function(t){return s("div",{key:t.length>0?t[0].asset_type_name:"",staticClass:"type-assets"},[s("div",{staticClass:"asset-type"},[e._v(" "+e._s(t.length>0?t[0].asset_type_name:"")+" ")]),s("div",{staticClass:"asset-list"},e._l(t,(function(t){return s("router-link",{key:t.id,staticClass:"asset-link",attrs:{to:{name:"asset",params:{production_id:e.currentProduction.id,asset_id:t.asset_id}}}},[s("entity-thumbnail",{attrs:{entity:t,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[e._v(e._s(t.asset_name))]),t.nb_occurences>1?s("span",[e._v(" ("+e._s(t.nb_occurences)+") ")]):e._e()])],1)})),1)])})),0):s("div",[e._v(" "+e._s(e.$t("shots.no_casting"))+" ")])]):s("table-info",{attrs:{"is-loading":e.casting.isLoadin,"is-error":e.casting.isError}})],1),s("edit-shot-modal",{ref:"edit-shot-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"shot-to-edit":e.currentShot},on:{cancel:function(t){e.modals.edit=!1},confirm:e.confirmEditShot}})],1)},ua=[],pa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.shotToEdit&&this.shotToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("shots.edit_title"))+" "+e._s(e.shotToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("shots.new_shot"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("shots.fields.sequence"),options:e.getSequenceOptions},model:{value:e.form.sequence_id,callback:function(t){e.$set(e.form,"sequence_id",t)},expression:"form.sequence_id"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("shots.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:e.$t("shots.fields.description")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runConfirmation(t):null}},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nbFramesField",attrs:{label:e.$t("shots.fields.nb_frames"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.nb_frames,callback:function(t){e.$set(e.form,"nb_frames",t)},expression:"form.nb_frames"}}),s("text-field",{ref:"frameInField",attrs:{label:e.$t("shots.fields.frame_in"),type:"number"},model:{value:e.form.frameIn,callback:function(t){e.$set(e.form,"frameIn",t)},expression:"form.frameIn"}}),s("text-field",{ref:"frameOutField",attrs:{label:e.$t("shots.fields.frame_out"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.frameOut,callback:function(t){e.$set(e.form,"frameOut",t)},expression:"form.frameOut"}}),s("text-field",{ref:"fpsField",attrs:{label:e.$t("shots.fields.fps"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.fps,callback:function(t){e.$set(e.form,"fps",t)},expression:"form.fps"}}),e._l(e.shotMetadataDescriptors,(function(t){return s("div",{key:t.id},[t.choices.length>0?s("combobox",{attrs:{label:t.name,options:e.getDescriptorChoicesOptions(t)},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:t.name},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)}))],2),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.confirmClicked}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),e.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:e.cancelRoute}},[e._v(" "+e._s(e.$t("main.close"))+" ")]):s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.close"))+" ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("shots.edit_fail"))+" ")]):e._e(),s("p",{staticClass:"success has-text-right info-message"},[e._v(" "+e._s(e.shotSuccessText)+" ")])],1)])])])},ha=[];function fa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ma(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ba={name:"edit-shot-modal",mixins:[Q["a"]],components:{Combobox:Z["a"],TextField:J["a"],TextareaField:X["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","shotToEdit","errorText"],data:function(){return{form:{data:{}},shotSuccessText:""}},computed:ma({},Object(l["c"])(["currentProduction","getSequenceOptions","getOpenProductionOptions","openProductions","sequences","shots","shotCreated","shotMetadataDescriptors"]),{frameIn:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_in:""},frameOut:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_out:""},fps:function(){return this.shotToEdit.data?this.shotToEdit.data.fps:""}}),methods:ma({},Object(l["b"])([]),{runConfirmation:function(){this.isEditing()?this.confirmClicked():this.confirmAndStayClicked()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},getDescriptorChoicesOptions:function(e){var t=e.choices.map((function(e){return{label:e,value:e}}));return[{label:"",value:""}].concat(Object(K["a"])(t))},isEditing:function(){return this.shotToEdit&&this.shotToEdit.id},resetForm:function(){this.shotSuccessText="",this.isEditing()?this.form={sequence_id:this.shotToEdit.sequence_id,project_id:this.shotToEdit.project_id,name:this.shotToEdit.name,description:this.shotToEdit.description,nb_frames:this.shotToEdit.nb_frames,frameIn:this.frameIn,frameOut:this.frameOut,fps:this.fps,data:ma({},this.shotToEdit.data)||{}}:(this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.sequences.length>0&&(this.form.sequence_id=this.sequences[0].id),this.form.name="",this.form.description="",this.form.nb_frames=0,this.form.data={})}}),mounted:function(){this.resetForm()},watch:{active:function(){var e=this;this.shotSuccessText="",this.resetForm(),this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)},shotToEdit:function(){this.resetForm()},shotCreated:function(){this.isEditing()?this.shotSuccessText=this.$t("shots.edit_success",{name:this.shotCreated}):this.shotSuccessText=this.$t("shots.new_success",{name:this.shotCreated})}}},_a=ba,va=(s("eae5"),Object(m["a"])(_a,pa,ha,!1,null,"219c6310",null)),ya=va.exports;function ga(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ka(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ga(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var wa={name:"shot",components:{ButtonSimple:H["a"],ChevronLeftIcon:U["f"],DescriptionCell:Y["a"],EditShotModal:ya,EntityThumbnail:ve["a"],EntityTaskList:_e,PageSubtitle:ge["a"],PageTitle:ye["a"],TableInfo:le["a"]},data:function(){return{currentShot:null,casting:{isLoading:!1,isError:!1},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},created:function(){var e=this;if(this.currentProduction){var t={productionId:this.currentProduction.id};this.currentEpisode&&(t.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",t)}else this.setProduction(this.$route.params.production_id);this.clearSelectedTasks(),this.currentShot=this.getCurrentShot(),this.casting.isLoading=!0,this.casting.isError=!1,this.currentShot?this.loadShotCasting(this.currentShot).then((function(){e.casting.isLoading=!1})).catch((function(t){e.casting.isError=!0,console.error(t)})):this.loadShot(this.route.params.shot_id).then((function(){return e.currentShot=e.getCurrentShot(),e.loadShotCasting(e.currentShot)})).then((function(){e.casting.isLoading=!1})).catch((function(t){e.casting.isError=!0,console.error(t)}))},computed:ka({},Object(l["c"])(["currentProduction","route","shotMap","shotMetadataDescriptors","shotsPath"]),{title:function(){return this.currentShot?this.currentShot.episode_name?"".concat(this.currentShot.episode_name," / ")+"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"Loading..."},shotThumbnailPath:function(){var e=this.currentShot.preview_file_id;return"/api/pictures/originals/preview-files/".concat(e,".png")},isPreview:function(){return this.currentShot&&this.currentShot.preview_file_id&&this.currentShot.preview_file_id.length>0}}),methods:ka({},Object(l["b"])(["editShot","loadShot","loadShotCasting","clearSelectedTasks"]),{changeTab:function(e){this.selectedTab=e},getCurrentShot:function(){return this.shotMap[this.route.params.shot_id]||null},onEditClicked:function(){this.modals.edit=!0},confirmEditShot:function(e){var t=this;e.id=this.currentShot.id,this.loading.edit=!0,this.errors.edit=!1,this.editShot({data:e,callback:function(e){e?(t.loading.edit=!1,t.errors.edit=!0):(t.loading.edit=!1,t.modals.edit=!1)}})}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Sa=wa,Oa=(s("8a49"),Object(m["a"])(Sa,da,ua,!1,null,"f9867ae8",null)),Ca=Oa.exports,Ta=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"shots page"},[s("div",{staticClass:"shot-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("search-field",{ref:"shot-search-field",attrs:{"can-save":!0,placeholder:"ex: e01 s01 anim=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}})],1)]),s("div",{staticClass:"level-right"},[e.isCurrentUserClient?e._e():s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.thumbnails.title"),icon:"image"},on:{click:e.showAddThumbnailsModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("main.csv.import_file"),icon:"upload"},on:{click:e.showImportModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}}),s("button-simple",{staticClass:"flexrow-item",attrs:{text:e.$t("shots.manage"),icon:"plus"},on:{click:e.showManageShots}})],1):e._e()])]),s("div",{staticClass:"query-list"},[e.isShotsLoading||e.initialLoading?e._e():s("search-query-list",{attrs:{queries:e.shotSearchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1)]),s("sorting-info",{attrs:{label:e.$t("main.sorted_by"),sorting:e.shotSorting},on:{"clear-sorting":function(t){return e.onChangeSortClicked(null)}}}),s("shot-list",{ref:"shot-list",attrs:{"displayed-shots":e.displayedShotsBySequence,"is-loading":e.isShotsLoading||e.initialLoading,"is-error":e.isShotsLoadingError,"validation-columns":e.shotValidationColumns},on:{"add-metadata":e.onAddMetadataClicked,"add-shots":e.showManageShots,"change-sort":e.onChangeSortClicked,"create-tasks":e.showCreateTasksModal,"delete-all-tasks":e.onDeleteAllTasksClicked,"delete-metadata":e.onDeleteMetadataClicked,"edit-metadata":e.onEditMetadataClicked,scroll:e.saveScrollPosition,"shot-history":e.showShotHistoryModal}})],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e(),s("manage-shots-modal",{attrs:{active:e.modals.isManageDisplayed,"is-loading":e.loading.manage,"is-error":!1,"is-success":!1,"cancel-route":e.shotsPath},on:{cancel:e.hideManageShots}}),s("edit-shot-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-loading-stay":e.loading.stay,"is-error":e.editShot.isCreateError,"is-success":e.editShot.isSuccess,"cancel-route":e.shotsPath,"shot-to-edit":e.shotToEdit},on:{confirm:e.confirmEditShot}}),s("delete-modal",{ref:"delete-shot-modal",attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.deleteShot.isLoading,"is-error":e.deleteShot.isError,"cancel-route":e.shotsPath,text:e.deleteText(),"error-text":e.$t("shots.delete_error")},on:{confirm:e.confirmDeleteShot}}),s("delete-modal",{ref:"restore-shot-modal",attrs:{active:e.modals.isRestoreDisplayed,"is-loading":e.restoreShot.isLoading,"is-error":e.restoreShot.isError,"cancel-route":e.shotsPath,text:e.restoreText(),"error-text":e.$t("shots.restore_error")},on:{confirm:e.confirmRestoreShot}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:e.modals.isDeleteMetadataDisplayed,"is-loading":e.loading.deleteMetadata,"is-error":e.errors.deleteMetadata,text:e.$t("productions.metadata.delete_text"),"error-text":e.$t("productions.metadata.delete_error")},on:{cancel:function(t){e.modals.isDeleteMetadataDisplayed=!1},confirm:e.confirmDeleteMetadata}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:e.modals.isDeleteAllTasksDisplayed,"is-loading":e.loading.deleteAllTasks,"is-error":e.errors.deleteAllTasks,"cancel-route":e.shotsPath,text:e.deleteAllTasksText(),"error-text":e.$t("tasks.delete_all_error"),"lock-text":e.deleteAllTasksLockText},on:{confirm:e.confirmDeleteAllTasks}}),s("import-render-modal",{attrs:{active:e.modals.isImportRenderDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"parsed-csv":e.parsedCSV,"form-data":e.shotsCsvFormData,columns:e.columns,dataMatchers:e.dataMatchers,database:e.filteredShots},on:{reupload:e.resetImport,cancel:e.hideImportRenderModal,confirm:e.uploadImportFile}}),s("import-modal",{ref:"import-modal",attrs:{active:e.modals.isImportDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"form-data":e.shotsCsvFormData,columns:e.columns},on:{cancel:e.hideImportModal,confirm:e.renderImport}}),s("create-tasks-modal",{attrs:{active:e.modals.isCreateTasksDisplayed,"is-loading":e.loading.creatingTasks,"is-loading-stay":e.loading.creatingTasksStay,"is-error":e.errors.creatingTasks,title:e.$t("tasks.create_tasks_shot"),text:e.$t("tasks.create_tasks_shot_explaination"),"error-text":e.$t("tasks.create_tasks_shot_failed")},on:{cancel:e.hideCreateTasksModal,confirm:e.confirmCreateTasks,"confirm-and-stay":e.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:e.modals.isAddMetadataDisplayed,"is-loading":e.loading.addMetadata,"is-loading-stay":e.loading.addMetadata,"is-error":e.errors.addMetadata,"descriptor-to-edit":e.descriptorToEdit},on:{cancel:e.closeMetadataModal,confirm:e.confirmAddMetadata}}),s("add-thumbnails-modal",{ref:"add-thumbnails-modal",attrs:{active:e.modals.isAddThumbnailsDisplayed,"is-loading":e.loading.addThumbnails,"is-error":e.errors.addThumbnails},on:{cancel:e.hideAddThumbnailsModal,confirm:e.confirmAddThumbnails}}),s("shot-history-modal",{attrs:{active:e.modals.isShotHistoryDisplayed,shot:e.historyShot},on:{cancel:e.hideShotHistoryModal}})],1)},Pa=[],Ea=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("page-title",{staticClass:"title",attrs:{text:e.$t("shots.manage")}}),s("div",{staticClass:"explaination"},[e._v(e._s(e.$t("shots.creation_explaination")))]),s("div",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"filler"}),s("combobox",{ref:"shot-padding",staticClass:"shot-padding flexrow-item",attrs:{label:e.$t("shots.padding"),options:e.shotPaddingOptions},model:{value:e.shotPadding,callback:function(t){e.shotPadding=t},expression:"shotPadding"}})],1)]),s("div",{staticClass:"shot-columns"},[e.isTVShow?s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.episodes")))]),s("div",{staticClass:"list"},e._l(e.episodes,(function(t){return s("div",{key:t.id,class:{"entity-line":!0,selected:t.id===e.selectedEpisodeId},on:{click:function(s){return e.selectEpisode(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.episode,expression:"names.episode"},{name:"focus",rawName:"v-focus"}],ref:"addEpisodeInput",staticClass:"input",attrs:{placeholder:"EP01",type:"text"},domProps:{value:e.names.episode},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.focusAddSequence(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addEpisode(t)}],input:function(t){t.target.composing||e.$set(e.names,"episode",t.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addEpisode},attrs:{disabled:!e.isAddEpisodeAllowed},on:{click:e.addEpisode}},[e._v(" "+e._s(e.$t("main.add"))+" ")])])]):e._e(),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.sequences")))]),s("div",{staticClass:"list"},e._l(e.displayedSequences,(function(t){return s("div",{key:t.id,class:{"entity-line":!0,selected:t.id===e.selectedSequenceId},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.focusAddShot(t)},click:function(s){return e.selectSequence(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.sequence,expression:"names.sequence"}],ref:"addSequenceInput",staticClass:"input",attrs:{placeholder:"SQ01",type:"text"},domProps:{value:e.names.sequence},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSequence(t)},input:function(t){t.target.composing||e.$set(e.names,"sequence",t.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addSequence},attrs:{disabled:!e.isAddSequenceAllowed},on:{click:e.addSequence}},[e._v(" "+e._s(e.$t("main.add"))+" ")])])]),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.title")))]),s("div",{staticClass:"list"},e._l(e.displayedShots,(function(t){return s("div",{key:t.id,staticClass:"entity-line"},[e._v(" "+e._s(t.name)+" ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.shot,expression:"names.shot"}],ref:"addShotInput",staticClass:"input",attrs:{placeholder:"SH01",type:"text"},domProps:{value:e.names.shot},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addShot(t)},input:function(t){t.target.composing||e.$set(e.names,"shot",t.target.value)}}})]),s("div",{staticClass:"field"},[s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addShot},attrs:{disabled:!e.isAddShotAllowed},on:{click:e.addShot}},[e._v(" "+e._s(e.$t("main.add"))+" ")])])])]),s("p",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.close"))+" ")])])],1)])])},ja=[];s("07ac");function xa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Da(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Aa={name:"manage-shot-modal",mixins:[Q["a"]],components:{Combobox:Z["a"],PageTitle:ye["a"]},props:{active:{default:!0,type:Boolean}},data:function(){return{names:{episode:"",sequence:"",shot:""},loading:{addEpisode:!1,addSequence:!1,addShot:!1},displayedSequences:[],displayedShots:[],selectedEpisodeId:null,selectedSequenceId:null,shotPaddingOptions:[{label:"1",padding:"1"},{label:"2",padding:"2"},{label:"10",padding:"10"}],shotPadding:"1"}},watch:{active:function(){var e=this;this.active&&(this.shotPadding="1",setTimeout((function(){e.isTVShow?e.$refs.addEpisodeInput.focus():e.$refs.addSequenceInput.focus()}),100))},sequences:function(){this.displayedSequences=this.sequences,this.displayedShots=[]}},computed:Da({},Object(l["c"])(["currentProduction","episodes","isTVShow","sequences","shotMap"]),{isAddEpisodeAllowed:function(){var e=this,t=""===this.names.episode,s=this.episodes.find((function(t){return e.names.episode===t.name}));return!t&&!s},isAddSequenceAllowed:function(){var e=this,t=""===this.names.sequence,s=this.displayedSequences.find((function(t){return e.names.sequence===t.name}));return!t&&!s&&(this.selectedEpisodeId||!this.isTVShow)},isAddShotAllowed:function(){var e=this,t=""===this.names.shot,s=this.displayedShots.find((function(t){return e.names.shot===t.name}));return!t&&!s&&this.selectedSequenceId}}),methods:Da({},Object(l["b"])(["newEpisode","newSequence","newShot","setCurrentEpisode"]),{focusAddSequence:function(){this.$refs.addSequenceInput.focus()},focusAddShot:function(){this.$refs.addShotInput.focus()},selectEpisode:function(e){this.isTVShow?(this.selectedEpisodeId=e,this.$router.push({name:"episode-shots",params:{production_id:this.currentProduction.id,episode_id:e}})):(this.selectedEpisodeId=e,this.displayedSequences=this.sequences.filter((function(t){return t.parent_id===e})),this.displayedShots=[])},selectSequence:function(e){this.selectedSequenceId=e,this.displayedShots=Object.values(this.shotMap).filter((function(t){return t.sequence_id===e}))},addEpisode:function(){var e=this;if(this.isAddEpisodeAllowed){var t=this.names.episode;if(t.length>0){this.loading.addEpisode=!0;var s={name:this.names.episode,project_id:this.currentProduction.id};this.newEpisode({episode:s,callback:function(t,s){t&&console.error(t),e.loading.addEpisode=!1,e.selectEpisode(s.id),e.names.episode=Le["a"].generateNextName(s.name)}})}}},addSequence:function(){var e=this;if(this.isAddSequenceAllowed){var t=this.names.sequence;if(t.length>0&&(this.selectedEpisodeId||!this.isTVShow)){this.loading.addSequence=!0;var s={name:this.names.sequence,episode_id:this.selectedEpisodeId,project_id:this.currentProduction.id};this.newSequence({sequence:s,callback:function(t,s){t&&console.error(t),e.loading.addSequence=!1,e.selectEpisode(e.selectedEpisodeId),e.selectSequence(s.id),e.names.sequence=Le["a"].generateNextName(s.name)}})}}},addShot:function(){var e=this;if(this.isAddShotAllowed){var t=this.names.shot;if(this.loading.addShot=!0,t.length>0&&this.selectedSequenceId){var s={name:this.names.shot,sequence_id:this.selectedSequenceId,project_id:this.currentProduction.id};this.loading.addShot=!1,this.newShot({shot:s,callback:function(t){t&&console.error(t),e.loading.addShot=!1,e.selectSequence(e.selectedSequenceId),e.names.shot=Le["a"].generateNextName(s.name,parseInt(e.shotPadding))}})}}}})},Ma=Aa,La=(s("ecc2"),Object(m["a"])(Ma,Ea,ja,!1,null,"ab544ca4",null)),Ia=La.exports,$a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("shots.history"))+" ")]),s("table",{ref:"headerWrapper",staticClass:"table"},[s("thead",{staticClass:"table-header"},[s("tr",[s("th",{staticClass:"date"},[e._v(e._s(e.$t("main.date")))]),s("th",{staticClass:"name"},[e._v(e._s(e.$t("shots.fields.name")))]),s("th",{staticClass:"frame-in"},[e._v(e._s(e.$t("shots.fields.frame_in")))]),s("th",{staticClass:"frame-out"},[e._v(e._s(e.$t("shots.fields.frame_out")))]),s("th",{staticClass:"table-filler"})])])]),e.isLoading?e._e():s("div",{staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{staticClass:"table-body"},e._l(e.versions,(function(t){return s("tr",{key:t.id,staticClass:"shot-version"},[s("td",{staticClass:"date"},[e._v(" "+e._s(e.formatDate(t.created_at))+" ")]),s("td",{staticClass:"name"},[e._v(" "+e._s(t.name)+" ")]),s("td",{staticClass:"frame-in"},[e._v(" "+e._s(t.data.frame_in)+" ")]),s("td",{staticClass:"frame-out"},[e._v(" "+e._s(t.data.frame_out)+" ")]),s("td",{staticClass:"table-filler"})])})),0)])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),s("div",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],1)])])},qa=[],Fa=s("3657");function Na(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ra(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Na(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ba={name:"shot-history-modal",mixins:[Q["a"]],components:{TableInfo:le["a"]},props:{active:{type:Boolean,default:!1},shot:{type:Object,default:function(){}}},data:function(){return{isError:!1,isLoading:!1,versions:[]}},mounted:function(){this.reset()},computed:Ra({},Object(l["c"])([])),methods:Ra({},Object(l["b"])(["loadShotHistory"]),{reset:function(){this.versions=[],this.isError=!1,this.isLoading=!1},loadData:function(){var e=this;return this.isError=!1,this.isLoading=!0,this.loadShotHistory(this.shot.id).then((function(t){e.versions=t,e.isLoading=!1})).catch((function(t){console.error(t),e.isLoading=!1,e.isError=!0}))},formatDate:function(e){return Object(Fa["a"])(e)}}),watch:{active:function(){this.active&&(this.reset(),this.loadData())}}},za=Ba,Va=(s("b86a"),Object(m["a"])(za,$a,qa,!1,null,"2e72e7a6",null)),Ua=Va.exports,Ha=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":e.hiddenColumns[e.lastHeaderMenuDisplayed],"is-current-user-admin":e.isCurrentUserAdmin},on:{"minimize-clicked":function(t){return e.onMinimizeColumnToggled()},"delete-all-clicked":function(t){return e.onDeleteAllTasksClicked()},"sort-by-clicked":function(t){return e.onSortByTaskTypeClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":e.isCurrentUserAdmin},on:{"edit-clicked":function(t){return e.onEditMetadataClicked()},"delete-clicked":function(t){return e.onDeleteMetadataClicked()},"sort-by-clicked":function(t){return e.onSortByMetadataClicked()}}}),s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{ref:"th-shot",staticClass:"name shot-name datatable-row-header",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.$t("shots.fields.name"))+" ")]),e.isCurrentUserAdmin&&!e.isLoading?s("button-simple",{staticClass:"is-small flexrow",attrs:{icon:"plus",text:""},on:{click:e.onAddMetadataClicked}}):e._e()],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotDescription?s("th",{staticClass:"description",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.description"))+" ")]):e._e(),e._l(e.shotMetadataDescriptors,(function(t){return e.isShowInfos?s("th",{key:t.id,staticClass:"metadata-descriptor",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item datatable-dropdown"},[e._v(" "+e._s(t.name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showMetadataHeaderMenu(t.id,s)}}})],1)]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isTime?s("th",{ref:"th-spent",staticClass:"time-spent",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.time_spent"))+" ")]):e._e(),e.isShowInfos?s("th",{staticClass:"frames",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.nb_frames"))+" ")]):e._e(),e.isFrameIn&&e.isShowInfos?s("th",{staticClass:"framein",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.frame_in"))+" ")]):e._e(),e.isFrameOut&&e.isShowInfos?s("th",{staticClass:"frameout",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.frame_out"))+" ")]):e._e(),e.isFps&&e.isShowInfos?s("th",{staticClass:"fps",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.fps"))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,class:{"validation-cell":!e.hiddenColumns[t],"hidden-validation-cell":e.hiddenColumns[t]},attrs:{scope:"col"}},[s("div",{staticClass:"flexrow validation-content",style:e.getValidationStyle(t)},[s("router-link",{staticClass:"flexrow-item datatable-dropdown",staticStyle:{"margin-right":"0"},attrs:{to:e.taskTypePath(t)}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showHeaderMenu(t,s)}}})],1)])})),s("th",{staticClass:"actions",attrs:{scope:"col"}},[e.isCurrentUserManager?s("button-simple",{class:{"is-small":!0,highlighted:e.isEmptyTask},attrs:{icon:"plus",text:e.$t("tasks.create_tasks")},on:{click:function(t){return e.$emit("create-tasks")}}}):e._e()],1)],2)]),e._l(e.displayedShots,(function(t,n){return!e.isLoading&&e.isListVisible?s("tbody",{key:e.getGroupKey(t,n,"sequence_id"),staticClass:"datatable-body"},[s("tr",{staticClass:"datatable-type-header"},[s("th",{attrs:{scope:"rowgroup",colspan:e.visibleColumns}},[s("span",{staticClass:"datatable-row-header"},[e._v(" "+e._s(t[0]?t[0].sequence_name:"")+" ")])])]),e._l(t,(function(t,i){return s("tr",{key:t.id,staticClass:"datatable-row",class:{canceled:t.canceled},attrs:{scope:"row"}},[s("th",{class:{"datatable-row-header":!0,"shot-name":!0,name:!0,bold:!t.canceled}},[s("div",{staticClass:"flexrow"},[s("entity-thumbnail",{attrs:{entity:t}}),s("router-link",{attrs:{to:e.shotPath(t.id)}},[e._v(" "+e._s(t.name)+" ")])],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotDescription?s("description-cell",{staticClass:"description",attrs:{entry:t}}):e._e(),e._l(e.shotMetadataDescriptors,(function(n){return e.isShowInfos?s("td",{key:t.id+"-"+n.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"ellipsis",attrs:{title:t.data?t.data[n.field_name]:""}},[e._v(" "+e._s(t.data?t.data[n.field_name]:"")+" ")])]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isTime?s("td",{staticClass:"time-spent"},[e._v(" "+e._s(e.formatDuration(t.timeSpent))+" ")]):e._e(),e.isShowInfos?s("td",{staticClass:"frames"},[e._v(" "+e._s(t.nb_frames)+" ")]):e._e(),e.isFrameIn&&e.isShowInfos?s("td",{staticClass:"framein"},[e._v(" "+e._s(t.data&&t.data.frame_in?t.data.frame_in:"")+" ")]):e._e(),e.isFrameOut&&e.isShowInfos?s("td",{staticClass:"frameout"},[e._v(" "+e._s(t.data&&t.data.frame_out?t.data.frame_out:"")+" ")]):e._e(),e.isFps&&e.isShowInfos?s("td",{staticClass:"fps"},[e._v(" "+e._s(t.data&&t.data.fps?t.data.fps:"")+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(a,o){return e.isLoading?e._e():s("validation-cell",{key:a+"-"+t.id,ref:"validation-"+e.getIndex(i,n)+"-"+o,refInFor:!0,class:{"validation-cell":!e.hiddenColumns[a],"hidden-validation-cell":e.hiddenColumns[a]},attrs:{column:e.taskTypeMap[a],entity:t,"task-test":e.taskMap[t.validations[a]],minimized:e.hiddenColumns[a],selected:e.shotSelectionGrid[e.getIndex(i,n)][o],rowX:e.getIndex(i,n),columnY:o,"is-assignees":e.isShowAssignations},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}})})),e.isCurrentUserManager?s("row-actions",{attrs:{entry:t,"edit-route":e.editPath(t.id),"restore-route":e.restorePath(t.id),"delete-route":e.deletePath(t.id),"hide-history":!1},on:{"history-clicked":function(s){return e.$emit("shot-history",t)}}}):s("td",{staticClass:"actions"})],2)}))],2):e._e()}))],2)],1),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("shots.empty_list")))]),s("button-simple",{staticClass:"level-item big-button",attrs:{text:e.$t("shots.new_shots")},on:{click:function(t){return e.$emit("add-shots")}}})],1),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("shots.empty_list_client")))])]):e._e(),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-shots"},[e._v(" "+e._s(e.displayedShotsLength)+" "+e._s(e.$tc("shots.number",e.displayedShotsLength))+" ("+e._s(e.formatDuration(e.displayedShotsTimeSpent))+" "+e._s(e.$tc("main.days_spent",e.displayedShotsTimeSpent))+", "+e._s(e.displayedShotsFrames)+" "+e._s(e.$tc("main.nb_frames",e.displayedShotsFrames))+") ")])],1)},Ya=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])}];function Wa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ga(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ka={name:"shot-list",mixins:[Ne["a"],Be["a"],Re["a"]],props:{displayedShots:{type:Array,default:function(){return[]}},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonSimple:H["a"],ChevronDownIcon:U["e"],DescriptionCell:Y["a"],EntityThumbnail:ve["a"],RowActions:Ve["a"],TableHeaderMenu:Je,TableMetadataHeaderMenu:at,TableInfo:le["a"],ValidationCell:ot["a"]},computed:Ga({},Object(l["c"])(["currentProduction","currentEpisode","displayedShotsLength","displayedShotsTimeSpent","displayedShotsFrames","isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isFps","isFrameIn","isFrameOut","isSingleEpisode","isShotDescription","isShowAssignations","isShowInfos","isTime","isTVShow","nbSelectedTasks","shotFilledColumns","shotMap","shotMetadataDescriptors","shotSearchText","shotSelectionGrid","taskMap","taskTypeMap"]),{isEmptyList:function(){return this.displayedShots&&0===this.displayedShots[0].length&&!this.isLoading&&!this.isError&&(!this.shotSearchText||0===this.shotSearchText.length)},createTasksPath:function(){return this.getPath("create-shot-tasks")},manageShotsPath:function(){var e={name:"manage-shots",params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-manage-shots",e.params.episode_id=this.currentEpisode.id),e},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedShotsLength>0},visibleColumns:function(){var e=2;return e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isShotDescription?1:0,e+=this.shotMetadataDescriptors.length,e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isTime?1:0,e+=this.isShowInfos?1:0,e+=this.isShowInfos&&this.isFrameIn?1:0,e+=this.isShowInfos&&this.isFrameOut?1:0,e+=this.isShowInfos&&this.isFps?1:0,e+=this.displayedValidationColumns.length,e},displayedValidationColumns:function(){var e=this;return this.validationColumns.filter((function(t){return e.shotFilledColumns[t]&&(!e.hiddenColumns[t]||e.isShowInfos)}))}}),methods:Ga({},Object(l["b"])(["displayMoreShots"]),{onBodyScroll:function(e,t){this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreShots()},loadMoreShots:function(){this.displayMoreShots()},resizeHeaders:function(){return!0},taskTypePath:function(e){return this.isTVShow&&this.currentEpisode?{name:"episode-task-type",params:{production_id:this.currentProduction.id,episode_id:this.currentEpisode.id,task_type_id:e,type:"shots"}}:{name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"shots"}}},shotPath:function(e){return this.getPath("shot",e)},editPath:function(e){return this.getPath("edit-shot",e)},deletePath:function(e){return this.getPath("delete-shot",e)},restorePath:function(e){return this.getPath("restore-shot",e)},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.shot_id=t),s},getIndex:function(e,t){var s=0,n=0;while(s<t)n+=this.displayedShots[s].length,s++;return e+n}}),watch:{validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},Qa=Ka,Ja=(s("0df1"),Object(m["a"])(Qa,Ha,Ya,!1,null,"4d360f6a",null)),Xa=Ja.exports;function Za(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function eo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Za(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var to={name:"shots",mixins:[Ie,$e],components:{AddMetadataModal:St,AddThumbnailsModal:It,ButtonSimple:H["a"],CreateTasksModal:Vt,DeleteModal:Ut["a"],EditShotModal:ya,ImportModal:Ht["a"],HardDeleteModal:Wt["a"],ManageShotsModal:Ia,ImportRenderModal:Yt["a"],SearchField:Gt["a"],SearchQueryList:Kt["a"],SortingInfo:ts,ShotHistoryModal:Ua,ShowAssignationsButton:ls,ShowInfosButton:_s,ShotList:Xa,TaskInfo:vs["a"]},data:function(){return{initialLoading:!0,deleteAllTasksLockText:null,descriptorToEdit:{},historyShot:{},shotToDelete:null,shotToEdit:null,formData:null,parsedCSV:[],modals:{isAddMetadataDisplayed:!1,isAddThumbnailsDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isDeleteAllTasksDisplayed:!1,isImportRenderDisplayed:!1,isImportDisplayed:!1,isManageDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1,isShotHistoryDisplayed:!1},loading:{addMetadata:!1,addThumbnails:!1,creatingTasks:!1,creatingTasksStay:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,importing:!1,stay:!1},errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,importing:!1}}},computed:eo({},Object(l["c"])(["currentEpisode","currentProduction","deleteShot","displayedShotsBySequence","editShot","episodeMap","episodes","isCurrentUserClient","isCurrentUserManager","isFrameIn","isFrameOut","isFps","isTime","isShotsLoading","isShotsLoadingError","isShowAssignations","isTVShow","nbSelectedTasks","openProductions","restoreShot","sequences","selectedTasks","shotMap","shotFilledColumns","shotsCsvFormData","shotSearchQueries","shotSearchText","shotsPath","shotValidationColumns","shotListScrollPosition","shotSorting","taskTypeMap"]),{searchField:function(){return this.$refs["shot-search-field"]},addThumbnailsModal:function(){return this.$refs["add-thumbnails-modal"]},columns:function(){var e=["Sequence","Name","Description","Nb Frames","FPS","Frame In","Frame Out"];return this.isTVShow&&e.unshift("Episode"),e},dataMatchers:function(){var e=["Sequence","Name"];return this.isTVShow&&e.unshift("Episode"),e},filteredShots:function(){var e=this,t={};return this.displayedShotsBySequence.forEach((function(s){s.forEach((function(s){var n="".concat(s.sequence_name).concat(s.name);e.isTVShow&&(n=s.episode_name+n),t[n]=!0}))})),t}}),created:function(){this.setLastProductionScreen("shots")},mounted:function(){var e=this;this.shotSearchText.length>0&&this.$refs["shot-search-field"].setValue(this.shotSearchText),Object.keys(this.shotMap).length<2||this.shotValidationColumns.length>0&&!Object.keys(this.shotMap)[0].validations?setTimeout((function(){e.loadShots((function(t){setTimeout((function(){e.initialLoading=!1}),200),t||(e.handleModalsDisplay(),setTimeout((function(){e.$refs["shot-list"].setScrollPosition(e.shotListScrollPosition)}),500))}))}),100):(this.isShotsLoading||(this.initialLoading=!1),this.onSearchChange(),this.$refs["shot-list"].setScrollPosition(this.shotListScrollPosition))},methods:eo({},Object(l["b"])(["addMetadataDescriptor","changeShotSort","commentTaskWithPreview","deleteAllTasks","deleteMetadataDescriptor","getShotsCsvLines","hideAssignations","loadShots","loadComment","removeShotSearch","saveShotSearch","setLastProductionScreen","setPreview","setShotSearch","showAssignations","uploadShotFile"]),{confirmAddMetadata:function(e){var t=this;this.loading.addMetadata=!0,e.entity_type="Shot",this.addMetadataDescriptor(e).then((function(){t.loading.addMetadata=!1,t.modals.isAddMetadataDisplayed=!1})).catch((function(e){console.error(e),t.loading.addMetadata=!1,t.errors.addMetadata=!0}))},closeMetadataModal:function(){this.modals.isAddMetadataDisplayed=!1},confirmDeleteMetadata:function(){var e=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){e.errors.deleteMetadata=!1,e.loading.deleteMetadata=!1,e.modals.isDeleteMetadataDisplayed=!1})).catch((function(t){console.error(t),e.errors.deleteMetadata=!0,e.loading.deleteMetadata=!1}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(e){this.descriptorIdToDelete=e,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(e){this.descriptorToEdit=this.currentProduction.descriptors.find((function(t){return t.id===e})),this.modals.isAddMetadataDisplayed=!0},confirmEditShot:function(e){var t=this,s="newShot";this.loading.edit=!0,this.editShot.isCreateError=!1,this.shotToEdit&&this.shotToEdit.id&&(s="editShot",e.id=this.shotToEdit.id),this.$store.dispatch(s,{data:e,callback:function(e){e?(t.loading.edit=!1,t.editShot.isCreateError=!0):(t.loading.edit=!1,t.modals.isNewDisplayed=!1,t.$router.push(t.shotsPath))}})},confirmDeleteAllTasks:function(){var e=this,t=this.$route.params.task_type_id,s=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllTasks({projectId:s,taskTypeId:t}).then((function(){e.loading.deleteAllTasks=!1,e.loadShots(),e.$router.push(e.shotsPath)})).catch((function(t){console.error(t),e.loading.deleteAllTasks=!1,e.errors.deleteAllTasks=!0}))},confirmDeleteShot:function(){var e=this;this.$store.dispatch("deleteShot",{shot:this.shotToDelete,callback:function(t){t||e.$router.push(e.shotsPath)}})},confirmRestoreShot:function(){var e=this;this.$store.dispatch("restoreShot",{shot:this.shotToRestore,callback:function(t){t||e.$router.push(e.shotsPath)}})},confirmAddThumbnails:function(e){var t=this,s=function(e){return t.addThumbnailsModal.markLoading(e.task.entity_id),t.commentTaskWithPreview({taskId:e.task.id,commentText:"",taskStatusId:e.task.task_status_id,form:e}).then((function(s){s.newComment;var n=s.preview;return t.setPreview({taskId:e.task.id,entityId:e.task.entity_id,previewId:n.id})})).then((function(){return t.addThumbnailsModal.markUploaded(e.task.entity_id),Promise.resolve()}))};this.loading.addThumbnails=!0,Ae["a"].runPromiseMapAsSeries(e,s).then((function(){t.loading.addThumbnails=!1,t.modals.isAddThumbnailsDisplayed=!1}))},confirmCreateTasks:function(e){var t=this;this.loading.creatingTasks=!0,this.runTasksCreation(e,(function(){t.hideCreateTasksModal(),t.loading.creatingTasks=!1}))},confirmCreateTasksAndStay:function(e){var t=this;this.loading.creatingTasksStay=!0,this.runTasksCreation(e,(function(){t.loading.creatingTasksStay=!1}))},runTasksCreation:function(e,t){var s=this;this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:e.task_type_id,project_id:this.currentProduction.id,type:"shots",callback:function(e){e?s.errors.creatingTasks=!0:s.loadShots(),t(e)}})},resetEditModal:function(){var e={name:""};this.sequences.length>0&&(e.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(e.production_id=this.openProductions[0].id),this.shotToEdit=e},deleteText:function(){var e=this.shotToDelete;return e?this.$t("shots.delete_text",{name:e.name}):""},deleteAllTasksText:function(){var e=this.taskTypeMap[this.$route.params.task_type_id];return e?this.$t("tasks.delete_all_text",{name:e.name}):""},restoreText:function(){var e=this.shotToRestore;return e?this.$t("shots.restore_text",{name:e.name}):""},handleModalsDisplay:function(){var e=this.$route.path,t=this.$route.params.shot_id;this.editShot.isSuccess=!1,this.editShot.isError=!1,Object.assign(this.modals,{isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1}),e.indexOf("new")>0?(this.resetEditModal(),this.modals.isNewDisplayed=!0):e.indexOf("edit")>0?(this.shotToEdit=this.shotMap[t],this.modals.isNewDisplayed=!0):e.indexOf("delete-all-tasks")>0?this.modals.isDeleteAllTasksDisplayed=!0:e.indexOf("delete")>0?(this.shotToDelete=this.shotMap[t],this.modals.isDeleteDisplayed=!0):e.indexOf("restore")>0&&(this.shotToRestore=this.shotMap[t],this.modals.isRestoreDisplayed=!0)},cleanUpCsv:function(e){return e.forEach((function(e){e.forEach((function(e,t,s){s[t]=e.trim()}))})),e[0].forEach((function(e,t,s){s[t]=e[0].toUpperCase()+e.slice(1)})),e},renderImport:function(e,t){var s=this;this.loading.importing=!0,this.errors.importing=!1,this.formData=e,"file"===t&&(e=e.get("file")),De["a"].processCSV(e).then((function(e){s.cleanUpCsv(e),s.parsedCSV=e,s.hideImportModal(),s.loading.importing=!1,s.showImportRenderModal()}))},uploadImportFile:function(e,t){var s=this,n=new FormData,i="import.csv",a=De["a"].turnEntriesToCsvString(e),o=new File([a],i,{type:"text/csv"});n.append("file",o),this.loading.importing=!0,this.errors.importing=!1,this.$store.commit("SHOT_CSV_FILE_SELECTED",n),this.uploadShotFile(t).then((function(){s.loading.importing=!1,s.hideImportRenderModal(),s.loadShots()})).catch((function(e){console.error(e),s.loading.importing=!1,s.errors.importing=!0}))},resetImport:function(){this.errors.importing=!1,this.hideImportRenderModal(),this.$store.commit("SHOT_CSV_FILE_SELECTED",null),this.$refs["import-modal"].reset(),this.showImportModal()},onDeleteAllTasksClicked:function(e){var t=this.getPath("delete-all-shot-tasks"),s=this.taskTypeMap[e];t.params.task_type_id=e,this.deleteAllTasksLockText=s.name,this.$router.push(t)},onSearchChange:function(e){var t=this.searchField.getValue();1!==t.length&&(this.setShotSearch(t),this.setSearchInUrl())},saveScrollPosition:function(e){this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",e)},saveSearchQuery:function(e){this.saveShotSearch(e).catch(console.error)},removeSearchQuery:function(e){this.removeShotSearch(e).catch(console.error)},getPath:function(e){var t={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-".concat(e),t.params.episode_id=this.currentEpisode.id),t},showManageShots:function(){this.modals.isManageDisplayed=!0},hideManageShots:function(){this.modals.isManageDisplayed=!1},showShotHistoryModal:function(e){this.historyShot=e,this.modals.isShotHistoryDisplayed=!0},hideShotHistoryModal:function(){this.modals.isShotHistoryDisplayed=!1},onExportClick:function(){var e=this;this.getShotsCsvLines().then((function(t){var s=[xe()().format("YYYY-MM-DD"),"kitsu",e.currentProduction.name,e.$t("shots.title")];e.currentEpisode&&s.splice(3,0,e.currentEpisode.name);var n=Object(Le["b"])(s.join("_")),i=["Sequence","Name","Description"];Object(Me["d"])(Object(K["a"])(e.currentProduction.descriptors)).filter((function(e){return"Shot"===e.entity_type})).forEach((function(e){i.push(e.name)})),i.push("Nb Frames"),e.isFrameIn&&i.push("Frame In"),e.isFrameOut&&i.push("Frame Out"),e.isFps&&i.push("FPS"),e.isTime&&i.push("Time spent"),e.shotValidationColumns.forEach((function(t){i.push(e.taskTypeMap[t].name)})),De["a"].buildCsvFile(n,[i].concat(t))}))},onChangeSortClicked:function(e){this.changeShotSort(e)}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var e=this;this.$refs["shot-search-field"].setValue(""),this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",0),this.initialLoading=!0,this.isTVShow||this.loadShots((function(t){e.initialLoading=!1,e.setSearchFromUrl(),e.onSearchChange(),t||e.handleModalsDisplay()}))},currentEpisode:function(){var e=this;this.isTVShow&&this.currentEpisode&&(this.initialLoading=!0,this.loadShots((function(t){e.setSearchFromUrl(),e.onSearchChange(),e.initialLoading=!1,t||e.handleModalsDisplay()})))}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("shots.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("shots.title")," - Kitsu")}}},so=to,no=(s("6c4a"),Object(m["a"])(so,Ta,Pa,!1,null,"f70b2b1a",null)),io=no.exports,ao=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"people page fixed-page"},[s("div",{staticClass:"flexrow mt2 add-people"},[s("span",{staticClass:"flexrow-item people-field-label"},[e._v(" "+e._s(e.$t("people.add_member_to_team"))+" ")]),s("people-field",{ref:"people-field",staticClass:"flexrow-item add-people-field",attrs:{people:e.unlistedPeople},on:{enter:e.addPerson},model:{value:e.person,callback:function(t){e.person=t},expression:"person"}}),s("button",{staticClass:"button flexrow-item",on:{click:e.addPerson}},[e._v(" "+e._s(e.$t("main.add"))+" ")])],1),s("production-team-list",{attrs:{entries:e.teamPersons,"is-loading":e.isTeamLoading,"is-error":e.isTeamLoadingError},on:{remove:e.removePerson}})],1)},oo=[],ro=(s("2532"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[e._v(" "+e._s(e.$t("people.list.name"))+" ")]),s("th",{staticClass:"email"},[e._v(" "+e._s(e.$t("people.list.email"))+" ")]),s("th",{staticClass:"phone"},[e._v(" "+e._s(e.$t("people.list.phone"))+" ")]),s("th",{staticClass:"role"},[e._v(" "+e._s(e.$t("people.list.role"))+" ")]),s("th",{staticClass:"actions"})])])])]),e.isEmpty?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.entries,(function(t){return s("tr",{key:t.id},[s("people-name-cell",{staticClass:"name",attrs:{person:t}}),s("td",{staticClass:"email"},[e._v(e._s(t.email))]),s("td",{staticClass:"phone"},[e._v(e._s(t.phone))]),s("td",{staticClass:"role"},[e._v(e._s(e.$t("people.role."+t.role)))]),e.isCurrentUserAdmin?s("td",{staticClass:"actions"},[s("button",{staticClass:"button",on:{click:function(s){return e.removePerson(t)}}},[e._v(" "+e._s(e.$t("main.remove"))+" ")])]):s("td",{staticClass:"actions"})],1)})),0)])]),e.isEmpty?s("div",{staticClass:"table-body"},[e.isEmpty?s("p",{staticClass:"has-text-centered mt2"},[e._v(" "+e._s(e.$t("people.empty_team"))+" ")]):e._e()]):e._e(),s("p",{staticClass:"has-text-centered footer-info"},[e._v(" "+e._s(e.entries.length)+" "+e._s(e.$tc("people.persons",e.entries.length))+" ")])])}),co=[],lo=s("7365");function uo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function po(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ho={name:"production-team-list",components:{PeopleNameCell:lo["a"]},props:["entries"],computed:po({},Object(l["c"])(["isCurrentUserAdmin"]),{isEmpty:function(){return!this.entries||0===this.entries.length}}),methods:po({},Object(l["b"])(["removePersonFromTeam"]),{removePerson:function(e){this.removePersonFromTeam(e)},onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px")}})},fo=ho,mo=(s("dea4"),Object(m["a"])(fo,ro,co,!1,null,"f3c95f54",null)),bo=mo.exports;function _o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var yo={name:"people",components:{PeopleField:Rn,ProductionTeamList:bo},data:function(){return{person:null,isTeamLoading:!1,isTeamLoadingError:!1}},computed:vo({},Object(l["c"])(["currentProduction","productionMap","openProductions","personMap","people"]),{teamPersons:function(){var e=this;return Object(Me["f"])(this.currentProduction.team.map((function(t){return e.personMap[t]})))},unlistedPeople:function(){var e=this;return this.people.filter((function(t){return!e.currentProduction.team.includes(t.id)&&t.active}))}}),methods:vo({},Object(l["b"])(["addPersonToTeam"]),{addPerson:function(){var e=this;this.addPersonToTeam(this.person),setTimeout((function(){e.$refs["people-field"].clear()}),1)},removePerson:function(e){this.removePersonFromTeam(e)}}),metaInfo:function(){return{title:"".concat(this.currentProduction.name," | ").concat(this.$t("people.team")," - Kitsu")}}},go=yo,ko=(s("dda8"),Object(m["a"])(go,ao,oo,!1,null,"b2c59084",null)),wo=ko.exports,So=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"task-type columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{ref:"page",staticClass:"task-type page"},[s("div",{ref:"header",staticClass:"task-type-header page-header flexrow-item"},[s("div",{staticClass:"flexcolumn-item flexrow"},[e.currentTaskType.for_shots?s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:e.shotsPath}},[s("chevron-left-icon")],1):s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:e.assetsPath}},[s("chevron-left-icon")],1),s("task-type-name",{staticClass:"flexrow-item",attrs:{"task-type":e.currentTaskType}}),s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow-item"},[e.isActiveTab("schedule")?e._e():s("button-simple",{attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}})],1)],1),s("div",{staticClass:"tabs mt1"},[s("ul",[s("li",{class:{"is-active":e.isActiveTab("tasks")}},[s("router-link",{attrs:{to:e.tasksPath}},[e._v(" "+e._s(e.$t("tasks.tasks"))+" ")])],1),s("li",{class:{"is-active":e.isActiveTab("schedule")}},[s("router-link",{attrs:{to:e.schedulePath}},[e._v(" "+e._s(e.$t("schedule.title"))+" ")])],1)])]),s("div",{staticClass:"flexcolumn-item flexrow"},[s("div",{staticClass:"flexrow-item"},[s("search-field",{ref:"task-search-field",attrs:{"can-save":!0,placeholder:"ex: retake chara"},on:{change:e.onSearchChange,save:e.saveSearchQuery}})],1),s("div",{staticClass:"filler"}),e.isActiveTab("tasks")?s("div",{staticClass:"flexrow-item"},[s("combobox",{attrs:{label:e.$t("main.sorted_by"),options:e.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:e.currentSort,callback:function(t){e.currentSort=t},expression:"currentSort"}})],1):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"flexrow-item color-option"},[s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("tasks.colors.title"),options:e.schedule.colorOptions,"locale-key-prefix":"tasks.colors."},model:{value:e.schedule.currentColor,callback:function(t){e.$set(e.schedule,"currentColor",t)},expression:"schedule.currentColor"}})],1):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"flexrow-item zoom-level"},[e.isActiveTab("schedule")?s("combobox-number",{attrs:{label:e.$t("schedule.zoom_level"),options:e.schedule.zoomOptions},model:{value:e.schedule.zoomLevel,callback:function(t){e.$set(e.schedule,"zoomLevel",t)},expression:"schedule.zoomLevel"}}):e._e()],1):e._e()])]),s("div",{staticClass:"query-list"},[e.loading.entities?e._e():s("search-query-list",{attrs:{queries:e.searchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1),e.isActiveTab("tasks")?s("task-list",{ref:"task-list",attrs:{tasks:e.tasks,"is-assets":e.isAssets,"is-loading":e.loading.entities,"is-error":e.errors.entities},on:{"task-selected":e.onTaskSelected}}):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"task-type-schedule flexrow-item"},[s("schedule",{ref:"schedule-widget",attrs:{"start-date":e.schedule.startDate,"end-date":e.schedule.endDate,hierarchy:e.schedule.scheduleItems,"zoom-level":e.schedule.zoomLevel,height:e.schedule.scheduleHeight,"is-loading":e.loading.entities},on:{"item-changed":e.saveScheduleItem,"root-element-expanded":e.expandPersonElement}})],1):e._e()],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e()])},Oo=[],Co=s("ceca"),To=s.n(Co),Po=s("ca76"),Eo=s("1e4c"),jo=s("d7c7"),xo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",{ref:"thead"},[s("tr",[s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),e.isAssets?s("th",{ref:"th-type",staticClass:"asset-type"},[e._v(" "+e._s(e.$t("tasks.fields.asset_type"))+" ")]):s("th",{ref:"th-type",staticClass:"sequence"},[e._v(" "+e._s(e.$t("tasks.fields.sequence"))+" ")]),s("th",{ref:"th-name",staticClass:"name"},[e._v(" "+e._s(e.$t("tasks.fields.entity_name"))+" ")]),s("th",{ref:"th-status",staticClass:"status"},[e._v(" "+e._s(e.$t("tasks.fields.task_status"))+" ")]),s("th",{ref:"th-assignees",staticClass:"assignees"},[e._v(" "+e._s(e.$t("tasks.fields.assignees"))+" ")]),e.isAssets?e._e():s("th",{ref:"th-frames",staticClass:"frames"},[e._v(" "+e._s(e.$t("tasks.fields.frames"))+" ")]),s("th",{ref:"th-estimation",staticClass:"estimation"},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{ref:"th-duration",staticClass:"duration"},[e._v(" "+e._s(e.$t("tasks.fields.duration").substring(0,3))+". ")]),s("th",{ref:"th-retake-count",staticClass:"retake-count"},[e._v(" "+e._s(e.$t("tasks.fields.retake_count"))+" ")]),s("th",{ref:"th-estimation",staticClass:"due-date"},[e._v(" "+e._s(e.$t("tasks.fields.due_date"))+" ")]),s("th",{ref:"th-status",staticClass:"real-start-date"},[e._v(" "+e._s(e.$t("tasks.fields.real_start_date"))+" ")]),s("th",{ref:"th-status",staticClass:"real-end-date"},[e._v(" "+e._s(e.$t("tasks.fields.real_end_date"))+" ")]),s("th",{ref:"th-status",staticClass:"last-comment-date"},[e._v(" "+e._s(e.$t("tasks.fields.last_comment_date"))+" ")]),s("th",{ref:"",staticClass:"empty"})])])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.isLoading?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table unselectable"},[s("tbody",{ref:"body-tbody",staticClass:"tbody"},e._l(e.displayedTasks,(function(t,n){return s("tr",{key:t.id,ref:"task-"+t.id,refInFor:!0,class:{"task-line":!0,selected:e.selectionGrid[t.id]},on:{click:function(s){return e.selectTask(s,n,t)}}},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e.getEntity(t.entity.id),width:50,height:33}})],1),e.isAssets?s("td",{staticClass:"asset-type"},[e._v(" "+e._s(e.getEntity(t.entity.id).asset_type_name)+" ")]):s("td",{staticClass:"sequence"},[e._v(" "+e._s(e.getEntity(t.entity.id).sequence_name)+" ")]),s("td",{staticClass:"name"},[e._v(" "+e._s(e.getEntity(t.entity.id).name)+" ")]),s("validation-cell",{staticClass:"status unselectable",attrs:{"task-test":t,"is-border":!1,"is-assignees":!1,selectable:!1,"is-static":!0}}),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},e._l(t.assignees,(function(n){return s("people-avatar",{key:t.id+"-"+n,staticClass:"flexrow-item",attrs:{person:e.personMap[n],size:30,"font-size":17}})})),1)]),e.isAssets?e._e():s("td",{staticClass:"frames"},[e._v(" "+e._s(e.getEntity(t.entity.id).nb_frames)+" ")]),s("td",{staticClass:"estimation"},[e._v(" "+e._s(e.formatEstimation(t.estimation))+" ")]),s("td",{class:{duration:!0,error:e.isEstimationBurned(t)}},[e._v(" "+e._s(e.formatDuration(t.duration))+" ")]),s("td",{staticClass:"retake-count"},e._l(t.retake_count,(function(t){return s("span",{key:t},[e._v(" • ")])})),0),s("td",{staticClass:"due-date"},[e._v(" "+e._s(e.formatDate(t.due_date))+" ")]),s("td",{staticClass:"real-start-date"},[e._v(" "+e._s(e.formatDate(t.real_start_date))+" ")]),s("td",{staticClass:"real-end-date"},[e._v(" "+e._s(e.formatDate(t.end_date))+" ")]),s("td",{staticClass:"last-comment-date"},[e._v(" "+e._s(e.formatDate(t.last_comment_date))+" ")]),s("td")],1)})),0)])]),e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-tasks"},[e._v(" "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.number",e.tasks.length))+" ("+e._s(e.formatDuration(e.timeSpent))+" "+e._s(e.$tc("main.days_spent",Math.floor((e.timeSpent?e.timeSpent:0)/60)/8))),e.isAssets?e._e():s("span",[e._v(", "+e._s(e.nbFrames)+" "+e._s(e.$tc("main.nb_frames",e.nbFrames)))]),e._v(") ")])],1)},Do=[];function Ao(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ao(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Lo={name:"task-list",mixins:[Re["a"]],components:{EntityThumbnail:ve["a"],PeopleAvatar:ue["a"],TableInfo:le["a"],ValidationCell:ot["a"]},data:function(){return{lastSelection:null,page:1,selectionGrid:{}}},props:{isAssets:{type:Boolean,default:!0},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},tasks:{type:Array,default:function(){return[]}},taskType:{type:Object,default:function(){}}},mounted:function(){window.addEventListener("keydown",this.onKeyDown,!1),this.$nextTick(this.resizeHeaders)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Mo({},Object(l["c"])(["assetMap","nbSelectedTasks","personMap","selectedTasks","shotMap"]),{timeSpent:function(){var e=0;return this.tasks.forEach((function(t){e+=t.duration})),e},nbFrames:function(){var e=this,t=0;return this.tasks.forEach((function(s){var n=e.shotMap[s.entity.id];n&&n.nb_frames&&(t+=n.nb_frames)})),t},displayedTasks:function(){return this.tasks&&this.tasks.length>0?this.tasks.slice(0,60*this.page):[]}}),methods:Mo({},Object(l["b"])(["addSelectedTask","addSelectedTasks","clearSelectedTasks","removeSelectedTask"]),{formatEstimation:function(e){return e?e<10?e:this.formatDuration(e):0},formatDate:function(e){return e?A()(e).format("YYYY-MM-DD"):""},isEstimationBurned:function(e){return e.estimation&&e.estimation>0&&e.duration>e.estimation},onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px"),this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},getEntity:function(e){return this.isAssets?this.assetMap[e]:this.shotMap[e]},onKeyDown:function(e){if(this.tasks.length>0&&e.altKey){var t=this.lastSelection?this.lastSelection:0;[37,38].includes(e.keyCode)?(t=t-1<0?t=this.tasks.length-1:t-1,this.selectTask({},t,this.tasks[t])):[39,40].includes(e.keyCode)&&(t=t+1>=this.tasks.length?t=0:t+1,this.selectTask({},t,this.tasks[t]))}},selectTask:function(e,t,s){var n=this,a=this.selectionGrid[s.id],o=Object.keys(this.selectionGrid).length>1;if(e.ctrlKey||e.shiftKey||(this.clearSelectedTasks({task:s}),this.resetSelection()),e.shiftKey){this.selectionGrid={};var r=[];r=this.lastSelection>t?Object(Fa["j"])(t,this.lastSelection):Object(Fa["j"])(this.lastSelection,t);var c=r.map((function(e){return{task:n.tasks[e]}}));c.forEach((function(e){i.a.set(n.selectionGrid,e.task.id,!0)})),this.addSelectedTasks(c)}else this.selectionGrid[s.id]?(this.removeSelectedTask({task:s}),i.a.set(this.selectionGrid,s.id,void 0)):a&&!o||(this.addSelectedTask({task:s}),this.$emit("task-selected",s),i.a.set(this.selectionGrid,s.id,!0),this.lastSelection=t);this.scrollToLine(s.id)},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},scrollToLine:function(e){var t=this.$refs["task-"+e];if(t&&this.$refs.body){var s=30,n=t[0].getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),a=n.bottom>i.bottom-s,o=n.top<i.top+s;if(a){var r=n.bottom-i.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=i.top-n.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},resetSelection:function(){this.selectionGrid={},this.lastSelection=null},resizeHeaders:function(){var e=this;if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].children.length>0){var t=this.$refs["body-tbody"].children[0],s=[{index:1,name:"type"},{index:2,name:"name"},{index:4,name:"assignees"}];s.forEach((function(s){var n=Math.max(t.children[s.index].offsetWidth,100);e.$refs["th-"+s.name].style["min-width"]="".concat(n,"px")}))}},getTableData:function(){var e=this,t=[this.isAssets?this.$t("tasks.fields.asset_type"):this.$t("tasks.fields.sequence"),this.$t("tasks.fields.entity_name"),this.$t("tasks.fields.task_status"),this.$t("tasks.fields.assignees"),this.$t("tasks.fields.estimation"),this.$t("tasks.fields.duration"),this.$t("tasks.fields.retake_count"),this.$t("tasks.fields.real_start_date"),this.$t("tasks.fields.real_end_date"),this.$t("tasks.fields.last_comment_date")];this.isAssets||t.splice(4,0,"otot");var s=[t];return this.tasks.forEach((function(t){var n=t.assignees.map((function(t){var s=e.personMap[t];return s?s.name:""})).join(", "),i=[e.isAssets?e.getEntity(t.entity.id).asset_type_name:e.getEntity(t.entity.id).sequence_name,e.getEntity(t.entity.id).name,t.task_status_short_name,n,e.formatDuration(t.estimation),e.formatDuration(t.duration),t.retake_count,e.formatDate(t.real_start_date),e.formatDate(t.end_date),e.formatDate(t.last_comment_date)];if(!e.isAssets){var a=e.getEntity(t.entity.id).nb_frames;i.splice(4,0,a)}s.push(i)})),s}}),watch:{tasks:function(){this.page=1,this.resetSelection(),this.$nextTick(this.resizeHeaders)},nbSelectedTasks:function(){0===this.nbSelectedTasks&&this.resetSelection()}}},Io=Lo,$o=(s("2866"),Object(m["a"])(Io,xo,Do,!1,null,"8fb0353a",null)),qo=$o.exports;function Fo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function No(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ro={name:"task-type-page",mixins:[Re["a"],Ie],components:{ButtonSimple:H["a"],ChevronLeftIcon:U["f"],Combobox:Z["a"],ComboboxNumber:Eo["a"],Schedule:jo["a"],SearchField:Gt["a"],SearchQueryList:Kt["a"],TaskList:qo,TaskInfo:vs["a"],TaskTypeName:di["a"]},entityListCache:[],data:function(){return{activeTab:"tasks",currentSort:"entity_name",currentTask:null,isAssets:!0,tasks:[],selection:{},errors:{entities:!1},loading:{entities:!1},schedule:{currentColor:"neutral",endDate:xe()().add(3,"months"),scheduleItems:[],scheduleHeight:800,startDate:xe()().add(-1,"months"),zoomLevel:1,zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],colorOptions:[{label:"Neutral",value:"neutral"},{label:"Status",value:"status"},{label:"Late",value:"late"}]}}},created:function(){if(this.currentProduction){var e={productionId:this.currentProduction.id};this.currentEpisode&&(e.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",e)}else this.setProduction(this.$route.params.production_id)},mounted:function(){var e=this;this.isAssets=this.$route.path.includes("assets"),this.$route.path.includes("schedule")&&(this.activeTab="schedule"),setTimeout((function(){e.initData(!1)}),100),window.addEventListener("resize",this.resetScheduleHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.resetScheduleHeight)},computed:No({},Object(l["c"])(["assetMap","assetsPath","currentEpisode","currentProduction","currentTaskType","isCurrentUserManager","isTVShow","nbSelectedTasks","personMap","selectedTasks","sequenceSubscriptions","shotsByEpisode","shotMap","shotsPath","taskSearchQueries","taskStatusMap","taskMap","user"]),{assetTasks:function(){return this.getTasks(Object.values(this.assetMap))},shotTasks:function(){return this.getTasks(Object.values(this.shotMap))},title:function(){return this.currentProduction?this.isTVShow&&this.currentEpisode?"".concat(this.currentProduction.name," / ")+"".concat(this.currentEpisode.name," / ")+"".concat(this.currentTaskType.name):"".concat(this.currentProduction.name," / ").concat(this.currentTaskType.name):"Loading..."},tasksPath:function(){return this.getRoute("task-type")},schedulePath:function(){return this.getRoute("task-type-schedule")},sortOptions:function(){return["entity_name","task_status_short_name","priority","estimation","duration","retake_count","due_date","real_start_date","end_date","last_comment_date"].map((function(e){return{label:e,value:e}}))},searchQueries:function(){return this.isAssets?this.taskSearchQueries.filter((function(e){return"Asset"===e.entity_type})):this.taskSearchQueries},scheduleTeam:function(){var e=this,t=this.currentProduction.team.map((function(t){return e.personMap[t]}));return Object(Me["f"])(t)},searchField:function(){return this.$refs["task-search-field"]}}),methods:No({},Object(l["b"])(["clearSelectedTasks","initTaskType","removeTaskSearch","saveTaskSearch","setProduction","subscribeToSequence","updateTask","unsubscribeFromSequence"]),{initData:function(e){var t=this;this.resetTasks(),this.resetTaskIndex(),this.focusSearchField(),0===this.tasks.length?(this.loading.entities=!0,this.errors.entities=!1,this.initTaskType(e).then((function(){t.loading.entities=!1,t.resetTasks(),t.resetTaskIndex(),t.focusSearchField();var e=t.searchField.getValue();e&&t.onSearchChange(e),setTimeout((function(){t.setSearchFromUrl()}),200),t.isActiveTab("schedule")&&t.resetScheduleItems()})).catch((function(e){console.error(e),t.loading.entities=!1,t.errors.entities=!0}))):this.isActiveTab("schedule")&&this.resetScheduleItems()},isActiveTab:function(e){return this.activeTab===e},updateActiveTab:function(){this.$route.path.indexOf("schedule")>0?this.activeTab="schedule":this.activeTab="tasks"},getRoute:function(e){var t=this.$route.params.task_type_id,s=this.currentTaskType?this.currentTaskType.id:t,n={name:e,params:{production_id:this.currentProduction.id,task_type_id:s}};return this.isTVShow&&this.currentEpisode&&(n.name="episode-".concat(n.name),n.params.episode_id=this.currentEpisode.id),n},onSearchChange:function(e){var t=this;if(e&&1!==e.length){e=e.toLowerCase().trim();var s=this.currentProduction.descriptors.filter((function(e){return e.entityType===t.isAssets?"Asset":"Shot"})),n=Object(Po["e"])(e)||[],i=Object(Po["c"])(e)||[],a=Object(Po["b"])(s,e);if(n.length>0||i.length>0||a.length>0){var o=[],r=Object(Po["f"])(this.$options.taskIndex,e).concat(a);n.length>0?o=Object(Ln["h"])(this.$options.taskIndex,n):(this.resetTasks(),o=this.tasks),o=Object(Po["a"])(o,r,this.taskMap),this.tasks=this.sortTasks(o),this.isActiveTab("schedule")&&this.resetScheduleItems()}else this.resetTasks(),this.isActiveTab("schedule")&&this.resetScheduleItems()}else this.resetTasks(),this.isActiveTab("schedule")&&this.resetScheduleItems();this.setSearchInUrl(),this.clearSelectedTasks()},saveSearchQuery:function(e){var t=this.isAssets?"Asset":"Shot";this.saveTaskSearch({searchQuery:e,entityType:t}).then((function(){})).catch((function(e){console.error(e)}))},removeSearchQuery:function(e){this.removeTaskSearch(e).then((function(){})).catch((function(e){console.error(e)}))},onTaskSelected:function(e){this.currentTask=e},resetTasks:function(){this.isAssets?this.tasks=this.assetTasks:this.tasks=this.shotTasks,this.tasks=this.sortTasks()},resetTaskIndex:function(){this.isAssets?this.$options.taskIndex=Object(Ln["f"])(this.assetTasks,this.personMap):this.$options.taskIndex=Object(Ln["f"])(this.shotTasks,this.personMap),this.$options.taskIndex.me=Object(Ln["h"])(this.$options.taskIndex,this.user.full_name.split(" "))},getTasks:function(e){var t=this,s=[];return e.forEach((function(e){e.tasks.forEach((function(n){var i=t.taskMap[n];i.data=e.data,i&&i.task_type_id===t.currentTaskType.id&&s.push(i)}))})),s},sortTasks:function(e){e||(e=this.tasks);var t=["task_status_short_name","entity_name","due_date"].includes(this.currentSort);return e.sort(To()(this.currentSort,t?1:-1).thenBy("entity_name"))},onExportClick:function(){var e=this.$refs["task-list"].getTableData(),t=[xe()().format("YYYY-MM-DD"),this.currentProduction.name,this.currentTaskType.name,"tasks"];this.currentEpisode&&t.splice(1,0,this.currentEpisode.name);var s=Object(Le["b"])(t.join("_"));De["a"].buildCsvFile(s,e)},resetScheduleItems:function(){var e=this,t=this.buildAssignationMap(),s=this.scheduleTeam.map((function(s){return e.buildPersonElement(s,t)})).filter((function(e){return e})).filter((function(e){return e.children.length>0}));0!==t.unassigned.length&&(s=s.concat([this.buildPersonElement({id:"unassigned"},t)])),this.schedule.scheduleItems=s,this.resetScheduleDates()},resetScheduleDates:function(){var e=this.schedule.startDate,t=this.schedule.endDate;this.schedule.scheduleItems.forEach((function(s){e&&!e.isAfter(s.startDate)||(e=s.startDate.clone()),t&&!t.isBefore(s.endDate)||(t=s.endDate.clone())})),this.schedule.startDate=e.add(-1,"days"),this.schedule.endDate=t},buildAssignationMap:function(){var e={unassigned:[]};return this.scheduleTeam.forEach((function(t){t&&(e[t.id]=[])})),this.tasks.forEach((function(t){t.assignees.length>0?t.assignees.forEach((function(s){e[s]||(e[s]=[]),e[s].push(t)})):e.unassigned.push(t)})),e},buildPersonElement:function(e,t){var s=this;if(!e)return null;var n,i,a,o=0,r=t[e.id];a="unassigned"===e.id?{avatar:!1,id:e.id,name:"Unassigned",color:"#888",for_shots:!1,priority:1,expanded:!0,loading:!1,children:[],editable:!1}:{avatar:!0,has_avatar:e.has_avatar,avatarPath:e.avatarPath,uniqueHash:e.uniqueHash,initials:e.initials,id:e.id,name:e.full_name,color:e.color,for_shots:!1,priority:1,expanded:!0,loading:!1,children:[],editable:!1};var c=r.map((function(e){var t,r=s.formatEstimation(e.estimation),c=xe()();if(e.start_date?c=xe()(e.start_date,"YYYY-MM-DD"):e.real_start_date&&(c=xe()(e.real_start_date,"YYYY-MM-DD")),e.due_date?t=xe()(e.due_date,"YYYY-MM-DD"):e.end_date?t=xe()(e.end_date,"YYYY-MM-DD"):e.estimation&&(t=c.add(r,"days")),!t||t.isBefore(c)){var l=5===c.isoWeekday()?3:1;t=c.add(l,"days")}if(c||(c=xe()()),!t.isAfter(c)){var d=5===c.isoWeekday()?3:1;t=c.clone().add(d,"days")}return r&&(o+=parseInt(r)),n&&!n.isAfter(c)||(n=c.clone()),i&&!i.isBefore(t)||(i=t.clone()),No({},e,{name:e.entity_name,startDate:c,endDate:t,expanded:!1,loading:!1,man_days:r,editable:s.isCurrentUserManager,parentElement:a,color:s.getTaskElementColor(e,t),children:[]})}));return Object.assign(a,{children:c,startDate:n,endDate:i,man_days:o}),a},getTaskElementColor:function(e,t){if("status"===this.schedule.currentColor)return this.taskStatusMap[e.task_status_id].color;if("late"===this.schedule.currentColor){var s=!this.taskStatusMap[e.task_status_id].is_done&&t.isBefore(xe()());return s?"#FF3860":null}return null},saveScheduleItem:function(e){var t=this;this.$options.savingBuffer||(this.$options.savingBuffer={}),this.$options.savingBuffer[e.id]?this.$options.savingBuffer[e.id]=e:(this.$options.savingBuffer[e.id]=e,setTimeout((function(){e=No({},t.$options.savingBuffer[e.id]),e.startDate&&e.endDate&&(e.parentElement.startDate=t.getMinDate(e.parentElement),e.parentElement.endDate=t.getMaxDate(e.parentElement),t.updateTask({taskId:e.id,data:{start_date:e.startDate.format("YYYY-MM-DD"),due_date:e.endDate.format("YYYY-MM-DD")}})),t.$options.savingBuffer[e.id]=void 0}),1e3))},getMinDate:function(e){var t=this.schedule.endDate.clone();return e.children.forEach((function(e){e.startDate&&e.startDate.isBefore(t)&&(t=e.startDate)})),t.clone()},getMaxDate:function(e){var t=this.schedule.startDate.clone();return e.children.forEach((function(e){e.endDate&&e.endDate.isAfter(t)&&(t=e.endDate)})),t.clone()},expandPersonElement:function(e){e.expanded=!e.expanded},resetScheduleHeight:function(){var e=this;this.$nextTick((function(){if(e.isActiveTab("schedule")){var t=e.$refs.page.offsetHeight,s=e.$refs.header.offsetHeight;e.schedule.scheduleHeight=t-s+20,e.$refs["schedule-widget"].resetScheduleSize()}}))}}),watch:{$route:function(){this.updateActiveTab()},currentProduction:function(){this.initData(!0)},currentSort:function(){this.sortTasks(),this.$refs["task-list"].resetSelection(),this.clearSelectedTasks()},"schedule.currentColor":function(){this.resetScheduleItems()},activeTab:function(){this.isActiveTab("schedule")&&(this.resetScheduleItems(),this.resetScheduleHeight())}},socket:{events:{"task:update":function(e){this.taskMap[e.task_id]&&setTimeout(this.resetTaskIndex,1e3)}}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Bo=Ro,zo=(s("a799"),Object(m["a"])(Bo,So,Oo,!1,null,"4f76e714",null)),Vo=zo.exports,Uo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[e.isCurrentUserManager?s("div",{staticClass:"timesheets page"},[s("div",{staticClass:"page-header flexrow"},[s("page-title",{staticClass:"flexrow-item",attrs:{text:e.$t("timesheets.title")}}),s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("timesheets.detail_level"),options:e.detailOptions},model:{value:e.detailLevelString,callback:function(t){e.detailLevelString=t},expression:"detailLevelString"}}),"year"!==e.detailLevelString?s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("timesheets.year"),options:e.yearOptions},model:{value:e.yearString,callback:function(t){e.yearString=t},expression:"yearString"}}):e._e(),"day"===e.detailLevelString?s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("timesheets.month"),options:e.monthOptions},model:{value:e.monthString,callback:function(t){e.monthString=t},expression:"monthString"}}):e._e(),s("div",{staticClass:"filler"}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("timesheets.export_timesheet"),icon:"download"},on:{click:e.exportTimesheet}})],1),s("people-timesheet-list",{staticClass:"data-list",attrs:{people:e.filteredPeople,timesheet:e.timesheet,"detail-level":e.detailLevel,month:e.currentMonth,year:e.currentYear,"is-loading":e.isLoading,"is-error":e.isLoadingError}})],1):e._e()]),e.showInfo?s("div",{staticClass:"column side-column"},[s("people-timesheet-info",{attrs:{person:e.currentPerson,year:e.currentYear,month:e.currentMonth,week:e.currentWeek,day:e.currentDay,"is-loading":e.isInfoLoading,"is-loading-error":e.isInfoLoadingError,tasks:e.tasks},on:{close:e.hideSideInfo}})],1):e._e()])},Ho=[],Yo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[e._v(" "+e._s(e.$t("people.list.name"))+" ")]),e._l(e.yearRange,(function(t){return"year"===e.detailLevel?s("th",{key:"year-"+t,staticClass:"time year"},[e._v(" "+e._s(t)+" ")]):e._e()})),e._l(e.monthRange,(function(t){return"month"===e.detailLevel?s("th",{key:"month-"+t,staticClass:"time month"},[e._v(" "+e._s(e.monthToString(t))+" ")]):e._e()})),e._l(e.weekRange,(function(t){return"week"===e.detailLevel?s("th",{key:"week-"+t,staticClass:"daytime",attrs:{title:e.getWeekTitle(t)}},[e._v(" "+e._s(t)+" ")]):e._e()})),e._l(e.dayRange,(function(t){return"day"===e.detailLevel?s("th",{key:"day-"+t,staticClass:"daytime"},[e._v(" "+e._s(t)+" ")]):e._e()})),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.isLoading?e._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.people,(function(t){return s("tr",{key:t.id},[s("people-name-cell",{staticClass:"name",attrs:{person:t}}),e._l(e.yearRange,(function(n){return"year"===e.detailLevel?s("td",{key:"year-"+n+"-"+t.id,class:{time:!0,year:!0,selected:e.isYearSelected(t.id,n)}},[e.yearDuration(n,t.id)>0?s("router-link",{staticClass:"duration",attrs:{to:{name:"timesheets-year-person",params:{person_id:t.id,year:n}}}},[e._v(" "+e._s(e.yearDuration(n,t.id))+" ")]):s("span",[e._v(" - ")])],1):e._e()})),e._l(e.monthRange,(function(n){return"month"===e.detailLevel?s("td",{key:"month-"+n+"-"+t.id,class:{time:!0,month:!0,selected:e.isMonthSelected(t.id,e.year,n)}},[e.monthDuration(n,t.id)>0?s("router-link",{staticClass:"duration",attrs:{to:{name:"timesheets-month-person",params:{person_id:t.id,year:e.year,month:n}}}},[e._v(" "+e._s(e.monthDuration(n,t.id))+" ")]):s("span",[e._v(" - ")])],1):e._e()})),e._l(e.weekRange,(function(n){return"week"===e.detailLevel?s("td",{key:"week-"+n+"-"+t.id,class:{daytime:!0,selected:e.isWeekSelected(t.id,e.year,n)}},[e.weekDuration(n,t.id)>0?s("router-link",{class:{duration:!0,warning:e.weekDuration(n,t.id)>5*e.organisation.hours_by_day},attrs:{to:{name:"timesheets-week-person",params:{person_id:t.id,year:e.year,week:n}}}},[e._v(" "+e._s(e.weekDuration(n,t.id))+" ")]):s("span",[e._v(" - ")])],1):e._e()})),e._l(e.dayRange,(function(n){return"day"===e.detailLevel?s("td",{key:"day-"+n+"-"+t.id,staticClass:"daytime",class:{daytime:!0,weekend:e.isWeekend(e.year,e.month,n),selected:e.isDaySelected(t.id,e.year,e.month,n)}},[e.dayDuration(n,t.id)>0?s("router-link",{staticClass:"duration",attrs:{to:{name:"timesheets-day-person",params:{person_id:t.id,year:e.year,month:e.month,day:n}}}},[e._v(" "+e._s(e.dayDuration(n,t.id))+" ")]):s("span",[e._v(" - ")])],1):e._e()})),s("td",{staticClass:"actions"})],2)})),0)])]),e.isLoading?e._e():s("p",{staticClass:"has-text-centered footer-info"},[e._v(" "+e._s(e.people.length)+" "+e._s(e.$tc("people.persons",e.people.length))+" ")])],1)},Wo=[];function Go(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ko(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Go(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Qo={name:"people-timesheet-list",components:{PeopleNameCell:lo["a"],TableInfo:le["a"]},data:function(){return{currentMonth:A()().month()+1,currentYear:A()().year(),currentWeek:A()().week()}},props:{timesheet:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}},detailLevel:{type:String,default:"day"},year:{type:Number,default:0},month:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:Ko({},Object(l["c"])(["isCurrentUserManager","organisation","route"]),{yearRange:function(){return Object(Fa["j"])(2018,A()().year())},monthRange:function(){return Object(Fa["f"])(this.year,this.currentYear,this.currentMonth)},dayRange:function(){return Object(Fa["b"])(this.year,this.month,this.currentYear,this.currentMonth)},weekRange:function(){return Object(Fa["h"])(this.year,this.currentYear,this.currentWeek)}}),methods:Ko({},Object(l["b"])([]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px")},monthToString:Fa["i"],yearDuration:function(e,t){var s="".concat(e);return this.getDuration(s,t)},monthDuration:function(e,t){var s="".concat(e);return this.getDuration(s,t)},weekDuration:function(e,t){return this.getDuration(e,t)},dayDuration:function(e,t){return this.getDuration(e,t)},getDuration:function(e,t){return this.timesheet&&this.timesheet[e]&&this.timesheet[e][t]?this.timesheet[e][t]/60:"-"},isWeekend:function(e,t,s){var n=A()("".concat(e,"-").concat(t,"-").concat(s));return s<10&&(n=A()("".concat(e,"-").concat(t,"-0").concat(s))),[0,6].includes(n.day())},isDaySelected:function(e,t,s,n){return this.$route.params.person_id&&this.$route.params.person_id===e&&this.$route.params.year===t&&this.$route.params.month===s&&this.$route.params.day===n},isWeekSelected:function(e,t,s){return this.$route.params.person_id&&this.$route.params.person_id===e&&this.$route.params.year===t&&this.$route.params.week===s},isMonthSelected:function(e,t,s){return this.$route.params.person_id&&this.$route.params.person_id===e&&this.$route.params.year===t&&this.$route.params.month===s},isYearSelected:function(e,t){return this.$route.params.person_id&&this.$route.params.person_id===e&&this.$route.params.year===t},getWeekTitle:function(e){var t=A()(this.currentYear+"-"+e,"YYYY-W"),s=t.clone().add(6,"days");return t.format("YYYY-MM-DD")+" - "+s.format("YYYY-MM-DD")}}),watch:{detailLevel:function(){this.$refs.headerWrapper.style.left=0},route:function(){var e=document.getElementsByClassName("selected");0===e.length&&(this.$refs.body.scrollLeft+=350)}}},Jo=Qo,Xo=(s("f828"),Object(m["a"])(Jo,Yo,Wo,!1,null,"3f68f479",null)),Zo=Xo.exports,er=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"people-timesheet-info"},[s("div",{staticClass:"close"},[s("router-link",{staticClass:"close-button",attrs:{to:e.closeRoute}},[s("x-icon")],1)],1),s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.person,"no-cache":!0}}),s("page-title",{staticClass:"flexrow-item",attrs:{text:e.person.full_name}})],1),e.isMonthInfo?s("div",{staticClass:"info-date"},[e._v(" "+e._s(e.monthString)+" "+e._s(e.year)+" ")]):e.isWeekInfo?s("div",{staticClass:"info-date"},[e._v(" week "+e._s(e.week)+", "+e._s(e.startDay)+" - "+e._s(e.endDay)+" "+e._s(e.weekMonth)+" "+e._s(e.year)+" ")]):e.isDayInfo?s("div",{staticClass:"info-date"},[e._v(" "+e._s(e.day)+" "+e._s(e.monthString)+" "+e._s(e.year)+" ")]):e._e(),s("time-spent-task-list",{staticClass:"time-spent-list",attrs:{tasks:e.tasks,"is-loading":e.isLoading,"is-error":e.isLoadingError}})],1)},tr=[],sr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isLoadingError}}),s("div",{staticClass:"aggregated-time-spents"},e._l(Object.keys(e.projects),(function(t){return s("div",{key:t,staticClass:"by-project"},[e.projectNames[t]?s("production-name",{attrs:{project:{id:t,name:e.projectNames[t]}}}):e._e(),e._l(Object.keys(e.projects[t]),(function(n){return s("div",{key:n,staticClass:"by-task-type-id"},[s("task-type-name",{attrs:{"task-type":e.taskTypeMap[n]}}),s("div",{staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.projects[t][n],(function(t){return s("tr",{key:t.id,staticClass:"by-task-type-id"},[s("td",{staticClass:"name"},[e._v(e._s(t.name))]),s("td",{staticClass:"duration"},[e._v(e._s(t.duration/60))])])})),0)])])],1)}))],2)})),0)],1)},nr=[],ir=(s("13d5"),s("4736"));function ar(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function or(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ar(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var rr={name:"timespent-task-list",components:{TableInfo:le["a"],ProductionName:ir["a"],TaskTypeName:di["a"]},data:function(){return{projectNames:{}}},props:{tasks:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isLoadingError:{type:Boolean,default:!1}},computed:or({},Object(l["c"])(["currentProduction","lastProductionScreen","taskTypeMap"]),{projects:function(){var e={};return this.tasks.forEach((function(t){e[t.project_id]||(e[t.project_id]={}),e[t.project_id][t.task_type_id]||(e[t.project_id][t.task_type_id]=[]);var s=t.entity_name;["Shot","Sequence"].includes(t.entity_type_name)?(s="".concat(t.sequence_name," / ").concat(s),t.episode_name&&(s="".concat(t.episode_name," / ").concat(s))):s="".concat(t.entity_type_name," / ").concat(s),e[t.project_id][t.task_type_id].push({id:t.id,name:s,duration:t.duration})})),Object.keys(e).forEach((function(t){Object.keys(e[t]).forEach((function(s){e[t][s]=Object(Me["d"])(e[t][s])}))})),e}}),methods:or({},Object(l["b"])([]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px")}}),watch:{tasks:function(){this.projectNames=this.tasks.reduce((function(e,t){return e[t.project_id]=t.project_name,e}),{})}}},cr=rr,lr=(s("237b"),Object(m["a"])(cr,sr,nr,!1,null,"132b2366",null)),dr=lr.exports;function ur(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ur(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var hr={name:"people-timesheet-info",components:{XIcon:U["N"],PageTitle:ye["a"],PeopleAvatar:ue["a"],TimeSpentTaskList:dr},props:{person:{type:Object,default:function(){}},year:{type:Number,default:0},month:{type:Number,default:0},week:{type:Number,default:0},day:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isLoadingError:{type:Boolean,default:!1},tasks:{type:Array,default:function(){return[]}}},computed:pr({},Object(l["c"])([]),{startDay:function(){return A()().day("Monday").year(this.year).week(this.week).date()},endDay:function(){return A()().day("Monday").year(this.year).week(this.week).add("days",6).date()},weekMonth:function(){return A()().day("Monday").year(this.year).week(this.week).format("MMM")},monthString:function(){return Object(Fa["i"])(this.month)},isMonthInfo:function(){return this.$route.path.indexOf("month")>0},isWeekInfo:function(){return this.$route.path.indexOf("week")>0},isDayInfo:function(){return this.$route.path.indexOf("day")>0},closeRoute:function(){return this.isMonthInfo?{name:"timesheets-month",params:{year:this.year}}:this.isWeekInfo?{name:"timesheets-week",params:{year:this.year}}:this.isDayInfo?{name:"timesheets-day",params:{year:this.year,month:this.month}}:{name:"timesheets"}}}),methods:pr({},Object(l["b"])([]),{onCloseClicked:function(){this.$emit("close")}})},fr=hr,mr=(s("aaf8"),Object(m["a"])(fr,er,tr,!1,null,"1827c700",null)),br=mr.exports;function _r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var yr={name:"people",components:{ButtonSimple:H["a"],Combobox:Z["a"],PageTitle:ye["a"],PeopleTimesheetList:Zo,PeopleTimesheetInfo:br},data:function(){return{detailOptions:[{label:"Day",value:"day"},{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Year",value:"year"}],detailLevelString:"day",detailLevel:"day",yearString:"".concat(A()().year()),monthString:"".concat(A()().month()+1),currentYear:A()().year(),currentMonth:A()().month()+1,currentWeek:A()().week(),currentDay:A()().date(),currentPerson:this.getCurrentPerson(),isLoading:!1,isLoadingError:!1,showInfo:!0,isInfoLoading:!1,isInfoLoadingError:!1,tasks:[]}},created:function(){var e=this;this.isLoading=!0,0===this.people.length?this.loadPeople((function(){e.loadRoute()})):this.loadRoute()},computed:vr({},Object(l["c"])(["isCurrentUserManager","people","personMap","timesheet"]),{filteredPeople:function(){var e=this;return this.people.filter((function(t){var s=Object.keys(e.timesheet),n=!1,i=0;do{e.timesheet[s[i]]&&(n=void 0!==e.timesheet[s[i]][t.id]),i++}while(!n&&i<s.length);return t.active&&n}))},yearOptions:function(){var e=2018,t=A()().year();return Object(Fa["j"])(e,t).map((function(e){return{label:e,value:"".concat(e)}}))},monthOptions:function(){var e="".concat(A()().year()),t=1,s=A()().month()+1,n=Object(Fa["j"])(t,12);return e===this.yearString&&(n=Object(Fa["j"])(t,s)),n.map((function(e){return{label:Object(Fa["i"])(e),value:"".concat(e)}}))}}),methods:vr({},Object(l["b"])(["loadPeople","loadAggregatedPersonTimeSpents","loadTimesheets"]),{reloadTimesheet:function(){var e=this;this.isLoading=!0,this.loadTimesheets({detailLevel:this.detailLevel,year:this.currentYear,month:this.currentMonth}).then((function(t){e.isLoading=!1})).catch((function(){e.isLoading=!1,e.isLoadingError=!0}))},showSideInfo:function(){this.showInfo=!0},hideSideInfo:function(){this.showInfo=!1},loadRoute:function(){var e=this.$route.params,t=e.month,s=e.year,n=e.week,i=e.day,a="".concat(this.detailLevel),o="".concat(this.currentMonth),r="".concat(this.currentYear);this.$route.path.indexOf("week")>0&&(this.detailLevel="week"),this.$route.path.indexOf("month")>0&&(this.detailLevel="month"),this.$route.path.indexOf("day")>0&&(this.detailLevel="day"),this.$route.path.indexOf("year")>0&&(this.detailLevel="year"),this.currentPerson=this.getCurrentPerson(),this.detailLevelString=this.detailLevel,t&&(this.currentMonth=Number(t),this.monthString="".concat(t)),s&&(this.currentYear=Number(s),this.yearString="".concat(s)),n&&(this.currentWeek=Number(n),this.weekString="".concat(n)),i&&(this.currentDay=Number(i));var c=a!==this.detailLevel,l=0!==o.localeCompare("".concat(this.currentMonth)),d=0!==r.localeCompare("".concat(this.currentYear));this.$route.path.indexOf("person")>0?(this.showSideInfo(),this.loadAggregate(),this.isLoading&&this.reloadTimesheet()):(this.hideSideInfo(),(this.isLoading||l||d||c)&&this.reloadTimesheet())},loadAggregate:function(){var e=this;this.isInfoLoading=!0,this.isInfoLoadingError=!1,this.tasks=[],this.loadAggregatedPersonTimeSpents({personId:this.$route.params.person_id,detailLevel:this.detailLevel,year:this.$route.params.year,month:this.$route.params.month,week:this.$route.params.week,day:this.$route.params.day}).then((function(t){e.isInfoLoading=!1,e.tasks=t.filter((function(e){return e.duration>0}))})).catch((function(t){console.error(t),e.isInfoLoadingError=!0}))},getCurrentPerson:function(){var e=this.$route.params.person_id;return e&&this.personMap?this.personMap[e]:{}},exportTimesheet:function(){var e=["timesheet",this.detailLevel,this.currentYear];"day"===this.detailLevel&&e.push(this.currentMonth);var t=Object(Le["b"])(e.join("_"));De["a"].generateTimesheet(t,this.timesheet,this.filteredPeople,this.detailLevel,this.currentYear,this.currentMonth,A()().month()+1,A()().year(),A()().week())}}),watch:{detailLevelString:function(){this.detailLevel!==this.detailLevelString&&("month"===this.detailLevelString?this.$router.push({name:"timesheets-month",params:{year:this.currentYear}}):"week"===this.detailLevelString?this.$router.push({name:"timesheets-week",params:{year:this.currentYear}}):"day"===this.detailLevelString?this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:this.currentMonth}}):"year"===this.detailLevelString&&this.$router.push({name:"timesheets-year",params:{year:this.currentYear}}))},yearString:function(){var e=Number(this.yearString),t=A()().month();this.currentYear!==e&&("month"===this.detailLevel?this.$router.push({name:"timesheets-month",params:{year:e}}):"week"===this.detailLevel?this.$router.push({name:"timesheets-week",params:{year:e}}):this.$router.push({name:"timesheets-day",params:{year:e,month:Math.min(Number(this.monthString),t)}}))},monthString:function(){this.currentMonth!==Number(this.monthString)&&this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:Number(this.monthString)}})},$route:function(){this.loadRoute()}},metaInfo:function(){return{title:"".concat(this.$t("timesheets.title")," - Kitsu")}}},gr=yr,kr=(s("5fc2"),Object(m["a"])(gr,Uo,Ho,!1,null,"8484be90",null)),wr=kr.exports,Sr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"flexrow project-dates"},[s("div",{staticClass:"flexrow-item"},[s("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("main.start_date"))+" ")]),s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":{days:[6,0]},"monday-first":!0,format:"d MMMM yyyy"},model:{value:e.selectedStartDate,callback:function(t){e.selectedStartDate=t},expression:"selectedStartDate"}})],1),s("div",{staticClass:"flexrow-item field"},[s("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("main.end_date"))+" ")]),s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":{days:[6,0]},"monday-first":!0,format:"d MMMM yyyy"},model:{value:e.selectedEndDate,callback:function(t){e.selectedEndDate=t},expression:"selectedEndDate"}})],1),s("combobox-number",{staticClass:"flexrow-item zoom-level",attrs:{label:e.$t("schedule.zoom_level"),options:e.zoomOptions},model:{value:e.zoomLevel,callback:function(t){e.zoomLevel=t},expression:"zoomLevel"}})],1),s("schedule",{attrs:{"start-date":e.startDate,"end-date":e.endDate,hierarchy:e.scheduleItems,"zoom-level":e.zoomLevel,"is-loading":e.loading.schedule,"is-error":e.errors.schedule},on:{"item-changed":e.onScheduleItemChanged,"change-zoom":e.changeZoom,"root-element-expanded":e.expandProductionElement}})],1)])},Or=[],Cr=s("2430"),Tr=s("fa33"),Pr=s("9d8b");function Er(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Er(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var xr={name:"production-schedule",components:{ComboboxNumber:Eo["a"],Datepicker:Tr["a"],Schedule:jo["a"]},data:function(){return{endDate:A()().add(6,"months"),scheduleItems:[],startDate:A()(),selectedStartDate:null,selectedEndDate:null,zoomLevel:2,zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],loading:{schedule:!1},errors:{schedule:!1}}},mounted:function(){this.reset()},computed:jr({},Object(l["c"])(["openProductions","taskTypeMap","user"]),{locale:function(){return"fr_FR"===this.user.locale?Cr["fr"]:Cr["en"]}}),methods:jr({},Object(l["b"])(["editProduction","loadScheduleItems","saveScheduleItem"]),{changeZoom:function(e){e.wheelDelta<0&&this.zoomLevel>1&&this.zoomLevel--,e.wheelDelta>0&&this.zoomLevel<3&&this.zoomLevel++},reset:function(){this.scheduleItems=this.convertScheduleItems(this.openProductions),this.startDate=Object(Fa["d"])(this.scheduleItems),this.endDate=Object(Fa["e"])(this.scheduleItems),this.selectedStartDate=this.startDate.toDate(),this.selectedEndDate=this.endDate.toDate()},convertScheduleItems:function(e){return e.map((function(e){var t=Object(Fa["g"])(e.start_date),s=Object(Fa["c"])(t,e.end_date);return jr({},e,{avatar:"Project"===e.type,color:e.color||yi["a"].fromString(e.name,!0),startDate:t,endDate:s,expanded:!1,loading:!1,editable:!0,route:Object(Pr["c"])(e.id),children:[]})}))},convertTaskTypeScheduleItems:function(e){var t=this;return e.map((function(e){var s=Object(Fa["g"])(e.start_date),n=Object(Fa["c"])(s,e.end_date),i=t.taskTypeMap[e.task_type_id];return jr({},e,{name:i.name,color:i.color,startDate:s,endDate:n,expanded:!1,loading:!1,editable:!0,children:[]})}))},expandProductionElement:function(e){var t=this;e.expanded?e.expanded=!1:(e.loading=!0,e.expanded=!0,this.loadScheduleItems(e).then((function(s){s=t.convertTaskTypeScheduleItems(s),e.children=s,e.loading=!1})))},onScheduleItemChanged:function(e){"Project"!==e.type?this.saveScheduleItem(e):this.editProduction({data:{id:e.id,start_date:e.startDate.format("YYYY-MM-DD"),end_date:e.endDate.format("YYYY-MM-DD")}})}}),socket:{},watch:{},metaInfo:function(){return{title:"".concat(this.$t("schedule.title_main")," - Kitsu")}}},Dr=xr,Ar=(s("6345"),Object(m["a"])(Dr,Sr,Or,!1,null,"d4427b36",null)),Mr=Ar.exports,Lr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"todos page"},[s("div",{staticClass:"task-tabs tabs"},[s("ul",[s("li",{class:{"is-active":e.isTabActive("todos")}},[s("router-link",{attrs:{to:{name:"todos"}}},[e._v(" "+e._s(e.$t("tasks.current"))+" ")])],1),s("li",{class:{"is-active":e.isTabActive("done")},on:{click:function(t){return e.selectTab("done")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"done"}}}},[e._v(" "+e._s(e.$t("tasks.done"))+" ("+e._s(e.displayedDoneTasks.length)+") ")])],1),s("li",{class:{"is-active":e.isTabActive("timesheets")},on:{click:function(t){return e.selectTab("timesheets")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"timesheets"}}}},[e._v(" "+e._s(e.$t("timesheets.title"))+" ")])],1)])]),s("div",{staticClass:"flexrow"},[e.isTabActive("done")?e._e():s("search-field",{ref:"todos-search-field",class:{"search-field":!0,"flexrow-item":!0},attrs:{"can-save":!0},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("span",{staticClass:"flexrow-item push-right"}),s("span",{staticClass:"flexrow-item"}),s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("main.sorted_by"),options:e.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:e.currentSort,callback:function(t){e.currentSort=t},expression:"currentSort"}})],1),e.isTabActive("todos")||e.isTabActive("timesheets")?s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:e.todoSearchQueries},on:{changesearch:e.changeSearch,removesearch:e.removeSearchQuery}})],1):e._e(),e.isTabActive("todos")?s("todos-list",{ref:"todo-list",attrs:{tasks:e.sortedTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,"selection-grid":e.todoSelectionGrid},on:{scroll:e.setTodoListScrollPosition}}):e._e(),e.isTabActive("done")?s("div"):e._e(),e.isTabActive("done")?s("todos-list",{ref:"done-list",attrs:{tasks:e.displayedDoneTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,done:!0}}):e._e(),e.isTabActive("timesheets")?s("timesheet-list",{ref:"timesheet-list",attrs:{tasks:e.loggableTodos,"done-tasks":e.loggableDoneTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,"time-spent-map":e.timeSpentMap,"time-spent-total":e.timeSpentTotal,"hide-done":e.todosSearchText.length>0||0===e.loggableDoneTasks.length},on:{"date-changed":e.onDateChanged,"time-spent-change":e.onTimeSpentChange}}):e._e()],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e()])},Ir=[],$r=s("b11e"),qr=s("e739");function Fr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Nr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(s),!0).forEach((function(t){Object(c["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Rr={name:"todos",components:{Combobox:Z["a"],SearchField:Gt["a"],SearchQueryList:Kt["a"],TaskInfo:vs["a"],TimesheetList:$r["a"],TodosList:qr["a"]},data:function(){return{activeTab:"todos",currentSort:"priority",selectedDate:A()().format("YYYY-MM-DD"),sortOptions:["entity_name","priority","task_status_short_name","estimation","last_comment_date"].map((function(e){return{label:e,value:e}}))}},mounted:function(){var e=this;this.updateActiveTab(),this.todosSearchText.length>0&&this.$refs["todos-search-field"].setValue(this.todosSearchText),this.loadTodos({date:this.selectedDate,callback:function(){e.todoList&&e.$nextTick((function(){e.todoList.setScrollPosition(e.todoListScrollPosition)})),e.resizeHeaders()}})},afterDestroy:function(){this.$store.commit("USER_LOAD_TODOS_END",{tasks:[],userFilters:{},taskTypeMap:this.taskTypeMap})},computed:Nr({},Object(l["c"])(["displayedDoneTasks","displayedTodos","isTodosLoading","isTodosLoadingError","nbSelectedTasks","selectedTasks","taskTypeMap","todosSearchText","timeSpentMap","timeSpentTotal","todoListScrollPosition","todoSelectionGrid","todoSearchQueries","user"]),{loggableTodos:function(){var e=this;return this.displayedTodos.filter((function(t){return e.taskTypeMap[t.task_type_id].allow_timelog}))},loggableDoneTasks:function(){var e=this;return this.displayedDoneTasks.filter((function(t){return e.taskTypeMap[t.task_type_id].allow_timelog}))},todoList:function(){return this.$refs["todo-list"]},haveDoneList:function(){return this.$refs["done-list"]},sortedTasks:function(){var e="entity_name"===this.currentSort,t=Object(K["a"])(this.displayedTodos);return e?t.sort(To()("project_name").thenBy("task_type_name").thenBy("full_entity_name")):t.sort(To()(this.currentSort,-1).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name"))}}),methods:Nr({},Object(l["b"])(["loadTodos","loadOpenProductions","removeTodoSearch","saveTodoSearch","setTodoListScrollPosition","setTodosSearch","setTimeSpent"]),{isTabActive:function(e){return this.activeTab===e},resizeHeaders:function(){var e=this;this.$nextTick((function(){e.todoList&&e.todoList.resizeHeaders(),e.haveDoneList&&e.haveDoneList.resizeHeaders()}))},selectTab:function(e){var t=this;this.activeTab=e,this.resizeHeaders(),setTimeout((function(){t.$refs["todos-search-field"]&&t.$refs["todos-search-field"].focus()}),300)},updateActiveTab:function(){["done","timesheets"].includes(this.$route.params.tab)?this.activeTab=this.$route.params.tab:this.activeTab="todos"},onSearchChange:function(e){this.setTodosSearch(e)},changeSearch:function(e){this.$refs["todos-search-field"].setValue(e.search_query),this.$refs["todos-search-field"].$emit("change",e.search_query)},saveSearchQuery:function(e){this.saveTodoSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},removeSearchQuery:function(e){this.removeTodoSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},onDateChanged:function(e){this.selectedDate=A()(e).format("YYYY-MM-DD"),this.loadTodos({date:this.selectedDate,forced:!0})},onTimeSpentChange:function(e){e.personId=this.user.id,e.date=this.selectedDate,this.setTimeSpent(e)},onAssignation:function(e){var t=this;this.user.id===e.person_id&&this.loadOpenProductions((function(){t.loadTodos({forced:!0,date:t.selectedDate,callback:function(){t.todoList&&t.$nextTick((function(){t.todoList.setScrollPosition(t.todoListScrollPosition)})),t.resizeHeaders()}})}))}}),socket:{events:{"task:assign":function(e){this.onAssignation(e)},"task:unassign":function(e){this.onAssignation(e)}}},watch:{$route:function(){this.updateActiveTab()}},metaInfo:function(){return{title:"".concat(this.$t("tasks.my_tasks")," - Kitsu")}}},Br=Rr,zr=(s("2dba"),Object(m["a"])(Br,Lr,Ir,!1,null,"5931ab6e",null)),Vr=zr.exports,Ur=function(){return s.e("chunk-6dff9cd1").then(s.bind(null,"319f"))},Hr=function(){return s.e("chunk-02a0b3c6").then(s.bind(null,"fd5f"))},Yr=function(){return s.e("chunk-0136372e").then(s.bind(null,"38fe"))},Wr=function(){return s.e("chunk-125f0106").then(s.bind(null,"a591"))},Gr=function(){return s.e("chunk-2d22d490").then(s.bind(null,"f79b"))},Kr=function(){return s.e("chunk-5f7eea03").then(s.bind(null,"a01b"))},Qr=function(){return s.e("chunk-645ce67c").then(s.bind(null,"6893"))},Jr=function(){return s.e("chunk-3b856e00").then(s.bind(null,"d1e3"))},Xr=function(){return s.e("chunk-fb3214cc").then(s.bind(null,"4e82"))},Zr=function(){return s.e("chunk-4fd17b4a").then(s.bind(null,"d46a"))},ec=function(){return s.e("chunk-404605b6").then(s.bind(null,"9633"))},tc=function(){return s.e("chunk-089a0c74").then(s.bind(null,"cd92"))},sc=function(){return s.e("chunk-26594d4e").then(s.bind(null,"421c"))},nc=function(){return s.e("chunk-2d21082e").then(s.bind(null,"b7cf"))},ic=function(){return s.e("chunk-2d0dacb1").then(s.bind(null,"6cb0"))},ac=function(){return s.e("chunk-2d0cfa35").then(s.bind(null,"6522"))},oc=function(){return s.e("chunk-72fdfea6").then(s.bind(null,"2e31"))},rc=function(){return s.e("chunk-3b93794f").then(s.bind(null,"99a3"))},cc=function(){return s.e("chunk-5283bd24").then(s.bind(null,"9f1e"))},lc=function(){return s.e("chunk-0bb4cafd").then(s.bind(null,"56b8"))},dc=function(){return s.e("chunk-2d0c7360").then(s.bind(null,"503b"))},uc=[{path:"",component:ii,beforeEnter:function(e,t,s){var n=j.a.getParser(window.navigator.userAgent),i=n.satisfies({chrome:">20.1.1432",firefox:">31",vivaldi:">2.8"});if(!i)return s({name:"wrong-browser"});x["a"].requireAuth(e,t,(function(e){e?s(e):($.setTimezone(),I.setLocale(),0===M["a"].state.productions.openProductions.length?N((function(e){e?s({name:"server-down"}):R["a"].getters.isCurrentUserCGArtist(R["a"].state)?s({name:"todos"}):s({name:"open-productions"})})):R["a"].getters.isCurrentUserCGArtist(R["a"].state)?(M["a"].commit("DATA_LOADING_END"),s({name:"todos"})):(M["a"].commit("DATA_LOADING_END"),s({name:"open-productions"})))}))}},{path:"/",component:ii,beforeEnter:function(e,t,s){x["a"].requireAuth(e,t,(function(e){e?s(e):($.setTimezone(),I.setLocale(),0===B["a"].state.taskTypes.length?N((function(){M["a"].commit("DATA_LOADING_END"),s()})):(M["a"].commit("DATA_LOADING_END"),s()))}))},children:[{path:"",name:"home"},{path:"asset-types",component:Ur,children:[{path:"new",component:Ur},{name:"edit-asset-type",path:"edit/:asset_type_id",component:Ur},{name:"delete-asset-type",path:"delete/:asset_type_id",component:Ur}]},{name:"custom-actions",path:"custom-actions",component:Yr,children:[{name:"custom-actions-new",path:"new",component:Yr},{name:"edit-custom-action",path:"edit/:custom_action_id",component:Yr},{name:"delete-custom-action",path:"delete/:custom_action_id",component:Yr}]},{name:"notifications",path:"notifications",component:bi},{path:"open-productions",component:Ti,name:"open-productions"},{path:"people",component:Qr,name:"people",children:[{path:"new",component:Qr,name:"new-people"},{path:"edit/:person_id",component:Qr,name:"edit-person"},{name:"delete-person",path:"delete/:person_id",component:Qr}]},{path:"people/:person_id",component:Kr,name:"person",children:[{path:":tab",component:Kr,name:"person-tab"}]},{path:"/main-schedule",component:Mr,name:"main-schedule"},{path:"/timesheets",component:wr,name:"timesheets",children:[{path:"year/:year",component:wr,name:"timesheets-year"},{path:"year/:year/persons/:person_id",component:wr,name:"timesheets-year-person"},{path:"month/:year",component:wr,name:"timesheets-month"},{path:"month/:year/:month/persons/:person_id",component:wr,name:"timesheets-month-person"},{path:"week/:year",component:wr,name:"timesheets-week"},{path:"week/:year/:week/persons/:person_id",component:wr,name:"timesheets-week-person"},{path:"day/:year/:month",component:wr,name:"timesheets-day"},{path:"day/:year/:month/:day/persons/:person_id",component:wr,name:"timesheets-day-person"}]},{path:"profile",component:sc,name:"profile",children:[{path:"change-avatar",component:sc,name:"change-avatar"}]},{path:"settings",component:oc,name:"settings"},{name:"task-types",path:"task-types",component:lc,children:[{path:"new",component:lc},{name:"edit-task-type",path:"edit/:task_type_id",component:lc},{name:"delete-task-type",path:"delete/:task_type_id",component:lc}]},{name:"task-status",path:"task-status",component:cc,children:[{name:"new-task-status",path:"new",component:cc},{name:"edit-task-status",path:"edit/:task_status_id",component:cc},{name:"delete-task-status",path:"delete/:task_status_id",component:cc}]},{path:"todos",component:Vr,name:"todos",children:[{path:":tab",component:Vr,name:"todos-tab"}]},{path:"productions",component:Xr,name:"productions",children:[{path:"new",component:Xr,name:"productions-new"},{path:"edit/:production_edit_id",component:Xr,name:"edit-production"},{path:"delete/:production_delete_id",component:Xr,name:"delete-production"}]},{path:"productions/:production_id/team",component:wo,name:"team"},{path:"productions/:production_id/news-feed",component:qi,name:"news-feed"},{path:"productions/:production_id/schedule",component:ec,name:"schedule"},{path:"productions/:production_id/quota",component:tc,name:"quota",children:[{path:"month/:year",component:tc,name:"quota-month"},{path:"month/:year/:month/persons/:person_id",component:tc,name:"quota-month-person"},{path:"week/:year",component:tc,name:"quota-week"},{path:"week/:year/:week/persons/:person_id",component:tc,name:"quota-week-person"},{path:"day/:year/:month",component:tc,name:"quota-day"},{path:"day/:year/:month/:day/persons/:person_id",component:tc,name:"quota-day-person"}]},{path:"productions/:production_id/episodes/:episode_id/quota",component:tc,name:"episode-quota",children:[{path:"month/:year",component:tc,name:"episode-quota-month"},{path:"month/:year/:month/persons/:person_id",component:tc,name:"episode-quota-month-person"},{path:"week/:year",component:tc,name:"episode-quota-week"},{path:"week/:year/:week/persons/:person_id",component:tc,name:"episode-quota-week-person"},{path:"day/:year/:month",component:tc,name:"episode-quota-day"},{path:"day/:year/:month/:day/persons/:person_id",component:tc,name:"episode-quota-day-person"}]},{path:"productions/:production_id/playlists",component:Jr,name:"playlists",children:[{name:"playlist",path:":playlist_id",component:Jr},{name:"delete-playlist",path:":playlist_id/delete",component:Jr},{name:"edit-playlist",path:":playlist_id/edit",component:Jr}]},{path:"productions/:production_id/breakdown",component:Hr,name:"breakdown",children:[{path:"sequences/:sequence_id",component:Hr,name:"breakdown-sequence"},{path:"asset-types/:asset_type_id",component:Hr,name:"breakdown-asset-type"}]},{path:"productions/:production_id/assets",component:Os,name:"assets",children:[{path:"new",component:Os,name:"new-asset"},{path:"edit/:asset_id",component:Os,name:"edit-asset"},{path:"delete/:asset_id",component:Os,name:"delete-asset"},{path:"restore/:asset_id",component:Os,name:"restore-asset"},{path:"delete-all-tasks/:task_type_id",component:Os,name:"delete-all-asset-tasks"}]},{path:"productions/:production_id/assets/:asset_id",component:Te,name:"asset"},{path:"productions/:production_id/shots",component:io,name:"shots",children:[{path:"delete-all-tasks/:task_type_id",component:io,name:"delete-all-shot-tasks"},{path:"edit/:shot_id",component:io,name:"edit-shot"},{path:"delete/:shot_id",component:io,name:"delete-shot"},{path:"restore/:shot_id",component:io,name:"restore-shot"}]},{path:"productions/:production_id/shots/:shot_id",component:Ca,name:"shot"},{path:"productions/:production_id/sequences",component:la,name:"sequences",children:[{path:"edit/:sequence_id",component:la,name:"edit-sequence"},{path:"delete/:sequence_id",component:la,name:"delete-sequence"}]},{path:"productions/:production_id/asset-types",component:Zr,name:"production-asset-types"},{path:"productions/:production_id/:type/task-types/:task_type_id",component:Vo,name:"task-type",children:[{name:"task-type-schedule",path:"schedule",component:Vo}]},{name:"task",path:"productions/:production_id/:type/tasks/:task_id",component:rc,children:[{name:"task-delete",path:"delete",component:rc},{name:"task-change-preview",path:"comments/:comment_id/change-preview",component:rc},{name:"task-preview",path:"previews/:preview_id",component:rc},{name:"task-edit-comment",path:"comments/:comment_id/edit",component:rc},{name:"task-delete-comment",path:"comments/:comment_id/delete",component:rc}]},{path:"productions/:production_id/episodes",component:Wr,name:"episodes",children:[{path:"edit/:episode_id",component:Wr,name:"edit-episode"},{path:"delete/:episode_id",component:Wr,name:"delete-episode"}]},{path:"productions/:production_id/episodes/:episode_id/schedule",component:ec,name:"episode-schedule"},{path:"productions/:production_id/episodes/:episode_id/playlists",component:Jr,name:"episode-playlists",children:[{name:"episode-playlist",path:":playlist_id",component:Jr},{name:"episode-delete-playlist",path:":playlist_id/delete",component:Jr},{name:"episode-edit-playlist",path:":playlist_id/edit",component:Jr}]},{path:"productions/:production_id/episodes/:episode_id/breakdown",component:Hr,name:"episode-breakdown",children:[{path:"sequences/:sequence_id",component:Hr,name:"episode-breakdown-sequence"},{path:"asset-types/:asset_type_id",component:Hr,name:"episode-breakdown-asset-type"}]},{path:"productions/:production_id/episodes/:episode_id/assets",component:Os,name:"episode-assets",children:[{path:"new",component:Os,name:"episode-new-asset"},{path:"edit/:asset_id",component:Os,name:"episode-edit-asset"},{path:"delete/:asset_id",component:Os,name:"episode-delete-asset"},{path:"restore/:asset_id",component:Os,name:"episode-restore-asset"},{path:"delete-all-tasks/:task_type_id",component:Os,name:"episode-delete-all-asset-tasks"}]},{path:"productions/:production_id/episodes/:episode_id/assets/:asset_id",component:Te,name:"episode-asset"},{path:"productions/:production_id/episodes/:episode_id/shots",component:io,name:"episode-shots",children:[{path:"shots/manage",component:io,name:"episode-manage-shots"},{path:"delete-all-tasks/:task_type_id",component:io,name:"episode-delete-all-shot-tasks"},{path:"edit/:shot_id",component:io,name:"episode-edit-shot"},{path:"delete/:shot_id",component:io,name:"episode-delete-shot"},{path:"shots/restore/:shot_id",component:io,name:"episode-restore-shot"}]},{path:"productions/:production_id/episodes/:episode_id/shots/:shot_id",component:Ca,name:"episode-shot"},{path:"productions/:production_id/episodes/:episode_id/asset-types",component:Zr,name:"episode-production-asset-types"},{path:"productions/:production_id/episodes/:episode_id/sequences",component:la,name:"episode-sequences",children:[{path:"edit/:sequence_id",component:la,name:"episode-edit-sequence"},{path:"delete/:sequence_id",component:la,name:"episode-delete-sequence"}]},{path:"productions/:production_id/episodes/:episode_id/:type/task-types/:task_type_id",component:Vo,name:"episode-task-type",children:[{path:"schedule",component:Vo,name:"episode-task-type-schedule"}]},{path:"productions/:production_id/episodes/:episode_id/:type/tasks/:task_id",name:"episode-task",component:rc,children:[{name:"episode-task-delete",path:"delete",component:rc},{name:"episode-task-change-preview",path:"comments/:comment_id/change-preview",component:rc},{name:"episode-task-preview",path:"previews/:preview_id",component:rc},{name:"episode-task-edit-comment",path:"comments/:comment_id/edit",component:rc},{name:"episode-task-delete-comment",path:"comments/:comment_id/delete",component:rc}]}]},{path:"/login",component:As,name:"login"},{path:"/reset-password",component:nc,name:"reset-password"},{path:"/reset-change-password/:token",component:ic,name:"reset-change-password"},{path:"/server-down",component:ac,name:"server-down"},{path:"/wrong-browser",component:dc,name:"wrong-browser"},{path:"/*",component:Gr,name:"not-found"}];i.a.use(P["a"]);var pc=function(e,t,s){return s||{x:0,y:0}},hc=new P["a"]({mode:"history",scrollBehavior:pc,routes:uc}),fc=s("d051"),mc=s.n(fc),bc=s("30ef"),_c=s.n(bc),vc=s("58ca"),yc=s("d842"),gc=s("00e7"),kc=s.n(gc),wc=s("df76"),Sc=s.n(wc),Oc=s("caf9"),Cc=s("b9dd"),Tc=s("3f9d"),Pc=s("6c34"),Ec=s.n(Pc),jc=s("e37d");s("a507");i.a.config.productionTip=!1,i.a.use(mc.a),i.a.use(vc["a"]),i.a.use(jc["a"]),i.a.use(yc["a"],{adapter:_c.a}),i.a.use(kc.a),i.a.use(Oc["a"]),i.a.use(Cc["a"]),i.a.use(Sc.a),i.a.use(Tc["a"]),i.a.use(Ec.a,"/events"),Object(a["sync"])(M["a"],hc),i.a.directive("focus",{inserted:function(e){e.focus()}}),i.a.prototype.$locale={change:function(e){T.locale=e},current:function(){return T.locale}},new i.a({el:"#app",components:{App:_},template:"<App/>",i18n:T,router:hc,store:M["a"]}),i.a.config.keyCodes.backspace=8},"58f5":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"name"},[s("task-type-name",{attrs:{"task-type":e.entry,"production-id":e.productionId}})],1)},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("274f");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"task-type-cell",components:{TaskTypeName:r["a"]},props:["entry","productionId"],computed:l({},Object(o["c"])([]),{color:function(){return"#000000"===this.entry.color.toUpperCase()?"$grey-strong":this.entry.color}}),methods:l({},Object(o["b"])([]))},u=d,p=(s("4267"),s("2877")),h=Object(p["a"])(u,n,i,!1,null,"6f7d3066",null);t["a"]=h.exports},5991:function(e,t,s){},"59b8":function(e,t,s){"use strict";var n=s("0a4d"),i=s.n(n);i.a},"5b1a":function(e,t,s){},"5b23":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.commentToEdit&&e.commentToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("comments.edit_title"))+" ")]):e._e(),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("div",{staticClass:"field"},[s("at-ta",{attrs:{members:e.team,"name-key":"full_name",limit:"2"},scopedSlots:e._u([{key:"item",fn:function(t){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.item,size:20,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.item.full_name)+" ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.text,expression:"form.text"},{name:"focus",rawName:"v-focus"}],ref:"textField",staticClass:"input",domProps:{value:e.form.text},on:{keyup:function(t){return t.ctrlKey?e.runConfirmation(t):null},input:function(t){t.target.composing||e.$set(e.form,"text",t.target.value)}}})])],1)]),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.runConfirmation}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("assets.edit_fail"))+" ")]):e._e()])])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("53ff"),r=s.n(o),c=s("eb8c");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"edit-comment-modal",components:{AtTa:r.a,PeopleAvatar:c["a"]},props:["active","cancelRoute","isLoading","isError","commentToEdit","team"],watch:{commentToEdit:function(){this.commentToEdit&&this.commentToEdit.id?this.form.text=this.commentToEdit.text:this.form={text:""}},active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.textField.focus()}),100)}},data:function(){return this.commentToEdit&&this.commentToEdit.id?{form:{text:this.commentToEdit.text}}:{form:{text:""}}},methods:{runConfirmation:function(e){13!==e.keyCode&&e.keyCode||this.$emit("confirm",d({id:this.commentToEdit.id},this.form))}}},p=u,h=(s("f52f"),s("2877")),f=Object(h["a"])(p,n,i,!1,null,"621d2267",null);t["a"]=f.exports},"5bf3":function(e,t,s){"use strict";var n=s("82ea"),i=s.n(n);i.a},"5c0b":function(e,t,s){"use strict";var n=s("9c0c"),i=s.n(n);i.a},"5c3d":function(e,t,s){e.exports=s.p+"img/spinner.c09255da.svg"},"5ed2":function(e,t,s){},"5f48":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[e._v(e._s(e.text))]),e.isError?s("p",{staticClass:"is-danger"},[e._v(e._s(e.errorText))]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":e.isLoading},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),e.cancelRoute?s("router-link",{staticClass:"button is-text",attrs:{to:e.cancelRoute}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")]):s("button",{staticClass:"button is-text",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])],1)])])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"delete-modal",props:["text","active","cancelRoute","isLoading","isError","errorText"],computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]))},d=l,u=(s("826f"),s("2877")),p=Object(u["a"])(d,n,i,!1,null,"37caaffe",null);t["a"]=p.exports},"5fc2":function(e,t,s){"use strict";var n=s("557f"),i=s.n(n);i.a},"606f":function(e,t,s){"use strict";var n=s("4b0a"),i=s.n(n);i.a},"609d":function(e,t,s){},6185:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"c",(function(){return c}));s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b");var n=s("ade3");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var o=function(e,t){for(var s={},n=0;n<e;n++){s[n]||(s[n]={});for(var i=0;i<t;i++)s[n][i]=!1}return s},r=function(e,t,s,n){for(var i=a({},e),o=t;o<s;o++){i[o]||(i[o]={});for(var r=0;r<n;r++)i[o][r]=!1}return i},c=function(e){for(var t=Object.keys(e).length,s=e[0]?Object.keys(e[0]).length:0,n=0;n<t;n++)for(var i=0;i<s;i++)e[n][i]&&(e[n][i]=!1);return e}},"620e":function(e,t,s){"use strict";var n=s("cc90"),i=s.n(n);i.a},6345:function(e,t,s){"use strict";var n=s("2fe8"),i=s.n(n);i.a},"64b6":function(e,t,s){},6571:function(e,t,s){"use strict";var n=s("609d"),i=s.n(n);i.a},"66a5":function(e,t,s){e.exports=s.p+"img/empty_asset.bf75a153.png"},"66be":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return o}));s("99af"),s("4160"),s("ac1f"),s("5319"),s("159b");var n=s("e0c1"),i=s.n(n),a=function(e){var t="transparent";return e&&(t=e.task_type_color),{"border-left":"4px solid ".concat(t)}},o=function(e,t,s){var n=i()(e||"");return t&&t.forEach((function(e){var t=s[e];n=n.replace("@".concat(t.full_name),'<a class="mention" href="/people/'.concat(t.id,'">@').concat(t.full_name,"</a>"))})),n}},"66d4":function(e,t,s){"use strict";var n=s("e044"),i=s.n(n);i.a},"66e7":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"f",(function(){return i})),s.d(t,"e",(function(){return a})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return c}));s("a4d3"),s("e01a"),s("d28b"),s("99af"),s("4de4"),s("7db0"),s("4160"),s("fb6a"),s("d3b7"),s("3ca3"),s("159b"),s("ddb0");var n=function(e){"Shot"===e.entity_type_name?(e.episode_name?e.full_entity_name="".concat(e.episode_name," / ").concat(e.sequence_name," / ").concat(e.entity_name):e.full_entity_name="".concat(e.sequence_name," / ").concat(e.entity_name),e.entity_path={name:"shot",params:{production_id:e.project_id,shot_id:e.entity_id}}):(e.full_entity_name="".concat(e.entity_type_name," / ").concat(e.entity_name),e.entity_path={name:"asset",params:{production_id:e.project_id,asset_id:e.entity_id}})},i=function(e,t){var s=e.find((function(e){return e.id===t.id}));return s&&Object.assign(s,t),s},a=function(e,t){return e.filter((function(e){return e.id!==t.id}))},o=function(e,t){return e.filter((function(e){return e!==t}))},r=function(e){var t={};return e.forEach((function(e){e.validations?Object.assign(t,e.validations):e.tasks.forEach((function(e){t[e.task_type_id]=e.id}))})),t},c=function(e,t){var s=[],n=[],i=null,a=!0,o=!1,r=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var d=c.value;i&&d[t]!==i[t]&&(s.push(n.slice(0)),n=[]),n.push(d),i=d}}catch(u){o=!0,r=u}finally{try{a||null==l.return||l.return()}finally{if(o)throw r}}return s.push(n),s}},6922:function(e,t,s){},"6be5":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("article",{ref:"wrapper",class:{"add-comment":!0,"word-break":!0,media:!0,"is-dragging":e.isDragging},on:{drop:e.onDrop,dragover:e.onDragover,dragleave:e.onDragleave}},[e.light?e._e():s("figure",{staticClass:"media-left"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("people-avatar",{staticClass:"level-item",attrs:{person:e.user}})],1)])]),s("div",{staticClass:"media-content"},[s("at-ta",{attrs:{members:e.team,"name-key":"full_name",limit:2},scopedSlots:e._u([{key:"item",fn:function(t){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.item,size:20,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.item.full_name)+" ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"},{name:"focus",rawName:"v-focus"}],ref:"commentTextarea",staticClass:"textarea flexrow-item",attrs:{placeholder:e.$t("comments.add_comment"),disabled:e.isLoading},domProps:{value:e.text},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runAddComment(e.text,e.task_status_id):null},input:function(t){t.target.composing||(e.text=t.target.value)}}})]),s("div",{staticClass:"flexrow preview-section"},[s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.$emit("add-preview")}}},[e._v(" "+e._s(e.$t("comments.add_preview"))+" ")]),s("span",{staticClass:"attachment-file flexrow-item"},[e.isFileAttached?e._e():s("em",[e._v(" "+e._s(e.$t("comments.no_file_attached"))+" ")]),e.isFileAttached?s("em",[e._v(" "+e._s(e.attachedFileName)+" ")]):e._e()])]),s("div",{staticClass:"flexrow mt1"},[s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow-item status-combo-wrapper"},[s("combobox-status",{staticClass:"status-selector",attrs:{"task-status-list":e.taskStatus},model:{value:e.task_status_id,callback:function(t){e.task_status_id=t},expression:"task_status_id"}})],1),s("div",{staticClass:"flexrow-item post-button-wrapper"},[s("button",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},style:{"background-color":e.taskStatusColor},on:{click:function(t){return e.runAddComment(e.text,e.task_status_id)}}},[e._v(" "+e._s(e.$t("comments.post_status"))+" ")])])]),e.isError?s("div",{staticClass:"error pull-right"},[s("em",[e._v(e._s(e.$t("comments.error")))])]):e._e()],1)])},i=[],a=(s("7db0"),s("4160"),s("53ff")),o=s.n(a),r=s("56a0"),c=s("eb8c"),l={name:"add-comment",components:{AtTa:o.a,ComboboxStatus:r["a"],PeopleAvatar:c["a"]},data:function(){return{isDragging:!1,text:"",task_status_id:this.task.task_status_id}},props:{addComment:{type:Function,default:null},isLoading:{type:Boolean,default:null},isError:{type:Boolean,default:null},light:{type:Boolean,default:!1},task:{type:Object,default:function(){return[]}},taskStatus:{type:Array,default:function(){return[]}},user:{type:Object,default:function(){}},attachedFileName:{type:String,default:""},team:{type:Array,default:function(){return[]}}},mounted:function(){var e=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach((function(t){e.$refs.wrapper.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))}))},computed:{isFileAttached:function(){return void 0!==this.attachedFileName&&this.attachedFileName.length>0},taskStatusColor:function(){var e=this,t=this.taskStatus.find((function(t){return t.id===e.task_status_id}))||this.taskStatus[0];return"todo"===t.short_name?"#666":t.color}},methods:{runAddComment:function(e,t){this.$emit("add-comment",e,t),this.text=""},updateValue:function(e){this.task_status_id=this.$refs.statusSelect.value},focus:function(){this.$refs.commentTextarea.focus()},onDragover:function(){this.isDragging=!0},onDragleave:function(){this.isDragging=!1},onDrop:function(e){for(var t=[],s=0;s<e.dataTransfer.files.length;s++){var n=new FormData;n.append("file",e.dataTransfer.files[s]),t.push(n)}this.$emit("file-drop",t),this.isDragging=!1}},watch:{task:function(){this.task_status_id=this.task.task_status_id}}},d=l,u=(s("c2d0"),s("2877")),p=Object(u["a"])(d,n,i,!1,null,"fe393538",null);t["a"]=p.exports},"6c4a":function(e,t,s){"use strict";var n=s("0294"),i=s.n(n);i.a},"6e01":function(e,t,s){},7096:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"color-wrapper"},[s("button",{class:{"color-picker":!0},style:{color:e.color},attrs:{type:"button",title:e.color},on:{click:e.togglePalette}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],class:{"color-palette":!0}},e._l(e.palette,(function(t){return s("label",{key:t,style:{color:t},attrs:{title:t}},[s("input",{attrs:{type:"radio"},domProps:{value:t},on:{click:function(s){return e.onColorPicked(t)}}})])})),0)])},i=[],a={name:"colorpicker",props:{color:{type:String},palette:{type:Array}},data:function(){return{isOpen:!1}},computed:{},methods:{togglePalette:function(){this.isOpen=!this.isOpen},onColorPicked:function(e){this.$emit("change",e),this.isOpen=!1}}},o=a,r=(s("f54c"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"effe3110",null);t["a"]=c.exports},"71b7":function(e,t,s){},7203:function(e,t,s){"use strict";var n=s("e92a"),i=s.n(n);i.a},"72b0":function(e,t,s){"use strict";var n=s("e5c3"),i=s.n(n);i.a},"72f2":function(e,t,s){},"732b":function(e,t,s){e.exports=s.p+"img/empty_shot.8f70da90.png"},7365:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"name"},[s("div",{staticClass:"people-name"},[s("people-avatar",{staticClass:"avatar",attrs:{person:e.person}}),s("people-name",{staticClass:"people-name",attrs:{person:e.person}})],1)])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("eb8c"),c=s("0073");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"people-name-cell",components:{PeopleName:c["a"],PeopleAvatar:r["a"]},props:{person:{type:Object,required:!0}},computed:d({},Object(o["c"])([])),methods:d({},Object(o["b"])([]))},p=u,h=(s("a109"),s("2877")),f=Object(h["a"])(p,n,i,!1,null,"4ddc0854",null);t["a"]=f.exports},7369:function(e,t,s){"use strict";var n=s("29f8"),i=s.n(n);i.a},"736c":function(e,t,s){"use strict";var n=s("43ea"),i=s.n(n);i.a},"74bf":function(e,t,s){},7518:function(e,t,s){},"754d":function(e,t,s){"use strict";var n=s("bd35"),i=s.n(n);i.a},7930:function(e,t,s){"use strict";s("fb6a");var n=s("4710"),i=s.n(n),a=s("6929"),o=s.n(a),r={},c={};t["a"]={fromString:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=new i.a({lightness:.7,saturation:.8});return(t||localStorage&&"true"===localStorage.getItem("dark-theme"))&&(s=new i.a({lightness:.6,saturation:.8})),s.hex(e)},validationBackgroundColor:function(e){return e?"wtg"===e.task_status_short_name?"#f5f5f5":"ip"===e.task_status_short_name?"#3273dc":"pndng"===e.task_status_short_name?"#ab26ff":"fin"===e.task_status_short_name?"#22d160":"rtk"===e.task_status_short_name?"#ff3860":"cfrm"===e.task_status_short_name?"#f1c40f":"recd"===e.task_status_short_name?"#1abc9c":e.task_status_color:"#ffffff"},validationTextColor:function(e){return e&&"todo"!==e.task_status_short_name&&"wtg"!==e.task_status_short_name?"white":"#333"},hexToRGBa:function(e,t){var s=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return t?"rgba("+s+", "+n+", "+i+", "+t+")":"rgb("+s+", "+n+", "+i+")"},darkenColor:function(e){return r[e]||(r[e]=o()(e).darken(.3).saturate(.6)),r[e]},lightenColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return c[e+t]||(c[e+t]=o()(e).fade(t)),c[e+t]}}},"79b9":function(e,t,s){},"7bf8":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label?s("label",{staticClass:"label"},[e._v(e._s(e.label))]):e._e(),s("p",{staticClass:"control flexrow"},[s("input",{ref:"input",class:"input flexrow-item"+e.inputClass,attrs:{placeholder:e.placeholder,type:e.type,disabled:e.disabled,maxlength:e.maxlength,min:"0"},domProps:{value:e.value},on:{input:function(t){return e.updateValue()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()}}}),e.buttonLabel?s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.emitEnter()}}},[e._v(" "+e._s(e.buttonLabel)+" ")]):e._e()])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("a9e3"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"text-field",props:{disabled:{default:!1,type:Boolean},label:{default:"",type:String},value:{default:"",type:[String,Number]},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String},buttonLabel:{default:"",type:String},maxlength:{default:524288,type:Number}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},focus:function(){this.$refs.input.focus()}})},d=l,u=(s("5037"),s("2877")),p=Object(u["a"])(d,n,i,!1,null,"45d78e8c",null);t["a"]=p.exports},"7d26":function(e,t,s){"use strict";s("a4d3"),s("e01a"),s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("d81d"),s("fb6a"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("07ac"),s("25f0"),s("2532"),s("3ca3"),s("159b"),s("ddb0");var n,i=s("ade3"),a=s("2909"),o=s("ba4c"),r=s.n(o),c=s("edbf"),l={getAssets:function(e,t,s){var n="/api/data/assets/with-tasks";e&&(n+="?project_id=".concat(e.id)),t&&(n+="&episode_id=".concat(t.id)),c["a"].get(n,s)},getAsset:function(e){return c["a"].getModel("assets",e)},newAsset:function(e,t){var s={name:e.name,description:e.description,entity_type_id:e.entity_type_id,project_id:e.project_id,data:e.data};"null"!==e.source_id&&(s.source_id=e.source_id),c["a"].post("/api/data/entities/",s,t)},updateAsset:function(e,t){var s={name:e.name,description:e.description,entity_type_id:e.entity_type_id,project_id:e.project_id,data:e.data};("null"===e.source_id||e.source_id)&&(s.source_id=e.source_id),c["a"].put("/api/data/entities/".concat(e.id),s,t)},deleteAsset:function(e,t){e.canceled?c["a"].del("/api/data/assets/".concat(e.id,"?force=true"),t):c["a"].del("/api/data/assets/".concat(e.id),t)},restoreAsset:function(e,t){var s={canceled:!1};c["a"].put("/api/data/entities/".concat(e.id),s,t)},postCsv:function(e,t,s){var n="/api/import/csv/projects/".concat(e.id,"/assets");return s&&(n+="?update=true"),c["a"].ppost(n,t)}},d=s("54b2"),u=s("ce6b"),p=s("fa53"),h=s("ef8b"),f=s("f83f"),m=s("52ad"),b=s("de26"),_=s("2229"),v=s("6185"),y=s("66e7"),g=s("09d3"),k=s("2017"),w=s("ca76"),S=s("9fb0");function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function C(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var T={getCurrentProduction:function(){return f["a"].getters.currentProduction(f["a"].state)},getTaskStatus:function(e){return p["a"].state.taskStatusMap[e]},getTaskType:function(e){return h["a"].state.taskTypeMap[e]},getTask:function(e){return p["a"].state.taskMap[e]},getPerson:function(e){return m["a"].state.personMap[e]},populateTask:function(e,t,s){return e.name=T.getTaskType(e.task_type_id).priority.toString(),e.task_status_short_name=T.getTaskStatus(e.task_status_id).short_name,Object.assign(e,{project_id:t.production_id,episode_id:t.source_id,entity_name:"".concat(t.asset_type_name," / ").concat(t.name),entity_type_name:t.asset_type_name,entity:{id:t.id,preview_file_id:t.preview_file_id}}),e},populateAndRegisterAsset:function(e,t,s,n,i,a,o){var r={},c=0;e[o.asset_type]||(e[o.asset_type_id]={id:o.asset_type_id,name:o.asset_type_name}),o.production_id=i.id,o.project_name=i.name,o.production_name=i.name;var l=[];return o.tasks.forEach((function(e){T.populateTask(e,o),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return n[e].name.localeCompare(n[t].name)})));var i=s[e.task_type_id];a[i.name]||(a[i.name]=e.task_type_id),c+=e.duration,l.push(e.id),r[e.task_type_id]=e.id,t[e.id]=e})),o.tasks=l,o.validations=r,o.timeSpent=c,o},sortValidationColumns:function(e,t,s){var n=Object(a["a"])(e);return Object(_["o"])(n,s)},buildResult:function(e,t){var s=t.assetSearch,n=t.production,i=t.sorting,a=t.taskStatusMap,o=t.taskTypeMap,r=t.taskMap,c=Object.values(o),l=Object.keys(a).map((function(e){return a[e]})),d=s,u=Object(w["e"])(d)||[],p=Object(w["d"])(P.assetIndex,c,l,n.descriptors||[],d),h=Object(k["h"])(P.assetIndex,u)||P.assets;h=Object(w["a"])(h,p,r),h=Object(_["a"])(h,i,a,o,r),P.result=h;var f=h.slice(0,b["a"]),m=f.length,g=e.nbValidationColumns;e.displayedAssets=f,e.assetFilledColumns=Object(y["a"])(f),e.displayedAssetsLength=h?h.length:0,e.assetSearchText=d,e.assetSelectionGrid=Object(v["b"])(m,g)}},P={assetIndex:{},assetTypeIndex:{},assets:[]},E={assetMap:{},assetValidationColumns:[],nbValidationColumns:0,filteredAssets:[],displayedAssets:[],displayedAssetsLength:0,assetFilledColumns:{},assetSearchText:"",assetSelectionGrid:{},assetSearchQueries:[],assetSorting:[],displayedAssetTypes:[],displayedAssetTypesLength:0,assetTypeSearchText:"",assetTypeStats:{},assetTypes:[],isAssetsLoading:!1,isAssetsLoadingError:!1,isAssetDescription:!1,isAssetTime:!1,assetsCsvFormData:null,assetCreated:"",editAsset:{isCreateError:!1,isLoading:!1,isError:!1},deleteAsset:{isLoading:!1,isError:!1},restoreAsset:{isLoading:!1,isError:!1},personTasks:[],assetListScrollPosition:0},j=C({},E),x={assets:function(e){return P.assets},assetMap:function(e){return e.assetMap},assetSearchText:function(e){return e.assetSearchText},assetSearchQueries:function(e){return e.assetSearchQueries},assetSelectionGrid:function(e){return e.assetSelectionGrid},assetValidationColumns:function(e){return e.assetValidationColumns},isAssetsLoading:function(e){return e.isAssetsLoading},isAssetsLoadingError:function(e){return e.isAssetsLoadingError},displayedAssets:function(e){return e.displayedAssets},displayedAssetsLength:function(e){return e.displayedAssetsLength},assetFilledColumns:function(e){return e.assetFilledColumns},displayedAssetTypes:function(e){return e.displayedAssetTypes},displayedAssetTypesLength:function(e){return e.displayedAssetTypesLength},assetTypeSearchText:function(e){return e.assetTypeSearchText},assetTypeStats:function(e){return e.assetTypeStats},assetTypeListScrollPosition:function(e){return e.assetTypeListScrollPosition},assetSorting:function(e){return e.assetSorting},assetListScrollPosition:function(e){return e.assetListScrollPosition},displayedAssetsByType:function(e){return Object(y["b"])(e.displayedAssets,"asset_type_name")},assetsByType:function(e){return Object(y["b"])(Object.values(e.displayedAssets),"asset_type_name")},editAsset:function(e){return e.editAsset},deleteAsset:function(e){return e.deleteAsset},restoreAsset:function(e){return e.restoreAsset},assetCreated:function(e){return e.assetCreated},isAssetTime:function(e){return e.isAssetTime},isAssetDescription:function(e){return e.isAssetDescription},assetsCsvFormData:function(e){return e.assetsCsvFormData}},D={loadAssets:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=i.currentProduction,o=i.userFilters,r=i.personMap,c=i.currentEpisode,d=i.isTVShow,u=i.taskTypeMap,p=i.taskMap;return d&&!c?t?t():null:n.isAssetsLoading?t():(s(S["Ic"]),void l.getAssets(a,c,(function(e,n){e?s(S["Hc"]):s(S["Gc"],{production:a,assets:n,userFilters:o,personMap:r,taskMap:p,taskTypeMap:u}),t&&t(e)})))},loadAsset:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=i.personMap,o=i.currentProduction,r=i.taskMap,c=i.taskTypeMap;return l.getAsset(t).then((function(e){n.assetMap[e.id]?s(S["xf"],e):s(S["a"],{asset:e,taskTypeMap:c,taskMap:r,personMap:a,production:o})})).catch((function(e){return console.error(e)}))},loadAssetCastIn:function(e,t){var s=e.commit,n=(e.state,e.rootState),i=n.shots.shotMap;return d["a"].getAssetCastIn(t).then((function(e){s(S["Jc"],{asset:t,castIn:e,shotMap:i})}))},newAsset:function(e,t){var s=e.commit,n=e.dispatch,i=e.state,a=e.rootGetters,o=t.data,r=t.callback;if(P.assets.find((function(e){return e.name===o.name})))return r();s(S["Ob"],o),l.newAsset(o,(function(e,t){if(e)s(S["Nb"]),r&&r(e);else{var o=a.assetTypeMap;s(S["Mb"],{newAsset:t,assetTypeMap:o});var c=i.assetValidationColumns,l=c.map((function(e){return n("createTask",{entityId:t.id,projectId:t.project_id,taskTypeId:e,type:"assets"})}));Promise.all(l).then((function(){r&&r()})).catch((function(e){console.error(e)}))}}))},editAsset:function(e,t){var s=e.commit,n=(e.state,e.rootState),i=t.data,a=t.callback,o=i.name&&P.assets.find((function(e){return e.name===i.name&&i.id!==e.id}));if(o)return a();s(S["Ob"]);var r=n.assetTypes.assetTypeMap;l.updateAsset(i,(function(e,t){e?s(S["Nb"]):s(S["Mb"],{newAsset:t,assetTypeMap:r}),a&&a(e)}))},deleteAsset:function(e,t){var s=e.commit,n=e.state,i=t.asset,a=t.callback;s(S["bb"]),l.deleteAsset(i,(function(e){if(e)s(S["ab"]);else{var t=n.assetMap[i.id];t&&t.tasks.length>0&&!t.canceled?s(S["s"],t):s(S["le"],i),s(S["Z"],i)}a&&a(e)}))},restoreAsset:function(e,t){var s=e.commit;e.state;s(S["Fe"]);var n=t.asset;l.restoreAsset(n,(function(e){e?s(S["Ee"]):s(S["De"],n),t.callback&&t.callback(e)}))},uploadAssetFile:function(e,t){var s=e.commit,n=e.state,i=T.getCurrentProduction();return s(S["Ac"]),l.postCsv(i,n.assetsCsvFormData,t).then((function(){s(S["zc"]),Promise.resolve()}))},setAssetSearch:function(e,t){var s=e.commit,n=(e.state,e.rootGetters),i=n.taskStatusMap,a=n.taskTypeMap,o=n.taskMap,r=n.currentProduction;s(S["Qe"],{assetSearch:t,taskMap:o,taskStatusMap:i,taskTypeMap:a,production:r})},saveAssetSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=j.assetSearchQueries.find((function(e){return e.name===t})),o=n.currentProduction;a?e():u["a"].createFilter("asset",t,t,o.id,null,(function(t,n){s(S["Je"],{searchQuery:n,production:o}),t?i(t):e(n)}))}))},removeAssetSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;u["a"].removeFilter(t,(function(n){s(S["me"],{searchQuery:t,production:a}),n?i(n):e()}))}))},displayMoreAssets:function(e){var t=e.commit,s=e.rootGetters;t(S["Ib"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},initAssetTypes:function(e){e.commit;var t=e.dispatch;e.state,e.rootState,e.rootGetters;return new Promise((function(e,s){t("setLastProductionScreen","production-asset-types"),t("loadAssets",(function(n){n?s(n):(t("computeAssetTypeStats"),e())}))}))},setAssetTypeListScrollPosition:function(e){var t=e.commit;t(S["ff"])},computeAssetTypeStats:function(e){var t=e.commit,s=e.rootGetters,n=s.taskStatusMap,i=s.taskMap;t(S["T"],{taskStatusMap:n,taskMap:i})},setAssetTypeSearch:function(e,t){var s=e.commit;s(S["Re"],t)},getAssetsCsvLines:function(e){var t=e.state,s=e.rootGetters,n=s.currentProduction,i=s.episodeMap,o=P.assets;P.result&&P.result.length>0&&(o=P.result);var r=o.map((function(e){var o=[];return s.isTVShow&&o.push(e.episode_id?i[e.episode_id].name:"All"),o=o.concat([e.asset_type_name,e.name,e.description]),Object(_["d"])(Object(a["a"])(n.descriptors)).filter((function(e){return"Asset"===e.entity_type})).forEach((function(t){o.push(e.data[t.field_name])})),t.isAssetTime&&o.push(e.timeSpent),t.assetValidationColumns.forEach((function(t){var n=s.taskMap[e.validations[t]];n?o.push(n.task_status_short_name):o.push("")})),o}));return r},changeAssetSort:function(e,t){var s=e.commit,n=e.rootGetters,i=n.taskStatus,a=n.taskTypeMap,o=n.taskMap,r=n.currentProduction,c=t?[t]:[];s(S["F"],{taskStatusMap:i,taskTypeMap:a,taskMap:o,production:r,sorting:c})}},A=(n={},Object(i["a"])(n,S["O"],(function(e){P.assets=[],e.assetMap={},P.result=[],e.assetValidationColumns=[],P.assetIndex={},e.displayedAssets=[],e.assetFilledColumns={},e.displayedAssetsLength=0,e.assetSearchQueries=[]})),Object(i["a"])(n,S["Ic"],(function(e){P.assets=[],P.result=[],e.assetMap={},e.isAssetsLoading=!0,e.isAssetsLoadingError=!1,e.assetValidationColumns=[],P.assetIndex={},e.displayedAssets=[],e.assetFilledColumns={},e.displayedAssetsLength=0,e.assetSearchQueries=[]})),Object(i["a"])(n,S["Hc"],(function(e){e.isAssetsLoading=!1,e.isAssetsLoadingError=!0})),Object(i["a"])(n,S["Gc"],(function(e,t){var s=t.production,n=t.assets,i=t.userFilters,a=t.personMap,o=t.taskMap,r=t.taskTypeMap,c={},l={},d=!1,u=!1;n=Object(_["b"])(n),P.assets=n,P.result=n,P.assetIndex=Object(k["a"])(n),e.assetMap={},n.forEach((function(t){T.populateAndRegisterAsset(l,o,r,a,s,c,t),e.assetMap[t.id]=t,!d&&t.timeSpent>0&&(d=!0),!u&&t.description&&(u=!0)}));var p=Object.values(l);P.assetTypeIndex=Object(k["c"])(p);var h=P.assets.slice(0,b["a"]),f=Object(y["a"])(h);e.assetValidationColumns=T.sortValidationColumns(Object.values(c),f,r),e.isAssetTime=d,e.isAssetDescription=u,e.isAssetsLoading=!1,e.isAssetsLoadingError=!1,e.nbValidationColumns=e.assetValidationColumns.length,e.displayedAssets=h,e.displayedAssetsLength=P.assets?P.assets.length:0,e.assetFilledColumns=f,e.assetTypes=p,e.displayedAssetTypes=p,e.displayedAssetTypesLength=p.length;var m=e.displayedAssets.length,g=e.nbValidationColumns;e.assetSelectionGrid=Object(v["b"])(m,g),i.asset&&i.asset[s.id]?e.assetSearchQueries=i.asset[s.id]:e.assetSearchQueries=[]})),Object(i["a"])(n,S["a"],(function(e,t){var s=t.taskTypeMap,n=t.taskMap,i=t.personMap,a=t.production,o=t.asset;o.tasks=Object(_["n"])(o.tasks,s),o.validations={},o.production_id=o.project_id,o.episode_id=o.source_id,T.populateAndRegisterAsset({},n,s,i,a,{},o),P.assets.push(o),P.assets=Object(_["b"])(P.assets),e.assetMap[o.id]=o,e.displayedAssets.push(o),e.displayedAssets=Object(_["b"])(e.displayedAssets),e.displayedAssetsLength=P.assets.length,e.assetFilledColumns=Object(y["a"])(e.displayedAssets);var r=e.displayedAssets.length,c=e.nbValidationColumns;e.assetSelectionGrid=Object(v["b"])(r,c),e.assetMap[o.id]=o,P.assetIndex=Object(k["a"])(P.assets)})),Object(i["a"])(n,S["xf"],(function(e,t){Object.assign(e.assetMap[t.id],t),P.assetIndex=Object(k["a"])(P.assets)})),Object(i["a"])(n,S["le"],(function(e,t){e.assetMap[t.id]&&(delete e.assetMap[t.id],P.assets=Object(y["e"])(P.assets,t),e.displayedAssets=Object(y["e"])(e.displayedAssets,t),t.timeSpent&&(e.displayedAssetsTimeSpent-=t.timeSpent),e.assetFilledColumns=Object(y["a"])(e.displayedAssets),e.displayedAssetsLength=Math.max(e.displayedAssetsLength-1,0),P.assetIndex=Object(k["a"])(P.assets))})),Object(i["a"])(n,S["q"],(function(e,t){e.assetsCsvFormData=t})),Object(i["a"])(n,S["Ac"],(function(e){})),Object(i["a"])(n,S["zc"],(function(e){e.assetsCsvFormData=null})),Object(i["a"])(n,S["Ob"],(function(e,t){e.editAsset.isLoading=!0,e.editAsset.isError=!1})),Object(i["a"])(n,S["Nb"],(function(e){e.editAsset.isLoading=!1,e.editAsset.isError=!0,e.editAsset.isCreateError=!0})),Object(i["a"])(n,S["Mb"],(function(e,t){var s=t.newAsset,n=t.assetTypeMap;e.editAsset.isCreateError=!1,e.editAsset.isSuccess=!0,e.assetCreated=s.name;var i=e.assetMap[s.id],a=n[s.entity_type_id];if(a&&(s.asset_type_name=a.name,s.asset_type_id=a.id),s.tasks=[],i)s.episode_id=s.source_id,Object.assign(i,s),e.displayedAssets=Object(_["b"])(e.displayedAssets);else{s.validations={},s.production_id=s.project_id,s.episode_id=s.source_id,P.assets.push(s),P.assets=Object(_["b"])(P.assets),e.displayedAssets.push(s),e.displayedAssets=Object(_["b"])(e.displayedAssets),e.assetFilledColumns=Object(y["a"])(e.displayedAssets),e.displayedAssetsLength=P.assets.length;var o=e.displayedAssets.length,r=e.nbValidationColumns;e.assetSelectionGrid=Object(v["b"])(o,r),e.assetMap[s.id]=s}e.editAsset={isLoading:!1,isError:!1},s.description&&!e.isAssetDescription&&(e.isAssetDescription=!0),P.assetIndex=Object(k["a"])(P.assets)})),Object(i["a"])(n,S["bb"],(function(e){e.deleteAsset={isLoading:!0,isError:!1}})),Object(i["a"])(n,S["ab"],(function(e){e.deleteAsset={isLoading:!1,isError:!0}})),Object(i["a"])(n,S["s"],(function(e,t){t.canceled=!0})),Object(i["a"])(n,S["Z"],(function(e,t){e.deleteAsset={isLoading:!1,isError:!1}})),Object(i["a"])(n,S["Fe"],(function(e){e.restoreAsset={isLoading:!0,isError:!1}})),Object(i["a"])(n,S["Ee"],(function(e){e.restoreAsset={isLoading:!1,isError:!0}})),Object(i["a"])(n,S["De"],(function(e,t){var s=e.assetMap[t.id];s.canceled=!1,e.restoreAsset={isLoading:!1,isError:!1},P.assetIndex=Object(k["a"])(P.assets)})),Object(i["a"])(n,S["Fe"],(function(e){e.restoreAsset={isLoading:!0,isError:!1}})),Object(i["a"])(n,S["Ee"],(function(e){e.restoreAsset={isLoading:!1,isError:!0}})),Object(i["a"])(n,S["De"],(function(e,t){var s=e.assetMap[t.id];s.canceled=!1,e.restoreAsset={isLoading:!1,isError:!1},P.assetIndex=Object(k["a"])(P.assets)})),Object(i["a"])(n,S["Bb"],(function(e,t){var s=e.displayedAssets.find((function(e){return e.id===t.entity_id}));if(s){var n=JSON.parse(JSON.stringify(s.validations));delete s.validations,r.a.set(s,"validations",n);var i=JSON.parse(JSON.stringify(s.tasks)),a=i.findIndex((function(e){return e===t.id}));i.splice(a,1),r.a.set(s,"tasks",i)}})),Object(i["a"])(n,S["ae"],(function(e,t){t.comment,t.taskId})),Object(i["a"])(n,S["Qe"],(function(e,t){var s=e.assetSorting;t.sorting=s,T.buildResult(e,t)})),Object(i["a"])(n,S["Je"],(function(e,t){var s=t.searchQuery;e.assetSearchQueries.includes(s)||(e.assetSearchQueries.push(s),e.assetSearchQueries=Object(_["d"])(e.assetSearchQueries))})),Object(i["a"])(n,S["me"],(function(e,t){var s=t.searchQuery,n=e.assetSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.assetSearchQueries.splice(n,1)})),Object(i["a"])(n,S["Ib"],(function(e,t){t.taskTypeMap,t.taskStatusMap,t.taskMap,t.production;var s=P.result;e.displayedAssets=s.slice(0,e.displayedAssets.length+b["a"]),e.assetFilledColumns=Object(y["a"])(e.displayedAssets);var n=e.displayedAssets.length-b["a"],i=e.displayedAssets.length,a=e.nbValidationColumns;n>=0&&(e.assetSelectionGrid=Object(v["a"])(e.assetSelectionGrid,n,i,a))})),Object(i["a"])(n,S["Te"],(function(e,t){e.assetSearchText=""})),Object(i["a"])(n,S["ef"],(function(e,t){var s=t.entityId,n=(t.taskId,t.previewId),i=t.taskMap,a=e.assetMap[s];a&&(a.preview_file_id=n,a.tasks.forEach((function(e){var t=i[e];t.entity.preview_file_id=n})))})),Object(i["a"])(n,S["Pe"],(function(e,t){e.assetListScrollPosition=t})),Object(i["a"])(n,S["ff"],(function(e,t){e.assetTypeListScrollPosition=t})),Object(i["a"])(n,S["ue"],(function(e,t){e.assetSelectionGrid[0]&&e.assetSelectionGrid[t.x]&&(e.assetSelectionGrid[t.x][t.y]=!1)})),Object(i["a"])(n,S["m"],(function(e,t){e.assetSelectionGrid[0]&&e.assetSelectionGrid[t.x]&&(e.assetSelectionGrid[t.x][t.y]=!0)})),Object(i["a"])(n,S["n"],(function(e,t){var s=JSON.parse(JSON.stringify(e.assetSelectionGrid));t.forEach((function(e){s[0]&&s[e.x]&&(s[e.x][e.y]=!0)})),e.assetSelectionGrid=s})),Object(i["a"])(n,S["R"],(function(e,t){var s=JSON.parse(JSON.stringify(e.assetSelectionGrid));e.assetSelectionGrid=Object(v["c"])(s)})),Object(i["a"])(n,S["be"],(function(e,t){var s=e.assetMap[t.entity_id];s&&t&&(t=T.populateTask(t,s),s.tasks.push(t),s.validations||(s.validations={}),r.a.set(s.validations,t.task_type_id,t.id))})),Object(i["a"])(n,S["W"],(function(e,t){t.forEach((function(t){if(t){var s=e.assetMap[t.entity_id];if(s){var n=C({},s.validations);r.a.set(n,t.task_type_id,t.id),delete s.validations,r.a.set(s,"validations",n)}}}))})),Object(i["a"])(n,S["Re"],(function(e,t){var s=Object(w["e"])(t),n=Object(k["h"])(P.assetTypeIndex,s)||e.assetTypes;Object.assign(e,{displayedAssetTypes:n,displayedAssetTypesLength:n?n.length:0,assetTypeSearchText:t})})),Object(i["a"])(n,S["T"],(function(e,t){var s=t.taskStatusMap,n=t.taskMap;e.assetTypeStats=Object(g["a"])(P.assets,"asset_type_id",s,n)})),Object(i["a"])(n,S["F"],(function(e,t){var s=t.taskStatusMap,n=t.taskTypeMap,i=t.taskMap,a=t.production,o=t.sorting,r=e.assetSearchText;e.assetSorting=o,T.buildResult(e,{assetSearch:r,taskStatusMap:s,taskTypeMap:n,taskMap:i,production:a,sorting:o})})),Object(i["a"])(n,S["Be"],(function(e){P.assets=[],P.assetIndex={},P.result=[],Object.assign(e,C({},E))})),n);t["a"]={state:j,getters:x,actions:D,mutations:A,cache:P}},"7d5f":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"video-player"},[s("div",{ref:"video-wrapper",staticClass:"video-wrapper"},[e.isLoading?s("div",{staticClass:"loading-background"},[s("spinner",{staticClass:"spinner"})],1):e._e(),s("div",{staticClass:"canvas-wrapper"},[e.readOnly?e._e():s("canvas",{ref:"annotation-canvas",staticClass:"canvas",attrs:{id:"annotation-canvas"}})]),s("video",{ref:"movie",staticClass:"annotation-movie",style:{display:e.isLoading?"none":"block"},attrs:{id:"annotation-movie",preload:"auto",src:e.moviePath,poster:e.posterPath}}),e.isComparing&&e.previewToCompareId?s("video",{ref:"comparison-movie",staticClass:"annotation-movie",attrs:{id:"comparison-movie",preload:"auto",src:e.comparisonMoviePath,poster:e.comparisonPosterPath}}):e._e()]),s("div",{ref:"button-bar",staticClass:"button-bar"},[s("div",{staticClass:"video-progress pull-bottom"},[s("progress",{ref:"progress",attrs:{value:"0",min:"0"},on:{click:e.onProgressClicked}},[s("span",{ref:"progress-bar",attrs:{id:"progress-bar"}})])]),e.readOnly?e._e():s("annotation-bar",{ref:"annotation-bar",attrs:{annotations:e.annotations,maxDurationRaw:e.videoDuration},on:{"select-annotation":e.loadAnnotation}}),s("div",{staticClass:"buttons flexrow pull-bottom"},[s("div",{staticClass:"left flexrow"},[s("button",{staticClass:"button flexrow-item",on:{click:e.onPlayPauseClicked}},[e.isPlaying?s("pause-icon",{staticClass:"icon"}):e._e(),e.isPlaying?e._e():s("play-icon",{staticClass:"icon"})],1),e.isFullScreen()?s("button",{class:{button:!0,"flexrow-item":!0,active:e.isRepeating},on:{click:e.onRepeatClicked}},[s("repeat-icon",{staticClass:"icon smaller"})],1):e._e(),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" "+e._s(e.currentTime)+" ")]),!e.light||e.readOnly||e.isFullScreen()?s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" / ")]):e._e(),!e.light||e.readOnly||e.isFullScreen()?s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" "+e._s(e.maxDuration)+" ")]):e._e(),s("span",{staticClass:"flexrow-item time-indicator mr1"},[e._v(" ("+e._s(e.currentFrame)+") ")]),!e.readOnly&&e.taskTypeOptions.length>0&&(!e.light||e.isFullScreen())?s("button",{class:{button:!0,"flexrow-item":!0,active:e.isComparing,"comparison-button":!0},on:{click:e.onCompareClicked}},[s("copy-icon",{staticClass:"icon smaller"})],1):e._e(),e.readOnly||!e.isComparing||e.light&&!e.isFullScreen()?e._e():s("combobox",{staticClass:"comparison-combobox",attrs:{options:e.taskTypeOptions,"is-dark":!0},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),e.readOnly||!e.isComparing||e.light&&!e.isFullScreen()?e._e():s("combobox",{staticClass:"comparison-combobox",attrs:{options:e.previewFileOptions,"is-dark":!0},model:{value:e.previewToCompareId,callback:function(t){e.previewToCompareId=t},expression:"previewToCompareId"}})],1),s("div",{staticClass:"right flexrow"},[e.isFullScreen()?s("div",{staticClass:"flexrow flexrow-item"},e._l(e.lastPreviewFiles,(function(t){return s("span",{key:"last-preview-"+t.id,class:{"previous-preview-file":!0,"current-preview-file":t.revision===e.preview.revision},on:{click:function(s){return e.changeCurrentPreview(t)}}},[e._v(" "+e._s(t.revision)+" ")])})),0):e._e(),!e.readOnly&&e.isFullScreen()?s("button",{staticClass:"button flexrow-item",on:{click:e.undoLastAction}},[s("corner-left-down-icon",{staticClass:"icon"})],1):e._e(),!e.readOnly&&e.isFullScreen()?s("button",{staticClass:"button flexrow-item",on:{click:e.redoLastAction}},[s("corner-right-down-icon",{staticClass:"icon"})],1):e._e(),!e.readOnly&&e.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:e.onDeleteClicked}},[s("x-icon",{staticClass:"icon"})],1):e._e(),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawing,expression:"isDrawing"}],staticClass:"annotation-tools"},[s("pencil-picker",{attrs:{isOpen:e.isShowingPencilPalette,pencil:e.pencil,sizes:this.pencilPalette},on:{"toggle-palette":e.onPickPencil,change:e.onChangePencil}}),s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.color,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeColor}})],1)]),!e.readOnly&&e.isFullScreenEnabled?s("button",{class:{button:!0,"flexrow-item":!0,active:e.isDrawing},on:{click:e.onPencilAnnotateClicked}},[s("edit-2-icon",{staticClass:"icon"})],1):e._e(),e.readOnly?e._e():s("a",{staticClass:"button flexrow-item",attrs:{href:e.movieDlPath}},[s("download-icon",{staticClass:"icon"})],1),e.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:e.onFullscreenClicked}},[s("maximize-icon",{staticClass:"icon"})],1):e._e()],1)])],1)])},i=[],a=(s("a4d3"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("d81d"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("4d90"),s("159b"),s("ade3")),o=s("2f62"),r=s("7a94"),c=s("0a35"),l=s("bcd2"),d=s("8707"),u=s("7096"),p=s("7f06"),h=s("992f"),f=s("be83"),m=s("9fbc");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var v={name:"video-player",mixins:[m["a"]],components:{AnnotationBar:d["a"],ColorPicker:u["a"],CornerLeftDownIcon:c["j"],CornerRightDownIcon:c["k"],PencilPicker:p["a"],CopyIcon:c["i"],Combobox:h["a"],DownloadIcon:c["m"],Edit2Icon:c["n"],MaximizeIcon:c["w"],PauseIcon:c["z"],PlayIcon:c["A"],RepeatIcon:c["C"],Spinner:f["a"],XIcon:c["N"]},props:{preview:{type:Object,default:function(){}},entityPreviewFiles:{type:Object,default:function(){}},taskTypeMap:{type:Object,default:function(){}},light:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},lastPreviewFiles:{type:Array,default:function(){return[]}}},data:function(){return{annotations:[],palette:["#ff3860","#008732","#5E60BA","#f57f17"],pencilPalette:["big","medium","small"],color:"#ff3860",pencil:"big",currentTime:"00:00.00",currentTimeRaw:0,fabricCanvas:null,isComparing:!1,isDrawing:!1,isLoading:!1,isPlaying:!1,isRepeating:!1,maxDuration:"00:00.00",previewToCompareId:null,taskTypeId:this.entityPreviewFIles?Object.keys(this.entityPreviewFiles)[0]:null,videoDuration:0}},mounted:function(){var e=this;this.reloadAnnotations(),this.container.style.height=this.getDefaultHeight()+"px",this.isLoading=!0,this.setupFabricCanvas(),setTimeout((function(){e.video&&(e.video.addEventListener("loadedmetadata",(function(){e.configureVideo(),e.onWindowResize(),e.isLoading=!1,e.setDefaultComparisonTaskType()})),e.video.addEventListener("ended",(function(){e.isLoading=!1})),e.video.addEventListener("error",(function(){e.$refs.movie.style.height=e.getDefaultHeight()-90+"px",e.isLoading=!1})),window.addEventListener("keydown",e.onKeyDown,!1),window.addEventListener("resize",e.onWindowResize),e.video.addEventListener("timeupdate",e.onTimeUpdate))}),0)},beforeDestroy:function(){this.clearCanvas(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},computed:_({},Object(o["c"])(["currentProduction"]),{currentFrame:function(){return"".concat(Math.ceil(this.currentTimeRaw*this.fps)).padStart(3,"0")},canvas:function(){return this.$refs["annotation-canvas"]},container:function(){return this.$refs.container},fps:function(){return this.currentProduction.fps||24},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)},isVideo:function(){return this.$refs.movie&&this.videoDuration&&this.videoDuration>0},moviePath:function(){return"/api/movies/originals/preview-files/".concat(this.preview.id,".mp4")},movieDlPath:function(){return"/api/movies/originals/preview-files/".concat(this.preview.id,"/download")},posterPath:function(){return"/api/pictures/previews/preview-files/".concat(this.preview.id,".png")},comparisonMoviePath:function(){return"/api/movies/originals/preview-files/".concat(this.previewToCompareId,".mp4")},comparisonPosterPath:function(){return"/api/pictures/originals/preview-files/".concat(this.previewToCompareId,".png")},progress:function(){return this.$refs.progress},progressBar:function(){return this.$refs["progress-bar"]},video:function(){return this.$refs.movie},comparisonVideo:function(){return this.$refs["comparison-movie"]},videoWrapper:function(){return this.$refs["video-wrapper"]},taskTypeOptions:function(){var e=this,t=Object.keys(this.entityPreviewFiles);return t.filter((function(t){return e.entityPreviewFiles[t].length>1||1===e.entityPreviewFiles[t].length&&e.entityPreviewFiles[t][0].id!==e.preview.id})).map((function(t){var s=e.taskTypeMap[t];return s?{label:s.name,value:s.id}:{label:"",value:""}}))},previewFileOptions:function(){var e=this,t=this.entityPreviewFiles[this.taskTypeId];return t?(t=t.filter((function(t){return t.id!==e.preview.id})),t&&t.length>0?t.map((function(e){return{label:"v".concat(e.revision),value:e.id}})):[]):[]}}),methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},getDefaultHeight:function(){return this.isFullScreen()?screen.height:screen.width>1300&&(!this.light||this.readOnly)?500:200},getDimensions:function(){var e=this.video.videoHeight/this.video.videoWidth,t=this.container.offsetWidth-1,s=Math.floor(t*e);return s=Math.min(s,this.getDefaultHeight()-60),t=Math.floor(s/e),{width:t,height:s}},getTimelinePosition:function(e,t){if(this.$refs.movie){var s=Math.round(e/this.$refs.movie.duration*this.progress.offsetWidth);return s=s-10*t-5,s<0&&(s=0),s+10>this.progress.offsetWidth&&(s-=5),s}return 0},setCurrentTime:function(e){if(e=Object(l["b"])(e,this.fps),this.progress.value=e,this.progressBar.style.width=Math.floor(e/this.video.duration*100)+"%",this.clearCanvas(),this.video.currentTime=e,this.isComparing){var t=document.getElementById("comparison-movie");t&&(t.currentTime=e)}},configureVideo:function(){this.reloadAnnotations(),this.video.addEventListener("timeupdate",this.updateProgressBar),this.video.onended=this.onVideoEnd,0===this.video.currentTime&&(this.clearCanvas(),this.mountVideo())},mountVideo:function(){if(this.video.mute=!0,this.videoDuration=this.video.duration,this.progress.setAttribute("max",this.videoDuration),this.maxDuration=this.formatTime(this.videoDuration),this.isLoading=!1,this.isPlaying=!1,this.isRepeating=!1,this.container){var e=this.getDimensions(),t=e.width,s=e.height;if(s>0)if(this.isComparing){this.container.style.height=this.getDefaultHeight()+"px",this.video.style.width=t/2+"px",this.video.style.height=s/2+"px";var n=document.getElementById("comparison-movie");n&&(n.style.width=t/2+"px",n.style.height=s/2+"px"),this.videoWrapper.style.width=t+"px",this.videoWrapper.style.height=s+"px"}else this.container.style.height=this.getDefaultHeight()+"px",this.video.style.width=t+"px",this.video.style.height=s+"px",this.videoWrapper.style.width=t+"px",this.videoWrapper.style.height=s+"px";this.readOnly||this.resetCanvas()}},onTimeUpdate:function(e){this.video?this.currentTimeRaw=this.video.currentTime:this.currentTimeRaw=0},clearCanvas:function(){this.fabricCanvas&&this.fabricCanvas.clear()},play:function(){if(this.clearCanvas(),this.isPlaying=!0,this.readOnly||(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1),this.video.play(),this.isComparing){var e=document.getElementById("comparison-movie");e&&e.play()}},pause:function(){if(this.isPlaying=!1,this.video.pause(),this.isComparing){var e=document.getElementById("comparison-movie");e&&e.pause()}},goPreviousFrame:function(){var e=this.video.currentTime-1/this.fps;e<0?this.setCurrentTime(0):this.setCurrentTime(e);var t=this.getAnnotation(this.video.currentTime);t&&this.loadAnnotation(t)},goNextFrame:function(){var e=this.video.currentTime+1/this.fps;e>this.video.duration?this.setCurrentTime(this.video.duration):this.setCurrentTime(e);var t=this.getAnnotation(this.video.currentTime);t&&this.loadAnnotation(t)},formatTime:function(e){var t=".".concat(Math.round(e%1*100));2===t.length&&(t+="0");try{return new Date(1e3*e).toISOString().substr(14,5)+t}catch(s){return console.error(s),"00:00.00"}},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0)},onDeleteClicked:function(){this.deleteSelection()},onVideoEnd:function(){if(this.isPlaying=!1,this.isRepeating){if(this.video.currentTime=0,this.isComparing){var e=document.getElementById("comparison-movie");e&&(e.currentTime=0)}this.progress.value=0,this.play()}},onPlayPauseClicked:function(){this.video.paused||this.video.ended?this.play():this.pause()},onRepeatClicked:function(){this.isRepeating?this.isRepeating=!1:this.isRepeating=!0},onCompareClicked:function(){var e=this;this.isComparing?(this.isComparing=!1,this.mountVideo()):(this.isComparing=!0,this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=!1),this.isDrawing=!1,this.$nextTick((function(){e.mountVideo(),e.$nextTick((function(){var t=e.getAnnotation(e.video.currentTime);t&&e.loadAnnotation(t)}))})))},onProgressClicked:function(e){var t=this.progress.offsetLeft;0!==t||this.isFullScreen()||(t=this.progress.parentElement.offsetParent.offsetLeft-10);var s=(e.pageX-t)/this.progress.offsetWidth,n=s*this.video.duration;this.setCurrentTime(n)},updateProgressBar:function(){this.progress.getAttribute("max")||this.progress.setAttribute("max",this.video.duration),this.progress.value=1*this.video.currentTime;var e=Math.floor(this.video.currentTime/this.video.duration*100);this.progressBar.style.width=e+"%",this.currentTime=this.formatTime(this.video.currentTime)},onFullscreenClicked:function(){this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},onPencilAnnotateClicked:function(){this.isDrawing?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.fabricCanvas.isDrawingMode=!0,this.isDrawing=!0)},onWindowResize:function(e){var t=this,s=(new Date).getTime();this.lastCall=this.lastCall||0,s-this.lastCall>600&&(this.lastCall=s,this.$nextTick((function(){t.mountVideo(),t.reloadAnnotations();var s=t.getAnnotation(t.video.currentTime);t.$nextTick((function(){s&&t.loadAnnotation(s)})),e&&"function"===typeof e&&e()})))},onKeyDown:function(e){["INPUT","TEXTAREA"].includes(e.target.tagName)||(46===e.keyCode&&this.fabricCanvas?this.deleteSelection():37===e.keyCode?this.goPreviousFrame():39===e.keyCode?this.goNextFrame():32===e.keyCode?this.onPlayPauseClicked():68===e.keyCode?this.onPencilAnnotateClicked():e.ctrlKey&&e.altKey&&68===e.keyCode?this.onAnnotateClicked():e.ctrlKey&&90===e.keyCode?this.undoLastAction():e.altKey&&82===e.keyCode&&this.redoLastAction())},getAnnotation:function(e){return e=Object(l["b"])(e,this.fps),this.annotations.find((function(t){return t.time===e}))},saveAnnotations:function(){var e=Object(l["b"])(this.video.currentTime,this.fps)||0,t=this.getAnnotation(e),s=this.getNewAnnotations(e,t);this.$emit("annotationchanged",{preview:this.preview,annotations:s})},loadAnnotation:function(e){var t=this;if(e){var s=e.time||0;s=Object(l["b"])(s,this.fps),this.video.pause(),this.fabricCanvas||this.setupFabricCanvas(),this.resetCanvasSize(),this.video.currentTime=s,this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.clearCanvas();var n=1,i=1;e.width&&(n=this.fabricCanvas.width/e.width,i=this.fabricCanvas.width/e.width),e.height&&(i=this.fabricCanvas.height/e.height),e.drawing.objects.forEach((function(e){var s={left:e.left*n,top:e.top*i,fill:"transparent",stroke:e.stroke,strokeWidth:e.strokeWidth,radius:e.radius,width:e.width,height:e.height,scaleX:e.scaleX*n,scaleY:e.scaleY*i};if("path"===e.type){var a=1;e.canvasWidth&&(a=e.canvasWidth/t.fabricCanvas.width);var o=new r["fabric"].Path(e.path,_({},s,{strokeWidth:e.strokeWidth*a,canvasWidth:e.canvasWidth}));o.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(o)}}))}else console.error("Annotations are malformed and cannot be loaded.")},reloadAnnotations:function(){if(!this.readOnly){if(this.annotations=[],this.preview.annotations){var e=[];this.preview.annotations.forEach((function(t){return e.push(_({},t))})),this.annotations=e.sort((function(e,t){return e.time<t.time}))||[]}else this.annotations=[];return this.annotations}},getAnnotationStyles:function(e,t){return{cursor:"pointer",position:"relative",display:"inline-block",left:this.getTimelinePosition(e.time,t)+"px"}},setDefaultComparisonTaskType:function(){var e=this;if(!this.readOnly){var t=Object.keys(this.entityPreviewFiles);if(t&&t.length>0){var s=this.taskTypeOptions.find((function(t){return e.entityPreviewFiles[t.value].findIndex((function(t){return t.id===e.preview.id}))>=0}));s?this.taskTypeId=s.value:this.taskTypeOptions.length>0&&(this.taskTypeId=this.taskTypeOptions[0].value),this.taskTypeId&&this.setDefaultComparisonPreview()}else this.previewToCompareId=null}},setDefaultComparisonPreview:function(){var e=this,t=this.entityPreviewFiles[this.taskTypeId];t?(t=t.filter((function(t){return t.id!==e.preview.id})),t.length>0?this.previewToCompareId=t[0].id:this.previewToCompareId=null):this.previewToCompareId=null},resetCanvas:function(){this.fabricCanvas||this.setupFabricCanvas(),this.resetCanvasSize(),this.fabricCanvas.renderAll(),this.clearCanvas();var e=this.getAnnotation(this.video.currentTime);e&&this.loadAnnotation(e)},resetCanvasSize:function(){if(this.$refs.movie){var e=this.$refs.movie.offsetWidth,t=this.$refs.movie.offsetHeight;this.fabricCanvas.setDimensions({width:e,height:t})}},changeCurrentPreview:function(e){this.$emit("change-current-preview",e)}},watch:{preview:function(){this.maxDuration="00:00.00",this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.reloadAnnotations(),this.isComparing&&(this.isComparing=!1,this.mountVideo()),this.setDefaultComparisonTaskType()},previewToCompareId:function(){if(this.isComparing){this.pause();var e=this.video.currentTime;this.$nextTick((function(){var t=document.getElementById("comparison-movie");t&&(t.currentTime=e)}))}},taskTypeId:function(){this.setDefaultComparisonPreview()},light:function(){this.onWindowResize()}}},y=v,g=(s("08a5"),s("2877")),k=Object(g["a"])(y,n,i,!1,null,"2af00322",null);t["a"]=k.exports},"7daf":function(e,t,s){},"7ed4":function(e,t,s){},"7f06":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pencil-wrapper"},[s("button",{staticClass:"pencil-picker",class:{medium:"medium"===e.pencil,small:"small"===e.pencil},attrs:{type:"button",title:e.$t("playlists.actions.annotation_"+e.pencil)},on:{click:e.togglePalette}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"pencil-palette"},e._l(e.sizes,(function(t){return s("label",{key:t,class:{medium:"medium"===t,small:"small"===t},attrs:{title:e.$t("playlists.actions.annotation_"+t)}},[s("input",{attrs:{type:"radio"},domProps:{value:t},on:{click:function(s){return e.onPencilPicked(t)}}})])})),0)])},i=[],a={name:"pencilpicker",props:{pencil:{type:String},sizes:{type:Array}},data:function(){return{isOpen:!1}},computed:{},methods:{togglePalette:function(){this.isOpen=!this.isOpen},onPencilPicked:function(e){this.$emit("change",e),this.isOpen=!1}}},o=a,r=(s("fbf3"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"7690204b",null);t["a"]=c.exports},8078:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container"},[s("div",{ref:"model-viewer",class:{light:e.light&&!e.readOnly},attrs:{id:"model-viewer"}}),s("div",{staticClass:"viewer-actions flexrow"},[e.isLoading?s("span",[e._v(e._s(e.$t("main.loading")))]):e._e(),s("span",{staticClass:"filler"}),e.readOnly?e._e():s("a",{staticClass:"button flexrow-item",attrs:{href:e.previewDlPath}},[s("download-icon",{staticClass:"icon"})],1),s("button",{staticClass:"button flexrow-item",on:{click:e.goFullScreen}},[s("maximize-icon",{staticClass:"icon"})],1)])])},i=[],a=s("0a35"),o=s("9d51"),r={name:"model-viewer",components:{DownloadIcon:a["m"],MaximizeIcon:a["w"]},data:function(){return{isLoading:!1}},props:{previewUrl:{default:"",type:String},previewDlPath:{default:"",type:String},light:{default:!1,type:Boolean},readOnly:{default:!1,type:Boolean}},computed:{element:function(){return this.$refs["model-viewer"]},container:function(){return this.$refs.container}},methods:{goFullScreen:function(){Object(o["b"])(this.element)},loadObject:function(){var e=this;this.isLoading=!0,Object(o["c"])(this.scene,this.previewUrl,null,(function(){e.isLoading=!1}))}},mounted:function(){var e=this;setTimeout((function(){e.scene=Object(o["d"])(e.element),e.loadObject()}),100)},watch:{previewUrl:function(){Object(o["a"])(this.scene),this.loadObject()},light:function(){var e=this;Object(o["a"])(this.scene),this.element.innerHTML="",setTimeout((function(){e.scene=Object(o["d"])(e.element),Object(o["c"])(e.scene,e.previewUrl)}),100)}}},c=r,l=(s("9dd8"),s("2877")),d=Object(l["a"])(c,n,i,!1,null,"1506b31e",null);t["a"]=d.exports},"81a0":function(e,t,s){},"826f":function(e,t,s){"use strict";var n=s("c08e"),i=s.n(n);i.a},"82ea":function(e,t,s){},8707:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"playlist-annotation",staticClass:"annotation-bar"},e._l(e.annotations,(function(t,n){return s("span",{key:"annotation-"+n,staticClass:"annotation-mark",style:{left:e.getAnnotationPosition(t)+"px"},on:{click:function(s){return e.$emit("select-annotation",t)}}})})),0)},i=[],a=(s("a9e3"),{name:"annotation-bar",props:{annotations:{default:function(){return[]},type:Array},maxDurationRaw:{default:0,type:Number},width:{default:0,type:Number}},methods:{getAnnotationPosition:function(e){var t=e.time/this.maxDurationRaw,s=this.width,n=this.$parent.progress;if(0===s&&n){var i=n.getBoundingClientRect();s=i.width}var a=s*t-3;return a>=s&&(a-=this.isFullScreen()?9:6),a},isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}}}),o=a,r=(s("3722"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"0696ae30",null);t["a"]=c.exports},8751:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h2",{staticClass:"subtitle"},[e._v(e._s(e.text))])},i=[],a={name:"page-subtitle",props:{text:{default:"",type:String}}},o=a,r=(s("fb36"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"67ee08da",null);t["a"]=c.exports},"89a1":function(e,t,s){},"8a49":function(e,t,s){"use strict";var n=s("c65e"),i=s.n(n);i.a},"8ab4":function(e,t,s){"use strict";var n=s("1dc9"),i=s.n(n);i.a},"8bc7":function(e,t,s){"use strict";var n=s("b4e3"),i=s.n(n);i.a},"8bd9":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{class:{comment:!0,pinned:e.comment.pinned,highlighted:e.highlighted},style:{"border-left":"6px solid "+e.comment.task_status.color}},[n("div",{staticClass:"flexrow"},[n("figure",{staticClass:"flexrow-item comment-left"},[n("people-avatar",{attrs:{person:e.comment.person}}),n("span",{staticClass:"filler"}),"todo"!==e.comment.task_status.short_name?n("span",{staticClass:"task-status-name",style:{color:e.comment.task_status.color}},[e._v(" "+e._s(e.comment.task_status.short_name)+" ")]):e._e()],1),n("div",{staticClass:"flexrow-item comment-content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"comment-person flexrow"},[n("div",{staticClass:"flexrow-item infos"},[n("strong",{},[n("people-name",{attrs:{person:e.comment.person}})],1),n("span",{staticClass:"comment-date"},[e._v(" "+e._s(e.formatDate(e.comment.created_at))+" ")]),!e.light&&e.comment.previews.length>0?n("router-link",{staticClass:"revision",attrs:{to:e.previewRoute}},[e._v(" "+e._s(e.$t("comments.revision"))+" "+e._s(e.comment.previews[0].revision)+" ")]):e._e()],1),n("div",{staticClass:"filler"}),n("div",{staticClass:"flexrow-item menu-wrapper"},[n("chevron-down-icon",{staticClass:"menu-icon",on:{click:e.toggleCommentMenu}}),n("comment-menu",{ref:"menu",attrs:{"is-pinned":e.comment.pinned,"is-editable":e.editable},on:{"pin-clicked":function(t){return e.$emit("pin-comment",e.comment)},"edit-clicked":function(t){e.$emit("edit-comment",e.comment),e.toggleCommentMenu()},"delete-clicked":function(t){e.$emit("delete-comment",e.comment),e.toggleCommentMenu()}}})],1)]),n("div",[e.light&&e.comment.previews.length>0?n("router-link",{staticClass:"revision",attrs:{to:e.previewRoute}},[e._v(" "+e._s(e.$t("comments.revision"))+" "+e._s(e.comment.previews[0].revision)+" ")]):e._e()],1),"Done"===e.comment.task_status.name?n("p",[n("span",{style:{color:e.comment.task_status.color}},[e._v(" "+e._s(e.$t("comments.validated"))+" ")])]):e._e(),e.taskStatus.is_done&&e.isLast?n("p",[n("img",{attrs:{src:s("ce80")}})]):e._e(),"client"===e.personMap[e.comment.person_id].role?n("p",[n("span",{staticClass:"client-comment"},[e._v(" "+e._s(e.$t("comments.comment_from_client"))+" ")])]):e._e(),e.comment.text?n("p",{staticClass:"comment-text",domProps:{innerHTML:e._s(e.renderComment(e.comment.text,e.comment.mentions,e.personMap))}}):n("p",{staticClass:"comment-text empty word-break"},[e._v(" "+e._s(e.$t("comments.empty_text"))+" ")]),e.checklist.length>0?n("div",e._l(e.checklist,(function(t,s){return n("div",{key:"comment-checklist-"+e.comment.id+"-"+s,class:{"checklist-entry":!0,flexrow:!0,checked:t.checked}},[n("span",{staticClass:"flexrow-item",on:{click:function(s){return e.toggleEntryChecked(t)}}},[t.checked?n("check-square-icon",{staticClass:"icon"}):n("square-icon",{staticClass:"icon"})],1),n("textarea-autosize",{ref:"checklist-entry-"+s,refInFor:!0,staticClass:"checklist-text flexrow-item",attrs:{type:"text",rows:"1",disabled:!e.isChangeChecklistAllowed},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addChecklistEntry(s,t))},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"backspace",void 0,t.key,void 0)?null:e.removeChecklistEntry(s)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.focusPrevious(s)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.focusNext(s)},function(t){return e.emitChangeEvent(t)}]},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"entry.text"}})],1)})),0):e._e(),e.comment.pinned?n("p",{staticClass:"pinned-text"},[e._v(" "+e._s(e.$t("comments.pinned"))+" ")]):e._e()])])]),e.isAddChecklistAllowed?n("div",{staticClass:"has-text-centered add-checklist",on:{click:function(t){return e.addChecklistEntry(-1)}}},[e._v(" "+e._s(e.$t("comments.add_checklist"))+" ")]):e._e()])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("498a"),s("159b"),s("ade3")),o=s("2909"),r=s("2f62"),c=s("3657"),l=s("66be"),d=s("66e7"),u=s("0a35"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"main",staticClass:"comment-menu hidden"},[s("div",{on:{click:e.onPinClicked}},[e.isPinned?s("span",[e._v(" "+e._s(e.$t("comments.unpin"))+" ")]):s("span",[e._v(e._s(e.$t("comments.pin")))])]),e.isEditable?s("div",{on:{click:function(t){return e.$emit("edit-clicked")}}},[e._v(" "+e._s(e.$t("main.edit"))+" ")]):e._e(),e.isEditable?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-clicked")}}},[e._v(" "+e._s(e.$t("main.delete"))+" ")]):e._e()])},h=[];function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var b={name:"comment-menu",props:{isPinned:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1},isEditable:{type:Boolean,default:!0}},data:function(){return{}},computed:m({},Object(r["c"])([])),methods:m({},Object(r["b"])([]),{toggle:function(){var e=this.$refs.main;"comment-menu"===e.className?e.className="comment-menu hidden":e.className="comment-menu"},onPinClicked:function(){this.$emit("pin-clicked"),this.toggle()}})},_=b,v=(s("49b6e"),s("2877")),y=Object(v["a"])(_,p,h,!1,null,"762a3f7a",null),g=y.exports,k=s("eb8c"),w=s("0073");function S(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var C={name:"comment",components:{CheckSquareIcon:u["d"],ChevronDownIcon:u["e"],CommentMenu:g,PeopleAvatar:k["a"],PeopleName:w["a"],SquareIcon:u["I"]},data:function(){return{checklist:[]}},props:{comment:{type:Object,default:function(){}},highlighted:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},light:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},mounted:function(){this.comment.checklist&&(this.checklist=Object(o["a"])(this.comment.checklist))},computed:O({},Object(r["c"])(["currentProduction","user","personMap","taskMap","taskTypeMap","taskStatusMap"]),{previewRoute:function(){var e={name:"task",params:{task_id:this.comment.object_id,production_id:this.currentProduction.id}};this.comment.previews.length>0&&(e={name:"task-preview",params:{task_id:this.comment.object_id,preview_id:this.comment.previews[0].id,production_id:this.currentProduction.id}}),this.$route.params.episode_id&&(e.name="episode-".concat(e.name),e.params.episode_id=this.$route.params.episode_id);var t=this.taskMap[this.comment.object_id],s=this.taskTypeMap[t.task_type_id];return e.params.type=s.for_shots?"shots":"assets",e},deleteCommentPath:function(){return this.getPath("task-delete-comment")},editCommentPath:function(){return this.getPath("task-edit-comment")},addPreviewPath:function(){return this.getPath("task-add-preview")},taskStatus:function(){var e=this.taskStatusMap[this.comment.task_status.id];return e||this.comment.task_status},isAddChecklistAllowed:function(){return this.taskStatus.is_retake&&0===this.checklist.length&&this.user.id===this.comment.person_id},isChangeChecklistAllowed:function(){return this.taskStatus.is_retake&&this.user.id===this.comment.person_id}}),methods:{formatDate:function(e){return Object(c["a"])(e)},getPath:function(e){var t={name:e,params:{task_id:this.comment.object_id,comment_id:this.comment.id}};return this.$route.params.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=this.$route.params.episode_id),t},toggleCommentMenu:function(){this.$refs.menu.toggle()},addChecklistEntry:function(e,t){var s=this;t&&(this.checklist[e].text=this.checklist[e].text.trim()),-1!==e&&e!==this.checklist.length-1||this.checklist.push({text:"",checked:!1}),this.$nextTick((function(){s.focusNext(e)}))},removeChecklistEntry:function(e){var t=this.checklist[e];0===t.text.length&&(this.checklist=Object(d["d"])(this.checklist,t),this.focusPrevious(e))},toggleEntryChecked:function(e){e.checked=!e.checked,this.emitChangeEvent()},focusPrevious:function(e){if(this.checklist.length>0){0===e&&(e=this.checklist.length),e--;var t="checklist-entry-".concat(e);this.$refs[t][0].$el.focus()}},focusNext:function(e){if(this.checklist.length>0){e===this.checklist.length-1&&(e=-1),e++;var t="checklist-entry-".concat(e);this.$refs[t][0].$el.focus()}},emitChangeEvent:function(e){var t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>1e3&&(this.lastCall=t,this.$emit("checklist-updated",this.comment,this.checklist.filter((function(e){return e.text&&e.text.length>0}))))},renderComment:l["b"]},watch:{checklist:function(){this.emitChangeEvent()}}},T=C,P=(s("a6ed"),Object(v["a"])(T,n,i,!1,null,"e0921d02",null));t["a"]=P.exports},"8c30":function(e,t,s){},"8c97":function(e,t,s){"use strict";s.d(t,"b",(function(){return n}));s("fb6a"),s("4d63"),s("ac1f"),s("25f0"),s("466d"),s("4d90"),s("5319");t["a"]={generateNextName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=e.match(/\d+$/);if(s){var n=s[0],i=e.substring(0,e.length-n.length),a=parseInt(n);return 1===a&&10===t?a=10:a+=t,i+String(a).padStart(n.length,"0")}return""},shortenText:function(e,t){var s=e||"";return void 0!==e&&e.length>t&&(s=e.slice(0,t)+"...",s=s.replace(/\n/g," ")),s}};var n=function(e){e=e.replace(/^\s+|\s+$/g,"").toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:",s="aaaaeeeeiiiioooouuuunc------",n=0,i=t.length;n<i;n++)e=e.replace(new RegExp(t.charAt(n),"g"),s.charAt(n));return e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"_").replace(/-+/g,"_")}},"8cde":function(e,t,s){},"8d07":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",{staticClass:"title hide-small-screen"},[e._v(e._s(e.text))])},i=[],a={name:"page-title",props:{text:{default:"",type:String}}},o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"ead134bc",null);t["a"]=c.exports},"8d1e":function(e,t,s){"use strict";var n=s("a525"),i=s.n(n);i.a},"8dc7":function(e,t,s){"use strict";var n=s("96e5"),i=s.n(n);i.a},"8f49":function(e,t,s){"use strict";var n=s("a27b"),i=s.n(n);i.a},"90f5":function(e,t,s){"use strict";var n=s("71b7"),i=s.n(n);i.a},9224:function(e){e.exports=JSON.parse('{"a":"0.11.28"}')},9247:function(e,t,s){},"95de":function(e,t,s){"use strict";var n=s("8c30"),i=s.n(n);i.a},"96e5":function(e,t,s){},"984b":function(e,t,s){"use strict";var n=s("81a0"),i=s.n(n);i.a},9856:function(e,t,s){"use strict";var n=s("3dcc"),i=s.n(n);i.a},9877:function(e,t,s){},"992f":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0,"is-top":this.isTop}},[s("select",{ref:"select",class:{thin:e.thin,"select-input":!0,error:this.error},attrs:{disabled:e.disabled},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,n){return s("option",{key:n+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v(" "+e._s(e.getOptionLabel(t))+" ")])})),0)])])])},i=[],a={name:"combobox",props:{label:{default:"",type:String},value:{default:"",type:String},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isTop:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},error:{default:!1,type:Boolean},thin:{default:!1,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",this.$refs.select.value)},emitEnter:function(){this.$emit("enter",this.$refs.select.value)},getOptionLabel:function(e){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+e.label.toLowerCase()):e.label}}},o=a,r=(s("9d3e"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"22bd4a2c",null);t["a"]=c.exports},"99e1":function(e,t,s){"use strict";var n=s("64b6"),i=s.n(n);i.a},"9bb3":function(e,t,s){"use strict";var n=s("3fac"),i=s.n(n);i.a},"9c0c":function(e,t,s){},"9d3e":function(e,t,s){"use strict";var n=s("7daf"),i=s.n(n);i.a},"9d8b":function(e,t,s){"use strict";s.d(t,"e",(function(){return n})),s.d(t,"d",(function(){return i})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return r})),s.d(t,"f",(function(){return l})),s.d(t,"c",(function(){return d}));s("b0c0");var n=function(e,t,s,n,i){var a=e.project_id?e.project_id:t.id,o={name:"task",params:{production_id:a,task_id:e.id}};s&&n&&(o.name="episode-task",o.params.episode_id=e.episode_id||n.id);var r=i[e.task_type_id];return o.params.type=r.for_shots?"shots":"assets",o},i=function(e,t){if(e){var s=e.entity_type_name,n=e.entity?e.entity.id:e.entity_id,i={name:"Shot"===s?"shot":"asset",params:{production_id:e.project_id}};return"Shot"===s?i.params.shot_id=n:i.params.asset_id=n,t&&(i.name="episode-".concat(i.name),i.params.episode_id=t),i}return{name:"open-productions"}},a=function(e,t){return{name:e,params:{production_id:t}}},o=function(e,t){return t&&(e.name="episode-".concat(e.name),e.params.episode_id=t),e},r=function(e,t,s,n){var i={name:n?"".concat(n,"-playlist"):"playlist",params:{production_id:e,playlist_id:s}};return o(i,t)},c=function(e,t,s){return o(a(e,t),s)},l=function(e,t,s,n){var i=c("task-type-schedule",t,s);return i.params.task_type_id=e,i.params.type=n,i},d=function(e){return a("schedule",e)}},"9d94":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.task?s("div",{ref:"side-panel",staticClass:"side task-info",style:e.panelStyle},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"flexrow header-title"},[s("div",{staticClass:"title flexrow-item"},[s("router-link",{attrs:{to:e.taskEntityPath}},[e._v(" "+e._s(e.task?e.title:"Loading...")+" ")])],1),e.currentTaskType?s("task-type-name",{staticClass:"flexrow-item task-type",attrs:{"task-type":e.currentTaskType,"production-id":e.currentProduction.id}}):e._e()],1),s("div",{staticClass:"flexrow task-information"},[e.isWide&&e.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"right",title:e.$t("tasks.bigger")},on:{click:e.toggleWidth}}):e.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"left",title:e.$t("tasks.bigger")},on:{click:e.toggleWidth}}):e._e(),e.isCurrentUserManager&&e.isPreview?s("button-simple",{staticClass:"flexrow-item set-thumbnail-button",attrs:{icon:"image",disabled:!e.isSetThumbnailAllowed,title:e.$t("tasks.set_preview")},on:{click:e.setCurrentPreviewAsEntityThumbnail}}):e._e(),e.isAssigned?e._e():s("subscribe-button",{staticClass:"flexrow-item",attrs:{subscribed:e.isAssigned||e.isSubscribed},on:{click:e.toggleSubscribe}}),s("validation-tag",{staticClass:"is-medium flexrow-item",attrs:{task:e.task,"is-static":!0}}),s("div",{staticClass:"filler"}),e.isPreview?s("div",{staticClass:"preview-list flexrow"},[e._l(e.lastFivePreviews,(function(t,n){return s("span",{key:"preview-"+t.revision,class:{"flexrow-item":!0,selected:e.currentPreviewIndex===n},on:{click:function(t){return e.onPreviewChanged(n)}}},[e._v(" "+e._s(t.revision)+" ")])})),s("router-link",{staticClass:"history-button flexrow-item",attrs:{to:e.taskPath}},[e._v(" ... ")])],2):e._e()],1)]),s("div",{ref:"task-columns",staticClass:"task-columns"},[e.isPreview?s("div",{staticClass:"task-column preview-column"},[s("div",{staticClass:"preview-column-content"},[s("div",{staticClass:"preview"},[s("div",{staticClass:"preview-picture"},[e.isMoviePreview?s("div",[s("video-player",{ref:"preview-movie",attrs:{preview:e.currentPreview,"entity-preview-files":e.taskEntityPreviews,"last-preview-files":e.lastFiveMoviePreviews,"task-type-map":e.taskTypeMap,light:!e.isWide},on:{annotationchanged:e.onAnnotationChanged,"change-current-preview":e.changeCurrentPreview}})],1):e.isStandardPreview?s("div",{staticClass:"preview-standard-file"},[s("a",{ref:"preview-file",staticClass:"button",attrs:{href:e.currentPreviewDlPath}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[e._v(" "+e._s(e.$t("tasks.download_pdf_file",{extension:e.extension}))+" ")])],1)]):e.is3DModelPreview?s("model-viewer",{staticClass:"model-viewer",attrs:{"preview-url":e.currentPreviewPath,"preview-dl-path":e.currentPreviewDlPath,light:!e.isWide}}):e.isPicturePreview?s("picture-viewer",{ref:"preview-picture",attrs:{preview:e.currentPreview,light:!e.isWide},on:{"annotation-changed":e.onAnnotationChanged,"add-preview":e.onAddExtraPreview,"remove-extra-preview":e.onRemoveExtraPreview}}):e._e(),e.taskPreviews&&0!==e.taskPreviews.length?e._e():s("div",{staticClass:"no-preview"},[s("em",[e._v(e._s(e.$t("tasks.no_preview")))])])],1)])])]):e._e(),s("div",{staticClass:"task-column comments-column"},[s("div",[s("div",[e.isCommentingAllowed?s("add-comment",{ref:"add-comment",attrs:{user:e.user,team:e.currentTeam,task:e.task,"task-status":e.taskStatusForCurrentUser,light:!0,"is-loading":e.loading.addComment,"attached-file-name":e.attachedFileName,"is-error":e.errors.addComment},on:{"add-comment":e.addComment,"add-preview":e.onAddPreviewClicked,"file-drop":e.selectFile}}):e._e(),e.taskComments.length>0&&!e.loading.task?s("div",{staticClass:"comments"},e._l(e.taskComments,(function(t,n){return s("comment",{key:"comment"+t.id,attrs:{comment:t,light:!0,"add-preview":e.onAddPreviewClicked,"is-last":n===e.pinnedCount,editable:t.person&&e.user.id===t.person.id},on:{"pin-comment":e.onPinComment,"edit-comment":e.onEditComment,"delete-comment":e.onDeleteComment,"checklist-updated":e.saveComment}})})),1):e.loading.task?e._e():s("div",{staticClass:"no-comment"},[s("em",[e._v(" "+e._s(e.$t("tasks.no_comment"))+" ")])])],1)]),e.loading.task?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e._e()])]),s("add-preview-modal",{ref:"add-preview-modal",attrs:{active:e.modals.addPreview,"is-loading":e.loading.addPreview,"is-error":e.errors.addPreview},on:{cancel:e.onClosePreview,fileselected:e.selectFile,confirm:e.onClosePreview}}),s("add-preview-modal",{ref:"add-extra-preview-modal",attrs:{active:e.modals.addExtraPreview,"is-loading":e.loading.addExtraPreview,"is-error":e.errors.addExtraPreview,"form-data":e.addExtraPreviewFormData,extensions:".png,.jpg,.jpeg"},on:{cancel:e.onCloseExtraPreview,fileselected:e.selectFile,confirm:e.createExtraPreview}}),s("edit-comment-modal",{attrs:{active:e.modals.editComment,"is-loading":e.loading.editComment,"is-error":e.errors.editComment,"comment-to-edit":e.commentToEdit,team:e.currentTeam},on:{confirm:e.confirmEditTaskComment,cancel:e.onCancelEditComment}}),s("delete-modal",{attrs:{active:e.modals.deleteComment,"is-loading":e.loading.deleteComment,"is-error":e.errors.deleteComment,text:e.$t("tasks.delete_comment"),"error-text":e.$t("tasks.delete_comment_error")},on:{confirm:e.confirmDeleteTaskComment,cancel:e.onCancelDeleteComment}}),s("delete-modal",{attrs:{active:e.modals.deleteExtraPreview,"is-loading":e.loading.deleteExtraPreview,"is-error":e.errors.deleteExtraPreview,text:e.$t("tasks.delete_preview"),"error-text":e.$t("tasks.delete_preview_error")},on:{cancel:e.onCancelRemoveExtraPreview,confirm:e.confirmDeleteTaskPreview}})],1):s("div",{staticClass:"side task-info has-text-centered"},[e._v(" "+e._s(e.$t("tasks.no_task_selected"))+" ")])},i=[],a=(s("a4d3"),s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("c975"),s("a15b"),s("d81d"),s("fb6a"),s("45fc"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("0a35"),c=s("9d8b"),l=s("66be"),d=s("6be5"),u=s("ee35"),p=s("de40"),h=s("8bd9"),f=s("5f48"),m=s("5b23"),b=s("8078"),_=s("41e2"),v=s("be83"),y=s("d228"),g=s("274f"),k=s("fe13"),w=s("7d5f");function S(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var C={name:"task-info",components:{AddComment:d["a"],AddPreviewModal:u["a"],ButtonSimple:p["a"],Comment:h["a"],DownloadIcon:r["m"],DeleteModal:f["a"],EditCommentModal:m["a"],ModelViewer:b["a"],PictureViewer:_["a"],Spinner:v["a"],SubscribeButton:y["a"],TaskTypeName:g["a"],ValidationTag:k["a"],VideoPlayer:w["a"]},props:{task:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!0},isPreview:{type:Boolean,default:!0}},data:function(){return{addExtraPreviewFormData:null,attachedFileName:"",currentPreviewIndex:0,currentPreviewPath:"",currentPreviewDlPath:"",commentToEdit:null,isSubscribed:!1,isWide:!1,otherPreviews:[],taskComments:[],taskPreviews:[],errors:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,confirmDeleteTaskPreview:!1,task:!1},loading:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,confirmDeleteTaskPreview:!1,task:!1},modals:{addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,deleteExtraPreview:!1}}},mounted:function(){this.loadTaskData(),this.$refs["add-comment"]&&(this.$refs["add-comment"].text=this.lastCommentDraft)},beforeDestroy:function(){if(this.$refs["add-comment"]){var e="".concat(this.$refs["add-comment"].text);this.$store.commit("SET_LAST_COMMENT_DRAFT",e)}},computed:O({},Object(o["c"])(["currentEpisode","currentProduction","getTaskComment","getTaskComments","getTaskPreviews","isCurrentUserClient","isCurrentUserManager","isSingleEpisode","isTVShow","lastCommentDraft","personMap","previewFormData","productionMap","taskEntityPreviews","taskStatusForCurrentUser","taskTypeMap","user"]),{currentTeam:function(){var e=this,t=this.productionMap[this.task.project_id];return t.team.map((function(t){return e.personMap[t]}))},title:function(){if(this.task){var e=this.task.full_entity_name||this.task.entity_name;return"".concat(e)}return"Loading..."},isAssigned:function(){var e=this;return!!this.task&&this.task.assignees.some((function(t){return t===e.user.id}))},isCommentingAllowed:function(){var e=this,t=this.isCurrentUserManager,s=this.task.assignees.find((function(t){return t===e.user.id})),n=this.$route.path.indexOf("playlist")>0&&this.isCurrentUserClient;return t||s||n},isSetThumbnailAllowed:function(){return this.currentPreviewId&&this.task&&this.task.entity&&this.currentPreviewId!==this.task.entity.preview_file_id},currentTaskType:function(){return this.task?this.taskTypeMap[this.task.task_type_id]:null},currentPreview:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[e]:null},currentPreviewId:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0&&this.taskPreviews[e]?this.taskPreviews[e].id:null},extension:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[e].extension:""},isStandardPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&["ai","blend","ma","mb","pdf","psd","rar","gif","ae","fla","flv","swf","zip"].includes(this.extension)},isMoviePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"mp4"===this.extension},isPicturePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"png"===this.extension},is3DModelPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"obj"===this.extension},moviePath:function(){var e=null;return e=this.currentPreview.id,"/api/movies/originals/preview-files/".concat(e,".mp4")},tasktypeStyle:function(){return Object(l["a"])(this.task)},taskPath:function(){return Object(c["e"])(this.task,this.currentProduction,this.isTVShow,this.currentEpisode,this.taskTypeMap)},taskEntityPath:function(){var e=this.$route.params.episode_id;return Object(c["d"])(this.task,e)},lastFivePreviews:function(){return this.taskPreviews?this.taskPreviews.slice(0,5):[]},lastFiveMoviePreviews:function(){if(this.taskPreviews){var e=function(e){return"mp4"===e.extension};return this.taskPreviews.filter(e).slice(0,5)}return[]},panelStyle:function(){return{width:this.isWide?700:350}},pinnedCount:function(){return this.taskComments?this.taskComments.filter((function(e){return e.pinned})).length:0}}),methods:O({},Object(o["b"])(["addCommentExtraPreview","commentTask","commentTaskWithPreview","deleteTaskComment","deleteTaskPreview","editTaskComment","loadPreviewFileFormData","loadTask","loadTaskComments","loadTaskSubscribed","refreshPreview","pinComment","setPreview","subscribeToTask","unsubscribeFromTask","updatePreviewAnnotation"]),{loadTaskData:function(){var e=this;this.task&&(this.loading.task=!0,this.errors.task=!1,console.log("loading"),this.loadTaskComments({taskId:this.task.id,entityId:this.task.entity_id,callback:function(t){console.log("loading end"),t?(console.error(t),e.errors.task=!0):e.loadTaskSubscribed({taskId:e.task.id,callback:function(t,s){t&&console.error(t),e.loading.task=!1,e.reset(),e.isSubscribed=s}})}}))},addComment:function(e,t){var s=this,n={taskId:this.task.id,taskStatusId:t,commentText:e,comment:e},i="commentTask";this.attachedFileName&&(i="commentTaskWithPreview"),this.loading.addComment=!0,this.errors.addComment=!1,this.$store.dispatch(i,n).then((function(){s.$refs["add-preview-modal"].reset(),s.reset(),s.attachedFileName="",s.loading.addComment=!1})).catch((function(e){console.error(e),s.errors.addComment=!0,s.loading.addComment=!1}))},reset:function(){var e=this;this.task&&(this.taskComments=this.getTaskComments(this.task.id),this.taskPreviews=this.getTaskPreviews(this.task.id),this.setOtherPreviews(),this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath(),this.$nextTick((function(){e.$refs["add-comment"]&&e.$refs["add-comment"].focus()})))},focusCommentTextarea:function(){this.$refs["add-comment"]&&this.$refs["add-comment"].focus()},getOriginalPath:function(){var e=this.currentPreviewId,t=this.extension?this.extension:"png";return"/api/pictures/originals/preview-files/".concat(e,".").concat(t)},getOriginalDlPath:function(){var e=this.currentPreviewId;return"/api/pictures/originals/preview-files/".concat(e,"/download")},setOtherPreviews:function(){var e=this;return this.taskPreviews&&(this.otherPreviews=this.taskPreviews.filter((function(t){return t.id!==e.currentPreviewId&&"mp4"===t.extension}))),this.otherPreviews},selectFile:function(e){this.loadPreviewFileFormData(e),this.attachedFileName=e.map((function(e){return e.get("file").name})).join(", ")},createExtraPreview:function(){var e=this,t=this.currentPreviewIndex;this.errors.addExtraPreview=!1,this.loading.addExtraPreview=!0,this.addCommentExtraPreview({taskId:this.task.id,commentId:this.taskComments[0].id,previewId:this.taskPreviews[t].id}).then((function(){e.loading.addExtraPreview=!1,e.$refs["add-extra-preview-modal"].reset(),e.reset(),setTimeout((function(){e.$refs["preview-picture"].displayLast()}),0),e.modals.addExtraPreview=!1})).catch((function(t){console.error(t),e.loading.addExtraPreview=!1,e.errors.addExtraPreview=!0}))},onPreviewAdded:function(e){var t=e.task_id,s=e.comment_id,n=e.preview_file_id,i=e.revision,a=e.extension,o=this.$store.getters.getTaskComment(t,s);!o||0!==o.previews.length&&o.previews[0].id===n||t!==this.task.id||(this.$store.commit("ADD_PREVIEW_END",{preview:{id:n,revision:i,extension:a},taskId:t,commentId:s,comment:o}),this.reset())},onAnnotationChanged:function(e){var t=e.preview,s=e.annotations,n=this.task.id;this.updatePreviewAnnotation({taskId:n,preview:t,annotations:s})},onAddPreviewClicked:function(e){this.modals.addPreview=!0},onAddExtraPreview:function(){this.modals.addExtraPreview=!0},onRemoveExtraPreview:function(e){this.currentExtraPreviewId=e.id,this.modals.deleteExtraPreview=!0},onCancelRemoveExtraPreview:function(){this.modals.deleteExtraPreview=!1},onClosePreview:function(){this.modals.addPreview=!1},onCloseExtraPreview:function(){this.modals.addExtraPreview=!1},onPreviewChanged:function(e){this.currentPreviewIndex=e,this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath()},changeCurrentPreview:function(e){var t=this.taskPreviews.findIndex((function(t){return t.id===e.id}));(t||0===t)&&(this.currentPreviewIndex=t,this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath())},setCurrentPreviewAsEntityThumbnail:function(){this.setPreview({taskId:this.task.id,entityId:this.task.entity.id,previewId:this.currentPreviewId,callback:function(){}})},toggleSubscribe:function(){this.task&&!this.isAssigned&&(this.isSubscribed?(this.unsubscribeFromTask(this.task.id),this.isSubscribed=!1):(this.subscribeToTask(this.task.id),this.isSubscribed=!0))},toggleWidth:function(){this.isWide=!this.isWide;var e=this.$refs["side-panel"];this.isWide?e.parentElement.style["min-width"]="700px":e.parentElement.style["min-width"]="350px"},onPinComment:function(e){this.pinComment(e)},onEditComment:function(e){this.commentToEdit=e,this.modals.editComment=!0},onDeleteComment:function(e){this.commentToEdit=e,this.modals.deleteComment=!0},onCancelEditComment:function(e){this.modals.editComment=!1},onCancelDeleteComment:function(e){this.modals.deleteComment=!1},saveComment:function(e,t){this.editTaskComment({taskId:this.task.id,comment:e,checklist:t})},confirmDeleteTaskComment:function(){var e=this;this.loading.deleteComment=!0,this.errors.deleteComment=!1;var t=this.commentToEdit.id;this.deleteTaskComment({taskId:this.task.id,commentId:t,callback:function(t){e.loading.deleteComment=!1,t?e.errors.deleteComment=!0:(e.reset(),e.modals.deleteComment=!1)}})},confirmEditTaskComment:function(e){var t=this;this.loading.editComment=!0,this.errors.editComment=!1,this.editTaskComment({taskId:this.task.id,comment:e,callback:function(e){t.loading.editComment=!1,e?t.errors.editComment=!0:t.modals.editComment=!1}})},getCurrentTaskComments:function(){return this.getTaskComments(this.task.id)},confirmDeleteTaskPreview:function(){var e=this;this.loading.deleteExtraPreview=!0,this.errors.deleteExtraPreview=!1;var t=this.currentExtraPreviewId,s=this.getCurrentTaskComments().find((function(e){return e.previews.findIndex((function(e){return e.id===t}))>=0}));this.$refs["preview-picture"].displayFirst(),this.deleteTaskPreview({taskId:this.task.id,commentId:s.id,previewId:t}).then((function(){e.loading.deleteExtraPreview=!1,e.modals.deleteExtraPreview=!1})).catch((function(t){console.error(t),e.loading.deleteExtraPreview=!1,e.errors.deleteExtraPreview=!0}))}}),watch:{task:function(){this.attachedFileName="",this.currentPreviewIndex=0,console.log("load comments"),this.loadTaskData()},isLoading:function(){this.task.loading=this.isLoading}},socket:{events:{"preview-file:add-file":function(e){this.onPreviewAdded(e)},"preview-file:update":function(e){var t=this,s=this.taskPreviews.filter((function(t){return t.id===e.preview_file_id}));s&&this.refreshPreview({taskId:this.task.id,previewId:e.preview_file_id}).then((function(){t.$refs["preview-movie"]?t.$refs["preview-movie"].isDrawing||t.$refs["preview-movie"].reloadAnnotations():t.$refs["preview-picture"]&&(t.$refs["preview-picture"].isDrawing||t.$refs["preview-picture"].reset())}))}}}},T=C,P=(s("f8cc"),s("2877")),E=Object(P["a"])(T,n,i,!1,null,"f660718e",null);t["a"]=E.exports},"9dc2":function(e,t,s){"use strict";var n=s("cf00"),i=s.n(n);i.a},"9dd8":function(e,t,s){"use strict";var n=s("b5a1"),i=s.n(n);i.a},"9ea6":function(e,t,s){"use strict";var n=s("74bf"),i=s.n(n);i.a},"9f45":function(e,t,s){"use strict";var n=s("d5ed"),i=s.n(n);i.a},"9fb0":function(e,t,s){"use strict";s.d(t,"tf",(function(){return n})),s.d(t,"uf",(function(){return i})),s.d(t,"vf",(function(){return a})),s.d(t,"af",(function(){return o})),s.d(t,"Zc",(function(){return r})),s.d(t,"Xc",(function(){return c})),s.d(t,"Yc",(function(){return l})),s.d(t,"Td",(function(){return d})),s.d(t,"qf",(function(){return u})),s.d(t,"yc",(function(){return p})),s.d(t,"fe",(function(){return h})),s.d(t,"Dc",(function(){return f})),s.d(t,"Bc",(function(){return m})),s.d(t,"Cc",(function(){return b})),s.d(t,"ob",(function(){return _})),s.d(t,"mb",(function(){return v})),s.d(t,"nb",(function(){return y})),s.d(t,"of",(function(){return g})),s.d(t,"wc",(function(){return k})),s.d(t,"bc",(function(){return w})),s.d(t,"Zb",(function(){return S})),s.d(t,"ac",(function(){return O})),s.d(t,"pf",(function(){return C})),s.d(t,"xc",(function(){return T})),s.d(t,"bd",(function(){return P})),s.d(t,"ad",(function(){return E})),s.d(t,"df",(function(){return j})),s.d(t,"Ke",(function(){return x})),s.d(t,"se",(function(){return D})),s.d(t,"kf",(function(){return A})),s.d(t,"ee",(function(){return M})),s.d(t,"ge",(function(){return L})),s.d(t,"cf",(function(){return I})),s.d(t,"de",(function(){return $})),s.d(t,"bf",(function(){return q})),s.d(t,"Tf",(function(){return F})),s.d(t,"Sf",(function(){return N})),s.d(t,"Uf",(function(){return R})),s.d(t,"G",(function(){return B})),s.d(t,"Ff",(function(){return z})),s.d(t,"Hf",(function(){return V})),s.d(t,"Gf",(function(){return U})),s.d(t,"If",(function(){return H})),s.d(t,"Jf",(function(){return Y})),s.d(t,"Mf",(function(){return W})),s.d(t,"Of",(function(){return G})),s.d(t,"Nf",(function(){return K})),s.d(t,"Kf",(function(){return Q})),s.d(t,"Lf",(function(){return J})),s.d(t,"lf",(function(){return X})),s.d(t,"Gd",(function(){return Z})),s.d(t,"Hd",(function(){return ee})),s.d(t,"mf",(function(){return te})),s.d(t,"xd",(function(){return se})),s.d(t,"ae",(function(){return ne})),s.d(t,"be",(function(){return ie})),s.d(t,"pc",(function(){return ae})),s.d(t,"oc",(function(){return oe})),s.d(t,"wd",(function(){return re})),s.d(t,"yd",(function(){return ce})),s.d(t,"W",(function(){return le})),s.d(t,"Bb",(function(){return de})),s.d(t,"Sb",(function(){return ue})),s.d(t,"fb",(function(){return pe})),s.d(t,"he",(function(){return he})),s.d(t,"ie",(function(){return fe})),s.d(t,"j",(function(){return me})),s.d(t,"i",(function(){return be})),s.d(t,"sb",(function(){return _e})),s.d(t,"M",(function(){return ve})),s.d(t,"Bf",(function(){return ye})),s.d(t,"m",(function(){return ge})),s.d(t,"n",(function(){return ke})),s.d(t,"ue",(function(){return we})),s.d(t,"R",(function(){return Se})),s.d(t,"r",(function(){return Oe})),s.d(t,"wf",(function(){return Ce})),s.d(t,"Ne",(function(){return Te})),s.d(t,"ze",(function(){return Pe})),s.d(t,"yf",(function(){return Ee})),s.d(t,"Ze",(function(){return je})),s.d(t,"qe",(function(){return xe})),s.d(t,"kd",(function(){return De})),s.d(t,"id",(function(){return Ae})),s.d(t,"jd",(function(){return Me})),s.d(t,"l",(function(){return Le})),s.d(t,"Cf",(function(){return Ie})),s.d(t,"te",(function(){return $e})),s.d(t,"Wc",(function(){return qe})),s.d(t,"Uc",(function(){return Fe})),s.d(t,"Vc",(function(){return Ne})),s.d(t,"nd",(function(){return Re})),s.d(t,"ld",(function(){return Be})),s.d(t,"md",(function(){return ze})),s.d(t,"hc",(function(){return Ve})),s.d(t,"fc",(function(){return Ue})),s.d(t,"gc",(function(){return He})),s.d(t,"vb",(function(){return Ye})),s.d(t,"tb",(function(){return We})),s.d(t,"ub",(function(){return Ge})),s.d(t,"Te",(function(){return Ke})),s.d(t,"ke",(function(){return Qe})),s.d(t,"je",(function(){return Je})),s.d(t,"rf",(function(){return Xe})),s.d(t,"sf",(function(){return Ze})),s.d(t,"e",(function(){return et})),s.d(t,"Af",(function(){return tt})),s.d(t,"lb",(function(){return st})),s.d(t,"Fd",(function(){return nt})),s.d(t,"Dd",(function(){return it})),s.d(t,"Ed",(function(){return at})),s.d(t,"vc",(function(){return ot})),s.d(t,"tc",(function(){return rt})),s.d(t,"uc",(function(){return ct})),s.d(t,"Hb",(function(){return lt})),s.d(t,"Fb",(function(){return dt})),s.d(t,"Gb",(function(){return ut})),s.d(t,"Bd",(function(){return pt})),s.d(t,"zd",(function(){return ht})),s.d(t,"Ad",(function(){return ft})),s.d(t,"sc",(function(){return mt})),s.d(t,"qc",(function(){return bt})),s.d(t,"rc",(function(){return _t})),s.d(t,"Eb",(function(){return vt})),s.d(t,"Cb",(function(){return yt})),s.d(t,"Db",(function(){return gt})),s.d(t,"Pc",(function(){return kt})),s.d(t,"Nc",(function(){return wt})),s.d(t,"Oc",(function(){return St})),s.d(t,"Vb",(function(){return Ot})),s.d(t,"Tb",(function(){return Ct})),s.d(t,"Ub",(function(){return Tt})),s.d(t,"ib",(function(){return Pt})),s.d(t,"gb",(function(){return Et})),s.d(t,"hb",(function(){return jt})),s.d(t,"Mc",(function(){return xt})),s.d(t,"Kc",(function(){return Dt})),s.d(t,"Lc",(function(){return At})),s.d(t,"Rb",(function(){return Mt})),s.d(t,"Pb",(function(){return Lt})),s.d(t,"Qb",(function(){return It})),s.d(t,"eb",(function(){return $t})),s.d(t,"cb",(function(){return qt})),s.d(t,"db",(function(){return Ft})),s.d(t,"Pe",(function(){return Nt})),s.d(t,"ff",(function(){return Rt})),s.d(t,"O",(function(){return Bt})),s.d(t,"Ic",(function(){return zt})),s.d(t,"Gc",(function(){return Vt})),s.d(t,"Hc",(function(){return Ut})),s.d(t,"Jc",(function(){return Ht})),s.d(t,"q",(function(){return Yt})),s.d(t,"Ac",(function(){return Wt})),s.d(t,"zc",(function(){return Gt})),s.d(t,"Ob",(function(){return Kt})),s.d(t,"Mb",(function(){return Qt})),s.d(t,"Nb",(function(){return Jt})),s.d(t,"bb",(function(){return Xt})),s.d(t,"Z",(function(){return Zt})),s.d(t,"ab",(function(){return es})),s.d(t,"Fe",(function(){return ts})),s.d(t,"De",(function(){return ss})),s.d(t,"Ee",(function(){return ns})),s.d(t,"Qe",(function(){return is})),s.d(t,"Je",(function(){return as})),s.d(t,"me",(function(){return os})),s.d(t,"Ib",(function(){return rs})),s.d(t,"T",(function(){return cs})),s.d(t,"Re",(function(){return ls})),s.d(t,"a",(function(){return ds})),s.d(t,"xf",(function(){return us})),s.d(t,"le",(function(){return ps})),s.d(t,"s",(function(){return hs})),s.d(t,"F",(function(){return fs})),s.d(t,"S",(function(){return ms})),s.d(t,"td",(function(){return bs})),s.d(t,"rd",(function(){return _s})),s.d(t,"sd",(function(){return vs})),s.d(t,"od",(function(){return ys})),s.d(t,"Rc",(function(){return gs})),s.d(t,"vd",(function(){return ks})),s.d(t,"ud",(function(){return ws})),s.d(t,"nf",(function(){return Ss})),s.d(t,"Fc",(function(){return Os})),s.d(t,"Ec",(function(){return Cs})),s.d(t,"nc",(function(){return Ts})),s.d(t,"lc",(function(){return Ps})),s.d(t,"mc",(function(){return Es})),s.d(t,"kc",(function(){return js})),s.d(t,"ic",(function(){return xs})),s.d(t,"jc",(function(){return Ds})),s.d(t,"Yb",(function(){return As})),s.d(t,"Wb",(function(){return Ms})),s.d(t,"Xb",(function(){return Ls})),s.d(t,"Zd",(function(){return Is})),s.d(t,"Xd",(function(){return $s})),s.d(t,"Yd",(function(){return qs})),s.d(t,"Wd",(function(){return Fs})),s.d(t,"Ud",(function(){return Ns})),s.d(t,"Vd",(function(){return Rs})),s.d(t,"Sd",(function(){return Bs})),s.d(t,"Qd",(function(){return zs})),s.d(t,"Rd",(function(){return Vs})),s.d(t,"Ab",(function(){return Us})),s.d(t,"yb",(function(){return Hs})),s.d(t,"zb",(function(){return Ys})),s.d(t,"xb",(function(){return Ws})),s.d(t,"wb",(function(){return Gs})),s.d(t,"kb",(function(){return Ks})),s.d(t,"jb",(function(){return Qs})),s.d(t,"Ie",(function(){return Js})),s.d(t,"Ge",(function(){return Xs})),s.d(t,"He",(function(){return Zs})),s.d(t,"c",(function(){return en})),s.d(t,"zf",(function(){return tn})),s.d(t,"pe",(function(){return sn})),s.d(t,"o",(function(){return nn})),s.d(t,"Df",(function(){return an})),s.d(t,"ve",(function(){return on})),s.d(t,"p",(function(){return rn})),s.d(t,"Ef",(function(){return cn})),s.d(t,"xe",(function(){return ln})),s.d(t,"t",(function(){return dn})),s.d(t,"jf",(function(){return un})),s.d(t,"Me",(function(){return pn})),s.d(t,"ye",(function(){return hn})),s.d(t,"hf",(function(){return fn})),s.d(t,"Le",(function(){return mn})),s.d(t,"we",(function(){return bn})),s.d(t,"Ve",(function(){return _n})),s.d(t,"Lb",(function(){return vn})),s.d(t,"Kb",(function(){return yn})),s.d(t,"Jb",(function(){return gn})),s.d(t,"if",(function(){return kn})),s.d(t,"gf",(function(){return wn})),s.d(t,"Ue",(function(){return Sn})),s.d(t,"V",(function(){return On})),s.d(t,"U",(function(){return Cn})),s.d(t,"Se",(function(){return Tn})),s.d(t,"P",(function(){return Pn})),s.d(t,"We",(function(){return En})),s.d(t,"Ce",(function(){return jn})),s.d(t,"Y",(function(){return xn})),s.d(t,"X",(function(){return Dn})),s.d(t,"N",(function(){return An})),s.d(t,"H",(function(){return Mn})),s.d(t,"I",(function(){return Ln})),s.d(t,"Jd",(function(){return In})),s.d(t,"Kd",(function(){return $n})),s.d(t,"Id",(function(){return qn})),s.d(t,"Md",(function(){return Fn})),s.d(t,"Ld",(function(){return Nn})),s.d(t,"Pf",(function(){return Rn})),s.d(t,"Rf",(function(){return Bn})),s.d(t,"Qf",(function(){return zn})),s.d(t,"Oe",(function(){return Vn})),s.d(t,"Ae",(function(){return Un})),s.d(t,"C",(function(){return Hn})),s.d(t,"A",(function(){return Yn})),s.d(t,"z",(function(){return Wn})),s.d(t,"E",(function(){return Gn})),s.d(t,"D",(function(){return Kn})),s.d(t,"y",(function(){return Qn})),s.d(t,"x",(function(){return Jn})),s.d(t,"w",(function(){return Xn})),s.d(t,"u",(function(){return Zn})),s.d(t,"v",(function(){return ei})),s.d(t,"B",(function(){return ti})),s.d(t,"ed",(function(){return si})),s.d(t,"cd",(function(){return ni})),s.d(t,"dd",(function(){return ii})),s.d(t,"hd",(function(){return ai})),s.d(t,"fd",(function(){return oi})),s.d(t,"gd",(function(){return ri})),s.d(t,"ec",(function(){return ci})),s.d(t,"cc",(function(){return li})),s.d(t,"dc",(function(){return di})),s.d(t,"rb",(function(){return ui})),s.d(t,"pb",(function(){return pi})),s.d(t,"qb",(function(){return hi})),s.d(t,"b",(function(){return fi})),s.d(t,"oe",(function(){return mi})),s.d(t,"K",(function(){return bi})),s.d(t,"J",(function(){return _i})),s.d(t,"L",(function(){return vi})),s.d(t,"Qc",(function(){return yi})),s.d(t,"h",(function(){return gi})),s.d(t,"Od",(function(){return ki})),s.d(t,"ne",(function(){return wi})),s.d(t,"Sc",(function(){return Si})),s.d(t,"Tc",(function(){return Oi})),s.d(t,"Nd",(function(){return Ci})),s.d(t,"ce",(function(){return Ti})),s.d(t,"Cd",(function(){return Pi})),s.d(t,"pd",(function(){return Ei})),s.d(t,"qd",(function(){return ji})),s.d(t,"Q",(function(){return xi})),s.d(t,"k",(function(){return Di})),s.d(t,"d",(function(){return Ai})),s.d(t,"Pd",(function(){return Mi})),s.d(t,"ef",(function(){return Li})),s.d(t,"Xe",(function(){return Ii})),s.d(t,"Ye",(function(){return $i})),s.d(t,"Be",(function(){return qi})),s.d(t,"f",(function(){return Fi})),s.d(t,"g",(function(){return Ni})),s.d(t,"re",(function(){return Ri}));var n="TOGGLE_DARK_THEME",i="TOGGLE_SIDEBAR",a="TOGGLE_USER_MENU",o="SET_LAST_PRODUCTION_SCREEN",r="LOAD_PEOPLE_START",c="LOAD_PEOPLE_END",l="LOAD_PEOPLE_ERROR",d="NEW_PEOPLE_END",u="SHOW_IMPORT_PEOPLE_MODAL",p="HIDE_IMPORT_PEOPLE_MODAL",h="PERSON_CSV_FILE_SELECTED",f="IMPORT_PEOPLE_START",m="IMPORT_PEOPLE_END",b="IMPORT_PEOPLE_ERROR",_="DELETE_PEOPLE_START",v="DELETE_PEOPLE_END",y="DELETE_PEOPLE_ERROR",g="SHOW_DELETE_PEOPLE_MODAL",k="HIDE_DELETE_PEOPLE_MODAL",w="EDIT_PEOPLE_START",S="EDIT_PEOPLE_END",O="EDIT_PEOPLE_ERROR",C="SHOW_EDIT_PEOPLE_MODAL",T="HIDE_EDIT_PEOPLE_MODAL",P="LOAD_PERSON_TASKS_END",E="LOAD_PERSON_DONE_TASKS_END",j="SET_PERSON_TASKS_SEARCH",x="SAVE_PERSON_TASKS_SEARCH_END",D="REMOVE_PERSON_TASKS_SEARCH_END",A="SET_TIME_SPENT",M="PEOPLE_TIMESHEET_LOADED",L="PERSON_LOAD_TIME_SPENTS_END",I="SET_PERSON_TASKS_SCROLL_POSITION",$="PEOPLE_SEARCH_CHANGE",q="SET_ORGANISATION",F="USER_SAVE_PROFILE_LOADING",N="USER_SAVE_PROFILE_ERROR",R="USER_SAVE_PROFILE_SUCCESS",B="CHANGE_AVATAR_FILE",z="UPLOAD_AVATAR_END",V="USER_CHANGE_PASSWORD_LOADING",U="USER_CHANGE_PASSWORD_ERROR",H="USER_CHANGE_PASSWORD_SUCCESS",Y="USER_CHANGE_PASSWORD_UNVALID",W="USER_LOAD_TODOS_END",G="USER_LOAD_TODOS_START",K="USER_LOAD_TODOS_ERROR",Q="USER_LOAD_DONE_TASKS_END",J="USER_LOAD_TIME_SPENTS_END",X="SET_TODOS_SEARCH",Z="LOAD_USER_FILTERS_END",ee="LOAD_USER_FILTERS_ERROR",te="SET_TODO_LIST_SCROLL_POSITION",se="LOAD_TASK_END",ne="NEW_TASK_COMMENT_END",ie="NEW_TASK_END",ae="EDIT_TASK_END",oe="EDIT_TASK_DATES",re="LOAD_TASK_COMMENTS_END",ce="LOAD_TASK_ENTITY_PREVIEW_FILES_END",le="CREATE_TASKS_END",de="DELETE_TASK_END",ue="EDIT_COMMENT_END",pe="DELETE_COMMENT_END",he="PIN_COMMENT",fe="PREVIEW_FILE_SELECTED",me="ADD_PREVIEW_START",be="ADD_PREVIEW_END",_e="DELETE_PREVIEW_END",ve="CHANGE_PREVIEW_END",ye="UPDATE_PREVIEW_ANNOTATION",ge="ADD_SELECTED_TASK",ke="ADD_SELECTED_TASKS",we="REMOVE_SELECTED_TASK",Se="CLEAR_SELECTED_TASKS",Oe="ASSIGN_TASKS",Ce="UNASSIGN_TASKS",Te="SAVE_TASK_SEARCH_END",Pe="REMOVE_TASK_SEARCH_END",Ee="UPDATE_COMMENT_CHECKLIST",je="SET_LAST_COMMENT_DRAFT",xe="REMOVE_FIRST_PREVIEW_FILE_TO_UPLOAD",De="LOAD_PRODUCTIONS_START",Ae="LOAD_PRODUCTIONS_END",Me="LOAD_PRODUCTIONS_ERROR",Le="ADD_PRODUCTION",Ie="UPDATE_PRODUCTION",$e="REMOVE_PRODUCTION",qe="LOAD_OPEN_PRODUCTIONS_START",Fe="LOAD_OPEN_PRODUCTIONS_END",Ne="LOAD_OPEN_PRODUCTIONS_ERROR",Re="LOAD_PRODUCTION_STATUS_START",Be="LOAD_PRODUCTION_STATUS_END",ze="LOAD_PRODUCTION_STATUS_ERROR",Ve="EDIT_PRODUCTION_START",Ue="EDIT_PRODUCTION_END",He="EDIT_PRODUCTION_ERROR",Ye="DELETE_PRODUCTION_START",We="DELETE_PRODUCTION_END",Ge="DELETE_PRODUCTION_ERROR",Ke="SET_CURRENT_PRODUCTION",Qe="PRODUCTION_PICTURE_FILE_SELECTED",Je="PRODUCTION_AVATAR_UPLOADED",Xe="TEAM_ADD_PERSON",Ze="TEAM_REMOVE_PERSON",et="ADD_METADATA_DESCRIPTOR_END",tt="UPDATE_METADATA_DESCRIPTOR_END",st="DELETE_METADATA_DESCRIPTOR_END",nt="LOAD_TASK_TYPES_START",it="LOAD_TASK_TYPES_END",at="LOAD_TASK_TYPES_ERROR",ot="EDIT_TASK_TYPE_START",rt="EDIT_TASK_TYPE_END",ct="EDIT_TASK_TYPE_ERROR",lt="DELETE_TASK_TYPE_START",dt="DELETE_TASK_TYPE_END",ut="DELETE_TASK_TYPE_ERROR",pt="LOAD_TASK_STATUSES_START",ht="LOAD_TASK_STATUSES_END",ft="LOAD_TASK_STATUSES_ERROR",mt="EDIT_TASK_STATUS_START",bt="EDIT_TASK_STATUS_END",_t="EDIT_TASK_STATUS_ERROR",vt="DELETE_TASK_STATUS_START",yt="DELETE_TASK_STATUS_END",gt="DELETE_TASK_STATUS_ERROR",kt="LOAD_CUSTOM_ACTIONS_START",wt="LOAD_CUSTOM_ACTIONS_END",St="LOAD_CUSTOM_ACTIONS_ERROR",Ot="EDIT_CUSTOM_ACTION_START",Ct="EDIT_CUSTOM_ACTION_END",Tt="EDIT_CUSTOM_ACTION_ERROR",Pt="DELETE_CUSTOM_ACTION_START",Et="DELETE_CUSTOM_ACTION_END",jt="DELETE_CUSTOM_ACTION_ERROR",xt="LOAD_ASSET_TYPES_START",Dt="LOAD_ASSET_TYPES_END",At="LOAD_ASSET_TYPES_ERROR",Mt="EDIT_ASSET_TYPE_START",Lt="EDIT_ASSET_TYPE_END",It="EDIT_ASSET_TYPE_ERROR",$t="DELETE_ASSET_TYPE_START",qt="DELETE_ASSET_TYPE_END",Ft="DELETE_ASSET_TYPE_ERROR",Nt="SET_ASSET_LIST_SCROLL_POSITION",Rt="SET_PRODUCTION_ASSET_TYPE_LIST_SCROLL_POSITION",Bt="CLEAR_ASSETS",zt="LOAD_ASSETS_START",Vt="LOAD_ASSETS_END",Ut="LOAD_ASSETS_ERROR",Ht="LOAD_ASSET_CAST_IN_END",Yt="ASSET_CSV_FILE_SELECTED",Wt="IMPORT_ASSETS_START",Gt="IMPORT_ASSETS_END",Kt="EDIT_ASSET_START",Qt="EDIT_ASSET_END",Jt="EDIT_ASSET_ERROR",Xt="DELETE_ASSET_START",Zt="DELETE_ASSET_END",es="DELETE_ASSET_ERROR",ts="RESTORE_ASSET_START",ss="RESTORE_ASSET_END",ns="RESTORE_ASSET_ERROR",is="SET_ASSET_SEARCH",as="SAVE_ASSET_SEARCH_END",os="REMOVE_ASSET_SEARCH_END",rs="DISPLAY_MORE_ASSETS",cs="COMPUTE_ASSET_TYPE_STATS",ls="SET_ASSET_TYPE_SEARCH",ds="ADD_ASSET",us="UPDATE_ASSET",ps="REMOVE_ASSET",hs="CANCEL_ASSET",fs="CHANGE_ASSET_SORT",ms="CLEAR_SHOTS",bs="LOAD_SHOTS_START",_s="LOAD_SHOTS_END",vs="LOAD_SHOTS_ERROR",ys="LOAD_SEQUENCES_END",gs="LOAD_EPISODES_END",ks="LOAD_SHOT_END",ws="LOAD_SHOT_CASTING_END",Ss="SHOT_CSV_FILE_SELECTED",Os="IMPORT_SHOTS_START",Cs="IMPORT_SHOTS_END",Ts="EDIT_SHOT_START",Ps="EDIT_SHOT_END",Es="EDIT_SHOT_ERROR",js="EDIT_SEQUENCE_START",xs="EDIT_SEQUENCE_END",Ds="EDIT_SEQUENCE_ERROR",As="EDIT_EPISODE_START",Ms="EDIT_EPISODE_END",Ls="EDIT_EPISODE_ERROR",Is="NEW_SHOT_START",$s="NEW_SHOT_END",qs="NEW_SHOT_ERROR",Fs="NEW_SEQUENCE_START",Ns="NEW_SEQUENCE_END",Rs="NEW_SEQUENCE_ERROR",Bs="NEW_EPISODE_START",zs="NEW_EPISODE_END",Vs="NEW_EPISODE_ERROR",Us="DELETE_SHOT_START",Hs="DELETE_SHOT_END",Ys="DELETE_SHOT_ERROR",Ws="DELETE_SEQUENCE_START",Gs="DELETE_SEQUENCE_ERROR",Ks="DELETE_EPISODE_START",Qs="DELETE_EPISODE_ERROR",Js="RESTORE_SHOT_START",Xs="RESTORE_SHOT_END",Zs="RESTORE_SHOT_ERROR",en="ADD_EPISODE",tn="UPDATE_EPISODE",sn="REMOVE_EPISODE",nn="ADD_SEQUENCE",an="UPDATE_SEQUENCE",on="REMOVE_SEQUENCE",rn="ADD_SHOT",cn="UPDATE_SHOT",ln="REMOVE_SHOT",dn="CANCEL_SHOT",un="SET_SHOT_SEARCH",pn="SAVE_SHOT_SEARCH_END",hn="REMOVE_SHOT_SEARCH_END",fn="SET_SEQUENCE_SEARCH",mn="SAVE_SEQUENCE_SEARCH_END",bn="REMOVE_SEQUENCE_SEARCH_END",_n="SET_EPISODE_SEARCH",vn="DISPLAY_MORE_SHOTS",yn="DISPLAY_MORE_SEQUENCES",gn="DISPLAY_MORE_EPISODES",kn="SET_SHOT_LIST_SCROLL_POSITION",wn="SET_SEQUENCE_LIST_SCROLL_POSITION",Sn="SET_EPISODE_LIST_SCROLL_POSITION",On="COMPUTE_SEQUENCE_STATS",Cn="COMPUTE_EPISODE_STATS",Tn="SET_CURRENT_EPISODE",Pn="CLEAR_EPISODES",En="SET_EPISODE_STATS",jn="RESET_PRODUCTION_PATH",xn="DATA_LOADING_START",Dn="DATA_LOADING_END",An="CHANGE_SHOT_SORT",Mn="CHANGE_EMAIL",Ln="CHANGE_PASSWORD",In="LOGIN_RUN",$n="LOGIN_SUCCESS",qn="LOGIN_FAILURE",Fn="LOGOUT_SUCCESS",Nn="LOGOUT_FAILURE",Rn="USER_LOGIN",Bn="USER_LOGOUT",zn="USER_LOGIN_FAIL",Vn="SAVE_TODO_SEARCH_END",Un="REMOVE_TODO_SEARCH_END",Hn="CASTING_SET_SEQUENCE",Yn="CASTING_SET_EPISODE",Wn="CASTING_SET_CASTING",Gn="CASTING_SET_SHOTS",Kn="CASTING_SET_SEQUENCES",Qn="CASTING_SET_ASSET_TYPES",Jn="CASTING_SET_ASSET_TYPE",Xn="CASTING_SET_ASSETS",Zn="CASTING_ADD_TO_CASTING",ei="CASTING_REMOVE_FROM_CASTING",ti="CASTING_SET_LINK_LABEL",si="LOAD_PLAYLISTS_START",ni="LOAD_PLAYLISTS_END",ii="LOAD_PLAYLISTS_ERROR",ai="LOAD_PLAYLIST_START",oi="LOAD_PLAYLIST_END",ri="LOAD_PLAYLIST_ERROR",ci="EDIT_PLAYLIST_START",li="EDIT_PLAYLIST_END",di="EDIT_PLAYLIST_ERROR",ui="DELETE_PLAYLIST_START",pi="DELETE_PLAYLIST_END",hi="DELETE_PLAYLIST_ERROR",fi="ADD_ENTITY_TO_PLAYLIST",mi="REMOVE_ENTITY_FROM_PLAYLIST",bi="CHANGE_PLAYLIST_PREVIEW",_i="CHANGE_PLAYLIST_ORDER",vi="CHANGE_PLAYLIST_TYPE",yi="LOAD_ENTITY_PREVIEW_FILES_END",gi="ADD_NEW_JOB",ki="MARK_JOB_AS_DONE",wi="REMOVE_BUILD_JOB",Si="LOAD_NOTIFICATIONS_END",Oi="LOAD_NOTIFICATION_END",Ci="MARK_ALL_NOTIFICATIONS_AS_READ",Ti="NOTIFICATION_ADD_PREVIEW",Pi="LOAD_TASK_SUBSCRIBE_END",Ei="LOAD_SEQUENCE_SUBSCRIBE_END",ji="LOAD_SEQUENCE_SUBSCRIPTION_END",xi="CLEAR_NEWS",Di="ADD_PREVIOUS_NEWS",Ai="ADD_FIRST_NEWS",Mi="NEWS_ADD_PREVIEW",Li="SET_PREVIEW",Ii="SET_IS_SHOW_ASSIGNATIONS",$i="SET_IS_SHOW_INFOS",qi="RESET_ALL",Fi="ADD_MILESTONE",Ni="ADD_MILESTONES",Ri="REMOVE_MILESTONE"},"9fbc":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));s("a4d3"),s("4de4"),s("c740"),s("4160"),s("a434"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("bf19");var n=s("ade3"),i=s("2f62"),a=s("7a94");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var c={data:function(){return{isShowingPalette:!1,isShowingPencilPalette:!1}},created:function(){this.resetUndoStacks()},mounted:function(){},beforeDestroy:function(){},computed:r({},Object(i["c"])([]),{annotationCanvas:function(){return this.$refs["annotation-canvas"]}}),methods:{resetUndoStacks:function(){this.$options.doneActionStack=[],this.$options.undoneActionStack=[]},getNewAnnotations:function(e,t){var s=this;if(this.fabricCanvas.getObjects().forEach((function(e){"path"===e.type&&(e.canvasWidth||(e.canvasWidth=s.fabricCanvas.width),e.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}))})),t){if(t.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),t.width=this.fabricCanvas.width,t.height=this.fabricCanvas.height,t.time=e,t.drawing&&t.drawing.objects.length<1){var n=this.annotations.findIndex((function(t){return t.time===e}));this.annotations.splice(n,1)}}else this.annotations.push({time:e,width:this.fabricCanvas.width,height:this.fabricCanvas.height,drawing:this.fabricCanvas.toJSON(["canvasWidth"])}),this.annotations=this.annotations.sort((function(e,t){return e.time<t.time}))||[];var i=[];return this.annotations.forEach((function(e){return i.push(r({},e))})),i},onPickPencil:function(){this.isShowingPencilPalette=!this.isShowingPencilPalette},onPickColor:function(){this.isShowingPalette=!this.isShowingPalette},onChangeColor:function(e){this.color=e,this.fabricCanvas.freeDrawingBrush.color=this.color,this.isShowingPalette=!1},onChangePencil:function(e){this.pencil=e;var t={big:4,medium:2,small:1},s=t[e];this.fabricCanvas.freeDrawingBrush.width=s,this.isShowingPalette=!1},stackAddAction:function(e){var t=e.target;this.$options.doneActionStack.push({type:"add",obj:t}),t.lockMovementX=!0,t.lockMovementY=!0},undoLastAction:function(){var e=this.$options.doneActionStack.pop();e&&("add"===e.type?this.deleteObject(e.obj):"remove"===e.type&&this.addObject(e.obj),this.$options.doneActionStack.pop(),this.$options.undoneActionStack.push(e))},redoLastAction:function(){var e=this.$options.undoneActionStack.pop();e&&("add"===e.type?this.addObject(e.obj):"remove"===e.type&&this.deleteObject(e.obj))},deleteSelection:function(){var e=this.fabricCanvas.getActiveObject();this.deleteObject(e)},deleteObject:function(e){var t=this;e&&e._objects?e._objects.forEach((function(e){t.fabricCanvas.remove(e)})):this.fabricCanvas.remove(e),this.$options.doneActionStack.push({type:"remove",obj:e}),this.saveAnnotations()},addObject:function(e){var t=this;e._objects?e._objects.forEach((function(e){t.fabricCanvas.add(e),t.$options.doneActionStack.pop()})):this.fabricCanvas.add(e),this.$options.doneActionStack.push({type:"add",obj:e}),this.saveAnnotations()},clearUndoneStack:function(){this.$options.undoneActionStack=[]},setupFabricCanvas:function(){var e=this;if(!this.readOnly&&this.annotationCanvas){var t=this.annotationCanvas.id;return this.fabricCanvas=new a["fabric"].Canvas(t),this.fabricCanvas.on("object:moved",this.saveAnnotations),this.fabricCanvas.on("object:scaled",this.saveAnnotations),this.fabricCanvas.on("object:added",this.stackAddAction),this.fabricCanvas.on("mouse:up",(function(){e.isDrawing&&(e.clearUndoneStack(),e.saveAnnotations())})),this.fabricCanvas.setDimensions({width:100,height:100}),this.fabricCanvas.freeDrawingBrush.color=this.color,this.fabricCanvas.freeDrawingBrush.width=4,this.fabricCanvas}}}}},a068:function(e,t,s){"use strict";var n=s("ac61"),i=s.n(n);i.a},a109:function(e,t,s){"use strict";var n=s("5027"),i=s.n(n);i.a},a27b:function(e,t,s){},a4c6:function(e,t,s){"use strict";var n=s("02a9"),i=s.n(n);i.a},a4d5:function(e,t,s){},a525:function(e,t,s){},a6ed:function(e,t,s){"use strict";var n=s("7ed4"),i=s.n(n);i.a},a799:function(e,t,s){"use strict";var n=s("5125"),i=s.n(n);i.a},a91d:function(e,t,s){},aaf8:function(e,t,s){"use strict";var n=s("f16f"),i=s.n(n);i.a},ac61:function(e,t,s){},ad6c:function(e,t,s){e.exports=s.p+"img/kitsu.b07d6464.png"},b060:function(e,t,s){},b11e:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-timesheet data-list"},[s("div",{staticClass:"flexrow timesheet-header"},[s("div",{staticClass:"flexrow-item current-date"},[s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-field input",language:e.locale,"disabled-dates":e.disabledDates,"monday-first":!0,format:"d MMMM yyyy"},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1),s("div",{staticClass:"flexrow time-spent-total"},[e._v(" - "+e._s(e.timeSpentTotal)+" "+e._s(e.$t("timesheets.hours"))+" ")])]),s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[e._v(" "+e._s(e.$t("tasks.fields.production"))+" ")]),s("th",{staticClass:"type"},[e._v(" "+e._s(e.$t("tasks.fields.task_type"))+" ")]),s("th",{staticClass:"name"},[e._v(" "+e._s(e.$t("tasks.fields.entity"))+" ")]),s("th",{staticClass:"time-spent"},[e._v(" "+e._s(e.$t("timesheets.time_spents"))+" ")])])])])]),e.tasks.length>0&&!e.isLoading?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",e._l(e.displayedTasks,(function(t,n){return s("tr",{key:t.id+"-"+n},[s("production-name-cell",{staticClass:"production",attrs:{entry:e.productionMap[t.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":t.project_id,entry:e.taskTypeMap[t.task_type_id]}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:e.entityPath(t)}},[e._v(" "+e._s(t.full_entity_name)+" ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:e.timeSpentMap[t.id]?e.timeSpentMap[t.id].duration/60:0,"task-id":t.id},on:{change:e.onSliderChange}})],1)})),0)]),e.hideDone?e._e():s("page-subtitle",{attrs:{text:e.$t("timesheets.done_tasks")}}),e.isLoading||e.hideDone?e._e():s("table",{staticClass:"table"},[s("tbody",e._l(e.doneTasks,(function(t,n){return s("tr",{key:t+"-"+n},[s("production-name-cell",{staticClass:"production",attrs:{entry:e.productionMap[t.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":t.project_id,entry:{id:t.task_type_id,name:t.task_type_name,color:t.task_type_color}}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:t.entity_path}},[e._v(" "+e._s(t.full_entity_name)+" ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:e.timeSpentMap[t.id]?e.timeSpentMap[t.id].duration/60:0,"task-id":t.id},on:{change:e.onSliderChange}})],1)})),0)])],1):e._e(),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.isLoading?e._e():s("p",{staticClass:"has-text-centered footer-info"},[e._v(" "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.tasks",e.tasks.length))+" ")])],1)},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("fb6a"),s("b0c0"),s("a9e3"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("7f45"),c=s.n(r),l=s("fa33"),d=s("2430"),u=s("de26"),p=s("8751"),h=s("09a4"),f=s("58f5"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"value flexrow-item"},[e._v(" "+e._s(e.value)+" ")]),s("vue-slider",e._b({ref:"slider",staticClass:"flexrow-item slider",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"vue-slider",e.options,!1)),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(1)}}},[e._v("1")]),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(4)}}},[e._v("4")]),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(8)}}},[e._v("8")])],1)])},b=[],_=s("4971"),v=s.n(_);s("24df");function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var k={name:"time-slider-cell",data:function(){return{value:this.duration,options:{show:!0,width:400,min:0,max:10,interval:.5,lazy:!0,marks:!0,hideLabel:!0,piecewise:!0,tooltip:"focus",tooltipPlacement:"bottom",processStyle:{"background-color":"#8F91EB"},railStyle:{background:"#CCC"}}}},components:{VueSlider:v.a},props:{"task-id":{type:String,default:""},duration:{type:Number,default:0}},computed:g({},Object(o["c"])([])),methods:g({},Object(o["b"])([]),{setValue:function(e){this.value=e}}),watch:{value:function(){this.$emit("change",{taskId:this.taskId,duration:this.value})}}},w=k,S=(s("66d4"),s("2877")),O=Object(S["a"])(w,m,b,!1,null,"5d7ea8f4",null),C=O.exports,T=s("e60b");function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var j={name:"timesheet-list",components:{Datepicker:l["a"],ProductionNameCell:h["a"],PageSubtitle:p["a"],TableInfo:T["a"],TaskTypeName:f["a"],TimeSliderCell:C},data:function(){return{disabledDates:{from:c()().toDate()},page:1,selectedDate:c()().toDate()}},props:{tasks:{default:function(){return[]},type:Array},doneTasks:{default:function(){return[]},type:Array},isLoading:{default:!1,type:Boolean},isError:{default:!1,type:Boolean},done:{default:!1,type:Boolean},timeSpentMap:{default:function(){},type:Object},timeSpentTotal:{default:0,type:Number},hideDone:{default:!1,type:Boolean}},computed:E({},Object(o["c"])(["nbSelectedTasks","productionMap","taskTypeMap","user"]),{locale:function(){return"fr_FR"===this.user.locale?d["fr"]:d["en"]},displayedTasks:function(){return this.tasks.slice(0,this.page*(u["a"]/2))}}),methods:E({},Object(o["b"])([]),{onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px");var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},currentDate:function(){return c()().format("LL")},onSliderChange:function(e){this.$emit("time-spent-change",e)},entityPath:function(e){var t=e.sequence_name?"shot":"asset",s={name:t,params:{production_id:e.project_id}};return"asset"===t?s.params.asset_id=e.entity_id:s.params.shot_id=e.entity_id,e.episode_id&&(s.name="episode-".concat(t),s.params.episode_id=e.episode_id),s}}),watch:{selectedDate:function(){this.$emit("date-changed",this.selectedDate)}}},x=j,D=(s("15b1"),Object(S["a"])(x,n,i,!1,null,"2e4dc7d8",null));t["a"]=D.exports},b131:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"validation"},["pie"===e.displayMode?s("div",[s("pie-chart",{attrs:{width:"70px",height:"50px",legend:!1,colors:e.colors,data:e.selectedData}})],1):s("div",e._l(e.selectedData,(function(t){return t[0]?s("div",{key:t[0]},[s("span",{staticClass:"stats-name",style:{color:t[2]}},[e._v(" "+e._s(t[0])+" ")]),s("span",[e._v(" : ")]),s("span",{staticClass:"stats-value"},[e._v(" "+e._s(t[1])+" ("+e._s(e.percent(t[1]))+"%) ")])]):e._e()})),0)])},i=[],a=(s("13d5"),s("b680"),{name:"stats-cell",components:{},props:{colors:{type:Array,required:!0},countMode:{type:String,default:"count"},data:{type:Array,default:function(){return[]}},displayMode:{type:String,default:"pie"},framesData:{type:Array,default:function(){return[]}}},computed:{selectedData:function(){return"frames"===this.countMode?this.framesData:this.data},total:function(){return this.selectedData.reduce((function(e,t){return t[1]?e+t[1]:e}),0)}},methods:{percent:function(e){var t=0;return this.total>0&&(t=e/this.total*100),t.toFixed(2)}}}),o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"0b145201",null);t["a"]=c.exports},b16f:function(e,t,s){},b4e3:function(e,t,s){},b5a1:function(e,t,s){},b86a:function(e,t,s){"use strict";var n=s("d502"),i=s.n(n);i.a},b872:function(e,t,s){"use strict";var n=s("72f2"),i=s.n(n);i.a},ba33:function(e,t,s){},ba8a:function(e,t,s){},bb21:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isPreview&&e.withLink?s("a",{staticClass:"thumbnail-wrapper",style:{width:e.emptyWidth+"px",height:e.emptyHeight+"px"},attrs:{href:e.originalPath,target:"_blank"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailPath,expression:"thumbnailPath"}],key:e.thumbnailKey,staticClass:"thumbnail-picture",style:e.imgStyle})]):e.isPreview&&!e.withLink?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailPath,expression:"thumbnailPath"}],key:e.thumbnailKey,staticClass:"thumbnail-picture",staticStyle:{}}):s("span",{class:{"thumbnail-picture":!0,"thumbnail-empty":!0,square:e.square},style:{width:e.emptyWidth+"px",height:e.emptyHeight+"px"}})},i=[],a=(s("a9e3"),{name:"entity-thumbnail",props:{entity:{default:function(){},type:Object},square:{default:!1,type:Boolean},width:{default:null,type:Number},height:{default:null,type:Number},emptyWidth:{default:50,type:Number},emptyHeight:{default:30,type:Number},previewFileId:{default:null,type:String},withLink:{default:!0,type:Boolean}},computed:{originalPath:function(){return"/api/pictures/originals/preview-files/"+this.entity.preview_file_id+".png"},isPreview:function(){return this.entity.preview_file_id&&this.entity.preview_file_id.length>0},imgStyle:function(){var e={};return this.width&&(e.width=this.width+"px"),this.height&&(e.height=this.height+"px"),e},thumbnailPath:function(){var e=this.previewFileId||this.entity.preview_file_id;return this.square?"/api/pictures/thumbnails-square/preview-files/"+e+".png":"/api/pictures/thumbnails/preview-files/"+e+".png"},thumbnailKey:function(){var e=this.previewFileId||this.entity.preview_file_id;return"thumbnail-".concat(e)}}}),o=a,r=(s("9ea6"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"5a368ddd",null);t["a"]=c.exports},bb3e:function(e,t,s){},bc6e:function(e,t,s){"use strict";var n=s("bf85"),i=s.n(n);i.a},bcc3:function(e,t,s){"use strict";var n=s("d57e"),i=s.n(n);i.a},bcd2:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return i}));var n=function(e,t){var s=Math.round(1/t*100)/100,n=Math.round(e/s),i=n*s;return i=Math.round(100*i)/100,i},i=function(e,t,s){var n=25;return s&&s.fps&&(n=s.fps),t&&t.fps&&(n=t.fps),Math.round(e/n*100)/100}},bd35:function(e,t,s){},bd9d:function(e,t,s){"use strict";var n=s("5ed2"),i=s.n(n);i.a},be0b:function(e,t,s){},be83:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isWhite?n("div",{staticClass:"has-text-centered",style:e.sizeStyle},[n("img",{attrs:{src:s("c9e4")}})]):n("div",{staticClass:"has-text-centered",style:e.sizeStyle},[n("img",{attrs:{src:s("5c3d")}})])},i=[],a=(s("a9e3"),{name:"spinner",props:{isWhite:{type:Boolean,default:!1},size:{type:Number}},computed:{sizeStyle:function(){return{width:this.size?this.size+"px":"auto"}}}}),o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"3d0407a2",null);t["a"]=c.exports},bf3e:function(e,t,s){"use strict";var n=s("79b9"),i=s.n(n);i.a},bf85:function(e,t,s){},bfa0:function(e,t,s){"use strict";var n=s("256f"),i=s.n(n);i.a},bfe7:function(e,t,s){"use strict";var n=s("9247"),i=s.n(n);i.a},c086:function(e,t,s){},c08e:function(e,t,s){},c1eb:function(e,t,s){"use strict";var n=s("063c"),i=s.n(n);i.a},c20f:function(e,t,s){},c266:function(e,t,s){"use strict";var n=s("3a7d"),i=s.n(n);i.a},c2d0:function(e,t,s){"use strict";var n=s("bb3e"),i=s.n(n);i.a},c577:function(e,t,s){},c65e:function(e,t,s){},c802:function(e,t,s){},c9e4:function(e,t,s){e.exports=s.p+"img/spinner-white.da0c6413.svg"},ca1b:function(e,t,s){"use strict";var n=s("d3c5"),i=s.n(n);i.a},ca76:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"e",(function(){return o})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"b",(function(){return u}));s("99af"),s("4de4"),s("4160"),s("c975"),s("d81d"),s("ac1f"),s("466d"),s("5319"),s("1276"),s("2ca0"),s("159b");var n=s("2017"),i=/([^ ]*)=([^ ]*)|\[([^[]*)\]=([^ ]*)/g,a=function(e,t,s){var n={status:!0},i={assignation:!0},a={exclusion:!0},o={descriptor:!0},r={thumbnail:!0};return t&&t.length>0?e.filter((function(e){var c=!0;return t.forEach((function(t){var l=null;if(!c)return!1;if(t.taskType&&e.validations[t.taskType.id]&&(l=s[e.validations[t.taskType.id]]),n[t.type])c=l&&l.task_status_id===t.taskStatus.id,t.excluding&&(c=!c);else if(i[t.type])c=t.assigned?l&&l.assignees&&l.assignees.length>0:!l||l&&l.assignees&&0===l.assignees.length;else if(a[t.type])c=!t.excludedIds[e.id];else if(o[t.type]){if(e.data&&e.data[t.descriptor.field_name]&&t.value){var d=e.data[t.descriptor.field_name];d=d.toLowerCase(),c=d.indexOf(t.value.toLowerCase())>=0}else c=!1;t.excluding&&(c=!c)}else if(r[t.type]){var u=""!==e.preview_file_id&&void 0!==e.preview_file_id&&null!==e.preview_file_id;c=t.excluding?!u:u}})),c})):e},o=function(e){return e?e.replace(i,"").split(" ").filter((function(e){return e.length>0&&"-"!==e[0]&&"withthumbnail"!==e})):[]},r=function(e){return e.replace(i,"").split(" ").filter((function(e){return e.length>0&&"-"===e[0]&&"-withthumbnail"!==e})).map((function(e){return e.substring(1)}))},c=function(e,t,s,i,a){var o=d(t,s,a),c=u(i,a),l=p(a)||[],h=r(a)||[];return o=o.concat(c).concat(l),h.forEach((function(t){var s={},i=Object(n["h"])(e,[t])||[];i.forEach((function(e){s[e.id]=!0})),o.push({type:"exclusion",excludedIds:s})})),o},l=function(e,t){var s=[],i=r(t)||[];return i.forEach((function(t){var i={},a=Object(n["h"])(e,[t])||[];a.forEach((function(e){i[e.id]=!0})),s.push({type:"exclusion",excludedIds:i})})),s},d=function(e,t,s){if(!s)return[];var a=[],o=s.match(i),r=Object(n["c"])(e,!1),c={};return t.forEach((function(e){c[e.short_name.toLowerCase()]=e})),o&&o.forEach((function(e){var t=e.split("="),s=t[1],n=s.startsWith("-");n&&(s=s.substring(1));var i=t[0];"["===i[0]&&(i=i.substring(1,i.length-1));var o=r[i.toLowerCase()];o&&("unassigned"===s?a.push({taskType:o[0],assigned:!1,type:"assignation"}):"assigned"===s?a.push({taskType:o[0],assigned:!0,type:"assignation"}):s&&c[s.toLowerCase()]&&a.push({taskType:o[0],taskStatus:c[s.toLowerCase()],type:"status",excluding:n}))})),a},u=function(e,t){if(!t)return[];var s=[],a=t.match(i),o=Object(n["c"])(e,!1);return a&&a.forEach((function(e){var t=e.split("="),n=t[1],i=t[0];"["===i[0]&&(i=i.substring(1,i.length-1));var a=o[i.toLowerCase()],r=n.startsWith("-");r&&(n=n.substring(1)),a&&s.push({descriptor:a[0],value:n,type:"descriptor",excluding:r})})),s},p=function(e){var t=[];return e.indexOf("-withthumbnail")>-1?t.push({type:"thumbnail",excluding:!0}):e.indexOf("withthumbnail")>-1&&t.push({type:"thumbnail",excluding:!1}),t}},cb0e:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{ref:"cell",class:{validation:e.selectable&&!e.isCurrentUserClient,selected:e.selectable&e.selected},style:{"border-left":e.isBorder?"1px solid "+e.column.color:"none",background:e.isBorder?e.getBackground():"transparent"},on:{mouseover:e.onMouseOver,mouseout:e.onMouseOut,click:e.onClick}},[e.minimized?s("div",{staticClass:"wrapper"},[s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color}})]):s("div",{staticClass:"wrapper"},[e.task?s("span",[s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color},attrs:{title:e.taskStatus.name}},[e._v(" "+e._s(e.taskStatus.short_name)+" ")]),e.isCurrentUserClient?e._e():s("span",{staticClass:"priority"},[e._v(" "+e._s(e.priority)+" ")])]):e._e(),e._l(e.assignees,(function(t){return e.isAssignees&&!e.isCurrentUserClient?s("span",{key:"avatar-"+t,staticClass:"avatar has-text-centered",style:{background:e.personMap[t].color,width:"20px",height:"20px","font-size":"10px"},attrs:{title:e.personMap[t].full_name}},[e.personMap[t].has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath(t),expression:"avatarPath(personId)"}],key:e.avatarKey(t),attrs:{width:"20",height:"20"}}):s("span",[e._v(" "+e._s(e.personMap[t].initials)+" ")])]):e._e()}))],2)])},i=[],a=(s("a4d3"),s("99af"),s("4de4"),s("4160"),s("c975"),s("a9e3"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("7930");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"validation-cell",data:function(){return{task:null}},components:{},props:{column:{default:null,type:Object},entity:{default:null,type:Object},taskTest:{default:null,type:Object},isBorder:{default:!0,type:Boolean},isStatic:{default:!1,type:Boolean},isAssignees:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},selectable:{default:!0,type:Boolean},clickable:{default:!0,type:Boolean},selected:{default:!1,type:Boolean},rowX:{default:0,type:Number},columnY:{default:0,type:Number}},mounted:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])},computed:l({},Object(o["c"])(["isDarkTheme","isCurrentUserClient","personMap","taskMap","taskStatusMap"]),{assignees:function(){return this.task?this.task.assignees:[]},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""},taskStatus:function(){if(this.task){var e=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[e]:{}}return{}}}),methods:l({},Object(o["b"])([]),{getBackground:function(){if(this.isBorder){var e=this.isDarkTheme?.15:.08;return r["a"].hexToRGBa(this.column.color,e)}return"transparent"},onMouseOver:function(e){if(this.selectable&&!this.selected){var t=this.isDarkTheme?"#878B97":"#CCFFCC";this.changeStyle(t)}},onMouseOut:function(e){if(this.selectable&&!this.selected){var t=this.getBackground();this.changeStyle(t)}},onClick:function(e){this.clickable&&this.select(e)},changeStyle:function(e){var t=this.isBorder?"1px solid "+this.column.color:"none";this.$refs.cell.style="border-left: ".concat(t,"; background: ").concat(e,";")},select:function(e){var t=!1!==e.isUserClick;this.selectable&&!this.isCurrentUserClient&&(this.$refs.cell&&this.$refs.cell.className.indexOf("selected")<0?this.$emit("select",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:e.ctrlKey,isShiftKey:e.shiftKey,isUserClick:t}):this.$emit("unselect",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:e.ctrlKey,isShiftKey:e.shiftKey,isUserClick:t}))},avatarPath:function(e){var t=this.personMap[e];return t?t.avatarPath+"?unique="+t.uniqueHash:""},avatarKey:function(e){var t=this.personMap[e];return t?t.id+"-"+t.uniqueHash:""}}),watch:{selected:function(){if(this.selected){var e=this.isDarkTheme?"#5E60BA":"#D1C4E9";this.changeStyle(e)}else{var t=this.getBackground(this.column.color);this.changeStyle(t)}},taskTest:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])}}},u=d,p=(s("984b"),s("2877")),h=Object(p["a"])(u,n,i,!1,null,"63e8915e",null);t["a"]=h.exports},cb88:function(e,t,s){e.exports=s.p+"img/studio_collaboration.1e49fa73.png"},cc90:function(e,t,s){},ccfd:function(e,t,s){"use strict";var n=s("89a1"),i=s.n(n);i.a},ce6b:function(e,t,s){"use strict";s("99af"),s("b0c0"),s("d3b7"),s("498a");var n=s("edbf");t["a"]={getOrganisation:function(){return new Promise((function(e,t){n["a"].get("/api/data/organisations",(function(s,n){if(s)t(s);else{var i={name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:!1,chat_token_slack:""};n.length>0&&(i=n[0]),i.use_original_file_name=i.use_original_file_name?"true":"false",e(i)}}))}))},updateOrganisation:function(e){return new Promise((function(t,s){var i={name:e.name,hours_by_day:e.hours_by_day,use_original_file_name:"true"===e.use_original_file_name,chat_token_slack:e.chat_token_slack};n["a"].put("/api/data/organisations/".concat(e.id),i,(function(e,n){e?s(e):t(n)}))}))},postOrganisationLogo:function(e,t){return new Promise((function(s,i){n["a"].post("/api/pictures/thumbnails/organisations/".concat(e),t,(function(e,t){e?i(e):s(t)}))}))},getPeople:function(e){n["a"].get("/api/data/persons",e)},getPerson:function(e,t){n["a"].get("/api/data/persons/".concat(e),t)},newPerson:function(e){return new Promise((function(t,s){var i={first_name:e.first_name,last_name:e.last_name,email:e.email.trim(),phone:e.phone,role:e.role,active:e.active};n["a"].post("/api/data/persons/new",i,(function(e,n){e?s(e):t(n)}))}))},invitePerson:function(e){return new Promise((function(t,s){n["a"].get("/api/actions/persons/".concat(e.id,"/invite"),(function(n){n?s(n):t(e)}))}))},updatePerson:function(e){return new Promise((function(t,s){var i={first_name:e.first_name,last_name:e.last_name,email:e.email.trim(),phone:e.phone,timezone:e.timezone,locale:e.locale,role:e.role,active:e.active,notifications_enabled:"true"===e.notifications_enabled,notifications_slack_enabled:"true"===e.notifications_slack_enabled,notifications_slack_userid:e.notifications_slack_userid};n["a"].put("/api/data/persons/".concat(e.id),i,(function(e,n){e?s(e):t(n)}))}))},deletePerson:function(e,t){n["a"].del("/api/data/persons/".concat(e,"?force=true"),t)},postCsv:function(e,t){var s="/api/import/csv/persons";return t&&(s+="?update=true"),n["a"].ppost(s,e)},postAvatar:function(e,t,s){n["a"].post("/api/pictures/thumbnails/persons/".concat(e),t,s)},changePassword:function(e,t){var s={old_password:e.oldPassword,password:e.password,password_2:e.password2};n["a"].post("/api/auth/change-password",s,t)},loadTodos:function(e){n["a"].get("/api/data/user/tasks",e)},loadDone:function(e){n["a"].get("/api/data/user/done-tasks",e)},loadTimeSpents:function(e,t){n["a"].get("/api/data/user/time-spents/".concat(e),t)},getPersonTasks:function(e,t){n["a"].get("/api/data/persons/".concat(e,"/tasks"),t)},getPersonDoneTasks:function(e,t){n["a"].get("/api/data/persons/".concat(e,"/done-tasks"),t)},getUserSearchFilters:function(e){n["a"].get("/api/data/user/filters",e)},createFilter:function(e,t,s,i,a,o){var r={list_type:e,name:t,query:s,entity_type:a,project_id:i};n["a"].post("/api/data/user/filters",r,o)},removeFilter:function(e,t){n["a"].del("/api/data/user/filters/".concat(e.id),t)},getTimeSpents:function(e,t,s){n["a"].get("/api/data/persons/".concat(e,"/time-spents/").concat(t),s)},setTimeSpent:function(e,t,s,i,a){var o={duration:60*i};n["a"].post("/api/actions/tasks/".concat(e,"/time-spents/").concat(s,"/persons/").concat(t),o,a)},getDayTable:function(e,t){return new Promise((function(s,i){n["a"].get("/api/data/persons/time-spents/day-table/".concat(e,"/").concat(t),(function(e,t){e?i(e):s(t)}))}))},getWeekTable:function(e){return new Promise((function(t,s){n["a"].get("/api/data/persons/time-spents/week-table/".concat(e),(function(e,n){e?s(e):t(n)}))}))},getMonthTable:function(e){return new Promise((function(t,s){n["a"].get("/api/data/persons/time-spents/month-table/".concat(e),(function(e,n){e?s(e):t(n)}))}))},getYearTable:function(e){return n["a"].pget("/api/data/persons/time-spents/year-table")},getAggregatedPersonTimeSpents:function(e,t,s,i,a,o){return new Promise((function(r,c){var l="/api/data/persons/".concat(e,"/time-spents/");l+="year"===t?"year/".concat(s):"month"===t?"month/".concat(s,"/").concat(i):"week"===t?"week/".concat(s,"/").concat(a):"day/".concat(s,"/").concat(i,"/").concat(o),n["a"].get(l,(function(e,t){e?c(e):r(t)}))}))},getContext:function(){return n["a"].pget("/api/data/user/context")}}},ce80:function(e,t,s){e.exports=s.p+"img/validated.a1d2a358.png"},cf00:function(e,t,s){},d017:function(e,t,s){},d065:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n={beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{onKeyDown:function(e){"Escape"===e.key&&this.$emit("cancel")}},watch:{active:function(){this.active?window.addEventListener("keydown",this.onKeyDown,!1):window.removeEventListener("keydown",this.onKeyDown)}}}},d228:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"button",attrs:{title:e.buttonTitle},on:{click:function(t){return e.$emit("click")}}},[e.subscribed?s("eye-icon",{staticClass:"icon is-small only-icon"}):s("eye-off-icon",{staticClass:"icon is-small only-icon"})],1)},i=[],a=s("0a35"),o={name:"subscribe-button",components:{EyeIcon:a["p"],EyeOffIcon:a["q"]},props:{subscribed:{default:!1,type:Boolean}},computed:{buttonTitle:function(){return this.subscribed?this.$t("tasks.unsubscribe_notifications"):this.$t("tasks.subscribe_notifications")}}},r=o,c=(s("5bf3"),s("2877")),l=Object(c["a"])(r,n,i,!1,null,"76d14e74",null);t["a"]=l.exports},d359:function(e,t,s){"use strict";s("13d5"),s("d3b7");t["a"]={runPromiseMapAsSeries:function(e,t){return e.reduce((function(e,s){return e.then((function(){return t(s)}))}),Promise.resolve())}}},d3c5:function(e,t,s){},d48a:function(e,t,s){},d502:function(e,t,s){},d57e:function(e,t,s){},d5c9:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isError?s("p",{staticClass:"error"},[e._v(" "+e._s(e.errorText)+" ")]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":e.isDisabled},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.confirmLabel||e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.cancelLabel||e.$t("main.cancel"))+" ")])])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"modal-footer",components:{},props:{cancelLabel:{type:String,default:""},confirmLabel:{type:String,default:""},errorText:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([])),watch:{}},d=l,u=(s("2e9c"),s("2877")),p=Object(u["a"])(d,n,i,!1,null,"5d997325",null);t["a"]=p.exports},d5ed:function(e,t,s){},d6f7:function(e,t,s){},d793:function(e,t,s){"use strict";var n=function(e,t){var s=t._c;return t.props.previewFileId?s("img",t._b({directives:[{name:"lazy",rawName:"v-lazy",value:"/api/pictures/"+t.props.type+"/preview-files/"+t.props.previewFileId+".png",expression:"'/api/pictures/' + props.type + '/preview-files/' + props.previewFileId + '.png'"}],key:t.props.previewFileId,staticClass:"thumbnail-picture",style:{width:t.props.width,height:t.props.height}},"img",t.data.attrs,!1)):s("span",t._b({class:{"thumbnail-picture":!0,"thumbnail-empty":!0},style:{width:t.props.width,height:t.props.emptyHeight?t.props.emptyHeight:t.props.height}},"span",t.data.attrs,!1))},i=[],a={name:"light-entity-thumbnail",functional:!0,props:{previewFileId:{default:"",type:String},width:{default:"150px",type:String},height:{default:"50px",type:String},emptyHeight:{type:String},type:{default:"thumbnails",type:String}}},o=a,r=(s("7203"),s("2877")),c=Object(r["a"])(o,n,i,!0,null,null,null);t["a"]=c.exports},d7c7:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"schedule-wrapper"},[s("div",{ref:"schedule",class:e.scheduleClass},[s("div",{ref:"entity-list",staticClass:"entities",on:{mousedown:e.startBrowsingY}},[s("div",{staticClass:"has-text-right total-man-days mr0"},[s("span",{staticClass:"total-value"},[e._v(" "+e._s(e.totalManDays)+" "+e._s(e.$t("schedule.md"))+" ")])]),s("div",{staticClass:"entity-name-list"},e._l(e.hierarchy,(function(t){return s("div",{key:"entity-"+t.id},[s("div",{class:{"entity-line":!0,"entity-name":!0,flexrow:!0,root:!0,expanded:t.expanded},style:e.entityLineStyle(t)},[s("span",{staticClass:"expand flexrow-item mr1",on:{click:function(s){return e.expandRootElement(t)}}},[t.expanded?s("chevron-down-icon"):s("chevron-right-icon")],1),t.avatar?s("span",{staticClass:"avatar flexrow-item"},["Project"===t.type?s("production-name",{attrs:{project:t,"only-avatar":!0,size:30}}):s("people-avatar",{attrs:{person:t,"is-link":!1,size:30,"no-cache":!0}})],1):e._e(),t.route?s("router-link",{staticClass:"filler flexrow-item root-element-name",attrs:{to:t.route}},[e._v(" "+e._s(t.name)+" ")]):s("span",{staticClass:"filler flexrow-item root-element-name"},[e._v(" "+e._s(t.name)+" ")]),!t.avatar&&t.editable?s("input",{directives:[{name:"model",rawName:"v-model",value:t.man_days,expression:"rootElement.man_days"}],staticClass:"flexrow-item",attrs:{type:"number",placeholder:"0"},domProps:{value:t.man_days},on:{input:[function(s){s.target.composing||e.$set(t,"man_days",s.target.value)},function(s){return e.$emit("item-changed",t)}]}}):e._e(),!t.avatar&&t.editable?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v(" "+e._s(e.$t("schedule.md"))+" ")]):e._e(),t.avatar||!t.editable?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v(" "+e._s(t.man_days)+" "+e._s(e.$t("schedule.md"))+" ")]):e._e()],1),t.expanded?s("div",{staticClass:"children",style:e.childrenStyle(t)},[t.loading?s("div",{staticClass:"flexrow"},[s("spinner",{staticClass:"child-spinner flexrow-item",staticStyle:{width:"20px",margin:"0 0 10px 10px"}})],1):e._e(),e._l(t.children,(function(n,i){return s("div",{key:"entity-"+n.id,staticClass:"child-name"},[s("div",{staticClass:"entity-line entity-name child-line flexrow",style:e.childNameStyle(t,i)},[s("span",{staticClass:"filler flexrow-item"},[e._v(" "+e._s(n.name)+" ")]),n.man_days?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v(" "+e._s(n.man_days)+" "+e._s(e.$t("schedule.md"))+" ")]):e._e()])])}))],2):e._e()])})),0)]),s("div",{staticClass:"timeline"},[s("div",{ref:"timeline-header",staticClass:"timeline-header",on:{mousedown:e.startBrowsingX}},e._l(e.daysAvailable,(function(t,n){return s("div",{key:"header-"+t.text,staticClass:"day",style:e.dayStyle(t)},[e.milestones[t.text]?s("div",{staticClass:"milestone",on:{click:function(s){return e.showEditMilestoneModal(t,e.milestones[t.text])}}},[s("div",{staticClass:"milestone-tooltip flexrow",style:e.milestoneTooltipStyle},[s("span",{staticClass:"bull flexrow-item"},[e._v("•")]),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.milestones[t.text].name)+" ")]),s("span",{staticClass:"filler"}),s("edit2-icon",{staticClass:"edit-icon flexrow-item"})],1),e._m(0,!0)]):s("div",{staticClass:"milestone"},[e._m(1,!0)]),s("div",{staticClass:"date-widget"},[s("div",{staticClass:"add-milestone",attrs:{title:e.addMilestoneTitle(t)},on:{click:function(s){return e.showEditMilestoneModal(t,e.milestones[t.text])}}},[s("span",[e._v("+")])]),s("div",{staticClass:"date-name"},[t.newMonth||0===n?s("span",{staticClass:"month-name"},[e._v(" "+e._s(t.monthText)+" ")]):e._e(),s("div",{class:e.dayClass(t,n)},[!t.weekend&&e.zoomLevel>2?s("span",[e._v(" "+e._s(t.dayText)+" / ")]):e._e(),t.weekend?e._e():s("span",{staticClass:"day-number"},[e._v(" "+e._s(t.dayNumber)+" ")])])])])])})),0),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onTimelineScroll,expression:"onTimelineScroll"}],ref:"timeline-content-wrapper",staticClass:"timeline-content-wrapper"},[s("div",{ref:"timeline-content",staticClass:"timeline-content",on:{mousedown:e.startBrowsing,mousewheel:function(t){return e.$emit("change-zoom",t)}}},[s("div",{ref:"timeline-today-position",staticClass:"timeline-position today",style:e.timelineTodayPositionStyle}),s("div",{ref:"timeline-position",staticClass:"timeline-position",style:e.timelinePositionStyle}),e._l(Object.values(e.milestones),(function(t){return s("div",{key:"milestone-"+t.date,staticClass:"milestone-vertical-line",style:e.milestoneLineStyle(t)})})),e._l(e.hierarchy,(function(t){return s("div",{key:"entity-line-"+t.id},[s("div",{staticClass:"entity-line",style:e.entityLineStyle(t)},[s("div",{staticClass:"timebar",style:e.timebarStyle(t)},[s("div",{class:{"timebar-left-hand":t.editable},on:{mousedown:function(s){return e.moveTimebarLeftSide(t,s)}}}),s("div",{staticClass:"filler",on:{mousedown:function(s){return e.moveTimebar(t,s)}}}),s("div",{class:{"timebar-right-hand":t.editable},on:{mousedown:function(s){return e.moveTimebarRightSide(t,s)}}})])]),t.expanded?s("div",{staticClass:"children",style:e.childrenStyle(t)},[t.loading?s("div",{staticClass:"flexrow"},[s("spinner",{staticClass:"child-spinner flexrow-item",staticStyle:{width:"20px",margin:"0 0 10px 10px",opacity:"0"}})],1):e._e(),e._l(t.children,(function(n){return s("div",{key:"entity-line-"+n.id,staticClass:"entity-line child-line"},[s("div",{staticClass:"timebar",style:e.timebarChildStyle(n,t,!0),attrs:{title:n.name+" ("+n.startDate.format("DD-MM")+" - "+n.endDate.format("DD-MM")+")"}},[s("div",{class:{"timebar-left-hand":n.editable},on:{mousedown:function(t){return e.moveTimebarLeftSide(n,t)}}}),s("div",{staticClass:"filler",on:{mousedown:function(t){return e.moveTimebar(n,t)}}}),s("div",{class:{"timebar-right-hand":n.editable},on:{mousedown:function(t){return e.moveTimebarRightSide(n,t)}}})])])}))],2):e._e()])}))],2)])])]),s("edit-milestone-modal",{ref:"edit-milestone-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"milestone-to-edit":e.milestoneToEdit},on:{confirm:e.confirmEditMilestone,cancel:e.hideEditMilestoneModal,"remove-milestone":e.removeMilestone}})],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"bull"},[e._v("•")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"bull"})])}],a=(s("a4d3"),s("4de4"),s("4160"),s("caad"),s("13d5"),s("a9e3"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("7f45"),c=s.n(r),l=s("7930"),d=s("0a35"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[e.isEdit?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("schedule.milestone.edit_milestone"))+": "+e._s(e.milestoneToEdit.date.format("YYYY-MM-DD"))+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("schedule.milestone.add_milestone"))+": "+e._s(e.milestoneToEdit.date.format("YYYY-MM-DD"))+" ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("schedule.milestone.name")},on:{enter:e.confirm},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.isEdit?s("button-simple",{staticClass:"button is-link error",attrs:{text:"Delete milestone"},on:{click:function(t){return e.$emit("remove-milestone",e.milestoneToEdit)}}}):e._e(),s("modal-footer",{attrs:{"error-text":e.$t("schedule.milestone.error"),"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],1)])])},p=[],h=(s("b0c0"),s("d065")),f=s("de40"),m=s("d5c9"),b=s("7bf8");function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var y={name:"edit-milestone-modal",mixins:[h["a"]],components:{ButtonSimple:f["a"],ModalFooter:m["a"],TextField:b["a"]},props:{active:{type:Boolean,default:!1},milestoneToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:""}}},mounted:function(){this.reset()},computed:v({},Object(o["c"])([]),{isEdit:function(){return void 0!==this.milestoneToEdit.id},isFormFilled:function(){return this.form.name.length>0}}),methods:v({},Object(o["b"])([]),{confirm:function(){return this.$emit("confirm",this.form)},reset:function(){this.form={id:this.milestoneToEdit.id||void 0,name:"".concat(this.milestoneToEdit.name||""),date:this.milestoneToEdit.date}}}),watch:{active:function(){var e=this;this.active&&(this.reset(),this.$nextTick((function(){e.$refs.nameField.focus()})))}}},g=y,k=s("2877"),w=Object(k["a"])(g,u,p,!1,null,"74c6ef6d",null),S=w.exports,O=s("eb8c"),C=s("4736"),T=s("be83");function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var j={name:"schedule",components:{ChevronDownIcon:d["e"],ChevronRightIcon:d["g"],Edit2Icon:d["n"],EditMilestoneModal:S,PeopleAvatar:O["a"],ProductionName:C["a"],Spinner:T["a"]},data:function(){return{currentMilestoneDate:null,isBrowsingX:!1,isBrowsingY:!1,isChangeSize:!1,milestoneToEdit:{date:c()()},timelineDisplayedDaysIndex:{},errors:{edit:!1},modals:{edit:!1},loading:{edit:!1}}},props:{endDate:{type:Object,required:!0},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!0},height:{type:Number,default:0},hierarchy:{default:function(){return[]},type:Array},startDate:{type:Object,required:!0},zoomLevel:{type:Number,default:2}},mounted:function(){this.resetScheduleSize(),document.addEventListener("mouseup",this.stopBrowsing),document.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.resetScheduleSize)},destroyed:function(){document.removeEventListener("mouseup",this.stopBrowsing),document.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("resize",this.resetScheduleSize),document.body.style.cursor="default"},computed:E({},Object(o["c"])(["milestones"]),{cellWidth:function(){return 20*this.zoomLevel},daysAvailable:function(){var e=[],t=this.startDate.clone().add(-1,"days"),s=t.toDate(),n=this.endDate.toDate();s.isoweekday=t.isoWeekday(),s.monthday=t.month();while(s<n){var i=new Date(Number(s));i.setDate(s.getDate()+1),i.isoweekday=s.isoweekday+1,i.isoweekday>7&&(i.isoweekday=1,i.newWeek=!0),i.monthday=s.monthday+1,i.monthday>27&&i.getMonth()!==s.getMonth()&&(i.newMonth=!0,i.monthday=1),[6,7].includes(i.isoweekday)&&(i.weekend=!0);var a=c()(i);a.newWeek=i.newWeek,a.newMonth=i.newMonth,a.weekend=i.weekend,a.text=a.format("YYYY-MM-DD"),a.monthText=a.format("MMMM"),a.dayNumber=a.format("DD"),a.dayText=a.format("ddd")[0],e.push(a),s=i}return e},displayedDays:function(){return this.daysAvailable.filter((function(e){return!e.weekend}))},nbDisplayedDays:function(){return this.displayedDays.length},displayedDaysIndex:function(){var e=0,t={};return this.displayedDays.forEach((function(s){t[s.text]=e,e++})),t},totalManDays:function(){return this.hierarchy.reduce((function(e,t){var s=e,n=t.man_days;return t.man_days&&("string"===typeof n&&(n=parseInt(n)),s=e+n),s}),0)},entityList:function(){return this.$refs["entity-list"]},schedule:function(){return this.$refs.schedule},timelineContent:function(){return this.$refs["timeline-content"]},timelineContentWrapper:function(){return this.$refs["timeline-content-wrapper"]},timelineHeader:function(){return this.$refs["timeline-header"]},timelinePosition:function(){return this.$refs["timeline-position"]},scheduleClass:function(){var e={schedule:!0,unselectable:!0};return e["zoom-level-".concat(this.zoomLevel)]=!0,e},timelinePositionStyle:function(){return{width:"".concat(this.cellWidth,"px")}},timelineTodayPositionStyle:function(){var e=c()();return{width:"".concat(this.cellWidth,"px"),left:"".concat(this.getTimebarLeft({startDate:e})-5,"px")}},milestoneTooltipStyle:function(){return{left:-40-10*(3-this.zoomLevel)+"px"}}}),methods:E({},Object(o["b"])(["deleteMilestone","saveMilestone"]),{resetScheduleSize:function(){this.height&&(this.schedule.style.height="".concat(this.height,"px")),this.timelineContent&&(this.timelineContent.style.width=this.nbDisplayedDays*this.cellWidth+"px",this.timelineContentWrapper.style.height=this.schedule.offsetHeight-250+"px",this.entityList.style.height=this.schedule.offsetHeight-169+"px")},onMouseMove:function(e){this.isChangeStartDate?this.changeStartDate(e):this.isChangeEndDate?this.changeEndDate(e):this.isChangeDates?this.changeDates(e):(this.isBrowsingX&&this.scrollScheduleLeft(e),this.isBrowsingY&&this.scrollScheduleTop(e)),this.updatePositionBarPosition(e)},updatePositionBarPosition:function(e){var t=this.timelineContentWrapper.scrollLeft+e.clientX;t-=320,t=Math.floor(t/this.cellWidth)*this.cellWidth,this.timelinePosition.style.left=t+"px"},isValidItemDates:function(e,t){return e&&t&&e.isSameOrAfter(this.startDate.clone().add(-1,"hour"))&&t.isSameOrBefore(this.endDate)&&e.isSameOrBefore(t)&&t.isSameOrAfter(e)},getDisplayedDaysIndex:function(e){6===e.isoWeekday()&&(e=e.add(-1,"days")),7===e.isoWeekday()&&(e=e.add(-2,"days"));var t=e.format("YYYY-MM-DD");return this.displayedDaysIndex[t]},changeDates:function(e){var t=e.clientX-this.initialClientX-this.cellWidth/2,s=Math.ceil(t/this.cellWidth);this.lastStartDate.isBefore(this.startDate)&&(this.lastStartDate=this.startDate.clone()),this.lastEndDate.isBefore(this.startDate)&&(this.lastEndDate=this.startDate.clone().add(1,"days"));var n=this.lastStartDate,i=this.lastEndDate,a=this.getDisplayedDaysIndex(n),o=this.getDisplayedDaysIndex(i),r=o-a,c=this.getDisplayedDaysIndex(n);c+=s,c<0&&(c=0);var l=this.displayedDays[c];if(l){var d=this.displayedDays[c+r];this.isValidItemDates(l,d)&&(this.currentElement.startDate=l,this.currentElement.endDate=d,this.$emit("item-changed",this.currentElement))}},changeStartDate:function(e){var t=e.clientX-this.initialClientX+this.cellWidth/2,s=Math.floor(t/this.cellWidth),n=this.lastStartDate,i=this.currentElement.endDate,a=this.getDisplayedDaysIndex(n),o=this.getDisplayedDaysIndex(i);a+=s,a>o&&(a=o),a<0&&(a=0);var r=this.displayedDays[a];this.isValidItemDates(r,this.currentElement.endDate)&&(this.currentElement.startDate=r,this.$emit("item-changed",this.currentElement))},changeEndDate:function(e){var t=e.clientX-this.initialClientX+this.cellWidth/2,s=Math.ceil(t/this.cellWidth);this.currentElement.startDate.isBefore(this.startDate)&&(this.currentElement.startDate=this.startDate.clone()),this.currentElement.endDate.isBefore(this.startDate)&&(this.currentElement.endDate=this.startDate.clone().add(1,"days")),this.lastEndDate.isBefore(this.startDate)&&(this.lastEndDate=this.startDate.clone().add(1,"days"));var n=this.currentElement.startDate,i=this.lastEndDate,a=this.getDisplayedDaysIndex(n),o=this.getDisplayedDaysIndex(i);o+=s-1,o<a&&(o=a),o>this.displayedDaysIndex.length&&(o=this.displayedDaysIndex.length-1);var r=this.displayedDays[o];this.isValidItemDates(this.currentElement.startDate,r)&&(this.currentElement.endDate=r,this.$emit("item-changed",this.currentElement))},moveTimebar:function(e,t){this.isChangeStartDate||this.isChangeEndDate||!e.editable||(this.isChangeDates=!0,this.isChangeStartDate=!1,this.isChangeEnd=!1,this.currentElement=e,this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="ew-resize")},moveTimebarLeftSide:function(e,t){this.isChangeDates||this.isChangeEndDate||!e.editable||(this.isChangeDates=!1,this.isChangeStartDate=!0,this.isChangeEndDate=!1,this.currentElement=e,e.endDate||(e.endDate=e.startDate.clone().add(1,"days")),this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="w-resize")},moveTimebarRightSide:function(e,t){this.isChangeDates||this.isChangeStartDate||!e.editable||(this.isChangeDates=!1,this.isChangeStartDate=!1,this.isChangeEndDate=!0,this.currentElement=e,e.endDate||(e.endDate=e.startDate.clone().add(1,"days")),this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="e-resize")},onTimelineScroll:function(e,t){var s=t.scrollTop;this.entityList.scrollTop=s;var n=t.scrollLeft;this.timelineHeader.scrollLeft=n},scrollScheduleLeft:function(e){var t=this.timelineContentWrapper.scrollLeft,s=t-e.movementX;this.timelineContentWrapper.scrollLeft=s,this.timelineHeader.scrollLeft=s},scrollScheduleTop:function(e){var t=this.timelineContentWrapper.scrollTop,s=t-e.movementY;this.timelineContentWrapper.scrollTop=s,this.entityList.scrollTop=s},scrollToToday:function(){var e=this;setTimeout((function(){var t=c()();if(t.isAfter(e.startDate)&&t.isBefore(e.endDate)){var s=e.getTimebarLeft({startDate:t})-5,n=s-(e.schedule.offsetWidth/2-300);e.timelineContentWrapper.scrollLeft=n,e.timelineHeader.scrollLeft=n}}),10)},startBrowsing:function(e){this.isChangeStartDate||this.isChangeEndDate||this.isChangeDates||(document.body.style.cursor="grabbing",this.isBrowsingX=!0,this.isBrowsingY=!0)},startBrowsingX:function(e){document.body.style.cursor="grabbing",this.isBrowsingX=!0},startBrowsingY:function(e){document.body.style.cursor="grabbing",this.isBrowsingY=!0},stopBrowsing:function(e){document.body.style.cursor="default",this.isChangeStartDate=!1,this.isChangeEndDate=!1,this.isChangeDates=!1,this.isBrowsingX=!1,this.isBrowsingY=!1},businessDiff:function(e,t){var s=e.clone().endOf("isoweek"),n=t.clone().startOf("isoweek"),i=n.diff(s,"days");if(t.diff(e,"days")>6){var a=5*i/7,o=s.isoWeekday()-e.isoWeekday();0===e.isoWeekday()&&--o;var r=t.isoWeekday()-n.isoWeekday();return 6===t.day()&&--r,Math.ceil(o+a+r-1)}var l=c()(e),d=0;while(l.isBefore(t,"day"))0!==l.day()&&6!==l.day()&&d++,l.add(1,"days");return d},dayClass:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{"day-name":!0,"new-week":e.newWeek||!1,"new-month":e.newMonth||0===t||!1}},dayStyle:function(e){return{"min-width":e.weekend?"0px":this.cellWidth+"px","max-width":e.weekend?"0px":this.cellWidth+"px"}},entityLineStyle:function(e){var t={"background-color":e.color};return e.expanded&&(t["margin-bottom"]="0"),t},timebarStyle:function(e){return{left:this.getTimebarLeft(e)+"px",width:this.getTimebarWidth(e)+"px",cursor:e.editable?"ew-resize":"default"}},timebarChildStyle:function(e,t){return{left:this.getTimebarLeft(e)+"px",width:this.getTimebarWidth(e)+"px",cursor:e.editable?"ew-resize":"default",background:e.color||t.color}},getTimebarLeft:function(e){var t=e.startDate||this.startDate,s=this.businessDiff(this.startDate,t)||0;return s*this.cellWidth+5},getTimebarWidth:function(e){var t=e.startDate||this.startDate,s=e.endDate||e.startDate&&e.startDate.clone().add(1,"days")||this.startDate.clone().add(1,"days"),n=this.businessDiff(t,s);return n>0?(n+1)*this.cellWidth-10:this.cellWidth-10},expandRootElement:function(e){this.$emit("root-element-expanded",e)},expandChildElement:function(e){},childNameStyle:function(e,t){var s=t%2===0,n=s?.7:.9;return{background:l["a"].lightenColor(e.color,n)}},childrenStyle:function(e){return{"border-bottom":"1px solid "+e.color}},showEditMilestoneModal:function(e,t){this.modals.edit=!0,t?(t.date=c()(t.date,"YYYY-MM-DD","en"),this.milestoneToEdit=t):this.milestoneToEdit={date:e}},hideEditMilestoneModal:function(){this.modals.edit=!1},confirmEditMilestone:function(e){var t=this;this.loading.edit=!0,this.saveMilestone(e).then((function(){t.modals.edit=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},removeMilestone:function(e){var t=this;this.loading.edit=!0,this.deleteMilestone(e).then((function(){t.modals.edit=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},milestoneLineStyle:function(e){var t=c()(e.date,"YYYY-MM-DD","en"),s=this.businessDiff(this.startDate,t);return{left:(s+.5)*this.cellWidth+"px"}},addMilestoneTitle:function(e){return"".concat(this.$t("schedule.milestone.add_milestone")," ")+"".concat(e.format("YYYY-MM-DD"))}}),socket:{},watch:{startDate:function(){this.resetScheduleSize(),this.scrollToToday()},endDate:function(){this.resetScheduleSize()},zoomLevel:function(){this.resetScheduleSize()},isLoading:function(){this.$nextTick(this.resetScheduleSize)},height:function(){this.$nextTick(this.resetScheduleSize)}}},x=j,D=(s("0d11"),Object(k["a"])(x,n,i,!1,null,"2f7e548a",null));t["a"]=D.exports},d7f0:function(e,t,s){"use strict";var n=s("18f2"),i=s.n(n);i.a},d8a5:function(e,t,s){},dbde:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"c-mask":!0,"is-active":e.displayed},on:{click:function(t){return e.$emit("click")}}})},i=[],a={name:"combobox-mask",props:{displayed:{type:Boolean,default:!1}},computed:{}},o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"5261c2a0",null);t["a"]=c.exports},dd79:function(e,t,s){},dda8:function(e,t,s){"use strict";var n=s("e628"),i=s.n(n);i.a},de26:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n=30},de40:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"button",attrs:{title:e.title},on:{click:function(t){return e.$emit("click")}}},["undo"===e.icon?s("corner-left-down-icon",{class:e.iconClass}):e._e(),"redo"===e.icon?s("corner-right-down-icon",{class:e.iconClass}):e._e(),"plus"===e.icon?s("plus-icon",{class:e.iconClass}):e._e(),"comment"===e.icon?s("message-square-icon",{class:e.iconClass}):e._e(),"download"===e.icon?s("download-icon",{class:e.iconClass}):e._e(),"upload"===e.icon?s("upload-icon",{class:e.iconClass}):e._e(),"film"===e.icon?s("film-icon",{class:e.iconClass}):e._e(),"play"===e.icon?s("play-icon",{class:e.iconClass}):e._e(),"pause"===e.icon?s("pause-icon",{class:e.iconClass}):e._e(),"edit"===e.icon?s("edit-icon",{class:e.iconClass}):e._e(),"image"===e.icon?s("image-icon",{class:e.iconClass}):e._e(),"maximize"===e.icon?s("maximize-icon",{class:e.iconClass}):e._e(),"delete"===e.icon?s("trash-icon",{class:e.iconClass}):e._e(),"restore"===e.icon?s("rotate-ccw-icon",{class:e.iconClass}):e._e(),"back"===e.icon?s("skip-back-icon",{class:e.iconClass}):e._e(),"forward"===e.icon?s("skip-forward-icon",{class:e.iconClass}):e._e(),"left"===e.icon?s("chevron-left-icon",{class:e.iconClass}):e._e(),"right"===e.icon?s("chevron-right-icon",{class:e.iconClass}):e._e(),"compare"===e.icon?s("copy-icon",{class:e.iconClass}):e._e(),"remove"===e.icon?s("x-icon",{class:e.iconClass}):e._e(),"pencil"===e.icon?s("edit2-icon",{class:e.iconClass}):e._e(),"layers"===e.icon?s("layers-icon",{class:e.iconClass}):e._e(),e.isText?s("span",{class:{text:!0,"is-hidden-touch":e.isResponsive}},[e._v(" "+e._s(e.text)+" ")]):e._e()],1)},i=[],a=s("0a35"),o={name:"button-simple",components:{ChevronLeftIcon:a["f"],ChevronRightIcon:a["g"],CornerLeftDownIcon:a["j"],CornerRightDownIcon:a["k"],CopyIcon:a["i"],DownloadIcon:a["m"],EditIcon:a["o"],Edit2Icon:a["n"],FilmIcon:a["r"],ImageIcon:a["s"],LayersIcon:a["t"],MaximizeIcon:a["w"],MessageSquareIcon:a["x"],PauseIcon:a["z"],PlayIcon:a["A"],PlusIcon:a["B"],RotateCcwIcon:a["D"],SkipBackIcon:a["G"],SkipForwardIcon:a["H"],TrashIcon:a["J"],UploadIcon:a["K"],XIcon:a["N"]},props:{icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean},text:{default:"",type:String},title:{default:"",type:String}},computed:{isText:function(){return this.text&&this.text.length>0},iconClass:function(){return{icon:!0,"is-small":!0,"only-icon":!this.isText}}}},r=o,c=(s("a4c6"),s("2877")),l=Object(c["a"])(r,n,i,!1,null,"174ecc1f",null);t["a"]=l.exports},de95:function(e,t,s){"use strict";var n=s("c802"),i=s.n(n);i.a},dea4:function(e,t,s){"use strict";var n=s("ec3a"),i=s.n(n);i.a},deb3:function(e,t,s){"use strict";var n=s("6e01"),i=s.n(n);i.a},e007:function(e,t,s){"use strict";var n=s("16ce"),i=s.n(n);i.a},e044:function(e,t,s){},e07d:function(e,t,s){"use strict";s("a4d3"),s("4de4"),s("c740"),s("4160"),s("a434"),s("e439"),s("dbb4"),s("b64b"),s("159b");var n,i=s("ade3"),a=(s("b0c0"),s("edbf")),o=function(e){return{name:e.name,short_name:e.short_name,is_reviewable:Boolean("true"===e.is_reviewable),is_done:Boolean("true"===e.is_done),is_retake:Boolean("true"===e.is_retake),is_artist_allowed:Boolean("true"===e.is_artist_allowed),is_client_allowed:Boolean("true"===e.is_client_allowed),color:e.color}},r={getTaskStatuses:function(e){a["a"].get("/api/data/task-status",e)},getTaskStatus:function(e,t){a["a"].get("/api/data/task-status/".concat(e),t)},newTaskStatus:function(e,t){var s=o(e);a["a"].post("/api/data/task-status/",s,t)},updateTaskStatus:function(e,t){var s=o(e);a["a"].put("/api/data/task-status/".concat(e.id),s,t)},deleteTaskStatus:function(e,t){a["a"].del("/api/data/task-status/".concat(e.id),t)}},c=s("2229"),l=s("9fb0");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={taskStatus:[],taskStatusMap:{}},h=p,f={taskStatus:function(e){return e.taskStatus},taskStatusMap:function(e){return e.taskStatusMap},editTaskStatus:function(e){return e.editTaskStatus},deleteTaskStatus:function(e){return e.deleteTaskStatus},taskStatusForCurrentUser:function(e,t,s,n){return n.isCurrentUserManager?e.taskStatus:n.isCurrentUserClient?e.taskStatus.filter((function(e){return e.is_client_allowed})):e.taskStatus.filter((function(e){return e.is_artist_allowed}))}},m={loadTaskStatuses:function(e,t){var s=e.commit;e.state;s(l["Bd"]),r.getTaskStatuses((function(e,n){e?s(l["Ad"]):s(l["zd"],n),t&&t(e)}))},loadTaskStatus:function(e,t){var s=e.commit;e.state;r.getTaskStatus(t,(function(e,t){e?console.error(e):s(l["qc"],t)}))},newTaskStatus:function(e,t){var s=e.commit,n=(e.state,t.form),i=t.callback;s(l["sc"],n),r.newTaskStatus(n,(function(e,t){e?s(l["rc"]):s(l["qc"],t),i&&i(e,t)}))},saveTaskStatus:function(e,t){var s=e.commit,n=(e.state,t.form),i=t.callback;s(l["sc"]),r.updateTaskStatus(n,(function(e,t){e?s(l["rc"]):s(l["qc"],t),i&&i(e)}))},deleteTaskStatus:function(e,t){var s=e.commit,n=(e.state,t.taskStatus),i=t.callback;s(l["Eb"]),r.deleteTaskStatus(n,(function(e){e?s(l["Db"]):s(l["Cb"],n),i&&i(e)}))}},b=(n={},Object(i["a"])(n,l["Bd"],(function(e){e.taskStatus=[],e.taskStatusMap={}})),Object(i["a"])(n,l["Ad"],(function(e){e.taskStatus=[],e.taskStatusMap={}})),Object(i["a"])(n,l["zd"],(function(e,t){e.taskStatus=Object(c["d"])(t),e.taskStatusMap={},t.forEach((function(t){null===t.is_artist_allowed&&(t.is_artist_allowed=!0),null===t.is_client_allowed&&(t.is_client_allowed=!1),e.taskStatusMap[t.id]=t}))})),Object(i["a"])(n,l["sc"],(function(e,t){})),Object(i["a"])(n,l["rc"],(function(e){})),Object(i["a"])(n,l["qc"],(function(e,t){var s=e.taskStatusMap[t.id];s&&s.id?Object.assign(s,t):(e.taskStatus.push(t),e.taskStatus=Object(c["d"])(e.taskStatus)),e.taskStatusMap[t.id]=t})),Object(i["a"])(n,l["Eb"],(function(e){})),Object(i["a"])(n,l["Db"],(function(e){})),Object(i["a"])(n,l["Cb"],(function(e,t){var s=e.taskStatus.findIndex((function(e){return e.id===t.id}));s>=0&&e.taskStatus.splice(s,1),delete e.taskStatusMap[t.id]})),Object(i["a"])(n,l["Be"],(function(e){Object.assign(e,u({},p))})),n);t["a"]={state:h,getters:f,actions:m,mutations:b}},e0b5:function(e,t,s){},e0c8:function(e,t,s){},e211:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{staticClass:"button",attrs:{title:e.title,to:e.path}},[e.icon.length>0&&e.icon.startsWith("fa")?s("span",{staticClass:"icon is-small"},[s("i",{class:"fa "+e.icon})]):e._e(),"plus"===e.icon?s("plus-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"download"===e.icon?s("download-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"upload"===e.icon?s("upload-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"edit"===e.icon?s("edit-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"delete"===e.icon?s("trash-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),"restore"===e.icon?s("rotate-ccw-icon",{class:{icon:!0,"is-small":!0,"only-icon":!e.isText}}):e._e(),e.isText?s("span",{class:{text:!0,"is-hidden-touch":e.isResponsive}},[e._v(" "+e._s(e.text)+" ")]):e._e()],1)},i=[],a=s("0a35"),o={name:"button-link",components:{DownloadIcon:a["m"],EditIcon:a["o"],PlusIcon:a["B"],RotateCcwIcon:a["D"],TrashIcon:a["J"],UploadIcon:a["K"]},props:{text:{default:"",type:String},title:{default:"",type:String},path:{default:""},icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean}},computed:{isText:function(){return this.text&&this.text.length>0}}},r=o,c=(s("8f49"),s("2877")),l=Object(c["a"])(r,n,i,!1,null,"143e1424",null);t["a"]=l.exports},e311:function(e,t,s){},e4fd:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("div",{staticClass:"task-type-combo"},[s("div",{staticClass:"flexrow",on:{click:e.toggleTaskTypeList}},[s("div",{staticClass:"selected-task-type-line flexrow-item"},[e.currentTaskType?s("task-type-name",{attrs:{"task-type":e.currentTaskType}}):e._e()],1),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),e.showTaskTypeList?s("div",{ref:"select",staticClass:"select-input"},e._l(e.taskTypeList,(function(t){return s("div",{key:t.id,staticClass:"task-type-line",on:{click:function(s){return e.selectTaskType(t)}}},[s("task-type-name",{attrs:{"task-type":t}})],1)})),0):e._e()]),s("combobox-mask",{attrs:{displayed:e.showTaskTypeList},on:{click:e.toggleTaskTypeList}})],1)},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("0a35"),c=s("dbde"),l=s("274f");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"combobox-task-type",components:{ChevronDownIcon:r["e"],ComboboxMask:c["a"],TaskTypeName:l["a"]},data:function(){return{showTaskTypeList:!1}},props:{label:{default:"",type:String},taskTypeList:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){},computed:u({},Object(o["c"])(["taskTypeMap"]),{currentTaskType:function(){return this.value?this.taskTypeMap[this.value]:this.taskTypeList[0]}}),methods:{selectTaskType:function(e){this.$emit("input",e.id),this.showTaskTypeList=!1},toggleTaskTypeList:function(){this.showTaskTypeList=!this.showTaskTypeList}}},h=p,f=(s("59b8"),s("2877")),m=Object(f["a"])(h,n,i,!1,null,"dea0a534",null);t["a"]=m.exports},e5c3:function(e,t,s){},e60b:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isLoading?s("spinner",{staticClass:"table-info"}):e._e(),e.isError?s("div",{staticClass:"has-text-centered table-info"},[s("span",{staticClass:"tag is-danger"},[e._v(" "+e._s(e.$t("main.loading_error"))+" ")])]):e._e()],1)},i=[],a=s("be83"),o={name:"table-info",components:{Spinner:a["a"]},props:{isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}}},r=o,c=s("2877"),l=Object(c["a"])(r,n,i,!1,null,"0a2e5274",null);t["a"]=l.exports},e628:function(e,t,s){},e708:function(e,t,s){"use strict";var n=s("ba33"),i=s.n(n);i.a},e739:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list task-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[e._v(" "+e._s(e.$t("tasks.fields.production"))+" ")]),s("th",{ref:"th-type",staticClass:"type"},[e._v(" "+e._s(e.$t("tasks.fields.task_type"))+" ")]),s("th",{staticClass:"thumbnail"}),s("th",{ref:"th-name",staticClass:"name"},[e._v(" "+e._s(e.$t("tasks.fields.entity"))+" ")]),s("th",{staticClass:"description"},[e._v(" "+e._s(e.$t("assets.fields.description"))+" ")]),s("th",{staticClass:"estimation"},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{staticClass:"estimation"},[e._v(" "+e._s(e.$t("tasks.fields.duration").substring(0,3))+". ")]),s("th",{staticClass:"due-date"},[e._v(" "+e._s(e.$t("tasks.fields.due_date"))+" ")]),s("th",{staticClass:"status"},[e._v(" "+e._s(e.$t("tasks.fields.task_status"))+" ")]),e.done?s("th",{staticClass:"end-date"},[e._v(" "+e._s(e.$t("tasks.fields.end_date"))+" ")]):s("th",{staticClass:"last-comment"},[e._v(" "+e._s(e.$t("tasks.fields.last_comment"))+" ")])])])])]),e.tasks.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},e._l(e.displayedTasks,(function(t,n){return s("tr",{key:t+"-"+n,class:{selected:!(!e.selectionGrid||!e.selectionGrid[n])&&e.selectionGrid[n][0]},on:{click:function(t){return e.onLineClicked(n,t)}}},[s("production-name-cell",{staticClass:"production",attrs:{"is-tooltip":!0,entry:e.productionMap[t.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":t.project_id,entry:e.getTaskType(t)}}),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{"empty-width":60,"empty-height":40,entity:{preview_file_id:t.entity_preview_file_id}}})],1),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:e.entityPath(t)}},[e._v(" "+e._s(t.full_entity_name)+" ")])],1),s("description-cell",{staticClass:"description",attrs:{entry:{description:t.entity_description}}}),s("td",{staticClass:"estimation"},[e._v(" "+e._s(e.formatDuration(t.estimation))+" ")]),s("td",{staticClass:"estimation"},[e._v(" "+e._s(e.formatDuration(t.duration))+" ")]),s("td",{staticClass:"due-date"},[e._v(" "+e._s(e.formatDate(t.due_date))+" ")]),s("validation-cell",{ref:"validation-"+n+"-0",refInFor:!0,staticClass:"status unselectable",attrs:{"task-test":t,"is-border":!1,"is-assignees":!1,selectable:!e.done,clickable:!1,selected:!(!e.selectionGrid||!e.selectionGrid[n])&&e.selectionGrid[n][0],rowX:n,columnY:0,column:t.taskStatus},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}}),e.done?s("td",{staticClass:"end-date"},[e._v(" "+e._s(e.formatDate(t.end_date))+" ")]):s("last-comment-cell",{staticClass:"last-comment",attrs:{task:t}})],1)})),0)])]):e._e(),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),0!==e.tasks.length||e.isLoading?e._e():s("div",{staticClass:"has-text-centered empty-list"},[e._m(0),s("p",[e._v(" "+e._s(e.$t("people.no_task_assigned"))+" ")])]),e.tasks.length&&!e.isLoading?s("p",{staticClass:"has-text-centered footer-info"},[e._v(" "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.tasks",e.tasks.length))+" ")]):e._e()],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("img",{attrs:{src:s("f64c")}})])}],a=(s("a4d3"),s("4de4"),s("4160"),s("fb6a"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("7f45"),c=s.n(r),l=s("bb21"),d=s("58f5"),u=s("e60b"),p=s("0fcb"),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("div",{staticClass:"flexrow"},[e.task.last_comment.person?s("people-avatar",{staticClass:"flexrow-item avatar-wrapper",attrs:{size:25,"font-size":14,person:e.task.last_comment.person}}):s("span",{staticClass:"no-avatar"}),e.commentText&&e.commentText.length>0?s("span",{staticClass:"flexrow-item last-comment pointer",domProps:{innerHTML:e._s(e.compileMarkdown(e.commentText))},on:{click:e.onClick}}):e.task.last_comment.person?s("span",{staticClass:"flexrow-item last-comment no-comment"},[e._v(" "+e._s(e.$t("main.empty_comment"))+" ")]):e._e()],1)])},f=[],m=s("e0c1"),b=s.n(m),_=s("eb8c");function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={name:"last-comment-cell",components:{PeopleAvatar:_["a"]},data:function(){return{isOpen:!1,timeout:null}},props:["task"],computed:y({},Object(o["c"])([]),{commentText:function(){var e=this.task.last_comment.text,t=140,s=e||"";return void 0!==e&&e.length>t&&(s=e.slice(0,t)+"..."),s}}),methods:y({},Object(o["b"])([]),{compileMarkdown:function(e){return b()(e||"")},onClick:function(){this.isOpen=!this.isOpen}})},k=g,w=(s("8ab4"),s("2877")),S=Object(w["a"])(k,h,f,!1,null,"7c166565",null),O=S.exports,C=s("09a4"),T=s("cb0e"),P=s("1338"),E=s("4f18"),j=s("de26");function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function D(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var A={name:"todos-list",mixins:[E["a"],P["a"]],components:{EntityThumbnail:l["a"],DescriptionCell:p["a"],LastCommentCell:O,ProductionNameCell:C["a"],TableInfo:u["a"],TaskTypeName:d["a"],ValidationCell:T["a"]},props:["done","tasks","isLoading","isError","selectionGrid"],data:function(){return{page:1}},mounted:function(){this.page=1,this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:D({},Object(o["c"])(["nbSelectedTasks","taskTypeMap","productionMap"]),{displayedTasks:function(){return this.tasks.slice(0,this.page*j["a"])}}),methods:D({},Object(o["b"])([]),{setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},formatDate:function(e){return e?c()(e).fromNow():""},onBodyScroll:function(e,t){this.$refs.headerWrapper.style.left="-".concat(t.scrollLeft,"px"),this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},onLineClicked:function(e,t){var s="validation-"+e+"-0",n=this.$refs[s][0];n.select(t)},onTaskSelected:function(e){var t=this;if(e.isShiftKey){if(this.lastSelection){var s=this.lastSelection.x,n=e.x;e.x<this.lastSelection.x&&(s=e.x,n=this.lastSelection.x);for(var i=s;i<=n;i++){var a="validation-"+i+"-0",o=this.$refs[a][0];this.selectionGrid[i][0]||o.select({ctrlKey:!0,isUserClick:!1})}}}else e.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(this.$store.commit("ADD_SELECTED_TASK",e),!e.isShiftKey&&e.isUserClick){var r=e.x,c=0;this.lastSelection={x:r,y:c};var l="validation-"+r+"-"+c,d=this.$refs[l][0];this.$nextTick((function(){t.scrollToValidationCell(d)}))}},onTaskUnselected:function(e){e.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",e):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",e):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",e))},getTaskType:function(e){var t=this.taskTypeMap[e.task_type_id],s=this.productionMap[e.project_id];return t.episode_id=e.episode_id,s&&"tvshow"===s.production_type&&!e.episode_id&&(t.episode_id=s.first_episode_id),t},entityPath:function(e){var t=e.sequence_name?"shot":"asset",s={name:t,params:{production_id:e.project_id}};"asset"===t?s.params.asset_id=e.entity_id:s.params.shot_id=e.entity_id;var n=this.productionMap[e.project_id],i=e.episode_id;return n&&"tvshow"===n.production_type&&!i&&(i=n.first_episode_id),i&&(s.name="episode-".concat(t),s.params.episode_id=i),s},onKeyDown:function(e){var t=this.lastSelection?this.lastSelection:{x:0,y:0},s=t.x,n=t.y,i=null;e.ctrlKey&&(37===e.keyCode?i=this.select(s,n-1):38===e.keyCode?i=this.select(s-1,n):39===e.keyCode?i=this.select(s,n+1):40===e.keyCode&&(i=this.select(s+1,n)),this.scrollToValidationCell(i))},scrollToValidationCell:function(e){if(e){var t=20,s=e.$el.getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),i=s.bottom>n.bottom-t,a=s.top<n.top+t,o=s.right>n.right-t,r=s.left<n.left+t;if(i){var c=s.bottom-n.bottom+t;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var l=n.top-s.top+t;this.setScrollPosition(this.$refs.body.scrollTop-l)}if(o){var d=s.right-n.right+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft+d)}else if(r){var u=n.left-s.left+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}},select:function(e,t){var s="validation-"+e+"-"+t,n=this.$refs[s];return n&&n[0].$el.click(),n?n[0]:0},resizeHeaders:function(){var e=this,t=this.$refs["body-tbody"],s=t&&t.children;if(s){var n=t.children[0],i=[{index:1,name:"type"},{index:3,name:"name"}];i.forEach((function(t){var s=Math.max(n.children[t.index].offsetWidth,100);e.$refs["th-"+t.name].style["min-width"]="".concat(s,"px")}))}}})},M=A,L=(s("3c89"),Object(w["a"])(M,n,i,!1,null,"171a5454",null));t["a"]=L.exports},e90c:function(e,t,s){"use strict";var n=s("b060"),i=s.n(n);i.a},e92a:function(e,t,s){},e9c6:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s("99af"),s("7db0"),s("4160"),s("b0c0"),s("159b");var n=s("7930"),i=s("ba4c"),a=s.n(i),o={created:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)},mounted:function(){this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{getBackground:function(e){return n["a"].hexToRGBa(e,.08)},buildHideKey:function(e){return"column-".concat(this.currentProduction.id,"-").concat(e)},initHiddenColumns:function(e,t){var s=this;e&&t&&e.forEach((function(e){var n=s.buildHideKey(e);a.a.set(t,e,"true"===localStorage.getItem(n))}))},hideColumn:function(e){var t=this.buildHideKey(e),s=!0;return"true"===localStorage.getItem(t)&&(s=!1),localStorage.setItem(t,s),a.a.set(this.hiddenColumns,e,s),this.hiddenColumns[e]=s,s},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},setScrollLeftPosition:function(e){this.$refs.body&&(this.$refs.body.scrollLeft=e)},getValidationStyle:function(e){var t=this.taskTypeMap[e];return{"border-left":"1px solid ".concat(t.color),background:this.getBackground(t.color)}},onTaskSelected:function(e){var t=this,s=[];if(e.isShiftKey){if(this.lastSelection){var n=this.lastSelection.x,i=e.x,a=this.lastSelection.y,o=e.y,r=this.assetSelectionGrid;r||(r=this.shotSelectionGrid),e.x<this.lastSelection.x&&(n=e.x,i=this.lastSelection.x),e.y<this.lastSelection.y&&(a=e.y,o=this.lastSelection.y);for(var c=n;c<=i;c++)for(var l=a;l<=o;l++){var d="validation-"+c+"-"+l,u=this.$refs[d][0];r[c][l]||s.push({entity:u.entity,column:u.column,task:u.task,x:u.rowX,y:u.columnY})}this.$store.commit("ADD_SELECTED_TASK",e)}}else e.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(0===s.length?this.$store.commit("ADD_SELECTED_TASK",e):this.$store.commit("ADD_SELECTED_TASKS",s),!e.isShiftKey&&e.isUserClick){var p=e.x,h=e.y;this.lastSelection={x:p,y:h};var f="validation-"+p+"-"+h,m=this.$refs[f][0];this.$nextTick((function(){t.scrollToValidationCell(m)}))}},onTaskUnselected:function(e){e.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",e):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",e):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",e))},showHeaderMenu:function(e,t){var s=this.$refs.headerMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var n=t.srcElement.parentNode.parentNode;"TH"!==n.tagName&&(n=n.parentNode);var i=n.getBoundingClientRect(),a=i.left+11,o=i.bottom+10,r=Math.max(100,i.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastHeaderMenuDisplayed=e},showMetadataHeaderMenu:function(e,t){var s=this.$refs.headerMetadataMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var n=t.srcElement.parentNode.parentNode,i=n.getBoundingClientRect(),a=i.left+11,o=i.bottom+10,r=Math.max(100,i.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastMetadaDataHeaderMenuDisplayed=e},onMinimizeColumnToggled:function(){this.hideColumn(this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onDeleteAllTasksClicked:function(){this.$emit("delete-all-tasks",this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onAddMetadataClicked:function(){this.$emit("add-metadata")},onEditMetadataClicked:function(){this.$emit("edit-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},onDeleteMetadataClicked:function(){this.$emit("delete-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},resizeSplittedTableHeaders:function(e){var t=this;if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].length>0&&this.$refs["body-tbody"][0].children.length>1){var s=this.$refs["body-tbody"][0].children[1];e.forEach((function(e){var n=s.children[e.index].offsetWidth;t.$refs["th-"+e.name]&&(t.$refs["th-"+e.name].style["min-width"]="".concat(n,"px"))}))}},onSortByTaskTypeClicked:function(){var e=this.lastHeaderMenuDisplayed;this.$emit("change-sort",{type:"status",column:e,name:this.taskTypeMap[e].name}),this.showHeaderMenu()},onSortByMetadataClicked:function(){var e=this.lastMetadaDataHeaderMenuDisplayed,t=this.currentProduction.descriptors.find((function(t){return t.id===e}));this.$emit("change-sort",{type:"metadata",column:t.field_name,name:t.name}),this.showMetadataHeaderMenu()},getGroupKey:function(e,t,s){var n=e[0]?e[0][s]+e[0].canceled:"";return"".concat(t,"-").concat(n)}}}},ea16:function(e,t,s){},ea46:function(e,t,s){"use strict";var n=s("d8a5"),i=s.n(n);i.a},eae5:function(e,t,s){"use strict";var n=s("1517"),i=s.n(n);i.a},eb8c:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isLink?s("span",{staticClass:"avatar has-text-centered",style:{background:e.person.color,width:e.size+"px",height:e.size+"px","min-width":e.size+"px","min-height":e.size+"px","font-size":e.person.has_avatar?0:e.fontSize+"px"}},[s("router-link",{staticClass:"avatar-link",attrs:{to:{name:"person",params:{person_id:e.person.id}},title:e.person.full_name}},[e.person.has_avatar&&e.noCache?s("img",{attrs:{src:e.avatarPath}}):e.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath,expression:"avatarPath"}],key:e.avatarKey}):e._e(),e.person.has_avatar?e._e():s("span",[e._v(" "+e._s(e.initials)+" ")])])],1):s("span",{staticClass:"avatar has-text-centered",style:{background:e.person.color,width:e.size+"px",height:e.size+"px","font-size":e.fontSize+"px"},attrs:{title:e.person.full_name}},[e.person.has_avatar&&e.noCache?s("img",{attrs:{src:e.avatarPath}}):e.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath,expression:"avatarPath"}],key:e.avatarKey}):s("span",[e._v(" "+e._s(e.initials)+" ")])])},i=[],a=(s("a9e3"),{name:"person-avatar",data:function(){return{avatarPath:"",avatarKey:"",initials:""}},props:{person:{type:Object,default:function(){return{id:"empty",color:"#FFF"}}},size:{type:Number,default:40},"font-size":{type:Number,default:18},"is-link":{type:Boolean,default:!0},"no-cache":{type:Boolean,default:!1}},created:function(){this.reloadAvatar()},methods:{reloadAvatar:function(){this.avatarPath=this.person.avatarPath+"?unique="+this.person.uniqueHash,this.avatarKey=this.person.id+"-"+this.person.uniqueHash}},mounted:function(){this.initials=this.person.initials},watch:{person:function(){this.reloadAvatar()},"person.uniqueHash":function(){this.reloadAvatar()}}}),o=a,r=(s("8bc7"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"be351bf6",null);t["a"]=c.exports},ec12:function(e,t,s){},ec21:function(e,t,s){"use strict";var n=s("e311"),i=s.n(n);i.a},ec3a:function(e,t,s){},ecc2:function(e,t,s){"use strict";var n=s("d6f7"),i=s.n(n);i.a},edbf:function(e,t,s){"use strict";s("99af"),s("d3b7");var n=s("db82"),i=s.n(n),a=(s("ac1f"),s("5319"),{backToLogin:function(){"/login"!==window.location&&window.location.replace("/login")}}),o=a,r={get:function(e,t){i.a.get(e).end((function(e,s){t(e,s.body)}))},post:function(e,t,s){i.a.post(e).send(t).end((function(e,t){if(401===t.statusCode)return o.backToLogin();s(e,t.body)}))},put:function(e,t,s){i.a.put(e).send(t).end((function(e,t){if(401===t.statusCode)return o.backToLogin();s(e,t.body)}))},del:function(e,t){i.a.del(e).end((function(e,s){if(401===s.statusCode)return o.backToLogin();t(e,s.body)}))},pget:function(e){return new Promise((function(t,s){r.get(e,(function(e,n){e?s(e):t(n)}))}))},ppost:function(e,t,s){return new Promise((function(s,n){i.a.post(e).send(t).end((function(e,t){401===t.statusCode?(o.backToLogin(),n(e)):e?n(e):s(t.body)}))}))},pput:function(e,t,s){return new Promise((function(s,n){i.a.put(e).send(t).end((function(e,t){401===t.statusCode?(o.backToLogin(),n(e)):e?n(e):s(t.body)}))}))},pdel:function(e,t){return new Promise((function(t,s){i.a.del(e).end((function(e,n){401===n.statusCode?(o.backToLogin(),s(e)):e?s(e):t(n.body)}))}))},getModel:function(e,t){return new Promise((function(s,n){var i="/api/data/".concat(e,"/").concat(t);r.get(i,(function(e,t){e?n(e):s(t)}))}))}};t["a"]=r},ee35:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[e.isEditing?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("tasks.change_preview"))+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("tasks.add_preview"))+" ")]),s("p",[e._v(" "+e._s(e.$t("tasks.select_preview_file"))+" ")]),s("file-upload",{ref:"preview-field",attrs:{label:e.$t("main.csv.upload_file"),accept:e.extensions,multiple:!0},on:{fileselected:e.onFileSelected}}),e.isError?s("p",{staticClass:"error"},[e._v(" "+e._s(e.$t("tasks.add_preview_error"))+" ")]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":void 0==e.forms},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],1)])])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("caad"),s("13d5"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("4085");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"add-preview-modal",components:{FileUpload:r["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},extensions:{type:String,default:".png,.jpg,.mp4,.mov,.obj,.pdf,.ma,.mb,.zip,.rar,.jpeg,.blend,.wmv,.m4v,.ai,.comp,.exr,.psd,.hip,.gif,.ae,.fla,.flv,.swf"}},data:function(){return{forms:null}},mounted:function(){this.forms=null},computed:l({},Object(o["c"])([])),methods:l({},Object(o["b"])([]),{onFileSelected:function(e){this.forms=e;var t=e.length>1,s=e.reduce((function(e,t){var s=t.get("file").name,n=s.substring(s.length-3);return e&&["png","jpg"].includes(n)}),!0);t&&!s?this.reset():this.$emit("fileselected",e)},reset:function(){this.$refs["preview-field"].reset(),this.forms=null}}),watch:{active:function(){this.reset()}}},u=d,p=(s("8dc7"),s("2877")),h=Object(p["a"])(u,n,i,!1,null,"a4d4259e",null);t["a"]=h.exports},ef8b:function(e,t,s){"use strict";s("a4d3"),s("4de4"),s("c740"),s("4160"),s("d81d"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("159b");var n,i=s("ade3"),a=s("ba4c"),o=s.n(a),r=(s("a9e3"),s("edbf")),c={getTaskTypes:function(){return r["a"].pget("/api/data/task-types")},newTaskType:function(e){var t={name:e.name,color:e.color,priority:Number(e.priority),for_shots:Boolean("true"===e.for_shots),allow_timelog:Boolean("true"===e.allow_timelog)};return r["a"].ppost("/api/data/task-types/",t)},updateTaskType:function(e){var t={name:e.name,color:e.color};return e.priority&&e.priority>0&&(t.priority=Number(e.priority)),void 0!==e.allow_timelog&&(t.allow_timelog=Boolean("true"===e.allow_timelog)),void 0!==e.for_shots&&(t.for_shots=Boolean("true"===e.for_shots)),r["a"].pput("/api/data/task-types/".concat(e.id),t)},deleteTaskType:function(e){return r["a"].pdel("/api/data/task-types/".concat(e.id))},getTaskType:function(e){return r["a"].pget("/api/data/task-types/".concat(e))}},l=s("2229"),d=s("9fb0");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={taskTypes:[],taskTypeMap:{},sequenceSubscriptions:{},editTaskType:{isLoading:!1,isError:!1},deleteTaskType:{isLoading:!1,isError:!1}},f=p({},h),m={taskTypes:function(e){return e.taskTypes},taskTypeMap:function(e){return e.taskTypeMap},sequenceSubscriptions:function(e){return e.sequenceSubscriptions},editTaskType:function(e){return e.editTaskType},deleteTaskType:function(e){return e.deleteTaskType},currentTaskType:function(e,t,s){return e.taskTypeMap[s.route.params.task_type_id]||{}},assetTaskTypes:function(e){return e.taskTypes.filter((function(e){return!e.for_shots}))},shotTaskTypes:function(e){return e.taskTypes.filter((function(e){return e.for_shots}))},getTaskTypeOptions:function(e){return e.taskTypes.map((function(e){return{label:e.name,value:e.id}}))},getAssetTaskTypeOptions:function(e){return e.taskTypes.filter((function(e){return!e.for_shots})).map((function(e){return{label:e.name,value:e.id}}))},getShotTaskTypeOptions:function(e){return e.taskTypes.filter((function(e){return e.for_shots})).map((function(e){return{label:e.name,value:e.id}}))},getTaskType:function(e,t){return function(t){return e.taskTypeMap[t]}}},b={loadTaskTypes:function(e){var t=e.commit;e.state;return t(d["Fd"]),c.getTaskTypes().then((function(e){t(d["Dd"],e),Promise.resolve(e)})).catch((function(e){console.error(e),Promise.reject(e)}))},loadTaskType:function(e,t){var s=e.commit;e.state;return c.getTaskType(t).then((function(e){s(d["tc"],e),Promise.resolve(e)})).catch((function(e){console.error(e),Promise.reject(e)}))},newTaskType:function(e,t){var s=e.commit;e.state;s(d["vc"],t),c.newTaskType(t).then((function(e){s(d["tc"],e),Promise.resolve(e)})).catch((function(e){console.error(e),s(d["uc"])}))},editTaskType:function(e,t){var s=e.commit;e.state;s(d["vc"]),c.updateTaskType(t).then((function(e){s(d["tc"],e),Promise.resolve(e)})).catch((function(e){console.error(e),s(d["uc"])}))},deleteTaskType:function(e,t){var s=e.commit;e.state;s(d["Hb"]),c.deleteTaskType(t).then((function(){s(d["Fb"],t),Promise.resolve()})).catch((function(e){console.error(e),s(d["Gb"])}))},initTaskType:function(e,t){e.commit;var s=e.dispatch,n=(e.state,e.rootState,e.rootGetters);return new Promise((function(e,i){n.currentTaskType.for_shots?Object.keys(n.shotMap).length<2||t?0===n.episodes.length&&n.isTVShow?s("loadEpisodes",(function(t){t?i(t):s("loadShots",(function(t){t?i(t):e()}))})):s("loadShots",(function(t){t?i(t):e()})):e():Object.keys(n.assetMap).length<2||t?s("loadAssets",(function(t){t?i(t):e()})):e()}))}},_=(n={},Object(i["a"])(n,d["Fd"],(function(e){})),Object(i["a"])(n,d["Ed"],(function(e){e.taskTypes=[],e.taskTypeMap={}})),Object(i["a"])(n,d["Dd"],(function(e,t){e.taskTypes=Object(l["m"])(t),e.taskTypeMap={},t.forEach((function(t){e.taskTypeMap[t.id]=t}))})),Object(i["a"])(n,d["vc"],(function(e,t){e.editTaskType.isLoading=!0,e.editTaskType.isError=!1})),Object(i["a"])(n,d["uc"],(function(e){e.editTaskType.isLoading=!1,e.editTaskType.isError=!0})),Object(i["a"])(n,d["tc"],(function(e,t){var s=e.taskTypeMap[t.id];s&&s.id?Object.assign(s,t):(e.taskTypes.push(t),e.taskTypeMap[t.id]=t),e.taskTypes=Object(l["m"])(e.taskTypes),e.editTaskType={isLoading:!1,isError:!1}})),Object(i["a"])(n,d["Hb"],(function(e){e.deleteTaskType={isLoading:!0,isError:!1}})),Object(i["a"])(n,d["Gb"],(function(e){e.deleteTaskType={isLoading:!1,isError:!0}})),Object(i["a"])(n,d["Fb"],(function(e,t){var s=e.taskTypes.findIndex((function(e){return e.id===t.id}));s>=0&&e.taskTypes.splice(s,1),delete e.taskTypeMap[t.id],e.deleteTaskType={isLoading:!1,isError:!1}})),Object(i["a"])(n,d["pd"],(function(e,t){var s=t.sequenceId,n=t.subscribed;o.a.set(e.sequenceSubscriptions,s,n)})),Object(i["a"])(n,d["qd"],(function(e,t){e.sequenceSubscriptions={},t.forEach((function(t){e.sequenceSubscriptions[t]=!0}))})),Object(i["a"])(n,d["Be"],(function(e){Object.assign(e,p({},h))})),n);t["a"]={state:f,getters:m,actions:b,mutations:_}},f16f:function(e,t,s){},f2a5:function(e,t,s){"use strict";var n=s("14a8"),i=s.n(n);i.a},f52f:function(e,t,s){"use strict";var n=s("5b1a"),i=s.n(n);i.a},f54c:function(e,t,s){"use strict";var n=s("b16f"),i=s.n(n);i.a},f64c:function(e,t,s){e.exports=s.p+"img/empty_todo.1f922c20.png"},f828:function(e,t,s){"use strict";var n=s("40dc"),i=s.n(n);i.a},f83f:function(e,t,s){"use strict";s("a4d3"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("d81d"),s("45fc"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("159b");var n,i=s("ade3"),a=(s("99af"),s("ddb0"),s("edbf")),o={getProductions:function(e){a["a"].get("/api/data/projects/all",e)},getProduction:function(e){return a["a"].getModel("projects",e)},getOpenProductions:function(e){a["a"].get("/api/data/projects/open",e)},getProductionStatus:function(e){a["a"].get("/api/data/project-status",e)},newProduction:function(e,t){var s={name:e.name,project_status_id:e.project_status_id,production_type:e.production_type};a["a"].post("/api/data/projects/",s,t)},updateProduction:function(e,t){var s={name:e.name,project_status_id:e.project_status_id,production_type:e.production_type,fps:e.fps,ratio:e.ratio,resolution:e.resolution,start_date:e.start_date,end_date:e.end_date,man_days:e.man_days};a["a"].put("/api/data/projects/".concat(e.id),s,t)},postAvatar:function(e,t,s){a["a"].post("/api/pictures/thumbnails/projects/".concat(e),t,s)},deleteProduction:function(e,t){a["a"].del("/api/data/projects/".concat(e.id,"?force=true"),t)},addPersonToTeam:function(e,t){return new Promise((function(s,n){var i={person_id:t};a["a"].post("/api/data/projects/".concat(e,"/team"),i,(function(e,t){e?n(e):s(t)}))}))},removePersonFromTeam:function(e,t){return new Promise((function(s,n){a["a"].del("/api/data/projects/".concat(e,"/team/").concat(t),(function(e,t){e?n(e):s(t)}))}))},addMetadataDescriptor:function(e,t){return new Promise((function(s,n){var i={name:t.name,choices:t.values,for_client:"true"===t.for_client,entity_type:t.entity_type};a["a"].post("/api/data/projects/".concat(e,"/metadata-descriptors"),i,(function(e,t){e?n(e):s(t)}))}))},getMetadataDescriptor:function(e,t){return new Promise((function(s,n){a["a"].get("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t),(function(e,t){e?n(e):s(t)}))}))},updateMetadataDescriptor:function(e,t){return new Promise((function(s,n){var i={id:t.id,name:t.name,choices:t.values,for_client:"true"===t.for_client,entity_type:t.entity_type};a["a"].put("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t.id),i,(function(e,t){e?n(e):s(t)}))}))},deleteMetadataDescriptor:function(e,t){return new Promise((function(s,n){a["a"].del("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t),(function(e){e?n(e):s()}))}))}},r=s("2229"),c=s("66e7"),l=s("9fb0");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={productions:[],productionMap:{},openProductions:[],productionStatus:[],productionStatusMap:{},currentProduction:null,productionAvatarFormData:null,isProductionsLoading:!1,isProductionsLoadingError:!1,isOpenProductionsLoading:!1,editProduction:{isLoading:!1,isError:!1},deleteProduction:{isLoading:!1,isError:!1},assetsPath:{name:"open-productions"},assetTypesPath:{name:"open-productions"},shotsPath:{name:"open-productions"},sequencesPath:{name:"open-productions"},episodesPath:{name:"open-productions"},breakdownPath:{name:"open-productions"},playlistsPath:{name:"open-productions"},teamPath:{name:"open-productions"}},h=u({},p),f={getProductionComponentPath:function(e,t,s){return s?{name:"episode-"+e,params:{episode_id:s,production_id:t}}:t?{name:e,params:{production_id:t}}:{name:"open-productions"}}},m={productions:function(e){return e.productions},productionMap:function(e){return e.productionMap},openProductions:function(e){return e.openProductions},productionStatus:function(e){return e.productionStatus},productionAvatarFormData:function(e){return e.productionAvatarFormData},isProductionsLoading:function(e){return e.isProductionsLoading},isProductionsLoadingError:function(e){return e.isProductionsLoadingError},isOpenProductionsLoading:function(e){return e.isOpenProductionsLoading},editProduction:function(e){return e.editProduction},deleteProduction:function(e){return e.deleteProduction},assetsPath:function(e){return e.assetsPath},assetTypesPath:function(e){return e.assetTypesPath},shotsPath:function(e){return e.shotsPath},sequencesPath:function(e){return e.sequencesPath},episodesPath:function(e){return e.episodesPath},breakdownPath:function(e){return e.breakdownPath},playlistsPath:function(e){return e.playlistsPath},teamPath:function(e){return e.teamPath},currentProduction:function(e){return e.currentProduction?e.currentProduction:e.openProductions.length>0?e.openProductions[0]:null},isTVShow:function(e){var t=m.currentProduction(e);return t&&"tvshow"===t.production_type},assetMetadataDescriptors:function(e){return e.currentProduction&&e.currentProduction.descriptors?Object(r["d"])(e.currentProduction.descriptors.filter((function(e){return"Asset"===e.entity_type}))):[]},shotMetadataDescriptors:function(e){return e.currentProduction&&e.currentProduction.descriptors?Object(r["d"])(e.currentProduction.descriptors.filter((function(e){return"Shot"===e.entity_type}))):[]},productionStatusOptions:function(e){return e.productionStatus.map((function(e){return{label:e.name,value:e.id}}))},openProductionOptions:function(e){return e.openProductions.map((function(e){return{label:e.name,value:e.id}}))},getProduction:function(e,t){return function(t){return e.productions.find((function(e){return e.id===t}))}},getProductionStatus:function(e,t){return function(t){return e.productionStatus.find((function(e){return e.id===t}))}}},b={loadProductionStatus:function(e,t){var s=e.commit;e.state;s(l["nd"]),o.getProductionStatus((function(e,n){e?s(l["md"]):s(l["ld"],n),t&&t(e)}))},loadOpenProductions:function(e,t){var s=e.commit;e.state;s(l["Wc"]),o.getOpenProductions((function(e,n){e?s(l["Vc"]):s(l["Uc"],n),t&&t(e)}))},loadProductions:function(e,t){var s=e.commit;e.state;s(l["kd"]),o.getProductions((function(e,n){e?s(l["jd"]):s(l["id"],n),t&&t(e)}))},loadProduction:function(e,t){var s=e.commit,n=e.state;return o.getProduction(t).then((function(e){n.productionMap[e.id]?s(l["Cf"],e):s(l["l"],e)})).catch((function(e){return console.error(e)}))},newProduction:function(e,t){var s=e.commit,n=(e.state,t.data),i=t.callback;s(l["hc"],n),o.newProduction(n,(function(e,t){e?s(l["gc"]):s(l["fc"],t),i&&i(e,t)}))},editProduction:function(e,t){var s=e.commit;e.state;s(l["hc"]),o.updateProduction(t.data,(function(e,n){e?s(l["gc"]):s(l["fc"],n),t.callback&&t.callback(e)}))},deleteProduction:function(e,t){var s=e.commit;e.state;s(l["vb"]);var n=t.production;o.deleteProduction(n,(function(e){e?s(l["ub"]):(s(l["te"],n),s(l["tb"])),t.callback&&t.callback(e)}))},setProduction:function(e,t){var s=e.commit,n=e.rootGetters;if(s(l["Te"],t),n.isTVShow){var i=n.currentEpisode,a=i?i.id:null;t&&a&&s(l["Ce"],{productionId:t,episodeId:a})}else t&&s(l["Ce"],{productionId:t})},storeProductionPicture:function(e,t){var s=e.commit;s(l["ke"],t)},uploadProductionAvatar:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){o.postAvatar(t,n.productionAvatarFormData,(function(n){s(l["je"],t),n?i(n):e()}))}))},addPersonToTeam:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return s(l["rf"],t.id),o.addPersonToTeam(n.currentProduction.id,t.id).then(e).catch(i)}))},removePersonFromTeam:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return s(l["sf"],t.id),o.removePersonFromTeam(n.currentProduction.id,t.id).then(e).catch(i)}))},addMetadataDescriptor:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return t.id?o.updateMetadataDescriptor(n.currentProduction.id,t).then((function(t){s(l["Af"],{production:n.currentProduction,descriptor:t}),e()})).catch(i):o.addMetadataDescriptor(n.currentProduction.id,t).then((function(t){e()})).catch(i)}))},deleteMetadataDescriptor:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return o.deleteMetadataDescriptor(n.currentProduction.id,t).then((function(){s(l["lb"],{id:t}),e()})).catch(i)}))},refreshMetadataDescriptor:function(e,t){var s=e.commit,n=e.state;return new Promise((function(e,i){return o.getMetadataDescriptor(n.currentProduction.id,t).then((function(t){var i={};n.openProductions.forEach((function(e){e.descriptors.forEach((function(e){i[e.id]=e}))})),i[t.id]?s(l["Af"],{production:n.productionMap[t.project_id],descriptor:t}):s(l["e"],{production:n.productionMap[t.project_id],descriptor:t}),e()})).catch(i)}))}},_=(n={},Object(i["a"])(n,l["kd"],(function(e){e.productions=[],e.isProductionsLoading=!0,e.isProductionsLoadingError=!1})),Object(i["a"])(n,l["jd"],(function(e){e.productions=[],e.isProductionsLoading=!1,e.isProductionsLoadingError=!0})),Object(i["a"])(n,l["id"],(function(e,t){e.isProductionsLoading=!1,e.isProductionsLoadingError=!1,e.productions=Object(r["h"])(t);var s={},n=function(e){s[e.id]||(s[e.id]=e)};e.openProductions.forEach(n),e.productions.forEach(n),e.productionMap=s})),Object(i["a"])(n,l["Wc"],(function(e){e.isOpenProductionsLoading=!0,e.openProductions=[]})),Object(i["a"])(n,l["Vc"],(function(e){e.isOpenProductionsLoading=!1})),Object(i["a"])(n,l["Uc"],(function(e,t){e.isOpenProductionsLoading=!1,e.openProductions=Object(r["d"])(t);var s={};t.forEach((function(e){s[e.id]=e})),e.productionMap=s,!e.currentProduction&&e.openProductions.length>0&&(e.currentProduction=e.openProductions[0])})),Object(i["a"])(n,l["nd"],(function(e){e.productionStatus=[]})),Object(i["a"])(n,l["md"],(function(e){})),Object(i["a"])(n,l["ld"],(function(e,t){var s={};t.forEach((function(e){s[e.id]=e})),e.productionStatus=t,e.productionStatusMap=s})),Object(i["a"])(n,l["hc"],(function(e,t){e.editProduction.isLoading=!0,e.editProduction.isError=!1})),Object(i["a"])(n,l["gc"],(function(e){e.editProduction.isLoading=!1,e.editProduction.isError=!0})),Object(i["a"])(n,l["fc"],(function(e,t){var s=m.getProductionStatus(e)(t.project_status_id),n=e.productions.find((function(e){return e.id===t.id})),i=e.openProductions.find((function(e){return e.id===t.id}));if(t.project_status_name=s.name,n){var a=e.openProductions.findIndex((function(e){return e.id===t.id}));t.project_status_id&&(a>=0&&n.project_status_id!==t.project_status_id?e.openProductions.splice(a,1):a<0&&(e.openProductions=Object(r["d"])(e.openProductions))),t.production_type&&t.production_type!==n.production_type&&"short"===t.production_type&&(n.first_episode_id=void 0,i.first_episode_id=void 0),Object.assign(n,t),i&&Object.assign(i,t)}else t.team=[],e.productions.push(t),e.productionMap[t.id]=t,i||(e.openProductions.push(t),e.openProductions=Object(r["d"])(e.openProductions)),e.productions=Object(r["h"])(e.productions);e.editProduction={isLoading:!1,isError:!1}})),Object(i["a"])(n,l["l"],(function(e,t){e.productions.push(t),e.openProductions.push(t),e.productions=Object(r["h"])(e.productions),e.openProductions=Object(r["d"])(e.openProductions),e.productionMap[t.id]=t})),Object(i["a"])(n,l["Cf"],(function(e,t){var s=e.productionMap[t.id],n=e.productionStatusMap[t.project_status_id],i=e.openProductions.find((function(e){return e.id===t.id})),a=s.project_status_id!==n.id;t.project_status_name=n.name,Object.assign(s,t),i&&Object.assign(i,t),a&&("Open"===t.project_status_name?e.openProductions.push(s):e.openProductions=Object(c["e"])(e.openProductions,s)),e.productions=Object(r["h"])(e.productions),e.openProductions=Object(r["d"])(e.openProductions)})),Object(i["a"])(n,l["vb"],(function(e){e.deleteProduction={isLoading:!0,isError:!1}})),Object(i["a"])(n,l["ub"],(function(e){e.deleteProduction={isLoading:!1,isError:!0}})),Object(i["a"])(n,l["te"],(function(e,t){e.productions=Object(c["e"])(e.productions,t),e.openProductions=Object(c["e"])(e.openProductions,t),delete e.productionMap[t.id]})),Object(i["a"])(n,l["tb"],(function(e,t){e.deleteProduction={isLoading:!1,isError:!1}})),Object(i["a"])(n,l["ke"],(function(e,t){e.productionAvatarFormData=t})),Object(i["a"])(n,l["je"],(function(e,t){var s=e.productionMap[t];s&&(s.has_avatar=!0)})),Object(i["a"])(n,l["Te"],(function(e,t){var s=e.productionMap[t];e.currentProduction=s})),Object(i["a"])(n,l["Ce"],(function(e,t){var s=t.productionId,n=t.episodeId;e.assetsPath=f.getProductionComponentPath("assets",s,n),e.assetTypesPath=f.getProductionComponentPath("production-asset-types",s,n),e.shotsPath=f.getProductionComponentPath("shots",s,n),e.sequencesPath=f.getProductionComponentPath("sequences",s,n),e.episodesPath=f.getProductionComponentPath("episodes",s),e.breakdownPath=f.getProductionComponentPath("breakdown",s,n),e.playlistsPath=f.getProductionComponentPath("playlists",s,n),e.teamPath=f.getProductionComponentPath("team",s)})),Object(i["a"])(n,l["rf"],(function(e,t){e.currentProduction.team.find((function(e){return e===t}))||e.currentProduction.team.push(t)})),Object(i["a"])(n,l["sf"],(function(e,t){var s=e.currentProduction.team.findIndex((function(e){return e===t}));null!==s&&e.currentProduction.team.splice(s,1)})),Object(i["a"])(n,l["e"],(function(e,t){var s=t.production,n=t.descriptor;s&&(s.descriptors?s.descriptors.push(n):s.descriptors=[n])})),Object(i["a"])(n,l["Af"],(function(e,t){var s=t.production,n=t.descriptor;s&&(s.descriptors?Object(c["f"])(s.descriptors,n):s.descriptors=[])})),Object(i["a"])(n,l["lb"],(function(e,t){var s=e.openProductions.find((function(e){return e.descriptors.find((function(e){return e.id===t.id}))}));s&&(s.descriptors=Object(c["e"])(s.descriptors,t))})),Object(i["a"])(n,l["r"],(function(e,t){var s=t.personId,n=e.currentProduction&&e.currentProduction.team.some((function(e){return e===s}));!n&&e.currentProduction&&e.currentProduction.team.push(s)})),Object(i["a"])(n,l["Be"],(function(e){Object.assign(e,u({},p))})),n);t["a"]={state:h,getters:m,actions:b,mutations:_}},f883:function(e,t,s){"use strict";var n=s("c20f"),i=s.n(n);i.a},f8cc:function(e,t,s){"use strict";var n=s("7518"),i=s.n(n);i.a},fa53:function(e,t,s){"use strict";s("a4d3"),s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("d81d"),s("13d5"),s("a434"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("2532"),s("159b");var n,i=s("2909"),a=s("ade3"),o=s("2f24"),r=s("edbf"),c={getTask:function(e,t){r["a"].get("/api/data/tasks/".concat(e,"/full"),t)},updateTask:function(e,t,s){r["a"].put("/api/data/tasks/".concat(e),t,s)},getTaskStatuses:function(e){r["a"].get("/api/data/task-status",e)},getTaskSubscribed:function(e,t){r["a"].get("/api/data/user/tasks/".concat(e,"/subscribed"),t)},subscribeToTask:function(e,t){r["a"].post("/api/actions/user/tasks/".concat(e,"/subscribe"),{},t)},unsubscribeFromTask:function(e,t){r["a"].del("/api/actions/user/tasks/".concat(e,"/unsubscribe"),t)},subscribeToSequence:function(e,t,s){r["a"].post("/api/actions/user/sequences/".concat(e,"/task-types/")+"".concat(t,"/subscribe"),{},s)},unsubscribeFromSequence:function(e,t,s){r["a"].del("/api/actions/user/sequences/".concat(e,"/task-types/")+"".concat(t,"/unsubscribe"),s)},getTaskComments:function(e,t){r["a"].get("/api/data/tasks/".concat(e,"/comments"),t)},getTaskPreviews:function(e,t){r["a"].get("/api/data/tasks/".concat(e,"/previews"),t)},commentTask:function(e){var t={task_status_id:e.taskStatusId,comment:e.comment};return r["a"].ppost("/api/actions/tasks/".concat(e.taskId,"/comment"),t)},getTaskComment:function(e,t){r["a"].get("/api/data/comments/".concat(e.id),t)},editTaskComment:function(e,t){var s={text:e.text,checklist:e.checklist};r["a"].put("/api/data/comments/".concat(e.id),s,t)},deleteTaskComment:function(e,t,s){r["a"].del("/api/data/tasks/".concat(e,"/comments/").concat(t),s)},createTasks:function(e,t){var s=e.task_type_id,n=e.type,i=e.project_id;r["a"].post("/api/actions/task-types/".concat(s,"/").concat(n,"/create-tasks?project_id=").concat(i),{},t)},createTask:function(e,t){var s=e.entity_id,n=e.task_type_id,i=e.type,a=e.project_id;r["a"].post("/api/actions/task-types/".concat(n,"/").concat(i,"/create-tasks?project_id=").concat(a,"&id=").concat(s),{},t)},deleteTask:function(e,t){r["a"].del("/api/data/tasks/".concat(e.id,"?force=true"),t)},deleteAllTasks:function(e,t,s){r["a"].del("/api/data/projects/".concat(e,"/task-types/").concat(t,"/tasks"),s)},addPreview:function(e){var t=e.taskId,s=e.commentId;return r["a"].ppost("/api/actions/tasks/".concat(t,"/comments/").concat(s,"/add-preview"),{})},addExtraPreview:function(e,t,s){return r["a"].ppost("/api/actions/tasks/".concat(t,"/comments/").concat(s,"/preview-files/")+"".concat(e),{})},deletePreview:function(e,t,s){return r["a"].pdel("/api/actions/tasks/".concat(e,"/comments/").concat(t,"/preview-files/")+"".concat(s))},setPreview:function(e,t,s){return r["a"].pput("/api/actions/entities/".concat(e,"/set-main-preview/").concat(t),{})},uploadPreview:function(e,t){return r["a"].ppost("/api/pictures/preview-files/".concat(e),t)},updatePreviewAnnotation:function(e,t){return new Promise((function(s,n){r["a"].put("/api/data/preview-files/".concat(e.id),{annotations:t},(function(e,t){e?n(e):s(t)}))}))},getPreviewFile:function(e){return new Promise((function(t,s){r["a"].get("/api/data/preview-files/".concat(e),(function(e,n){e?s(e):t(n)}))}))},assignTasks:function(e,t,s){r["a"].put("/api/actions/persons/".concat(e,"/assign"),{task_ids:t},s)},unassignTasks:function(e,t){r["a"].put("/api/actions/tasks/clear-assignation",{task_ids:e},t)},pinComment:function(e){return new Promise((function(t,s){var n={pinned:e.pinned};r["a"].put("/api/data/comments/".concat(e.id),n,(function(e,n){e?s(e):t(n)}))}))}},l=s("ce6b"),d=s("487c"),u=s("2229"),p=s("52ad"),h=s("ef8b"),f=s("9fb0");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _={taskMap:{},taskStatusMap:{},taskStatuses:[],taskComments:{},taskPreviews:{},taskEntityPreviews:{},selectedTasks:{},selectedValidations:{},taskSearchQueries:[],nbSelectedTasks:0,nbSelectedValidations:0,isShowAssignations:!0,isShowInfos:!0,isSavingCommentPreview:!1,previewForms:[],lastCommentDraft:""},v=b({},_),y={getPerson:function(e){return p["a"].getters.getPerson(p["a"].state,p["a"].getters)(e)},getTaskType:function(e){return h["a"].state.taskTypeMap[e]}},g={taskMap:function(e){return e.taskMap},getTaskComments:function(e,t){return function(t){return e.taskComments[t]}},getTaskPreviews:function(e,t){return function(t){return e.taskPreviews[t]}},getTaskComment:function(e,t){return function(t,s){return e.taskComments[t]?e.taskComments[t].find((function(e){return e.id===s})):[]}},getTaskStatus:function(e,t){return function(t){return e.taskStatuses.find((function(e){return e.id===t}))}},taskStatusOptions:function(e){return e.taskStatuses.map((function(e){return{label:e.short_name,value:e.id,color:e.color,isArtistAllowed:e.is_artist_allowed}}))},selectedTasks:function(e){return e.selectedTasks},nbSelectedTasks:function(e){return e.nbSelectedTasks},nbSelectedValidations:function(e){return e.nbSelectedValidations},taskSearchQueries:function(e){return e.taskSearchQueries},isShowAssignations:function(e){return e.isShowAssignations},isShowInfos:function(e){return e.isShowInfos},taskEntityPreviews:function(e){return e.taskEntityPreviews},previewForms:function(e){return e.previewForms},isSavingCommentPreview:function(e){return e.isSavingCommentPreview},lastCommentDraft:function(e){return e.lastCommentDraft}},k={loadTask:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.callback;c.getTask(n,(function(e,t){e?console.error(e):s(f["xd"],t),i&&i(e,t)}))},loadTaskSubscribed:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.callback;c.getTaskSubscribed(n,(function(e,t){e||s(f["Cd"],{taskId:n,subscribed:t}),i&&i(e,t)}))},subscribeToTask:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){c.subscribeToTask(t,(function(i){i?n(i):(s(f["Cd"],{taskId:t,subscribed:!0}),e())}))}))},subscribeToSequence:function(e,t){var s=e.commit,n=(e.state,t.sequenceId),i=t.taskTypeId;return new Promise((function(e,t){c.subscribeToSequence(n,i,(function(a){a?t(a):(s(f["pd"],{sequenceId:n,taskTypeId:i,subscribed:!0}),e())}))}))},unsubscribeFromTask:function(e,t){var s=e.commit;e.state;return new Promise((function(e,n){c.unsubscribeFromTask(t,(function(i){i?n(i):(s(f["Cd"],{taskId:t,subscribed:!1}),e())}))}))},unsubscribeFromSequence:function(e,t){var s=e.commit,n=(e.state,t.sequenceId),i=t.taskTypeId;return new Promise((function(e,t){c.unsubscribeFromSequence(n,i,(function(a){a?t(a):(s(f["pd"],{sequenceId:n,taskTypeId:i,subscribed:!1}),e())}))}))},loadTaskComments:function(e,t){var s=e.commit,n=(e.state,e.dispatch),i=t.taskId,a=t.entityId,o=t.callback;c.getTaskComments(i,(function(e,t){e?o(e):(s(f["wd"],{comments:t,taskId:i}),n("loadTaskEntityPreviewFiles",{callback:o,entityId:a}))}))},loadTaskEntityPreviewFiles:function(e,t){var s=e.commit,n=(e.state,t.callback),i=t.entityId,a={id:i};d["a"].getEntityPreviewFiles(a).then((function(e){s(f["yd"],e),n()})).catch(n)},commentTask:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.taskStatusId,a=t.comment;return c.commentTask({taskId:n,taskStatusId:i,comment:a}).then((function(e){s(f["ae"],{comment:e,taskId:n})}))},loadComment:function(e,t){var s=e.commit,n=(e.state,t.commentId),i=t.callback;c.getTaskComment({id:n},(function(e,t){e||s(f["ae"],{comment:t,taskId:t.object_id}),i&&i(e,t)}))},createTasks:function(e,t){e.commit,e.state;var s={task_type_id:t.task_type_id,type:t.type,project_id:t.project_id};c.createTasks(s,(function(e,s){t.callback&&t.callback(e,s)}))},createSelectedTasks:function(e,t){var s=e.commit,n=e.state,i=t.type,a=t.projectId,r=t.callback;o["a"].eachSeries(Object.keys(n.selectedValidations),(function(e,t){var o=n.selectedValidations[e],r={entity_id:o.entity.id,task_type_id:o.column.id,type:i,project_id:a};c.createTask(r,(function(e,n){s(f["W"],n),n.forEach((function(e){s(f["ue"],o),e.assigneesInfo=[],o.task=e,s(f["m"],o)})),t(e,n[0])}))}),r)},deleteSelectedTasks:function(e){var t=e.commit,s=e.state;return new Promise((function(e,n){var i=Object.keys(s.selectedTasks);o["a"].eachSeries(i,(function(e,n){var i=s.taskMap[e];c.deleteTask(i,(function(e){e||t(f["Bb"],i),n(e)}))}),(function(t){t?n(t):e()}))}))},deleteAllTasks:function(e,t){e.commit,e.state;var s=t.projectId,n=t.taskTypeId;return new Promise((function(e,t){c.deleteAllTasks(s,n,(function(s){s?t(s):e()}))}))},createTask:function(e,t){var s=e.commit,n=(e.state,e.rootGetters,t.entityId),i=t.projectId,a=t.taskTypeId,o=t.type;return new Promise((function(e,t){var r={entity_id:n,task_type_id:a,type:o,project_id:i};c.createTask(r,(function(n,i){n?t(n):(s(f["be"],i[0]),e())}))}))},changeSelectedTaskStatus:function(e,t){var s=e.commit,n=e.state,i=t.taskStatusId,a=t.comment,r=t.callback;o["a"].eachSeries(Object.keys(n.selectedTasks),(function(e,t){var o=n.taskMap[e];o&&o.task_status_id!==i?k.commentTask({commit:s,state:n},{taskId:e,taskStatusId:i,comment:a||""}).then(t).catch((function(e){return t(e)})):t()}),(function(e){r(e)}))},changeSelectedPriorities:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters,a=t.priority,r=t.callback;o["a"].eachSeries(Object.keys(n.selectedTasks),(function(e,t){var o=n.taskMap[e],r=i.taskTypeMap[o.task_type_id];o&&o.priority!==a?c.updateTask(e,{priority:a},(function(e,n){e||s(f["pc"],{task:n,taskType:r}),t(e)})):t()}),(function(e){r(e)}))},updateTask:function(e,t){var s=e.commit,n=t.taskId,i=t.data;return c.updateTask(n,i,(function(){s(f["oc"],{taskId:n,data:i})}))},changeSelectedEstimations:function(e,t){var s=e.commit,n=e.state,i=e.rootGetters;return new Promise((function(e,a){o["a"].eachSeries(Object.keys(n.selectedTasks),(function(e,a){var o=n.taskMap[e],r=i.taskTypeMap[o.task_type_id];o&&o.estimation!==t?c.updateTask(e,{estimation:t},(function(e,t){e||s(f["pc"],{task:t,taskType:r}),a(e)})):a()}),(function(t){t?a(t):e()}))}))},getTask:function(e,t){var s=e.commit,n=e.rootGetters,i=t.taskId,a=t.callback;c.getTask(i,(function(e,t){if(!e){var i=n.taskTypeMap[t.task_type_id];s(f["pc"],{task:t,taskType:i})}a&&a(e)}))},deleteTask:function(e,t){var s=e.commit,n=t.task,i=t.callback;c.deleteTask(n,(function(e){e||s(f["Bb"],n),i&&i(e)}))},editTaskComment:function(e,t){var s=e.commit,n=t.taskId,i=t.comment,a=t.checklist,o=t.callback;a&&s(f["yf"],{taskId:n,comment:i,checklist:a}),c.editTaskComment(i,(function(e,t){e||s(f["Sb"],{taskId:n,comment:t}),o&&o(e)}))},deleteTaskComment:function(e,t){var s=e.commit,n=e.rootState,i=t.taskId,a=t.commentId,o=t.callback,r=n.taskStatus.taskStatus.find((function(e){return"todo"===e.short_name}));c.deleteTaskComment(i,a,(function(e){e||s(f["fb"],{commentId:a,taskId:i,taskStatusMap:n.taskStatus.taskStatusMap,todoStatus:r}),o&&o(e)}))},commentTaskWithPreview:function(e,t){var s,n=e.commit,i=(e.getters,e.state),a=e.dispatch,o=t.taskId,r=t.commentText,l=t.taskStatusId,d=t.form,u={taskId:o,taskStatusId:l,comment:r};return n(f["j"]),c.commentTask(u).then((function(e){s=e;var t={taskId:o,commentId:s.id};return c.addPreview(t)})).then((function(e){return d||(d=i.previewForms[0]),c.uploadPreview(e.id,d)})).then((function(e){return n(f["ae"],{comment:s,taskId:o}),n(f["i"],{preview:e,taskId:o,commentId:s.id,comment:s}),i.previewForms.length>1&&(n(f["qe"]),a("addCommentExtraPreview",{taskId:o,commentId:s.id,previewId:e.id})),Promise.resolve({newComment:s,preview:e})}))},addCommentExtraPreview:function(e,t){var s=e.commit,n=e.getters,i=e.state,a=t.taskId,o=t.commentId,r=t.previewId,l=function(e){return c.addExtraPreview(r,a,o).then((function(t){return c.uploadPreview(t.id,e)})).then((function(e){var t=n.getTaskComment(a,o);e.extension="png",s(f["i"],{preview:e,taskId:a,commentId:o,comment:t})}))};i.previewForms.reduce((function(e,t){return e.then((function(){return l(t)}))}),Promise.resolve())},deleteTaskPreview:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.commentId,a=t.previewId;return c.deletePreview(n,i,a).then((function(){s(f["sb"],{taskId:n,previewId:a}),Promise.resolve(a)}))},setPreview:function(e,t){var s=e.commit,n=e.state,i=t.taskId,a=t.entityId,o=t.previewId,r=n.taskMap;return c.setPreview(a,o).then((function(e){s(f["ef"],{taskId:i,entityId:a,previewId:o,taskMap:r}),Promise.resolve()}))},updatePreviewAnnotation:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.preview,a=t.annotations;return new Promise((function(e,t){c.updatePreviewAnnotation(i,a).then((function(t){s(f["Bf"],{taskId:n,preview:i,annotations:a}),e()})).catch((function(e){console.error(e),t(e)}))}))},refreshPreview:function(e,t){var s=e.commit,n=(e.state,t.taskId),i=t.previewId;return new Promise((function(e,t){c.getPreviewFile(i).then((function(t){s(f["Bf"],{taskId:n,preview:t,annotations:t.annotations}),e()})).catch(t)}))},assignSelectedTasks:function(e,t){var s=e.commit,n=e.state,i=t.personId,a=t.callback,o=Object.keys(n.selectedTasks);c.assignTasks(i,o,(function(e){e||s(f["r"],{selectedTaskIds:o,personId:i}),a&&a(e)}))},unassignSelectedTasks:function(e,t){var s=e.commit,n=e.state,i=(t.personId,t.callback),a=Object.keys(n.selectedTasks);c.unassignTasks(a,(function(e){e||s(f["wf"],a),i&&i(e)}))},showAssignations:function(e){var t=e.commit;e.state;t(f["Xe"],!0)},hideAssignations:function(e){var t=e.commit;e.state;t(f["Xe"],!1)},showInfos:function(e){var t=e.commit;e.state;t(f["Ye"],!0)},hideInfos:function(e){var t=e.commit;e.state;t(f["Ye"],!1)},loadPreviewFileFormData:function(e,t){var s=e.commit;s("PREVIEW_FILE_SELECTED",t)},addSelectedTask:function(e,t){var s=e.commit;s(f["m"],t)},addSelectedTasks:function(e,t){var s=e.commit;s(f["n"],t)},clearSelectedTasks:function(e,t){var s=e.commit;s(f["R"],t)},removeSelectedTask:function(e,t){var s=e.commit;s(f["ue"],t)},saveTaskSearch:function(e,t){var s=e.commit,n=e.rootGetters,i=t.searchQuery,a=t.entityType;return new Promise((function(e,t){var o=v.taskSearchQueries.find((function(e){return e.name===i})),r=n.currentProduction;o?e():l["a"].createFilter("task",i,i,r.id,a,(function(n,i){s(f["Ne"],{searchQuery:i,production:r}),n?t(n):e(i)}))}))},removeTaskSearch:function(e,t){var s=e.commit,n=e.rootGetters;return new Promise((function(e,i){var a=n.currentProduction;l["a"].removeFilter(t,(function(n){s(f["ze"],{searchQuery:t,production:a}),n?i(n):e()}))}))},pinComment:function(e,t){var s=e.commit;s(f["he"],t),c.pinComment(t)}},w=(n={},Object(a["a"])(n,f["Gc"],(function(e,t){var s=t.production,n=t.userFilters;n.task&&n.task[s.id]?e.taskSearchQueries=n.task[s.id]:e.taskSearchQueries=[]})),Object(a["a"])(n,f["rd"],(function(e,t){var s=t.production,n=t.userFilters;n.task&&n.task[s.id]?e.taskSearchQueries=n.task[s.id]:e.taskSearchQueries=[]})),Object(a["a"])(n,f["xd"],(function(e,t){Object.assign(t,{project_name:t.project.name,entity_type_name:t.entity_type.name}),"Shot"===t.entity_type.name?t.episode?t.entity_name="".concat(t.episode.name," / ").concat(t.sequence.name," / ").concat(t.entity.name):t.entity_name="".concat(t.sequence.name," / ").concat(t.entity.name):t.entity_name="".concat(t.entity_type.name," / ").concat(t.entity.name),e.taskMap[t.id]=t})),Object(a["a"])(n,f["yd"],(function(e,t){e.taskEntityPreviews=t})),Object(a["a"])(n,f["wd"],(function(e,t){var s=t.taskId,n=t.comments;n.forEach((function(e){e.person=p["a"].helpers.addAdditionalInformation(e.person)})),e.taskComments[s]=Object(u["e"])(n),e.taskPreviews[s]=n.reduce((function(e,t){if(t.previews&&t.previews.length>0){var s=t.previews[0];return s.previews=t.previews.map((function(e){return{id:e.id,annotations:e.annotations}})),e.push(s),e}return e}),[])})),Object(a["a"])(n,f["zd"],(function(e,t){e.taskStatuses=Object(u["d"])(t),e.taskStatuses.forEach((function(t){e.taskStatusMap[t.id]=t}))})),Object(a["a"])(n,f["Cd"],(function(e,t){t.taskId,t.subscribed})),Object(a["a"])(n,f["ae"],(function(e,t){var s=t.comment,n=t.taskId,i=e.taskMap[n];if(void 0===s.task_status){var a=g.getTaskStatus(e,g);s.task_status=a(s.task_status_id)}if(void 0===s.person){var o=p["a"].getters.getPerson(p["a"].state,p["a"].getters);s.person=o(s.person_id)}s.person=p["a"].helpers.addAdditionalInformation(s.person),e.taskComments[n]||(e.taskComments[n]=[]),e.taskComments[n].find((function(e){return e.id===s.id}))||e.taskComments[n].unshift(s),e.taskComments[n]=Object(u["e"])(e.taskComments[n]),i&&Object.assign(i,{task_status_id:s.task_status_id,last_comment:s})})),Object(a["a"])(n,f["Bb"],(function(e,t){e.taskComments[t.id]=void 0,e.taskPreviews[t.id]=void 0,e.taskMap[t.id]=void 0})),Object(a["a"])(n,f["fb"],(function(e,t){var s=t.taskId,n=t.commentId,a=t.taskStatusMap,o=t.todoStatus,r=e.taskMap[s],c=e.taskComments[s],l=c.findIndex((function(e){return e.id===n})),d=c.find((function(e){return e.id===n})),u=c.filter((function(e){return e.pinned})).length;if(c=c.filter((function(e){return e.id!==n})),e.taskComments[s]=c,e.taskPreviews[s]=Object(i["a"])(e.taskPreviews[s]).filter((function(e){return!(d.previews.length>0&&d.previews[0].id===e.id)})),l===u){var p=o;if(c.length>0){var h=c[0].task_status_id;u<c.length&&(h=c[u].task_status_id),p=a[h]}r&&Object.assign(r,{task_status_id:p.id,task_status_priority:p.priority})}})),Object(a["a"])(n,f["Sb"],(function(e,t){var s=t.taskId,n=t.comment,i=e.taskComments[s].find((function(e){return e.id===n.id}));i.text=n.text})),Object(a["a"])(n,f["ie"],(function(e,t){e.previewForms=t})),Object(a["a"])(n,f["j"],(function(e){e.isSavingCommentPreview=!0})),Object(a["a"])(n,f["i"],(function(e,t){var s=t.preview,n=t.taskId,i=(t.commentId,t.comment);e.isSavingCommentPreview=!1;var a={id:s.id,feedback:!1,revision:s.revision,extension:s.extension};if(e.taskPreviews[n]){var o=e.taskPreviews[n].find((function(e){return e.revision===s.revision}));if(o){var r=o.previews.find((function(e){return e.id===a.id}));r||o.previews.push(a)}else a.previews=[b({},a)],e.taskPreviews[n]=[a].concat(e.taskPreviews[n]),i.preview=a,i.previews=[a]}})),Object(a["a"])(n,f["sb"],(function(e,t){var s=t.taskId,n=t.previewId;e.taskPreviews[s].forEach((function(e){var t=e.previews.findIndex((function(e){return e.id===n}));t>=0&&e.previews.splice(t,1)}))})),Object(a["a"])(n,f["Bf"],(function(e,t){var s=t.taskId,n=t.preview,i=t.annotations,a=null;e.taskPreviews[s].forEach((function(e){e.previews.forEach((function(e){e.id===n.id&&(a=e)})),e.id===n.id&&(e.annotations=i)})),a&&(a.annotations=i)})),Object(a["a"])(n,f["M"],(function(e,t){var s=t.preview,n=t.comment,i=n.object_id,a={id:s.id,feedback:!1,revision:s.revision,extension:s.extension};e.taskPreviews[i].shift(),e.taskPreviews[i]=[a].concat(e.taskPreviews[i])})),Object(a["a"])(n,f["m"],(function(e,t){if(t.task)e.selectedTasks[t.task.id]=t.task,e.nbSelectedTasks=Object.keys(e.selectedTasks).length;else{var s=t.column.id,n=t.entity.id,i="".concat(n,"-").concat(s);e.selectedValidations[i]=t,e.nbSelectedValidations=Object.keys(e.selectedValidations).length}})),Object(a["a"])(n,f["n"],(function(e,t){var s=JSON.parse(JSON.stringify(e.selectedTasks)),n=JSON.parse(JSON.stringify(e.selectedValidations)),i=!1;t.forEach((function(e){if(e.task)s[e.task.id]=e.task;else{var t=e.column.id,a=e.entity.id,o="".concat(a,"-").concat(t);n[o]=e,i=!0}})),e.selectedTasks=s,e.nbSelectedTasks=Object.keys(e.selectedTasks).length,i&&(e.selectedValidations=n,e.nbSelectedValidations=Object.keys(e.selectedValidations).length)})),Object(a["a"])(n,f["ue"],(function(e,t){if(t.task)delete e.selectedTasks[t.task.id],e.nbSelectedTasks=Object.keys(e.selectedTasks).length;else{var s=t.column.id,n=t.entity.id,i="".concat(n,"-").concat(s);delete e.selectedValidations[i],e.nbSelectedValidations=Object.keys(e.selectedValidations).length}})),Object(a["a"])(n,f["R"],(function(e){e.selectedTasks={},e.nbSelectedTasks=0,e.selectedValidations={},e.nbSelectedValidations=0})),Object(a["a"])(n,f["W"],(function(e,t){t.forEach((function(t){e.taskMap[t.id]=t}))})),Object(a["a"])(n,f["be"],(function(e,t){e.taskMap[t.id]=t})),Object(a["a"])(n,f["pc"],(function(e,t){var s=t.task,n=e.taskMap[s.id];n&&Object.assign(e.taskMap[s.id],{task_status_id:s.task_status_id,task_status_short_name:e.taskStatusMap[s.task_status_id].short_name,priority:s.priority,estimation:s.estimation,duration:s.duration,real_start_date:s.real_start_date,end_date:s.end_date,due_date:s.due_date,real_end_date:s.end_date,last_comment_date:s.last_comment_date,retake_count:s.retake_count})})),Object(a["a"])(n,f["oc"],(function(e,t){var s=t.taskId,n=t.data,i=e.taskMap[s];Object.assign(i,n)})),Object(a["a"])(n,f["r"],(function(e,t){var s=t.selectedTaskIds,n=t.personId;s.forEach((function(t){var s=e.taskMap[t];s&&!s.assignees.find((function(e){return e===n}))&&(s.assignees.push(n),s.assignees=Object(i["a"])(s.assignees))}))})),Object(a["a"])(n,f["wf"],(function(e,t){t.forEach((function(t){var s=e.taskMap[t];s.assignees=[],s.assigneesInfo=[]}))})),Object(a["a"])(n,f["ef"],(function(e,t){var s=t.taskId,n=t.previewId;e.taskMap[s]&&(e.taskMap[s].entity.preview_file_id=n)})),Object(a["a"])(n,f["Xe"],(function(e,t){e.isShowAssignations=t})),Object(a["a"])(n,f["Ye"],(function(e,t){e.isShowInfos=t})),Object(a["a"])(n,f["bd"],(function(e,t){var s=t.tasks;s.forEach((function(t){if(t.last_comment.person_id){var s=y.getPerson(t.last_comment.person_id);t.last_comment.person=s}e.taskMap[t.id]=t}))})),Object(a["a"])(n,f["Mf"],(function(e,t){var s=t.tasks;s.forEach((function(t){if(t.last_comment.person_id){var s=y.getPerson(t.last_comment.person_id);t.last_comment.person=s}e.taskMap[t.id]=t}))})),Object(a["a"])(n,f["Ne"],(function(e,t){var s=t.searchQuery;e.taskSearchQueries.includes(s)||(e.taskSearchQueries.push(s),e.taskSearchQueries=Object(u["d"])(e.taskSearchQueries))})),Object(a["a"])(n,f["ze"],(function(e,t){var s=t.searchQuery,n=e.taskSearchQueries.findIndex((function(e){return e.name===s.name}));n>=0&&e.taskSearchQueries.splice(n,1)})),Object(a["a"])(n,f["he"],(function(e,t){t.pinned=!t.pinned,e.taskComments[t.object_id]=Object(u["e"])(e.taskComments[t.object_id])})),Object(a["a"])(n,f["yf"],(function(e,t){var s=t.comment,n=t.checklist;s.checklist=n})),Object(a["a"])(n,f["O"],(function(e){e.taskMap={}})),Object(a["a"])(n,f["S"],(function(e){e.taskMap={}})),Object(a["a"])(n,f["Ze"],(function(e,t){e.lastCommentDraft=t})),Object(a["a"])(n,f["qe"],(function(e){e.previewForms=e.previewForms.splice(1)})),Object(a["a"])(n,f["Be"],(function(e,t){Object.assign(e,b({},_))})),n);t["a"]={state:v,getters:g,actions:k,mutations:w}},fb36:function(e,t,s){"use strict";var n=s("a91d"),i=s.n(n);i.a},fb8a:function(e,t,s){"use strict";var n=s("e0c8"),i=s.n(n);i.a},fbf3:function(e,t,s){"use strict";var n=s("186e"),i=s.n(n);i.a},fd3f:function(e,t,s){"use strict";var n=s("be0b"),i=s.n(n);i.a},fd61:function(e,t,s){"use strict";var n=s("c577"),i=s.n(n);i.a},fe13:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[e.minimized?s("span",[e.isStatic||e.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color,cursor:e.cursor}}):s("router-link",{staticClass:"tag dynamic",style:{background:e.backgroundColor,color:e.color},attrs:{to:e.taskPath(e.task)}})],1):s("span",[e.isStatic||e.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color,cursor:e.cursor}},[e._v(" "+e._s(e.taskStatus.short_name)+" ")]):s("router-link",{staticClass:"tag dynamic",style:{background:e.backgroundColor,color:e.color},attrs:{to:e.taskPath(e.task)}},[e._v(" "+e._s(e.taskStatus.short_name)+" ")]),e.isPriority&&!e.isCurrentUserClient?s("span",{staticClass:"priority"},[e._v(" "+e._s(e.priority)+" ")]):e._e()],1)])},i=[],a=(s("a4d3"),s("4de4"),s("4160"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("ade3")),o=s("2f62"),r=s("7930");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"validation-tag",props:{task:{default:function(){},type:Object},isStatic:{default:!1,type:Boolean},isPriority:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},pointer:{default:!1,type:Boolean}},computed:l({},Object(o["c"])(["currentEpisode","currentProduction","isDarkTheme","isTVShow","taskMap","taskStatusMap","taskTypeMap","isCurrentUserClient"]),{cursor:function(){return this.pointer?"pointer":"default"},taskStatus:function(){if(this.task){var e=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[e]:{}}return{}},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""}}),methods:{taskPath:function(e){var t=this.task.project_id?this.task.project_id:this.currentProduction.id,s={name:"task",params:{production_id:t,task_id:e.id}};this.isTVShow&&this.currentEpisode&&(s.name="episode-task",s.params.episode_id=e.episode_id||this.currentEpisode.id);var n=this.taskTypeMap[e.task_type_id];return s.params.type=n.for_shots?"shots":"assets",s}}},u=d,p=(s("bfe7"),s("2877")),h=Object(p["a"])(u,n,i,!1,null,"639772a7",null);t["a"]=h.exports}});
//# sourceMappingURL=app.c66b398c.js.map