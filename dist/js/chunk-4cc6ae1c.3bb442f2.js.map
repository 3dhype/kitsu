{"version":3,"sources":["webpack:///./src/components/pages/Playlist.vue?b4cb","webpack:///./src/components/modals/EditPlaylistModal.vue?26b5","webpack:///./src/components/pages/playlists/PlaylistPlayer.vue?6e1a","webpack:///./src/components/pages/playlists/PlaylistedShot.vue?b60e","webpack:///./src/components/pages/playlists/RawVideoPlayer.vue?46a6","webpack:///./src/components/widgets/LightEntityThumbnail.vue?9a5d","webpack:///./src/components/pages/Playlist.vue?d41e","webpack:///./src/components/modals/EditPlaylistModal.vue?fe6c","webpack:///src/components/modals/EditPlaylistModal.vue","webpack:///./src/components/modals/EditPlaylistModal.vue?2d2c","webpack:///./src/components/modals/EditPlaylistModal.vue?725c","webpack:///./src/components/widgets/ErrorText.vue?8986","webpack:///src/components/widgets/ErrorText.vue","webpack:///./src/components/widgets/ErrorText.vue?f04f","webpack:///./src/components/widgets/ErrorText.vue","webpack:///./src/components/widgets/LightEntityThumbnail.vue?4ee2","webpack:///src/components/widgets/LightEntityThumbnail.vue","webpack:///./src/components/widgets/LightEntityThumbnail.vue?b617","webpack:///./src/components/widgets/LightEntityThumbnail.vue?2e5f","webpack:///./src/components/pages/playlists/PlaylistPlayer.vue?06b2","webpack:///./src/components/pages/playlists/PlaylistedShot.vue?847f","webpack:///src/components/pages/playlists/PlaylistedShot.vue","webpack:///./src/components/pages/playlists/PlaylistedShot.vue?a15d","webpack:///./src/components/pages/playlists/PlaylistedShot.vue?aee1","webpack:///./src/components/pages/playlists/RawVideoPlayer.vue?3992","webpack:///src/components/pages/playlists/RawVideoPlayer.vue","webpack:///./src/components/pages/playlists/RawVideoPlayer.vue?9765","webpack:///./src/components/pages/playlists/RawVideoPlayer.vue?4fa7","webpack:///src/components/pages/playlists/PlaylistPlayer.vue","webpack:///./src/components/pages/playlists/PlaylistPlayer.vue?cdbe","webpack:///./src/components/pages/playlists/PlaylistPlayer.vue?a890","webpack:///src/components/pages/Playlist.vue","webpack:///./src/components/pages/Playlist.vue?2e53","webpack:///./src/components/pages/Playlist.vue?f8fd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","playlists","length","key","class","button","loading","addPlaylist","on","showAddModal","_v","_s","$t","_e","_l","playlist","id","for_client","selected","currentPlaylist","attrs","getPlaylistPath","name","formatDate","updated_at","errors","first_preview_file_id","created_at","big","ref","currentShots","isAddingShot","showEditModal","toggleAddShots","onPreviewChanged","goFirstPlaylist","removeShot","onOrderChange","onAnnotationChanged","onForClientChanged","isCurrentUserManager","onSearchChange","isAdditionLoading","addCurrentSelection","addEpisode","addEpisodePending","addMovie","sequenceShots","i","sequence_name","sequence_id","$event","addSequence","shot","playlisted","undefined","preventDefault","addShotToPlaylist","preview_file_id","modals","isEditDisplayed","editPlaylist","playlistToEdit","hideEditModal","confirmEditPlaylist","staticRenderFns","active","directives","rawName","runConfirmation","model","value","form","callback","$$v","$set","expression","forClientOptions","forClient","isLoading","$emit","mixins","components","Combobox","TextField","props","data","methods","watch","setTimeout","component","alignRight","hidden","text","default","type","String","Boolean","_b","previewFileId","style","width","height","emptyHeight","functional","dark","showDeleteModal","shotList","onMetadataLoaded","onShotChange","onTimeUpdate","onMaxDurationUpdate","shotListToCompare","isCommentsHidden","task","onProgressBarClicked","annotations","maxDurationRaw","loadAnnotation","isPlaying","onPlayClicked","currentTime","maxDuration","currentFrame","onPreviousFrameClicked","onNextFrameClicked","playingShotIndex","onPlayPreviousShotClicked","onPlayNextShotClicked","isComparing","onCompareClicked","taskTypeOptions","taskTypeToCompare","undoLastAction","redoLastAction","isDrawing","isShowingPencilPalette","pencil","pencilPalette","onPickPencil","onChangePencil","isShowingPalette","color","palette","onPickColor","onChangeColor","onAnnotateClicked","onDeleteClicked","onCommentClicked","onFilmClicked","staticStyle","isDlButtonsHidden","zipDlPath","onBuildClicked","build_jobs","job","getBuildPath","status","onRemoveBuildJob","toggleDlButtons","onFullscreenClicked","flexrow","isShotsHidden","index","refInFor","playShot","onShotDropped","delete","deletePlaylist","deleteText","confirmRemovePlaylist","hideDeleteModal","onDragged","playing","onPlayClick","onRemoveClick","taskTypeId","previewFileOptions","onDropped","LightEntityThumbnail","XIcon","Number","Object","mounted","setCurrentParameters","setListeners","computed","dropArea","$refs","previewFiles","map","getTaskTypeIdForPreviewFile","taskTypeIds","find","some","previewFile","addEventListener","onDragover","onDragleave","background","before","after","shotId","event","stopPropagation","isPreviewFile","playNext","shots","Array","currentPlayer","player1","nextPlayer","player2","playingIndex","resetHeight","emitLoadedEvent","window","beforeDestroy","removeEventListener","container","fps","currentProduction","getMoviePath","getNextIndex","preview_file_extension","getPreviousIndex","clear","src","removeAttribute","load","goPreviousFrame","newTime","setCurrentTime","goNextFrame","duration","video","loadPreviousShot","loadShot","currentIndex","loadNextShot","nextShot","display","updateTime","pause","play","nextIndex","switchPlayers","updateMaxDuration","$nextTick","getCurrentTime","tmpPlayer","time","getWidth","offsetWidth","getHeight","offsetHeight","getVideoRatio","getVideoWidth","getVideoHeight","videoWidth","videoHeight","AnnotationBar","ButtonSimple","ColorPicker","DeleteModal","PencilPicker","PlaylistedShot","RawVideoPlayer","Spinner","TaskInfo","currentTimeRaw","fabricCanvas","edit","values","updateProgressBar","onKeyDown","onWindowResize","$el","onmousemove","isFullScreenEnabled","canvas","rawPlayer","rawPlayerComparison","progress","progressBar","progressCursor","movie","timezone","user","nbCommentedShots","filter","isCommentedByClient","date","format","formatTime","milliseconds","Date","seconds","console","error","err","getTimelinePosition","position","displayBars","header","opacity","cursor","hideBars","Math","floor","factor","updateTaskPanel","taskMap","preview_file_task_id","scrollToShot","shotEl","preview_file_annotations","shotWidget","isLeft","playlistEl","scrollLeft","scrollingRequired","scrollToRight","hideCanvas","clearCanvas","showCanvas","shotIndex","annotation","$options","silent","splice","setFullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen","setAttribute","exitFullScreen","document","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen","isFullScreen","pos","onPlayPauseClicked","includes","target","tagName","keyCode","deleteSelection","lastCall","now","reloadAnnotations","onMouseMove","buttonBar","isMovieFullScreen","timer","clearTimeout","comparisonIndex","info","resetCanvas","resetCanvasSize","renderAll","fullWidth","rebuildComparisonOptions","forEach","label","rebuildShotListToCompare","preview","buildShotListToCompare","resetComparison","player","isDrawingMode","scaleMultiplierX","scaleMultiplierY","drawing","objects","left","obj","top","fill","stroke","strokeWidth","radius","scaleX","scaleY","canvasWidth","strokeMultiplier","path","setControlsVisibility","mt","mb","ml","mr","bl","br","tl","tr","mtr","saveAnnotations","task_id","getAnnotation","runPlaylistBuild","playlist_id","removeBuildJob","resetUndoStacks","toString","ErrorText","EditPlaylistModal","PageSubtitle","PlaylistPlayer","PlusIcon","SearchField","currentShot","sequenceId","sequenceOptions","isDeleteDisplayed","addDaily","addWeekly","playlistLoading","lastPlaylistsUpdated","lastPlaylistsCreated","slice","playlistPlayer","section","params","production_id","playlistId","isTVShow","currentEpisode","route","episode_id","loadShotsData","sequences","loadShots","loadPlaylists","loadPlaylistsData","setFirstPlaylist","rebuildCurrentShots","addShotToCurrentShots","shot_id","entity_name","entityName","preview_files","playlistShot","clearCurrentPlaylist","resetPlaylist","setCurrentPlaylist","loadPlaylist","$router","push","playlistsPath","clearAdditionColumn","addShot","loadShotPreviewFiles","displayedShots","currentShotMap","addShots","addAllPending","getPending","addDailyPending","removeShotPreviewFromPlaylist","changePlaylistPreview","changePlaylistOrder","updatePreviewAnnotation","searchQuery","setShotSearch","displayMoreShots","runEditPlaylist","runAddPlaylist","assign","newPlaylist","$route","$store","commit","metaInfo","title","socket","events","playlistMap","eventData","refreshPlaylist","build_job_id"],"mappings":"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","file":"js/chunk-4cc6ae1c.3bb442f2.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=style&index=0&id=5627273d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=style&index=0&id=5627273d&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPlaylistModal.vue?vue&type=style&index=0&id=1d7ab2c7&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPlaylistModal.vue?vue&type=style&index=0&id=1d7ab2c7&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistPlayer.vue?vue&type=style&index=0&id=4fa4158c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistPlayer.vue?vue&type=style&index=0&id=4fa4158c&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistedShot.vue?vue&type=style&index=0&id=f045dd04&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistedShot.vue?vue&type=style&index=0&id=f045dd04&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RawVideoPlayer.vue?vue&type=style&index=0&id=7d3894d4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RawVideoPlayer.vue?vue&type=style&index=0&id=7d3894d4&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightEntityThumbnail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightEntityThumbnail.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"productions page fixed-page\"},[_c('div',{staticClass:\"columns\"},[(_vm.playlists.length > 0)?_c('div',{staticClass:\"playlist-list-column column\"},[(_vm.isCurrentUserManager)?_c('button',{key:\"new-playlist-button\",class:{\n          button: true,\n          'is-loading': _vm.loading.addPlaylist\n        },on:{\"click\":_vm.showAddModal}},[_c('plus-icon',{staticClass:\"icon is-small\"}),_vm._v(\" \"+_vm._s(_vm.$t('playlists.new_playlist'))+\" \")],1):_vm._e(),(!_vm.loading.playlists)?_c('div',{staticClass:\"playlists\"},_vm._l((_vm.playlists),function(playlist){return _c('router-link',{key:playlist.id,class:{\n            'playlist-item': true,\n            'for-client': playlist.for_client || false,\n            selected: playlist.id === _vm.currentPlaylist.id\n          },attrs:{\"to\":_vm.getPlaylistPath(playlist.id)}},[_c('span',[_vm._v(\" \"+_vm._s(playlist.name)+\" \")]),_c('span',{staticClass:\"playlist-date\",attrs:{\"title\":\"last modified\"}},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.updated_at'))+\" \"+_vm._s(_vm.formatDate(playlist.updated_at))+\" \")])])}),1):_c('spinner',{staticClass:\"mt2\"}),(_vm.errors.playlistLoading)?_c('error-text',{attrs:{\"text\":\"$t('playlists.loading_error')\"}}):_vm._e()],1):_vm._e(),(_vm.playlists.length > 0 && !_vm.currentPlaylist.id)?_c('div',{staticClass:\"playlist-column no-selection\"},[_c('h2',[_vm._v(_vm._s(_vm.$t('playlists.last_creation')))]),(!_vm.loading.playlists)?_c('div',{staticClass:\"flexrow\"},_vm._l((_vm.lastPlaylistsCreated),function(playlist){return _c('router-link',{key:'recent-playlist-' + playlist.id,staticClass:\"recent-playlist flexrow-item\",attrs:{\"to\":_vm.getPlaylistPath(playlist.id)}},[_c('light-entity-thumbnail',{attrs:{\"preview-file-id\":playlist.first_preview_file_id,\"type\":\"previews\",\"width\":\"300px\",\"height\":\"auto\",\"empty-height\":\"150px\"}}),_c('h3',[_vm._v(_vm._s(playlist.name))]),_c('span',[_vm._v(\" \"+_vm._s(_vm.$t('playlists.created_at'))+\" \"+_vm._s(_vm.formatDate(playlist.created_at))+\" \")])],1)}),1):_c('spinner',{staticClass:\"mt2\"}),_c('h2',[_vm._v(_vm._s(_vm.$t('playlists.last_modification')))]),(!_vm.loading.playlists)?_c('div',{staticClass:\"flexrow\"},_vm._l((_vm.lastPlaylistsUpdated),function(playlist){return _c('router-link',{key:'recent-modified-playlist-' + playlist.id,staticClass:\"recent-playlist flexrow-item\",attrs:{\"to\":_vm.getPlaylistPath(playlist.id)}},[_c('light-entity-thumbnail',{attrs:{\"preview-file-id\":playlist.first_preview_file_id,\"type\":\"previews\",\"width\":\"300px\",\"height\":\"auto\",\"empty-height\":\"150px\"}}),_c('h3',[_vm._v(_vm._s(playlist.name))]),_c('span',[_vm._v(\" \"+_vm._s(_vm.$t('playlists.updated_at'))+\" \"+_vm._s(_vm.formatDate(playlist.updated_at))+\" \")])],1)}),1):_c('spinner',{staticClass:\"mt2\"})],1):(_vm.playlists.length === 0)?_c('div',{staticClass:\"playlist-column no-selection has-text-centered\"},[(!_vm.loading.playlists)?_c('div',[_c('p',{staticClass:\"empty-explaination\"},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.no_playlist'))+\" \")]),(_vm.isCurrentUserManager)?_c('button',{key:\"new-playlist-button\",class:{\n            big: true,\n            button: true,\n            'is-loading': _vm.loading.addPlaylist\n          },on:{\"click\":_vm.showAddModal}},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.new_playlist'))+\" \")]):_vm._e()]):_c('spinner',{staticClass:\"mt2\"})],1):_c('div',{staticClass:\"playlist-column column\"},[_c('playlist-player',{ref:\"playlist-player\",attrs:{\"playlist\":_vm.currentPlaylist,\"shots\":_vm.currentShots,\"is-loading\":_vm.loading.playlist,\"is-adding-shot\":_vm.isAddingShot},on:{\"edit-clicked\":_vm.showEditModal,\"show-add-shots\":_vm.toggleAddShots,\"preview-changed\":_vm.onPreviewChanged,\"playlist-deleted\":_vm.goFirstPlaylist,\"remove-shot\":_vm.removeShot,\"order-change\":_vm.onOrderChange,\"annotationchanged\":_vm.onAnnotationChanged,\"for-client-changed\":_vm.onForClientChanged}}),(_vm.isCurrentUserManager && _vm.isAddingShot)?_c('div',[_c('div',{staticClass:\"addition-header\"},[_c('div',{staticClass:\"flexrow\"},[_c('page-subtitle',{staticClass:\"flexrow-item\",attrs:{\"text\":_vm.$t('playlists.add_shots')}}),_c('span',{staticClass:\"filler\"}),_c('button'),_c('a',{staticClass:\"close-button\",on:{\"click\":_vm.toggleAddShots}},[_c('x-icon')],1)],1),_c('div',{staticClass:\"flexrow\"},[_c('search-field',{ref:\"search-field\",staticClass:\"flexrow-item\",attrs:{\"can-save\":false,\"placeholder\":\"ex: seq01 anim=wfa\"},on:{\"change\":_vm.onSearchChange}}),(_vm.shotSearchText)?_c('button',{class:{\n                button: true,\n                'flexrow-item': true,\n                'add-sequence': true\n              },attrs:{\"disabled\":_vm.isAdditionLoading},on:{\"click\":_vm.addCurrentSelection}},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.add_selection'))+\" \")]):_vm._e(),_c('span',{staticClass:\"filler\"}),(_vm.isTVShow)?_c('button',{class:{\n                button: true,\n                'add-sequence': true,\n                'is-loading': this.loading.addEpisode\n              },attrs:{\"disabled\":_vm.isAdditionLoading},on:{\"click\":_vm.addEpisodePending}},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.add_episode'))+\" \")]):_c('button',{class:{\n                button: true,\n                'add-sequence': true,\n                'is-loading': this.loading.addMovie\n              },attrs:{\"disabled\":_vm.isAdditionLoading},on:{\"click\":_vm.addMovie}},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.add_movie'))+\" \")])],1)])]):_vm._e(),(_vm.isCurrentUserManager && _vm.isAddingShot)?_c('div',{staticClass:\"addition-section\"},[(_vm.isShotsLoading)?_c('spinner',{key:\"shot-loader\",staticClass:\"mt2\"}):_c('div',[_c('div',_vm._l((_vm.displayedShotsBySequence),function(sequenceShots,i){return _c('div',{key:'sequence-' + i},[(sequenceShots.length > 0)?_c('h2',{staticClass:\"sequence-title\"},[_vm._v(\" \"+_vm._s(sequenceShots[0].sequence_name)+\" \"),(_vm.isCurrentUserManager)?_c('button',{key:'add-sequence-button-' + sequenceShots[0].sequence_id,staticClass:\"button\",on:{\"click\":function($event){return _vm.addSequence(sequenceShots)}}},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.add_sequence'))+\" \")]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"addition-shots\"},_vm._l((sequenceShots),function(shot){return _c('div',{key:shot.id,class:{\n                    'addition-shot': true,\n                    playlisted: _vm.currentShots[shot.id] !== undefined\n                  },on:{\"click\":function($event){$event.preventDefault();return _vm.addShotToPlaylist(shot)}}},[_c('light-entity-thumbnail',{attrs:{\"preview-file-id\":shot.preview_file_id,\"width\":\"150px\",\"height\":\"100px\"}}),_c('span',{staticClass:\"playlisted-shot-name\"},[_vm._v(_vm._s(shot.name))])],1)}),0)])}),0)])],1):_vm._e()],1)]),_c('edit-playlist-modal',{ref:\"edit-playlist-modal\",attrs:{\"active\":_vm.modals.isEditDisplayed,\"is-loading\":_vm.loading.editPlaylist,\"is-error\":_vm.errors.editPlaylist,\"playlist-to-edit\":_vm.playlistToEdit},on:{\"cancel\":_vm.hideEditModal,\"confirm\":_vm.confirmEditPlaylist}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{\n  'modal': true,\n  'is-active': _vm.active\n}},[_c('div',{staticClass:\"modal-background\"}),_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"box\"},[(_vm.playlistToEdit && _vm.playlistToEdit.id)?_c('h1',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"playlists.edit_title\"))+\" \")]):_c('h1',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"playlists.create_title\"))+\" \")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('text-field',{directives:[{name:\"focus\",rawName:\"v-focus\"}],ref:\"nameField\",attrs:{\"label\":_vm.$t('playlists.fields.name')},on:{\"enter\":_vm.runConfirmation},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('combobox',{attrs:{\"label\":_vm.$t('playlists.fields.for_client'),\"options\":_vm.forClientOptions},model:{value:(_vm.forClient),callback:function ($$v) {_vm.forClient=$$v},expression:\"forClient\"}})],1),_c('p',{staticClass:\"has-text-right\"},[_c('a',{class:{\n            button: true,\n            'is-primary': true,\n            'is-loading': _vm.isLoading\n          },on:{\"click\":_vm.runConfirmation}},[_vm._v(\" \"+_vm._s(_vm.$t(\"main.confirmation\"))+\" \")]),_c('button',{staticClass:\"button is-link\",on:{\"click\":function($event){return _vm.$emit('cancel')}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"main.cancel\"))+\" \")])]),(_vm.isError)?_c('p',{staticClass:\"error has-text-right info-message\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"assets.edit_fail\"))+\" \")]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div :class=\"{\n  'modal': true,\n  'is-active': active\n}\">\n  <div class=\"modal-background\"></div>\n  <div class=\"modal-content\">\n    <div class=\"box\">\n      <h1 class=\"title\" v-if=\"playlistToEdit && playlistToEdit.id\">\n        {{ $t(\"playlists.edit_title\") }}\n      </h1>\n      <h1 class=\"title\" v-else>\n        {{ $t(\"playlists.create_title\") }}\n      </h1>\n\n      <form v-on:submit.prevent>\n        <text-field\n          ref=\"nameField\"\n          :label=\"$t('playlists.fields.name')\"\n          v-model=\"form.name\"\n          @enter=\"runConfirmation\"\n          v-focus\n        />\n        <combobox\n          :label=\"$t('playlists.fields.for_client')\"\n          :options=\"forClientOptions\"\n          v-model=\"forClient\"\n        />\n      </form>\n\n      <p class=\"has-text-right\">\n        <a\n          :class=\"{\n            button: true,\n            'is-primary': true,\n            'is-loading': isLoading\n          }\"\n          @click=\"runConfirmation\">\n          {{ $t(\"main.confirmation\") }}\n        </a>\n        <button\n          @click=\"$emit('cancel')\"\n          class=\"button is-link\">\n          {{ $t(\"main.cancel\") }}\n        </button>\n      </p>\n\n      <p class=\"error has-text-right info-message\" v-if=\"isError\">\n        {{ $t(\"assets.edit_fail\") }}\n      </p>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Combobox from '../widgets/Combobox'\nimport TextField from '../widgets/TextField'\n\nimport { modalMixin } from './base_modal'\n\nexport default {\n  name: 'edit-playlist-modal',\n  mixins: [modalMixin],\n  components: {\n    Combobox,\n    TextField\n  },\n\n  props: [\n    'active',\n    'cancelRoute',\n    'isLoading',\n    'isError',\n    'playlistToEdit'\n  ],\n\n  data () {\n    return {\n      forClient: 'false',\n      forClientOptions: [\n        { label: this.$t('playlists.for_client'), value: 'true' },\n        { label: this.$t('playlists.for_studio'), value: 'false' }\n      ],\n      form: {\n        name: this.playlistToEdit.name,\n        for_client: this.playlistToEdit.for_client\n      }\n    }\n  },\n\n  methods: {\n    runConfirmation () {\n      this.form.for_client = this.forClient === 'true'\n      this.$emit('confirm', this.form)\n    }\n  },\n\n  watch: {\n    playlistToEdit () {\n      if (this.playlistToEdit) {\n        this.form.name = this.playlistToEdit.name\n      } else {\n        this.form = {\n          name: ''\n        }\n      }\n    },\n\n    active () {\n      if (this.active) {\n        this.forClient = this.playlistToEdit.for_client ? 'true' : 'false'\n        setTimeout(() => {\n          this.$refs.nameField.focus()\n        }, 100)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.is-danger {\n  color: #ff3860;\n  font-style: italic;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPlaylistModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPlaylistModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditPlaylistModal.vue?vue&type=template&id=1d7ab2c7&scoped=true&\"\nimport script from \"./EditPlaylistModal.vue?vue&type=script&lang=js&\"\nexport * from \"./EditPlaylistModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditPlaylistModal.vue?vue&type=style&index=0&id=1d7ab2c7&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d7ab2c7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{class:{\n  'error': true,\n  'has-text-right': _vm.alignRight,\n  'is-hidden': _vm.hidden\n}},[_vm._v(\" \"+_vm._s(_vm.text)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<p :class=\"{\n  'error': true,\n  'has-text-right': alignRight,\n  'is-hidden': hidden\n}\">\n  {{ text }}\n</p>\n</template>\n\n<script>\nexport default {\n  name: 'error-text',\n  props: {\n    text: {\n      default: '',\n      type: String\n    },\n    hidden: {\n      default: false,\n      type: Boolean\n    },\n    alignRight: {\n      default: false,\n      type: Boolean\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ErrorText.vue?vue&type=template&id=1338c033&\"\nimport script from \"./ErrorText.vue?vue&type=script&lang=js&\"\nexport * from \"./ErrorText.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function (_h,_vm) {var _c=_vm._c;return (_vm.props.previewFileId)?_c('img',_vm._b({directives:[{name:\"lazy\",rawName:\"v-lazy\",value:('/api/pictures/' + _vm.props.type + '/preview-files/' + _vm.props.previewFileId + '.png'),expression:\"'/api/pictures/' + props.type + '/preview-files/' + props.previewFileId + '.png'\"}],key:_vm.props.previewFileId,staticClass:\"thumbnail-picture\",style:({\n    width: _vm.props.width,\n    height: _vm.props.height\n  })},'img',_vm.data.attrs,false)):_c('span',_vm._b({class:{\n    'thumbnail-picture': true,\n    'thumbnail-empty': true\n  },style:({\n    width: _vm.props.width,\n    height: _vm.props.emptyHeight ? _vm.props.emptyHeight : _vm.props.height,\n  })},'span',_vm.data.attrs,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template functional>\n<img\n  class=\"thumbnail-picture\"\n  :style=\"{\n    width: props.width,\n    height: props.height\n  }\"\n  v-lazy=\"'/api/pictures/' + props.type + '/preview-files/' + props.previewFileId + '.png'\"\n  :key=\"props.previewFileId\"\n  v-bind=\"data.attrs\"\n  v-if=\"props.previewFileId\"\n/>\n<span\n  :class=\"{\n    'thumbnail-picture': true,\n    'thumbnail-empty': true\n  }\"\n  :style=\"{\n    width: props.width,\n    height: props.emptyHeight ? props.emptyHeight : props.height,\n  }\"\n  v-bind=\"data.attrs\"\n  v-else>\n</span>\n</template>\n\n<script>\nexport default {\n  name: 'light-entity-thumbnail',\n  functional: true,\n\n  props: {\n    previewFileId: {\n      default: '',\n      type: String\n    },\n    width: {\n      default: '150px',\n      type: String\n    },\n    height: {\n      default: '50px',\n      type: String\n    },\n    emptyHeight: {\n      type: String\n    },\n    type: {\n      default: 'thumbnails',\n      type: String\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.dark .thumbnail-picture {\n  background-color: $dark-grey-lighter;\n  border-color: $dark-grey-light;\n}\n\nspan.thumbnail-empty {\n  background: $white-grey;\n  display: block;\n  margin: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightEntityThumbnail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LightEntityThumbnail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LightEntityThumbnail.vue?vue&type=template&id=f815df12&functional=true&\"\nimport script from \"./LightEntityThumbnail.vue?vue&type=script&lang=js&\"\nexport * from \"./LightEntityThumbnail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LightEntityThumbnail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",class:{\n    dark: true,\n    'full-height': !_vm.isAddingShot,\n    'playlist-player': true\n  }},[_c('div',{ref:\"header\",staticClass:\"playlist-header flexrow\"},[(_vm.playlist && _vm.playlist.for_client)?_c('div',{staticClass:\"flexrow-item for-client\"},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.client_playlist'))+\" \")]):_vm._e(),_c('span',{staticClass:\"flexrow-item playlist-name\"},[_vm._v(\" \"+_vm._s(_vm.playlist.name)+\" \")]),(_vm.isCurrentUserManager && !_vm.isAddingShot)?_c('button-simple',{staticClass:\"playlist-button add-shots-button flexrow-item\",attrs:{\"icon\":\"plus\",\"text\":\"Add Shots\"},on:{\"click\":function($event){return _vm.$emit('show-add-shots')}}}):_vm._e(),(_vm.isCurrentUserManager)?_c('button-simple',{staticClass:\"edit-button playlist-button flexrow-item\",attrs:{\"icon\":\"edit\"},on:{\"click\":function($event){return _vm.$emit('edit-clicked')}}}):_vm._e(),(_vm.isCurrentUserManager)?_c('button-simple',{staticClass:\"delete-button playlist-button flexrow-item\",attrs:{\"icon\":\"delete\"},on:{\"click\":_vm.showDeleteModal}}):_vm._e()],1),(!_vm.isAddingShot)?_c('div',{ref:\"video-container\",staticClass:\"filler flexrow video-container\"},[_c('raw-video-player',{ref:\"raw-player\",staticClass:\"raw-player\",attrs:{\"shots\":_vm.shotList},on:{\"metadata-loaded\":_vm.onMetadataLoaded,\"shot-change\":_vm.onShotChange,\"time-update\":_vm.onTimeUpdate,\"max-duration-update\":_vm.onMaxDurationUpdate}}),(_vm.isComparing)?_c('raw-video-player',{ref:\"raw-player-comparison\",staticClass:\"raw-player\",attrs:{\"shots\":_vm.shotListToCompare}}):_vm._e(),_c('div',{ref:\"canvas-wrapper\",staticClass:\"canvas-wrapper\"},[_c('canvas',{ref:\"annotation-canvas\",staticClass:\"canvas\",attrs:{\"id\":\"annotation-canvas\"}})]),_c('task-info',{ref:\"task-info\",class:{\n        'flexrow-item': true,\n        'task-info-column': true,\n        'hidden': _vm.isCommentsHidden\n      },attrs:{\"task\":_vm.task,\"is-preview\":false}})],1):_vm._e(),(!_vm.isAddingShot)?_c('div',{ref:\"playlist-progress\",staticClass:\"playlist-progress\"},[_c('div',{staticClass:\"video-progress\"},[_c('progress',{ref:\"progress\",attrs:{\"value\":\"0\",\"min\":\"0\"},on:{\"click\":_vm.onProgressBarClicked}},[_c('span',{ref:\"progress-bar\",attrs:{\"id\":\"progress-bar\"}})])])]):_vm._e(),(_vm.playlist.id && !_vm.isAddingShot)?_c('annotation-bar',{ref:\"playlist-annotation\",staticClass:\"playlist-annotations\",attrs:{\"annotations\":_vm.annotations,\"max-duration-raw\":_vm.maxDurationRaw},on:{\"select-annotation\":_vm.loadAnnotation}}):_vm._e(),(_vm.playlist.id && !_vm.isAddingShot)?_c('div',{ref:\"button-bar\",staticClass:\"playlist-footer flexrow\"},[(!_vm.isPlaying)?_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"play\"},on:{\"click\":_vm.onPlayClicked}}):_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"pause\"},on:{\"click\":_vm.onPlayClicked}}),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\" \"+_vm._s(_vm.currentTime)+\" \")]),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\" / \")]),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\" \"+_vm._s(_vm.maxDuration)+\" \")]),_c('span',{staticClass:\"flexrow-item time-indicator mr1\"},[_vm._v(\" (\"+_vm._s(_vm.currentFrame)+\") \")]),_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"left\"},on:{\"click\":_vm.onPreviousFrameClicked}}),_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"right\"},on:{\"click\":_vm.onNextFrameClicked}}),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\" \"+_vm._s(_vm.shotList.length > 0 ? _vm.playingShotIndex + 1 : 0)+\" \")]),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\" / \")]),_c('span',{staticClass:\"flexrow-item time-indicator mr1\"},[_vm._v(\" \"+_vm._s(_vm.shotList.length)+\" \")]),_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"back\"},on:{\"click\":_vm.onPlayPreviousShotClicked}}),_c('button-simple',{staticClass:\"playlist-button flexrow-item\",attrs:{\"icon\":\"forward\"},on:{\"click\":_vm.onPlayNextShotClicked}}),(_vm.taskTypeOptions)?_c('button-simple',{class:{\n        'comparison-button': true,\n        'flexrow-item': true,\n        'playlist-button': true,\n        active: _vm.isComparing\n      },attrs:{\"icon\":\"compare\"},on:{\"click\":_vm.onCompareClicked}}):_vm._e(),(_vm.isComparing)?_c('combobox',{staticClass:\"playlist-button flexrow-item comparison-list\",attrs:{\"options\":_vm.taskTypeOptions},model:{value:(_vm.taskTypeToCompare),callback:function ($$v) {_vm.taskTypeToCompare=$$v},expression:\"taskTypeToCompare\"}}):_vm._e(),_c('span',{staticClass:\"filler\"}),_c('button-simple',{staticClass:\"playlist-button flexrow-item\",attrs:{\"icon\":\"undo\"},on:{\"click\":_vm.undoLastAction}}),_c('button-simple',{staticClass:\"playlist-button flexrow-item\",attrs:{\"icon\":\"redo\"},on:{\"click\":_vm.redoLastAction}}),_c('pencil-picker',{attrs:{\"isActive\":_vm.isDrawing,\"isOpen\":_vm.isShowingPencilPalette,\"pencil\":_vm.pencil,\"palette\":this.pencilPalette},on:{\"toggle-palette\":_vm.onPickPencil,\"change\":_vm.onChangePencil}}),_c('color-picker',{attrs:{\"isActive\":_vm.isDrawing,\"isOpen\":_vm.isShowingPalette,\"color\":this.color,\"palette\":this.palette},on:{\"TogglePalette\":_vm.onPickColor,\"change\":_vm.onChangeColor}}),_c('button-simple',{class:{\n        'playlist-button': true,\n        'flexrow-item': true,\n        active: _vm.isDrawing\n      },attrs:{\"icon\":\"pencil\"},on:{\"click\":_vm.onAnnotateClicked}}),_c('button-simple',{staticClass:\"playlist-button flexrow-item\",attrs:{\"icon\":\"remove\"},on:{\"click\":_vm.onDeleteClicked}}),_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"comment\"},on:{\"click\":_vm.onCommentClicked}}),_c('button-simple',{staticClass:\"playlist-button flexrow-item\",attrs:{\"icon\":\"film\"},on:{\"click\":_vm.onFilmClicked}}),_c('div',{staticClass:\"flexrow-item playlist-button\",staticStyle:{\"position\":\"relative\"}},[_c('a',{class:{\n          'dl-button': true,\n          'zip-button': true,\n          hidden: _vm.isDlButtonsHidden\n        },attrs:{\"href\":_vm.zipDlPath}},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.download_zip'))+\" \")]),(_vm.isCurrentUserManager)?_c('span',{class:{\n          'dl-button': true,\n          'mp4-button': true,\n          hidden: _vm.isDlButtonsHidden\n        },on:{\"click\":_vm.onBuildClicked}},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.build_mp4'))+\" \")]):_vm._e(),_c('div',{class:{\n          'build-list': true,\n          hidden: _vm.isDlButtonsHidden\n        }},[(!_vm.playlist.build_jobs || _vm.playlist.build_jobs.length === 0)?_c('span',[_vm._v(\" \"+_vm._s(_vm.$t('playlists.no_build'))+\" \")]):_c('div',[_c('div',{staticClass:\"build-title\"},[_vm._v(\" \"+_vm._s(_vm.$t('playlists.available_build'))+\" \")]),_vm._l((_vm.playlist.build_jobs),function(job){return _c('div',{key:job.id,staticClass:\"flexrow\"},[_c('a',{staticClass:\"flexrow-item\",attrs:{\"href\":_vm.getBuildPath(job)}},[_vm._v(\" \"+_vm._s(_vm.formatDate(job.created_at))+\" \")]),_c('span',{staticClass:\"filler\"}),(job.status === 'running')?_c('spinner',{staticClass:\"build-spinner\"}):_c('button',{staticClass:\"delete-job-button\",on:{\"click\":function($event){return _vm.onRemoveBuildJob(job)}}},[_vm._v(\" x \")])],1)})],2)]),_c('button-simple',{staticClass:\"playlist-button\",attrs:{\"icon\":\"download\"},on:{\"click\":_vm.toggleDlButtons}})],1),(_vm.isFullScreenEnabled)?_c('button-simple',{staticClass:\"button playlist-button flexrow-item\",attrs:{\"icon\":\"maximize\"},on:{\"click\":_vm.onFullscreenClicked}}):_vm._e()],1):_vm._e(),(_vm.playlist.id)?_c('div',{ref:\"playlisted-shots\",class:{\n      'playlisted-shots': true,\n      flexrow: true,\n      hidden: _vm.isShotsHidden\n    }},[(_vm.isLoading)?_c('spinner',{staticClass:\"spinner\"}):_vm._l((_vm.shotList),function(shot,index){return _c('div',{key:shot.id,staticClass:\"flexrow-item has-text-centered\"},[_c('playlisted-shot',{ref:'shot-' + index,refInFor:true,attrs:{\"index\":index,\"shot\":shot,\"is-playing\":_vm.playingShotIndex === index},on:{\"play-click\":_vm.playShot,\"remove-shot\":_vm.removeShot,\"preview-changed\":_vm.onPreviewChanged,\"shot-dropped\":_vm.onShotDropped}})],1)})],2):_vm._e(),_c('delete-modal',{attrs:{\"active\":_vm.modals.delete,\"is-loading\":_vm.loading.deletePlaylist,\"is-error\":_vm.errors.deletePlaylist,\"text\":_vm.deleteText,\"error-text\":_vm.$t('playlists.delete_error')},on:{\"confirm\":_vm.confirmRemovePlaylist,\"cancel\":_vm.hideDeleteModal}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flexrow wrapper\"},[_c('drag',{attrs:{\"transfer-data\":_vm.shot.id},on:{\"drag\":_vm.onDragged}},[_c('div',{class:{\n        'playlisted-shot': true,\n        playing: _vm.isPlaying\n      }},[_c('div',{staticClass:\"thumbnail-wrapper\",on:{\"click\":function($event){$event.preventDefault();return _vm.onPlayClick($event)}}},[(_vm.isCurrentUserManager)?_c('span',{staticClass:\"remove-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.remove')},on:{\"click\":function($event){$event.preventDefault();return _vm.onRemoveClick($event)}}},[_c('x-icon')],1):_vm._e(),_c('light-entity-thumbnail',{attrs:{\"width\":\"150px\",\"height\":\"103px\",\"preview-file-id\":_vm.previewFileId}})],1),_c('div',{staticClass:\"shot-title\"},[_vm._v(_vm._s(_vm.shot.sequence_name)+\" / \"+_vm._s(_vm.shot.name))]),(_vm.taskTypeOptions.length > 0)?_c('div',{staticClass:\"preview-choice\"},[_c('combobox',{ref:\"task-type-combobox\",attrs:{\"thin\":true,\"options\":_vm.taskTypeOptions},model:{value:(_vm.taskTypeId),callback:function ($$v) {_vm.taskTypeId=$$v},expression:\"taskTypeId\"}}),_c('combobox',{staticClass:\"version-combo\",attrs:{\"thin\":true,\"options\":_vm.previewFileOptions},model:{value:(_vm.previewFileId),callback:function ($$v) {_vm.previewFileId=$$v},expression:\"previewFileId\"}})],1):_c('div',[_vm._v(\" \"+_vm._s(_vm.$t('playlists.no_preview'))+\" \")])])]),_c('drop',{on:{\"drop\":_vm.onDropped}},[_c('div',{ref:\"drop-area\",staticClass:\"drop-area\"})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"flexrow wrapper\">\n  <drag @drag=\"onDragged\" :transfer-data=\"shot.id\">\n    <div\n      :class=\"{\n        'playlisted-shot': true,\n        playing: isPlaying\n      }\"\n    >\n      <div class=\"thumbnail-wrapper\" @click.prevent=\"onPlayClick\">\n        <span\n          class=\"remove-button flexrow-item\"\n          :title=\"$t('playlists.remove')\"\n          @click.prevent=\"onRemoveClick\"\n          v-if=\"isCurrentUserManager\"\n        >\n          <x-icon />\n        </span>\n        <light-entity-thumbnail\n          width=\"150px\"\n          height=\"103px\"\n          :preview-file-id=\"previewFileId\"\n        />\n      </div>\n\n      <div class=\"shot-title\">{{ shot.sequence_name }} / {{ shot.name }}</div>\n\n      <div\n        class=\"preview-choice\"\n        v-if=\"taskTypeOptions.length > 0\"\n      >\n        <combobox\n          ref=\"task-type-combobox\"\n          :thin=\"true\"\n          :options=\"taskTypeOptions\"\n          v-model=\"taskTypeId\"\n        />\n        <combobox\n          class=\"version-combo\"\n          :thin=\"true\"\n          :options=\"previewFileOptions\"\n          v-model=\"previewFileId\"\n        />\n      </div>\n      <div v-else>\n        {{ $t('playlists.no_preview') }}\n      </div>\n    </div>\n  </drag>\n  <drop @drop=\"onDropped\">\n    <div class=\"drop-area\" ref=\"drop-area\"></div>\n  </drop>\n</div>\n</template>\n\n<script>\n/*\n * Widget to describe a shot listed in a playlist. It allows to select a given\n * prevision for a given task type for current shot.\n * It fires events about drag'n'drop reordering too.\n */\nimport firstBy from 'thenby'\nimport { mapGetters } from 'vuex'\nimport { XIcon } from 'vue-feather-icons'\n\nimport Combobox from '../../widgets/Combobox'\nimport LightEntityThumbnail from '../../widgets/LightEntityThumbnail'\n\nexport default {\n  name: 'playlisted-shot',\n\n  components: {\n    Combobox,\n    LightEntityThumbnail,\n    XIcon\n  },\n\n  data () {\n    return {\n      taskTypeId: null,\n      previewFileId: this.shot.preview_file_id\n    }\n  },\n\n  props: {\n    index: {\n      default: 0,\n      type: Number\n    },\n    isPlaying: {\n      default: false,\n      type: Boolean\n    },\n    shot: {\n      default: () => {},\n      type: Object\n    }\n  },\n\n  mounted () {\n    this.setCurrentParameters()\n    this.setListeners()\n  },\n\n  computed: {\n    ...mapGetters([\n      'taskTypeMap',\n      'isCurrentUserManager'\n    ]),\n\n    dropArea () {\n      return this.$refs['drop-area']\n    },\n\n    taskTypeOptions () {\n      return Object\n        .keys(this.shot.preview_files)\n        .map(id => this.taskTypeMap[id])\n        .sort(firstBy('priority', 1).thenBy('name'))\n        .map((taskType) => {\n          return {\n            label: taskType.name,\n            value: taskType.id\n          }\n        })\n    },\n\n    previewFileOptions () {\n      const previewFiles = this.shot.preview_files[this.taskTypeId] || []\n      return previewFiles.map(previewFile => ({\n        label: `v${previewFile.revision}`,\n        value: previewFile.id\n      }))\n    }\n  },\n\n  methods: {\n    getTaskTypeIdForPreviewFile (taskTypeIds, previewFileId) {\n      return taskTypeIds.find((taskTypeId) => {\n        const previewFiles = this.shot.preview_files[taskTypeId]\n        return previewFiles.some(previewFile => {\n          return previewFile.id === previewFileId\n        })\n      })\n    },\n\n    setCurrentParameters () {\n      // Find task type matching current preview.\n      const taskTypeIds = Object.keys(this.shot.preview_files)\n      if (taskTypeIds.length > 0) {\n        if (this.shot.preview_file_id) {\n          this.taskTypeId = this.getTaskTypeIdForPreviewFile(\n            taskTypeIds,\n            this.shot.preview_file_id\n          )\n        }\n        if (!this.taskTypeId) {\n          this.taskTypeId = taskTypeIds[0]\n        }\n      }\n    },\n\n    setListeners () {\n      this.dropArea.addEventListener('dragover', this.onDragover)\n      this.dropArea.addEventListener('dragleave', this.onDragleave)\n    },\n\n    onDragged () {\n    },\n\n    onDragleave () {\n      this.dropArea.style.background = 'transparent'\n    },\n\n    onDragover () {\n      this.dropArea.style.background = '#00B242'\n    },\n\n    onDropped (shotId) {\n      this.$refs['drop-area'].style.background = 'transparent'\n      this.$emit('shot-dropped', {\n        before: this.shot.id,\n        after: shotId\n      })\n    },\n\n    onPlayClick () {\n      this.$emit('play-click', this.index)\n    },\n\n    onRemoveClick (event) {\n      event.preventDefault()\n      event.stopPropagation()\n      this.$emit('remove-shot', this.shot)\n    }\n  },\n\n  watch: {\n    taskTypeId () {\n      // Set current preview was last preview selected. If there is no preview\n      // matching this task type, it selects the first preview available for\n      // this task type.\n      const previewFiles = this.shot.preview_files[this.taskTypeId]\n      if (previewFiles && previewFiles.length > 0) {\n        const isPreviewFile = previewFiles.some(previewFile => {\n          return previewFile.id === this.shot.preview_file_id\n        })\n        if (isPreviewFile) {\n          this.previewFileId = this.shot.preview_file_id\n        } else {\n          this.previewFileId = previewFiles[0].id\n        }\n      }\n    },\n\n    previewFileId () {\n      this.$emit('preview-changed', this.shot, this.previewFileId)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.wrapper {\n  align-items: stretch;\n}\n\n.drop-area {\n  width: 10px;\n  margin-left: 10px;\n  height: 100%;\n}\n\n.playlisted-shot {\n  border-top: 3px solid transparent;\n  display: flex;\n  flex-direction: column;\n  min-width: 150px;\n  padding:0;\n\n  &.playing {\n    border-top: 3px solid $green;\n  }\n}\n\n.shot-title {\n  margin-bottom: 0.6em;\n}\n\n.thumbnail-wrapper {\n  position: relative;\n  cursor: pointer;\n}\n\n.field {\n  margin-bottom: 0em;\n}\n\n.version-combo {\n  margin-top: 0.1em;\n}\n\n.remove-button {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  right: 0;\n  margin: 0.4em;\n  border-radius: 2em;\n  text-align: center;\n  background: rgba(0, 0, 0, 0.3);\n  cursor: pointer;\n  z-index: 100;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n\n  svg {\n    width: 10px;\n    height: 10px;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistedShot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistedShot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlaylistedShot.vue?vue&type=template&id=f045dd04&scoped=true&\"\nimport script from \"./PlaylistedShot.vue?vue&type=script&lang=js&\"\nexport * from \"./PlaylistedShot.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlaylistedShot.vue?vue&type=style&index=0&id=f045dd04&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f045dd04\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"video-wrapper filler flexrow-item\"},[_c('video',{ref:\"player1\",attrs:{\"preload\":\"auto\"},on:{\"ended\":_vm.playNext}}),_c('video',{ref:\"player2\",attrs:{\"preload\":\"auto\"},on:{\"ended\":_vm.playNext}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div ref=\"container\" class=\"video-wrapper filler flexrow-item\">\n  <video\n    ref=\"player1\"\n    preload=\"auto\"\n    @ended=\"playNext\"\n  />\n  <video\n    ref=\"player2\"\n    preload=\"auto\"\n    @ended=\"playNext\"\n  />\n</div>\n</template>\n\n<script>\n/*\n * To play several videos, to avoid blinking effects, it's required to use\n * two video players. When switching from a shot to another, we hide and show\n * players so the blink does not occur.\n */\nimport { mapGetters } from 'vuex'\nimport { roundToFrame } from '../../../lib/video'\n\nexport default {\n  name: 'raw-video-player',\n\n  components: {\n  },\n\n  props: {\n    shots: {\n      type: Array,\n      default: () => []\n    }\n  },\n\n  data () {\n    return {\n      currentPlayer: this.player1,\n      isPlaying: false,\n      nextPlayer: this.player2,\n      playingIndex: 0\n    }\n  },\n\n  // Video need to be resized after each window size change. It's due\n  // to a HTML5 limitation related to video height.\n  mounted () {\n    this.resetHeight()\n    this.$refs.player1.addEventListener('loadedmetadata', this.emitLoadedEvent)\n    window.addEventListener('resize', this.resetHeight)\n  },\n\n  beforeDestroy () {\n    window.removeEventListener('resize', this.resetHeight)\n    this.$refs.player1.removeEventListener('loadedmetadata', this.emitLoadedEvent)\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction'\n    ]),\n\n    container () {\n      return this.$refs.container\n    },\n\n    fps () {\n      return this.currentProduction.fps || 24\n    },\n\n    player1 () {\n      return this.$refs.player1\n    },\n\n    player2 () {\n      return this.$refs.player2\n    }\n  },\n\n  methods: {\n    emitLoadedEvent (event) {\n      this.$emit('metadata-loaded', event)\n    },\n\n    getMoviePath (previewId) {\n      return `/api/movies/originals/preview-files/${previewId}.mp4`\n    },\n\n    getNextIndex (index) {\n      let i = index + 1 >= this.shots.length ? 0 : index + 1\n      // While we don't come back to initial shot and we have video previews\n      while (i !== index && this.shots[i].preview_file_extension !== 'mp4') {\n        i++\n        if (i >= this.shots.length) i = 0\n      }\n      return i\n    },\n\n    getPreviousIndex (index) {\n      let i = index - 1 >= 0 ? index - 1 : this.shots.length - 1\n      // While we don't come back to initial shot and we have video previews\n      while (i !== index && this.shots[i].preview_file_extension !== 'mp4') {\n        i--\n        if (i < 0) i = this.shots.length\n      }\n      return i\n    },\n\n    clear () {\n      if (this.currentPlayer) {\n        this.currentPlayer.src = ''\n        this.currentPlayer.removeAttribute('src')\n        this.currentPlayer.load()\n      }\n    },\n\n    goPreviousFrame () {\n      const newTime = this.currentPlayer.currentTime - 1 / this.fps\n      if (newTime < 0) {\n        this.setCurrentTime(0)\n      } else {\n        this.setCurrentTime(newTime)\n      }\n    },\n\n    goNextFrame () {\n      const newTime = this.currentPlayer.currentTime + 1 / this.fps\n      if (newTime > this.currentPlayer.duration) {\n        this.setCurrentTime(this.video.duration)\n      } else {\n        this.setCurrentTime(newTime)\n      }\n    },\n\n    loadPreviousShot () {\n      this.loadShot(this.getPreviousIndex(this.currentIndex))\n      this.$emit('shot-change', this.currentIndex)\n    },\n\n    loadNextShot () {\n      this.loadShot(this.getNextIndex(this.currentIndex))\n      this.$emit('shot-change', this.currentIndex)\n    },\n\n    loadShot (index = 0) {\n      if (index < this.shots.length) {\n        const nextIndex = this.getNextIndex(index)\n        const shot = this.shots[index]\n        const nextShot = this.shots[nextIndex]\n\n        this.currentIndex = index\n        this.currentPlayer = this.player1\n        this.nextPlayer = this.player2\n        this.currentPlayer.removeEventListener(\n          'loadedmetadata',\n          this.updateMaxDuration\n        )\n        this.currentPlayer.addEventListener(\n          'loadedmetadata',\n          this.updateMaxDuration\n        )\n\n        this.currentPlayer.src = this.getMoviePath(shot.preview_file_id)\n        this.nextPlayer.src = this.getMoviePath(nextShot.preview_file_id)\n        this.currentPlayer.style.display = 'block'\n        this.nextPlayer.style.display = 'none'\n        this.resetHeight()\n\n        this.currentPlayer.removeEventListener('timeupdate', this.updateTime)\n        this.currentPlayer.addEventListener('timeupdate', this.updateTime)\n\n        this.$emit('shot-change', this.currentIndex)\n      }\n    },\n\n    pause () {\n      if (this.currentPlayer) this.currentPlayer.pause()\n      this.isPlaying = false\n    },\n\n    play () {\n      let shot = this.shots[this.currentIndex]\n      if (shot) {\n        if (!shot.preview_file_id) this.loadNextShot()\n        shot = this.shots[this.currentIndex]\n        if (shot.preview_file_id) {\n          if (this.currentPlayer) this.currentPlayer.play()\n          this.isPlaying = true\n        }\n      }\n    },\n\n    playNext () {\n      const nextIndex = this.getNextIndex(this.currentIndex)\n      this.currentIndex = nextIndex\n      this.$emit('shot-change', this.currentIndex)\n\n      this.currentPlayer.style.display = 'none'\n      this.nextPlayer.style.display = 'block'\n      this.nextPlayer.play()\n\n      this.switchPlayers()\n      this.updateMaxDuration()\n    },\n\n    resetHeight () {\n      this.$nextTick(() => {\n        if (this.currentPlayer) this.currentPlayer.style.height = '0px'\n        if (this.nextPlayer) this.nextPlayer.style.height = '0px'\n        const height = this.container.offsetHeight\n        if (this.currentPlayer) this.currentPlayer.style.height = `${height}px`\n        if (this.nextPlayer) this.nextPlayer.style.height = `${height}px`\n      })\n    },\n\n    getCurrentTime () {\n      return this.currentPlayer.currentTime\n    },\n\n    setCurrentTime (currentTime) {\n      currentTime = roundToFrame(currentTime, this.fps)\n      if (this.currentPlayer) this.currentPlayer.currentTime = currentTime\n    },\n\n    switchPlayers () {\n      const nextIndex = this.getNextIndex(this.currentIndex)\n      const nextShot = this.shots[nextIndex]\n      this.tmpPlayer = this.currentPlayer\n      this.currentPlayer = this.nextPlayer\n      this.nextPlayer = this.tmpPlayer\n      this.nextPlayer.src = this.getMoviePath(nextShot.preview_file_id)\n      this.resetHeight()\n\n      this.currentPlayer.removeEventListener('timeupdate', this.updateTime)\n      this.nextPlayer.removeEventListener('timeupdate', this.updateTime)\n      this.currentPlayer.addEventListener('timeupdate', this.updateTime)\n    },\n\n    updateTime (time) {\n      this.$emit('time-update', time)\n    },\n\n    updateMaxDuration () {\n      this.$emit('max-duration-update', this.currentPlayer.duration)\n    },\n\n    getWidth () {\n      return this.currentPlayer.offsetWidth\n    },\n\n    getHeight () {\n      return this.currentPlayer.offsetHeight\n    },\n\n    getVideoRatio () {\n      return this.getVideoWidth() / this.getVideoHeight()\n    },\n\n    getVideoWidth () {\n      return this.currentPlayer.videoWidth\n    },\n\n    getVideoHeight () {\n      return this.currentPlayer.videoHeight\n    }\n  },\n\n  watch: {\n    shots () {\n      if (this.shots.length > 0) {\n        this.loadShot(0)\n        this.pause()\n        this.setCurrentTime(0)\n\n        const shot = this.shots[this.currentIndex]\n        if (shot && !shot.preview_file_id) this.loadNextShot()\n      }\n      setTimeout(this.resetHeight, 300)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.video-wrapper {\n  height: 100%;\n}\n\n.container {\n  max-height: 100%;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RawVideoPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RawVideoPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RawVideoPlayer.vue?vue&type=template&id=7d3894d4&scoped=true&\"\nimport script from \"./RawVideoPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./RawVideoPlayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RawVideoPlayer.vue?vue&type=style&index=0&id=7d3894d4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d3894d4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\n<div\n  ref=\"container\"\n  :class=\"{\n    dark: true,\n    'full-height': !isAddingShot,\n    'playlist-player': true\n  }\"\n>\n  <div class=\"playlist-header flexrow\" ref=\"header\">\n    <div class=\"flexrow-item for-client\" v-if=\"playlist && playlist.for_client\">\n      {{ $t('playlists.client_playlist') }}\n    </div>\n    <span class=\"flexrow-item playlist-name\">\n      {{ playlist.name }}\n    </span>\n    <button-simple\n      @click=\"$emit('show-add-shots')\"\n      class=\"playlist-button add-shots-button flexrow-item\"\n      icon=\"plus\"\n      text=\"Add Shots\"\n      v-if=\"isCurrentUserManager && !isAddingShot\"\n    />\n    <button-simple\n      @click=\"$emit('edit-clicked')\"\n      class=\"edit-button playlist-button flexrow-item\"\n      icon=\"edit\"\n      v-if=\"isCurrentUserManager\"\n    />\n    <button-simple\n      @click=\"showDeleteModal\"\n      class=\"delete-button playlist-button flexrow-item\"\n      icon=\"delete\"\n      v-if=\"isCurrentUserManager\"\n    />\n    <!--span\n      class=\"flexrow-item\"\n      v-if=\"isCurrentUserClient && shotList.length > 0\"\n    >\n      {{ nbCommentedShots }}\n      /\n      {{ shotList.length }}\n    </span>\n    <div\n      class=\"progress flexrow-item\"\n      v-if=\"isCurrentUserClient && shotList.length > 0\"\n    >\n      <span\n        ref=\"review-progress-bar\"\n        :class=\"{\n          'progress-bar': false,\n          complete: nbCommentedShots === shotList.length\n        }\"\n        :style=\"{\n          width: Math.round(100 * nbCommentedShots / shotList.length) + 'px'\n        }\"\n      >\n      </span>\n    </div-->\n  </div>\n\n  <div\n    class=\"filler flexrow video-container\"\n    ref=\"video-container\"\n    v-if=\"!isAddingShot\"\n  >\n    <raw-video-player\n      class=\"raw-player\"\n      ref=\"raw-player\"\n      :shots=\"shotList\"\n      @metadata-loaded=\"onMetadataLoaded\"\n      @shot-change=\"onShotChange\"\n      @time-update=\"onTimeUpdate\"\n      @max-duration-update=\"onMaxDurationUpdate\"\n    />\n    <raw-video-player\n      class=\"raw-player\"\n      ref=\"raw-player-comparison\"\n      :shots=\"shotListToCompare\"\n      v-if=\"isComparing\"\n    />\n    <div class=\"canvas-wrapper\" ref=\"canvas-wrapper\">\n      <canvas\n        id=\"annotation-canvas\"\n        ref=\"annotation-canvas\"\n        class=\"canvas\"\n      >\n      </canvas>\n    </div>\n\n    <task-info\n      ref=\"task-info\"\n      :class=\"{\n        'flexrow-item': true,\n        'task-info-column': true,\n        'hidden': isCommentsHidden\n      }\"\n      :task=\"task\"\n      :is-preview=\"false\"\n    />\n  </div>\n\n  <div\n    class=\"playlist-progress\"\n    ref=\"playlist-progress\"\n    v-if=\"!isAddingShot\"\n  >\n    <div class=\"video-progress\">\n      <progress\n        ref=\"progress\"\n        value=\"0\"\n        min=\"0\"\n        @click=\"onProgressBarClicked\"\n      >\n        <span\n          id=\"progress-bar\"\n          ref=\"progress-bar\"\n        ></span>\n      </progress>\n    </div>\n  </div>\n\n  <annotation-bar\n    class=\"playlist-annotations\"\n    ref=\"playlist-annotation\"\n    :annotations=\"annotations\"\n    :max-duration-raw=\"maxDurationRaw\"\n    @select-annotation=\"loadAnnotation\"\n    v-if=\"playlist.id && !isAddingShot\"\n  />\n\n  <div\n    class=\"playlist-footer flexrow\"\n    ref=\"button-bar\"\n    v-if=\"playlist.id && !isAddingShot\"\n  >\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onPlayClicked\"\n      icon=\"play\"\n      v-if=\"!isPlaying\"\n    />\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onPlayClicked\"\n      icon=\"pause\"\n      v-else\n    />\n    <span class=\"flexrow-item time-indicator\">\n      {{ currentTime }}\n    </span>\n    <span class=\"flexrow-item time-indicator\">\n    /\n\n    </span>\n    <span class=\"flexrow-item time-indicator\">\n      {{ maxDuration }}\n    </span>\n    <span class=\"flexrow-item time-indicator mr1\">\n      ({{ currentFrame }})\n    </span>\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onPreviousFrameClicked\"\n      icon=\"left\"\n    />\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onNextFrameClicked\"\n      icon=\"right\"\n    />\n\n    <span class=\"flexrow-item time-indicator\">\n      {{ shotList.length > 0 ? playingShotIndex + 1 : 0 }}\n    </span>\n    <span class=\"flexrow-item time-indicator\">\n    /\n    </span>\n    <span class=\"flexrow-item time-indicator mr1\">\n      {{ shotList.length }}\n    </span>\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onPlayPreviousShotClicked\"\n      icon=\"back\"\n    />\n    <button-simple\n      class=\"playlist-button flexrow-item\"\n      @click=\"onPlayNextShotClicked\"\n      icon=\"forward\"\n    />\n    <button-simple\n      :class=\"{\n        'comparison-button': true,\n        'flexrow-item': true,\n        'playlist-button': true,\n        active: isComparing\n      }\"\n      icon=\"compare\"\n      @click=\"onCompareClicked\"\n      v-if=\"taskTypeOptions\"\n    />\n    <combobox\n      class=\"playlist-button flexrow-item comparison-list\"\n      :options=\"taskTypeOptions\"\n      v-model=\"taskTypeToCompare\"\n      v-if=\"isComparing\"\n    />\n    <span class=\"filler\"></span>\n\n    <button-simple\n      class=\"playlist-button flexrow-item\"\n      icon=\"undo\"\n      @click=\"undoLastAction\"\n    />\n\n    <button-simple\n      class=\"playlist-button flexrow-item\"\n      icon=\"redo\"\n      @click=\"redoLastAction\"\n    />\n\n    <pencil-picker\n      :isActive=\"isDrawing\"\n      :isOpen=\"isShowingPencilPalette\"\n      :pencil=\"pencil\"\n      :palette=\"this.pencilPalette\"\n      @toggle-palette=\"onPickPencil\"\n      @change=\"onChangePencil\"\n    />\n\n    <color-picker\n      :isActive=\"isDrawing\"\n      :isOpen=\"isShowingPalette\"\n      :color=\"this.color\"\n      :palette=\"this.palette\"\n      @TogglePalette=\"onPickColor\"\n      @change=\"onChangeColor\"\n    />\n\n    <button-simple\n      :class=\"{\n        'playlist-button': true,\n        'flexrow-item': true,\n        active: isDrawing\n      }\"\n      @click=\"onAnnotateClicked\"\n      icon=\"pencil\"\n    />\n    <button-simple\n      class=\"playlist-button flexrow-item\"\n      icon=\"remove\"\n      @click=\"onDeleteClicked\"\n    />\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onCommentClicked\"\n      icon=\"comment\"\n    />\n    <button-simple\n      class=\"playlist-button flexrow-item\"\n      @click=\"onFilmClicked\"\n      icon=\"film\"\n    />\n\n    <div class=\"flexrow-item playlist-button\" style=\"position: relative\">\n      <a\n        :class=\"{\n          'dl-button': true,\n          'zip-button': true,\n          hidden: isDlButtonsHidden\n        }\"\n        :href=\"zipDlPath\"\n      >\n        {{ $t('playlists.download_zip') }}\n      </a>\n      <span\n        :class=\"{\n          'dl-button': true,\n          'mp4-button': true,\n          hidden: isDlButtonsHidden\n        }\"\n        @click=\"onBuildClicked\"\n        v-if=\"isCurrentUserManager\"\n      >\n        {{ $t('playlists.build_mp4') }}\n      </span>\n      <div\n        :class=\"{\n          'build-list': true,\n          hidden: isDlButtonsHidden\n        }\"\n      >\n        <span v-if=\"!playlist.build_jobs || playlist.build_jobs.length === 0\">\n        {{ $t('playlists.no_build') }}\n        </span>\n        <div\n          v-else\n        >\n          <div class=\"build-title\">\n            {{ $t('playlists.available_build') }}\n          </div>\n          <div\n            class=\"flexrow\"\n            :key=\"job.id\"\n            v-for=\"job in playlist.build_jobs\"\n          >\n            <a\n              class=\"flexrow-item\"\n              :href=\"getBuildPath(job)\"\n            >\n              {{ formatDate(job.created_at) }}\n            </a>\n            <span class=\"filler\"></span>\n            <spinner\n              class=\"build-spinner\"\n              v-if=\"job.status === 'running'\"\n            />\n            <button\n              class=\"delete-job-button\"\n              @click=\"onRemoveBuildJob(job)\"\n              v-else\n            >\n              x\n            </button>\n          </div>\n        </div>\n      </div>\n      <button-simple\n        class=\"playlist-button\"\n        icon=\"download\"\n        @click=\"toggleDlButtons\"\n      />\n    </div>\n\n    <button-simple\n      class=\"button playlist-button flexrow-item\"\n      @click=\"onFullscreenClicked\"\n      icon=\"maximize\"\n      v-if=\"isFullScreenEnabled\"\n    />\n  </div>\n\n  <div\n    :class=\"{\n      'playlisted-shots': true,\n      flexrow: true,\n      hidden: isShotsHidden\n    }\"\n    ref=\"playlisted-shots\"\n    v-if=\"playlist.id\"\n  >\n    <spinner class=\"spinner\" v-if=\"isLoading\" />\n    <div\n      class=\"flexrow-item has-text-centered\"\n      :key=\"shot.id\"\n      v-for=\"(shot, index) in shotList\"\n      v-else\n    >\n      <playlisted-shot\n        :ref=\"'shot-' + index\"\n        :index=\"index\"\n        :shot=\"shot\"\n        :is-playing=\"playingShotIndex === index\"\n        @play-click=\"playShot\"\n        @remove-shot=\"removeShot\"\n        @preview-changed=\"onPreviewChanged\"\n        @shot-dropped=\"onShotDropped\"\n      />\n    </div>\n  </div>\n\n  <delete-modal\n    :active=\"modals.delete\"\n    :is-loading=\"loading.deletePlaylist\"\n    :is-error=\"errors.deletePlaylist\"\n    :text=\"deleteText\"\n    :error-text=\"$t('playlists.delete_error')\"\n    @confirm=\"confirmRemovePlaylist\"\n    @cancel=\"hideDeleteModal\"\n  />\n</div>\n</template>\n\n<script>\n/*\n * This modules manages all the options available while playing a playlist.\n * It is made to work with a single playlist.\n */\nimport moment from 'moment-timezone'\nimport { mapActions, mapGetters } from 'vuex'\nimport { fabric } from 'fabric'\n\nimport { roundToFrame } from '../../../lib/video'\nimport AnnotationBar from './AnnotationBar'\nimport ButtonSimple from '../../widgets/ButtonSimple'\nimport ColorPicker from '../../widgets/ColorPicker'\nimport Combobox from '../../widgets/Combobox'\nimport DeleteModal from '../../modals/DeleteModal'\nimport PencilPicker from '../../widgets/PencilPicker'\nimport PlaylistedShot from './PlaylistedShot'\nimport RawVideoPlayer from './RawVideoPlayer'\nimport Spinner from '../../widgets/Spinner'\nimport TaskInfo from '../../sides/TaskInfo'\n\nimport { annotationMixin } from '../../previews/annotation_mixin'\n\nexport default {\n  name: 'playlist-player',\n  mixins: [annotationMixin],\n\n  components: {\n    AnnotationBar,\n    ButtonSimple,\n    ColorPicker,\n    Combobox,\n    DeleteModal,\n    PencilPicker,\n    PlaylistedShot,\n    RawVideoPlayer,\n    Spinner,\n    TaskInfo\n  },\n\n  props: {\n    playlist: {\n      type: Object,\n      default: () => {}\n    },\n    shots: {\n      type: Object,\n      default: () => {}\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isAddingShot: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data () {\n    return {\n      annotations: [],\n      color: '#ff3860',\n      currentTime: '00:00.00',\n      currentTimeRaw: 0,\n      forClient: 'false',\n      fabricCanvas: null,\n      isDlButtonsHidden: true,\n      isCommentsHidden: true,\n      isComparing: false,\n      isDrawing: false,\n      isShowingPalette: false,\n      isShowingPencilPalette: false,\n      isPlaying: false,\n      isShotsHidden: false,\n      maxDuration: '00:00.00',\n      maxDurationRaw: 0,\n      palette: ['#ff3860', '#008732', '#5E60BA', '#f57f17'],\n      pencil: 'big',\n      pencilPalette: ['big', 'medium', 'small'],\n      playingShotIndex: 0,\n      shotList: [],\n      shotListToCompare: [],\n      task: null,\n      taskTypeOptions: [],\n      taskTypeToCompare: null,\n      modals: {\n        edit: false,\n        delete: false\n      },\n      loading: {\n        playlists: false,\n        editPlaylist: false,\n        deletePlaylist: false\n      },\n      errors: {\n        playlists: false,\n        editPlaylist: false,\n        deletePlaylist: false\n      },\n      forClientOptions: [\n        { label: this.$t('playlists.for_client'), value: 'true' },\n        { label: this.$t('playlists.for_studio'), value: 'false' }\n      ]\n    }\n  },\n\n  mounted () {\n    this.shotList = Object.values(this.shots)\n    this.updateProgressBar()\n    this.$nextTick(() => {\n      window.addEventListener('keydown', this.onKeyDown, false)\n      window.addEventListener('resize', this.onWindowResize)\n      if (!this.$el.nomousemove) this.$el.onmousemove = this.onMouseMove\n      this.setupFabricCanvas()\n      this.resetCanvas()\n    })\n  },\n\n  beforeDestroy () {\n    window.removeEventListener('keydown', this.onKeyDown)\n    window.removeEventListener('resize', this.onWindowResize)\n    this.$el.onmousemove = null\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction',\n      'isCurrentUserClient',\n      'isCurrentUserManager',\n      'taskMap',\n      'taskTypeMap',\n      'user'\n    ]),\n\n    isFullScreenEnabled () {\n      return !!(\n        document.fullscreenEnabled ||\n        document.mozFullScreenEnabled ||\n        document.msFullscreenEnabled ||\n        document.webkitSupportsFullscreen ||\n\n        document.webkitFullscreenEnabled ||\n        document.createElement('video').webkitRequestFullScreen\n      )\n    },\n\n    zipDlPath () {\n      return `/api/data/playlists/${this.playlist.id}/download/zip`\n    },\n\n    canvas () {\n      return this.$refs['canvas-wrapper']\n    },\n\n    container () {\n      return this.$refs.container\n    },\n\n    currentFrame () {\n      return `${Math.floor(this.currentTimeRaw * this.fps)}`.padStart(3, '0')\n    },\n\n    fps () {\n      return this.currentProduction.fps || 24\n    },\n\n    rawPlayer () {\n      return this.$refs['raw-player']\n    },\n\n    rawPlayerComparison () {\n      return this.$refs['raw-player-comparison']\n    },\n\n    progress () {\n      return this.$refs.progress\n    },\n\n    progressBar () {\n      return this.$refs['progress-bar']\n    },\n\n    progressCursor () {\n      return this.$refs['progress-cursor']\n    },\n\n    video () {\n      return this.$refs.movie\n    },\n\n    deleteText () {\n      if (this.playlist) {\n        return this.$t('playlists.delete_text', { name: this.playlist.name })\n      } else {\n        return ''\n      }\n    },\n\n    timezone () {\n      return this.user.timezone || moment.tz.guess()\n    },\n\n    nbCommentedShots () {\n      const isCommentedByClient = shot => shot.is_commented\n      return this.shotList.filter(isCommentedByClient).length\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'deletePlaylist',\n      'editPlaylist',\n      'removeBuildJob',\n      'runPlaylistBuild'\n    ]),\n\n    getBuildPath (job) {\n      return `/api/data/playlists/${this.playlist.id}/jobs/${job.id}/build/mp4`\n    },\n\n    formatDate (creationDate) {\n      const date = moment.tz(creationDate, 'UTC').tz(this.timezone)\n      return date.format('YYYY-MM-DD HH:mm')\n    },\n\n    formatTime (seconds) {\n      let milliseconds = `.${Math.round((seconds % 1) * 100)}`\n      if (milliseconds.length === 2) milliseconds += '0'\n      try {\n        return new Date(1000 * seconds)\n          .toISOString()\n          .substr(14, 5) + milliseconds\n      } catch (err) {\n        console.error(err)\n        return '00:00.00'\n      }\n    },\n\n    getTimelinePosition (time, index) {\n      if (this.$refs.movie && this.progress) {\n        let position = Math.round(\n          (time / this.$refs.movie.duration) * this.progress.offsetWidth\n        )\n        position = position - index * 10 - 5\n        if (position < 0) position = 0\n        if (position + 10 > this.progress.offsetWidth) {\n          position = position - 5\n        }\n        return position\n      } else {\n        return 0\n      }\n    },\n\n    displayBars () {\n      if (this.$refs['button-bar']) {\n        this.$refs.header.style.display = 'flex'\n        this.$refs['button-bar'].style.display = 'flex'\n        if (this.$refs['button-bar']) {\n          this.$refs['playlist-progress'].style.display = 'flex'\n          this.$refs['button-bar'].style.opacity = 1\n          this.$refs['playlist-progress'].style.opacity = 1\n        }\n        this.$refs.header.style.opacity = 1\n        this.container.style.cursor = 'default'\n      }\n    },\n\n    hideBars () {\n      this.$refs.header.style.opacity = 0\n      this.$refs['button-bar'].style.opacity = 0\n      this.$refs['playlist-progress'].style.opacity = 0\n      setTimeout(() => {\n        this.$refs.header.style.display = 'none'\n        this.$refs['button-bar'].style.display = 'none'\n        this.$refs['playlist-progress'].style.display = 'none'\n        this.container.style.cursor = 'none'\n      }, 500)\n    },\n\n    showDeleteModal () {\n      this.modals.delete = true\n    },\n\n    hideDeleteModal () {\n      this.modals.delete = false\n    },\n\n    confirmRemovePlaylist () {\n      this.loading.deletePlaylist = true\n      this.errors.deletePlaylist = false\n      this.deletePlaylist({\n        playlist: this.playlist,\n        callback: (err) => {\n          if (err) this.errors.deletePlaylist = true\n          this.loading.deletePlaylist = false\n          this.$emit('playlist-deleted')\n          this.modals.delete = false\n        }\n      })\n    },\n\n    updateProgressBar () {\n      if (this.progress) {\n        const factor = this.currentTimeRaw / this.maxDurationRaw\n        this.progress.value = this.currentTimeRaw\n        this.progressBar.style.width = Math.floor(factor * 100) + '%'\n        /*\n        const progressCoordinates = this.progress.getBoundingClientRect()\n        const x = progressCoordinates.width * factor + progressCoordinates.x\n        this.progressCursor.style.left = Math.round(x - 7) + 'px'\n        this.progressCursor.style.top = Math.round(progressCoordinates.y - 3) + 'px'\n        */\n      }\n    },\n\n    updateTaskPanel () {\n      if (this.shotList.length > 0) {\n        const shot = this.shotList[this.playingShotIndex]\n        if (shot) this.task = this.taskMap[shot.preview_file_task_id]\n        else this.task = null\n      } else {\n        this.task = null\n      }\n    },\n\n    scrollToShot (index) {\n      const shotEl = this.$refs['shot-' + index]\n      if (shotEl && shotEl[0]) {\n        const shotWidget = shotEl[0].$el\n        const playlistEl = this.$refs['playlisted-shots']\n        const shot = this.shotList[index]\n        this.annotations = shot.preview_file_annotations || []\n        if (shotWidget) {\n          const margin = 30\n          const rect = shotWidget.getBoundingClientRect()\n          const listRect = playlistEl.getBoundingClientRect()\n          const isRight = rect.right > listRect.right - margin\n          const isLeft = rect.left < listRect.left - margin\n\n          if (isLeft) {\n            const scrollingRequired = rect.left - listRect.left - margin\n            playlistEl.scrollLeft = playlistEl.scrollLeft + scrollingRequired\n          } else if (isRight) {\n            const scrollingRequired = rect.right - listRect.right + margin\n            playlistEl.scrollLeft = playlistEl.scrollLeft + scrollingRequired\n          }\n        }\n      }\n    },\n\n    scrollToRight () {\n      if (this.shotList.length > 0) {\n        this.scrollToShot(this.shotList.length - 1)\n      }\n    },\n\n    play () {\n      this.rawPlayer.play()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].play()\n      }\n      this.isPlaying = this.$refs['raw-player'].isPlaying\n      this.hideCanvas()\n      this.clearCanvas()\n    },\n\n    pause () {\n      this.showCanvas()\n      if (this.rawPlayer) this.rawPlayer.pause()\n      if (this.isComparing) this.$refs['raw-player-comparison'].pause()\n      this.isPlaying = false\n    },\n\n    playShot (shotIndex) {\n      const shot = this.shotList[shotIndex]\n      this.hideCanvas()\n      this.clearCanvas()\n      if (shot.preview_file_extension === 'mp4') {\n        this.annotations = shot.preview_file_annotations || []\n        this.playingShotIndex = shotIndex\n        this.scrollToShot(this.playingShotIndex)\n        this.rawPlayer.loadShot(shotIndex)\n        if (this.isComparing) {\n          this.$refs['raw-player-comparison'].loadShot(shotIndex)\n        }\n        if (this.isPlaying) {\n          this.rawPlayer.play()\n          if (this.isComparing) this.$refs['raw-player-comparison'].play()\n        }\n      } else {\n        this.annotations = []\n      }\n    },\n\n    goPreviousFrame () {\n      this.clearCanvas()\n      this.rawPlayer.goPreviousFrame()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].goPreviousFrame()\n      }\n      const annotation = this.getAnnotation(this.rawPlayer.getCurrentTime())\n      if (annotation) this.loadAnnotation(annotation)\n    },\n\n    goNextFrame () {\n      this.clearCanvas()\n      this.rawPlayer.goNextFrame()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].goNextFrame()\n      }\n      const annotation = this.getAnnotation(this.rawPlayer.getCurrentTime())\n      if (annotation) this.loadAnnotation(annotation)\n    },\n\n    removeShot (shot) {\n      this.$emit('remove-shot', shot)\n      this.$options.silent = true\n      const shotIndex = this.shotList.findIndex(s => s.id === shot.id)\n      this.shotList.splice(shotIndex, 1)\n      setTimeout(() => {\n        this.$options.silent = false\n      }, 1000)\n    },\n\n    setFullScreen () {\n      if (this.container.requestFullscreen) {\n        this.container.requestFullscreen()\n      } else if (this.container.mozRequestFullScreen) {\n        this.container.mozRequestFullScreen()\n      } else if (this.container.webkitRequestFullScreen) {\n        this.container.webkitRequestFullScreen()\n      } else if (this.container.msRequestFullscreen) {\n        this.container.msRequestFullscreen()\n      }\n      this.container.setAttribute('data-fullscreen', !!true)\n    },\n\n    exitFullScreen () {\n      if (document.exitFullscreen) {\n        document.exitFullscreen()\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen()\n      } else if (document.webkitCancelFullScreen) {\n        document.webkitCancelFullScreen()\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen()\n      }\n      this.container.setAttribute('data-fullscreen', !!false)\n    },\n\n    isFullScreen () {\n      return !!(\n        document.fullScreen ||\n        document.webkitIsFullScreen ||\n        document.mozFullScreen ||\n        document.msFullscreenElement ||\n        document.fullscreenElement\n      )\n    },\n\n    onProgressBarClicked (e) {\n      this.clearCanvas()\n      var pos =\n        (e.pageX - this.progress.offsetLeft) / this.progress.offsetWidth\n      const currentTime = pos * this.maxDurationRaw\n      this.rawPlayer.setCurrentTime(currentTime)\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].setCurrentTime(currentTime)\n      }\n    },\n\n    onPreviousFrameClicked () {\n      this.goPreviousFrame()\n    },\n\n    onNextFrameClicked () {\n      this.goNextFrame()\n    },\n\n    onPlayPreviousShotClicked () {\n      this.rawPlayer.loadPreviousShot()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].loadPreviousShot()\n      }\n      if (this.isPlaying) this.play()\n    },\n\n    onPlayNextShotClicked () {\n      this.rawPlayer.loadNextShot()\n      if (this.isComparing) {\n        this.$refs['raw-player-comparison'].loadNextShot()\n      }\n      if (this.isPlaying) this.play()\n    },\n\n    onPlayPauseClicked () {\n      if (!this.isPlaying) {\n        this.play()\n      } else {\n        this.pause()\n      }\n    },\n\n    onFullscreenClicked () {\n      if (this.isFullScreen()) {\n        this.exitFullScreen()\n      } else {\n        this.setFullScreen()\n      }\n    },\n\n    onKeyDown (event) {\n      this.displayBars()\n      if (!['INPUT', 'TEXTAREA'].includes(event.target.tagName)) {\n        if (event.keyCode === 46 && this.fabricCanvas) {\n          this.deleteSelection()\n        } else if (event.keyCode === 37) {\n          event.preventDefault()\n          event.stopPropagation()\n          this.goPreviousFrame()\n        } else if (event.keyCode === 39) {\n          event.preventDefault()\n          event.stopPropagation()\n          this.goNextFrame()\n        } else if (event.keyCode === 32) {\n          event.preventDefault()\n          event.stopPropagation()\n          this.onPlayPauseClicked()\n        } else if (event.ctrlKey && event.altKey && event.keyCode === 68) {\n          this.onAnnotateClicked()\n        } else if (event.ctrlKey && event.keyCode === 90) {\n          this.undoLastAction()\n        } else if (event.altKey && event.keyCode === 82) {\n          this.redoLastAction()\n        }\n      }\n    },\n\n    onWindowResize () {\n      const now = (new Date().getTime())\n      this.lastCall = this.lastCall || 0\n      if (now - this.lastCall > 600) {\n        this.lastCall = now\n        setTimeout(() => {\n          this.resetHeight()\n          this.resetCanvas()\n          this.reloadAnnotations()\n        }, 100)\n      }\n    },\n\n    reloadAnnotations () {\n      const annotations = this.annotations.map(a => ({ ...a }))\n      this.annotations = []\n      setTimeout(() => {\n        this.annotations = annotations\n        const annotation = this.getAnnotation(this.currentTimeRaw)\n        if (annotation) this.loadAnnotation(annotation)\n      }, 200)\n    },\n\n    onFilmClicked () {\n      this.isShotsHidden = !this.isShotsHidden\n      this.$nextTick(() => {\n        this.resetHeight()\n        this.scrollToShot(this.playingShotIndex)\n      })\n    },\n\n    onCommentClicked () {\n      const height = this.$refs['video-container'].offsetHeight\n      this.isCommentsHidden = !this.isCommentsHidden\n      if (!this.isCommentsHidden) {\n        this.$refs['task-info'].$el.style.height = `${height}px`\n      }\n      this.$nextTick(() => {\n        this.$refs['task-info'].focusCommentTextarea()\n        this.resetHeight()\n      })\n    },\n\n    onCompareClicked () {\n      this.isComparing = !this.isComparing\n    },\n\n    onPlayClicked () {\n      if (this.rawPlayer.isPlaying) {\n        this.pause()\n      } else {\n        this.play()\n      }\n    },\n\n    onTimeUpdate () {\n      if (this.rawPlayer.currentPlayer) {\n        this.currentTimeRaw = this.rawPlayer.currentPlayer.currentTime\n      } else {\n        this.currentTimeRaw = 0\n      }\n      this.currentTime = this.formatTime(this.currentTimeRaw)\n      this.updateProgressBar()\n    },\n\n    onMaxDurationUpdate (duration) {\n      this.maxDurationRaw = duration\n      this.maxDuration = this.formatTime(duration)\n      if (this.progress) {\n        this.progress.setAttribute('max', this.maxDurationRaw)\n      }\n    },\n\n    onMouseMove () {\n      const buttonBar = this.$refs['button-bar']\n      if (buttonBar && buttonBar.style.opacity !== 1) {\n        this.displayBars()\n      }\n      const isMovieFullScreen =\n        this.isFullScreen() && this.isShotsHidden && this.isCommentsHidden\n      if (isMovieFullScreen) {\n        if (this.timer) clearTimeout(this.timer)\n        this.timer = setTimeout(() => {\n          const isMovieFullScreen =\n            this.isFullScreen() && this.isShotsHidden && this.isCommentsHidden\n          if (isMovieFullScreen) this.hideBars()\n        }, 2000)\n      }\n    },\n\n    onShotChange (shotIndex) {\n      this.playingShotIndex = shotIndex\n      if (this.rawPlayerComparison) {\n        const comparisonIndex = this.rawPlayerComparison.playingIndex\n        if (comparisonIndex < shotIndex) {\n          this.rawPlayerComparison.playNext()\n        } else {\n          this.rawPlayerComparison.setCurrentTime(0)\n          this.rawPlayerComparison.play()\n        }\n      }\n      if (!this.$options.silent) this.scrollToShot(this.playingShotIndex)\n    },\n\n    onPreviewChanged (shot, previewFileId) {\n      this.$emit('preview-changed', shot, previewFileId)\n    },\n\n    onShotDropped (info) {\n      this.$emit('order-change', info)\n    },\n\n    resetHeight () {\n      this.$nextTick(() => {\n        let height = this.container ? this.container.offsetHeight : 0\n        height -= this.$refs.header ? this.$refs.header.offsetHeight : 0\n        if (this.$refs['playlist-progress']) {\n          height -= this.$refs['playlist-progress'].offsetHeight\n        }\n        if (this.$refs['button-bar']) {\n          height -= this.$refs['button-bar'].offsetHeight\n        }\n        if (this.$refs['playlisted-shots']) {\n          height -= this.$refs['playlisted-shots'].offsetHeight\n        }\n        if (this.$refs['playlist-annotation']) {\n          height -= this.$refs['playlist-annotation'].$el.offsetHeight\n        }\n        if (this.$refs['video-container']) {\n          this.$refs['video-container'].style.height = `${height}px`\n        }\n        if (!this.isCommentsHidden) {\n          this.$refs['task-info'].$el.style.height = `${height}px`\n        }\n        if (this.rawPlayer) this.rawPlayer.resetHeight()\n        if (this.isComparing) {\n          this.$refs['raw-player-comparison'].resetHeight()\n        }\n        this.$nextTick(() => {\n          this.resetCanvas()\n          this.updateProgressBar()\n        })\n      })\n    },\n\n    resetCanvas () {\n      this.resetCanvasSize()\n      this.fabricCanvas.renderAll()\n      this.clearCanvas()\n    },\n\n    resetCanvasSize () {\n      if (this.rawPlayer) {\n        this.$nextTick(() => {\n          if (this.$refs['canvas-wrapper']) {\n            const ratio = this.rawPlayer.getVideoRatio()\n            const fullWidth = this.rawPlayer.$el.offsetWidth\n            const fullHeight = this.rawPlayer.$el.offsetHeight\n            const width = ratio ? fullHeight * ratio : fullWidth\n            if (fullWidth > width) {\n              const left = Math.round((fullWidth - width) / 2)\n              this.$refs['canvas-wrapper'].style.left = left + 'px'\n              this.$refs['canvas-wrapper'].style.top = '0px'\n              this.fabricCanvas.setDimensions({ width, height: fullHeight })\n            } else {\n              const height = ratio ? Math.round(fullWidth / ratio) : fullHeight\n              const top = Math.round((fullHeight - height) / 2)\n              this.$refs['canvas-wrapper'].style.left = '0px'\n              this.$refs['canvas-wrapper'].style.top = top + 'px'\n              this.fabricCanvas.setDimensions({ width: fullWidth, height })\n            }\n          }\n        })\n      }\n    },\n\n    rebuildComparisonOptions () {\n      const shots = Object.values(this.shots)\n      if (shots.length > 0) {\n        let taskTypeIds = Object.keys(shots[0].preview_files)\n        Object.values(this.shots).forEach((shot) => {\n          const shotTaskTypeIds = Object.keys(shot.preview_files)\n          taskTypeIds = taskTypeIds.filter(\n            value => shotTaskTypeIds.includes(value)\n          )\n        })\n        this.taskTypeOptions = taskTypeIds.map((taskTypeId) => {\n          return {\n            label: this.taskTypeMap[taskTypeId].name,\n            value: this.taskTypeMap[taskTypeId].id\n          }\n        })\n        if (this.taskTypeOptions.length > 0) {\n          this.taskTypeToCompare = this.taskTypeOptions[0].value\n        }\n      } else {\n        this.taskTypeOptions = []\n      }\n    },\n\n    rebuildShotListToCompare () {\n      if (this.taskTypeToCompare) {\n        this.shotListToCompare = this.shotList.map((shot) => {\n          const preview = shot.preview_files[this.taskTypeToCompare][0]\n          return ({\n            preview_file_id: preview.id,\n            preview_file_extension: 'mp4'\n          })\n        })\n      } else {\n        this.buildShotListToCompare = []\n      }\n    },\n\n    resetComparison () {\n      this.rebuildShotListToCompare()\n      this.$nextTick(() => {\n        this.pause()\n        const player = this.$refs['raw-player-comparison']\n        player.loadShot(this.playingShotIndex)\n        player.setCurrentTime(this.currentTimeRaw)\n      })\n    },\n\n    clearCanvas () {\n      if (this.fabricCanvas) {\n        this.fabricCanvas.clear()\n      }\n    },\n\n    onAnnotateClicked () {\n      this.showCanvas()\n      if (this.isDrawing) {\n        this.fabricCanvas.isDrawingMode = false\n        this.isDrawing = false\n      } else {\n        this.fabricCanvas.isDrawingMode = true\n        this.isDrawing = true\n      }\n    },\n\n    showCanvas () {\n      if (this.canvas) this.canvas.style.display = 'block'\n    },\n\n    hideCanvas () {\n      if (this.canvas) this.canvas.style.display = 'none'\n    },\n\n    loadAnnotation (annotation) {\n      this.pause()\n      const currentTime = annotation.time || 0\n      if (this.rawPlayer) {\n        this.rawPlayer.setCurrentTime(currentTime)\n        if (this.isComparing) {\n          this.$refs['raw-player-comparison'].setCurrentTime(currentTime)\n        }\n        this.currentTimeRaw = currentTime\n        this.updateProgressBar()\n\n        this.fabricCanvas.isDrawingMode = false\n        this.isDrawing = false\n        this.clearCanvas()\n\n        let scaleMultiplierX = 1\n        let scaleMultiplierY = 1\n        if (annotation.width) {\n          scaleMultiplierX = this.fabricCanvas.width / annotation.width\n          scaleMultiplierY = this.fabricCanvas.width / annotation.width\n        }\n        if (annotation.height) {\n          scaleMultiplierY = this.fabricCanvas.height / annotation.height\n        }\n\n        annotation.drawing.objects.forEach((obj) => {\n          const base = {\n            left: obj.left * scaleMultiplierX,\n            top: obj.top * scaleMultiplierY,\n            fill: 'transparent',\n            stroke: obj.stroke,\n            strokeWidth: obj.strokeWidth,\n            radius: obj.radius,\n            width: obj.width,\n            height: obj.height,\n            scaleX: obj.scaleX * scaleMultiplierX,\n            scaleY: obj.scaleY * scaleMultiplierY\n          }\n          if (obj.type === 'path') {\n            let strokeMultiplier = 1\n            if (obj.canvasWidth) {\n              strokeMultiplier = obj.canvasWidth / this.fabricCanvas.width\n            }\n            const path = new fabric.Path(\n              obj.path,\n              {\n                ...base,\n                strokeWidth: obj.strokeWidth * strokeMultiplier,\n                canvasWidth: obj.canvasWidth\n              }\n            )\n            path.setControlsVisibility({\n              mt: false,\n              mb: false,\n              ml: false,\n              mr: false,\n              bl: false,\n              br: false,\n              tl: false,\n              tr: false,\n              mtr: false\n            })\n            this.fabricCanvas.add(path)\n          }\n        })\n      }\n    },\n\n    saveAnnotations () {\n      const currentTime = roundToFrame(this.currentTimeRaw, this.fps) || 0\n      if (!this.annotations) return\n      const annotation = this.getAnnotation(currentTime)\n      const annotations = this.getNewAnnotations(currentTime, annotation)\n      const shot = this.shotList[this.playingShotIndex]\n      const preview = {\n        id: shot.preview_file_id,\n        task_id: shot.preview_file_task_id,\n        annotations: shot.preview_file_annotations\n      }\n      this.$emit('annotationchanged', {\n        preview: preview,\n        annotations: annotations\n      })\n    },\n\n    onDeleteClicked () {\n      this.deleteSelection()\n    },\n\n    getAnnotation (time) {\n      time = roundToFrame(time, this.fps)\n      if (this.annotations) {\n        return this.annotations.find(\n          (annotation) => annotation.time === time\n        )\n      } else {\n        return null\n      }\n    },\n\n    toggleDlButtons () {\n      this.isDlButtonsHidden = !this.isDlButtonsHidden\n    },\n\n    onBuildClicked () {\n      this.runPlaylistBuild(this.playlist)\n    },\n\n    onRemoveBuildJob (job) {\n      job.playlist_id = this.playlist.id\n      this.removeBuildJob(job)\n    },\n\n    onMetadataLoaded (event) {\n      this.$nextTick(() => {\n        this.resetCanvasSize()\n      })\n    }\n  },\n\n  watch: {\n    playingShotIndex () {\n      this.updateTaskPanel()\n      this.resetUndoStacks()\n    },\n\n    isComparing () {\n      if (this.isComparing) {\n        this.resetComparison()\n      }\n      this.$nextTick(this.resetCanvas)\n    },\n\n    taskTypeToCompare () {\n      if (this.isComparing) {\n        this.resetComparison()\n      }\n    },\n\n    shots () {\n      const playlistEl = this.$refs['playlisted-shots']\n      const scrollLeft = playlistEl ? playlistEl.scrollLeft : 0\n      this.shotList = Object.values(this.shots)\n      this.playingShotIndex = 0\n      this.pause()\n      if (this.rawPlayer) this.rawPlayer.setCurrentTime(0)\n      this.currentTimeRaw = 0\n      this.updateProgressBar()\n      this.updateTaskPanel()\n      this.rebuildComparisonOptions()\n      this.clearCanvas()\n      this.annotations = []\n      if (this.shotList.length === 0) {\n        if (this.rawPlayer) this.rawPlayer.clear()\n        if (this.isComparing) {\n          this.$refs['raw-player-comparison'].clear()\n        }\n        this.maxDurationRaw = 0\n        this.maxDuration = '00:00.00'\n      } else {\n        if (\n          this.shotList[0].preview_file_extension !== 'mp4'\n        ) {\n          this.$nextTick(() => {\n            this.rawPlayer.loadNextShot()\n          })\n        }\n        this.$nextTick(() => {\n          if (playlistEl) playlistEl.scrollLeft = scrollLeft\n        })\n      }\n      this.resetHeight()\n      this.resetCanvas()\n    },\n\n    forClient () {\n      const forClient = this.forClient === 'true'\n      if (this.playlist.for_client !== forClient) {\n        this.$emit('for-client-changed', forClient)\n      }\n    },\n\n    playlist () {\n      this.forClient = Boolean(this.playlist.for_client).toString()\n      this.$nextTick(() => {\n        this.updateProgressBar()\n        this.clearCanvas()\n      })\n    },\n\n    isAddingShot () {\n      this.$nextTick(() => {\n        this.updateProgressBar()\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.full-height {\n  height: 100%;\n}\n\n.playlist-player {\n  background: $dark-grey;\n  display: flex;\n  flex-direction: column;\n\n  .playlist-button {\n    margin: 0;\n    background: $dark-grey-light;\n    border: 0;\n    border-radius: 0;\n    color: $white-grey;\n\n    &:hover {\n      background: $dark-grey-lighter;\n    }\n\n    &.active {\n      color: $green;\n    }\n\n    &.add-shots-button {\n      border: 1px solid $dark-grey-strong;\n      border-radius: 10px;\n      margin-right: 0.5em;\n    }\n  }\n}\n\n.playlist-header {\n  color: $white-grey;\n  background: $dark-grey-light;\n\n  .playlist-name {\n    flex: 1;\n    font-size: 1.5em;\n    padding: 10px;\n    padding-left: 1em;\n  }\n\n  .edit-button,\n  .delete-button {\n    height: 50px;\n    width: 50px;\n  }\n}\n\n.playlisted-shots,\n.playlist-progress,\n.playlist-footer {\n  background: $dark-grey-light;\n  color: $white-grey;\n}\n\n.playlisted-shots {\n  border-top: 1px solid $dark-grey-strong;\n  padding: 0.5em;\n  overflow-x: auto;\n  min-height: 600px;\n  align-items: flex-start;\n  height: 240px;\n  min-height: 240px;\n}\n\n.task-info-column {\n  min-width: 450px;\n  max-width: 450px;\n  overflow-y: auto;\n}\n\n.loading-background {\n  width: 100%;\n  height: 100%;\n  background: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.spinner {\n  margin: auto;\n}\n\n.icon {\n  margin-top: -4px;\n  height: 20px;\n}\n\n.smaller {\n  height: 16px;\n}\n\n.right {\n  margin-left: auto;\n}\n\n.video-player {\n  display: flex;\n  flex-direction: column;\n  align-content: flex-end;\n  height: 100%;\n}\n\n.video-wrapper {\n  flex: 1;\n  display: flex;\n  background: black;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  margin: auto;\n  width: 100%;\n}\n\n.annotation-movie {\n  margin: auto;\n  width: 100%;\n}\n\n.time-indicator {\n  color: $light-grey;\n  padding-left: 0.8em;\n  margin-right: 0;\n}\n\n.video-container {\n  position: relative;\n}\n\n.canvas-wrapper {\n  margin: auto;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.buttons {\n  height: 32px;\n}\n\n.comparison-combobox {\n  margin-bottom: 0;\n}\n\n.buttons .comparison-button {\n  margin-left: 1em;\n}\n\nprogress::-moz-progress-bar {\n  background-color: #43B581;\n}\n\nprogress::-webkit-progress-value {\n  background-color: #43B581;\n}\n\nprogress {\n  width: 100%;\n  border-radius: 0;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: $grey;\n  height: 8px;\n  display: block;\n}\n\n.progress span#progress-bar {\n  width: 100%;\n  border-radius: 0;\n  margin: 0;\n  padding: 0;\n  background-color: #43B581;\n}\n\n.video-progress {\n  cursor: pointer;\n  width: 100%;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: $grey;\n  height: 8px;\n}\n\n.mr1 {\n  margin-right: 1em;\n}\n\n.playlist-progress {\n  width: 100%;\n}\n\n.playlist-header,\n.playlist-progress,\n.playlist-progress {\n  transition: opacity 0.5s ease\n}\n\n.progress-cursor {\n  position: absolute;\n  display: block;\n  background-color: #43B581;\n  border-radius: 50%;\n  width: 14px;\n  height: 14px;\n  z-index: 200;\n  cursor: pointer;\n}\n\n.comparison-list,\n.comparison-list p,\n.comparison-list select {\n  font-size: 0.8em;\n}\n.comparison-list select {\n  height: 2.2em;\n}\n\n.dl-button {\n  background: $dark-grey;\n  border: 1px solid $dark-grey;\n  color: $white;\n  position: absolute;\n  width: 180px;\n  padding: 8px;\n\n  &:hover {\n    background: $dark-grey-light;\n  }\n\n  &.zip-button {\n    left: -110px;\n    top: -200px;\n  }\n\n  &.mp4-button {\n    left: -110px;\n    top: -160px;\n    cursor: pointer;\n  }\n}\n\n.build-list {\n  background: $dark-grey;\n  border: 1px solid $dark-grey;\n  position: absolute;\n  width: 180px;\n  left: -110px;\n  top: -120px;\n  height: 120px;\n  overflow-y: auto;\n  padding: 8px;\n  z-index: 300;\n}\n\n.build-title {\n  margin-bottom: 0.5em;\n}\n\n.delete-job-button {\n  background: transparent;\n  border-radius: 50%;\n  color: $light-grey-light;\n  cursor: pointer;\n  padding: 3px;\n\n  &:hover {\n    background: $dark-grey-light;\n  }\n}\n\n.build-spinner {\n  width: 15px;\n  max-width: 15px;\n}\n\n.spinner {\n  margin-top: 80px;\n  margin-left: 1em;\n}\n\n.progress {\n  width: 100px;\n  height: 10px;\n  margin-right: 1em;\n  border-radius: 5px;\n  background: $grey;\n\n  span {\n    background: $dark-purple;\n    height: 10px;\n    display: block;\n\n    &.complete {\n      background: $green;\n    }\n  }\n}\n\n.color-picker {\n  width: 1.5rem;\n  height: 1.5rem;\n  border: 1px solid $white;\n}\n\n.slide-fade-enter-active {\n  transition: all .3s ease;\n}\n\n.slide-fade-leave-active {\n  transition: all .5s cubic-bezier(1.0, 0.5, 0.8, 1.0);\n}\n\n.slide-fade-enter, .slide-fade-leave-to {\n  transform: translateX(1.5rem);\n  opacity: 0;\n}\n\n.for-client {\n  background: $dark-purple-strong;\n  border: 2px solid $dark-purple-strong;\n  color: $white;\n  padding: 0.3em;\n  margin-left: 1em;\n  margin-right: 0;\n  border-radius: 5px;\n}\n\n#annotation-canvas {\n  margin: auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlaylistPlayer.vue?vue&type=template&id=4fa4158c&scoped=true&\"\nimport script from \"./PlaylistPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./PlaylistPlayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlaylistPlayer.vue?vue&type=style&index=0&id=4fa4158c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4fa4158c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"productions page fixed-page\">\n    <div class=\"columns\">\n      <div class=\"playlist-list-column column\" v-if=\"playlists.length > 0\">\n        <button\n          :class=\"{\n            button: true,\n            'is-loading': loading.addPlaylist\n          }\"\n          @click=\"showAddModal\"\n          key=\"new-playlist-button\"\n          v-if=\"isCurrentUserManager\"\n        >\n          <plus-icon class=\"icon is-small\" />\n          {{ $t('playlists.new_playlist') }}\n        </button>\n\n        <div\n          class=\"playlists\"\n          v-if=\"!loading.playlists\"\n        >\n          <router-link\n            :key=\"playlist.id\"\n            :to=\"getPlaylistPath(playlist.id)\"\n            :class=\"{\n              'playlist-item': true,\n              'for-client': playlist.for_client || false,\n              selected: playlist.id === currentPlaylist.id\n            }\"\n            v-for=\"playlist in playlists\"\n          >\n            <span>\n              {{ playlist.name }}\n            </span>\n            <span class=\"playlist-date\" title=\"last modified\">\n              {{ $t('playlists.updated_at') }}\n              {{ formatDate(playlist.updated_at) }}\n            </span>\n          </router-link>\n        </div>\n        <spinner\n          class=\"mt2\"\n          v-else\n        />\n        <error-text\n          text=\"$t('playlists.loading_error')\"\n          v-if=\"errors.playlistLoading\"\n        />\n      </div>\n\n      <div\n        class=\"playlist-column no-selection\"\n        v-if=\"playlists.length > 0 && !currentPlaylist.id\"\n      >\n        <h2>{{ $t('playlists.last_creation') }}</h2>\n        <div class=\"flexrow\" v-if=\"!loading.playlists\">\n          <router-link\n            class=\"recent-playlist flexrow-item\"\n            :key=\"'recent-playlist-' + playlist.id\"\n            :to=\"getPlaylistPath(playlist.id)\"\n            v-for=\"playlist in lastPlaylistsCreated\"\n          >\n            <light-entity-thumbnail\n              :preview-file-id=\"playlist.first_preview_file_id\"\n              type=\"previews\"\n              width=\"300px\"\n              height=\"auto\"\n              empty-height=\"150px\"\n            />\n            <h3>{{ playlist.name }}</h3>\n            <span>\n              {{ $t('playlists.created_at') }}\n              {{ formatDate(playlist.created_at) }}\n            </span>\n          </router-link>\n        </div>\n        <spinner class=\"mt2\" v-else />\n\n        <h2>{{ $t('playlists.last_modification') }}</h2>\n        <div class=\"flexrow\" v-if=\"!loading.playlists\">\n          <router-link\n            class=\"recent-playlist flexrow-item\"\n            :key=\"'recent-modified-playlist-' + playlist.id\"\n            :to=\"getPlaylistPath(playlist.id)\"\n            v-for=\"playlist in lastPlaylistsUpdated\"\n          >\n            <light-entity-thumbnail\n              :preview-file-id=\"playlist.first_preview_file_id\"\n              type=\"previews\"\n              width=\"300px\"\n              height=\"auto\"\n              empty-height=\"150px\"\n            />\n            <h3>{{ playlist.name }}</h3>\n            <span>\n              {{ $t('playlists.updated_at') }}\n              {{ formatDate(playlist.updated_at) }}\n            </span>\n          </router-link>\n        </div>\n        <spinner class=\"mt2\" v-else />\n      </div>\n      <div\n        class=\"playlist-column no-selection has-text-centered\"\n        v-else-if=\"playlists.length === 0\"\n      >\n        <div v-if=\"!loading.playlists\">\n          <p class=\"empty-explaination\">\n            {{ $t('playlists.no_playlist') }}\n          </p>\n          <button\n            :class=\"{\n              big: true,\n              button: true,\n              'is-loading': loading.addPlaylist\n            }\"\n            @click=\"showAddModal\"\n            key=\"new-playlist-button\"\n            v-if=\"isCurrentUserManager\"\n          >\n            {{ $t('playlists.new_playlist') }}\n          </button>\n        </div>\n        <spinner class=\"mt2\" v-else />\n      </div>\n\n      <div class=\"playlist-column column\" v-else>\n        <playlist-player\n          ref=\"playlist-player\"\n          :playlist=\"currentPlaylist\"\n          :shots=\"currentShots\"\n          :is-loading=\"loading.playlist\"\n          :is-adding-shot=\"isAddingShot\"\n          @edit-clicked=\"showEditModal\"\n          @show-add-shots=\"toggleAddShots\"\n          @preview-changed=\"onPreviewChanged\"\n          @playlist-deleted=\"goFirstPlaylist\"\n          @remove-shot=\"removeShot\"\n          @order-change=\"onOrderChange\"\n          @annotationchanged=\"onAnnotationChanged\"\n          @for-client-changed=\"onForClientChanged\"\n        />\n\n        <div\n          v-if=\"isCurrentUserManager && isAddingShot\"\n        >\n          <div class=\"addition-header\">\n            <div class=\"flexrow\">\n              <page-subtitle\n                class=\"flexrow-item\"\n                :text=\"$t('playlists.add_shots')\"\n              />\n              <span class=\"filler\"></span>\n              <button\n              />\n              <a\n                class=\"close-button\"\n                @click=\"toggleAddShots\"\n              >\n                <x-icon />\n              </a>\n            </div>\n            <div class=\"flexrow\">\n              <search-field\n                class=\"flexrow-item\"\n                ref=\"search-field\"\n                :can-save=\"false\"\n                @change=\"onSearchChange\"\n                placeholder=\"ex: seq01 anim=wfa\"\n              />\n              <button\n                :class=\"{\n                  button: true,\n                  'flexrow-item': true,\n                  'add-sequence': true\n                }\"\n                :disabled=\"isAdditionLoading\"\n                @click=\"addCurrentSelection\"\n                v-if=\"shotSearchText\"\n              >\n                {{ $t('playlists.add_selection') }}\n              </button>\n              <span class=\"filler\"></span>\n              <button\n                :class=\"{\n                  button: true,\n                  'add-sequence': true,\n                  'is-loading': this.loading.addEpisode\n                }\"\n                :disabled=\"isAdditionLoading\"\n                @click=\"addEpisodePending\"\n                v-if=\"isTVShow\"\n              >\n                {{ $t('playlists.add_episode') }}\n              </button>\n              <button\n                :class=\"{\n                  button: true,\n                  'add-sequence': true,\n                  'is-loading': this.loading.addMovie\n                }\"\n                :disabled=\"isAdditionLoading\"\n                @click=\"addMovie\"\n                v-else\n              >\n                {{ $t('playlists.add_movie') }}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"addition-section\"\n          v-if=\"isCurrentUserManager && isAddingShot\"\n        >\n          <spinner\n            class=\"mt2\"\n            key=\"shot-loader\"\n            v-if=\"isShotsLoading\"\n          />\n          <div\n            v-else\n          >\n            <div>\n              <div\n                :key=\"'sequence-' + i\"\n                v-for=\"(sequenceShots, i) in displayedShotsBySequence\"\n              >\n                <h2\n                  class=\"sequence-title\"\n                  v-if=\"sequenceShots.length > 0\"\n                >\n                   {{ sequenceShots[0].sequence_name }}\n                  <button\n                    class=\"button\"\n                    @click=\"addSequence(sequenceShots)\"\n                    :key=\"'add-sequence-button-' + sequenceShots[0].sequence_id\"\n                    v-if=\"isCurrentUserManager\"\n                  >\n                    {{ $t('playlists.add_sequence') }}\n                  </button>\n                </h2>\n                <div\n                 class=\"addition-shots\"\n                >\n                  <div\n                    :class=\"{\n                      'addition-shot': true,\n                      playlisted: currentShots[shot.id] !== undefined\n                    }\"\n                    :key=\"shot.id\"\n                    @click.prevent=\"addShotToPlaylist(shot)\"\n                    v-for=\"shot in sequenceShots\"\n                  >\n                      <light-entity-thumbnail\n                        :preview-file-id=\"shot.preview_file_id\"\n                        width=\"150px\"\n                        height=\"100px\"\n                      />\n                    <span class=\"playlisted-shot-name\">{{ shot.name }}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <edit-playlist-modal\n      ref=\"edit-playlist-modal\"\n      :active=\"modals.isEditDisplayed\"\n      :is-loading=\"loading.editPlaylist\"\n      :is-error=\"errors.editPlaylist\"\n      :playlist-to-edit=\"playlistToEdit\"\n      @cancel=\"hideEditModal\"\n      @confirm=\"confirmEditPlaylist\"\n    />\n\n  </div>\n</template>\n<script>\nimport Vue from 'vue'\nimport firstBy from 'thenby'\nimport moment from 'moment-timezone'\nimport { mapGetters, mapActions } from 'vuex'\nimport { PlusIcon, XIcon } from 'vue-feather-icons'\nimport { formatDate } from '../../lib/time'\nimport {\n  updateModelFromList,\n  removeModelFromList\n} from '../../lib/models'\n\nimport EditPlaylistModal from '../modals/EditPlaylistModal'\nimport ErrorText from '../widgets/ErrorText'\nimport LightEntityThumbnail from '../widgets/LightEntityThumbnail'\nimport PageSubtitle from '../widgets/PageSubtitle'\nimport PlaylistPlayer from './playlists/PlaylistPlayer'\nimport SearchField from '../widgets/SearchField'\nimport Spinner from '../widgets/Spinner'\n\nexport default {\n  name: 'productions',\n\n  components: {\n    ErrorText,\n    EditPlaylistModal,\n    LightEntityThumbnail,\n    PageSubtitle,\n    PlaylistPlayer,\n    PlusIcon,\n    SearchField,\n    Spinner,\n    XIcon\n  },\n\n  data () {\n    return {\n      currentPlaylist: { name: this.$t('playlists.no_selection') },\n      currentShot: 0,\n      currentShots: {},\n      isAddingShot: true,\n      playlistToEdit: {\n        name: `${moment().format('YYYY-MM-DD HH:mm:ss')}`,\n        for_client: false\n      },\n      sequenceId: null,\n      sequenceOptions: [],\n      sequenceShots: [],\n      modals: {\n        isDeleteDisplayed: false,\n        isEditDisplayed: false\n      },\n      loading: {\n        addPlaylist: false,\n        addDaily: false,\n        addEpisode: false,\n        addMovie: false,\n        addSequence: false,\n        addWeekly: false,\n        deletePlaylist: false,\n        editPlaylist: false,\n        playlist: false,\n        playlists: true\n      },\n      errors: {\n        addPlaylist: false,\n        editPlaylist: false,\n        deletePlaylist: false,\n        playlistLoading: false\n      }\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'displayedShots',\n      'displayedShotsBySequence',\n      'episodes',\n      'isShotsLoading',\n      'isTVShow',\n      'isCurrentUserManager',\n      'playlistMap',\n      'playlists',\n      'playlistsPath',\n      'playlistMap',\n      'sequences',\n      'shotsByEpisode',\n      'shotSearchText',\n      'shotMap',\n      'taskTypeMap'\n    ]),\n\n    isAdditionLoading () {\n      return (\n        this.loading.addSequence ||\n        this.loading.addWeekly ||\n        this.loading.addDaily ||\n        this.loading.addEpisode\n      )\n    },\n\n    lastPlaylistsUpdated () {\n      return this.playlists\n        .concat()\n        .sort(firstBy('updated_at'))\n        .reverse()\n        .slice(0, 3)\n    },\n\n    lastPlaylistsCreated () {\n      return this.playlists.slice(0, 3)\n    },\n\n    playlistPlayer () {\n      return this.$refs['playlist-player']\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'addNewBuildJob',\n      'addShotPreviewToPlaylist',\n      'changePlaylistOrder',\n      'changePlaylistPreview',\n      'displayMoreShots',\n      'editPlaylist',\n      'getPending',\n      'loadPlaylist',\n      'loadPlaylists',\n      'loadShotPreviewFiles',\n      'loadShots',\n      'markBuildJobAsDone',\n      'newPlaylist',\n      'refreshPlaylist',\n      'removeShotPreviewFromPlaylist',\n      'removeBuildJobFromList',\n      'setShotSearch',\n      'updatePreviewAnnotation'\n    ]),\n\n    formatDate (dateString) {\n      return formatDate(dateString)\n    },\n\n    getPlaylistPath (playlistId, section) {\n      const route = {\n        name: section ? `${section}-playlist` : 'playlist',\n        params: {\n          production_id: this.currentProduction.id,\n          playlist_id: playlistId\n        }\n      }\n      if (this.isTVShow && this.currentEpisode) {\n        route.name = `episode-${route.name}`\n        route.params.episode_id = this.currentEpisode.id\n      }\n      return route\n    },\n\n    loadShotsData (callback) {\n      this.loading.playlists = true\n      const loadPlaylists = () => {\n        this.loadPlaylistsData()\n        if (callback) callback()\n      }\n\n      if (this.sequences.length === 0) {\n        this.loadShots(loadPlaylists)\n      } else {\n        loadPlaylists()\n      }\n    },\n\n    loadPlaylistsData () {\n      const setFirstPlaylist = () => {\n        this.setCurrentPlaylist(() => {\n          if (!this.currentPlaylist || !this.currentPlaylist.id) {\n            this.goFirstPlaylist()\n          }\n        })\n      }\n      if (this.playlists.length === 0) {\n        this.loading.playlists = true\n        this.loadPlaylists((err) => {\n          if (err) this.errors.loadPlaylists = true\n          this.loading.playlists = false\n          if (!err) setFirstPlaylist()\n        })\n      } else {\n        this.loading.playlists = false\n        setFirstPlaylist()\n      }\n    },\n\n    rebuildCurrentShots () {\n      this.currentShots = {}\n      const tmpShots = {}\n      if (this.currentPlaylist && this.currentPlaylist.shots) {\n        this.currentPlaylist.shots.forEach((shotPreview) => {\n          this.addShotToCurrentShots(shotPreview, tmpShots)\n        })\n      }\n      this.$nextTick(() => {\n        this.currentShots = tmpShots\n      })\n    },\n\n    /*\n     * Add to current playlist the shot related to given preview.\n     * Use given preview as current preview for this shot and store other\n     * previews in given shot.\n     */\n    addShotToCurrentShots (previewFile, playlistShotMap) {\n      const shot = this.shotMap[previewFile.shot_id]\n      if (shot) {\n        const entityName =\n          shot.tasks.length > 0 ? shot.tasks[0].entity_name : shot.name\n        const playlistShot = {\n          id: previewFile.shot_id,\n          name: shot.name,\n          sequence_name: shot.sequence_name,\n          entity_name: entityName,\n          preview_files: previewFile.preview_files,\n          preview_file_id:\n            previewFile.id ||\n            previewFile.preview_file_id ||\n            shot.preview_file_id,\n          preview_file_extension:\n            previewFile.extension ||\n            previewFile.preview_file_extension ||\n            shot.preview_file_extension,\n          preview_file_task_id:\n            previewFile.task_id ||\n            previewFile.preview_file_task_id ||\n            shot.preview_file_task_id,\n          preview_file_annotations:\n            previewFile.annotations ||\n            previewFile.preview_file_annotations ||\n            shot.preview_file_annotations\n        }\n        Vue.set(playlistShotMap, previewFile.shot_id, playlistShot)\n        return playlistShot\n      } else {\n        return null\n      }\n    },\n\n    clearCurrentPlaylist () {\n      this.currentPlaylist = {}\n      this.currentShots = {}\n    },\n\n    resetPlaylist () {\n      this.clearCurrentPlaylist()\n      this.setCurrentPlaylist()\n    },\n\n    setCurrentPlaylist (callback) {\n      const playlistId = this.$route.params.playlist_id\n      const playlist = this.playlistMap[playlistId]\n      this.loading.playlist = true\n      if (playlist) {\n        this.loadPlaylist({\n          playlist,\n          callback: (err, playlist) => {\n            this.loading.playlist = false\n            if (err) console.error(err)\n            this.currentPlaylist = playlist\n            this.rebuildCurrentShots()\n            if (callback) callback()\n          }\n        })\n      } else {\n        this.currentPlaylist = {\n          name: this.$t('playlists.no_selection')\n        }\n        this.currentShots = {}\n      }\n    },\n\n    goFirstPlaylist () {\n      if (this.playlists.length > 0) {\n        this.$router.push({\n          name: 'playlist',\n          params: {\n            production_id: this.currentProduction.id,\n            playlist_id: this.playlists[0].id\n          }\n        })\n      } else {\n        this.$router.push(this.playlistsPath)\n      }\n    },\n\n    clearAdditionColumn () {\n      this.sequenceOptions = []\n      this.sequenceId = null\n    },\n\n    addShot (shot) {\n      return this.loadShotPreviewFiles(shot)\n        .then(previewFiles => this.addShotPreviewToPlaylist({\n          playlist: this.currentPlaylist,\n          previewFiles: previewFiles,\n          shot: { ...shot }\n        }))\n        .then((shotPreview) => {\n          return new Promise((resolve, reject) => {\n            const playlistShot =\n              this.addShotToCurrentShots(shotPreview, this.currentShots)\n            this.$refs['playlist-player'].shotList.push(playlistShot)\n            this.$nextTick(() => {\n              this.$refs['playlist-player'].scrollToRight()\n              resolve()\n            })\n          })\n        })\n        .catch((err) => console.error(err))\n    },\n\n    addShotToPlaylist (shot) {\n      if (!this.currentShots[shot.id]) {\n        this.$options.silent = true\n        this.addShot(shot)\n          .then(() => {\n            this.playlistPlayer.scrollToRight()\n            setTimeout(() => {\n              this.$options.silent = false\n            }, 500)\n          })\n      }\n    },\n\n    addCurrentSelection (sequenceShots) {\n      this.$options.silent = true\n      const currentShotMap = {}\n      this.displayedShots.forEach((shot) => {\n        currentShotMap[shot.id] = true\n      })\n      const shots = Object.values(this.shotMap)\n        .filter(s => currentShotMap[s.id] === true)\n        .reverse()\n\n      this.addShots(shots, () => {\n        this.$options.silent = false\n      })\n    },\n\n    addSequence (sequenceShots) {\n      if (sequenceShots.length > 0) {\n        const sequenceId = sequenceShots[0].sequence_id\n        const shots = Object.values(this.shotMap)\n          .filter(s => s.sequence_id === sequenceId)\n          .sort(firstBy('name'))\n          .reverse()\n        this.$options.silent = true\n        this.addShots(shots, () => {\n          this.$options.silent = false\n        })\n      }\n    },\n\n    addAllPending () {\n      this.$options.silent = true\n      this.loading.addWeekly = true\n      this.getPending(false)\n        .then((shots) => {\n          this.addShots(shots.reverse(), () => {\n            this.loading.addWeekly = false\n            this.$options.silent = false\n          })\n        })\n    },\n\n    addDailyPending () {\n      this.loading.addDaily = true\n      this.$options.silent = true\n      this.getPending(true)\n        .then((shots) => {\n          this.addShots(shots.reverse(), () => {\n            this.loading.addDaily = false\n            this.$options.silent = false\n          })\n        })\n    },\n\n    addEpisodePending () {\n      this.loading.addEpisode = true\n      this.$options.silent = true\n      const shots = [].concat(...this.shotsByEpisode).reverse()\n      this.addShots(shots, () => {\n        this.loading.addEpisode = false\n        this.$options.silent = false\n      })\n    },\n\n    addMovie () {\n      this.loading.addMovie = true\n      this.$options.silent = true\n      const shots = Object.values(this.shotMap)\n      this.addShots(shots, () => {\n        this.loading.addMovie = false\n        this.$options.silent = false\n      })\n    },\n\n    addShots (shots, callback) {\n      if (shots && shots.length > 0) {\n        const shot = shots.pop()\n        this.addShot(shot)\n          .then(() => {\n            this.addShots(shots, callback)\n          })\n      } else {\n        callback()\n      }\n    },\n\n    removeShot (shot) {\n      this.removeShotPreviewFromPlaylist({\n        playlist: this.currentPlaylist,\n        shot,\n        callback: () => {\n          delete this.currentShots[shot.id]\n        }\n      })\n    },\n\n    onPreviewChanged (shot, previewFileId) {\n      this.changePlaylistPreview({\n        playlist: this.currentPlaylist,\n        shot,\n        previewFileId\n      })\n    },\n\n    onOrderChange (info) {\n      this.changePlaylistOrder({\n        playlist: this.currentPlaylist,\n        info\n      })\n    },\n\n    onAnnotationChanged ({ preview, annotations }) {\n      const taskId = preview.task_id\n      this.updatePreviewAnnotation({ taskId, preview, annotations })\n    },\n\n    onForClientChanged (forClient) {\n      this.editPlaylist({\n        data: {\n          id: this.currentPlaylist.id,\n          for_client: forClient\n        }\n      })\n    },\n\n    toggleAddShots () {\n      this.isAddingShot = !this.isAddingShot\n    },\n\n    onSearchChange (searchQuery) {\n      if (searchQuery.length > 1) {\n        this.setShotSearch(searchQuery)\n        this.displayMoreShots()\n        this.displayMoreShots()\n        this.displayMoreShots()\n      } else {\n        this.setShotSearch('')\n      }\n    },\n\n    confirmEditPlaylist (form) {\n      if (this.playlistToEdit.id) {\n        form.id = this.currentPlaylist.id\n        this.runEditPlaylist(form)\n      } else {\n        this.runAddPlaylist(form)\n      }\n    },\n\n    runEditPlaylist (form) {\n      this.loading.editPlaylist = true\n      this.errors.editPlaylist = false\n      this.editPlaylist({\n        data: {\n          name: form.name,\n          for_client: form.for_client,\n          id: form.id\n        },\n        callback: (err, playlist) => {\n          if (err) this.errors.editPlaylist = true\n          this.loading.editPlaylist = false\n          this.modals.isEditDisplayed = false\n          Object.assign(this.currentPlaylist, playlist)\n        }\n      })\n    },\n\n    runAddPlaylist (form) {\n      const newPlaylist = {\n        name: form.name,\n        production_id: this.currentProduction.id,\n        for_client: form.for_client\n      }\n      if (this.isTVShow && this.currentEpisode) {\n        newPlaylist.episode_id = this.currentEpisode.id\n      }\n      this.loading.editPlaylist = true\n      this.errors.editPlaylist = false\n      this.newPlaylist({\n        data: newPlaylist,\n        callback: (err, playlist) => {\n          if (err) this.errors.editPlaylist = true\n          this.$router.push(this.getPlaylistPath(playlist.id))\n          this.loading.editPlaylist = false\n          this.modals.isEditDisplayed = false\n        }\n      })\n    },\n\n    showAddModal () {\n      this.playlistToEdit = {\n        name: `${moment().format('YYYY-MM-DD HH:mm:ss')}`,\n        for_client: false\n      }\n      this.$refs['edit-playlist-modal'] = true\n      this.modals.isEditDisplayed = true\n    },\n\n    showEditModal () {\n      this.playlistToEdit = this.currentPlaylist\n      this.modals.isEditDisplayed = true\n    },\n\n    hideEditModal () {\n      this.playlistToEdit = {\n        name: `${moment().format('YYYY-MM-DD HH:mm:ss')}`,\n        for_client: false\n      }\n      this.modals.isEditDisplayed = false\n    }\n  },\n\n  mounted () {\n    setTimeout(() => { // Needed to ensure playlist is loaded after topbar\n      this.loadShotsData(() => {\n        this.resetPlaylist()\n      })\n    }, 0)\n  },\n\n  watch: {\n    $route () {\n      this.setCurrentPlaylist()\n    },\n\n    currentPlaylist () {\n      if (this.currentPlaylist.shots) {\n        this.isAddingShot = this.currentPlaylist.shots.length === 0\n      }\n    },\n\n    currentProduction () {\n      this.$store.commit('LOAD_SEQUENCES_END', [])\n      this.$store.commit('LOAD_PLAYLISTS_END', [])\n      this.loadShotsData(() => {\n        this.resetPlaylist()\n      })\n    },\n\n    currentEpisode () {\n      this.$store.commit('LOAD_SEQUENCES_END', [])\n      this.$store.commit('LOAD_PLAYLISTS_END', [])\n      if (this.currentEpisode) {\n        this.loadShotsData(() => {\n          this.resetPlaylist()\n        })\n      }\n    },\n\n    isAddingShot () {\n      if (!this.isAddingShot) {\n        this.clearCurrentPlaylist()\n        this.setCurrentPlaylist()\n      }\n    }\n  },\n\n  metaInfo () {\n    if (this.isTVShow) {\n      return {\n        title: `${this.currentProduction ? this.currentProduction.name : ''} ` +\n               `- ${this.currentEpisode ? this.currentEpisode.name : ''} |` +\n               ` ${this.$t('playlists.title')} - Kitsu`\n      }\n    } else {\n      return {\n        title: `${this.currentProduction ? this.currentProduction.name : ''}` +\n               ` ${this.$t('playlists.title')}` +\n               ' - Kitsu'\n      }\n    }\n  },\n\n  socket: {\n    events: {\n      'playlist:new' (eventData) {\n        if (!this.playlistMap[eventData.playlist_id]) {\n          this.refreshPlaylist(eventData.playlist_id)\n        }\n      },\n\n      'playlist:update' (eventData) {\n        if (\n          this.playlistMap[eventData.playlist_id] &&\n          !this.$options.silent\n        ) {\n          /*\n          this.refreshPlaylist(eventData.playlist_id)\n            .then((playlist) => {\n              if (this.currentPlaylist.id === playlist.id) {\n                Object.assign(this.currentPlaylist, playlist)\n                this.rebuildCurrentShots()\n              }\n            })\n          */\n        }\n      },\n\n      'playlist:delete' (eventData) {\n        this.$store.commit('DELETE_PLAYLIST_END', {\n          id: eventData.playlist_id\n        })\n      },\n\n      'build-job:new' (eventData) {\n        if (eventData.playlist_id === this.currentPlaylist.id) {\n          this.currentPlaylist.build_jobs = [{\n            id: eventData.build_job_id,\n            created_at: eventData.created_at,\n            status: 'running',\n            playlist_id: this.currentPlaylist.id\n          }].concat(this.currentPlaylist.build_jobs)\n        }\n      },\n\n      'build-job:update' (eventData) {\n        if (eventData.playlist_id === this.currentPlaylist.id) {\n          updateModelFromList(this.currentPlaylist.build_jobs, {\n            id: eventData.build_job_id,\n            status: eventData.status\n          })\n        }\n      },\n\n      'build-job:delete' (eventData) {\n        if (eventData.playlist_id === this.currentPlaylist.id) {\n          this.currentPlaylist.build_jobs =\n            removeModelFromList(this.currentPlaylist.build_jobs, {\n              id: eventData.build_job_id\n            })\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .playlist-item {\n    background: $dark-grey-lightmore;\n    box-shadow: 0px 0px 6px #333;\n    border-color: $dark-grey;\n    color: $white-grey;\n\n    &.for-client {\n      background: $purple-grey;\n      border: 1px solid $dark-grey;\n    }\n\n    &.selected {\n      border-right: 3px solid $dark-green;\n    }\n  }\n\n  .playlist-list-column {\n    background: $dark-grey-light;\n    border-color: $dark-grey;\n    box-shadow: 0px 0px 6px #333;\n  }\n\n  .playlist-column {\n    button,\n    h2.sequence-title {\n      color: white;\n    }\n  }\n\n  .playlist-column.no-selection {\n    background: $dark-grey-light;\n\n    h2 {\n      color: white;\n    }\n\n    .recent-playlist {\n      background: $dark-grey-lightmore;\n      border: 2px solid $dark-grey;\n      box-shadow: 0px 0px 6px #333;\n\n      h3 {\n        color: white;\n      }\n    }\n  }\n\n  span.thumbnail-picture {\n    box-shadow: 0px 0px 6px #333;\n  }\n}\n\n.page {\n  display: flex;\n  padding-left: 0;\n  padding-right: 0;\n  padding-bottom: 0;\n}\n\n.page .columns {\n  margin-top: 0px;\n  margin-bottom: 0;\n  overflow-y: auto;\n  flex: 1;\n}\n\n.playlist-list-column {\n  max-width: 300px;\n  background: #F4F5F9;\n  overflow-y: auto;\n  padding: 1em 1em 1em 2em;\n  border-right: 1px solid #DDD;\n  box-shadow: 0px 0px 6px #F0F0F0;\n  z-index: 201;\n}\n\n.playlist-item {\n  display: block;\n  background: white;\n  padding: 0.4em;\n  margin: 0.2em;\n  border: 1px solid $white-grey;\n  box-shadow: 0px 0px 6px #DDD;\n  color: $grey-strong;\n\n  &.for-client {\n    background: $purple-light;\n    border: 1px solid $purple;\n  }\n}\n\n.playlist-item.selected {\n  border-right: 3px solid $light-green;\n}\n\n.playlist-list-column .button {\n  width: 100%;\n}\n\n.addition-shots {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  flex-direction: row;\n  max-width: 100%;\n  padding-left: 1em;\n}\n\n.addition-shot {\n  padding: 0;\n  cursor: pointer;\n  text-align: center;\n  margin: 0;\n  opacity: 0.5;\n  width: 170px;\n  display: flex;\n  flex-direction: column;\n  border: 0px solid transparent;\n\n  a {\n    margin: auto;\n  }\n\n  &:hover {\n    opacity: 0.75\n  }\n\n  &.playlisted {\n    opacity: 1;\n\n    img,\n    span.thumbnail-picture {\n      border: 2px solid $purple;\n    }\n  }\n}\n\nspan.thumbnail-picture {\n  box-shadow: 0px 0px 6px #DDD;\n  margin-bottom: 2px;\n}\n\n.addition-header {\n  padding: 0 1em;\n\n  .subtitle {\n    margin-top: 1em;\n  }\n}\n\n.select-sequence-combobox {\n  margin-bottom: 1em;\n}\n\n.add-sequence {\n  margin-bottom: 0.4em;\n}\n\n.playlist-column {\n  padding: 0;\n  overflow: hidden;\n  flex: 1;\n}\n\n.playlist-column:last-child {\n  padding-right: 0.7em;\n}\n\n.playlisted-shot-name {\n  padding-right: 20px;\n}\n\n.playlist-date {\n  display: block;\n  color: $grey;\n  font-size: 0.8em;\n}\n\n.sequence-title {\n  border-bottom: 1px solid $light-grey-light;\n  color: $grey;\n  margin: 1em;\n  padding-bottom: 0.2em;\n  text-transform: uppercase;\n\n  button {\n    color: $grey;\n    padding: 0.3em 0.8em;\n    font-size: 0.7em;\n  }\n}\n\n.addition-header {\n  height: 110px;\n}\n\n.addition-section {\n  overflow-y: auto;\n  height: calc(100% - 420px);\n}\n\nh2 {\n  font-weight: bold;\n  text-transform: uppercase;\n  color: $grey;\n}\n\n.playlist-column.no-selection {\n  padding: 2em;\n  overflow: auto;\n  background: #F4F5F9;\n\n  h2 {\n    font-size: 2em;\n    margin-top: 1.5em;\n    margin-bottom: 0.3em;\n  }\n\n  .recent-playlist {\n    width: 333px;\n    background: white;\n    border: 2px solid $light-grey-light;\n    box-shadow: 0px 0px 6px #DDD;\n    border-radius: 1em;\n    padding: 1em;\n\n    h3 {\n      color: $grey-strong;\n      font-size: 1.2em;\n      font-weight: bold;\n    }\n    span {\n      display: block;\n    }\n  }\n\n  .empty-explaination {\n    margin-top: 4em;\n    font-size: 1.5em;\n  }\n\n  .big {\n    font-size: 1.2em;\n    margin-top: 1em;\n    padding: 0.5em 1em;\n    height: auto;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Playlist.vue?vue&type=template&id=5627273d&scoped=true&\"\nimport script from \"./Playlist.vue?vue&type=script&lang=js&\"\nexport * from \"./Playlist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Playlist.vue?vue&type=style&index=0&id=5627273d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5627273d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}