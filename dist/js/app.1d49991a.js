(function(t){function e(e){for(var n,i,r=e[0],c=e[1],d=e[2],u=0,l=[];u<r.length;u++)i=r[u],a[i]&&l.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);p&&p(e);while(l.length)l.shift()();return o.push.apply(o,d||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],n=!0,i=1;i<s.length;i++){var r=s[i];0!==a[r]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=s[0]))}return t}var n={},i={app:0},a={app:0},o=[];function r(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-0b09a0ec":"7162dd93","chunk-0caa9092":"753bdddd","chunk-21d64005":"236aabd8","chunk-2745e2f2":"03f3b2b5","chunk-2d0c7360":"c7ce1dc4","chunk-2d0cfa35":"b4d0dba9","chunk-2d0dacb1":"76a81899","chunk-2d21082e":"c797d955","chunk-2d22d490":"35b4df02","chunk-300ec739":"e79b34c6","chunk-32ed85ba":"f492b17e","chunk-33836174":"77eacdda","chunk-3aa178f9":"6761ceaf","chunk-47fa2c64":"7bbd564a","chunk-5c38ed31":"6b0cb247","chunk-6f438935":"17037f2c","chunk-7e6c82cc":"1e007ed2","chunk-84b2e9b8":"98ebc7d2","chunk-accc4560":"cbb8303d","chunk-d31673be":"12238e12"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(t){var e=[],s={"chunk-0b09a0ec":1,"chunk-0caa9092":1,"chunk-21d64005":1,"chunk-2745e2f2":1,"chunk-300ec739":1,"chunk-32ed85ba":1,"chunk-33836174":1,"chunk-3aa178f9":1,"chunk-47fa2c64":1,"chunk-5c38ed31":1,"chunk-6f438935":1,"chunk-7e6c82cc":1,"chunk-84b2e9b8":1,"chunk-accc4560":1,"chunk-d31673be":1};i[t]?e.push(i[t]):0!==i[t]&&s[t]&&e.push(i[t]=new Promise((function(e,s){for(var n="css/"+({}[t]||t)+"."+{"chunk-0b09a0ec":"4f44198f","chunk-0caa9092":"75a1bc97","chunk-21d64005":"d57812c7","chunk-2745e2f2":"87d9a5d7","chunk-2d0c7360":"31d6cfe0","chunk-2d0cfa35":"31d6cfe0","chunk-2d0dacb1":"31d6cfe0","chunk-2d21082e":"31d6cfe0","chunk-2d22d490":"31d6cfe0","chunk-300ec739":"446d6f98","chunk-32ed85ba":"7ba724e2","chunk-33836174":"e88ecafd","chunk-3aa178f9":"017db1a9","chunk-47fa2c64":"5b8c104f","chunk-5c38ed31":"1d3c9dc8","chunk-6f438935":"8a0d329e","chunk-7e6c82cc":"670697f7","chunk-84b2e9b8":"30d43a3e","chunk-accc4560":"348ff9a1","chunk-d31673be":"0ee4e8a2"}[t]+".css",a=c.p+n,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var d=o[r],u=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===n||u===a))return e()}var l=document.getElementsByTagName("style");for(r=0;r<l.length;r++){d=l[r],u=d.getAttribute("data-href");if(u===n||u===a)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var n=e&&e.target&&e.target.src||a,o=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete i[t],p.parentNode.removeChild(p),s(o)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){i[t]=0})));var n=a[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,s){n=a[t]=[e,s]}));e.push(n[2]=o);var d,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=r(t),d=function(e){u.onerror=u.onload=null,clearTimeout(l);var s=a[t];if(0!==s){if(s){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+n+": "+i+")");o.type=n,o.request=i,s[1](o)}a[t]=void 0}};var l=setTimeout((function(){d({type:"timeout",target:u})}),12e4);u.onerror=u.onload=d,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(s,n,function(e){return t[e]}.bind(null,n));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],u=d.push.bind(d);d.push=e,d=d.slice();for(var l=0;l<d.length;l++)e(d[l]);var p=u;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0073":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"person-name"},[t._v("\n  "+t._s(t.person.first_name+" "+t.person.last_name)+"\n")])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"person-name",props:["person"],computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]))},u=d,l=(s("65e3"),s("2877")),p=Object(l["a"])(u,n,i,!1,null,"9de062a6",null);e["a"]=p.exports},"0084":function(t,e,s){},"011b":function(t,e,s){"use strict";var n=s("978d"),i=s.n(n);i.a},"028b":function(t,e,s){"use strict";var n=s("e590"),i=s.n(n);i.a},"03b1":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"actions has-text-right"},[t.hideEdit||t.entry.canceled?t._e():s("router-link",{staticClass:"button",attrs:{to:t.editRoute}},[s("edit-icon",{staticClass:"icon is-small only-icon"})],1),t.entry.canceled?s("router-link",{staticClass:"button",attrs:{to:t.restoreRoute}},[s("rotate-ccw-icon",{staticClass:"icon is-small only-icon"})],1):t._e(),(t.hideDelete||t.entry.canceled||!t.isCurrentUserAdmin)&&t.hideDelete?t._e():s("router-link",{staticClass:"button",attrs:{to:t.deleteRoute}},[s("trash-icon",{staticClass:"icon is-small only-icon"})],1)],1)},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("0a35");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={name:"row-actions",components:{EditIcon:r["k"],RotateCcwIcon:r["y"],TrashIcon:r["E"]},props:{entry:{type:Object,default:function(){return{}}},editRoute:{type:Object,default:function(){return{name:"home"}}},deleteRoute:{type:Object,default:function(){return{name:"home"}}},restoreRoute:{type:Object,default:null},hideEdit:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1}},computed:d({},Object(o["c"])(["isCurrentUserAdmin"])),methods:d({},Object(o["b"])([]))},l=u,p=(s("a6e9"),s("2877")),f=Object(p["a"])(l,n,i,!1,null,"54e0814e",null);e["a"]=f.exports},"03c9":function(t,e,s){"use strict";var n=s("b56c"),i=s.n(n);i.a},"0506":function(t,e,s){},"05b0":function(t,e,s){"use strict";var n=s("9cc0"),i=s.n(n);i.a},"05fb":function(t,e,s){"use strict";var n=s("6a44"),i=s.n(n);i.a},"074d":function(t,e,s){},"07a4":function(t,e,s){"use strict";var n=s("6e8e"),i=s.n(n);i.a},"09a4":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"production-name"},[s("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltipOptions,expression:"tooltipOptions"}],staticClass:"flexrow"},[t.noLink?s("div",[t.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:t.getAvatarColor(t.entry),width:t.size+"px",height:t.size+"px","font-size":t.size-15+"px","line-height":t.size+"px"}},[t.entry.has_avatar?s("span",[s("img",{attrs:{src:t.getThumbnailPath(t.entry)}})]):s("span",[t._v("\n          "+t._s(t.generateAvatar(t.entry))+"\n        ")])]):t._e(),t.onlyAvatar?t._e():s("span",{staticClass:"flexrow-item"},[t._v("\n        "+t._s(t.entry.name)+"\n      ")])]):s("router-link",{attrs:{to:t.productionRoute}},[t.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:t.getAvatarColor(t.entry),width:t.size+"px",height:t.size+"px","font-size":t.size-15+"px","line-height":t.size+"px"}},[t.entry.has_avatar?s("span",[s("img",{attrs:{src:t.getThumbnailPath(t.entry)}})]):s("span",[t._v("\n          "+t._s(t.generateAvatar(t.entry))+"\n        ")])]):t._e(),t.onlyAvatar?t._e():s("span",{staticClass:"flexrow-item"},[t._v("\n        "+t._s(t.entry.name)+"\n      ")])])],1)])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),o=(s("c5f6"),s("7930")),r=s("2f62");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={name:"production-name-cell",props:{entry:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String},isTooltip:{default:!1,type:Boolean},noLink:{default:!1,type:Boolean}},computed:d({},Object(r["c"])([]),{productionRoute:function(){var t={name:this.lastProductionScreen,params:{production_id:this.entry.id}};return this.entry.first_episode_id&&(t.name="episode-".concat(this.lastProductionScreen),t.params.episode_id=this.entry.first_episode_id),t},productionInfo:function(){var t=this.entry?this.entry.fps:null,e=this.entry?this.entry.ratio:null,s=this.entry?this.entry.resolution:null,n=[];return t&&n.push("".concat(this.$t("productions.fields.fps"),": ").concat(t)),e&&n.push("".concat(this.$t("productions.fields.ratio"),": ").concat(e)),s&&n.push("".concat(this.$t("productions.fields.resolution"),": ").concat(s)),n.length>0&&this.isTooltip?n.join("<br>"):""},tooltipOptions:function(){return{content:this.productionInfo,delay:{hide:5e3}}}}),methods:d({},Object(r["b"])([]),{generateAvatar:function(t){var e=t.name.length>0?t.name[0]:"P";return e.toUpperCase()},getAvatarColor:function(t){return o["a"].fromString(t.name)},getThumbnailPath:function(t){return"/api/pictures/thumbnails/projects/".concat(t.id,".png")}})},l=u,p=(s("8019"),s("2877")),f=Object(p["a"])(l,n,i,!1,null,"1aa51b6d",null);e["a"]=f.exports},"09d3":function(t,e,s){"use strict";s.d(e,"c",(function(){return n})),s.d(e,"b",(function(){return i})),s.d(e,"a",(function(){return a})),s.d(e,"d",(function(){return r}));s("7f7f"),s("ac6a"),s("456d"),s("55dd");var n=function(t,e,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"count";if(!t[e]||!t[e][s])return[];var i=t[e][s],a="count"===n?"count":"frames";return Object.keys(i).map((function(t){var e=i[t],s="todo"===e.name?"#6F727A":e.color;return[e.name,e[a],s]})).sort((function(t,e){return t[0]&&e[0]?t[0].localeCompare(e[0]):!t[0]&&e[0]?-1:(t[0]&&e[0],1)}))},i=function(t,e,s){return n(t,e,s).map((function(t){return t[2]}))},a=function(t,e,s,n){var i={all:{all:{}}};return t.forEach((function(t){if(!t.canceled){var a=t[e];i[a]||(i[a]={all:{}}),t.tasks.forEach((function(e){var r=n[e];o(s,i,a,t,r)}))}})),i},o=function(t,e,s,n,i){if(i){var a=i.task_type_id,o=t[i.task_status_id];if(o){var r=o.id;e[s][a]||(e[s][a]={}),e.all.all[r]||(e.all.all[r]={name:o.short_name,color:o.color,count:0,frames:0}),e.all[a]||(e.all[a]={}),e.all[a][r]||(e.all[a][r]={name:o.short_name,color:o.color,count:0,frames:0}),e[s].all[r]||(e[s].all[r]={name:o.short_name,color:o.color,count:0,frames:0}),e[s][a][r]||(e[s][a][r]={name:o.short_name,color:o.color,count:0,frames:0}),e[s][a][r].count++,e[s].all[r].count++,e.all[a][r].count++,e.all.all[r].count++,n.nb_frames&&(e[s][a][r].frames+=n.nb_frames,e[s].all[r].frames+=n.nb_frames,e.all[a][r].frames+=n.nb_frames,e.all.all[r].frames+=n.nb_frames)}}},r=function(t,e){var s=0;return e>0&&(s=t/e*100),s.toFixed(2)}},"0b2a":function(t,e,s){"use strict";var n=s("3fd4"),i=s.n(n);i.a},"0e30":function(t,e,s){},"0f9a":function(t,e,s){"use strict";s("8e6e"),s("456d"),s("8615"),s("20d6"),s("6b54"),s("ac6a"),s("7f7f"),s("7514"),s("6762"),s("2fdb");var n,i=s("bd86"),a=s("ba4c"),o=s.n(a),r=s("ce6b"),c=s("52ad"),d=s("e07d"),u=s("48c6"),l=s("2229"),p=s("2017"),f=s("ca76"),h=s("66e7"),m=s("6185"),_=s("9fb0");function v(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function b(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?v(s,!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):v(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var y={getTaskStatus:function(t){return d["a"].state.taskStatusMap[t]}},g={user:null,isAuthenticated:!1,avatarFormData:null,isSaveProfileLoading:!1,isSaveProfileLoadingError:!1,changePassword:{isLoading:!1,isError:!1,isSuccess:!1,isValid:!0},isTodosLoading:!1,isTodosLoadingError:!1,todos:[],displayedTodos:[],displayedDoneTasks:[],todosIndex:{},todosSearchText:"",todoSelectionGrid:{},todoSearchQueries:[],userFilters:{},todoListScrollPosition:0,timeSpentMap:{},timeSpentTotal:0},k=b({},g),O={user:function(t){return t.user},isAuthenticated:function(t){return t.isAuthenticated},isCurrentUserManager:function(t){return t.user&&["admin","manager"].includes(t.user.role)},isCurrentUserAdmin:function(t){return t.user&&"admin"===t.user.role},isCurrentUserCGArtist:function(t){return t.user&&"user"===t.user.role},isCurrentUserClient:function(t){return t.user&&"client"===t.user.role},isSaveProfileLoading:function(t){return t.isSaveProfileLoading},isSaveProfileLoadingError:function(t){return t.isSaveProfileLoadingError},changePassword:function(t){return t.changePassword},displayedTodos:function(t){return t.displayedTodos},displayedDoneTasks:function(t){return t.displayedDoneTasks},todosSearchText:function(t){return t.todosSearchText},todoSelectionGrid:function(t){return t.todoSelectionGrid},todoSearchQueries:function(t){return t.todoSearchQueries},userFilters:function(t){return t.userFilters},isTodosLoading:function(t){return t.isTodosLoading},isTodosLoadingError:function(t){return t.isTodosLoadingError},todoListScrollPosition:function(t){return t.todoListScrollPosition},timeSpentMap:function(t){return t.timeSpentMap},timeSpentTotal:function(t){return t.timeSpentTotal}},S={saveProfile:function(t,e){var s=t.commit,n=t.state;s(_["Lf"]),r["a"].updatePerson(e.form).then((function(){e.form.id=n.user.id,s(_["Mf"],e.form)})).catch((function(t){console.error(t),s(_["Kf"])}))},checkNewPasswordValidityAndSave:function(t,e){var s=t.commit,n=t.state,i=e.form,a=e.callback;u["a"].isPasswordValid(i.password,i.password2)?S.changeUserPassword({commit:s,state:n},{form:i,callback:a}):(s(_["Bf"]),a&&a())},changeUserPassword:function(t,e){var s=t.commit;t.state;s(_["zf"]),r["a"].changePassword(e.form,(function(t){s(t?_["yf"]:_["Af"]),e.callback&&e.callback()}))},loadTodos:function(t,e){var s=t.commit,n=t.state,i=t.rootGetters,a=e.callback,o=e.forced,c=e.date,d=i.userFilters,u=i.taskTypeMap;0===n.todos.length||o?(s(_["Gf"]),r["a"].loadTodos((function(t,e){t?(s(_["Ff"]),a&&a(t)):r["a"].loadDone((function(t,n){t?s(_["Ff"]):s(_["Cf"],n),r["a"].loadTimeSpents(c,(function(t,n){t?s(_["Ff"]):(s(_["Df"],n),s(_["Ef"],{tasks:e,userFilters:d,taskTypeMap:u})),a&&a(t)}))}))}))):a&&a()},uploadAvatar:function(t,e){var s=t.commit,n=t.state;r["a"].postAvatar(n.user.id,n.avatarFormData,(function(t){t||s(_["xf"],n.user.id),e&&e(t)}))},setTodosSearch:function(t,e){var s=t.commit;t.state;s(_["df"],e)},loadUserSearchFilters:function(t,e){var s=t.commit;r["a"].getUserSearchFilters((function(t,n){t?s(_["Cd"]):s(_["Bd"],n),e(t)}))},saveTodoSearch:function(t,e){var s=t.commit;t.rootGetters;return new Promise((function(t,n){var i=k.todoSearchQueries.find((function(t){return t.name===e}));i?t():r["a"].createFilter("todos",e,e,null,null,(function(e,i){s(_["Ge"],{searchQuery:i}),e?n(e):t(i)}))}))},removeTodoSearch:function(t,e){var s=t.commit;t.rootGetters;return new Promise((function(t,n){r["a"].removeFilter(e,(function(i){s(_["te"],{searchQuery:e}),i?n(i):t()}))}))},setTodoListScrollPosition:function(t,e){var s=t.commit;t.rootGetters;s(_["ef"],e)}},w=(n={},Object(i["a"])(n,_["Hf"],(function(t,e){t.user=c["a"].helpers.addAdditionalInformation(e),t.isAuthenticated=!0})),Object(i["a"])(n,_["Jf"],(function(t,e){t.user=null,t.isAuthenticated=!1})),Object(i["a"])(n,_["If"],(function(t,e){t.user=null,t.isAuthenticated=!1})),Object(i["a"])(n,_["Lf"],(function(t){t.isSaveProfileLoading=!0,t.isSaveProfileLoadingError=!1})),Object(i["a"])(n,_["Kf"],(function(t){t.isSaveProfileLoading=!1,t.isSaveProfileLoadingError=!0})),Object(i["a"])(n,_["Mf"],(function(t,e){Object.assign(t.user,e),Object.assign(t.user,c["a"].helpers.addAdditionalInformation(t.user)),t.isSaveProfileLoading=!1,t.isSaveProfileLoadingError=!1})),Object(i["a"])(n,_["Vb"],(function(t,e){t.user&&e&&t.user.id===e.id&&(Object.assign(t.user,e),Object.assign(t.user,c["a"].helpers.addAdditionalInformation(t.user)))})),Object(i["a"])(n,_["zf"],(function(t){t.changePassword={isLoading:!0,isError:!1,isSuccess:!1,isValid:!0}})),Object(i["a"])(n,_["yf"],(function(t){t.changePassword={isLoading:!1,isError:!0,isSuccess:!1,isValid:!0}})),Object(i["a"])(n,_["Af"],(function(t){t.changePassword={isLoading:!1,isError:!1,isSuccess:!0,isValid:!0}})),Object(i["a"])(n,_["Bf"],(function(t){t.changePassword={isLoading:!1,isError:!1,isSuccess:!1,isValid:!1}})),Object(i["a"])(n,_["Gf"],(function(t){t.isTodosLoadingError=!1,t.isTodosLoading=!0,t.timeSpents={},t.timeSpentTotal=0})),Object(i["a"])(n,_["Ef"],(function(t,e){var s=e.tasks,n=e.userFilters,i=e.taskTypeMap;t.isTodosLoading=!1,s.forEach(h["c"]),s.forEach((function(t){var e=y.getTaskStatus(t.task_status_id);t.taskStatus=e})),t.todoSelectionGrid=Object(m["b"])(s.length,1),t.todos=Object(l["l"])(s,i),t.todosIndex=Object(p["g"])(s);var a=Object(f["d"])(t.todosSearchText),o=Object(p["h"])(t.todosIndex,a);t.displayedTodos=o||t.todos,n.todos&&n.todos.all?t.todoSearchQueries=n.todos.all:t.todoSearchQueries=[]})),Object(i["a"])(n,_["Cf"],(function(t,e){e.forEach(h["c"]),e.forEach((function(t){var e=y.getTaskStatus(t.task_status_id);t.taskStatus=e})),t.displayedDoneTasks=e})),Object(i["a"])(n,_["Ff"],(function(t,e){t.isTodosLoadingError=!0})),Object(i["a"])(n,_["E"],(function(t,e){t.avatarFormData=e})),Object(i["a"])(n,_["xf"],(function(t){if(t.user){var e=Math.random().toString(36).substring(7);t.user.has_avatar=!0,o.a.set(t.user,"uniqueHash",e),t.user.avatarPath="/api/pictures/thumbnails/persons/".concat(t.user.id)+".png"}})),Object(i["a"])(n,_["Vd"],(function(t,e){var s=e.comment,n=e.taskId,i=t.todos.find((function(t){return t.id===n}));if(i){var a=y.getTaskStatus(s.task_status_id);Object.assign(i,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color,last_comment:s}),t.todosIndex=Object(p["g"])(t.todos)}})),Object(i["a"])(n,_["df"],(function(t,e){var s=Object(f["d"])(e),n=Object(p["h"])(t.todosIndex,s);t.todosSearchText=e,t.displayedTodos=n||t.todos})),Object(i["a"])(n,_["Ge"],(function(t,e){var s=e.searchQuery;t.todoSearchQueries.push(s),t.todoSearchQueries=Object(l["c"])(t.todoSearchQueries)})),Object(i["a"])(n,_["te"],(function(t,e){var s=e.searchQuery,n=t.todoSearchQueries.findIndex((function(t){return t.name===s.name}));n>=0&&t.todoSearchQueries.splice(n,1)})),Object(i["a"])(n,_["l"],(function(t,e){t.todoSelectionGrid&&t.todoSelectionGrid[0]&&(t.todoSelectionGrid[e.x][e.y]=!0)})),Object(i["a"])(n,_["ne"],(function(t,e){t.todoSelectionGrid&&t.todoSelectionGrid[e.x]&&(t.todoSelectionGrid[e.x][e.y]=!1)})),Object(i["a"])(n,_["N"],(function(t){t.todoSelectionGrid=Object(m["c"])(t.todoSelectionGrid)})),Object(i["a"])(n,_["ef"],(function(t,e){t.todoListScrollPosition=e})),Object(i["a"])(n,_["Cd"],(function(t){})),Object(i["a"])(n,_["Bd"],(function(t,e){t.userFilters=e})),Object(i["a"])(n,_["cf"],(function(t,e){t.user.id===e.person_id&&(t.timeSpentMap[e.task_id]=e),t.timeSpentTotal=Object.values(t.timeSpentMap).reduce((function(t,e){return e.duration+t}),0)/60})),Object(i["a"])(n,_["Df"],(function(t,e){var s={};e.forEach((function(t){s[t.task_id]=t})),t.timeSpentMap=s,t.timeSpentTotal=Object.values(t.timeSpentMap).reduce((function(t,e){return e.duration+t}),0)/60})),Object(i["a"])(n,_["Ce"],(function(t,e){var s=e.searchQuery,n=e.production;n&&(t.userFilters.task||(t.userFilters.task={}),t.userFilters.task[n.id]||(t.userFilters.task[n.id]=[]),t.userFilters.task[n.id].includes(s)||(t.userFilters.task[n.id].push(s),t.userFilters.task[n.id]=Object(l["c"])(t.userFilters.task[n.id])))})),Object(i["a"])(n,_["Ee"],(function(t,e){var s=e.searchQuery,n=e.production;t.userFilters.shot[n.id]||(t.userFilters.shot[n.id]=[]),t.userFilters.shot[n.id].includes(s)||(t.userFilters.shot[n.id].push(s),t.userFilters.shot[n.id]=Object(l["c"])(t.userFilters.shot[n.id]))})),Object(i["a"])(n,_["he"],(function(t){})),Object(i["a"])(n,_["ue"],(function(t){Object.assign(t,b({},g))})),n);e["a"]={namespace:!0,state:k,getters:O,actions:S,mutations:w}},"0fcb":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[t.entry.description&&t.entry.description.length>0&&!t.full?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltipOptions,expression:"tooltipOptions"}],staticClass:"description",domProps:{innerHTML:t._s(t.compileMarkdown(t.shortenText(t.entry.description,20)))},on:{click:t.onClick}}):s("span",{domProps:{innerHTML:t._s(t.compileMarkdown(t.entry.description))}})])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("0e54"),r=s.n(o),c=s("2f62"),d=s("8c97");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p={name:"description-cell",data:function(){return{isOpen:!1,timeout:null}},components:{},props:{entry:{type:Object,default:function(){}},full:{type:Boolean,default:!1}},computed:l({},Object(c["c"])([]),{tooltipOptions:function(){return{content:this.compileMarkdown(this.entry.description),show:this.isOpen,trigger:"manual"}}}),methods:l({},Object(c["b"])([]),{compileMarkdown:function(t){return r()(t||"")},shortenText:d["a"].shortenText,onClick:function(){this.isOpen=!this.isOpen}})},f=p,h=(s("271f"),s("2877")),m=Object(h["a"])(f,n,i,!1,null,"2067aff3",null);e["a"]=m.exports},"0fef":function(t,e,s){"use strict";var n=s("795b"),i=s.n(n);i.a},1:function(t,e){},"104d":function(t,e,s){"use strict";var n=s("0e30"),i=s.n(n);i.a},1149:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v(t._s(t.label))]),s("p",{staticClass:"control"},[s("textarea",{ref:"input",staticClass:"input",class:"input "+t.inputClass,attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.value},on:{input:function(e){return t.updateValue()},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.emitEnter()},t.emitKeyup]}})])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"textarea-field",props:{label:{default:"",type:String},value:{default:"",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},emitKeyup:function(t){this.$emit("keyup",t)},focus:function(){this.$refs.input.focus()}})},u=d,l=(s("736c"),s("2877")),p=Object(l["a"])(u,n,i,!1,null,"e433a15c",null);e["a"]=p.exports},1295:function(t,e,s){"use strict";var n=s("6798"),i=s.n(n);i.a},1338:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var n={computed:{},methods:{onKeyDown:function(t){var e=this.lastSelection?this.lastSelection:{x:0,y:0},s=e.x,n=e.y,i=null;t.ctrlKey&&(37===t.keyCode?i=this.select(s,n-1):38===t.keyCode?i=this.select(s-1,n):39===t.keyCode?i=this.select(s,n+1):40===t.keyCode&&(i=this.select(s+1,n)),this.scrollToValidationCell(i))},setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},setScrollLeftPosition:function(t){this.$refs.body&&(this.$refs.body.scrollLeft=t)},select:function(t,e){var s="validation-"+t+"-"+e,n=this.$refs[s];return n&&n[0].$el.click(),n?n[0]:0},scrollToValidationCell:function(t){if(t){var e=20,s=t.$el.getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),i=s.bottom>n.bottom-e,a=s.top<n.top+e,o=s.right>n.right-e,r=s.left<n.left+e;if(i){var c=s.bottom-n.bottom+e;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var d=n.top-s.top+e;this.setScrollPosition(this.$refs.body.scrollTop-d)}if(o){var u=s.right-n.right+e;this.setScrollLeftPosition(this.$refs.body.scrollLeft+u)}else if(r){var l=n.left-s.left+e;this.setScrollLeftPosition(this.$refs.body.scrollLeft-l)}}}}}},"15b1":function(t,e,s){"use strict";var n=s("7434"),i=s.n(n);i.a},1736:function(t,e,s){},"1d3d":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.productionToEdit&&t.productionToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("productions.edit_title"))+" "+t._s(t.productionToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("productions.new_production"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("productions.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t.productionToEdit&&t.productionToEdit.id?s("combobox",{attrs:{label:t.$t("productions.fields.status"),options:t.productionStatusOptions,localeKeyPrefix:"productions.status."},on:{enter:t.runConfirmation},model:{value:t.form.project_status_id,callback:function(e){t.$set(t.form,"project_status_id",e)},expression:"form.project_status_id"}}):t._e(),s("combobox",{attrs:{label:t.$t("productions.fields.type"),options:t.productionTypeOptions,localeKeyPrefix:"productions.type."},on:{enter:t.runConfirmation},model:{value:t.form.production_type,callback:function(e){t.$set(t.form,"production_type",e)},expression:"form.production_type"}}),t.productionToEdit&&t.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"fpsField",attrs:{label:t.$t("productions.fields.fps")},on:{enter:t.runConfirmation},model:{value:t.form.fps,callback:function(e){t.$set(t.form,"fps",e)},expression:"form.fps"}}):t._e(),t.productionToEdit&&t.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"ratioField",attrs:{label:t.$t("productions.fields.ratio")},on:{enter:t.runConfirmation},model:{value:t.form.ratio,callback:function(e){t.$set(t.form,"ratio",e)},expression:"form.ratio"}}):t._e(),t.productionToEdit&&t.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"resolutionField",attrs:{label:t.$t("productions.fields.resolution")},on:{enter:t.runConfirmation},model:{value:t.form.resolution,callback:function(e){t.$set(t.form,"resolution",e)},expression:"form.resolution"}}):t._e(),t.productionToEdit&&t.productionToEdit.id?s("div",[s("span",{staticClass:"label"},[t._v(t._s(t.$t("productions.picture")))]),s("file-upload",{ref:"fileField",attrs:{accept:".png,.jpg,.jpeg"},on:{fileselected:t.onFileSelected}})],1):t._e()],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),t.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]):s("button",{staticClass:"button is-link",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n        "+t._s(t.$t("assets.edit_fail"))+"\n      ")]):t._e()])])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("7f7f"),s("2f62")),r=s("d065"),c=s("992f"),d=s("4085"),u=s("7bf8");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var f={name:"edit-production-modal",mixins:[r["a"]],components:{Combobox:c["a"],FileUpload:d["a"],TextField:u["a"]},props:["text","active","cancelRoute","isLoading","isError","errorText","productionToEdit"],data:function(){var t={formData:null,productionTypeOptions:[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]};return this.productionToEdit&&this.productionToEdit.id?t.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"}:t.form={name:"",project_status_id:this.productionStatus?this.productionStatus[0].id:null,fps:"",ratio:"",resolution:"",production_type:"short"},t},created:function(){this.resetForm(),this.productionTypeOptions=[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]},mounted:function(){this.productionStatus.length>0&&(this.form.project_status_id=this.productionStatus[0].id)},computed:p({},Object(o["c"])(["productions","productionStatus","productionStatusOptions"])),methods:p({},Object(o["b"])([]),{runConfirmation:function(){this.$emit("confirm",this.form)},onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},resetForm:function(){var t=this;this.productionToEdit&&this.productionToEdit.id?(this.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"},this.form.project_status_id=null,this.$nextTick((function(){t.form.project_status_id=t.productionToEdit.project_status_id}))):this.form={name:"",project_status_id:this.productionStatusOptions[0].value,fps:"",ratio:"",resolution:"",production_type:"short"}}}),watch:{productionToEdit:function(){this.resetForm()},active:function(){var t=this;this.active&&setTimeout((function(){t.$refs.nameField.focus(),t.formData=null,t.$refs.fileField&&t.$refs.fileField.reset()}),100)}}},h=f,m=(s("eef8"),s("2877")),_=Object(m["a"])(h,n,i,!1,null,"543ea5bd",null);e["a"]=_.exports},"1dea":function(t,e,s){"use strict";var n=s("49c3"),i=s.n(n);i.a},"1e0e":function(t,e,s){},2:function(t,e){},2017:function(t,e,s){"use strict";s.d(e,"c",(function(){return i})),s.d(e,"g",(function(){return a})),s.d(e,"f",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"e",(function(){return c})),s.d(e,"d",(function(){return d})),s.d(e,"b",(function(){return u})),s.d(e,"h",(function(){return l}));s("ac4d"),s("8a81"),s("5df3"),s("4f7f");var n=s("75fc"),i=(s("a481"),s("28a5"),s("7f7f"),s("ac6a"),function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s={},n={};return t.forEach((function(t){var i;t&&(i=t.name?e?t.name.split(" "):[t.name]:[],h(s,n,t,i))})),s}),a=function(t){var e={},s={};return t.forEach((function(t){var n=t.full_entity_name.replace(/_/g," ").replace(/-/g," "),i=n.split(" ").concat([t.task_type_name,t.task_status_short_name,t.project_name]);h(e,s,t,i)})),e},o=function(t){var e={},s={};return t.forEach((function(t){var n=t.entity_name.replace(/_/g," ").replace(/-/g," "),i=n.split(" ").concat([t.task_status_short_name]);h(e,s,t,i)})),e},r=function(t){var e={},s={};return t.forEach((function(t){var n=t.name.replace(/_/g," ").replace(/-/g," "),i=t.asset_type_name.split(" "),a=n.split(" ").concat(i);h(e,s,t,a)})),e},c=function(t){var e={},s={};return t.forEach((function(t){var n=[t.name,t.sequence_name,t.episode_name];h(e,s,t,n)})),e},d=function(t){var e={},s={};return t.forEach((function(t){var n=[t.name,t.episode_name];h(e,s,t,n)})),e},u=function(t){var e={},s={};return t.forEach((function(t){var n=[t.name];h(e,s,t,n)})),e},l=function(t,e){e||(e=[]);var s=e.map((function(e){return f(t,e)})).filter((function(t){return null!==t}));return s.length>0?s.reduce(p,Object(n["a"])(s[0])):null},p=function(t,e){return t.filter((function(t){return e.has(t)}))},f=function(t,e){return e&&e.indexOf("=")<0?t[e.toLowerCase()]?new Set(t[e.toLowerCase()]):new Set([]):null},h=function(t,e,s,n){var i=!0,a=!1,o=void 0;try{for(var r,c=n[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var d=r.value,u="";if(d){var l=!0,p=!1,f=void 0;try{for(var h,m=d[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var _=h.value;u+=_.toLowerCase(),void 0===t[u]&&(t[u]=[],e[u]={}),e[u][s.id]||(t[u].push(s),e[u][s.id]=!0)}}catch(v){p=!0,f=v}finally{try{l||null==m.return||m.return()}finally{if(p)throw f}}}}}catch(v){a=!0,o=v}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return t}},2229:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"j",(function(){return o})),s.d(e,"i",(function(){return r})),s.d(e,"g",(function(){return c})),s.d(e,"l",(function(){return d})),s.d(e,"d",(function(){return u})),s.d(e,"k",(function(){return l})),s.d(e,"f",(function(){return p})),s.d(e,"e",(function(){return f})),s.d(e,"c",(function(){return h})),s.d(e,"b",(function(){return m})),s.d(e,"m",(function(){return _})),s.d(e,"h",(function(){return v}));s("7f7f"),s("55dd");var n=s("ceca"),i=s.n(n),a=function(t){return t.sort(i()("canceled").thenBy((function(t,e){return t.asset_type_name.localeCompare(e.asset_type_name)})).thenBy((function(t,e){return t.name.localeCompare(e.name)})))},o=function(t){return t.sort(i()("canceled").thenBy((function(t,e){return t.episode_name?t.episode_name.localeCompare(e.episode_name):0})).thenBy((function(t,e){return t.sequence_name.localeCompare(e.sequence_name)})).thenBy((function(t,e){return t.name.localeCompare(e.name)})))},r=function(t){return t.sort(i()("canceled").thenBy((function(t,e){return t.episode_name?t.episode_name.localeCompare(e.episode_name):0})).thenBy((function(t,e){return t.name.localeCompare(e.name)})))},c=function(t){return t.sort((function(t,e){return t.project_status_name===e.project_status_name?t.name.localeCompare(e.name):-1*t.project_status_name.localeCompare(e.project_status_name)}))},d=function(t,e){return t.sort(i()("priority",-1).thenBy((function(t,e){return t.project_name?t.project_name.localeCompare(e.project_name):0})).thenBy((function(t,s){var n=e[t.task_type_id],i=e[s.task_type_id];return n.name.localeCompare(i.name)})).thenBy((function(t,e){return t.full_entity_name?t.full_entity_name.localeCompare(e.full_entity_name):t.entity_name.localeCompare(e.entity_name)})))},u=function(t){return t.sort(i()("pinned",-1).thenBy("created_at",-1))},l=function(t){return t.sort(i()("for_shots").thenBy("priority").thenBy("name"))},p=function(t){return t.sort(i()("created_at",-1).thenBy((function(t,e){return t.name.localeCompare(e.name)})))},f=function(t){return t.sort(i()("active",-1).thenBy((function(t,e){return t.first_name?t.first_name.localeCompare(e.first_name):-1})).thenBy((function(t,e){return t.last_name?t.last_name.localeCompare(e.last_name):-1})))},h=function(t){return t.sort((function(t,e){return t.name.localeCompare(e.name)}))},m=function(t){return t.sort(i()("created_at",-1))},_=function(t,e){return t.sort((function(t,s){var n=e[t],i=e[s];return n.priority!==i.priority?n.priority>i.priority:n.name.localeCompare(i.name)}))},v=function(t,e){return t.sort(i()("for_shots").thenBy("priority").thenBy("name").thenBy("start_date"))}},"26fc":function(t,e,s){},"271f":function(t,e,s){"use strict";var n=s("bd6d"),i=s.n(n);i.a},"274f":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.productionId?s("router-link",{attrs:{to:t.taskTypePath}},[s("span",{staticClass:"tag task-type-name",style:{"border-left":"4px solid "+t.color}},[t._v("\n    "+t._s(t.taskType.name)+"\n  ")])]):s("div",{staticClass:"tag task-type-name no-link",style:{"border-left":"4px solid "+t.color}},[t._v("\n  "+t._s(t.taskType.name)+"\n")])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"task-type-name",components:{},props:["taskType","productionId"],computed:c({},Object(o["c"])([]),{color:function(){return"#000000"===this.taskType.color.toUpperCase()?"$grey-strong":this.taskType.color},taskTypePath:function(){var t={name:"task-type",params:{production_id:this.productionId,task_type_id:this.taskType.id,type:this.taskType.for_shots?"shots":"assets"}};return(this.taskType.episode_id||this.$route.params.episode_id)&&(t.name="episode-task-type",t.params.episode_id=this.taskType.episode_id||this.$route.params.episode_id),t}}),methods:c({},Object(o["b"])([]))},u=d,l=(s("3aec"),s("2877")),p=Object(l["a"])(u,n,i,!1,null,"69204f82",null);e["a"]=p.exports},2838:function(t,e,s){},2842:function(t,e,s){},2867:function(t,e,s){},"287b":function(t,e,s){},"2bdb":function(t,e,s){"use strict";var n=s("f95d"),i=s.n(n);i.a},"2ca8":function(t,e,s){},3:function(t,e){},3014:function(t,e,s){"use strict";var n=s("8529"),i=s.n(n);i.a},3238:function(t,e,s){},3455:function(t,e,s){"use strict";s("8615"),s("55dd"),s("456d"),s("7f7f");var n=s("75fc"),i=(s("ac6a"),s("3657")),a=s("09d3"),o={generateTimesheet:function(t,e,s,n,i,a,r,c,d){var u=o.getTimesheetHeaders(n,i,a,r,c,d),l=o.getTimesheetEntries(u,s,e);o.buildCsvFile(t,l)},getTimesheetHeaders:function(t,e,s,n,a,o){var r=["Person"],c=[];for(var d in"month"===t?c=Object(i["c"])(e,n,a):"week"===t?c=Object(i["d"])(e,n,o):"day"===t&&(c=Object(i["b"])(e,s,n,a)),c)r.push(d);return r},getTimesheetEntries:function(t,e,s){var n=[t];return e.forEach((function(e){var i=[e.full_name];t.forEach((function(t,n){n>0&&(n--,s&&s[n]&&s[n][e.id]?i.push(s[n][e.id]/60):i.push("-"))})),n.push(i)})),n},buildCsvFile:function(t,e){var s=[];e.forEach((function(t){var e=t.join(";");s.push(e)}));var n="data:text/csv;charset=utf-8,"+s.join("\n"),i=encodeURI(n),a=document.createElement("a");return a.setAttribute("href",i),a.setAttribute("download","".concat(t,".csv")),document.body.appendChild(a),a.click(),s},generateStatReports:function(t,e,s,i,a,r){var c=o.getStatReportsHeaders(e,s,i),d=o.getStatReportsEntries(e,s,i,a,r),u=[c].concat(Object(n["a"])(d));return o.buildCsvFile(t,u)},getStatReportsHeaders:function(t,e,s){var n=r(t,e),i=["name","","All",""];return n.reduce((function(t,s){if("all"!==s){var n=e[s].name;return t.concat([n,""])}return t}),i)},getStatReportsEntries:function(t,e,s,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"count",a=[],o=r(t,e),h=c(t,n);return h.forEach((function(e){var r=u(t,e),c=d(t,r,i,e),h=p(n,s,i,t,r,e,c);o.forEach((function(s){if("all"!==s){var n=t[e][s];if(n){var a=l(t,n,i,e,s);f(t,i,e,s,r,a,h)}else Object.keys(t[e].all).forEach((function(t){h[t]=h[t].concat(["",""])}))}})),a=a.concat(Object.values(h).sort((function(t,e){return t[1].localeCompare(e[1])}))),a.push([""])})),a}},r=function(t,e){return Object.keys(t.all).sort((function(t,s){return"all"===t?1:"all"===s?-1:e[t].priority-e[s].priority}))},c=function(t,e){return Object.keys(t).sort((function(t,s){return"all"===t?-1:"all"===s?1:e[t].name.localeCompare(e[s].name)}))},d=function(t,e,s,n){var i=0;return e.forEach((function(e){var a=t[n].all[e];i+=a[s]})),i},u=function(t,e){return Object.keys(t[e].all)},l=function(t,e,s,n,i){var a=0;return Object.keys(e).forEach((function(e){var o=t[n][i][e];a+=o[s]})),a},p=function(t,e,s,n,i,o,r){var c={};return i.forEach((function(i){var d=e[i],u=t[o],l=u?u.name:"All",p=n[o].all[i],f=p[s],h=Object(a["d"])(f,r);c[i]=[l,d.name,f,h+"%"]})),c},f=function(t,e,s,n,i,o,r){i.forEach((function(i){var c=t[s][n][i],d=0;c&&(d=c[e]);var u=Object(a["d"])(d,o);r[i]=r[i].concat([d,u+"%"])}))};e["a"]=o},3521:function(t,e,s){},3657:function(t,e,s){"use strict";s.d(e,"f",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"e",(function(){return c})),s.d(e,"c",(function(){return d})),s.d(e,"b",(function(){return u})),s.d(e,"d",(function(){return l}));s("c5f6"),s("ac6a");var n=s("75fc"),i=s("7f45"),a=s.n(i),o=function(t,e){var s=e-t+1;return s<0&&(s=0),Object(n["a"])(Array(s).keys()).map((function(e){return e+t}))},r=function(t){var e=a.a.tz(t,"UTC");return a()().diff(e,"days")>1?e.format("YYYY-MM-DD HH:mm"):a()(e.format()).fromNow()},c=function(t){var e=a()().year();return a()("".concat(e,"-").concat(t),"YYYY-M").format("MMM")},d=function(t,e,s){return o(1,e===t?s:12)},u=function(t,e,s,n){if(s===t&&n===e)return o(1,a()().date());var i=a()("".concat(t,"-").concat(Number(e)),"YYYY-M","en");return o(1,i.endOf("month").date())},l=function(t,e){return o(1,e===t?a()().week():52)}},"3aec":function(t,e,s){"use strict";var n=s("2842"),i=s.n(n);i.a},"3cda":function(t,e,s){"use strict";var n=s("7156"),i=s.n(n);i.a},"3d32":function(t,e,s){"use strict";var n=s("4e91"),i=s.n(n);i.a},"3ee4":function(t,e,s){"use strict";var n=s("5a3f"),i=s.n(n);i.a},"3fd4":function(t,e,s){},4082:function(t,e,s){"use strict";var n=s("a81e"),i=s.n(n);i.a},4085:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-upload-wrapper"},[s("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[s("div",{staticClass:"dropbox"},[s("input",{ref:"uploadInput",staticClass:"input-file",attrs:{type:"file",accept:t.accept,name:t.uploadFieldName,disabled:t.isSaving},on:{change:function(e){return t.filesChange(e.target.name,e.target.files)}}})])])])},i=[],a=(s("7f7f"),{name:"file-upload",props:{uploadFieldName:{default:"file",type:String},accept:{default:".csv",type:String}},data:function(){return{isInitial:!0,isSaving:!1,uploadedFiles:[]}},computed:{},watch:{},methods:{filesChange:function(t,e){var s=new FormData;s.append(this.uploadFieldName,e[0],e[0].name),this.$emit("fileselected",s)},reset:function(){this.isSaving=!1,this.isInitial=!0,this.uploadedFiles=[],this.$refs.uploadInput.value=""}},mounted:function(){this.reset()}}),o=a,r=(s("4082"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"cff1c5ec",null);e["a"]=c.exports},"41e2":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"picture-player"},[s("div",{ref:"picture-wrapper",staticClass:"picture-wrapper"},[s("div",{staticClass:"canvas-wrapper"},[t.readOnly?t._e():s("canvas",{ref:"annotation-canvas",staticClass:"canvas",style:{display:"block"},attrs:{id:"annotation-canvas"}})]),s("img",{ref:"picture",attrs:{src:t.picturePath}}),t.isLoading?s("spinner"):t._e()],1),s("div",{ref:"button-bar",staticClass:"buttons flexrow pull-bottom"},[s("div",{staticClass:"left flexrow"},[t.readOnly?t._e():s("button",{staticClass:"button flexrow-item",on:{click:t.onPreviousClicked}},[s("chevron-left-icon",{staticClass:"icon"})],1),t.readOnly?t._e():s("span",{staticClass:"flexrow-item bar-element"},[t._v("\n        "+t._s(t.currentIndex)+" / "+t._s(t.preview.previews.length)+"\n      ")]),t.readOnly?t._e():s("button",{staticClass:"button flexrow-item",on:{click:t.onNextClicked}},[s("chevron-right-icon",{staticClass:"icon"})],1),t.readOnly?t._e():s("button",{staticClass:"button flexrow-item",on:{click:t.onAddPreviewClicked}},[s("plus-icon",{staticClass:"icon"})],1),t.currentIndex>1&&!t.light&&!t.readOnly?s("button",{staticClass:"button flexrow-item",on:{click:t.onRemovePreviewClicked}},[s("trash-icon",{staticClass:"icon"})],1):t._e()]),s("div",{staticClass:"right flexrow"},[t.isFullScreenEnabled&&!t.readOnly?s("button",{staticClass:"button flexrow-item",on:{click:t.onDeleteClicked}},[s("x-icon",{staticClass:"icon"})],1):t._e(),t.isFullScreenEnabled&&!t.readOnly?s("button",{class:{button:!0,"flexrow-item":!0,active:t.isDrawing},on:{click:t.onPencilAnnotateClicked}},[s("edit-2-icon",{staticClass:"icon"})],1):t._e(),t.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:t.onFullscreenClicked}},[s("maximize-icon",{staticClass:"icon"})],1):t._e(),t.readOnly?t._e():s("a",{staticClass:"button flexrow-item",attrs:{href:t.pictureDlPath}},[s("download-icon",{staticClass:"icon"})],1)])])])},i=[],a=(s("8e6e"),s("456d"),s("bd86")),o=(s("6762"),s("2fdb"),s("ac6a"),s("75fc")),r=s("7a94"),c=s("0a35"),d=s("be83");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p={name:"picture-viewer",components:{ChevronLeftIcon:c["e"],ChevronRightIcon:c["f"],DownloadIcon:c["i"],Edit2Icon:c["j"],MaximizeIcon:c["r"],PlusIcon:c["w"],Spinner:d["a"],TrashIcon:c["E"],XIcon:c["I"]},props:{preview:{type:Object,default:function(){}},light:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},data:function(){return{currentIndex:1,isLoading:!0,isDrawing:!1,annotations:this.preview.annotations?Object(o["a"])(this.preview.annotations):[],fabricCanvas:null}},mounted:function(){var t=this;this.container.style.height=this.getDefaultHeight()+"px",setTimeout((function(){t.picture.complete?(t.isLoading=!1,t.mountPicture()):t.picture.addEventListener("load",(function(){t.isLoading=!1,t.mountPicture()})),window.addEventListener("keydown",t.onKeyDown),window.addEventListener("resize",t.onWindowResize)}),0)},computed:{container:function(){return this.$refs.container},canvas:function(){return this.$refs.canvas},picture:function(){return this.$refs.picture},pictureWrapper:function(){return this.$refs["picture-wrapper"]},picturePath:function(){var t=this.preview.previews[this.currentIndex-1].id;return"/api/pictures/originals/preview-files/".concat(t,".png")},pictureDlPath:function(){var t=this.preview.previews[this.currentIndex-1].id;return"/api/pictures/originals/preview-files/".concat(t,"/download")},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("picture").webkitRequestFullScreen)},currentPreview:function(){return this.preview.previews[this.currentIndex-1]}},beforeDestroy:function(){this.clearCanvas(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},mountPicture:function(){this.fabricCanvas||this.setupFabricCanvas(),this.container.style.height=this.getDefaultHeight()+"px",this.loadAnnotation(0),this.$nextTick(this.fixCanvasSize)},clearCanvas:function(){var t=this;this.fabricCanvas&&this.fabricCanvas.getObjects().forEach((function(e){t.fabricCanvas.remove(e)}))},getDefaultHeight:function(){return this.isFullScreen()?screen.height:screen.width>1300&&(!this.light||this.readOnly)?500:200},getDimensions:function(){var t=1;this.picture.naturalWidth&&(t=this.picture.naturalHeight/this.picture.naturalWidth);var e=this.container.offsetWidth-1,s=Math.floor(e*t);return s>this.getDefaultHeight()&&(s=this.getDefaultHeight()),s-=32,e=Math.floor(s/t),{width:e,height:s}},setupFabricCanvas:function(){if(!this.readOnly){var t=this.getDimensions(),e=t.width,s=t.height,n=new r["fabric"].Canvas("annotation-canvas");this.container.style.height=this.getDefaultHeight()+"px",n.setDimensions({width:e,height:s}),n.freeDrawingBrush.color="#ff3860",n.freeDrawingBrush.width=4,n.off("object:scaling",this.onScaled),n.on("object:scaling",this.onScaled),n.off("object:scaled",this.onScaled),n.on("object:scaled",this.onScaled),n.off("object:moved",this.saveAnnotations),n.off("object:moved",this.saveAnnotations),n.on("object:moved",this.saveAnnotations),n.off("object:scaled",this.saveAnnotations),n.on("object:scaled",this.saveAnnotations),n.off("mouse:up",this.onMouseUp),n.on("mouse:up",this.onMouseUp),this.fabricCanvas=n}},onAddPreviewClicked:function(){this.$emit("add-preview")},onRemovePreviewClicked:function(){this.$emit("remove-extra-preview",this.currentPreview)},onFullscreenClicked:function(){this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0)},onDeleteClicked:function(){this.deleteSelection()},onPencilAnnotateClicked:function(){this.fabricCanvas.isDrawingMode?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.fabricCanvas.isDrawingMode=!0,this.isDrawing=!0)},onWindowResize:function(){var t=this,e=(new Date).getTime();this.lastCall=this.lastCall||0,e-this.lastCall>600&&(this.lastCall=e,setTimeout((function(){t.clearCanvas(),t.mountPicture(),t.reloadAnnotations(),t.$nextTick(t.fixCanvasSize)}),10))},onKeyDown:function(t){46===t.keyCode&&this.fabricCanvas&&this.deleteSelection()},onMouseUp:function(){this.isDrawing&&this.saveAnnotations()},onScaled:function(t){var e=t.target;e&&e.set({strokeWidth:8/(e.scaleX+e.scaleY)})},saveAnnotations:function(){var t=this,e=this.getAnnotation(0);if(this.fabricCanvas.getObjects().forEach((function(e){"path"===e.type&&(e.canvasWidth||(e.canvasWidth=t.fabricCanvas.width),e.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}))})),e)e.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),e.width=this.fabricCanvas.width,e.height=this.fabricCanvas.height;else{this.annotations=[];var s=this.getDimensions(),n={time:0,width:s.width,height:s.height,drawing:this.fabricCanvas.toJSON(["canvasWidth"])};this.annotations.push(n)}this.$emit("annotation-changed",{preview:this.currentPreview,annotations:Object(o["a"])(this.annotations)})},getAnnotation:function(t){return Object(o["a"])(this.annotations)[t]},clearAnnotations:function(){var t=this;this.fabricCanvas&&this.fabricCanvas.getObjects().forEach((function(e){["rect","circle","path"].includes(e.type)&&t.fabricCanvas.remove(e)}))},loadAnnotation:function(t){var e=this,s=this.getAnnotation(t);if(this.clearAnnotations(),s){var n=this.getDimensions(),i=1,a=1;s.width&&(i=n.width/s.width,a=n.width/s.width),s.height&&(a=n.height/s.height),s.drawing.objects.forEach((function(t){var s={left:t.left*i,top:t.top*a,fill:"transparent",stroke:"#ff3860",radius:t.radius*i,width:t.width,height:t.height,scaleX:t.scaleX*i,scaleY:t.scaleY*a};if("path"===t.type){var o=1;t.canvasWidth&&(o=t.canvasWidth/n.width);var c=new r["fabric"].Path(t.path,l({},s,{strokeWidth:3*o,canvasWidth:t.canvasWidth}));c.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),e.fabricCanvas.add(c)}}))}},deleteSelection:function(){this.fabricCanvas.remove(this.fabricCanvas.getActiveObject()),this.saveAnnotations()},reloadAnnotations:function(){return this.currentPreview.annotations?this.annotations=this.currentPreview.annotations:this.annotations=[],this.annotations},onPreviousClicked:function(){this.currentIndex>1?this.currentIndex--:this.currentIndex=this.preview.previews.length},onNextClicked:function(){this.currentIndex<this.preview.previews.length?this.currentIndex++:this.currentIndex=1},displayFirst:function(){this.currentIndex>1?this.currentIndex=1:this.reset()},displayLast:function(){this.currentIndex=this.preview.previews.length},reset:function(){this.clearAnnotations(),this.annotations=[],this.reloadAnnotations(),this.mountPicture(),this.isDrawing=!1,this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=!1)},fixCanvasSize:function(){var t=this,e=this.getDimensions(),s=e.width,n=e.height;if(this.picture.width=s,this.picture.height=n,this.fabricCanvas){this.fabricCanvas.setDimensions({width:s,height:n});for(var i=document.getElementsByClassName("canvas-container"),a=0;a<i.length;a++){var o=i[a];o.style.width=s+"px",o.style.height=n+"px",o.style.margin="auto"}i=document.getElementsByClassName("upper-canvas");for(var r=0;r<i.length;r++){var c=i[r];c.style.width=s+"px",c.style.height=n+"px",c.setAttribute("width",s),c.setAttribute("height",n)}setTimeout((function(){t.fabricCanvas.calcOffset()}),10)}}},watch:{preview:function(){this.currentIndex>1?this.currentIndex=1:this.reset()},currentIndex:function(){this.reset()},light:function(){this.onWindowResize()}}},f=p,h=(s("028b"),s("2877")),m=Object(h["a"])(f,n,i,!1,null,"d4aa197a",null);e["a"]=m.exports},4267:function(t,e,s){"use strict";var n=s("8485"),i=s.n(n);i.a},4360:function(t,e,s){"use strict";var n={};s.r(n),s.d(n,"route",(function(){return c}));var i,a=s("ba4c"),o=s.n(a),r=s("2f62"),c=function(t){return t.route},d=(s("8e6e"),s("456d"),s("20d6"),s("ac6a"),s("7f7f"),s("7514"),s("bd86")),u=s("edbf"),l={getAssetTypes:function(t){u["a"].get("/api/data/asset-types",t)},getAssetType:function(t,e){u["a"].get("/api/data/entity-types/".concat(t),e)},newAssetType:function(t,e){var s={name:t.name};u["a"].post("/api/data/entity-types",s,e)},updateAssetType:function(t,e){var s={name:t.name};u["a"].put("/api/data/entity-types/".concat(t.id),s,e)},deleteAssetType:function(t,e){u["a"].del("/api/data/entity-types/".concat(t.id),e)}},p=s("9fb0"),f=s("2229");function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var _,v={assetTypes:[],assetTypeMap:{},isAssetTypesLoading:!1,isAssetTypesLoadingError:!1,editAssetType:{isLoading:!1,isError:!1},deleteAssetType:{isLoading:!1,isError:!1}},b=m({},v),y={assetTypes:function(t){return t.assetTypes},assetTypeMap:function(t){return t.assetTypeMap},isAssetTypesLoading:function(t){return t.isAssetTypesLoading},isAssetTypesLoadingError:function(t){return t.isAssetTypesLoadingError},editAssetType:function(t){return t.editAssetType},deleteAssetType:function(t){return t.deleteAssetType},getAssetType:function(t,e){return function(e){return t.assetTypes.find((function(t){return t.id===e}))}},getAssetTypeOptions:function(t){return t.assetTypes.map((function(t){return{label:t.name,value:t.id}}))}},g={loadAssetTypes:function(t,e){var s=t.commit;t.state;s(p["Hc"]),l.getAssetTypes((function(t,n){t?s(p["Gc"]):s(p["Fc"],n),e&&e(t)}))},loadAssetType:function(t,e){var s=t.commit;t.state;l.getAssetType(e,(function(t,e){t?console.error(t):s(p["Lb"],e)}))},newAssetType:function(t,e){var s=t.commit;t.state;s(p["Nb"],e.data),l.newAssetType(e.data,(function(t,n){t?s(p["Mb"]):s(p["Lb"],n),e.callback&&e.callback(t)}))},editAssetType:function(t,e){var s=t.commit;t.state;s(p["Nb"]),l.updateAssetType(e.data,(function(t,n){t?s(p["Mb"]):s(p["Lb"],n),e.callback&&e.callback(t)}))},deleteAssetType:function(t,e){var s=t.commit;t.state;s(p["ab"]);var n=e.assetType;l.deleteAssetType(n,(function(t){t?s(p["Z"]):s(p["Y"],n),e.callback&&e.callback(t)}))}},k=(i={},Object(d["a"])(i,p["Hc"],(function(t){t.isAssetTypesLoading=!0,t.isAssetTypesLoadingError=!1})),Object(d["a"])(i,p["Gc"],(function(t){t.isAssetTypesLoading=!1,t.isAssetTypesLoadingError=!0})),Object(d["a"])(i,p["Fc"],(function(t,e){t.isAssetTypesLoading=!1,t.isAssetTypesLoadingError=!1,t.assetTypes=e,t.assetTypes=Object(f["c"])(t.assetTypes),t.assetTypeMap={},t.assetTypes.forEach((function(e){t.assetTypeMap[e.id]=e}))})),Object(d["a"])(i,p["Nb"],(function(t,e){t.editAssetType.isLoading=!0,t.editAssetType.isError=!1})),Object(d["a"])(i,p["Mb"],(function(t){t.editAssetType.isLoading=!1,t.editAssetType.isError=!0})),Object(d["a"])(i,p["Lb"],(function(t,e){var s=y.getAssetType(t)(e.id);s&&s.id?Object.assign(s,e):(t.assetTypes.push(e),t.assetTypeMap[e.id]=e),t.editAssetType={isLoading:!1,isError:!1},t.assetTypes=Object(f["c"])(t.assetTypes)})),Object(d["a"])(i,p["ab"],(function(t){t.deleteAssetType={isLoading:!0,isError:!1}})),Object(d["a"])(i,p["Z"],(function(t){t.deleteAssetType={isLoading:!1,isError:!0}})),Object(d["a"])(i,p["Y"],(function(t,e){var s=t.assetTypes.findIndex((function(t){return t.id===e.id}));s>=0&&t.assetTypes.splice(s,1),delete t.assetTypeMap[e.id],t.deleteAssetType={isLoading:!1,isError:!1}})),Object(d["a"])(i,p["ue"],(function(t){Object.assign(t,m({},v))})),i),O={state:b,getters:y,actions:g,mutations:k},S=(s("6762"),s("2fdb"),s("5df3"),s("8615"),s("55dd"),s("6b54"),{getAssets:function(t,e,s){var n="/api/data/assets/with-tasks";t&&(n+="?project_id=".concat(t.id)),e&&(n+="&episode_id=".concat(e.id)),u["a"].get(n,s)},getAsset:function(t){return u["a"].getModel("assets",t)},getCastIn:function(t,e){u["a"].get("/api/data/assets/".concat(t.id,"/cast-in"),e)},newAsset:function(t,e){var s={name:t.name,description:t.description,entity_type_id:t.entity_type_id,project_id:t.project_id,data:t.data};"null"!==t.source_id&&(s.source_id=t.source_id),u["a"].post("/api/data/entities/",s,e)},updateAsset:function(t,e){var s={name:t.name,description:t.description,entity_type_id:t.entity_type_id,project_id:t.project_id,data:t.data};("null"===t.source_id||t.source_id)&&(s.source_id=t.source_id),u["a"].put("/api/data/entities/".concat(t.id),s,e)},deleteAsset:function(t,e){t.canceled?u["a"].del("/api/data/assets/".concat(t.id,"?force=true"),e):u["a"].del("/api/data/assets/".concat(t.id),e)},restoreAsset:function(t,e){var s={canceled:!1};u["a"].put("/api/data/entities/".concat(t.id),s,e)},postCsv:function(t,e,s){u["a"].post("/api/import/csv/projects/".concat(t.id,"/assets"),e,s)}}),w=s("ce6b"),T=s("75fc"),C=s("2f24"),P={getTask:function(t,e){u["a"].get("/api/data/tasks/".concat(t,"/full"),e)},updateTask:function(t,e,s){u["a"].put("/api/data/tasks/".concat(t),e,s)},getTaskStatuses:function(t){u["a"].get("/api/data/task-status",t)},getTaskSubscribed:function(t,e){u["a"].get("/api/data/user/tasks/".concat(t,"/subscribed"),e)},subscribeToTask:function(t,e){u["a"].post("/api/actions/user/tasks/".concat(t,"/subscribe"),{},e)},unsubscribeFromTask:function(t,e){u["a"].del("/api/actions/user/tasks/".concat(t,"/unsubscribe"),e)},subscribeToSequence:function(t,e,s){u["a"].post("/api/actions/user/sequences/".concat(t,"/task-types/")+"".concat(e,"/subscribe"),{},s)},unsubscribeFromSequence:function(t,e,s){u["a"].del("/api/actions/user/sequences/".concat(t,"/task-types/")+"".concat(e,"/unsubscribe"),s)},getTaskComments:function(t,e){u["a"].get("/api/data/tasks/".concat(t,"/comments"),e)},getTaskPreviews:function(t,e){u["a"].get("/api/data/tasks/".concat(t,"/previews"),e)},commentTask:function(t,e){var s={task_status_id:t.taskStatusId,comment:t.comment};u["a"].post("/api/actions/tasks/".concat(t.taskId,"/comment"),s,e)},getTaskComment:function(t,e){u["a"].get("/api/data/comments/".concat(t.id),e)},editTaskComment:function(t,e){var s={text:t.text,checklist:t.checklist};u["a"].put("/api/data/comments/".concat(t.id),s,e)},deleteTaskComment:function(t,e,s){u["a"].del("/api/data/tasks/".concat(t,"/comments/").concat(e),s)},createTasks:function(t,e){var s=t.task_type_id,n=t.type,i=t.project_id;u["a"].post("/api/actions/task-types/".concat(s,"/").concat(n,"/create-tasks?project_id=").concat(i),{},e)},createTask:function(t,e){var s=t.entity_id,n=t.task_type_id,i=t.type,a=t.project_id;u["a"].post("/api/actions/task-types/".concat(n,"/").concat(i,"/create-tasks?project_id=").concat(a,"&id=").concat(s),{},e)},deleteTask:function(t,e){u["a"].del("/api/data/tasks/".concat(t.id,"?force=true"),e)},deleteAllTasks:function(t,e,s){u["a"].del("/api/data/projects/".concat(t,"/task-types/").concat(e,"/tasks"),s)},addPreview:function(t,e){var s=t.taskId,n=t.commentId;u["a"].post("/api/actions/tasks/".concat(s,"/comments/").concat(n,"/add-preview"),{},e)},addExtraPreview:function(t,e,s,n){u["a"].post("/api/actions/tasks/".concat(e,"/comments/").concat(s,"/preview-files/")+"".concat(t),{},n)},deletePreview:function(t,e,s,n){return new Promise((function(n,i){u["a"].del("/api/actions/tasks/".concat(t,"/comments/").concat(e,"/preview-files/")+"".concat(s),(function(t,e){t?i(t):n(e)}))}))},setPreview:function(t,e,s){u["a"].put("/api/actions/entities/".concat(t,"/set-main-preview/").concat(e),{},s)},uploadPreview:function(t,e,s){u["a"].post("/api/pictures/preview-files/".concat(t),e,s)},updatePreviewAnnotation:function(t,e){return new Promise((function(s,n){u["a"].put("/api/data/preview-files/".concat(t.id),{annotations:e},(function(t,e){t?n(t):s(e)}))}))},getPreviewFile:function(t){return new Promise((function(e,s){u["a"].get("/api/data/preview-files/".concat(t),(function(t,n){t?s(t):e(n)}))}))},assignTasks:function(t,e,s){u["a"].put("/api/actions/persons/".concat(t,"/assign"),{task_ids:e},s)},unassignTasks:function(t,e){u["a"].put("/api/actions/tasks/clear-assignation",{task_ids:t},e)},pinComment:function(t){return new Promise((function(e,s){var n={pinned:t.pinned};u["a"].put("/api/data/comments/".concat(t.id),n,(function(t,n){t?s(t):e(n)}))}))}},E={getPlaylists:function(t,e,s){var n="/api/data/projects/".concat(t.id);n+=e?"/episodes/".concat(e.id,"/playlists"):"/playlists",u["a"].get(n,s)},getPlaylist:function(t,e,s){var n="/api/data/projects/".concat(t.id,"/playlists/").concat(e.id);u["a"].get(n,s)},getShotPreviewFiles:function(t){var e="/api/data/shots/".concat(t.id,"/preview-files");return u["a"].pget(e)},getEntityPreviewFiles:function(t,e){var s="/api/data/playlists/entities/".concat(t.id,"/preview-files");u["a"].get(s,e)},newPlaylist:function(t,e){var s={name:t.name,project_id:t.production_id,episode_id:t.episode_id};u["a"].post("/api/data/playlists/",s,e)},updatePlaylist:function(t,e){var s={name:t.name};t.shots&&(s.shots=t.shots),u["a"].put("/api/data/playlists/".concat(t.id),s,e)},deletePlaylist:function(t,e){u["a"].del("/api/data/playlists/".concat(t.id),e)},deleteBuildJob:function(t,e){return new Promise((function(e,s){var n="/api/data/playlists/".concat(t.playlist_id,"/jobs/").concat(t.id);u["a"].del(n,(function(t){t?s(t):e()}))}))},runPlaylistBuild:function(t){return new Promise((function(e,s){var n="/api/data/playlists/".concat(t.id,"/build/mp4");u["a"].get(n,(function(t){t?s(t):e()}))}))}},j=s("52ad"),x=s("ef8b");function D(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function A(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?D(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):D(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var M,L={taskMap:{},taskStatusMap:{},taskStatuses:[],taskComments:{},taskPreviews:{},taskEntityPreviews:{},selectedTasks:{},selectedValidations:{},taskSearchQueries:[],nbSelectedTasks:0,nbSelectedValidations:0,isShowAssignations:!0,isShowInfos:!0,isSavingCommentPreview:!1,previewFormData:null,lastCommentDraft:""},I=A({},L),$={getPerson:function(t){return j["a"].getters.getPerson(j["a"].state,j["a"].getters)(t)},getTaskType:function(t){return x["a"].state.taskTypeMap[t]}},q={taskMap:function(t){return t.taskMap},getTaskComments:function(t,e){return function(e){return t.taskComments[e]}},getTaskPreviews:function(t,e){return function(e){return t.taskPreviews[e]}},getTaskComment:function(t,e){return function(e,s){return t.taskComments[e].find((function(t){return t.id===s}))}},getTaskStatus:function(t,e){return function(e){return t.taskStatuses.find((function(t){return t.id===e}))}},taskStatusOptions:function(t){return t.taskStatuses.map((function(t){return{label:t.short_name,value:t.id,color:t.color,isArtistAllowed:t.is_artist_allowed}}))},selectedTasks:function(t){return t.selectedTasks},nbSelectedTasks:function(t){return t.nbSelectedTasks},nbSelectedValidations:function(t){return t.nbSelectedValidations},taskSearchQueries:function(t){return t.taskSearchQueries},isShowAssignations:function(t){return t.isShowAssignations},isShowInfos:function(t){return t.isShowInfos},taskEntityPreviews:function(t){return t.taskEntityPreviews},previewFormData:function(t){return t.previewFormData},isSavingCommentPreview:function(t){return t.isSavingCommentPreview},lastCommentDraft:function(t){return t.lastCommentDraft}},N={loadTask:function(t,e){var s=t.commit,n=(t.state,e.taskId),i=e.callback;P.getTask(n,(function(t,e){t||s(p["sd"],e),i&&i(t,e)}))},loadTaskSubscribed:function(t,e){var s=t.commit,n=(t.state,e.taskId),i=e.callback;P.getTaskSubscribed(n,(function(t,e){t||s(p["xd"],{taskId:n,subscribed:e}),i&&i(t,e)}))},subscribeToTask:function(t,e){var s=t.commit;t.state;return new Promise((function(t,n){P.subscribeToTask(e,(function(i){i?n(i):(s(p["xd"],{taskId:e,subscribed:!0}),t())}))}))},subscribeToSequence:function(t,e){var s=t.commit,n=(t.state,e.sequenceId),i=e.taskTypeId;return new Promise((function(t,e){P.subscribeToSequence(n,i,(function(a){a?e(a):(s(p["jd"],{sequenceId:n,taskTypeId:i,subscribed:!0}),t())}))}))},unsubscribeFromTask:function(t,e){var s=t.commit;t.state;return new Promise((function(t,n){P.unsubscribeFromTask(e,(function(i){i?n(i):(s(p["xd"],{taskId:e,subscribed:!1}),t())}))}))},unsubscribeFromSequence:function(t,e){var s=t.commit,n=(t.state,e.sequenceId),i=e.taskTypeId;return new Promise((function(t,e){P.unsubscribeFromSequence(n,i,(function(a){a?e(a):(s(p["jd"],{sequenceId:n,taskTypeId:i,subscribed:!1}),t())}))}))},loadTaskComments:function(t,e){var s=t.commit,n=(t.state,t.dispatch),i=e.taskId,a=e.entityId,o=e.callback;P.getTaskComments(i,(function(t,e){t?o(t):(s(p["rd"],{comments:e,taskId:i}),n("loadTaskEntityPreviewFiles",{callback:o,entityId:a}))}))},loadTaskEntityPreviewFiles:function(t,e){var s=t.commit,n=(t.state,e.callback),i=e.entityId,a={id:i};E.getEntityPreviewFiles(a,(function(t,e){s(p["td"],e),n&&n(t)}))},commentTask:function(t,e){var s=t.commit,n=(t.state,e.taskId),i=e.taskStatusId,a=e.comment,o=e.callback;P.commentTask({taskId:n,taskStatusId:i,comment:a},(function(t,e){t||s(p["Vd"],{comment:e,taskId:n}),o&&o(t,e)}))},loadComment:function(t,e){var s=t.commit,n=(t.state,e.commentId),i=e.callback;P.getTaskComment({id:n},(function(t,e){t||s(p["Vd"],{comment:e,taskId:e.object_id}),i&&i(t,e)}))},createTasks:function(t,e){t.commit,t.state;var s={task_type_id:e.task_type_id,type:e.type,project_id:e.project_id};P.createTasks(s,(function(t,s){e.callback&&e.callback(t,s)}))},createSelectedTasks:function(t,e){var s=t.commit,n=t.state,i=e.type,a=e.projectId,o=e.callback;C["a"].eachSeries(Object.keys(n.selectedValidations),(function(t,e){var o=n.selectedValidations[t],r={entity_id:o.entity.id,task_type_id:o.column.id,type:i,project_id:a};P.createTask(r,(function(t,n){s(p["S"],n),n.forEach((function(t){s(p["ne"],o),t.assigneesInfo=[],o.task=t,s(p["l"],o)})),e(t,n[0])}))}),o)},deleteSelectedTasks:function(t){var e=t.commit,s=t.state;return new Promise((function(t,n){var i=Object.keys(s.selectedTasks);C["a"].eachSeries(i,(function(t,n){var i=s.taskMap[t];P.deleteTask(i,(function(t){t||e(p["xb"],i),n(t)}))}),(function(e){e?n(e):t()}))}))},deleteAllTasks:function(t,e){t.commit,t.state;var s=e.projectId,n=e.taskTypeId;return new Promise((function(t,e){P.deleteAllTasks(s,n,(function(s){s?e(s):t()}))}))},createTask:function(t,e){var s=t.commit,n=(t.state,t.rootGetters,e.entityId),i=e.projectId,a=e.taskTypeId,o=e.type;return new Promise((function(t,e){var r={entity_id:n,task_type_id:a,type:o,project_id:i};P.createTask(r,(function(n,i){n?e(n):(s(p["Wd"],i[0]),t())}))}))},changeSelectedTaskStatus:function(t,e){var s=t.commit,n=t.state,i=e.taskStatusId,a=e.comment,o=e.callback;C["a"].eachSeries(Object.keys(n.selectedTasks),(function(t,e){var o=n.taskMap[t];o&&o.task_status_id!==i?N.commentTask({commit:s,state:n},{taskId:t,taskStatusId:i,comment:a||"",callback:function(t){e(t)}}):e()}),(function(t){o(t)}))},changeSelectedPriorities:function(t,e){var s=t.commit,n=t.state,i=t.rootGetters,a=e.priority,o=e.callback;C["a"].eachSeries(Object.keys(n.selectedTasks),(function(t,e){var o=n.taskMap[t],r=i.taskTypeMap[o.task_type_id];o&&o.priority!==a?P.updateTask(t,{priority:a},(function(t,n){t||s(p["kc"],{task:n,taskType:r}),e(t)})):e()}),(function(t){o(t)}))},changeSelectedEstimations:function(t,e){var s=t.commit,n=t.state,i=t.rootGetters;return new Promise((function(t,a){C["a"].eachSeries(Object.keys(n.selectedTasks),(function(t,a){var o=n.taskMap[t],r=i.taskTypeMap[o.task_type_id];o&&o.estimation!==e?P.updateTask(t,{estimation:e},(function(t,e){t||s(p["kc"],{task:e,taskType:r}),a(t)})):a()}),(function(e){e?a(e):t()}))}))},getTask:function(t,e){var s=t.commit,n=t.rootGetters,i=e.taskId,a=e.callback;P.getTask(i,(function(t,e){if(!t){var i=n.taskTypeMap[e.task_type_id];s(p["kc"],{task:e,taskType:i})}a&&a(t)}))},deleteTask:function(t,e){var s=t.commit,n=e.task,i=e.callback;P.deleteTask(n,(function(t){t||s(p["xb"],n),i&&i(t)}))},editTaskComment:function(t,e){var s=t.commit,n=e.taskId,i=e.comment,a=e.checklist,o=e.callback;a&&s(p["qf"],{taskId:n,comment:i,checklist:a}),P.editTaskComment(i,(function(t,e){t||s(p["Ob"],{taskId:n,comment:e}),o&&o(t)}))},deleteTaskComment:function(t,e){var s=t.commit,n=t.rootState,i=e.taskId,a=e.commentId,o=e.callback,r=n.taskStatus.taskStatus.find((function(t){return"todo"===t.short_name}));P.deleteTaskComment(i,a,(function(t){t||s(p["bb"],{commentId:a,taskId:i,taskStatusMap:n.taskStatus.taskStatusMap,todoStatus:r}),o&&o(t)}))},commentTaskWithPreview:function(t,e){var s=t.commit,n=(t.getters,t.state),i=e.taskId,a=e.commentText,o=e.taskStatusId,r=e.callback,c={taskId:i,taskStatusId:o,comment:a};s(p["i"]),P.commentTask(c,(function(t,e){if(t)r(t);else{var a={taskId:i,commentId:e.id};P.addPreview(a,(function(t,a){t&&r?r(t):P.uploadPreview(a.id,n.previewFormData,(function(t,n){t||(s(p["Vd"],{comment:e,taskId:i}),s(p["h"],{preview:n,taskId:i,commentId:e.id,comment:e})),r&&r(t,n)}))}))}}))},addCommentExtraPreview:function(t,e){var s=t.commit,n=t.getters,i=t.state,a=e.taskId,o=e.commentId,r=e.previewId,c=e.callback;P.addExtraPreview(r,a,o,(function(t,e){t&&c?c(t):P.uploadPreview(e.id,i.previewFormData,(function(t){if(!t){var i=n.getTaskComment(a,o);e.extension="png",s(p["h"],{preview:e,taskId:a,commentId:o,comment:i})}c&&c(t,e)}))}))},deleteTaskPreview:function(t,e){var s=t.commit,n=(t.state,e.taskId),i=e.commentId,a=e.previewId;return new Promise((function(t,e){P.deletePreview(n,i,a).then((function(){s(p["ob"],{taskId:n,previewId:a}),t()})).catch(e)}))},changeCommentPreview:function(t,e){var s=t.commit,n=t.state,i=e.comment,a=e.preview,o=(e.taskId,e.callback),r=n.previewFormData.get("file").name,c=r.slice(r.length-4);a.extension=c,P.uploadPreview(a.id,n.previewFormData,(function(t){t||s(p["J"],{comment:i,preview:a}),o&&o(t,c)}))},setPreview:function(t,e){var s=t.commit,n=t.state,i=e.taskId,a=e.entityId,o=e.previewId,r=e.callback,c=n.taskMap;P.setPreview(a,o,(function(t,e){t&&r?r(t):r&&(s(p["We"],{taskId:i,entityId:a,previewId:o,taskMap:c}),r(t,e))}))},updatePreviewAnnotation:function(t,e){var s=t.commit,n=(t.state,e.taskId),i=e.preview,a=e.annotations;return new Promise((function(t,e){P.updatePreviewAnnotation(i,a).then((function(e){s(p["tf"],{taskId:n,preview:i,annotations:a}),t()})).catch((function(t){console.log(t),e(t)}))}))},refreshPreview:function(t,e){var s=t.commit,n=(t.state,e.taskId),i=e.previewId;return new Promise((function(t,e){P.getPreviewFile(i).then((function(e){s(p["tf"],{taskId:n,preview:e,annotations:e.annotations}),t()})).catch(e)}))},assignSelectedTasks:function(t,e){var s=t.commit,n=t.state,i=e.personId,a=e.callback,o=Object.keys(n.selectedTasks);P.assignTasks(i,o,(function(t){t||s(p["r"],{selectedTaskIds:o,personId:i}),a&&a(t)}))},unassignSelectedTasks:function(t,e){var s=t.commit,n=t.state,i=(e.personId,e.callback),a=Object.keys(n.selectedTasks);P.unassignTasks(a,(function(t){t||s(p["of"],a),i&&i(t)}))},showAssignations:function(t){var e=t.commit;t.state;e(p["Pe"],!0)},hideAssignations:function(t){var e=t.commit;t.state;e(p["Pe"],!1)},showInfos:function(t){var e=t.commit;t.state;e(p["Qe"],!0)},hideInfos:function(t){var e=t.commit;t.state;e(p["Qe"],!1)},loadPreviewFileFormData:function(t,e){var s=t.commit;s("PREVIEW_FILE_SELECTED",e)},addSelectedTask:function(t,e){var s=t.commit;s(p["l"],e)},addSelectedTasks:function(t,e){var s=t.commit;s(p["m"],e)},clearSelectedTasks:function(t,e){var s=t.commit;s(p["N"],e)},removeSelectedTask:function(t,e){var s=t.commit;s(p["ne"],e)},saveTaskSearch:function(t,e){var s=t.commit,n=t.rootGetters,i=e.searchQuery,a=e.entityType;return new Promise((function(t,e){var o=I.taskSearchQueries.find((function(t){return t.name===i})),r=n.currentProduction;o?t():w["a"].createFilter("task",i,i,r.id,a,(function(n,i){s(p["Fe"],{searchQuery:i,production:r}),n?e(n):t(i)}))}))},removeTaskSearch:function(t,e){var s=t.commit,n=t.rootGetters;return new Promise((function(t,i){var a=n.currentProduction;w["a"].removeFilter(e,(function(n){s(p["se"],{searchQuery:e,production:a}),n?i(n):t()}))}))},pinComment:function(t,e){var s=t.commit;s(p["ce"],e),P.pinComment(e)}},R=(_={},Object(d["a"])(_,p["Bc"],(function(t,e){var s=e.production,n=e.userFilters;n.task&&n.task[s.id]?t.taskSearchQueries=n.task[s.id]:t.taskSearchQueries=[]})),Object(d["a"])(_,p["ld"],(function(t,e){var s=e.production,n=e.userFilters;n.task&&n.task[s.id]?t.taskSearchQueries=n.task[s.id]:t.taskSearchQueries=[]})),Object(d["a"])(_,p["sd"],(function(t,e){Object.assign(e,{project_name:e.project.name,entity_type_name:e.entity_type.name}),"Shot"===e.entity_type.name?e.episode?e.entity_name="".concat(e.episode.name," / ").concat(e.sequence.name," / ").concat(e.entity.name):e.entity_name="".concat(e.sequence.name," / ").concat(e.entity.name):e.entity_name="".concat(e.entity_type.name," / ").concat(e.entity.name),t.taskMap[e.id]=e})),Object(d["a"])(_,p["td"],(function(t,e){t.taskEntityPreviews=e})),Object(d["a"])(_,p["rd"],(function(t,e){var s=e.taskId,n=e.comments;n.forEach((function(t){t.person=j["a"].helpers.addAdditionalInformation(t.person)})),t.taskComments[s]=Object(f["d"])(n),t.taskPreviews[s]=n.reduce((function(t,e){if(e.previews&&e.previews.length>0){var s=e.previews[0];return s.previews=e.previews.map((function(t){return{id:t.id,annotations:t.annotations}})),t.push(s),t}return t}),[])})),Object(d["a"])(_,p["ud"],(function(t,e){t.taskStatuses=Object(f["c"])(e),t.taskStatuses.forEach((function(e){t.taskStatusMap[e.id]=e}))})),Object(d["a"])(_,p["xd"],(function(t,e){e.taskId,e.subscribed})),Object(d["a"])(_,p["Vd"],(function(t,e){var s=e.comment,n=e.taskId,i=t.taskMap[n];if(void 0===s.task_status){var a=q.getTaskStatus(t,q);s.task_status=a(s.task_status_id)}if(void 0===s.person){var o=j["a"].getters.getPerson(j["a"].state,j["a"].getters);s.person=o(s.person_id)}s.person=j["a"].helpers.addAdditionalInformation(s.person),t.taskComments[n]||(t.taskComments[n]=[]),t.taskComments[n].find((function(t){return t.id===s.id}))||t.taskComments[n].unshift(s),t.taskComments[n]=Object(f["d"])(t.taskComments[n]),i&&Object.assign(i,{task_status_id:s.task_status_id,last_comment:s})})),Object(d["a"])(_,p["xb"],(function(t,e){t.taskComments[e.id]=void 0,t.taskPreviews[e.id]=void 0,t.taskMap[e.id]=void 0})),Object(d["a"])(_,p["bb"],(function(t,e){var s=e.taskId,n=e.commentId,i=e.taskStatusMap,a=e.todoStatus,o=t.taskMap[s],r=t.taskComments[s],c=r.findIndex((function(t){return t.id===n})),d=r.find((function(t){return t.id===n})),u=r.filter((function(t){return t.pinned})).length;if(r=r.filter((function(t){return t.id!==n})),t.taskComments[s]=r,t.taskPreviews[s]=Object(T["a"])(t.taskPreviews[s]).filter((function(t){return!(d.previews.length>0&&d.previews[0].id===t.id)})),c===u){var l=a;if(r.length>0){var p=r[0].task_status_id;u<r.length&&(p=r[u].task_status_id),l=i[p]}o&&Object.assign(o,{task_status_id:l.id,task_status_priority:l.priority})}})),Object(d["a"])(_,p["Ob"],(function(t,e){var s=e.taskId,n=e.comment,i=t.taskComments[s].find((function(t){return t.id===n.id}));i.text=n.text})),Object(d["a"])(_,p["de"],(function(t,e){t.previewFormData=e})),Object(d["a"])(_,p["i"],(function(t){t.isSavingCommentPreview=!0})),Object(d["a"])(_,p["h"],(function(t,e){var s=e.preview,n=e.taskId,i=(e.commentId,e.comment);t.isSavingCommentPreview=!1;var a={id:s.id,feedback:!1,revision:s.revision,extension:s.extension},o=t.taskPreviews[n].find((function(t){return t.revision===s.revision}));if(o){var r=o.previews.find((function(t){return t.id===a.id}));r||o.previews.push(a)}else a.previews=[A({},a)],t.taskPreviews[n]=[a].concat(t.taskPreviews[n]),i.preview=a,i.previews=[a]})),Object(d["a"])(_,p["ob"],(function(t,e){var s=e.taskId,n=e.previewId;t.taskPreviews[s].forEach((function(t){var e=t.previews.findIndex((function(t){return t.id===n}));e>=0&&t.previews.splice(e,1)}))})),Object(d["a"])(_,p["tf"],(function(t,e){var s=e.taskId,n=e.preview,i=e.annotations,a=null;t.taskPreviews[s].forEach((function(t){t.previews.forEach((function(t){t.id===n.id&&(a=t)})),t.id===n.id&&(t.annotations=i)})),a&&(a.annotations=i)})),Object(d["a"])(_,p["J"],(function(t,e){var s=e.preview,n=e.comment,i=n.object_id,a={id:s.id,feedback:!1,revision:s.revision,extension:s.extension};t.taskPreviews[i].shift(),t.taskPreviews[i]=[a].concat(t.taskPreviews[i])})),Object(d["a"])(_,p["l"],(function(t,e){if(e.task)t.selectedTasks[e.task.id]=e.task,t.nbSelectedTasks=Object.keys(t.selectedTasks).length;else{var s=e.column.id,n=e.entity.id,i="".concat(n,"-").concat(s);t.selectedValidations[i]=e,t.nbSelectedValidations=Object.keys(t.selectedValidations).length}})),Object(d["a"])(_,p["m"],(function(t,e){var s=JSON.parse(JSON.stringify(t.selectedTasks)),n=JSON.parse(JSON.stringify(t.selectedValidations)),i=!1;e.forEach((function(t){if(t.task)s[t.task.id]=t.task;else{var e=t.column.id,a=t.entity.id,o="".concat(a,"-").concat(e);n[o]=t,i=!0}})),t.selectedTasks=s,t.nbSelectedTasks=Object.keys(t.selectedTasks).length,i&&(t.selectedValidations=n,t.nbSelectedValidations=Object.keys(t.selectedValidations).length)})),Object(d["a"])(_,p["ne"],(function(t,e){if(e.task)delete t.selectedTasks[e.task.id],t.nbSelectedTasks=Object.keys(t.selectedTasks).length;else{var s=e.column.id,n=e.entity.id,i="".concat(n,"-").concat(s);delete t.selectedValidations[i],t.nbSelectedValidations=Object.keys(t.selectedValidations).length}})),Object(d["a"])(_,p["N"],(function(t){t.selectedTasks={},t.nbSelectedTasks=0,t.selectedValidations={},t.nbSelectedValidations=0})),Object(d["a"])(_,p["S"],(function(t,e){e.forEach((function(e){t.taskMap[e.id]=e}))})),Object(d["a"])(_,p["Wd"],(function(t,e){t.taskMap[e.id]=e})),Object(d["a"])(_,p["kc"],(function(t,e){var s=e.task,n=t.taskMap[s.id];n&&Object.assign(t.taskMap[s.id],{task_status_id:s.task_status_id,task_status_short_name:t.taskStatusMap[s.task_status_id].short_name,priority:s.priority,estimation:s.estimation,duration:s.duration,real_start_date:s.real_start_date,end_date:s.end_date,real_end_date:s.end_date,last_comment_date:s.last_comment_date,retake_count:s.retake_count})})),Object(d["a"])(_,p["r"],(function(t,e){var s=e.selectedTaskIds,n=e.personId;s.forEach((function(e){var s=t.taskMap[e];s&&!s.assignees.find((function(t){return t===n}))&&(s.assignees.push(n),s.assignees=Object(T["a"])(s.assignees))}))})),Object(d["a"])(_,p["of"],(function(t,e){e.forEach((function(e){var s=t.taskMap[e];s.assignees=[],s.assigneesInfo=[]}))})),Object(d["a"])(_,p["We"],(function(t,e){var s=e.taskId,n=e.previewId;t.taskMap[s]&&(t.taskMap[s].entity.preview_file_id=n)})),Object(d["a"])(_,p["Pe"],(function(t,e){t.isShowAssignations=e})),Object(d["a"])(_,p["Qe"],(function(t,e){t.isShowInfos=e})),Object(d["a"])(_,p["Vc"],(function(t,e){var s=e.tasks;s.forEach((function(e){if(e.last_comment.person_id){var s=$.getPerson(e.last_comment.person_id);e.last_comment.person=s}t.taskMap[e.id]=e}))})),Object(d["a"])(_,p["Ef"],(function(t,e){var s=e.tasks;s.forEach((function(e){if(e.last_comment.person_id){var s=$.getPerson(e.last_comment.person_id);e.last_comment.person=s}t.taskMap[e.id]=e}))})),Object(d["a"])(_,p["Fe"],(function(t,e){var s=e.searchQuery;t.taskSearchQueries.includes(s)||(t.taskSearchQueries.push(s),t.taskSearchQueries=Object(f["c"])(t.taskSearchQueries))})),Object(d["a"])(_,p["se"],(function(t,e){var s=e.searchQuery,n=t.taskSearchQueries.findIndex((function(t){return t.name===s.name}));n>=0&&t.taskSearchQueries.splice(n,1)})),Object(d["a"])(_,p["ce"],(function(t,e){e.pinned=!e.pinned,t.taskComments[e.object_id]=Object(f["d"])(t.taskComments[e.object_id])})),Object(d["a"])(_,p["qf"],(function(t,e){var s=e.comment,n=e.checklist;s.checklist=n})),Object(d["a"])(_,p["K"],(function(t){t.taskMap={}})),Object(d["a"])(_,p["O"],(function(t){t.taskMap={}})),Object(d["a"])(_,p["Re"],(function(t,e){t.lastCommentDraft=e})),Object(d["a"])(_,p["ue"],(function(t,e){Object.assign(t,A({},L))})),_),F={state:I,getters:q,actions:N,mutations:R},V={getProductions:function(t){u["a"].get("/api/data/projects/all",t)},getProduction:function(t){return u["a"].getModel("projects",t)},getOpenProductions:function(t){u["a"].get("/api/data/projects/open",t)},getProductionStatus:function(t){u["a"].get("/api/data/project-status",t)},newProduction:function(t,e){var s={name:t.name,project_status_id:t.project_status_id,production_type:t.production_type};u["a"].post("/api/data/projects/",s,e)},updateProduction:function(t,e){var s={name:t.name,project_status_id:t.project_status_id,production_type:t.production_type,fps:t.fps,ratio:t.ratio,resolution:t.resolution,start_date:t.start_date,end_date:t.end_date,man_days:t.man_days};u["a"].put("/api/data/projects/".concat(t.id),s,e)},postAvatar:function(t,e,s){u["a"].post("/api/pictures/thumbnails/projects/".concat(t),e,s)},deleteProduction:function(t,e){u["a"].del("/api/data/projects/".concat(t.id),e)},addPersonToTeam:function(t,e){return new Promise((function(s,n){var i={person_id:e};u["a"].post("/api/data/projects/".concat(t,"/team"),i,(function(t,e){t?n(t):s(e)}))}))},removePersonFromTeam:function(t,e){return new Promise((function(s,n){u["a"].del("/api/data/projects/".concat(t,"/team/").concat(e),(function(t,e){t?n(t):s(e)}))}))},addMetadataDescriptor:function(t,e){return new Promise((function(s,n){var i={name:e.name,choices:e.values,entity_type:e.entity_type};u["a"].post("/api/data/projects/".concat(t,"/metadata-descriptors"),i,(function(t,e){t?n(t):s(e)}))}))},getMetadataDescriptor:function(t,e){return new Promise((function(s,n){u["a"].get("/api/data/projects/".concat(t,"/metadata-descriptors/").concat(e),(function(t,e){t?n(t):s(e)}))}))},updateMetadataDescriptor:function(t,e){return new Promise((function(s,n){var i={id:e.id,name:e.name,choices:e.values,entity_type:e.entity_type};u["a"].put("/api/data/projects/".concat(t,"/metadata-descriptors/").concat(e.id),i,(function(t,e){t?n(t):s(e)}))}))},deleteMetadataDescriptor:function(t,e){return new Promise((function(s,n){u["a"].del("/api/data/projects/".concat(t,"/metadata-descriptors/").concat(e),(function(t){t?n(t):s()}))}))}},U=s("66e7");function B(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function z(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?B(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):B(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var H,G={productions:[],productionMap:{},openProductions:[],productionStatus:[],productionStatusMap:{},currentProduction:null,productionAvatarFormData:null,isProductionsLoading:!1,isProductionsLoadingError:!1,isOpenProductionsLoading:!1,editProduction:{isLoading:!1,isError:!1},deleteProduction:{isLoading:!1,isError:!1},assetsPath:{name:"open-productions"},assetTypesPath:{name:"open-productions"},shotsPath:{name:"open-productions"},sequencesPath:{name:"open-productions"},episodesPath:{name:"open-productions"},breakdownPath:{name:"open-productions"},playlistsPath:{name:"open-productions"},teamPath:{name:"open-productions"}},W=z({},G),K={getProductionComponentPath:function(t,e,s){return s?{name:"episode-"+t,params:{episode_id:s,production_id:e}}:e?{name:t,params:{production_id:e}}:{name:"open-productions"}}},Y={productions:function(t){return t.productions},productionMap:function(t){return t.productionMap},openProductions:function(t){return t.openProductions},productionStatus:function(t){return t.productionStatus},productionAvatarFormData:function(t){return t.productionAvatarFormData},isProductionsLoading:function(t){return t.isProductionsLoading},isProductionsLoadingError:function(t){return t.isProductionsLoadingError},isOpenProductionsLoading:function(t){return t.isOpenProductionsLoading},editProduction:function(t){return t.editProduction},deleteProduction:function(t){return t.deleteProduction},assetsPath:function(t){return t.assetsPath},assetTypesPath:function(t){return t.assetTypesPath},shotsPath:function(t){return t.shotsPath},sequencesPath:function(t){return t.sequencesPath},episodesPath:function(t){return t.episodesPath},breakdownPath:function(t){return t.breakdownPath},playlistsPath:function(t){return t.playlistsPath},teamPath:function(t){return t.teamPath},currentProduction:function(t){return t.currentProduction?t.currentProduction:t.openProductions.length>0?t.openProductions[0]:null},isTVShow:function(t){var e=Y.currentProduction(t);return e&&"tvshow"===e.production_type},assetMetadataDescriptors:function(t){return t.currentProduction&&t.currentProduction.descriptors?Object(f["c"])(t.currentProduction.descriptors.filter((function(t){return"Asset"===t.entity_type}))):[]},shotMetadataDescriptors:function(t){return t.currentProduction&&t.currentProduction.descriptors?Object(f["c"])(t.currentProduction.descriptors.filter((function(t){return"Shot"===t.entity_type}))):[]},productionStatusOptions:function(t){return t.productionStatus.map((function(t){return{label:t.name,value:t.id}}))},openProductionOptions:function(t){return t.openProductions.map((function(t){return{label:t.name,value:t.id}}))},getProduction:function(t,e){return function(e){return t.productions.find((function(t){return t.id===e}))}},getProductionStatus:function(t,e){return function(e){return t.productionStatus.find((function(t){return t.id===e}))}}},Q={loadProductionStatus:function(t,e){var s=t.commit;t.state;s(p["hd"]),V.getProductionStatus((function(t,n){t?s(p["gd"]):s(p["fd"],n),e&&e(t)}))},loadOpenProductions:function(t,e){var s=t.commit;t.state;s(p["Qc"]),V.getOpenProductions((function(t,n){t?s(p["Pc"]):s(p["Oc"],n),e&&e(t)}))},loadProductions:function(t,e){var s=t.commit;t.state;s(p["ed"]),V.getProductions((function(t,n){t?s(p["dd"]):s(p["cd"],n),e&&e(t)}))},loadProduction:function(t,e){var s=t.commit,n=t.state;return V.getProduction(e).then((function(t){n.productionMap[t.id]?s(p["uf"],t):s(p["k"],t)})).catch((function(t){return console.error(t)}))},newProduction:function(t,e){var s=t.commit,n=(t.state,e.data),i=e.callback;s(p["dc"],n),V.newProduction(n,(function(t,e){t?s(p["cc"]):s(p["bc"],e),i&&i(t,e)}))},editProduction:function(t,e){var s=t.commit;t.state;s(p["dc"]),V.updateProduction(e.data,(function(t,n){t?s(p["cc"]):s(p["bc"],n),e.callback&&e.callback(t)}))},deleteProduction:function(t,e){var s=t.commit;t.state;s(p["rb"]);var n=e.production;V.deleteProduction(n,(function(t){t?s(p["qb"]):(s(p["me"],n),s(p["pb"])),e.callback&&e.callback(t)}))},setProduction:function(t,e){var s=t.commit,n=t.rootGetters;if(s(p["Le"],e),n.isTVShow){var i=n.currentEpisode,a=i?i.id:null;e&&a&&s(p["ve"],{productionId:e,episodeId:a})}else e&&s(p["ve"],{productionId:e})},storeProductionPicture:function(t,e){var s=t.commit;s(p["fe"],e)},uploadProductionAvatar:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){V.postAvatar(e,n.productionAvatarFormData,(function(n){s(p["ee"],e),n?i(n):t()}))}))},addPersonToTeam:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){return s(p["jf"],e.id),V.addPersonToTeam(n.currentProduction.id,e.id).then(t).catch(i)}))},removePersonFromTeam:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){return s(p["kf"],e.id),V.removePersonFromTeam(n.currentProduction.id,e.id).then(t).catch(i)}))},addMetadataDescriptor:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){return e.id?V.updateMetadataDescriptor(n.currentProduction.id,e).then((function(e){s(p["sf"],{production:n.currentProduction,descriptor:e}),t()})).catch(i):V.addMetadataDescriptor(n.currentProduction.id,e).then((function(e){s(p["d"],{production:n.currentProduction,descriptor:e}),t()})).catch(i)}))},deleteMetadataDescriptor:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){return V.deleteMetadataDescriptor(n.currentProduction.id,e).then((function(){s(p["hb"],{id:e}),t()})).catch(i)}))},refreshMetadataDescriptor:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){return V.getMetadataDescriptor(n.currentProduction.id,e).then((function(e){var i={};n.openProductions.forEach((function(t){t.descriptors.forEach((function(t){i[t.id]=t}))})),i[e.id]?s(p["sf"],{production:n.productionMap[e.project_id],descriptor:e}):s(p["d"],{production:n.productionMap[e.project_id],descriptor:e}),t()})).catch(i)}))}},J=(M={},Object(d["a"])(M,p["ed"],(function(t){t.productions=[],t.isProductionsLoading=!0,t.isProductionsLoadingError=!1})),Object(d["a"])(M,p["dd"],(function(t){t.productions=[],t.isProductionsLoading=!1,t.isProductionsLoadingError=!0})),Object(d["a"])(M,p["cd"],(function(t,e){t.isProductionsLoading=!1,t.isProductionsLoadingError=!1,t.productions=Object(f["g"])(e);var s={},n=function(t){s[t.id]||(s[t.id]=t)};t.openProductions.forEach(n),t.productions.forEach(n),t.productionMap=s})),Object(d["a"])(M,p["Qc"],(function(t){t.isOpenProductionsLoading=!0,t.openProductions=[]})),Object(d["a"])(M,p["Pc"],(function(t){t.isOpenProductionsLoading=!1})),Object(d["a"])(M,p["Oc"],(function(t,e){t.isOpenProductionsLoading=!1,t.openProductions=Object(f["c"])(e);var s={};e.forEach((function(t){s[t.id]=t})),t.productionMap=s,!t.currentProduction&&t.openProductions.length>0&&(t.currentProduction=t.openProductions[0])})),Object(d["a"])(M,p["hd"],(function(t){t.productionStatus=[]})),Object(d["a"])(M,p["gd"],(function(t){})),Object(d["a"])(M,p["fd"],(function(t,e){var s={};e.forEach((function(t){s[t.id]=t})),t.productionStatus=e,t.productionStatusMap=s})),Object(d["a"])(M,p["dc"],(function(t,e){t.editProduction.isLoading=!0,t.editProduction.isError=!1})),Object(d["a"])(M,p["cc"],(function(t){t.editProduction.isLoading=!1,t.editProduction.isError=!0})),Object(d["a"])(M,p["bc"],(function(t,e){var s=t.productionMap[e.id],n=Y.getProductionStatus(t)(e.project_status_id),i=t.openProductions.find((function(t){return t.id===e.id}));if(e.project_status_name=n.name,s){var a=t.openProductions.findIndex((function(t){return t.id===e.id}));e.project_status_id&&(a>=0&&s.project_status_id!==e.project_status_id?t.openProductions.splice(a,1):a<0&&(t.openProductions.push(s),t.openProductions=Object(f["c"])(t.openProductions))),e.production_type&&e.production_type!==s.production_type&&"short"===e.production_type&&(s.first_episode_id=void 0,i.first_episode_id=void 0),Object.assign(s,e),i&&Object.assign(i,e)}else t.productions.push(e),t.productionMap[e.id]=e,t.openProductions.push(e),t.productions=Object(f["g"])(t.productions),t.openProductions=Object(f["c"])(t.openProductions);t.editProduction={isLoading:!1,isError:!1}})),Object(d["a"])(M,p["k"],(function(t,e){t.productions.push(e),t.openProductions.push(e),t.productions=Object(f["g"])(t.productions),t.openProductions=Object(f["c"])(t.openProductions),t.productionMap[e.id]=e})),Object(d["a"])(M,p["uf"],(function(t,e){var s=t.productionMap[e.id],n=t.productionStatusMap[e.project_status_id],i=t.openProductions.find((function(t){return t.id===e.id})),a=s.project_status_id!==n.id;e.project_status_name=n.name,Object.assign(s,e),i&&Object.assign(i,e),a&&("Open"===e.project_status_name?t.openProductions.push(s):t.openProductions=Object(U["e"])(t.openProductions,s)),t.productions=Object(f["g"])(t.productions),t.openProductions=Object(f["c"])(t.openProductions)})),Object(d["a"])(M,p["rb"],(function(t){t.deleteProduction={isLoading:!0,isError:!1}})),Object(d["a"])(M,p["qb"],(function(t){t.deleteProduction={isLoading:!1,isError:!0}})),Object(d["a"])(M,p["me"],(function(t,e){t.productions=Object(U["e"])(t.productions,e),t.openProductions=Object(U["e"])(t.openProductions,e),delete t.productionMap[e.id]})),Object(d["a"])(M,p["pb"],(function(t,e){t.deleteProduction={isLoading:!1,isError:!1}})),Object(d["a"])(M,p["fe"],(function(t,e){t.productionAvatarFormData=e})),Object(d["a"])(M,p["ee"],(function(t,e){var s=t.productionMap[e];s&&(s.has_avatar=!0)})),Object(d["a"])(M,p["Le"],(function(t,e){var s=t.productionMap[e];t.currentProduction=s})),Object(d["a"])(M,p["ve"],(function(t,e){var s=e.productionId,n=e.episodeId;t.assetsPath=K.getProductionComponentPath("assets",s,n),t.assetTypesPath=K.getProductionComponentPath("production-asset-types",s,n),t.shotsPath=K.getProductionComponentPath("shots",s,n),t.sequencesPath=K.getProductionComponentPath("sequences",s,n),t.episodesPath=K.getProductionComponentPath("episodes",s),t.breakdownPath=K.getProductionComponentPath("breakdown",s,n),t.playlistsPath=K.getProductionComponentPath("playlists",s,n),t.teamPath=K.getProductionComponentPath("team",s)})),Object(d["a"])(M,p["jf"],(function(t,e){t.currentProduction.team.find((function(t){return t===e}))||t.currentProduction.team.push(e)})),Object(d["a"])(M,p["kf"],(function(t,e){var s=t.currentProduction.team.findIndex((function(t){return t===e}));null!==s&&t.currentProduction.team.splice(s,1)})),Object(d["a"])(M,p["d"],(function(t,e){var s=e.production,n=e.descriptor;s&&(s.descriptors?s.descriptors.push(n):s.descriptors=[n])})),Object(d["a"])(M,p["sf"],(function(t,e){var s=e.production,n=e.descriptor;s&&(s.descriptors?Object(U["f"])(s.descriptors,n):s.descriptors=[])})),Object(d["a"])(M,p["hb"],(function(t,e){var s=t.openProductions.find((function(t){return t.descriptors.find((function(t){return t.id===e.id}))}));s&&(s.descriptors=Object(U["e"])(s.descriptors,e))})),Object(d["a"])(M,p["r"],(function(t,e){var s=e.personId,n=t.currentProduction&&t.currentProduction.team.some((function(t){return t===s}));!n&&t.currentProduction&&t.currentProduction.team.push(s)})),Object(d["a"])(M,p["ue"],(function(t){Object.assign(t,z({},G))})),M),X={state:W,getters:Y,actions:Q,mutations:J},Z=s("de26"),tt=s("6185"),et=s("09d3"),st=s("2017"),nt=s("ca76");function it(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function at(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?it(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):it(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var ot,rt={getCurrentProduction:function(){return X.getters.currentProduction(X.state)},getTaskStatus:function(t){return F.state.taskStatusMap[t]},getTaskType:function(t){return x["a"].state.taskTypeMap[t]},getTask:function(t){return F.state.taskMap[t]},getPerson:function(t){return j["a"].state.personMap[t]},populateTask:function(t,e,s){return t.name=rt.getTaskType(t.task_type_id).priority.toString(),t.task_status_short_name=rt.getTaskStatus(t.task_status_id).short_name,Object.assign(t,{project_id:e.production_id,episode_id:e.source_id,entity_name:"".concat(e.asset_type_name," / ").concat(e.name),entity_type_name:e.asset_type_name,entity:{id:e.id,preview_file_id:e.preview_file_id}}),t},populateAndRegisterAsset:function(t,e,s,n,i,a,o){var r={},c=0;t[o.asset_type]||(t[o.asset_type_id]={id:o.asset_type_id,name:o.asset_type_name}),o.production_id=i.id,o.project_name=i.name,o.production_name=i.name;var d=[];return o.tasks.forEach((function(t){rt.populateTask(t,o),t.assignees.length>1&&(t.assignees=t.assignees.sort((function(t,e){return n[t].name.localeCompare(n[e].name)})));var i=s[t.task_type_id];a[i.name]||(a[i.name]=t.task_type_id),c+=t.duration,d.push(t.id),r[t.task_type_id]=t.id,e[t.id]=t})),o.tasks=d,o.validations=r,o.timeSpent=c,o}},ct={assetIndex:{},assetTypeIndex:{},assets:[]},dt={assetMap:{},assetValidationColumns:[],nbValidationColumns:0,filteredAssets:[],displayedAssets:[],displayedAssetsLength:0,assetFilledColumns:{},assetSearchText:"",assetSelectionGrid:{},assetSearchQueries:[],displayedAssetTypes:[],displayedAssetTypesLength:0,assetTypeSearchText:"",assetTypeStats:{},assetTypes:[],isAssetsLoading:!1,isAssetsLoadingError:!1,isAssetTime:!1,assetsCsvFormData:null,assetCreated:"",editAsset:{isCreateError:!1,isLoading:!1,isError:!1},deleteAsset:{isLoading:!1,isError:!1},restoreAsset:{isLoading:!1,isError:!1},personTasks:[],assetListScrollPosition:0},ut=at({},dt),lt={assetMap:function(t){return t.assetMap},assetSearchText:function(t){return t.assetSearchText},assetSearchQueries:function(t){return t.assetSearchQueries},assetSelectionGrid:function(t){return t.assetSelectionGrid},assetValidationColumns:function(t){return t.assetValidationColumns},isAssetsLoading:function(t){return t.isAssetsLoading},isAssetsLoadingError:function(t){return t.isAssetsLoadingError},displayedAssets:function(t){return t.displayedAssets},displayedAssetsLength:function(t){return t.displayedAssetsLength},assetFilledColumns:function(t){return t.assetFilledColumns},displayedAssetTypes:function(t){return t.displayedAssetTypes},displayedAssetTypesLength:function(t){return t.displayedAssetTypesLength},assetTypeSearchText:function(t){return t.assetTypeSearchText},assetTypeStats:function(t){return t.assetTypeStats},assetTypeListScrollPosition:function(t){return t.assetTypeListScrollPosition},assetListScrollPosition:function(t){return t.assetListScrollPosition},displayedAssetsByType:function(t){return Object(U["b"])(t.displayedAssets,"asset_type_name")},assetsByType:function(t){return Object(U["b"])(Object.values(t.displayedAssets),"asset_type_name")},editAsset:function(t){return t.editAsset},deleteAsset:function(t){return t.deleteAsset},restoreAsset:function(t){return t.restoreAsset},assetCreated:function(t){return t.assetCreated},isAssetTime:function(t){return t.isAssetTime},assetsCsvFormData:function(t){return t.assetsCsvFormData}},pt={loadAssets:function(t,e){var s=t.commit,n=t.state,i=t.rootGetters,a=i.currentProduction,o=i.userFilters,r=i.personMap,c=i.currentEpisode,d=i.isTVShow,u=i.taskTypeMap,l=i.taskMap;return d&&!c?e?e():null:n.isAssetsLoading?e():(s(p["Dc"]),void S.getAssets(a,c,(function(t,n){t?s(p["Cc"]):s(p["Bc"],{production:a,assets:n,userFilters:o,personMap:r,taskMap:l,taskTypeMap:u}),e&&e(t)})))},loadAsset:function(t,e){var s=t.commit,n=t.state,i=t.rootGetters,a=i.personMap,o=i.currentProduction,r=i.taskMap,c=i.taskTypeMap;return S.getAsset(e).then((function(t){n.assetMap[t.id]?s(p["pf"],t):s(p["a"],{asset:t,taskTypeMap:c,taskMap:r,personMap:a,production:o})})).catch((function(t){return console.error(t)}))},loadAssetCastIn:function(t,e){var s=t.commit,n=(t.state,t.rootState),i=e.asset,a=e.callback,o=n.shots.shotMap;S.getCastIn(i,(function(t,e){t||s(p["Ec"],{asset:i,castIn:e,shotMap:o}),a&&a(t,e)}))},newAsset:function(t,e){var s=t.commit,n=t.dispatch,i=t.state,a=t.rootGetters,o=e.data,r=e.callback;if(ct.assets.find((function(t){return t.name===o.name})))return r();s(p["Kb"],o),S.newAsset(o,(function(t,e){if(t)s(p["Jb"]),r&&r(t);else{var o=a.assetTypeMap;s(p["Ib"],{newAsset:e,assetTypeMap:o});var c=i.assetValidationColumns,d=c.map((function(t){return n("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t,type:"assets"})}));Promise.all(d).then((function(){r&&r()})).catch((function(t){console.log(t)}))}}))},editAsset:function(t,e){var s=t.commit,n=(t.state,t.rootState),i=e.data,a=e.callback,o=i.name&&ct.assets.find((function(t){return t.name===i.name&&i.id!==t.id}));if(o)return a();s(p["Kb"]);var r=n.assetTypes.assetTypeMap;S.updateAsset(i,(function(t,e){t?s(p["Jb"]):s(p["Ib"],{newAsset:e,assetTypeMap:r}),a&&a(t)}))},deleteAsset:function(t,e){var s=t.commit,n=t.state,i=e.asset,a=e.callback;s(p["X"]),S.deleteAsset(i,(function(t){if(t)s(p["W"]);else{var e=n.assetMap[i.id];e&&e.tasks.length>0&&!e.canceled?s(p["s"],e):s(p["ge"],i),s(p["V"],i)}a&&a(t)}))},restoreAsset:function(t,e){var s=t.commit;t.state;s(p["ye"]);var n=e.asset;S.restoreAsset(n,(function(t){t?s(p["xe"]):s(p["we"],n),e.callback&&e.callback(t)}))},uploadAssetFile:function(t,e){var s=t.commit,n=t.state,i=rt.getCurrentProduction();s(p["vc"]),S.postCsv(i,n.assetsCsvFormData,(function(t){s(p["uc"]),e&&e(t)}))},setAssetSearch:function(t,e){var s=t.commit,n=t.rootGetters,i=n.taskStatusMap,a=n.taskTypeMap,o=n.taskMap,r=n.currentProduction;s(p["Ie"],{assetSearch:e,taskMap:o,taskStatusMap:i,taskTypeMap:a,production:r})},saveAssetSearch:function(t,e){var s=t.commit,n=t.rootGetters;return new Promise((function(t,i){var a=ut.assetSearchQueries.find((function(t){return t.name===e})),o=n.currentProduction;a?t():w["a"].createFilter("asset",e,e,o.id,null,(function(e,n){s(p["Ce"],{searchQuery:n,production:o}),e?i(e):t(n)}))}))},removeAssetSearch:function(t,e){var s=t.commit,n=t.rootGetters;return new Promise((function(t,i){var a=n.currentProduction;w["a"].removeFilter(e,(function(n){s(p["he"],{searchQuery:e,production:a}),n?i(n):t()}))}))},displayMoreAssets:function(t){var e=t.commit,s=t.rootGetters;e(p["Eb"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},initAssetTypes:function(t){t.commit;var e=t.dispatch;t.state,t.rootState,t.rootGetters;return new Promise((function(t,s){e("setLastProductionScreen","production-asset-types"),e("loadAssets",(function(n){n?s(n):(e("computeAssetTypeStats"),t())}))}))},setAssetTypeListScrollPosition:function(t){var e=t.commit;e(p["Xe"])},computeAssetTypeStats:function(t){var e=t.commit,s=t.rootGetters,n=s.taskStatusMap,i=s.taskMap;e(p["P"],{taskStatusMap:n,taskMap:i})},setAssetTypeSearch:function(t,e){var s=t.commit;s(p["Je"],e)}},ft=(H={},Object(d["a"])(H,p["K"],(function(t){ct.assets=[],t.assetMap={},t.assetValidationColumns=[],ct.assetIndex={},t.displayedAssets=[],t.assetFilledColumns={},t.displayedAssetsLength=0,t.assetSearchQueries=[]})),Object(d["a"])(H,p["Dc"],(function(t){ct.assets=[],t.assetMap={},t.isAssetsLoading=!0,t.isAssetsLoadingError=!1,t.assetValidationColumns=[],ct.assetIndex={},t.displayedAssets=[],t.assetFilledColumns={},t.displayedAssetsLength=0,t.assetSearchQueries=[]})),Object(d["a"])(H,p["Cc"],(function(t){t.isAssetsLoading=!1,t.isAssetsLoadingError=!0})),Object(d["a"])(H,p["Bc"],(function(t,e){var s=e.production,n=e.assets,i=e.userFilters,a=e.personMap,o=e.taskMap,r=e.taskTypeMap,c={},d={},u=!1;n=Object(f["a"])(n),ct.assets=n,ct.assetIndex=Object(st["a"])(n),t.assetMap={},n.forEach((function(e){rt.populateAndRegisterAsset(d,o,r,a,s,c,e),t.assetMap[e.id]=e,!u&&e.timeSpent>0&&(u=!0)}));var l=Object.values(d);ct.assetTypeIndex=Object(st["c"])(l),t.assetValidationColumns=Object(f["m"])(Object.values(c),r);var p=ct.assets.slice(0,Z["a"]);Object.assign(t,{isAssetTime:u,isAssetsLoading:!1,isAssetsLoadingError:!1,nbValidationColumns:t.assetValidationColumns.length,displayedAssets:p,displayedAssetsLength:ct.assets?ct.assets.length:0,assetFilledColumns:Object(U["a"])(p),assetTypes:l,displayedAssetTypes:l,displayedAssetTypesLength:l.length});var h=t.displayedAssets.length,m=t.nbValidationColumns;t.assetSelectionGrid=Object(tt["b"])(h,m),i.asset&&i.asset[s.id]?t.assetSearchQueries=i.asset[s.id]:t.assetSearchQueries=[]})),Object(d["a"])(H,p["a"],(function(t,e){var s=e.taskTypeMap,n=e.taskMap,i=e.personMap,a=e.production,o=e.asset;o.tasks=Object(f["l"])(o.tasks,s),o.validations={},o.production_id=o.project_id,o.episode_id=o.source_id,rt.populateAndRegisterAsset({},n,s,i,a,{},o),ct.assets.push(o),ct.assets=Object(f["a"])(ct.assets),t.assetMap[o.id]=o,t.displayedAssets.push(o),t.displayedAssets=Object(f["a"])(t.displayedAssets),t.displayedAssetsLength=ct.assets.length,t.assetFilledColumns=Object(U["a"])(t.displayedAssets);var r=t.displayedAssets.length,c=t.nbValidationColumns;t.assetSelectionGrid=Object(tt["b"])(r,c),t.assetMap[o.id]=o,ct.assetIndex=Object(st["a"])(ct.assets)})),Object(d["a"])(H,p["pf"],(function(t,e){Object.assign(t.assetMap[e.id],e),ct.assetIndex=Object(st["a"])(ct.assets)})),Object(d["a"])(H,p["ge"],(function(t,e){delete t.assetMap[e.id],ct.assets=Object(U["e"])(ct.assets,e),t.displayedAssets=Object(U["e"])(t.displayedAssets,e),e.timeSpent&&(t.displayedAssetsTimeSpent-=e.timeSpent),t.assetFilledColumns=Object(U["a"])(t.displayedAssets),t.displayedAssetsLength=Math.max(t.displayedAssetsLength-1,0),ct.assetIndex=Object(st["a"])(ct.assets)})),Object(d["a"])(H,p["q"],(function(t,e){t.assetsCsvFormData=e})),Object(d["a"])(H,p["vc"],(function(t){})),Object(d["a"])(H,p["uc"],(function(t){t.assetsCsvFormData=null})),Object(d["a"])(H,p["Kb"],(function(t,e){t.editAsset.isLoading=!0,t.editAsset.isError=!1})),Object(d["a"])(H,p["Jb"],(function(t){t.editAsset.isLoading=!1,t.editAsset.isError=!0,t.editAsset.isCreateError=!0})),Object(d["a"])(H,p["Ib"],(function(t,e){var s=e.newAsset,n=e.assetTypeMap;t.editAsset.isCreateError=!1,t.editAsset.isSuccess=!0,t.assetCreated=s.name;var i=t.assetMap[s.id],a=n[s.entity_type_id];if(a&&(s.asset_type_name=a.name,s.asset_type_id=a.id),s.tasks=[],i)s.episode_id=s.source_id,Object.assign(i,s),t.displayedAssets=Object(f["a"])(t.displayedAssets);else{s.validations={},s.production_id=s.project_id,s.episode_id=s.source_id,ct.assets.push(s),ct.assets=Object(f["a"])(ct.assets),t.displayedAssets.push(s),t.displayedAssets=Object(f["a"])(t.displayedAssets),t.assetFilledColumns=Object(U["a"])(t.displayedAssets),t.displayedAssetsLength=ct.assets.length;var o=t.displayedAssets.length,r=t.nbValidationColumns;t.assetSelectionGrid=Object(tt["b"])(o,r),t.assetMap[s.id]=s}t.editAsset={isLoading:!1,isError:!1},ct.assetIndex=Object(st["a"])(ct.assets)})),Object(d["a"])(H,p["X"],(function(t){t.deleteAsset={isLoading:!0,isError:!1}})),Object(d["a"])(H,p["W"],(function(t){t.deleteAsset={isLoading:!1,isError:!0}})),Object(d["a"])(H,p["s"],(function(t,e){e.canceled=!0})),Object(d["a"])(H,p["V"],(function(t,e){t.deleteAsset={isLoading:!1,isError:!1}})),Object(d["a"])(H,p["ye"],(function(t){t.restoreAsset={isLoading:!0,isError:!1}})),Object(d["a"])(H,p["xe"],(function(t){t.restoreAsset={isLoading:!1,isError:!0}})),Object(d["a"])(H,p["we"],(function(t,e){var s=t.assetMap[e.id];s.canceled=!1,t.restoreAsset={isLoading:!1,isError:!1},ct.assetIndex=Object(st["a"])(ct.assets)})),Object(d["a"])(H,p["ye"],(function(t){t.restoreAsset={isLoading:!0,isError:!1}})),Object(d["a"])(H,p["xe"],(function(t){t.restoreAsset={isLoading:!1,isError:!0}})),Object(d["a"])(H,p["we"],(function(t,e){var s=t.assetMap[e.id];s.canceled=!1,t.restoreAsset={isLoading:!1,isError:!1},ct.assetIndex=Object(st["a"])(ct.assets)})),Object(d["a"])(H,p["xb"],(function(t,e){var s=t.displayedAssets.find((function(t){return t.id===e.entity_id}));if(s){var n=JSON.parse(JSON.stringify(s.validations));delete s.validations,o.a.set(s,"validations",n);var i=JSON.parse(JSON.stringify(s.tasks)),a=i.findIndex((function(t){return t===e.id}));i.splice(a,1),o.a.set(s,"tasks",i)}})),Object(d["a"])(H,p["Vd"],(function(t,e){e.comment,e.taskId})),Object(d["a"])(H,p["Ie"],(function(t,e){var s=e.assetSearch,n=e.taskStatusMap,i=e.taskTypeMap,a=e.taskMap,o=e.production,r=Object.values(i),c=Object.keys(n).map((function(t){return n[t]})),d=s,u=Object(nt["d"])(d)||[],l=Object(nt["c"])(ct.assetIndex,r,c,o.descriptors||[],d),p=Object(st["h"])(ct.assetIndex,u)||ct.assets;p=Object(nt["a"])(p,l,a);var f=p.slice(0,Z["a"]),h=f.length,m=t.nbValidationColumns;t.displayedAssets=f,t.assetFilledColumns=Object(U["a"])(f),t.displayedAssetsLength=p?p.length:0,t.assetSearchText=d,t.assetSelectionGrid=Object(tt["b"])(h,m)})),Object(d["a"])(H,p["Ce"],(function(t,e){var s=e.searchQuery;t.assetSearchQueries.includes(s)||(t.assetSearchQueries.push(s),t.assetSearchQueries=Object(f["c"])(t.assetSearchQueries))})),Object(d["a"])(H,p["he"],(function(t,e){var s=e.searchQuery,n=t.assetSearchQueries.findIndex((function(t){return t.name===s.name}));n>=0&&t.assetSearchQueries.splice(n,1)})),Object(d["a"])(H,p["Eb"],(function(t,e){var s,n=e.taskTypeMap,i=e.taskStatusMap,a=e.taskMap,o=e.production;if(t.assetSearchText.length>0){var r=Object.values(n),c=Object.values(i),d=t.assetSearchText,u=Object(nt["d"])(d)||[],l=Object(nt["c"])(ct.assetIndex,r,c,o.descriptors||[],d);s=Object(st["h"])(ct.assetIndex,u)||ct.assets,s=Object(nt["a"])(s,l,a)}else s=ct.assets;t.displayedAssets=s.slice(0,t.displayedAssets.length+Z["a"]),t.assetFilledColumns=Object(U["a"])(t.displayedAssets);var p=t.displayedAssets.length-Z["a"],f=t.displayedAssets.length,h=t.nbValidationColumns;p>=0&&(t.assetSelectionGrid=Object(tt["a"])(t.assetSelectionGrid,p,f,h))})),Object(d["a"])(H,p["Le"],(function(t,e){t.assetSearchText=""})),Object(d["a"])(H,p["We"],(function(t,e){var s=e.entityId,n=(e.taskId,e.previewId),i=e.taskMap,a=t.assetMap[s];a&&(a.preview_file_id=n,a.tasks.forEach((function(t){var e=i[t];e.entity.preview_file_id=n})))})),Object(d["a"])(H,p["He"],(function(t,e){t.assetListScrollPosition=e})),Object(d["a"])(H,p["Xe"],(function(t,e){t.assetTypeListScrollPosition=e})),Object(d["a"])(H,p["ne"],(function(t,e){t.assetSelectionGrid[0]&&t.assetSelectionGrid[e.x]&&(t.assetSelectionGrid[e.x][e.y]=!1)})),Object(d["a"])(H,p["l"],(function(t,e){t.assetSelectionGrid[0]&&t.assetSelectionGrid[e.x]&&(t.assetSelectionGrid[e.x][e.y]=!0)})),Object(d["a"])(H,p["m"],(function(t,e){var s=JSON.parse(JSON.stringify(t.assetSelectionGrid));e.forEach((function(t){s[0]&&s[t.x]&&(s[t.x][t.y]=!0)})),t.assetSelectionGrid=s})),Object(d["a"])(H,p["N"],(function(t,e){var s=JSON.parse(JSON.stringify(t.assetSelectionGrid));t.assetSelectionGrid=Object(tt["c"])(s)})),Object(d["a"])(H,p["Wd"],(function(t,e){var s=t.assetMap[e.entity_id];s&&e&&(e=rt.populateTask(e,s),s.tasks.push(e),s.validations||(s.validations={}),o.a.set(s.validations,e.task_type_id,e.id))})),Object(d["a"])(H,p["S"],(function(t,e){e.forEach((function(e){if(e){var s=t.assetMap[e.entity_id];if(s){var n=at({},s.validations);o.a.set(n,e.task_type_id,e.id),delete s.validations,o.a.set(s,"validations",n)}}}))})),Object(d["a"])(H,p["Je"],(function(t,e){var s=Object(nt["d"])(e),n=Object(st["h"])(ct.assetTypeIndex,s)||t.assetTypes;Object.assign(t,{displayedAssetTypes:n,displayedAssetTypesLength:n?n.length:0,assetTypeSearchText:e})})),Object(d["a"])(H,p["P"],(function(t,e){var s=e.taskStatusMap,n=e.taskMap;t.assetTypeStats=Object(et["a"])(ct.assets,"asset_type_id",s,n)})),Object(d["a"])(H,p["ue"],(function(t){ct.assets=[],ct.assetIndex={},Object.assign(t,at({},dt))})),H),ht={state:ut,getters:lt,actions:pt,mutations:ft},mt={getSequenceCasting:function(t,e){var s="/api/data/projects/".concat(t,"/sequences/").concat(e,"/casting");return u["a"].pget(s)},getAssetTypeCasting:function(t,e){var s="/api/data/projects/".concat(t,"/asset-types/").concat(e,"/casting");return u["a"].pget(s)},updateCasting:function(t,e,s,n){var i="/api/data/projects/".concat(t,"/entities/").concat(e,"/casting");return u["a"].pput(i,s)},postCastingCsv:function(t,e){var s="/api/import/csv/projects/".concat(t.id,"/casting");return u["a"].ppost(s,e)}};function _t(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function vt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?_t(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):_t(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var bt,yt={castingSequenceId:"",castingShotId:0,castingSequenceShots:[],castingAssetTypeAssets:[],castingEpisodeSequences:[],castingSequenceOptions:[],castingAssetTypesOptions:[],castingCurrentShot:null,casting:{},castingByType:[]},gt=vt({},yt),kt={castingEpisodeSequences:function(t){return t.castingEpisodeSequences},castingSequenceId:function(t){return t.castingSequenceId},castingSequenceShots:function(t){return t.castingSequenceShots},castingAssetTypeAssets:function(t){return t.castingAssetTypeAssets},castingSequenceOptions:function(t){return t.castingSequenceOptions},castingAssetTypesOptions:function(t){return t.castingAssetTypesOptions},casting:function(t){return t.casting},castingByType:function(t){return t.castingByType},castingCurrentShot:function(t){return t.castingCurrentShot}},Ot={setCastingSequence:function(t,e){var s=t.commit,n=t.rootState;if(!e)return console.error("SequenceId is undefined, no casting can be set.");var i=n.productions.currentProduction,a=n.assets.assetMap,o=Object.values(n.shots.shotMap).filter((function(t){return t.sequence_id===e}));return s(p["B"],e),s(p["D"],o),mt.getSequenceCasting(i.id,e).then((function(t){s(p["z"],{casting:t,assetMap:a})}))},setCastingAssetType:function(t,e){var s=t.commit,n=t.rootState;if(!e)return console.error("assetTypeId is undefined, no casting can be set.");var i=n.productions.currentProduction,a=n.assets.assetMap,o=Object.values(n.assets.assetMap).filter((function(t){return t.asset_type_id===e}));return s(p["x"],e),s(p["w"],o),mt.getAssetTypeCasting(i.id,e).then((function(t){s(p["z"],{casting:t,assetMap:a})}))},setCastingEpisode:function(t,e){var s=t.commit,n=t.rootState,i=n.shots.sequences;s(p["C"],i),s(p["A"],e)},setCastingAssetTypes:function(t){var e=t.commit,s=t.rootState,n=s.assets.assetTypes;e(p["y"],n)},addAssetToCasting:function(t,e){var s=t.commit,n=t.rootState,i=e.entityId,a=e.assetId,o=e.nbOccurences,r=n.assets.assetMap[a];s(p["u"],{entityId:i,asset:r,nbOccurences:o})},removeAssetFromCasting:function(t,e){var s=t.commit,n=t.rootState,i=e.entityId,a=e.assetId,o=e.nbOccurences,r=n.assets.assetMap[a];s(p["v"],{entityId:i,asset:r,nbOccurences:o})},saveCasting:function(t,e){t.commit;var s=t.rootGetters;if(!e)return console.error("ShotId is undefined, no casting can be saved.");var n=s.currentProduction,i=[];return Object.values(gt.casting[e]).forEach((function(t){i.push({asset_id:t.asset_id,nb_occurences:t.nb_occurences||1})})),mt.updateCasting(n.id,e,i)},uploadCastingFile:function(t,e){t.commit,t.state;var s=t.rootGetters,n=s.currentProduction;return mt.postCastingCsv(n,e)}},St=(ot={},Object(d["a"])(ot,p["D"],(function(t,e){var s=[],n=[];t.castingSequenceShots=e,e.forEach((function(t){s[t.id]=[],n[t.id]=[]})),t.casting=s,t.castingByType=n})),Object(d["a"])(ot,p["w"],(function(t,e){var s=[],n=[];t.castingAssetTypeAssets=e,e.forEach((function(t){s[t.id]=[],n[t.id]=[]})),t.casting=s,t.castingByType=n})),Object(d["a"])(ot,p["C"],(function(t,e){t.castingEpisodeSequences=e,t.castingSequenceOptions=e.map((function(t){var e={name:"breakdown-sequence",params:{production_id:t.project_id,sequence_id:t.id}};return t.episode_id&&(e.name="episode-".concat(e.name),e.params.episode_id=t.episode_id),{label:t.name,value:t.id,route:e}}))})),Object(d["a"])(ot,p["y"],(function(t,e){t.castingAssetTypesOptions=e.map((function(t){var e={name:"breakdown-asset-type",params:{production_id:t.project_id,asset_type_id:t.id}};return t.episode_id&&(e.name="episode-".concat(e.name),e.params.episode_id=t.episode_id),{label:t.name,value:t.id,route:e}}))})),Object(d["a"])(ot,p["B"],(function(t,e){t.castingSequenceId=e})),Object(d["a"])(ot,p["A"],(function(t,e){t.castingEpisodeId=e})),Object(d["a"])(ot,p["x"],(function(t,e){t.castingAssetTypeId=e})),Object(d["a"])(ot,p["z"],(function(t,e){var s=e.casting,n=(e.assetMap,{}),i=Object.keys(s);i.forEach((function(t){var e=s[t];n[t]=Object(U["b"])(e,"asset_type_name")})),Object.assign(t.casting,s),t.casting=vt({},t.casting),Object.assign(t.castingByType,n),t.castingByType=vt({},t.castingByType)})),Object(d["a"])(ot,p["u"],(function(t,e){var s=e.entityId,n=e.asset,i=e.nbOccurences;t.casting[s]||(t.casting[s]=[]);var a=t.casting[s].find((function(t){return t.asset_id===n.id}));if(a)a.nb_occurences+=i;else{var o={asset_id:n.id,name:n.name,asset_name:n.name,asset_type_name:n.asset_type_name,nb_occurences:i,preview_file_id:n.preview_file_id};t.casting[s].push(o)}t.casting[s]=Object(f["a"])(t.casting[s]),t.castingByType[s]=Object(U["b"])(t.casting[s],"asset_type_name")})),Object(d["a"])(ot,p["v"],(function(t,e){var s=e.entityId,n=e.asset,i=e.nbOccurences,a=t.casting[s].find((function(t){return t.asset_id===n.id}));a&&(a.nb_occurences-=i,a.nb_occurences<1&&(delete t.casting[s][n.id],t.casting[s]=t.casting[s].filter((function(t){return t.asset_id!==n.id}))),t.castingByType[s]=Object(U["b"])(t.casting[s],"asset_type_name"))})),Object(d["a"])(ot,p["od"],(function(t,e){t.state,t.rootState;var s=e.shot,n=e.casting;s.casting=n,o.a.set(s,"castingAssetsByType",Object(U["b"])(n,"asset_type_name"))})),Object(d["a"])(ot,p["Ec"],(function(t,e){t.state,t.rootState;var s=e.asset,n=e.castIn;n.forEach((function(t){t.episode_name&&(t.sequence_name="".concat(t.episode_name," / ").concat(t.sequence_name))})),s.castIn=n,o.a.set(s,"castInShotsBySequence",Object(U["b"])(n,"sequence_name"))})),Object(d["a"])(ot,p["ue"],(function(t){Object.assign(t,vt({},yt))})),ot),wt={state:gt,getters:kt,actions:Ot,mutations:St},Tt=s("db82"),Ct=s.n(Tt),Pt={getCustomActions:function(t){u["a"].get("/api/data/custom-actions",t)},newCustomAction:function(t,e){var s={name:t.name,url:t.url};u["a"].post("/api/data/custom-actions/",s,e)},updateCustomAction:function(t,e){var s={name:t.name,url:t.url,entity_type:t.entityType,is_ajax:"true"===t.isAjax};u["a"].put("/api/data/custom-actions/".concat(t.id),s,e)},deleteCustomAction:function(t,e){u["a"].del("/api/data/custom-actions/".concat(t.id),e)},postCustomAction:function(t,e){return new Promise((function(s,n){Ct.a.post(t).withCredentials().send(e).end((function(t,e){t?n(t):s()}))}))}};function Et(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function jt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Et(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Et(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var xt,Dt={customActions:[],isCustomActionsLoading:!1,isCustomActionsLoadingError:!1,editCustomAction:{isLoading:!1,isError:!1},deleteCustomAction:{isLoading:!1,isError:!1}},At=jt({},Dt),Mt={customActions:function(t){return t.customActions},isCustomActionsLoading:function(t){return t.isCustomActionsLoading},isCustomActionsLoadingError:function(t){return t.isCustomActionsLoadingError},editCustomAction:function(t){return t.editCustomAction},deleteCustomAction:function(t){return t.deleteCustomAction},customAction:function(t,e,s){return function(e){return t.customActions.find((function(t){return t.id===e}))}},allCustomActions:function(t){return t.customActions.filter((function(t){return"all"===t.entity_type}))},assetCustomActions:function(t){return t.customActions.filter((function(t){return["all","asset"].includes(t.entity_type)}))},shotCustomActions:function(t){return t.customActions.filter((function(t){return["all","shot"].includes(t.entity_type)}))}},Lt={loadCustomActions:function(t,e){var s=t.commit;t.state;s(p["Kc"]),Pt.getCustomActions((function(t,n){t?s(p["Jc"]):s(p["Ic"],n),e&&e(t)}))},newCustomAction:function(t,e){var s=t.commit,n=(t.state,e.data),i=e.callback;s(p["Rb"],n),Pt.newCustomAction(n,(function(t,e){t?s(p["Qb"]):s(p["Pb"],e),i&&i(t)}))},editCustomAction:function(t,e){var s=t.commit,n=(t.state,e.data),i=e.callback;s(p["Rb"]),Pt.updateCustomAction(n,(function(t,e){t?s(p["Qb"]):s(p["Pb"],e),i&&i(t)}))},deleteCustomAction:function(t,e){var s=t.commit,n=(t.state,e.customAction),i=e.callback;s(p["eb"]),Pt.deleteCustomAction(n,(function(t){t?s(p["db"]):s(p["cb"],n),i&&i(t)}))},postCustomAction:function(t,e){t.commit;var s=e.data,n=e.url;Pt.postCustomAction(n,s)}},It=(bt={},Object(d["a"])(bt,p["Kc"],(function(t){t.isCustomActionsLoading=!0,t.isCustomActionsLoadingError=!1})),Object(d["a"])(bt,p["Jc"],(function(t){t.isCustomActionsLoading=!1,t.isCustomActionsLoadingError=!0})),Object(d["a"])(bt,p["Ic"],(function(t,e){t.isCustomActionsLoading=!1,t.isCustomActionsLoadingError=!1,t.customActions=e,t.customActions=Object(f["c"])(t.customActions)})),Object(d["a"])(bt,p["Rb"],(function(t,e){t.editCustomAction.isLoading=!0,t.editCustomAction.isError=!1})),Object(d["a"])(bt,p["Qb"],(function(t){t.editCustomAction.isLoading=!1,t.editCustomAction.isError=!0})),Object(d["a"])(bt,p["Pb"],(function(t,e){var s=Mt.customAction(t)(e.id);s&&s.id?Object.assign(s,e):(t.customActions.push(e),t.customActions=Object(f["c"])(t.customActions)),t.editCustomAction={isLoading:!1,isError:!1}})),Object(d["a"])(bt,p["eb"],(function(t){t.deleteCustomAction={isLoading:!0,isError:!1}})),Object(d["a"])(bt,p["db"],(function(t){t.deleteCustomAction={isLoading:!1,isError:!0}})),Object(d["a"])(bt,p["cb"],(function(t,e){var s=t.customActions.findIndex((function(t){return t.id===e.id}));t.customActions.splice(s,1),t.deleteCustomAction={isLoading:!1,isError:!1}})),Object(d["a"])(bt,p["ue"],(function(t){Object.assign(t,jt({},Dt))})),bt),$t={state:At,getters:Mt,actions:Lt,mutations:It},qt=s("48c6");function Nt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Rt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Nt(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Nt(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ft,Vt={email:"",password:"",isLdap:!1,isLoginLoading:!1,isLoginError:!1,isDataLoading:!1},Ut=Rt({},Vt),Bt={email:function(t){return t.email},password:function(t){return t.password},isLdap:function(t){return t.isLdap},isLoginLoading:function(t){return t.isLoginLoading},isLoginError:function(t){return t.isLoginError},isDataLoading:function(t){return t.isDataLoading}},zt={changeEmail:function(t,e){var s=t.commit;t.state;s(p["F"],e)},changePassword:function(t,e){var s=t.commit;t.state;s(p["G"],e)},logIn:function(t,e){var s=t.commit,n=t.state;s(p["Ed"]),qt["a"].logIn(n.email,n.password,(function(t){t?(s(p["Dd"]),e(t,!1)):(s(p["Fd"]),e(null,!0))}))},logout:function(t,e){var s=t.commit;t.state;qt["a"].logout((function(t){t?(s(p["Gd"]),e(null,!1)):(s(p["ue"]),s(p["Hd"]),s(p["nf"]),e(null,!0))}))},resetPassword:function(t,e){t.commit;return new Promise((function(t,s){qt["a"].resetPassword(e).then(t).catch(s)}))},resetChangePassword:function(t,e){var s=t.commit,n=e.token,i=e.password,a=e.password2;return new Promise((function(t,e){qt["a"].resetChangePassword(n,i,a).then((function(){s(p["Fd"]),t()})).catch(e)}))}},Ht=(xt={},Object(d["a"])(xt,p["F"],(function(t,e){t.email=e})),Object(d["a"])(xt,p["G"],(function(t,e){t.password=e})),Object(d["a"])(xt,p["Ed"],(function(t){t.isLoginLoading=!0,t.isLoginError=!1})),Object(d["a"])(xt,p["Fd"],(function(t,e){t.isLoginLoading=!1,t.isLoginError=!1})),Object(d["a"])(xt,p["Dd"],(function(t,e){t.isLoginLoading=!1,t.isLoginError=!0})),Object(d["a"])(xt,p["Hd"],(function(t,e){t.isLoginLoading=!1,t.isLoginError=!1})),Object(d["a"])(xt,p["U"],(function(t,e){t.isDataLoading=!0,e&&void 0!==e.isLdap&&(t.isLdap=e.isLdap)})),Object(d["a"])(xt,p["T"],(function(t){t.isDataLoading=!1})),Object(d["a"])(xt,p["ue"],(function(t,e){Object.assign(t,Rt({},Vt))})),xt),Gt={state:Ut,getters:Bt,actions:zt,mutations:Ht};function Wt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Kt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Wt(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Wt(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Yt,Qt={currentProductionScreen:"assets",isDarkTheme:!1,isSidebarHidden:!0,isUserMenuHidden:!0,lastProductionScreen:"assets",lastProductionViewed:null},Jt=Kt({},Qt),Xt={isDarkTheme:function(t){return t.isDarkTheme},isSidebarHidden:function(t){return t.isSidebarHidden},isUserMenuHidden:function(t){return t.isUserMenuHidden},lastProductionScreen:function(t){return t.lastProductionScreen},lastProductionViewed:function(t){return t.lastProductionViewed},currentProductionScreen:function(t){return t.currentProductionScreen}},Zt={toggleDarkTheme:function(t){var e=t.commit,s=t.state;e(p["lf"]),localStorage&&localStorage.setItem("dark-theme",s.isDarkTheme)},toggleSidebar:function(t){var e=t.commit;t.state;e(p["mf"])},toggleUserMenu:function(t){var e=t.commit;t.state;e(p["nf"])},setLastProductionScreen:function(t,e){var s=t.commit;t.state;s(p["Se"],e)}},te=(Ft={},Object(d["a"])(Ft,p["lf"],(function(t){t.isDarkTheme=!t.isDarkTheme})),Object(d["a"])(Ft,p["mf"],(function(t){t.isSidebarHidden=!t.isSidebarHidden})),Object(d["a"])(Ft,p["nf"],(function(t){t.isUserMenuHidden=!t.isUserMenuHidden})),Object(d["a"])(Ft,p["Se"],(function(t,e){t.lastProductionScreen=e})),Object(d["a"])(Ft,p["Le"],(function(t,e){e&&(t.lastProductionViewed=e)})),Object(d["a"])(Ft,p["ue"],(function(t){var e=t.isDarkTheme;Object.assign(t,Kt({},Qt)),t.isDarkTheme=e})),Ft),ee={state:Jt,getters:Xt,actions:Zt,mutations:te},se=function(t,e){var s="".concat(t,"?"),n=[];return Object.keys(e).forEach((function(t){e[t]&&n.push("".concat(t,"=").concat(e[t]))})),s+n.join("&")},ne={getLastNews:function(t){return new Promise((function(e,s){var n=t.productionId;delete t.productionId;var i=se("/api/data/projects/".concat(n,"/news"),t);u["a"].get(i,(function(t,n){t?s(t):e(n)}))}))},getNews:function(t,e){return new Promise((function(s,n){var i="/api/data/projects/".concat(t,"/news/").concat(e);u["a"].get(i,(function(t,e){t?n(t):s(e[0])}))}))}};function ie(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function ae(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ie(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ie(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var oe,re={newsList:[]},ce=ae({},re),de={newsList:function(t){return t.newsList},newsListByDay:function(t){if(0===t.newsList.length)return[];var e=[],s=[],n=t.newsList[0].created_at.substring(0,10);return t.newsList.forEach((function(t){var i=t.created_at.substring(0,10);i!==n&&(e.push(s),n=i,s=[]),s.push(t)})),0!==s.length&&e.push(s),e}},ue={loadNews:function(t,e){var s=t.commit;t.state;return new Promise((function(t,n){s(p["M"]),ne.getLastNews(e).then((function(t){return s(p["j"],t)})).then(t).catch(n)}))},loadMoreNews:function(t,e){var s=t.commit;t.state;return new Promise((function(t,n){ne.getLastNews(e).then((function(t){return s(p["j"],t)})).then(t).catch(n)}))},loadSingleNews:function(t,e){var s=t.commit,n=(t.state,e.productionId),i=e.newsId;return new Promise((function(t,e){ne.getNews(n,i).then((function(t){return s(p["c"],t)})).catch(e)}))}},le=(Yt={},Object(d["a"])(Yt,p["M"],(function(t){t.newsList=[]})),Object(d["a"])(Yt,p["j"],(function(t,e){t.newsList=[].concat(Object(T["a"])(t.newsList),Object(T["a"])(Object(f["b"])(e)))})),Object(d["a"])(Yt,p["c"],(function(t,e){t.newsList.unshift(e)})),Object(d["a"])(Yt,p["Kd"],(function(t,e){var s=e.commentId,n=e.previewId,i=e.extension;if(s){var a=t.newsList.find((function(t){return t.comment_id===s}));a&&(a.preview_file_id=n,a.preview_file_extension=i)}})),Object(d["a"])(Yt,p["ue"],(function(t){Object.assign(t,ae({},re))})),Yt),pe={state:ce,getters:de,actions:ue,mutations:le},fe={getNotifications:function(t){u["a"].get("/api/data/user/notifications",t)},getNotification:function(t,e){u["a"].get("/api/data/user/notifications/".concat(t),e)}};function he(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function me(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?he(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):he(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var _e,ve={notifications:[]},be=me({},ve),ye={notifications:function(t){return t.notifications},isNewNotification:function(t){var e=t.notifications.filter((function(t){return!t.read}));return e.length>0}},ge={loadNotifications:function(t,e){var s=t.commit;t.state;if(!e)return new Promise((function(t,e){s(p["Mc"],[]),fe.getNotifications((function(n,i){n?e(n):(s(p["Mc"],i),t())}))}));s(p["Mc"],[]),fe.getNotifications((function(t,n){t?e(t):(s(p["Mc"],n),e())}))},loadNotification:function(t,e){var s=t.commit;t.state;return new Promise((function(t,n){fe.getNotification(e,(function(e,i){e?n(e):(s(p["Nc"],i),t())}))}))},markAllNotificationsAsRead:function(t){var e=t.commit;e(p["Id"])}},ke=(oe={},Object(d["a"])(oe,p["Mc"],(function(t,e){t.notifications=Object(f["b"])(e)})),Object(d["a"])(oe,p["Nc"],(function(t,e){t.notifications.push(e),t.notifications=Object(f["b"])(t.notifications)})),Object(d["a"])(oe,p["Id"],(function(t){t.notifications.forEach((function(t){t.read=!0}))})),Object(d["a"])(oe,p["Xd"],(function(t,e){var s=e.commentId,n=e.previewId,i=t.notifications.find((function(t){return t.comment_id===s}));i&&(i.preview_file_id=n)})),Object(d["a"])(oe,p["ue"],(function(t){Object.assign(t,me({},ve))})),oe),Oe={state:be,getters:ye,actions:ge,mutations:ke},Se=s("0f9a");function we(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Te(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?we(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):we(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ce,Pe={playlists:[],playlistMap:{}},Ee=Te({},Pe),je={playlists:function(t){return t.playlists},playlistMap:function(t){return t.playlistMap}},xe={loadPlaylists:function(t,e){var s=t.commit,n=t.rootGetters,i=n.currentProduction,a=n.currentEpisode,o=n.isTVShow;if(o&&!a)return e?e():null;s(p["Yc"]),E.getPlaylists(i,a,(function(t,n){t?s(p["Xc"]):s(p["Wc"],n),e&&e(t)}))},loadPlaylist:function(t,e){var s=t.commit,n=t.rootGetters,i=e.playlist,a=e.callback,o=n.currentProduction;s(p["bd"]),E.getPlaylist(o,i,(function(t,e){t?s(p["ad"]):s(p["Zc"],e),a&&a(t,e)}))},refreshPlaylist:function(t,e){var s=t.commit,n=t.rootGetters;return new Promise((function(t,i){var a=n.currentProduction;E.getPlaylist(a,{id:e},(function(e,n){e?i(e):(s(p["Yb"],n),t(n))}))}))},loadShotPreviewFiles:function(t,e){t.commit;return E.getShotPreviewFiles(e)},newPlaylist:function(t,e){var s=t.commit,n=e.data,i=e.callback;s(p["ac"],n),E.newPlaylist(n,(function(t,e){t?s(p["Zb"]):s(p["Yb"],e),i&&i(t,e)}))},editPlaylist:function(t,e){var s=t.commit,n=e.data,i=e.callback;s(p["ac"]),E.updatePlaylist(n,(function(t,e){t?s(p["Zb"]):s(p["Yb"],e),i&&i(t)}))},deletePlaylist:function(t,e){var s=t.commit,n=e.playlist,i=e.callback;s(p["nb"]),E.deletePlaylist(n,(function(t){t?s(p["mb"]):s(p["lb"],n),i&&i(t)}))},addShotPreviewToPlaylist:function(t,e){var s=t.commit,n=t.dispatch,i=e.playlist,a=e.shot,o=e.previewFiles;e.callback;return new Promise((function(t,e){s(p["qd"],{playlist:i,shot:a,previewFiles:o}),s(p["p"],{playlist:i,shot:a}),n("editPlaylist",{data:i,callback:function(){var e={shot_id:a.id,id:a.preview_file_id,extension:a.preview_file_extension,annotations:a.preview_file_annotations,task_id:a.preview_file_task_id,preview_files:o};t(e)}})}))},removeShotPreviewFromPlaylist:function(t,e){var s=t.commit,n=t.dispatch,i=e.playlist,a=e.shot,o=e.callback;s(p["qe"],{playlist:i,shot:a}),n("editPlaylist",{data:i,callback:o})},changePlaylistOrder:function(t,e){var s=t.commit,n=t.dispatch,i=e.playlist,a=e.info,o=e.callback;s(p["H"],{playlist:i,info:a}),n("editPlaylist",{data:i,callback:o})},changePlaylistPreview:function(t,e){var s=t.commit,n=t.dispatch,i=e.playlist,a=e.shot,o=e.previewFileId,r=e.callback;s(p["I"],{playlist:i,shotId:a.id,previewFileId:o}),n("editPlaylist",{data:i,callback:r})},removeBuildJob:function(t,e){var s=t.commit;s(p["ie"],e),E.deleteBuildJob(e)},removeBuildJobFromList:function(t,e){var s=t.commit;s(p["ie"],e)},addNewBuildJob:function(t,e){var s=t.commit;s(p["g"],e)},markBuildJobAsDone:function(t,e){var s=t.commit;s(p["Jd"],e)},runPlaylistBuild:function(t,e){t.commit;E.runPlaylistBuild(e)}},De=(_e={},Object(d["a"])(_e,p["Yc"],(function(t){})),Object(d["a"])(_e,p["Xc"],(function(t){})),Object(d["a"])(_e,p["Wc"],(function(t,e){t.playlists=e,t.playlists=Object(f["f"])(t.playlists),t.playlistMap={},e.forEach((function(e){e.shots||(e.shots=[]),t.playlistMap[e.id]=e}))})),Object(d["a"])(_e,p["bd"],(function(t){})),Object(d["a"])(_e,p["ad"],(function(t){})),Object(d["a"])(_e,p["Zc"],(function(t,e){t.playlistMap[e.id].build_jobs=e.build_jobs})),Object(d["a"])(_e,p["ac"],(function(t,e){})),Object(d["a"])(_e,p["Zb"],(function(t){})),Object(d["a"])(_e,p["Yb"],(function(t,e){var s=t.playlistMap[e.id];s&&s.id?Object.assign(s,e):(t.playlists.push(e),t.playlistMap[e.id]=e),t.playlists=Object(f["f"])(t.playlists)})),Object(d["a"])(_e,p["nb"],(function(t){})),Object(d["a"])(_e,p["mb"],(function(t){})),Object(d["a"])(_e,p["lb"],(function(t,e){t.playlists=Object(U["e"])(t.playlists,e),delete t.playlistMap[e.id]})),Object(d["a"])(_e,p["qd"],(function(t,e){e.playlist;var s=e.shot,n=e.previewFiles,i=[];if(Object.keys(n).forEach((function(t){n[t].forEach((function(t){i.push(t)}))})),i=Object(f["b"])(i),i.length>0){var a=i[0];s.preview_file_id=a.id,s.preview_file_extension=a.extension,s.preview_file_annotations=a.annotations,s.preview_file_task_id=a.task_id}s.preview_files=n})),Object(d["a"])(_e,p["p"],(function(t,e){var s=e.playlist,n=e.shot;s.shots||(s.shots=[]),s.shots.push({shot_id:n.id,preview_file_id:n.preview_file_id,preview_file_extension:n.preview_file_extension,preview_file_annotations:n.preview_file_annotations,preview_files:n.preview_files})})),Object(d["a"])(_e,p["qe"],(function(t,e){var s=e.playlist,n=e.shot;s.shots||(s.shots=[]);var i=s.shots.findIndex((function(t){return t.shot_id===n.id}));s.shots.splice(i,1)})),Object(d["a"])(_e,p["H"],(function(t,e){var s=e.playlist,n=e.info,i=s.shots.find((function(t){return t.shot_id===n.after})),a=s.shots.findIndex((function(t){return t.shot_id===n.after})),o=s.shots.findIndex((function(t){return t.shot_id===n.before}));a>=0&&o>=0&&(s.shots.splice(a,1),a>o&&o++,s.shots.splice(o,0,i))})),Object(d["a"])(_e,p["I"],(function(t,e){var s=e.playlist,n=e.shotId,i=e.previewFileId,a=s.shots.find((function(t){return t.shot_id===n}));a.preview_file_id=i})),Object(d["a"])(_e,p["g"],(function(t,e){var s=t.playlistMap[e.playlist_id];s.build_jobs=[{id:e.build_job_id,created_at:e.created_at,status:"running",playlist_id:s.id}].concat(s.build_jobs)})),Object(d["a"])(_e,p["Jd"],(function(t,e){var s=t.playlistMap[e.playlist_id];Object(U["f"])(s.build_jobs,{id:e.build_job_id,status:"succeeded"})})),Object(d["a"])(_e,p["ie"],(function(t,e){var s=t.playlistMap[e.playlist_id];o.a.set(s,"build_jobs",Object(U["e"])(s.build_jobs,e))})),Object(d["a"])(_e,p["ue"],(function(t){Object.assign(t,Te({},Pe))})),_e),Ae={state:Ee,getters:je,actions:xe,mutations:De},Me={getMilestones:function(t){return new Promise((function(e,s){var n="/api/data/projects/".concat(t.id,"/milestones");u["a"].get(n,(function(t,n){t?s(t):e(n)}))}))},createMilestone:function(t,e){return new Promise((function(s,n){var i={date:e.date.format("YYYY-MM-DD"),name:e.name,task_type_id:e.task_type_id,project_id:t.id};u["a"].post("/api/data/milestones",i,(function(t,e){t?n(t):s(e)}))}))},updateMilestone:function(t){return new Promise((function(e,s){var n={date:t.date.format("YYYY-MM-DD"),name:t.name,task_type_id:t.task_type_id},i="/api/data/milestones/".concat(t.id);u["a"].put(i,n,(function(t,n){t?s(t):e(n)}))}))},deleteMilestone:function(t){return new Promise((function(e,s){var n="/api/data/milestones/".concat(t.id);u["a"].del(n,(function(n){n?s(n):e(t)}))}))},getScheduleItems:function(t){return new Promise((function(e,s){u["a"].get("/api/data/projects/".concat(t.id,"/schedule-items/task-types"),(function(t,n){t?s(t):e(n)}))}))},getAssetTypeScheduleItems:function(t,e){return this.getEntitycheduleItems(t,e,"asset-types")},getSequenceScheduleItems:function(t,e){return this.getEntitycheduleItems(t,e,"sequences")},getEpisodeScheduleItems:function(t,e){return this.getEntitycheduleItems(t,e,"episodes")},getEntitycheduleItems:function(t,e,s){return new Promise((function(n,i){u["a"].get("/api/data/projects/".concat(t.id,"/schedule-items/")+"".concat(e.id,"/").concat(s),(function(t,e){t?i(t):n(e)}))}))},updateScheduleItem:function(t){return new Promise((function(e,s){t.endDate||(t.endDate=t.startDate.add("days",1).clone());var n={start_date:t.startDate.format("YYYY-MM-DD"),end_date:t.endDate.format("YYYY-MM-DD"),man_days:t.man_days};u["a"].put("/api/data/schedule-items/".concat(t.id),n,(function(t,n){t?s(t):e(n)}))}))}};function Le(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Ie(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Le(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Le(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var $e,qe={milestones:{}},Ne=Ie({},qe),Re={milestones:function(t){return t.milestones}},Fe={loadScheduleItems:function(t,e){t.commit;return Me.getScheduleItems(e)},loadAssetTypeScheduleItems:function(t,e){t.commit;var s=e.production,n=e.taskType;return Me.getAssetTypeScheduleItems(s,n)},loadSequenceScheduleItems:function(t,e){t.commit;var s=e.production,n=e.taskType;return Me.getSequenceScheduleItems(s,n)},loadEpisodeScheduleItems:function(t,e){t.commit;var s=e.production,n=e.taskType;return Me.getEpisodeScheduleItems(s,n)},saveScheduleItem:function(t,e){t.commit;return Me.updateScheduleItem(e)},loadMilestones:function(t){var e=t.commit,s=t.rootState,n=s.productions.currentProduction;return Me.getMilestones(n).then((function(t){e(p["f"],t)}))},saveMilestone:function(t,e){var s=t.commit,n=t.rootState,i=n.productions.currentProduction;return e.id?Me.updateMilestone(e).then((function(t){s(p["e"],t)})):Me.createMilestone(i,e).then((function(t){s(p["e"],t)}))},deleteMilestone:function(t,e){var s=t.commit;t.rootState;return Me.deleteMilestone(e).then((function(t){s(p["ke"],t)}))}},Ve=(Ce={},Object(d["a"])(Ce,p["e"],(function(t,e){t.milestones[e.date]=e})),Object(d["a"])(Ce,p["f"],(function(t,e){t.milestones={},e.forEach((function(e){t.milestones[e.date]=e}))})),Object(d["a"])(Ce,p["ke"],(function(t,e){var s=Ie({},t.milestones);delete s[e.date],t.milestones=s})),Object(d["a"])(Ce,p["ue"],(function(t){Object.assign(t,Ie({},qe))})),Ce),Ue={state:Ne,getters:Re,actions:Fe,mutations:Ve},Be=s("c1df"),ze=s.n(Be),He={getShot:function(t,e){return u["a"].getModel("shots",t)},getShots:function(t,e,s){var n="/api/data/shots/with-tasks";t&&(n+="?project_id=".concat(t.id)),e&&(n+="&episode_id=".concat(e.id)),u["a"].get(n,s)},getSequence:function(t){return u["a"].getModel("sequences",t)},getSequences:function(t,e,s){var n="/api/data/projects/".concat(t.id,"/sequences");e&&(n="/api/data/episodes/".concat(e.id,"/sequences")),u["a"].get(n,s)},getEpisode:function(t){return u["a"].getModel("episodes",t)},getEpisodes:function(t,e){var s="/api/data/projects/".concat(t.id,"/episodes");u["a"].get(s,e)},getShotType:function(t){u["a"].get("/api/data/shot-type",t)},newShot:function(t,e){var s={name:t.name,description:t.description,sequence_id:t.sequence_id};u["a"].post("/api/data/projects/".concat(t.project_id,"/shots"),s,e)},newSequence:function(t,e){var s={name:t.name,episode_id:t.episode_id};u["a"].post("/api/data/projects/".concat(t.project_id,"/sequences"),s,e)},newEpisode:function(t,e){var s={name:t.name};u["a"].post("/api/data/projects/".concat(t.project_id,"/episodes"),s,e)},updateShot:function(t,e){var s={name:t.name,parent_id:t.sequence_id,description:t.description,nb_frames:parseInt(t.nb_frames),data:t.data};void 0===t.frameOut&&void 0===t.frameIn&&void 0===t.fps||Object.assign(s.data,{frame_in:t.frameIn,frame_out:t.frameOut,fps:t.fps}),u["a"].put("/api/data/entities/".concat(t.id),s,e)},updateSequence:function(t,e){var s={name:t.name,description:t.description};u["a"].put("/api/data/entities/".concat(t.id),s,e)},updateEpisode:function(t,e){var s={name:t.name,description:t.description};u["a"].put("/api/data/entities/".concat(t.id),s,e)},deleteShot:function(t,e){t.canceled?u["a"].del("/api/data/shots/".concat(t.id,"?force=true"),e):u["a"].del("/api/data/shots/".concat(t.id),e)},deleteSequence:function(t,e){u["a"].del("/api/data/entities/".concat(t.id),e)},deleteEpisode:function(t,e){u["a"].del("/api/data/entities/".concat(t.id),e)},restoreShot:function(t,e){var s={canceled:!1};u["a"].put("/api/data/entities/".concat(t.id),s,e)},postCsv:function(t,e,s){u["a"].post("/api/import/csv/projects/".concat(t.id,"/shots"),e,s)},getEpisodeStats:function(t){return u["a"].pget("/api/data/projects/".concat(t,"/episodes/stats"))}};function Ge(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function We(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ge(s,!0).forEach((function(e){Object(d["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ge(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ke={shots:[],shotIndex:[]},Ye={getTask:function(t){return F.state.taskMap[t]},getTaskStatus:function(t){return F.state.taskStatusMap[t]},getTaskType:function(t){return x["a"].state.taskTypeMap[t]},getPerson:function(t){return j["a"].state.personMap[t]},populateTask:function(t,e,s){t.name=Ye.getTaskType(t.task_type_id).priority.toString(),t.task_status_short_name=Ye.getTaskStatus(t.task_status_id).short_name;var n="".concat(e.sequence_name," / ").concat(e.name);return e.episode_name&&(n="".concat(e.episode_name," / ").concat(n)),Object.assign(t,{project_id:e.production_id,entity_name:n,entity_type_name:"Shot",sequence_name:e.sequence_name,entity:{id:e.id,preview_file_id:e.preview_file_id}}),t},setListStats:function(t,e){var s=0,n=0;e.forEach((function(t){s+=t.timeSpent,n+=t.nb_frames})),Object.assign(t,{displayedShotsLength:e.length,displayedShotsTimeSpent:s,displayedShotsFrames:n})}},Qe={shotMap:{},sequences:[],episodes:[],shotSearchText:"",shotSearchQueries:[],sequenceSearchText:"",sequenceStats:{},episodeSearchText:"",episodeStats:{},currentEpisode:null,episodeValidationColumns:[],isFps:!1,isFrameIn:!1,isFrameOut:!1,isTime:!1,displayedShots:[],displayedShotsLength:0,displayedShotsTimeSpent:0,displayedShotsFrames:0,displayedSequences:[],displayedSequencesLength:0,displayedEpisodes:[],displayedEpisodesLength:0,sequenceIndex:{},shotFilledColumns:{},sequenceMap:{},episodeMap:{},shotCreated:"",shotSelectionGrid:{},sequenceSelectionGrid:{},isShotsLoading:!1,isShotsLoadingError:!1,shotsCsvFormData:null,editShot:{isLoading:!1,isError:!1},deleteShot:{isLoading:!1,isError:!1},restoreShot:{isLoading:!1,isError:!1},shotListScrollPosition:0,sequenceListScrollPosition:0,episodeListScrollPosition:0,shotValidationColumns:[]},Je=We({},Qe),Xe={sequences:function(t){return t.sequences},sequenceMap:function(t){return t.sequenceMap},sequenceStats:function(t){return t.sequenceStats},episodes:function(t){return t.episodes},episodeMap:function(t){return t.episodeMap},episodeStats:function(t){return t.episodeStats},shotValidationColumns:function(t){return t.shotValidationColumns},currentEpisode:function(t){return t.currentEpisode},shotSearchQueries:function(t){return t.shotSearchQueries},shotMap:function(t){return t.shotMap},isFps:function(t){return t.isFps},isFrameIn:function(t){return t.isFrameIn},isFrameOut:function(t){return t.isFrameOut},isTime:function(t){return t.isTime},shotSearchText:function(t){return t.shotSearchText},sequenceSearchText:function(t){return t.sequenceSearchText},episodeSearchText:function(t){return t.episodeSearchText},shotSelectionGrid:function(t){return t.shotSelectionGrid},sequenceSelectionGrid:function(t){return t.sequenceSelectionGrid},displayedShots:function(t){return t.displayedShots},displayedShotsLength:function(t){return t.displayedShotsLength},displayedShotsTimeSpent:function(t){return t.displayedShotsTimeSpent},displayedShotsFrames:function(t){return t.displayedShotsFrames},displayedSequences:function(t){return t.displayedSequences},displayedSequencesLength:function(t){return t.displayedSequencesLength},displayedEpisodes:function(t){return t.displayedEpisodes},displayedEpisodesLength:function(t){return t.displayedEpisodesLength},shotFilledColumns:function(t){return t.shotFilledColumns},displayedShotsBySequence:function(t){return Object(U["b"])(t.displayedShots,"sequence_name")},isShotsLoading:function(t){return t.isShotsLoading},isShotsLoadingError:function(t){return t.isShotsLoadingError},editShot:function(t){return t.editShot},deleteShot:function(t){return t.deleteShot},restoreShot:function(t){return t.restoreShot},shotCreated:function(t){return t.shotCreated},shotsCsvFormData:function(t){return t.shotsCsvFormData},shotListScrollPosition:function(t){return t.shotListScrollPosition},sequenceListScrollPosition:function(t){return t.sequenceListScrollPosition},episodeListScrollPosition:function(t){return t.episodeListScrollPosition},episodeValidationColumns:function(t){return t.episodeValidationColumns},shotsByEpisode:function(t){for(var e=[],s=[],n=null,i=0,a=Object.values(t.shotMap);i<a.length;i++){var o=a[i];n&&o.sequence_name!==n.sequence_name&&(e.push(s.slice(0)),s=[]),s.push(o),n=o}return e.push(s),e},getSequenceOptions:function(t){return t.sequences.map((function(t){return{label:t.name,value:t.id}}))},getEpisodeOptions:function(t){return t.episodes.map((function(t){return{label:t.name,value:t.id}}))},isSingleEpisode:function(t){return t.episodes.length<2},episodeOptions:function(t){return t.episodes.map((function(t){return{label:t.name,value:t.id}}))}},Ze={getPending:function(t){t.commit;var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(t,s){var n=[];Ke.shots.forEach((function(t){var s=!1;t.tasks.forEach((function(t){var n=F.state.taskMap[t];if(!s)if(e){if(n.last_comment_date){var i=ze()(n.last_comment_date),a=ze()().subtract(1,"days");s="wfa"===n.task_status_short_name&&i.isAfter(a)}}else s="wfa"===n.task_status_short_name})),s&&n.push(t)})),t(n)}))},clearEpisodes:function(t){var e=t.commit;e(p["L"])},loadEpisodes:function(t,e){var s=t.commit,n=(t.state,t.rootGetters),i=n.currentProduction;He.getEpisodes(i,(function(t,n){t&&console.log(t),s(p["Lc"],n),e&&e()}))},loadShots:function(t,e){var s=t.commit,n=(t.dispatch,t.state),i=t.rootGetters,a=i.currentProduction,o=i.userFilters,r=i.taskTypeMap,c=i.taskMap,d=i.personMap,u=i.isTVShow,l=u?i.currentEpisode:null;return u&&!l?e():n.isShotsLoading?e():(s(p["nd"]),void He.getSequences(a,l,(function(t,n){t?s(p["md"]):He.getShots(a,l,(function(t,i){t?s(p["md"]):(s(p["id"],n),s(p["ld"],{production:a,shots:i,userFilters:o,taskTypeMap:r,taskMap:c,personMap:d})),e&&e(t)}))})))},loadEpisode:function(t,e){var s=t.commit,n=t.state;return He.getEpisode(e).then((function(t){n.episodeMap[t.id]?s(p["rf"],t):s(p["b"],t)})).catch((function(t){return console.error(t)}))},loadSequence:function(t,e){var s=t.commit,n=t.state;return He.getSequence(e).then((function(t){n.sequenceMap[t.id]?s(p["vf"],t):s(p["n"],t)})).catch((function(t){return console.error(t)}))},loadShot:function(t,e){var s=t.commit,n=t.state,i=t.rootGetters,a=i.personMap,o=i.currentProduction,r=i.taskMap,c=i.taskTypeMap;return He.getShot(e).then((function(t){n.shotMap[t.id]?s(p["wf"],t):s(p["o"],{shot:t,taskTypeMap:c,taskMap:r,personMap:a,production:o})})).catch((function(t){return console.error(t)}))},loadShotCasting:function(t,e){var s=t.commit,n=t.rootGetters,i=e.shot,a=e.callback,o=n.assetMap;He.getCasting(i,(function(t,e){t||s(p["od"],{shot:i,casting:e,assetMap:o}),a&&a(t,e)}))},newShot:function(t,e){var s=t.commit,n=t.dispatch,i=(t.rootGetters,e.shot),a=e.callback;s(p["Ud"]),He.newShot(i,(function(t,e){if(t)s(p["Td"]),a&&a(t);else{s(p["Sd"],e);var i=Je.shotValidationColumns,o=i.map((function(t){return n("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t,type:"shots"})}));Promise.all(o).then((function(){a&&a(null,e)})).catch((function(t){console.log(t)}))}}))},newSequence:function(t,e){var s=t.commit,n=(t.state,e.sequence),i=e.callback;s(p["Rd"]),He.newSequence(n,(function(t,e){t?s(p["Qd"]):s(p["Pd"],e),i&&i(t,e)}))},newEpisode:function(t,e){var s=t.commit;t.state;s(p["Nd"]),He.newEpisode(e.episode,(function(t,n){t?s(p["Md"]):s(p["Ld"],n),e.callback&&e.callback(t,n)}))},editShot:function(t,e){var s=t.commit;t.state;s(p["jc"]),He.updateShot(e.data,(function(t,n){t?s(p["ic"]):s(p["hc"],n),e.callback&&e.callback(t)}))},editEpisode:function(t,e){var s=t.commit;t.state;return new Promise((function(t,n){s(p["Ub"]),He.updateEpisode(e,(function(e,i){e?(s(p["Tb"]),n(e)):(s(p["Sb"],i),t(i))}))}))},editSequence:function(t,e){var s=t.commit;t.state;return new Promise((function(t,n){s(p["gc"]),He.updateSequence(e,(function(e,i){e?(s(p["fc"]),n(e)):(s(p["ec"],i),t(i))}))}))},deleteShot:function(t,e){var s=t.commit,n=t.state,i=e.shot,a=e.callback;s(p["wb"]),He.deleteShot(i,(function(t){if(t)s(p["vb"]);else{var e=n.shotMap[i.id];e&&e.tasks.length>0&&!e.canceled?s(p["t"],e):s(p["pe"],i),s(p["ub"],i)}a&&a(t)}))},deleteEpisode:function(t,e){var s=t.commit;t.state;return new Promise((function(t,n){s(p["gb"]),He.deleteEpisode(e,(function(i){i?(s(p["fb"]),n(i)):(s(p["je"],e),t(e))}))}))},deleteSequence:function(t,e){var s=t.commit;t.state;return new Promise((function(t,n){s(p["tb"]),He.deleteSequence(e,(function(i){i?s(p["sb"]):s(p["oe"],e),i?n(i):t(e)}))}))},restoreShot:function(t,e){var s=t.commit;t.state;s(p["Be"]);var n=e.shot;He.restoreShot(n,(function(t){t?s(p["Ae"]):s(p["ze"],n),e.callback&&e.callback(t)}))},uploadShotFile:function(t,e){var s=t.commit,n=t.state,i=t.rootGetters;s(p["Ac"]);var a=i.currentProduction;He.postCsv(a,n.shotsCsvFormData,(function(t){s(p["zc"]),e&&e(t)}))},displayMoreShots:function(t){var e=t.commit,s=t.rootGetters;e(p["Hb"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},displayMoreSequences:function(t){var e=t.commit;e(p["Gb"])},displayMoreEpisodes:function(t){var e=t.commit;e(p["Fb"])},setShotSearch:function(t,e){var s=t.commit,n=t.rootGetters,i=n.taskStatusMap,a=n.taskTypeMap,o=n.taskMap,r=n.currentProduction;s(p["bf"],{shotSearch:e,taskStatusMap:i,taskMap:o,taskTypeMap:a,production:r})},saveShotSearch:function(t,e){var s=t.commit,n=t.rootGetters;return new Promise((function(t,i){var a=Je.shotSearchQueries.find((function(t){return t.name===e})),o=n.currentProduction;a?t():w["a"].createFilter("shot",e,e,o.id,null,(function(e,n){s(p["Ee"],{searchQuery:n,production:o}),e?i(e):t(n)}))}))},removeShotSearch:function(t,e){var s=t.commit,n=t.rootGetters;return new Promise((function(t,i){var a=n.currentProduction;w["a"].removeFilter(e,(function(n){s(p["re"],{searchQuery:e,production:a}),n?i(n):t()}))}))},initSequences:function(t){t.commit;var e=t.dispatch,s=t.state,n=t.rootState;t.rootGetters;return new Promise((function(t,i){var a=n.route.params.production_id;e("setLastProductionScreen","sequences"),0!==s.sequences.length&&s.sequences[0].production_id===a||e("loadShots",(function(s){s?i(s):(e("computeSequenceStats"),t())}))}))},setSequenceSearch:function(t,e){var s=t.commit;s(p["Ze"],e)},setSequenceListScrollPosition:function(t,e){var s=t.commit;s(p["Ye"],e)},computeSequenceStats:function(t){var e=t.commit,s=t.rootGetters,n=s.taskStatusMap,i=s.taskMap;e(p["R"],{taskStatusMap:n,taskMap:i})},setCurrentEpisode:function(t,e){var s=t.commit,n=t.rootGetters;s(p["Ke"],e);var i=n.currentProduction.id;s(p["ve"],{productionId:i,episodeId:e})},initEpisodes:function(t){t.commit;var e=t.dispatch,s=t.state,n=t.rootState,i=t.rootGetters;return new Promise((function(t,a){var o=n.route.params.production_id,r=i.isTVShow;e("setLastProductionScreen","episodes"),0!==s.episodes.length&&s.episodes[0].production_id===o||(r?e("loadEpisodes",(function(){return e("loadEpisodeStats",o)})):(e("computEpisodeStats"),t()))}))},loadEpisodeStats:function(t,e){var s=t.commit;return new Promise((function(t,n){s(p["Oe"],{}),He.getEpisodeStats(e).then((function(e){s(p["Oe"],e),t()})).catch(n)}))},setEpisodeSearch:function(t,e){var s=t.commit;s(p["Ne"],e)},setEpisodeListScrollPosition:function(t,e){var s=t.commit;s(p["Me"],e)},computeEpisodeStats:function(t){var e=t.commit,s=t.dispatch,n=t.rootGetters,i=n.taskStatusMap,a=n.taskMap,o=n.isTVShow;o?s("loadEpisodeStats",n.currentProduction.id):e(p["Q"],{taskStatusMap:i,taskMap:a})}},ts=($e={},Object(d["a"])($e,p["O"],(function(t){Ke.shots=[],Ke.result=[],Ke.shotIndex={},t.shotMap={},t.sequences=[],t.sequenceIndex={},t.displayedShots=[],t.displayedShotsLength=0,t.displayedTimeSpent=0,t.displayedFrames=0,t.shotSearchQueries=[],t.displayedSequences=[],t.displayedSequencesLength=0,t.displayedEpisodes=[],t.displayedEpisodesLength=0})),Object(d["a"])($e,p["nd"],(function(t){Ke.shots=[],Ke.result=[],Ke.shotIndex={},t.shotMap={},t.shotValidationColumns=[],t.sequences=[],t.isShotsLoading=!0,t.isShotsLoadingError=!1,t.sequenceIndex={},t.displayedShots=[],t.displayedShotsLength=0,t.displayedTimeSpent=0,t.displayedFrames=0,t.shotSearchQueries=[],t.displayedSequences=[],t.displayedSequencesLength=0,t.displayedEpisodes=[],t.displayedEpisodesLength=0})),Object(d["a"])($e,p["md"],(function(t){t.isShotsLoading=!1,t.isShotsLoadingError=!0})),Object(d["a"])($e,p["ld"],(function(t,e){var s=e.production,n=e.shots,i=e.userFilters,a=e.taskMap,o=e.taskTypeMap,r=e.personMap,c={},d=!1,u=!1,l=!1,p=!1;n=Object(f["j"])(n),Ke.shots=n,Ke.shotIndex=Object(st["e"])(n),t.shotMap={},n.forEach((function(e){var n=[],i={},f=0;e.project_name=s.name,e.production_id=s.id,e.tasks.forEach((function(t){Ye.populateTask(t,e,s),f+=t.duration,t.episode_id=e.episode_id,a[t.id]=t,i[t.task_type_id]=t.id,n.push(t.id);var d=o[t.task_type_id];c[d.name]||(c[d.name]=d.id),t.assignees.length>1&&(t.assignees=t.assignees.sort((function(t,e){return r[t].name.localeCompare(r[e])})))})),e.tasks=n,e.validations=i,e.timeSpent=f,!d&&e.data.fps&&(d=!0),!u&&e.data.frame_in&&(u=!0),!l&&e.data.frame_out&&(l=!0),!p&&e.timeSpent>0&&(p=!0),t.shotMap[e.id]=e})),t.shotValidationColumns=Object(f["m"])(Object.values(c),o);var h=n.slice(0,Z["a"]);Object.assign(t,{isShotsLoading:!1,isShotsLoadingError:!1,nbValidationColumns:t.shotValidationColumns.length,isFps:d,isFrameIn:u,isFrameOut:l,isTime:p,displayedShots:h,shotFilledColumns:Object(U["a"])(h)});var m=t.displayedShots.length,_=t.nbValidationColumns;t.shotSelectionGrid=Object(tt["b"])(m,_),Ye.setListStats(t,n),i.shot&&i.shot[s.id]?t.shotSearchQueries=i.shot[s.id]:t.shotSearchQueries=[]})),Object(d["a"])($e,p["Ee"],(function(t,e){var s=e.searchQuery;t.shotSearchQueries.push(s),t.shotSearchQueries=Object(f["c"])(t.shotSearchQueries)})),Object(d["a"])($e,p["re"],(function(t,e){var s=e.searchQuery,n=t.shotSearchQueries.findIndex((function(t){return t.name===s.name}));n>=0&&t.shotSearchQueries.splice(n,1)})),Object(d["a"])($e,p["id"],(function(t,e){var s={};e.forEach((function(e){if(s[e.id]=e,e.parent_id){var n=t.episodeMap[e.parent_id];n&&Object.assign(e,{episode_id:n.id,episode_name:n.name})}}));var n=Object(f["i"])(e);Object.assign(t,{sequenceMap:s,sequences:n,sequenceIndex:Object(st["d"])(n),displayedSequences:n.slice(0,Z["a"]),displayedSequencesLength:n.length})})),Object(d["a"])($e,p["Lc"],(function(t,e){var s={};e||(e=[]),e.forEach((function(t){s[t.id]=t})),t.episodeMap=s,t.episodes=Object(f["c"])(e),t.episodeIndex=Object(st["b"])(t.episodes),t.displayedEpisodes=t.episodes.slice(0,Z["a"]),t.displayedEpisodesLength=t.episodes.length,t.episodes.length>0?t.currentEpisode=t.episodes[0]:t.currentEpisode=null})),Object(d["a"])($e,p["pd"],(function(t,e){var s=e.shot,n=e.taskTypeMap;s.tasks.forEach((function(t){Ye.populateTask(t,s)})),s.tasks=Object(f["l"])(s.tasks,n),t.shotMap[s.id]=s})),Object(d["a"])($e,p["ff"],(function(t,e){t.shotsCsvFormData=e})),Object(d["a"])($e,p["Ac"],(function(t){})),Object(d["a"])($e,p["zc"],(function(t){t.shotsCsvFormData=null})),Object(d["a"])($e,p["Oc"],(function(t,e){t.openProductions=e})),Object(d["a"])($e,p["jc"],(function(t,e){t.editShot.isLoading=!0,t.editShot.isError=!1})),Object(d["a"])($e,p["ic"],(function(t){t.editShot.isLoading=!1,t.editShot.isError=!0})),Object(d["a"])($e,p["hc"],(function(t,e){var s=t.shotMap[e.id],n=t.sequences.find((function(t){return t.id===e.parent_id}));if(e.sequence_name=n.name,s)Object.assign(s,e);else{Ke.shots.push(e),Ke.shots=Object(f["j"])(Ke.shots),t.shotMap[e.id]=e;var i=t.displayedShots.length,a=t.nbValidationColumns;t.shotSelectionGrid=Object(tt["b"])(i,a)}t.editShot={isLoading:!1,isError:!1},Ke.shotIndex=Object(st["e"])(Ke.shots),t.shotCreated=e.name,t.shotSearchText?Ye.setListStats(t,Ke.result):Ye.setListStats(t,Ke.shots),e.data.fps&&(t.isFps=!0),e.data.frame_in&&(t.isFrameIn=!0),e.data.frame_out&&(t.isFrameOut=!0)})),Object(d["a"])($e,p["gc"],(function(t,e){})),Object(d["a"])($e,p["fc"],(function(t){})),Object(d["a"])($e,p["ec"],(function(t,e){var s=t.sequenceMap[e.id];s&&Object.assign(s,e),t.sequenceIndex=Object(st["d"])(t.sequences)})),Object(d["a"])($e,p["Ub"],(function(t,e){})),Object(d["a"])($e,p["Tb"],(function(t){})),Object(d["a"])($e,p["Sb"],(function(t,e){var s=t.episodeMap[e.id];s&&Object.assign(s,e),t.episodeIndex=Object(st["b"])(t.episodes)})),Object(d["a"])($e,p["wb"],(function(t){t.deleteShot={isLoading:!0,isError:!1}})),Object(d["a"])($e,p["vb"],(function(t){t.deleteShot={isLoading:!1,isError:!0}})),Object(d["a"])($e,p["ub"],(function(t,e){t.deleteShot={isLoading:!1,isError:!1}})),Object(d["a"])($e,p["tb"],(function(t){})),Object(d["a"])($e,p["sb"],(function(t){})),Object(d["a"])($e,p["gb"],(function(t){})),Object(d["a"])($e,p["fb"],(function(t){})),Object(d["a"])($e,p["Be"],(function(t){t.restoreShot={isLoading:!0,isError:!1}})),Object(d["a"])($e,p["Ae"],(function(t){t.restoreShot={isLoading:!1,isError:!0}})),Object(d["a"])($e,p["ze"],(function(t,e){var s=t.shotMap[e.id];s.canceled=!1,t.restoreShot={isLoading:!1,isError:!1},Ke.shotIndex=Object(st["e"])(Ke.shots)})),Object(d["a"])($e,p["Vd"],(function(t,e){e.comment,e.taskId})),Object(d["a"])($e,p["bf"],(function(t,e){var s=e.shotSearch,n=e.taskStatusMap,i=e.taskMap,a=e.taskTypeMap,o=e.production,r=Object.values(a),c=Object.values(n),d=s,u=Object(nt["d"])(d)||[],l=Object(nt["c"])(Ke.shotIndex,r,c,o.descriptors,d),p=Object(st["h"])(Ke.shotIndex,u)||Ke.shots;p=Object(nt["a"])(p,l,i),Ke.result=p;var f=p.slice(0,Z["a"]),h=f.length,m=t.nbValidationColumns;Ye.setListStats(t,p),Object.assign(t,{displayedShots:f,shotFilledColumns:Object(U["a"])(f),shotSearchText:s,shotSelectionGrid:Object(tt["b"])(h,m)})})),Object(d["a"])($e,p["Ze"],(function(t,e){var s=Object(nt["d"])(e),n=Object(st["h"])(t.sequenceIndex,s)||t.sequences;t.displayedSequences=n.slice(0,Z["a"]),t.displayedSequencesLength=n.length,t.sequenceSearchText=e})),Object(d["a"])($e,p["Ne"],(function(t,e){var s=Object(nt["d"])(e),n=Object(st["h"])(t.episodeIndex,s)||t.episodes;t.displayedEpisodes=n.slice(0,Z["a"]),t.displayedEpisodesLength=n.length,t.episodeSearchText=e})),Object(d["a"])($e,p["Ud"],(function(t){})),Object(d["a"])($e,p["Td"],(function(t){})),Object(d["a"])($e,p["Sd"],(function(t,e){var s=t.sequenceMap[e.parent_id],n=t.episodeMap[s.parent_id];e.production_id=e.project_id,e.sequence_name=s.name,e.sequence_id=s.id,e.episode_name=n?n.name:null,e.episode_id=n?n.id:null,e.preview_file_id="",e.tasks=[],e.validations={},e.data={},Ke.shots.push(e),Ke.shots=Object(f["j"])(Ke.shots),t.displayedShots=Ke.shots.slice(0,Z["a"]),Ye.setListStats(t,Ke.shots),t.shotFilledColumns=Object(U["a"])(t.displayedShots),t.shotMap[e.id]=e,Ke.shotIndex=Object(st["e"])(Ke.shots);var i=t.displayedShots.length,a=t.nbValidationColumns;t.shotSelectionGrid=Object(tt["b"])(i,a),e.data.fps&&(t.isFps=!0),e.data.frame_in&&(t.isFrameIn=!0),e.data.frame_out&&(t.isFrameOut=!0)})),Object(d["a"])($e,p["Rd"],(function(t){})),Object(d["a"])($e,p["Qd"],(function(t){})),Object(d["a"])($e,p["Pd"],(function(t,e){if(e.parent_id){var s=t.episodeMap[e.parent_id];e.episode_id=s.id,e.episode_name=s.name}t.sequences.push(e),t.sequences=Object(f["i"])(t.sequences),t.sequenceMap[e.id]=e,t.sequenceIndex=Object(st["d"])(t.sequences)})),Object(d["a"])($e,p["Nd"],(function(t){})),Object(d["a"])($e,p["Md"],(function(t){})),Object(d["a"])($e,p["Ld"],(function(t,e){t.episodes.push(e),t.episodes=Object(f["c"])(t.episodes),t.displayedEpisodes=t.episodes,t.episodeMap[e.id]=e})),Object(d["a"])($e,p["S"],(function(t,e){e.forEach((function(e){if(e){var s=t.shotMap[e.entity_id];if(s){var n=We({},s.validations);o.a.set(n,e.task_type_id,e.id),delete s.validations,o.a.set(s,"validations",n)}}}))})),Object(d["a"])($e,p["Hb"],(function(t,e){var s=e.taskTypeMap,n=e.taskStatusMap,i=e.taskMap,a=e.production,o=Ke.shots;if(t.shotSearchText.length>0){var r=Object.values(s),c=Object.values(n),d=t.shotSearchText,u=Object(nt["d"])(d)||[],l=Object(nt["c"])(Ke.shotIndex,r,c,a.descriptors||[],d);o=Object(st["h"])(Ke.shotIndex,u)||Ke.shots,o=Object(nt["a"])(o,l,i)}t.displayedShots=o.slice(0,t.displayedShots.length+Z["a"]),t.shotFilledColumns=Object(U["a"])(t.displayedShots);var p=t.displayedShots.length-Z["a"],f=t.displayedShots.length,h=t.nbValidationColumns;p>=0&&(t.shotSelectionGrid=Object(tt["a"])(t.shotSelectionGrid,p,f,h))})),Object(d["a"])($e,p["Gb"],(function(t,e){var s=t.sequences;if(t.sequenceSearchText.length>0){var n=Object(nt["d"])(t.sequenceSearchText);s=Object(st["h"])(t.sequenceIndex,n)}t.displayedSequences=s.slice(0,t.displayedSequences.length+Z["a"])})),Object(d["a"])($e,p["Fb"],(function(t,e){var s=t.episodes;if(t.episodeSearchText.length>0){var n=Object(nt["d"])(t.episodeSearchText);s=Object(st["h"])(t.episodeIndex,n)}t.displayedEpisodes=s.slice(0,t.displayedEpisodes.length+Z["a"])})),Object(d["a"])($e,p["Le"],(function(t,e){t.shotSearchText="",t.sequenceSearchText=""})),Object(d["a"])($e,p["L"],(function(t){t.episodes=[],t.currentEpisode=null})),Object(d["a"])($e,p["We"],(function(t,e){var s=e.entityId,n=(e.taskId,e.previewId),i=e.taskMap,a=t.shotMap[s];a&&(a.preview_file_id=n,a.tasks.forEach((function(t){var e=i[t];e.entity.preview_file_id=n})))})),Object(d["a"])($e,p["af"],(function(t,e){t.shotListScrollPosition=e})),Object(d["a"])($e,p["Ye"],(function(t,e){t.sequenceListScrollPosition=e})),Object(d["a"])($e,p["Me"],(function(t,e){t.episodeListScrollPosition=e})),Object(d["a"])($e,p["ne"],(function(t,e){t.shotSelectionGrid[0]&&t.shotSelectionGrid[e.x]&&(t.shotSelectionGrid[e.x][e.y]=!1)})),Object(d["a"])($e,p["l"],(function(t,e){t.shotSelectionGrid[0]&&t.shotSelectionGrid[e.x]&&(t.shotSelectionGrid[e.x][e.y]=!0)})),Object(d["a"])($e,p["N"],(function(t,e){var s=JSON.parse(JSON.stringify(t.shotSelectionGrid));t.shotSelectionGrid=Object(tt["c"])(s)})),Object(d["a"])($e,p["Wd"],(function(t,e){var s=t.shotMap[e.entity_id];s&&e&&(e=Ye.populateTask(e,s),s.tasks.push(e),o.a.set(s.validations,e.task_type_id,e.id))})),Object(d["a"])($e,p["xb"],(function(t,e){var s=t.displayedShots.find((function(t){return t.id===e.entity_id}));if(s){var n=JSON.parse(JSON.stringify(s.validations));delete n[e.task_type_id],delete s.validations,o.a.set(s,"validations",n);var i=s.tasks.findIndex((function(t){return t===e.id}));s.tasks.splice(i,1)}})),Object(d["a"])($e,p["S"],(function(t,e){e.forEach((function(e){if(e){var s=t.shotMap[e.entity_id];if(s){var n=We({},s.validations);o.a.set(n,e.task_type_id,e.id),delete s.validations,o.a.set(s,"validations",n)}}}))})),Object(d["a"])($e,p["m"],(function(t,e){var s=JSON.parse(JSON.stringify(t.shotSelectionGrid));e.forEach((function(t){s[0]&&s[t.x]&&(s[t.x][t.y]=!0)})),t.shotSelectionGrid=s})),Object(d["a"])($e,p["Ke"],(function(t,e){e&&(t.currentEpisode=t.episodeMap[e])})),Object(d["a"])($e,p["Oe"],(function(t,e){var s={};e.all&&Object.keys(e.all).forEach((function(t){"all"===t||e.all[t].name||(s[t]=!0)})),t.episodeStats=e,t.episodeValidationColumns=Object.keys(s)})),Object(d["a"])($e,p["R"],(function(t,e){var s=e.taskMap,n=e.taskStatusMap;t.sequenceStats=Object(et["a"])(Ke.shots,"sequence_id",n,s)})),Object(d["a"])($e,p["Q"],(function(t,e){var s=e.taskMap,n=e.taskStatusMap;t.episodeStats=Object(et["a"])(Ke.shots,"episode_id",n,s)})),Object(d["a"])($e,p["b"],(function(t,e){t.episodes.push(e);var s=Object(f["c"])(t.episodes);t.episodeMap[e.id]=e,t.episodes=s,t.displayedEpisodes.push(e),t.displayedEpisodes=Object(f["c"])(t.displayedEpisodes),t.episodeIndex=Object(st["b"])(s),t.displayedEpisodesLength=s.length})),Object(d["a"])($e,p["rf"],(function(t,e){Object.assign(t.episodeMap[e.id],e),t.episodeIndex=Object(st["d"])(t.episodes)})),Object(d["a"])($e,p["je"],(function(t,e){delete t.episodeMap[e.id],t.episodes=Object(U["e"])(t.episodes,e),t.displayedEpisodes=Object(U["e"])(t.displayedEpisodes,e),t.episodeIndex=Object(st["b"])(t.episodes)})),Object(d["a"])($e,p["n"],(function(t,e){t.sequences.push(e);var s=Object(f["i"])(t.sequences);if(t.sequenceMap[e.id]=e,e.parent_id){var n=t.episodeMap[e.parent_id];n&&Object.assign(e,{episode_id:n.id,episode_name:n.name})}t.sequences=s,t.displayedSequences.push(e),t.displayedSequences=Object(f["i"])(t.displayedSequences),t.sequenceIndex=Object(st["d"])(s),t.displayedSequencesLength=s.length})),Object(d["a"])($e,p["vf"],(function(t,e){Object.assign(t.sequenceMap[e.id],e),t.sequenceIndex=Object(st["d"])(t.sequences)})),Object(d["a"])($e,p["oe"],(function(t,e){delete t.sequenceMap[e.id],t.sequences=Object(U["e"])(t.sequences,e),t.displayedSequences=Object(U["e"])(t.displayedSequences,e),t.sequenceIndex=Object(st["d"])(t.sequences)})),Object(d["a"])($e,p["o"],(function(t,e){e.taskTypeMap;var s=e.taskMap,n=e.personMap,i=e.production,a=e.shot,o=[],r={},c=0;a.project_name=i.name,a.production_id=i.id,a.tasks.forEach((function(t){Ye.populateTask(t,a,i),c+=t.duration,t.episode_id=a.episode_id,s[t.id]=t,r[t.task_type_id]=t.id,o.push(t.id),t.assignees.length>1&&(t.assignees=t.assignees.sort((function(t,e){return n[t].name.localeCompare(n[e])})))})),a.tasks=o,a.validations=r,a.timeSpent=c,Ke.shots.push(a),Ke.shots=Object(f["j"])(Ke.shots),t.shotMap[a.id]=a,t.displayedShots.push(a),t.displayedShots=Object(f["j"])(t.displayedShots),t.displayedShotsLength=Ke.shots.length,t.shotFilledColumns=Object(U["a"])(t.displayedShots);var d=t.displayedShots.length,u=t.nbValidationColumns;t.shotSelectionGrid=Object(tt["b"])(d,u),t.shotMap[a.id]=a})),Object(d["a"])($e,p["wf"],(function(t,e){Object.assign(t.shotMap[e.id],e),Ke.shotIndex=Object(st["e"])(Ke.shots)})),Object(d["a"])($e,p["pe"],(function(t,e){Ke.shots=Object(U["e"])(Ke.shots,e),t.displayedShots=Object(U["e"])(t.displayedShots,e),delete t.shotMap[e.id],e.timeSpent&&(t.displayedShotsTimeSpent-=e.timeSpent),e.nb_frames&&(t.displayedShotsFrames-=e.nb_frames)})),Object(d["a"])($e,p["t"],(function(t,e){e.canceled=!0})),Object(d["a"])($e,p["ue"],(function(t){Object.assign(t,We({},Qe)),Ke.shots=[],Ke.result=[],Ke.shotIndex={}})),$e),es={state:Je,getters:Xe,actions:Ze,mutations:ts},ss=s("e07d");o.a.use(r["a"]);var ns={assetTypes:O,assets:ht,breakdown:wt,customActions:$t,login:Gt,main:ee,people:j["a"],playlists:Ae,productions:X,news:pe,notifications:Oe,schedule:Ue,shots:es,tasks:F,taskTypes:x["a"],taskStatus:ss["a"],user:Se["a"]};e["a"]=new r["a"].Store({getters:n,strict:!0,modules:ns})},"440f":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("main.csv.import_title"))+"\n      ")]),s("p",{staticClass:"description",on:{submit:function(t){t.preventDefault()}}},[t._v("\n        "+t._s(t.$t("main.csv.required_fields"))+"\n        "),s("ul",t._l(t.columns,(function(e){return s("li",{key:e},[t._v("\n            "+t._s(e)+"\n          ")])})),0)]),s("p",[t._v("\n        "+t._s(t.$t("main.csv.select_file"))+"\n      ")]),s("file-upload",{on:{fileselected:t.onFileSelected}}),s("modal-footer",{attrs:{"error-text":t.$t("main.csv.error_upload"),"is-loading":t.isLoading,"is-disabled":void 0===t.formData,"is-error":t.isError},on:{confirm:t.onConfirmClicked,cancel:function(e){return t.$emit("cancel")}}})],1)])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("d065"),c=s("4085"),d=s("d5c9");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p={name:"import-people-modal",mixins:[r["a"]],components:{FileUpload:c["a"],ModalFooter:d["a"]},data:function(){return{formData:null}},props:{active:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},mounted:function(){this.formData=null},computed:l({},Object(o["c"])([])),methods:l({},Object(o["b"])([]),{onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},onConfirmClicked:function(){this.$emit("confirm")}}),watch:{}},f=p,h=(s("592c"),s("2877")),m=Object(h["a"])(f,n,i,!1,null,"7396ddf8",null);e["a"]=m.exports},4663:function(t,e,s){},4678:function(t,e,s){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=a(t);return s(e)}function a(t){var e=n[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}i.keys=function(){return Object.keys(n)},i.resolve=a,t.exports=i,i.id="4678"},4706:function(t,e,s){"use strict";var n=s("d8df"),i=s.n(n);i.a},"48c6":function(t,e,s){"use strict";s("6762"),s("2fdb");var n=s("db82"),i=s.n(n),a=s("4360"),o=s("9fb0"),r={logIn:function(t,e,s){i.a.post("/api/auth/login").send({email:t,password:e}).end((function(t,e){if(t)e.body.default_password&&(t.default_password=e.body.default_password,t.token=e.body.token),s(t);else if(e.body.login){var n=e.body.user,i=e.body.ldap;a["a"].commit(o["U"],{isLdap:i}),s(null,n)}else a["a"].commit(o["If"]),s(new Error("Login failed"))}))},logout:function(t){i.a.get("/api/auth/logout").end((function(e,s){e&&(console.error(e),t(e)),a["a"].commit(o["Jf"]),t()}))},resetPassword:function(t){return new Promise((function(e,s){i.a.post("/api/auth/reset-password").send({email:t}).end((function(t,n){t?s(t):e()}))}))},resetChangePassword:function(t,e,s){return new Promise((function(n,a){i.a.put("/api/auth/reset-password").send({token:t,password:e,password2:s}).end((function(t,e){t?a(t):n()}))}))},isServerLoggedIn:function(t){i.a.get("/api/auth/authenticated").end((function(e,s){if(e&&s&&[401,422].includes(s.statusCode))a["a"].commit(o["If"]),t(null);else if(e)a["a"].commit(o["If"]),t(e);else if(s&&null===s.body)a["a"].commit(o["If"]),t(e);else{var n=s.body.user,i=s.body.organisation||{},r=s.body.ldap;i.use_original_file_name=i.use_original_file_name?"true":"false",a["a"].commit(o["Te"],i),a["a"].commit(o["Hf"],n),t(null,r)}}))},requireAuth:function(t,e,s){var n=function(e){a["a"].state.user.isAuthenticated?(a["a"].commit(o["U"],{isLdap:e}),s()):a["a"].dispatch("getOrganisation").then((function(){s({path:"/login",query:{redirect:t.fullPath}})})).catch((function(e){console.error(e),s({path:"/login",query:{redirect:t.fullPath}})}))};null===a["a"].state.user.user?r.isServerLoggedIn((function(e,i){e?s({path:"/server-down",query:{redirect:t.fullPath}}):n(i)})):n()},isPasswordValid:function(t,e){return t.length>6&&t===e}};e["a"]=r},"49b6":function(t,e,s){"use strict";var n=s("6ac8"),i=s.n(n);i.a},"49c1":function(t,e,s){},"49c3":function(t,e,s){},"4af4":function(t,e,s){"use strict";var n=s("7e03"),i=s.n(n);i.a},"4ca5":function(t,e,s){"use strict";var n=s("d949"),i=s.n(n);i.a},"4cb5":function(t,e,s){},"4d04":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"wrapper",staticClass:"flexrow search-field-wrapper",on:{click:t.focus}},[s("div",{staticClass:"flexrow-item"},[s("search-icon",{staticClass:"search-icon"})],1),s("div",{staticClass:"flexrow-item search-field"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"input",staticClass:"search-input",attrs:{type:"text",placeholder:t.placeholder},on:{input:t.onSearchChange,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSaveClicked(e)},focus:t.setFocusedStyle,blur:t.unsetFocusedStyle}})]),s("div",{staticClass:"flexrow-item erase-search"},[s("span",{staticClass:"tag",on:{click:t.clearSearch}},[t._v("\n      x\n    ")])]),t.canSave?s("div",{staticClass:"flexrow-item save-search"},[s("button",{staticClass:"button save-button",on:{click:t.onSaveClicked}},[s("save-icon",{staticClass:"icon is-small only-icon"})],1)]):t._e()])},i=[],a=s("0a35"),o={name:"search-field",data:function(){return{}},props:{placeholder:{type:String,default:""},canSave:{type:Boolean,default:!1}},components:{SaveIcon:a["z"],SearchIcon:a["A"]},computed:{},methods:{onSearchChange:function(){this.$emit("change",this.$refs.input.value)},onSaveClicked:function(){var t=this.$refs.input.value.trim();t.length>0&&this.canSave&&this.$emit("save",t)},getValue:function(t){return this.$refs.input.value},setValue:function(t){this.$refs.input.value=t},focus:function(){this.$refs.input.focus()},clearSearch:function(){this.setValue(""),this.onSearchChange()},setFocusedStyle:function(){this.$refs["wrapper"].className="flexrow search-field-wrapper focused"},unsetFocusedStyle:function(){this.$refs["wrapper"].className="flexrow search-field-wrapper"}}},r=o,c=(s("9433"),s("2877")),d=Object(c["a"])(r,n,i,!1,null,"521b6ce8",null);e["a"]=d.exports},"4e2d":function(t,e,s){},"4e8d":function(t,e,s){},"4e91":function(t,e,s){},"4f18":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("8e6e"),s("ac6a"),s("456d");var n=s("bd86"),i=s("2f62");function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(s,!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var r={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:o({},Object(i["c"])(["organisation"])),methods:{formatDuration:function(t){return t?(t/60/this.organisation.hours_by_day).toLocaleString("fullwide",{maximumFractionDigits:1}):0},formatBoolean:function(t){return t?this.$t("main.yes"):this.$t("main.no")}}}},"504d":function(t,e,s){"use strict";var n=s("b244"),i=s.n(n);i.a},"52ad":function(t,e,s){"use strict";s("8e6e"),s("456d"),s("8615"),s("20d6"),s("ac6a"),s("7514");var n,i=s("bd86"),a=(s("6b54"),s("7f7f"),s("ba4c")),o=s.n(a),r=s("ce6b"),c=s("7930"),d=s("6185"),u=s("66e7"),l=s("2229"),p=s("2017"),f=s("ca76"),h=s("e07d"),m=s("9fb0");function _(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function v(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?_(s,!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):_(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var b={addAdditionalInformation:function(t){if(t&&(t.first_name&&t.last_name?(t.name="".concat(t.first_name," ").concat(t.last_name),t.initials="".concat(t.first_name[0]).concat(t.last_name[0])):t.first_name?(t.name=t.first_name,t.initials=t.first_name[0]):t.last_name?(t.name=t.last_name,t.initials=t.last_name[0]):t.email?(t.name=t.email,t.initials=t.email[0]):t.initials="NN",o.a.set(t,"initials",t.initials.toUpperCase()),t.color=c["a"].fromString(t.name),t.has_avatar&&!t.uniqueHash)){var e=Math.random().toString(36).substring(7);o.a.set(t,"uniqueHash",e),t.avatarPath="/api/pictures/thumbnails/persons/".concat(t.id)+".png"}return t},getTaskStatus:function(t){return h["a"].state.taskStatusMap[t]}},y={organisation:{name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:"false"},people:[],displayedPeople:[],peopleIndex:{},personMap:{},isPeopleLoading:!1,isPeopleLoadingError:!0,isImportPeopleModalShown:!1,isImportPeopleLoading:!1,isImportPeopleLoadingError:!1,isEditModalShown:!1,isEditLoading:!1,isEditLoadingError:!1,personToEdit:{role:"user"},isDeleteModalShown:!1,isDeleteLoading:!1,isDeleteLoadingError:!1,personToDelete:void 0,personCsvFormData:void 0,person:{},personTasks:[],displayedPersonTasks:[],displayedPersonDoneTasks:[],personTasksIndex:{},personTasksSearchText:"",personTaskSelectionGrid:{},personTaskSearchQueries:[],personTasksScrollPosition:0,timesheet:{},personTimeSpentMap:{},personTimeSpentTotal:0},g=v({},y),k={organisation:function(t){return t.organisation},people:function(t){return t.people},displayedPeople:function(t){return t.displayedPeople},peopleIndex:function(t){return t.peopleIndex},personMap:function(t){return t.personMap},isPeopleLoading:function(t){return t.isPeopleLoading},isPeopleLoadingError:function(t){return t.isPeopleLoadingError},isImportPeopleModalShown:function(t){return t.isImportPeopleModalShown},isImportPeopleLoading:function(t){return t.isImportPeopleLoading},isImportPeopleLoadingError:function(t){return t.isImportPeopleLoadingError},isDeleteModalShown:function(t){return t.isDeleteModalShown},isDeleteLoading:function(t){return t.isDeleteLoading},isDeleteLoadingError:function(t){return t.isDeleteLoadingError},personToDelete:function(t){return t.personToDelete},isEditModalShown:function(t){return t.isEditModalShown},isEditLoading:function(t){return t.isEditLoading},isEditLoadingError:function(t){return t.isEditLoadingError},personToEdit:function(t){return t.personToEdit},personCsvFormData:function(t){return t.personCsvFormData},displayedPersonTasks:function(t){return t.displayedPersonTasks},displayedPersonDoneTasks:function(t){return t.displayedPersonDoneTasks},personTasksSearchText:function(t){return t.personTasksSearchText},personTaskSearchQueries:function(t){return t.personTaskSearchQueries},personTaskSelectionGrid:function(t){return t.personTaskSelectionGrid},personTasksScrollPosition:function(t){return t.personTasksScrollPosition},getPerson:function(t,e){return function(e){return t.personMap[e]}},getPersonOptions:function(t){return t.people.map((function(t){return{label:"".concat(t.first_name," ").concat(t.last_name),value:t.id}}))},timesheet:function(t){return t.timesheet},personTimeSpentMap:function(t){return t.personTimeSpentMap},personTimeSpentTotal:function(t){return t.personTimeSpentTotal}},O={getOrganisation:function(t){var e=t.commit;return r["a"].getOrganisation().then((function(t){e(m["Te"],t)}))},saveOrganisation:function(t,e){var s=t.commit;return new Promise((function(t,n){e.id=g.organisation.id,r["a"].updateOrganisation(e).then((function(e){s(m["Te"],e),t()})).catch(n)}))},uploadOrganisationLogo:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){var a=n.organisation.id;r["a"].postOrganisationLogo(a,e).then((function(e){s(m["Te"],{has_avatar:!0}),t()})).catch(i)}))},loadPeople:function(t,e){var s=t.commit;t.state;s(m["Tc"]),r["a"].getPeople((function(t,n){t?s(m["Sc"]):s(m["Rc"],n.map((function(t){return t.departments=t.departments||"",t}))),e&&e(t)}))},loadPerson:function(t,e){var s=t.commit;t.state;r["a"].getPerson(e,(function(t,e){t?console.error(t):e.email&&(s(m["Xb"],e),s(m["Vb"],e))}))},newPerson:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){s(m["Xb"],e),r["a"].newPerson(n.personToEdit).then((function(e){s(m["sc"]),t(e)})).catch((function(t){s(m["Wb"]),i(t)}))}))},newPersonAndInvite:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){s(m["Xb"],e),r["a"].newPerson(n.personToEdit).then(r["a"].invitePerson).then((function(){s(m["sc"]),t()})).catch((function(t){s(m["Wb"]),i(t)}))}))},invitePerson:function(t){t.commit;var e=t.state;return r["a"].invitePerson(e.personToEdit)},editPerson:function(t,e){var s=t.commit,n=t.state;return new Promise((function(t,i){s(m["Xb"],e),r["a"].updatePerson(n.personToEdit).then((function(e){s(m["Vb"],n.personToEdit),s(m["sc"]),t(e)})).catch((function(t){s(m["Wb"]),i(t)}))}))},deletePeople:function(t,e){var s=t.commit,n=t.state;s(m["kb"]),r["a"].deletePerson(n.personToDelete.id,(function(t,i){t?s(m["jb"]):(s(m["ib"],n.personToDelete),s(m["rc"])),e&&e(t)}))},uploadPersonFile:function(t,e){var s=t.commit,n=t.state;s(m["yc"]),r["a"].postCsv(n.personCsvFormData,(function(t){t&&s(m["xc"]),s(m["wc"]),e&&e(t)}))},loadPersonTasks:function(t,e){var s=t.commit,n=(t.state,t.rootGetters),i=e.personId,a=(e.forced,e.date),o=e.callback,c=n.userFilters,d=n.taskTypeMap;s(m["Vc"],{personId:i,tasks:[],userFilters:c,taskTypeMap:d}),s(m["Uc"],[]),r["a"].getPersonTasks(i,(function(t,e){t&&(e=[]),r["a"].getPersonDoneTasks(i,(function(t,n){t&&(n=[]),s(m["Uc"],n),r["a"].getTimeSpents(i,a,(function(t,n){t&&(n=[]),s(m["be"],n),s(m["Vc"],{personId:i,tasks:e,userFilters:c,taskTypeMap:d}),o&&o(t)}))}))}))},loadAggregatedPersonTimeSpents:function(t,e){t.commit,t.state,t.rootGetters;var s=e.personId,n=e.detailLevel,i=e.year,a=e.month,o=e.week,c=e.day;return new Promise((function(t,e){r["a"].getAggregatedPersonTimeSpents(s,n,i,a,o,c).then((function(e){t(e)})).catch((function(t){return e(t)}))}))},showPersonImportModal:function(t,e){var s=t.commit;t.state;s(m["if"])},hidePersonImportModal:function(t,e){var s=t.commit;t.state;s(m["tc"])},showPersonEditModal:function(t,e){var s=t.commit;t.state;s(m["hf"],e)},hidePersonEditModal:function(t,e){var s=t.commit;t.state;s(m["sc"],e)},showPersonDeleteModal:function(t,e){var s=t.commit;t.state;s(m["gf"],e)},hidePersonDeleteModal:function(t,e){var s=t.commit;t.state;s(m["rc"],e)},setPersonTasksSearch:function(t,e){var s=t.commit;t.state;s(m["Ve"],e)},savePersonTasksSearch:function(t,e){var s=t.commit;t.rootGetters;return new Promise((function(t,n){var i=g.personTaskSearchQueries.find((function(t){return t.name===e}));i?t():r["a"].createFilter("persontasks",e,e,null,null,(function(e,i){s(m["De"],{searchQuery:i}),e?n(e):t(i)}))}))},removePersonTasksSearch:function(t,e){var s=t.commit;t.rootGetters;return new Promise((function(t,n){r["a"].removeFilter(e,(function(i){s(m["le"],{searchQuery:e}),i?n(i):t()}))}))},setTimeSpent:function(t,e){var s=t.commit,n=e.personId,i=e.taskId,a=e.date,o=e.duration;return new Promise((function(t,e){r["a"].setTimeSpent(i,n,a,o,(function(n,i){n?e(n):(s(m["cf"],i),t())}))}))},setPersonTasksScrollPosition:function(t,e){var s=t.commit;s(m["Ue"],e)},loadTimesheets:function(t,e){var s=t.commit,n=e.detailLevel,i=e.year,a=e.month;return new Promise((function(t,e){var o=1===a.length?"0".concat(parseInt(a)+1):"".concat(a),c=r["a"].getMonthTable;"day"===n&&(c=r["a"].getDayTable),"week"===n&&(c=r["a"].getWeekTable),c(i,o).then((function(e){s(m["Zd"],e),t()})).catch(e)}))},peopleSearchChange:function(t,e){var s=t.commit;s(m["Yd"],e)}},S=(n={},Object(i["a"])(n,m["Tc"],(function(t){t.isPeopleLoading=!0,t.isPeopleLoadingError=!1,t.personMap={}})),Object(i["a"])(n,m["Sc"],(function(t){t.isPeopleLoading=!1,t.isPeopleLoadingError=!0})),Object(i["a"])(n,m["Rc"],(function(t,e){t.isPeopleLoading=!1,t.isPeopleLoadingError=!1,t.people=Object(l["e"])(e),t.displayedPeople=t.people,t.people.forEach((function(e){e=b.addAdditionalInformation(e),t.personMap[e.id]=e})),t.peopleIndex=Object(p["c"])(t.people)})),Object(i["a"])(n,m["kb"],(function(t){t.isDeleteLoading=!0,t.isDeleteLoadingError=!1})),Object(i["a"])(n,m["ib"],(function(t,e){if(t.isDeleteLoading=!1,t.personToDelete=void 0,e){var s=t.people.findIndex((function(t){return t.id===e.id}));s>=0&&t.people.splice(s,1),delete t.personMap[e.id]}})),Object(i["a"])(n,m["jb"],(function(t){t.isDeleteLoading=!1,t.isDeleteLoadingError=!0})),Object(i["a"])(n,m["gf"],(function(t,e){t.isDeleteModalShown=!0,t.isDeleteLoadingError=!1,t.isDeleteLoading=!1,t.personToDelete=t.people.find((function(t){return t.id===e}))})),Object(i["a"])(n,m["rc"],(function(t,e){t.isDeleteModalShown=!1,t.personToDelete=void 0})),Object(i["a"])(n,m["Xb"],(function(t,e){t.isEditLoading=!0,t.isEditLoadingError=!1,t.personToEdit=Object.assign(t.personToEdit,e)})),Object(i["a"])(n,m["Od"],(function(t){})),Object(i["a"])(n,m["Vb"],(function(t,e){t.isEditLoading=!1,t.isEditLoadingError=!1;var s=v({},e);s=b.addAdditionalInformation(s);var n=t.people.findIndex((function(t){return t.id===s.id}));s.name&&(n>=0?(t.personMap[t.personToEdit.id]=s,delete t.people[n],t.people[n]=t.personMap[t.personToEdit.id]):t.personMap[s.id]||(t.people.push(s),t.personMap[s.id]=s),t.people=Object(l["e"])(t.people),t.displayedPeople=t.people,t.peopleIndex=Object(p["c"])(t.people),t.personToEdit={role:"user"})})),Object(i["a"])(n,m["Wb"],(function(t){t.isEditLoading=!1,t.isEditLoadingError=!0})),Object(i["a"])(n,m["yc"],(function(t,e){t.isImportPeopleLoading=!0,t.isImportPeopleLoadingError=!1})),Object(i["a"])(n,m["wc"],(function(t,e){t.isImportPeopleLoading=!1,t.isImportPeopleLoadingError=!1})),Object(i["a"])(n,m["xc"],(function(t){t.isImportPeopleLoading=!1,t.isImportPeopleLoadingError=!0})),Object(i["a"])(n,m["hf"],(function(t,e){t.isEditModalShown=!0,t.isEditLoadingError=!1,t.isEditLoading=!1,t.personToEdit=void 0!==e?t.people.find((function(t){return t.id===e})):{first_name:"",last_name:"",phone:"",email:"",role:"user"}})),Object(i["a"])(n,m["sc"],(function(t){t.isEditModalShown=!1,t.personToEdit={}})),Object(i["a"])(n,m["if"],(function(t){t.isImportPeopleModalShown=!0,t.isImportPeopleLoading=!1,t.isImportPeopleLoadingError=!1})),Object(i["a"])(n,m["tc"],(function(t){t.isImportPeopleModalShown=!1})),Object(i["a"])(n,m["ae"],(function(t,e){t.personCsvFormData=e})),Object(i["a"])(n,m["xf"],(function(t,e){var s=t.personMap[e];if(s){var n=Math.random().toString(36).substring(7);s.has_avatar=!0,o.a.set(s,"uniqueHash",n),s.avatarPath="/api/pictures/thumbnails/persons/".concat(s.id,".png")}})),Object(i["a"])(n,m["Vc"],(function(t,e){var s=e.personId,n=e.tasks,i=e.userFilters,a=e.taskTypeMap;t.person=t.personMap[s],n.forEach(u["c"]),n.forEach((function(t){var e=b.getTaskStatus(t.task_status_id);t.taskStatus=e}));for(var o={},r=0;r<n.length;r++)o[r]={0:!1};t.personTaskSelectionGrid=o,t.personTasks=Object(l["l"])(n,a),t.personTasksIndex=Object(p["g"])(n);var c=Object(f["d"])(t.personTasksSearchText),d=Object(p["h"])(t.personTasksIndex,c);t.displayedPersonTasks=d||t.personTasks,i.persontasks&&i.persontasks.all?t.personTaskSearchQueries=i.persontasks.all:t.personTaskSearchQueries=[]})),Object(i["a"])(n,m["Uc"],(function(t,e){e.forEach(u["c"]),t.displayedPersonDoneTasks=e})),Object(i["a"])(n,m["Ve"],(function(t,e){t.displayedPersonTasks=[];var s=Object(f["d"])(e),n=Object(p["h"])(t.personTasksIndex,s);t.personTasksSearchText=e,t.displayedPersonTasks=n||t.personTasks})),Object(i["a"])(n,m["De"],(function(t,e){var s=e.searchQuery;t.personTaskSearchQueries.push(s),t.personTaskSearchQueries=Object(l["c"])(t.personTaskSearchQueries)})),Object(i["a"])(n,m["le"],(function(t,e){var s=e.searchQuery,n=t.personTaskSearchQueries.findIndex((function(t){return t.name===s.name}));n>=0&&t.personTaskSearchQueries.splice(n,1)})),Object(i["a"])(n,m["Vd"],(function(t,e){var s=e.comment,n=e.taskId,i=t.personTasks.find((function(t){return t.id===n}));if(i){var a=b.getTaskStatus(s.task_status_id);Object.assign(i,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color}),t.personTasksIndex=Object(p["g"])(t.personTasks)}})),Object(i["a"])(n,m["ne"],(function(t,e){t.personTaskSelectionGrid[e.x]&&(t.personTaskSelectionGrid[e.x][0]=!1)})),Object(i["a"])(n,m["l"],(function(t,e){t.personTaskSelectionGrid[e.x]&&(t.personTaskSelectionGrid[e.x][0]=!0)})),Object(i["a"])(n,m["N"],(function(t,e){t.personTaskSelectionGrid=Object(d["c"])(t.personTaskSelectionGrid)})),Object(i["a"])(n,m["Zd"],(function(t,e){t.timesheet=e})),Object(i["a"])(n,m["cf"],(function(t,e){t.person.id===e.person_id&&(t.personTimeSpentMap[e.task_id]=e),t.personTimeSpentTotal=Object.values(t.personTimeSpentMap).reduce((function(t,e){return e.duration+t}),0)/60})),Object(i["a"])(n,m["be"],(function(t,e){var s={};e.forEach((function(t){s[t.task_id]=t})),t.personTimeSpentMap=s,t.personTimeSpentTotal=Object.values(t.personTimeSpentMap).reduce((function(t,e){return e.duration+t}),0)/60})),Object(i["a"])(n,m["Ue"],(function(t,e){t.personTasksScrollPosition=e})),Object(i["a"])(n,m["Yd"],(function(t,e){if(e){var s=Object(f["d"])(e);t.displayedPeople=Object(p["h"])(t.peopleIndex,s)}else t.displayedPeople=t.people})),Object(i["a"])(n,m["Mf"],(function(t,e){var s=t.personMap[e.id];s&&(Object.assign(s,e),b.addAdditionalInformation(s))})),Object(i["a"])(n,m["Te"],(function(t,e){Object.assign(t.organisation,e),t.organisation=v({},t.organisation)})),Object(i["a"])(n,m["ue"],(function(t,e){Object.assign(t,v({},y))})),n);e["a"]={state:g,getters:k,actions:O,mutations:S,helpers:b}},5306:function(t,e,s){},"53e5":function(t,e,s){},"544d":function(t,e,s){"use strict";var n=s("0506"),i=s.n(n);i.a},"55ce":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-queries"},t._l(t.queries,(function(e){return s("span",{key:e.id,staticClass:"tag",on:{click:function(s){return t.changeSearch(s,e)}}},[t._v("\n    "+t._s(e.name)+"\n    "),s("button",{staticClass:"delete",on:{click:function(s){return s.preventDefault(),t.removeSearch(e)}}})])})),0)},i=[],a={name:"search-query-list",props:{queries:{type:Array,default:function(){return[]}}},components:{},computed:{},methods:{changeSearch:function(t,e){"delete"!==t.target.className&&this.$emit("changesearch",e)},removeSearch:function(t){this.$emit("removesearch",t)}}},o=a,r=(s("a068"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,null,null);e["a"]=c.exports},"56a0":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[t.label.length>0?s("label",{staticClass:"label"},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),s("div",{staticClass:"status-combo"},[s("div",{staticClass:"flexrow",on:{click:t.toggleStatusList}},[s("div",{staticClass:"selected-status-line flexrow-item"},[s("span",{staticClass:"tag",style:{background:t.backgroundColor(t.currentStatus),color:t.color(t.currentStatus)}},[t._v("\n          "+t._s(t.currentStatus.short_name)+"\n        ")])]),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),t.showStatusList?s("div",{ref:"select",staticClass:"select-input"},t._l(t.taskStatusList,(function(e){return s("div",{key:e.id,staticClass:"status-line",on:{click:function(s){return t.selectStatus(e)}}},[s("span",{staticClass:"tag",style:{background:t.backgroundColor(e),color:t.color(e)}},[t._v("\n          "+t._s(e.short_name)+"\n        ")])])})),0):t._e()])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("0a35"),c=s("7930");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var l={name:"combobox-status",components:{ChevronDownIcon:r["d"]},data:function(){return{showStatusList:!1}},props:{label:{default:"",type:String},taskStatusList:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){this.selectedTaskStatus=this.taskStatus},computed:u({},Object(o["c"])(["isDarkTheme","taskStatusMap"]),{currentStatus:function(){return this.value?this.taskStatusMap[this.value]:this.taskStatusList[0]}}),methods:{selectStatus:function(t){this.$emit("input",t.id),this.showStatusList=!1},backgroundColor:function(t){return"todo"!==t.short_name||this.isDarkTheme?"todo"===t.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?c["a"].darkenColor(t.color):t.color:"#ECECEC"},color:function(t){return"todo"!==t.short_name||this.isDarkTheme?"white":"#333"},toggleStatusList:function(){this.showStatusList=!this.showStatusList}}},p=l,f=(s("3cda"),s("2877")),h=Object(f["a"])(p,n,i,!1,null,"5a8cecca",null);e["a"]=h.exports},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("ba4c"),i=s.n(n),a=s("31bd"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{theme:!0,dark:t.isDarkTheme}},[t.user&&t.isDataLoading?s("div",{staticClass:"has-text-centered mt2 loading-info"},[s("span",[t._v(t._s(t.$t("main.loading_data"))+"...")]),s("spinner",{staticClass:"mt2"})],1):s("router-view")],1)},r=[],c=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),d=s("2f62"),u=s("be83");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var f={name:"app",components:{Spinner:u["a"]},computed:p({},Object(d["c"])(["assetMap","assetTypeMap","currentProduction","episodeMap","isCurrentUserAdmin","isDataLoading","isDarkTheme","isLoginLoading","isSavingCommentPreview","route","personMap","productionMap","sequenceMap","shotMap","taskMap","taskStatusMap","taskTypeMap","user"])),mounted:function(){"true"!==localStorage.getItem("dark-theme")||this.isDarkTheme?(document.documentElement.style.background="#FFF",document.body.style.background="#FFF"):(this.$store.commit("TOGGLE_DARK_THEME"),document.documentElement.style.background="#36393F",document.body.style.background="#36393F")},metaInfo:{link:[{rel:"icon",href:"/static/favicon.ico"}]},methods:p({},Object(d["b"])(["getOrganisation","getTask","loadAsset","loadAssetType","loadComment","loadEpisode","loadPerson","loadPersonTasks","loadProduction","loadSequence","loadShot","loadTaskStatus","loadTaskType","refreshPreview","refreshMetadataDescriptor","removeAsset"]),{onAssignation:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=t.person_id,n=[t.task_id];e?this.$store.commit("ASSIGN_TASKS",{selectedTaskIds:n,personId:s}):this.$store.commit("UNASSIGN_TASKS",n),this.route.path.indexOf(t.person_id)>0&&this.loadPersonTasks({personId:t.person_id,forced:!0})}}),watch:{isDarkTheme:function(){this.isDarkTheme?(document.documentElement.style.background="#36393F",document.body.style.background="#36393F"):(document.documentElement.style.background="#FFF",document.body.style.background="#FFF")}},socket:{events:{"project:new":function(t){this.productionMap[t.project_id]||this.loadProduction(t.project_id)},"project:update":function(t){this.productionMap[t.project_id]&&this.loadProduction(t.project_id)},"project:delete":function(t){this.productionMap[t.project_id]&&this.$store.commit("REMOVE_PRODUCTION",{id:t.project_id})},"sequence:new":function(t){!this.sequenceMap[t.sequence_id]&&this.currentProduction&&this.currentProduction.id===t.project_id&&this.loadSequence(t.sequence_id)},"sequence:update":function(t){this.sequenceMap[t.sequence_id]&&this.loadSequence(t.sequence_id)},"sequence:delete":function(t){this.sequenceMap[t.sequence_id]&&this.$store.commit("REMOVE_SEQUENCE",{id:t.sequence_id})},"episode:new":function(t){!this.episodeMap[t.episode_id]&&this.currentProduction&&this.currentProduction.id===t.project_id&&this.loadEpisode(t.episode_id)},"episode:update":function(t){this.episodeMap[t.episode_id]&&this.loadEpisode(t.episode_id)},"episode:delete":function(t){this.episodeMap[t.episode_id]&&this.$store.commit("REMOVE_EPISODE",{id:t.episode_id})},"shot:new":function(t){var e=this;!this.shotMap[t.shot_id]&&this.currentProduction&&this.currentProduction.id===t.project_id&&setTimeout((function(){e.loadShot(t.shot_id)}),1e3)},"shot:update":function(t){this.shotMap[t.shot_id]&&this.loadShot(t.shot_id)},"shot:delete":function(t){this.shotMap[t.shot_id]&&this.$store.commit("REMOVE_SHOT",{id:t.shot_id})},"asset:new":function(t){var e=this;!this.assetMap[t.asset_id]&&this.currentProduction&&this.currentProduction.id===t.project_id&&setTimeout((function(){e.loadAsset(t.asset_id)}),1e3)},"asset:update":function(t){this.assetMap[t.asset_id]&&this.loadAsset(t.asset_id)},"asset:delete":function(t){this.assetMap[t.asset_id]&&this.$store.commit("REMOVE_ASSET",{id:t.asset_id})},"task-type:new":function(t){this.taskTypeMap[t.task_type_id]||this.loadTaskType(t.task_type_id)},"task-type:update":function(t){this.taskTypeMap[t.task_type_id]&&this.loadTaskType(t.task_type_id)},"task-type:delete":function(t){this.taskTypeMap[t.task_type_id]&&this.$store.commit("DELETE_TASK_TYPE_END",{id:t.task_type_id})},"task-status:new":function(t){this.taskStatusMap[t.task_status_id]||this.loadTaskStatus(t.task_status_id)},"task-status:update":function(t){this.taskStatusMap[t.task_status_id]&&this.loadTaskStatus(t.task_status_id)},"task-status:delete":function(t){this.taskStatusMap[t.task_status_id]&&this.$store.commit("DELETE_TASK_STATUS_END",{id:t.task_status_id})},"asset-type:new":function(t){this.assetTypeMap[t.asset_type_id]||this.loadAssetType(t.asset_type_id)},"asset-type:update":function(t){this.assetTypeMap[t.asset_type_id]&&this.loadAssetType(t.asset_type_id)},"asset-type:delete":function(t){this.assetTypeMap[t.asset_type_id]&&this.$store.commit("DELETE_ASSET_TYPE_END",{id:t.asset_type_id})},"person:new":function(t){this.personMap[t.person_id]||this.loadPerson(t.person_id)},"person:update":function(t){this.personMap[t.person_id]&&this.loadPerson(t.person_id)},"person:delete":function(t){var e=this.personMap[t.person_id];e&&(this.$store.commit("DELETE_PEOPLE_START",e),this.$store.commit("DELETE_PEOPLE_END",e))},"task:assign":function(t){this.onAssignation(t)},"task:unassign":function(t){this.onAssignation(t,!1)},"comment:new":function(t){var e=t.comment_id;this.isSavingCommentPreview||this.loadComment({commentId:e})},"task:update":function(t){this.taskMap[t.task_id]&&this.getTask({taskId:t.task_id})},"metadata-descriptor:new":function(t){this.refreshMetadataDescriptor(t.metadata_descriptor_id)},"metadata-descriptor:update":function(t){this.refreshMetadataDescriptor(t.metadata_descriptor_id)},"metadata-descriptor:delete":function(t){this.$store.commit("DELETE_METADATA_DESCRIPTOR_END",{id:t.metadata_descriptor_id})},"organisation:update":function(t){this.isCurrentUserAdmin&&this.getOrganisation()}}}},h=f,m=(s("5c0b"),s("2877")),_=Object(m["a"])(h,o,r,!1,null,null,null),v=_.exports,b=s("a925"),y={assets:{cast_in:"Cast in",delete_error:"An error occured while deleting this asset. There are probably data linked to it. Are you sure this asset type has no task linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_fail:"Creation or edition failed, an error occured.",edit_success:"Asset {name} successfully edited.",edit_title:"Edit asset",empty_list:"There is no asset in the production. What about creating some?",empty_list_client:"There is no asset in this production.",new_asset:"Add an asset",new_assets:"Add assets",new_success:"Asset {name} successfully created.",no_cast_in:"This asset is not cast in any shot.",number:"asset | assets",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this asset.",tasks:"Asset tasks",title:"Assets",fields:{description:"Description",episode:"Ep.",name:"Name",production:"Prod",time_spent:"Time",type:"Type"}},asset_types:{all_asset_types:"All asset types",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this asset type. There are probably data linked to it. Are you sure this asset type has no asset linked to it?",edit_title:"Edit asset type",new_asset_type:"Add an asset type",number:"asset type | asset types",title:"Asset Types",production_title:"Asset Types Stats",fields:{name:"Name"}},breakdown:{all_assets:"All available assets",empty:"Empty casting",title:"Breakdown"},comments:{add_comment:"Add a comment...",add_checklist:"Add checklist",add_preview:"Attach preview",change_preview:"Change preview",empty_text:"This comment is empty",edit_title:"Edit comment",error:"An error occured while posting comment",no_file_attached:"No file attached",post_status:"Post comment",retake:"Retake",pin:"Pin",pinned:"Pinned",revision:"revision",unpin:"Unpin",validated:"Validated!",validation_required:"Validation Required",set_status_to:"Set status to",fields:{text:"text"}},custom_actions:{delete_text:"Are you sure you want to remove custom action {name} from your database?",delete_error:"An error occured while deleting this custom custom action.",edit_title:"Edit a custom action",new_custom_action:"Add a custom action",number:"custom action | custom actions",run_for_selection:"Run custom action for selected tasks:",title:"Custom Actions",fields:{name:"Name",url:"URL",entity_type:"Entity Type",is_ajax:"Use AJAX"},entity_types:{all:"All",shot:"Shot",asset:"Asset"}},episodes:{all_episodes:"All episodes",delete_error:"An error occured while deleting this episode. There are probably data linked to it. Are you sure this episode has no sequence linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_title:"Edit episode",empty_list:"There is no episode in the production. What about creating some?",empty_list_client:"There is no episode in this production.",new_episode:"New episode",number:"episode | episodes",title:"Episode Stats",fields:{name:"name",description:"description"}},login:{forgot_password:"Forgot password?",login:"Log in",login_failed:"Log in failed, please verify your credentials",login_page:"Cancel",reset_change_password:"Change password",reset_change_password_form_failed:"There is a problem with the password you gave. Please, verify that it is at least 7 chars long and that both passwords match.",reset_change_password_failed:"Changing password failed. Please, restart the whole procedure again.",reset_change_password_succeed:"Your password was changed successfully. Please, go back to the login page to use it.",reset_change_password_title:"Enter a new password",reset_password:"Reset Password",reset_password_failed:"Reset Password failed. Please verify your email.",reset_password_succeed:"Reset Password succeeded. Please check your inbox.",reset_password_title:"Enter your email to reset your password",title:"Log in to Kitsu",fields:{email:"Email",password:"Password",password2:"Password again"}},main:{about:"About",add:"add",all:"All",admin:"Admin",cancel:"Cancel",clear_selection:"Clear current selection",documentation:"Documentation",close:"Close",confirmation:"Confirm",confirmation_and_stay:"Confirm and stay",dark_theme:"Dark Theme",days_spent:"day spent | days spent",delete:"Delete",delete_all:"Delete all",delete_text:"Are you sure you want to remove {name} from your database?",edit:"Edit",empty_comment:"Empty comment",end_date:"End date",for:"For",go_productions:"Go to productions",history:"history",info:"Information",or:"or",no:"No",loading_data:"Loading data",loading_error:"An error occured while loading data.",logout:"Logout",modify:"Modify",minimize:"Minimize",maximize:"Maximize",nb_frames:"frame | frames",profile:"Profile",production:"Production",remove:"Remove",save:"Save",start_date:"Start date",sorted_by:"Tasks sorted by",studio:"Studio",user:"User",white_theme:"White Theme",yes:"Yes",csv:{export_file:"Export",error_upload:"An error occured while uploading your CSV file.",import_file:"Import",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:"}},menu:{assign_tasks:"Assign tasks",change_priority:"Change priority",change_status:"Change status",create_tasks:"Create tasks",delete_tasks:"Delete tasks",run_custom_action:"Run custom action",set_estimations:"Set estimations"},news:{all:"All",commented_on:"commented on",infos:"Infos",no_news:"There is no news for this production or for this filter.",only_comments:"Only comments",only_previews:"Only previews",set_preview_on:"set preview on",task_status:"Task status",task_type:"Task type",title:"News Feed"},not_found:{text:"There was something wrong with the link you clicked on, we encourage you to come back on the home page.",title:"Page not found... are your looking for something you deleted?"},notifications:{and_change_status:"and changed status to",assigned_you:"assigned you to",commented_on:"commented on",mention_you_on:"mentioned you on",no_notifications:"There is currently no notification for you for your current projects.",title:"Notifications",with_preview:"with a preview"},people:{active:"Active",add_member_to_team:"Add a member to the team: ",create_invite:"Create and send invitation",delete_error:"An error occured while deleting this person. There are probably data linked to it. Are you sure this person has no assignation or wrote no comment?",delete_text:"Are you sure you want to remove {personName} from your database?",edit_title:"Edit person",empty_team:"There is no one listed in the project team.",invite:"Send invitation",invite_error:"An error occured while sending the invitation",invite_success:"Invitation was successfully sent",new_person:"Add a new employee",no_task_assigned:"There are no running tasks assigned to you",persons:"person | persons",running_tasks:"Running tasks",select_person:"Select a person...",team:"Team",title:"People",unactive:"Unactive",csv:{import_file:"Import a .csv file",export_file:"Download as a .csv file",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:",error_upload:"An error occured while uploading your CSV file."},fields:{first_name:"First name",last_name:"Last name",email:"Email",phone:"Phone",role:"Role",old_password:"Current password",password:"New password",password_2:"New password (repeat)",active:"Active"},list:{name:"Name",email:"Email",phone:"Phone",role:"Role",active:"Active"},role:{admin:"Studio Manager",client:"Client",manager:"Supervisor",user:"CG Artist"}},playlists:{add_shots:"Add shots",add_sequence:"Add whole sequence",available_build:"Available builds",build_daily:"Daily pending",build_weekly:"All Pending",build_mp4:"Build .mp4",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this playlist.",download_zip:"Download .zip",edit_title:"Edit playlist",loading_error:"A server error occured. Playlists cannot be loaded.",new_playlist:"Add a playlist",no_build:"No build",no_playlist:"There is currently no playlist for this project.",no_preview:"No preview for this shot",no_selection:"Please select a playlist on the left.",no_sequence_for_episode:"There is no sequence for this episode",no_shot_for_production:"There is no shot for this production",no_shot_for_sequence:"There is no shot for this sequence",select_shot:"Please select a shot in the right column",select_playlist:"Please select a playlist in the left column",title:"Playlists",remove:"remove",fields:{name:"Name"}},productions:{current:"Selected production",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this production. There are probably data linked to it. Are you sure this production has no task, shot or asset linked to it? Kitsu doesn't allow production deletion. If you don't want to see the production anymore, you can close it instead.",edit_title:"Edit production",new_production:"Add a production",number:"production | productions",open_productions:"My productions",picture:"Change picture",title:"Productions",home:{create_new:"Create a new production",empty:"You don't have any production open. What about creating a new one?",no_task:"You have no task assigned. See your supervisor to see what you can do!",no_prod_for_client:"You don't have access to any production. Contact your contractor to obtain an access.",title:"Running Productions",welcome:"Welcome to Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Add specific data required by this project.",add_failed:"An error occured while adding metadata to your project.",add_new_values:"There is currently no available values.",available_values:"Available values",choices:"List of values",delete_text:"Are you sure you want to delete this column and related data for all assets of this production?",delete_error:"An error occured while deleting this metadata column.",error:"An error occured while adding the metadata column. Make sure there is no column with similar name and that all fields are filled. If the problem is persists, please contact the support team.",free:"Free value",title:"Add metadata column"},status:{closed:"Closed",open:"Open",active:"Open",archived:"Closed"},type:{short:"Short",featurefilm:"Feature Film",tvshow:"TV Show"}},profile:{change_avatar:"Change avatar",info_title:"Information",language:"Language",notifications_enabled:"Email notifications enabled",notifications_slack_enabled:"Slack notifications enabled",notifications_slack_user:"Slack username",password_title:"Change password",timezone:"Timezone",title:"Your Profile",avatar:{title:"Change avatar",error_upload:"There was an error while uploading picture."},change_password:{button:"Change password",error:"An error occured while changing password. Please verify your current password.",success:"Your password was successfully changed!",unvalid:"Your new password confirmation doesn't match or your password is too short (7 chars, at least, is expected)."},save:{button:"Save changes",error:"An error occured while saving changes"}},settings:{change_logo:"Change logo",integrations:"Integrations",logo:"Studio logo",no_logo:"There is no logo set.",set_logo:"Set studio logo",title:"Settings",fields:{name:"Studio name",hours_by_day:"Hours by day",slack_token:"Slack Token (Optional)",use_original_name:"Use original file name for downloads"},save:{button:"Save settings",error:"A server error occured while saving settings"}},task_status:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task status. There are probably data linked to it. Are you sure this task status has no task linked to it?",edit_title:"Edit task status",number:"task status | task status",new_task_status:"Add a task status",title:"Task Status",fields:{is_artist_allowed:"Is artist allowed",color:"Color",is_done:"Is done",is_reviewable:"Is reviewable",is_retake:"Has retake value",name:"Name",short_name:"Short name"}},task_types:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task type. There are probably data linked to it. Are you sure this task type has no task linked to it?",edit_title:"Edit task type",new_task_type:"Add a task type",number:"task type | task types",title:"Task Types",fields:{dedicated_to:"For",color:"Color",name:"Name",allow_timelog:"Timelog",priority:"Priority"}},sequences:{all_sequences:"All sequences",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this sequence. There are probably data linked to it. Are you sure this sequence has no shot linked to it?",edit_title:"Edit sequence",empty_list:"There is no sequence in the production. What about creating some?",empty_list_client:"There is no sequence in this production.",new_sequence:"New sequence",number:"sequence | sequences",title:"Sequence Stats",fields:{name:"name",description:"description"}},schedule:{title:"Schedule",overall_man_days:"Man-days",md:"md",zoom_level:"Zoom level",milestone:{add_milestone:"Add milestone for",edit_milestone:"Edit milestone for",name:"Name",error:"An error occured while adding or editing the milestone. Please try again."}},shots:{casting:"Shot casting",creation_explaination:"To add shots you need first to create an episode and a sequence. Type an episode name in the bottom of the left column then click on add to create a new episode. Select this episode and repeat the same operation for sequence. Finally select a sequence and type a shot name in the field in the bottom of the right column. Click on the add button below. Your first shot was created. You can now add many more! If it's not a TV Show, you have to directly create a sequence.",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this shot. There are probably data linked to it. Are you sure this shot has no task linked to it?",edit_success:"Shot {name} successfully edited.",edit_fail:"Creation or edition failed, an error occured. Make sure that you are not renaming the shot with a name already listed for given sequence.",edit_title:"Edit shot",empty_list:"There is no shot in the production. What about creating some?",empty_list_client:"There is no shot in this production.",episodes:"Episodes",new_shot:"Add a shot",new_shots:"Add shots",new_sequences:"Add sequences",new_episodes:"Add episodes",no_casting:"The shot casting is empty.",number:"shot | shots",manage:"Create shots",new_success:"Shot {name} successfully created.",padding:"Shot Padding",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this shot.",sequences:"Sequences",tasks:"Shot Tasks",title:"Shots",fields:{description:"Description",nb_frames:"Frames",episode:"Episode",frame_in:"In",frame_out:"Out",fps:"FPS",name:"Name",production:"Prod",sequence:"Sequence",time_spent:"Time"}},server_down:{text:"Please contact your vendor support, your system administrator or your IT department to understand what is going wrong.",title:"Kitsu encountered an error while reaching its data API."},statistics:{count:"Counts",count_mode:"Count mode",display_mode:"Display mode",frames:"Frames",pie:"Pie charts",shots:"Shots"},tasks:{add_preview:"Add preview",add_preview_error:"An error occured while adding preview.",assign:"Assign one task to: | Assign {nbSelectedTasks} tasks to:",back_to_list:"back to list",bigger:"Widen task panel",change_status_to:"Change task status to:",change_preview:"Change preview",change_priority:"Change priority to:",clear_assignations:"clear assignations",create_for_selection:"Create task for each empty cell:",create_tasks:"Add tasks",create_tasks_shot:"Add tasks for current shots",create_tasks_shot_explaination:"You are going to create a new task for each shot of current list for the given task type. Do you want to continue?",create_tasks_shot_failed:"A server error occured while proceeding creations.",create_tasks_asset:"Add tasks for current assets",create_tasks_asset_explaination:"You are going to create a new task for each asset of current list for the given task type. Do you want to continue?",create_tasks_asset_failed:"A server error occured while proceeding creations.",current:"Task to do",current_status:"Current status :",delete_all_text:"Are you sure you want to delete all tasks for given {name}? Please, confirm by typing the task type name of the tasks you want to delete in the text field.",delete_all_error:"Deleting all tasks for given task type failed.",delete_error:"An error occured while deleting task.",delete_comment:"Are you sure you want to delete last comment?",delete_comment_error:"An error occured while deleting comment.",delete_for_selection:"Delete selected tasks:",delete_preview:"Are you sure you want to delete this preview?",delete_preview_error:"An error occured while deleting preview.",edit_comment:"Edit comment",done:"Done",download_pdf_file:"Download .{extension} file",feedback:"feedback",full_screen:"Display in full screen",hide_assignations:"Hide assignations",hide_infos:"Hide additional information",my_tasks:"My tasks",next:"next task",no_assignation_right:"You are not allowed to manage assignations",no_comment:"There is currently no comment for this task.",no_preview:"There is currently no preview for this task.",no_task_selected:"No task selected",number:"task | tasks",preview:"Previews",previous:"previous task",unsubscribe_notifications:"Unsubscribe from notifications",set_estimations:"Set estimations for selected tasks:",set_preview:"Set this preview as thumbnail",set_preview_error:"An error occured while setting preview as thumbnail",set_preview_done:"This preview is used as thumbnail for the current entity.",select_preview_file:"Please select a picture from your hard drive to be used as a preview for the current task:",show_assignations:"Show assignations",show_infos:"Show additional information",subscribe_notifications:"Subscribe to notifications",validation:"Validation",tasks:"Tasks",with_comment:"With a comment...",fields:{asset_type:"Asset type",assignees:"Assignees",end_date:"End date",duration:"Duration",entity:"Entity",entity_name:"Name",estimation:"Estimation",frames:"Fram.",last_comment:"Last comment",last_comment_date:"Last comment",priority:"Priority",production:"Prod",real_end_date:"Validation date",real_start_date:"WIP date",retake_count:"Retakes",sequence:"Sequence",task_status:"Status",task_status_short_name:"Status",task_type:"Type"},priority:{emergency:"Emergency",normal:"Normal",high:"High",very_high:"Very High"}},timesheets:{detail_level:"Detail level",done_tasks:"Done tasks",export_timesheet:"Export Timesheet",hours:"hours",month:"Month",time_spents:"Time Spent (hours)",title:"Timesheets",year:"Year"},wrong_browser:{title:"Your browser is not supported by Kitsu",text:"Kitsu can only be used with Firefox and Chrome browsers."}},g={asset_types:{all_asset_types:"Tous les types d'assets",delete_error:"Une erreur est survenue en supprimant un type d'asset. Êtes vous sûr qu'aucun asset est lié à ce type d'asset?",delete_text:"Êtes vous sur de vouloir enlever {name} de la base de données ?",edit_title:"Modifier le type d'asset",new_asset_type:"Ajouter un type d'asset",number:"type d'asset | types d'assets",production_title:"Stats types d'assets",title:"Types d'assets",fields:{name:"Nom"}},assets:{cast_in:"Présent dans",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant l'asset, êtes vous sûr de vouloir que l'asset n'ait plus aucun lien ?",edit_fail:"La création ou l'édition a échoué, une erreur est survenue.",edit_title:"Modifier asset",edit_success:"Asset {name} édité avec succès.",empty_list:"Il n'y a pas d'assets dans la production. Voulez vous en créer ?",new_asset:"Ajouter un asset",new_assets:"Ajouter des assets",new_success:"Asset {name} créé avec succès.",no_cast_in:"Cet asset n'apparait dans aucun shot.",number:"asset | assets",restore_text:"Êtes vous sûr de vouloir restaurer {name} dans votre base de données ?",restore_error:"Une erreur est survenue en restaurant l'asset.",tasks:"Tâches de fabrication",title:"Assets",fields:{description:"Description",episode:"Ép.",name:"Nom",production:"Prod",time_spent:"Jours",type:"Type"}},breakdown:{all_assets:"Tous les assets disponibles",empty:"Casting vide",title:"Casting"},comments:{add_checklist:"Ajout checklist",add_comment:"Ajouter un commentaire...",add_preview:"Attacher un fichier",edit_title:"Modifier le commentaire",empty_text:"Ce commentaire est vide",no_file_attached:"Aucun fichier attaché",pin:"Épingler",pinned:"Épinglé",post_status:"Publier",retake:"Reprise",revision:"révision",set_status_to:"Positionner le statut à",unpin:"Désépingler",validated:"Validé !",validation_required:"Validation requise",fields:{text:"Texte"}},custom_actions:{delete_text:"Êtes-vous sûr de supprimer l'action personnalisée {name} de la base de données?",delete_error:"Une erreur est survenue en supprimant l'action personnalisée.",edit_title:"Modifier une action personnalisée",new_custom_action:"Ajouter une action personnalisée",number:"action pesonnalisée | actions personnalisées",run_for_selection:"Lancer une action personnalisée pour les tâche sélectionnées :",title:"Actions",fields:{name:"Nom",url:"URL",entity_type:"Type d'entité",is_ajax:"Utiliser AJAX"},entity_types:{all:"Tous",shot:"Plan",asset:"Asset"}},episodes:{all_episodes:"Tous les épisodes",edit_title:"Éditer épisode",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas d'épisodes dans la production. Voulez vous en créer ?",new_episode:"Nouvel épisode",number:"épisode | épisodes",title:"Stats épisodes",fields:{name:"Nom",description:"Description"}},login:{login:"Se connecter",login_failed:"La connexion a échoué, vérifiez vos identifiants",title:"Se connecter à Kitsu",fields:{email:"Adresse Mail",password:"Mot de passe"}},main:{about:"À propos",add:"Ajouter",all:"Tous",admin:"Admin",back_to_list:"retour à la liste",cancel:"Annuler",confirmation:"Confirmer",confirmation_and_stay:"Confirmer et rester",clear_selection:"Effacer la sélection",close:"Fermer",days_spent:"Jours passés",edit:"Modifier",dark_theme:"Thème sombre",days_spents:"Jours passés",delete:"Supprimer",delete_all:"Supprimer tout",documentation:"Documentation",delete_text:"Etes vous sûr de vouloir supprimer {name} de la base de données ?",empty_comment:"Commentaire vide",end_date:"Date de fin",go_productions:"Aller aux productions",history:"Historique",info:"Information",loading_data:"Chargement des données",loading_error:"Une erreur est survenue en chargeant les données.",logout:"Se déconnecter",maximize:"Maximiser",minimize:"Minimiser",nb_frames:"Nb de frames",no:"non",or:"ou",production:"Production",profile:"Profil",remove:"Enlever",studio:"Studio",user:"Utilisateur",save:"Enregistrer",sorted_by:"Tâches triées par",start_date:"Date de début",white_theme:"Thème blanc",yes:"oui",csv:{import_file:"Importer",export_file:"Exporter",import_title:"Importer depuis un .csv",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionner un fichier depuis votre dossier :",error_upload:"Une erreur est survenue en téleversant votre fichier .csv."}},menu:{assign_tasks:"Assigner des tâches",create_tasks:"Créer des tâches",change_status:"Changer le statut",change_priority:"Change priority",delete_tasks:"Supprimer des tâches",run_custom_action:"Lancer des actions",set_estimations:"Définir estimations"},notifications:{and_change_status:"et changé le statut à",assigned_you:"vous a assigné à",commented_on:"a commenté",mention_you_on:"vous a mentionné sur",no_notifications:"Il n'y a pas encore de notifications pour vous pour les projets en cours",title:"Notifications",with_preview:"avec une version"},news:{all:"Tous",commented_on:"a commenté sur",infos:"Infos",no_news:"Il n'y a pas de nouveautés pour cette production ou ce filtre",only_comments:"Seulement les commentaires",only_previews:"Seulement les previews",set_preview_on:"a mis un preview sur",task_status:"Statut de tâche",task_type:"Type de tâche",title:"Flux de nouveautés "},playlists:{add_shots:"Sélectonner les plans",add_sequence:"Ajouter séquence",available_build:"Builds disponibles",build_daily:"Valid. quotidienne",build_weekly:"Valid. hebodomadaire",build_mp4:"Construire .mp4",delete_text:"Êtes vous sûr de vouloir supprimer {name} de la base de données ?",delete_error:"Une erreur est survenue en supprimant la playlist.",download_zip:"Télécharger en .zip",edit_title:"Modifier la playlist",no_preview:"Aucun preview",remove:"enlever",loading_error:"Une erreur serveur est apparue, les playlists ne peuvent pas être chargées.",new_playlist:"Ajouter une playlist",no_build:"Pas de build",no_playlist:"Il n'y a pas de playlist pour ce projet.",no_selection:"Séléctionnez une playlist sur la gauche.",no_sequence_for_episode:"Il n'y a pas de séquence pour cette épisode",no_shot_for_production:"Il n'y pas de plan pour cette production",select_shot:"Sélectionnez un plan dans la colonne de droite",select_playlist:"Sélectionnez une playlist dans la colonne de gauche",title:"Playlists",fields:{name:"Nom"}},people:{active:"Présents",add_member_to_team:"Ajouter un membre à l'équipe: ",create_invite:"Créer et envoyer une invitation",delete_text:"Êtes vous sûr de vouloir retirer {personName} de la base de données?",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à elle. Etes vous sur que cette personne n'a aucune tâche assignée et n'a fait aucun commentaire ?",edit_title:"Modifier les informations de",empty_team:"Personne n'a été affecté à cette production.",episodes:"Épisodes",no_task_assigned:"Il n'y a aucune tâche assignée.",new_person:"Ajouter un employé",padding:"Ecart",persons:"Personnes",picture:"Changer l'image",running_tasks:"Tâches en cours",select_person:"Sélectionner une personne...",team:"Équipe",title:"Employés",unactive:"Absents",csv:{export_file:"Télécharger",import_file:"Importer",import_title:"Import employees from a CSV file",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionnez un fichier de votre disque dur :"},list:{active:"Actif",email:"Adresse Mail",name:"Nom",phone:"Téléphone",role:"Rôle"},fields:{active:"Actif",email:"Adresse email",first_name:"Prénom",last_name:"Nom",old_password:"Mot de passe actuel",password:"Nouveau mot de passe",password_2:"Répétez le nouveau mot de passe",phone:"Téléphone",role:"Rôle"},role:{admin:"Studio Manager",manager:"Superviseur",user:"Graphiste",client:"Client"}},productions:{current:"Production sélectionnée ",delete_text:"Êtes vous sûr de vouloir retirer {name} de la base de données?",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à cette production. Etes vous sur que cette production n'a aucune tâche, shot ou asset lié ? Kitsu n'autorise pas la suppression de production. Si vous ne souhaitez plus la voir apparaitre, vous pouvez fermer la production.",edit_title:"Modifier la production",new_production:"Ajouter une production",number:"production | productions",open_productions:"Mes productions",picture:"Changer l'image",title:"Productions",home:{create_new:"Créer une nouvelle production",empty:"Vous n'avez pas de production ouverte, voulez vous en créer une nouvelle ?",no_task:"Vous n'avez pas de tâches assignées. Demandez à votre superviseur ce que vous pouvez faire !",title:"Productions en cours",welcome:"Bienvenue sur Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Ajouter des données spécifiques au projet.",add_failed:"Une erreur s'est produite en ajoutant des métadonnées au projet.",add_new_values:"Il n'y a pour le moment aucune valeur enregistrée.",available_values:"Valeurs disponibles",choices:"Liste de valeurs",delete_text:"Êtes vous sûr de vouloir supprimmer cette colonne et toutes les données liées?",delete_error:"Une erreur est survenue en supprimant la colone de métadonnées.",error:"Une erreur est survenue en ajoutant la colone de métadonnées. Assurez vous qu'aucune colonne ne porte le même nom et que les champs sont bien renseignés. Si le problème persiste, contactez le support.",free:"Valeur libre",title:"Ajouter une colonne de métadonnées"},status:{open:"Ouvert",closed:"Fermé"},type:{short:"Format court",featurefilm:"Long Métrage",tvshow:"Série télé"}},profile:{change_avatar:"Changer Avatar",info_title:"Informations",language:"Langue",notifications_enabled:"Notifications mail activées",notifications_slack_enabled:"Notifications Slack activées",notifications_slack_user:"Nom d'utilisateur Slack",password_title:"Changement de mot de passe",timezone:"Fuseau horaire",title:"Votre Profil",avatar:{title:"Changer votre avatar",error_upload:"Une erreur est survenue en envoyant l'image."},change_password:{button:"Changez de mot de passe",success:"Votre mot de passe a été changé avec succès !",unvalid:"Les nouveaux mots de passe sont différents ou votre mot de passe est trop court (7 caractères minimum).",error:"Une erreur s'est produite lors du changement de mot de passe. Veuillez vérifier votre mot de pass actuel."},save:{button:"Sauvegardez vos changements",error:"Une erreur est survenue pendant la sauvegarde de vos changememts."}},sequences:{all_sequences:"Toutes les séquences",title:"Stats séquences",number:"séquence | séquences",new_sequence:"Nouvelle séquence",edit_title:"Éditer séquence",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas de séquence dans la production. Voulez vous en créer ?",fields:{name:"Nom",description:"Description"}},settings:{change_logo:"Changer logo",integrations:"Intégrations",logo:"Logo du studio",no_logo:"Aucun logo n' a été positionné.",set_logo:"Changer le logo",title:"Paramètres",fields:{name:"Nom du studio",slack_token:"Token Slack (optionnel)",hours_by_day:"Heures par jour",use_original_name:"Utiliser les noms de fichiers originaux pour le téléchargement"},save:{button:"Sauvegarder les paramètres",error:"Une erreur serveur est survenue en sauvegardant les paramètres"}},server_down:{text:"Contactez votre fournisseur, votre administrateur système ou votre département informatique pour comprendre ce qui ne va pas.",title:"Kitsu a rencontré une erreur en communiquant avec son API de données."},schedule:{md:"jh",overall_man_days:"Jours Homme",title:"Planning",zoom_level:"Niveau de zoom",milestone:{add_milestone:"Ajouter milestone",delete_milestone:"Supprimer milestone",edit_milestone:"Modifier milestone",error:"Error",name:"Name"}},shots:{casting:"Casting",creation_explaination:"Pour ajouter des shot, you devez d'abord créer un épisode. Taper le nom de l'épisode dans la colonne de gauche en bas. Séléctionnez cette épisode et répétez l'opération pour créer une séquence. Enfin créez un shot en sélectionnant la séquence créée, en tapant son nom en bas de la colonne de droite. Cliquez sur le bouton add pour ajouter le shot. Vous pouvez maintenant créer de nombreux shots. Si cette production n'est pas une série, vous pouvez directement créer une séquence).",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que le plan n'a plus aucun lien ?",description:"Description",edit_fail:"La création ou l'édition a échoué, une erreur est survenue. Assurez-vous qu'il n'y pas déjà un shot portant le nom que vous donnez pour la séqence choisie.",episodes:"Épisodes",edit_title:"Modifier plan",edit_success:"Plan {name} édité avec succès.",empty_list:"Il n'y a pas de plans dans la production. Voulez vous en créer ?",no_casting:"Le casting du plan est vide.",number:"plan | plans",new_episodes:"Ajouter des épisodes",new_sequences:"Ajouter des séquences",new_shot:"Ajouter un plan",new_shots:"Ajouter des plans",new_success:"Plan {name} créé avec succès.",manage:"Créer des plans",restore_error:"Une erreur est survenue en restorant le plan.",restore_text:"Etes vous sûr de vouloir restorer {name} dans la base de données ?",sequence:"Séquence",sequences:"Séquences",tasks:"Tâches de fabrication",padding:"Distance",title:"Plans",fields:{name:"Plan",episode:"Épisode",sequence:"Séquence",frame_in:"In",frame_out:"Out",fps:"FPS",nb_frames:"Frames",description:"Description",production:"Prod"}},statistics:{count:"Comptages",count_mode:"Mode de comptage",display_mode:" Mode d'affichage",frames:"Frames",pie:"Graphiques",shots:"Plans"},task_status:{delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du statut de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce statut de tâche ?",edit_title:"Modifier statut",number:"statut | statuts de tâche",new_task_status:"Ajouter un statut de tâche",title:"Statuts de tâche",fields:{name:"Nom",short_name:"Nom court",color:"Couleur",is_retake:"A valeur de retake",is_reviewable:"Est vérifiable",is_done:"Est terminé",is_artist_allowed:"Autorisé aux artistes"}},task_types:{delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du type de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce type de tâche ?",edit_title:"Modifier le type de tâches",number:"type de tâche | types de tâches",new_task_type:"Ajouter un type de tâche",title:"Types de tâches",fields:{allow_timelog:"Temps passé",name:"Nom",color:"Couleur",priority:"Priorité",dedicated_to:"Pour"}},tasks:{add_preview:"Attacher une préviz",add_preview_error:"Une erreur est survenue en ajoutant la preview.",assign:"Assigner une tâche à : | Assigner {nbSelectedTasks} tâches à :",back_to_list:"Retour à la liste",bigger:"Élargir le panneau de tâche",change_status_to:"Changer le statut de la tâche à : ",change_priority:"Changer le priorité de la tâche à : ",change_preview:"Modifier preview",clear_assignations:"effacer les assignations",create_tasks:"Ajouter des tâches",create_tasks_shot:"Ajouter des tâches pour les plans affichés",create_tasks_shot_explaination:"Vous allez créer une nouvelle tâche pour chaque plan de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_shot_failed:"Une erreur serveur est survenue pendant la création des tâches.",create_tasks_asset:"Ajouter des tâches pour les assets affichés",create_tasks_asset_explaination:"Vous allez créer une nouvelle tâche pour chaque asset de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_asset_failed:"Une erreur serveur est survenue pendant la création des tâches.",create_for_selection:"Créer une tâche pour chaque cellule vide :",current:"Tâches à faire",current_status:"Statut actuel :",delete_all_error:"Supprimer toutes les tâches pour ce type de tâche a échoué",delete_comment:"Êtes vous sûr de vouloir supprimer ce commentaire ?",delete_comment_error:"Une erreur est survenue en supprimant le commentaire.",delete_error:"Une erreur est survenue en supprimant la tâche.",delete_for_selection:"Delete selected tasks:",delete_preview:"Êtes vous sûr de vouloir supprimer cette préviz ?",delete_preview_error:"Une erreur est survenue en supprimant la preview.",done:"Terminées",download_pdf_file:"Télécharger le fichier .{extension}",feedback:"retours",full_screen:"Afficher en plein écran",hide_assignations:"Cacher assignations",hide_infos:"Cacher informations additionnelles",my_tasks:"Mes tâches",no_preview:"Il n'y a pas de préviz pour cette tâche.",no_task_selected:"Pas de tâche sélectionnée",no_comment:"Il n'y a pas de commentaires pour cette tâche.",no_assignation_right:"vous n'êtes pas autorisé à gérer les assigations.",next:"Suivante",preview:"Pré-visualisation",previous:"Précédente",select_preview_file:"Choisissez une preview sur votre disque dur:",set_estimations:"Donner une estimation pour les tâches sélectionnées :",set_preview:"Utilisez cette previz comme vignette",set_preview_error:"Une erreur est survenue en utilisant cette vignette.",set_preview_done:"Cette previz sert de vignette à l'entité courante.",subscribe_notifications:"S'abonner aux notifications",show_assignations:"Voir assignations",show_infos:"Montrer informations additionnelles",unsubscribe_notifications:"Se désabonner des notifications",tasks:"Tâches",with_comment:"Avec un commentaire...",validation:"Validation",fields:{asset_type:"Type d'asset",assignees:"Assignés",duration:"Duration",end_date:"Date de fin",estimation:"Estimation",entity:"Entité",entity_name:"Nom",last_comment_date:"Dernier comm.",priority:"Priorité",production:"Prod",real_end_date:"Date de valid.",real_start_date:"Date de début",retake_count:"Retakes",sequence:"Séquence",task_status:"Statut",last_comment:"Dernier commentaire",last_status_short_name:"Statut",task_type:"Type"},priority:{emergency:"Urgence",normal:"Normale",high:"Haute",very_high:"Très haute"}},timesheets:{detail_level:"Niveau de détail",done_tasks:"Tâches terminées",export_timesheet:"Exporter la feuille de temps",month:"Mois",hours:"heures",title:"Feuille de temps",time_spents:"Temps passé (heures)",year:"Année"},wrong_browser:{title:"Votre navigateur n'est pas pris en charges par Kitsu",text:"Kitsu ne peut être utilisé qu'avec les navigateurs Firefox et Chrome."}},k={assets:{cast_in:"角色分配",delete_error:"删除此资源时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此资源类型吗?",delete_text:"您确定要从您的数据库移除{name}吗?",edit_fail:"创建或编辑失败, 有错误出现.",edit_success:"已成功编辑资源{name}.",edit_title:"编辑资源",empty_list:"制作中没有资源. 要创建一些吗?",empty_list_client:"此制作中没有资源.",new_asset:"添加资源",new_assets:"添加多个资源",new_success:"已成功创建资源{name}.",no_cast_in:"任何镜头中都没为此资源分配角色.",number:"资源 | 资源(多个)",restore_text:"您确定要将{name}恢复进您的数据库吗?",restore_error:"恢复此资源时出现错误.",tasks:"资源任务(多个)",title:"资源(多个)",fields:{description:"说明",episode:"片段",name:"名称",production:"制作",type:"类型"}},asset_types:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此资源类型时出现错误. 很可能存在有链接至此的数据. 您确定没有资源链接至此资源类型吗?",edit_title:"编辑资源类型",new_asset_type:"添加资源类型",number:"资源类型 | 资源类型(多种)",title:"资源类型(多种)",fields:{name:"名称"}},breakdown:{all_assets:"所有可用资源",select_shot:"请从左侧选择一镜头来管理其角色分配.",selected_shot:"{sequence_name}中的多个资源 / {name}的角色分配",save_error:"保存支配表时出现错误.",title:"支配表"},comments:{add_comment:"添加注释...",add_preview:"附加预览",change_preview:"更换预览",empty_text:"此条注释为空",edit_title:"编辑注释",error:"发布注释时出现错误",no_file_attached:"未附加文件",post_status:"发布注释",retake:"重拍",validated:"已确认!",validation_required:"需要得到确认",set_status_to:"将状态设为",fields:{text:"文本"}},custom_actions:{delete_text:"您确定要从您的数据库移除自定义操作{name}吗?",delete_error:"删除此自定义操作时出现错误.",edit_title:"编辑自定义操作",new_custom_action:"添加自定义操作",number:"自定义操作 | 自定义操作(多个)",run_for_selection:"为所选的多个任务执行自定义操作:",title:"自定义操作(多个)",fields:{name:"名称",url:"URL",entity_type:"实体类型"},entity_types:{all:"所有",shot:"镜头",asset:"资源"}},episodes:{delete_error:"删除此片段时出现错误. 很可能存在有链接至此的数据. 您确定没有序列链接至此片段吗?",delete_text:"您确定要从您的数据库移除{name}吗?",edit_title:"编辑片段",empty_list:"制作中没有片段. 要创建一些吗?",empty_list_client:"此制作中没有片段.",new_episode:"新建片段",number:"片段 | 片段(多个)",title:"片段(多个)",fields:{name:"名称",description:"说明"}},login:{forgot_password:"密码忘记了?",login:"登录",login_failed:"登录失败, 请核实您的凭据",login_page:"取消",reset_change_password:"更改密码",reset_change_password_form_failed:"您给出的密码有问题. 请核实密码长度大于6个字符且两次密码一致.",reset_change_password_failed:"更改密码失败. 请再次重启整个步骤.",reset_change_password_succeed:"您的密码已成功更改. 请返回到登录页面来使用它.",reset_change_password_title:"输入新密码",reset_password:"重置密码",reset_password_failed:"重置密码失败. 请核实您的电子邮箱.",reset_password_succeed:"已成功重置密码. 请查看您的收件箱.",reset_password_title:"进入您的电子邮件来重置密码",title:"登录Kitsu",fields:{email:"电子邮箱",password:"密码",password2:"再次输入密码"}},main:{add:"添加",all:"全部",admin:"管理员",cancel:"取消",clear_selection:"清除当前所选",documentation:"文档",close:"关闭",confirmation:"确认",confirmation_and_stay:"做确认, 之后不离开",dark_theme:"黑色主题",delete:"删除",delete_all:"全部删除",delete_text:"您确定要从您的数据库移除{name}吗?",edit:"编辑",empty_comment:"空注释",history:"历史",info:"信息",or:"或",no:"否",loading_data:"正在加载数据",loading_error:"加载数据时出现错误.",logout:"退出",modify:"修改",minimize:"最小化",maximize:"最大化",profile:"简介",production:"制作",remove:"移除",save:"保存",studio:"工作室",user:"用户",white_theme:"白色主题",yes:"是",csv:{export_file:"导出",error_upload:"上传您的CSV文件时出现错误.",import_file:"导入",import_title:"从CSV文件导入数据",required_fields:"您的CSV文件需要有如下列项",select_file:"请从您的某个文件夹选择文件:"}},menu:{assign_tasks:"分配多个任务",change_priority:"更改优先级",change_status:"更改状态",create_tasks:"创建多个任务",delete_tasks:"删除多个任务",run_custom_action:"执行自定义操作"},not_found:{text:"您点击的链接有问题, 我们提倡您返回主页.",title:"页面未找到..., 您要找一下自己已删除的内容吗?"},notifications:{and_change_status:", 也已经将状态更改为了",commented_on:"已给出针对性注释, 注释对象为",no_notifications:"目前没有关于您当前项目的通知.",title:"通知(多个)",with_preview:"带有预览"},people:{active:"活动",add_member_to_team:"向团队添加成员: ",delete_error:"删除此人员时出现错误. 很可能存在有链接至此的数据. 您确定此人员没有分配任务或是没写注释吗?",delete_text:"您确定要从您的数据库移除{personName}吗?",edit_title:"编辑人员",empty_team:"项目团队里没有所列人员.",new_person:"添加新员工",no_task_assigned:"在执行任务未进行分配.",persons:"人员 | 人员(多名)",running_tasks:"在执行任务",select_person:"选择人员...",team:"团队",title:"人员(多名)",unactive:"非活动",csv:{import_file:"导入.csv文件",export_file:"下载为.csv文件",import_title:"从CSV文件导入数据",required_fields:"您的CSV文件需要有如下列项",select_file:"请从您的某个文件夹选择文件:",error_upload:"上传您的CSV文件时出现错误."},fields:{first_name:"名称",last_name:"姓氏",email:"电子邮箱",phone:"电话",role:"职责",old_password:"当前密码",password:"新密码",password_2:"新密码(重复)",active:"活动"},list:{name:"名称",email:"电子邮箱",phone:"电话",role:"职责",active:"活动"},role:{admin:"工作室经理",client:"客户",manager:"监制",user:"CG艺术家"}},playlists:{add_shots:"选择多个镜头",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此播放列表时出现错误.",edit_title:"编辑播放列表",loading_error:"出现服务器错误. 多个播放列表无法被加载.",new_playlist:"添加播放列表",no_playlist:"此项目当前没有播放列表.",no_selection:"请从左侧选择播放列表.",no_sequence_for_episode:"此片段没有序列",no_shot_for_production:"此制作没有镜头",no_shot_for_sequence:"此序列没有镜头",select_shot:"请从右列中选择镜头",select_playlist:"请从左列中选择播放列表",title:"播放列表(多个)",remove:"移除",fields:{name:"名称"}},productions:{current:"所选制作",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此制作时出现错误. 很可能存在有链接至此的数据. 您确定没有任务, 镜头或资源链接至此制作吗?",edit_title:"编辑制作",new_production:"添加制作",number:"制作 | 制作(多个)",open_productions:"我的制作",picture:"更换图片",title:"制作(多个)",home:{create_new:"创建新制作",empty:"您什么制作也没开启. 要创建一个新的吗?",no_task:"还没有任务分配给您. 您可以到监制那儿了解一下自己能做些什么!",no_prod_for_client:"您无权访问任何制作. 请联系您的承包商获取访问权限.",title:"执行多个制作",welcome:"欢迎使用Kitsu"},fields:{fps:"FPS",name:"名称",ratio:"宽高比",resolution:"分辨率",status:"状态",type:"类型"},metadata:{add_explaination:"添加此项目需要的特定数据.",add_failed:"向您的项目添加元数据时出现错误.",add_new_values:"当前没有可用值.",available_values:"可用值",choices:"值列表",delete_text:"您确定要删除此列以及此制作的所有资源方面的相关数据吗?",delete_error:"删除此元数据列时出现错误.",error:"添加元数据列时出现错误. 要确保没有相似名称的列, 还要确保填充了所有字段. 如果问题仍然存在, 还请联系我们的支持团队.",free:"空闲值",title:"添加元数据列"},status:{closed:"已关闭",open:"开启",active:"开启",archived:"已关闭"},type:{short:"短片",featurefilm:"故事片",tvshow:"电视节目"}},profile:{info_title:"信息",language:"语种",password_title:"更改密码",timezone:"时区",title:"您的简介",change_avatar:"更换头像",avatar:{title:"更换头像"},change_password:{button:"更改密码",error:"更改密码时出现错误. 请核实您当前的密码.",success:"您的密码已成功更改!",unvalid:"您的确认密码与新密码不相符或您的密码长度太短(预期至少是7个字符)."},save:{button:"保存更改",error:"保存更改时出现错误"}},task_status:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此任务状态时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务状态吗?",edit_title:"编辑任务状态",number:"任务状态 | 任务状态(多种)",new_task_status:"添加任务状态",title:"任务状态(多种)",fields:{color:"颜色",is_done:"已完成",is_reviewable:"可回顾",is_artist_allowed:"得到了艺术家的获准",name:"名称",short_name:"短名称"}},task_types:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此任务类型时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务类型吗?",edit_title:"编辑任务类型",new_task_type:"添加任务类型",number:"任务类型 | 任务类型(多种)",title:"任务类型(多种)",fields:{dedicated_to:"专用于",color:"颜色",name:"名称",allow_timelog:"时间日志",priority:"优先级"}},sequences:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此序列时出现错误. 很可能存在有链接至此的数据. 您确定没有镜头链接至此序列吗?",edit_title:"编辑序列",empty_list:"制作中没有序列. 要创建一些吗?",empty_list_client:"此制作中没有序列.",new_sequence:"新建序列",number:"序列 | 序列(多个)",title:"序列(多个)",fields:{name:"名称",description:"说明"}},shots:{casting:"镜头的角色分配",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此镜头时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此镜头吗?",edit_success:"已成功编辑镜头{name}.",edit_fail:"创建或编辑失败, 有错误出现. 要确保您没要重命名其名称已为给定序列列出的镜头.",edit_title:"编辑镜头",empty_list:"制作中没有镜头. 要创建一些吗?",empty_list_client:"此制作中没有镜头.",new_shot:"添加镜头",new_shots:"添加多个镜头",new_sequences:"添加多个序列",new_episodes:"添加多个片段",no_casting:"镜头的角色分配为空.",number:"镜头 | 镜头(多个)",manage:"创建多个镜头",new_success:"已成功创建镜头{name}.",restore_text:"您确定要将{name}恢复进您的数据库吗?",restore_error:"恢复此镜头时出现错误.",tasks:"镜头任务(多个)",title:"镜头(多个)",fields:{description:"说明",episode:"片段",frame_in:"入镜",frame_out:"出镜",fps:"FPS",name:"镜头",production:"制作",sequence:"序列"}},server_down:{text:"请联系您的供应商支持, 您的系统管理员或您的IT部门来搞清楚出什么问题了.",title:"Kitsu在访问其数据API时出现错误."},tasks:{add_preview:"添加预览",add_preview_error:"添加预览时出现错误.",assign:"将单个任务分配给: | 将{nbSelectedTasks}个任务分配给:",back_to_list:"返回列表",change_status_to:"将任务状态改为:",change_preview:"更换预览",change_priority:"将优先级改为:",clear_assignations:"清除多个任务分配",create_for_selection:"为每个空单元格都创建任务:",create_tasks:"添加多个任务",create_tasks_shot:"为当前的多个镜头添加多个任务",create_tasks_shot_explaination:"您将要为当前列表的每个镜头都创建给定任务类型的新任务. 要继续吗?",create_tasks_shot_failed:"继续进行多个创建时出现服务器错误.",create_tasks_asset:"为当前的多个资源添加多个任务",create_tasks_asset_explaination:"您将要为当前列表的每个资源都创建给定任务类型的新任务. 要继续吗?",create_tasks_asset_failed:"继续进行多个创建时出现服务器错误.",current:"待执行任务",current_status:"当前状态:",delete_all_text:"您确定要删除所有给定{name}的任务吗? 请通过在文本字段输入您想要删除的那些任务的任务类型名称来确认.",delete_all_error:"删除所有给定任务类型的任务失败.",delete_error:"删除任务时出现错误.",delete_comment:"您确定要删除最新注释吗?",delete_comment_error:"删除注释时出现错误",delete_for_selection:"删除所选的多个任务:",delete_preview:"您确定要删除此预览吗?",delete_preview_error:"删除预览时出现错误.",edit_comment:"编辑注释",done:"已完成",download_pdf_file:"下载.{extension}文件",feedback:"反馈",full_screen:"全屏显示",hide_assignations:"隐藏多个任务分配",my_tasks:"我的任务(多个)",next:"下一个任务",no_assignation_right:"不允许您管理多个任务分配",no_comment:"此任务当前没有注释.",no_preview:"此任务当前没有预览.",preview:"预览(多个)",previous:"上一个任务",unsubscribe_notifications:"通过通知取消订阅",set_preview:"将此预览设置为缩略图",set_preview_error:"将预览设置为缩略图时出现错误",set_preview_done:"此预览被用作当前实体的缩略图.",select_preview_file:"请从您的硬盘选择一张要被用作当前任务的预览的图片:",show_assignations:"显示多个任务分配",subscribe_notifications:"订阅通知",validation:"确认",tasks:"任务(多个)",fields:{assignees:"被分配任务人员(多名)",end_date:"结束日期",entity:"实体",last_comment:"最新注释",production:"制作",task_status:"状态",task_type:"类型"},priority:{emergency:"紧急",normal:"正常",high:"高",very_high:"非常高"}},timesheets:{detail_level:"细节层次",done_tasks:"已完成任务",hours:"小时",month:"月",time_spents:"已用时长(小时)",title:"时间表(多个)",year:"年"}},O={en:y,zh:k,fr:g};i.a.use(b["a"]);var S=new b["a"]({locale:"en",fallbackLocale:"en",messages:O}),w=S,T=s("8c4f"),C=s("a6e4"),P=s("48c6"),E=s("7f45"),j=s.n(E),x=s("4360"),D={setLocale:function(){var t=x["a"].state.user.user.locale;w.locale=t.substring(0,2),"zh_Hans_CN"===t?j.a.locale("zh_CN"):j.a.locale(t.substring(0,2))}},A=D,M={setTimezone:function(){var t=x["a"].state.user.user.timezone||j.a.tz.guess();j.a.tz.setDefault(t)}},L=s("2f24"),I=s("9fb0"),$=function(t){x["a"].commit(I["U"]);var e=["loadProductionStatus","loadTaskStatuses","loadAssetTypes","loadTaskTypes","loadPeople","loadOpenProductions","loadCustomActions","loadUserSearchFilters","loadNotifications"];L["a"].mapSeries(e,x["a"].dispatch,(function(e){e&&console.log("An init operation failed: ",e),x["a"].commit(I["T"]),t()}))},q=$,N=s("0f9a"),R=s("ef8b"),F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page asset"},[s("div",{staticClass:"page-header flexrow"},[s("router-link",{staticClass:"flexrow-item has-text-centered back-link",attrs:{to:t.assetsPath}},[s("chevron-left-icon")],1),t.currentAsset?s("entity-thumbnail",{staticClass:"asset-thumbnail flexrow-item",attrs:{entity:t.currentAsset,"with-link":!1}}):t._e(),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:t.title}})],1),s("div",{staticClass:"flexrow-item"},[s("button-simple",{attrs:{icon:"edit"},on:{click:function(e){t.modals.edit=!0}}})],1)],1),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:t.$t("assets.tasks")}}),s("entity-task-list",{staticClass:"task-list",attrs:{entries:t.currentAsset?t.currentAsset.tasks:[],"is-loading":!t.currentAsset,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:t.$t("main.info")}}),s("div",{staticClass:"table-body"},[t.currentAsset?s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("assets.fields.description")))]),s("description-cell",{attrs:{entry:t.currentAsset,full:!0}})],1),t._l(t.assetMetadataDescriptors,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"field-label"},[t._v(t._s(e.name))]),s("td",[t._v("\n                "+t._s(t.currentAsset.data?t.currentAsset.data[e.field_name]:"")+"\n              ")])])}))],2)]):t._e()])],1)]),s("div",{staticClass:"asset-casted-in"},[s("page-subtitle",{attrs:{text:t.$t("assets.cast_in")}}),t.currentAsset?s("div",[t.currentAsset.castInShotsBySequence&&t.currentAsset.castInShotsBySequence[0].length>0?s("div",t._l(t.currentAsset.castInShotsBySequence,(function(e){return s("div",{key:e.length>0?e[0].sequence_name:"",staticClass:"sequence-shots"},[s("div",{staticClass:"shot-sequence"},[t._v("\n            "+t._s(e.length>0?e[0].sequence_name:"")+"\n          ")]),s("div",{staticClass:"shot-list"},t._l(e,(function(e){return s("router-link",{key:e.shot_id,staticClass:"shot-link",attrs:{to:{name:"shot",params:{production_id:t.currentProduction.id,shot_id:e.shot_id}}}},[s("entity-thumbnail",{attrs:{entity:e,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[t._v(t._s(e.name))]),e.nb_occurences>1?s("span",[t._v("\n                  ("+t._s(e.nb_occurences)+")\n                ")]):t._e()])],1)})),1)])})),0):s("div",[t._v("\n        "+t._s(t.$t("assets.no_cast_in"))+"\n      ")])]):s("table-info",{attrs:{"is-loading":t.castIn.isLoadin,"is-error":t.castIn.isError}})],1),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:t.modals.edit,"is-loading":t.loading.edit,"is-error":t.errors.edit,"asset-to-edit":t.currentAsset},on:{cancel:function(e){t.modals.edit=!1},confirm:t.confirmEditAsset}})],1)},V=[],U=(s("7f7f"),s("0a35")),B=s("de40"),z=s("0fcb"),H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.assetToEdit&&this.assetToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("assets.edit_title"))+" "+t._s(t.assetToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("assets.new_asset"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("combobox",{attrs:{label:t.$t("assets.fields.type"),options:t.getAssetTypeOptions},model:{value:t.form.entity_type_id,callback:function(e){t.$set(t.form,"entity_type_id",e)},expression:"form.entity_type_id"}}),t.isTVShow?s("combobox",{attrs:{label:t.$t("assets.fields.episode"),options:t.episodeOptions},model:{value:t.form.source_id,callback:function(e){t.$set(t.form,"source_id",e)},expression:"form.source_id"}}):t._e(),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("assets.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"descriptionField",attrs:{label:t.$t("assets.fields.description")},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t._l(t.assetMetadataDescriptors,(function(e){return s("div",{key:e.id},[e.choices.length>0?s("combobox",{attrs:{label:e.name,options:t.getDescriptorChoicesOptions(e)},model:{value:t.form.data[e.field_name],callback:function(s){t.$set(t.form.data,e.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:e.name},on:{enter:t.runConfirmation},model:{value:t.form.data[e.field_name],callback:function(s){t.$set(t.form.data,e.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)}))],2),s("div",{staticClass:"has-text-right"},[t.assetToEdit&&t.assetToEdit.id?t._e():s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoadingStay},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:t.confirmAndStayClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation_and_stay"))+"\n        ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),t.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")]):s("button",{staticClass:"button is-link",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("assets.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.assetSuccessText)+"\n        ")])],1)])])])},G=[],W=s("75fc"),K=s("d065"),Y=s("7bf8"),Q=s("1149"),J=s("992f");function X(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Z(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?X(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):X(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var tt={name:"edit-asset-modal",mixins:[K["a"]],components:{TextField:Y["a"],TextareaField:Q["a"],Combobox:J["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","assetToEdit","errorText"],data:function(){return{form:{name:"",description:"",source_id:null,data:{}},assetSuccessText:""}},computed:Z({},Object(d["c"])(["assets","assetCreated","assetMetadataDescriptors","assetTypes","currentProduction","currentEpisode","episodes","getAssetTypeOptions","getOpenProductionOptions","isTVShow","openProductions"]),{episodeOptions:function(){var t=this.episodes.map((function(t){return{label:t.name,value:t.id}}));return t.unshift({label:this.$t("main.all"),value:"null"}),t}}),mounted:function(){this.resetForm(),this.assetSuccessText=""},methods:Z({},Object(d["b"])([]),{runConfirmation:function(){this.form.name.length>0&&(this.isEditing()?this.confirmClicked():this.confirmAndStayClicked())},focusName:function(){this.$refs.nameField.focus()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.assetToEdit&&this.assetToEdit.id},getDescriptorChoicesOptions:function(t){var e=t.choices.map((function(t){return{label:t,value:t}}));return[{label:"",value:""}].concat(Object(W["a"])(e))},resetForm:function(){this.isEditing()?this.form={entity_type_id:this.assetToEdit.asset_type_id,project_id:this.assetToEdit.project_id,name:this.assetToEdit.name,description:this.assetToEdit.description,source_id:this.assetToEdit.source_id||this.assetToEdit.episode_id,data:Z({},this.assetToEdit.data)||{}}:(!this.form.entity_type_id&&this.assetTypes.length>0&&(this.form.entity_type_id=this.assetTypes[0].id),this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.form.name="",this.form.description="",this.form.source_id=this.currentEpisode?this.currentEpisode.id:null,this.form.data={})}}),watch:{assetToEdit:function(){this.resetForm()},assetCreated:function(){this.isEditing()?this.assetSuccessText=this.$t("assets.edit_success",{name:this.assetCreated}):this.assetSuccessText=this.$t("assets.new_success",{name:this.assetCreated})},active:function(){var t=this;this.assetSuccessText="",this.resetForm(),this.active&&setTimeout((function(){t.$refs.nameField.focus()}),100)}}},et=tt,st=(s("971a"),Object(m["a"])(et,H,G,!1,null,"61fcc8b2",null)),nt=st.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"status"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_status"))+"\n          ")]),s("th",{staticClass:"assignees"},[t._v("\n            "+t._s(t.$t("tasks.fields.assignees"))+"\n          ")]),s("th",{staticClass:"end-cell"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,(function(e){return s("tr",{key:e.task_type_id},[t.getTaskType(e)?s("task-type-name",{staticClass:"type",attrs:{entry:t.getTaskType(e),"production-id":t.currentProduction.id}}):t._e(),s("td",{staticClass:"status"},[t.getTask(e)?s("validation-tag",{attrs:{task:t.getTask(e)}}):t._e()],1),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},t._l(t.getAssignees(e),(function(n){return s("div",{key:n,staticClass:"avatar-wrapper"},[s("people-avatar",{key:e.id+"-"+n,staticClass:"person-avatar flexrow-item",attrs:{person:t.personMap[n],size:30,"font-size":15}})],1)})),0)]),s("td",{staticClass:"end-cell"})],1)})),0)])]):t._e()],1)},at=[],ot=s("58f5"),rt=s("e60b"),ct=s("fe13"),dt=s("eb8c");function ut(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function lt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ut(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ut(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var pt={name:"todos-list",components:{TableInfo:rt["a"],TaskTypeName:ot["a"],PeopleAvatar:dt["a"],ValidationTag:ct["a"]},props:{entries:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:lt({},Object(d["c"])(["currentProduction","personMap","taskMap","taskTypeMap"])),methods:lt({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},getTask:function(t){return"string"===typeof t?this.taskMap[t]:t},getTaskType:function(t){var e=this.getTask(t);return e?this.taskTypeMap[e.task_type_id]:null},getAssignees:function(t){var e=this.getTask(t);return e?e.assignees:[]}})},ft=pt,ht=(s("95de"),Object(m["a"])(ft,it,at,!1,null,"f3bf6096",null)),mt=ht.exports,_t=s("bb21"),vt=s("8d07"),bt=s("8751");function yt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function gt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?yt(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):yt(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var kt={name:"asset",components:{ButtonSimple:B["a"],ChevronLeftIcon:U["e"],DescriptionCell:z["a"],EditAssetModal:nt,EntityThumbnail:_t["a"],EntityTaskList:mt,PageSubtitle:bt["a"],PageTitle:vt["a"],TableInfo:rt["a"]},data:function(){return{currentAsset:null,castIn:{isLoading:!1,isError:!1},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},created:function(){var t=this;if(this.currentProduction){var e={productionId:this.currentProduction.id};this.currentEpisode&&(e.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",e)}else this.setProduction(this.$route.params.production_id);this.clearSelectedTasks(),this.currentAsset=this.getCurrentAsset(),this.castIn.isLoading=!0,this.castIn.isError=!1,this.currentAsset?this.loadAssetCastIn({asset:this.currentAsset,callback:function(e,s){t.castIn.isError=!!e,t.castIn.isLoading=!0}}):this.loadAsset({assetId:this.route.params.asset_id,callback:function(e){e||(t.currentAsset=t.getCurrentAsset(),t.loadAssetCastIn({asset:t.currentAsset,callback:function(e,s){t.castIn.isError=!!e,t.castIn.isLoading=!0}}))}})},computed:gt({},Object(d["c"])(["assetMap","assetMetadataDescriptors","assetsPath","currentProduction","route"]),{title:function(){return this.currentAsset?"".concat(this.currentAsset.asset_type_name," / ")+"".concat(this.currentAsset.name):"Loading..."},assetThumbnailPath:function(){var t=this.currentAsset.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,".png")},isPreview:function(){return this.currentAsset&&this.currentAsset.preview_file_id&&this.currentAsset.preview_file_id.length>0}}),methods:gt({},Object(d["b"])(["editAsset","loadAsset","loadAssetCastIn","clearSelectedTasks"]),{changeTab:function(t){this.selectedTab=t},getCurrentAsset:function(){return this.assetMap[this.route.params.asset_id]||null},onEditClicked:function(){this.modals.edit=!0},confirmEditAsset:function(t){var e=this;t.id=this.currentAsset.id,this.loading.edit=!0,this.errors.edit=!1,this.editAsset({data:t,callback:function(t){t?(e.loading.edit=!1,e.errors.edit=!0):(e.loading.edit=!1,e.modals.edit=!1)}})}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Ot=kt,St=(s("887c"),Object(m["a"])(Ot,F,V,!1,null,"37a6fbfd",null)),wt=St.exports,Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"assets page"},[s("div",{staticClass:"asset-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("search-field",{ref:"asset-search-field",attrs:{"can-save":!0,placeholder:"ex: props modeling=wip"},on:{change:t.onSearchChange,save:t.saveSearchQuery}})],1)]),s("div",{staticClass:"level-right flexrow"},[s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),t.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:t.$t("main.csv.import_file"),icon:"upload","is-responsive":!0,path:t.importPath},on:{click:t.showImportModal}}),s("button-href-link",{staticClass:"flexrow-item",attrs:{title:t.$t("main.csv.export_file"),icon:"download","is-responsive":!0,path:"/api/export/csv/projects/"+t.currentProduction.id+"/assets.csv"}}),s("button-link",{staticClass:"flexrow-item",attrs:{text:t.$t("assets.new_asset"),icon:"plus","is-responsive":!0,path:t.newAssetPath}})],1):t._e()])]),s("div",{staticClass:"query-list"},[t.isAssetsLoading||t.initialLoading?t._e():s("search-query-list",{attrs:{queries:t.assetSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1)]),s("asset-list",{ref:"asset-list",attrs:{"displayed-assets":t.displayedAssetsByType,"is-loading":t.isAssetsLoading||t.initialLoading,"is-error":t.isAssetsLoadingError,"validation-columns":t.assetValidationColumns},on:{"create-tasks":t.showCreateTasksModal,scroll:t.saveScrollPosition,"delete-all-tasks":t.onDeleteAllTasksClicked,"add-metadata":t.onAddMetadataClicked,"delete-metadata":t.onDeleteMetadataClicked,"edit-metadata":t.onEditMetadataClicked}})],1)]),1===t.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(t.selectedTasks)[0]}})],1):t._e(),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-loading-stay":t.loading.stay,"is-error":t.editAsset.isCreateError,"is-success":t.editAsset.isSuccess,"cancel-route":t.assetsPath,"asset-to-edit":t.assetToEdit},on:{confirm:t.confirmEditAsset,confirmAndStay:t.confirmNewAssetStay}}),s("delete-modal",{ref:"delete-asset-modal",attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteAsset.isLoading,"is-error":t.deleteAsset.isError,"cancel-route":t.assetsPath,text:t.deleteText(),"error-text":t.$t("assets.delete_error")},on:{confirm:t.confirmDeleteAsset}}),s("delete-modal",{ref:"restore-asset-modal",attrs:{active:t.modals.isRestoreDisplayed,"is-loading":t.restoreAsset.isLoading,"is-error":t.restoreAsset.isDeleteError,"cancel-route":t.assetsPath,text:t.restoreText(),"error-text":t.$t("assets.restore_error")},on:{confirm:t.confirmRestoreAsset}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:t.modals.isDeleteAllTasksDisplayed,"is-loading":t.loading.deleteAllTasks,"is-error":t.errors.deleteAllTasks,"cancel-route":t.assetsPath,text:t.deleteAllTasksText(),"error-text":t.$t("tasks.delete_all_error"),"lock-text":t.deleteAllTasksLockText},on:{confirm:t.confirmDeleteAllTasks}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:t.modals.isDeleteMetadataDisplayed,"is-loading":t.loading.deleteMetadata,"is-error":t.errors.deleteMetadata,text:t.$t("productions.metadata.delete_text"),"error-text":t.$t("productions.metadata.delete_error")},on:{cancel:function(e){t.modals.isDeleteMetadataDisplayed=!1},confirm:t.confirmDeleteMetadata}}),s("import-modal",{attrs:{active:t.modals.isImportDisplayed,"is-loading":t.loading.importing,"is-error":t.errors.importing,"form-data":t.assetsCsvFormData,columns:t.columns},on:{fileselected:t.selectFile,confirm:t.uploadImportFile,cancel:t.hideImportModal}}),s("create-tasks-modal",{attrs:{active:t.modals.isCreateTasksDisplayed,"is-loading":t.loading.creatingTasks,"is-loading-stay":t.loading.taskStay,"is-error":t.errors.creatingTasks,title:t.$t("tasks.create_tasks_asset"),text:t.$t("tasks.create_tasks_asset_explaination"),"error-text":t.$t("tasks.create_tasks_asset_failed")},on:{cancel:t.hideCreateTasksModal,confirm:t.confirmCreateTasks,"confirm-and-stay":t.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:t.modals.isAddMetadataDisplayed,"is-loading":t.loading.addMetadata,"is-loading-stay":t.loading.addMetadata,"is-error":t.errors.addMetadata,"descriptor-to-edit":t.descriptorToEdit},on:{cancel:function(e){t.modals.isAddMetadataDisplayed=!1},confirm:t.confirmAddMetadata}})],1)},Ct=[],Pt=(s("7514"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":t.hiddenColumns[t.lastHeaderMenuDisplayed],"is-current-user-admin":t.isCurrentUserAdmin},on:{"minimize-clicked":function(e){return t.onMinimizeColumnToggled()},"delete-all-clicked":function(e){return t.onDeleteAllTasksClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":t.isCurrentUserAdmin},on:{"edit-clicked":function(e){return t.onEditMetadataClicked()},"delete-clicked":function(e){return t.onDeleteMetadataClicked()}}}),s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[t.isTVShow?s("th",{ref:"th-episode",staticClass:"episode"},[t._v("\n            "+t._s(t.$t("assets.fields.episode"))+"\n          ")]):t._e(),s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),s("th",{ref:"th-name",staticClass:"name"},[t._v(t._s(t.$t("assets.fields.name")))]),!t.isCurrentUserClient&&t.isShowInfos?s("th",{ref:"th-description",staticClass:"description"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[t._v("\n              "+t._s(t.$t("assets.fields.description"))+"\n              ")]),t.isCurrentUserAdmin&&!t.isLoading?s("button-simple",{staticClass:"is-small flexrow-item",attrs:{icon:"plus",text:""},on:{click:t.onAddMetadataClicked}}):t._e()],1)]):t._e(),t._l(t.assetMetadataDescriptors,(function(e){return t.isShowInfos?s("th",{key:e.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item descriptor-name"},[t._v("\n              "+t._s(e.name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return t.showMetadataHeaderMenu(e.id,s)}}})],1)]):t._e()})),!t.isCurrentUserClient&&t.isShowInfos&&t.isAssetTime?s("th",{ref:"th-spent",staticClass:"time-spent"},[t._v("\n            "+t._s(t.$t("assets.fields.time_spent"))+"\n          ")]):t._e(),t._l(t.sortedValidationColumns,(function(e){return t.isLoading||t.hiddenColumns[e]&&!t.isShowInfos?t._e():s("th",{key:e,class:{"validation-cell":!t.hiddenColumns[e],"hidden-validation-cell":t.hiddenColumns[e]},style:t.getValidationStyle(e)},[s("div",{staticClass:"flexrow"},[s("router-link",{staticClass:"flexrow-item validation-name",staticStyle:{"margin-right":"0"},attrs:{to:t.taskTypePath(e)}},[t._v("\n                "+t._s(t.hiddenColumns[e]?"":t.taskTypeMap[e].name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return t.showHeaderMenu(e,s)}}})],1)])})),s("th",{staticClass:"actions"},[t.isCurrentUserManager&&t.displayedAssets.length>0&&!t.isLoading?s("button-simple",{class:{"is-small":!0,highlighted:t.isEmptyTask},attrs:{icon:"plus",text:t.$t("tasks.create_tasks")},on:{click:function(e){return t.$emit("create-tasks")}}}):t._e()],1)],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),!t.isEmptyList||t.isCurrentUserClient||t.isLoading?t._e():s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("assets.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("assets.new_assets"),path:t.newAssetPath()}})],1),t.isEmptyList&&t.isCurrentUserClient&&!t.isLoading?s("div",{staticClass:"has-text-centered"},[t._m(1),s("p",{staticClass:"info"},[t._v(t._s(t.$t("assets.empty_list_client")))])]):t._e(),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[t.isListVisible?s("table",{staticClass:"table splitted-table unselectable"},t._l(t.displayedAssets,(function(e,n){return s("tbody",{key:e[0]?e[0].asset_type_id+e[0].canceled:"",ref:"body-tbody",refInFor:!0,staticClass:"tbody"},[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[t._v("\n            "+t._s(e[0]?e[0].asset_type_name:"")+"\n          ")])]),t._l(e,(function(e,i){return s("tr",{key:e.id,class:{canceled:e.canceled}},[t.isTVShow?s("td",{staticClass:"episode"},[t._v("\n            "+t._s(t.episodeMap[e.episode_id]?t.episodeMap[e.episode_id].name:t.$t("main.all"))+"\n          ")]):t._e(),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e}})],1),s("td",{class:{name:!0,bold:!e.canceled}},[s("router-link",{staticClass:"asset-link",attrs:{to:t.assetPath(e.id)}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1),!t.isCurrentUserClient&&t.isShowInfos?s("description-cell",{staticClass:"description",attrs:{entry:e}}):t._e(),t._l(t.assetMetadataDescriptors,(function(n){return t.isShowInfos?s("td",{key:e.id+"-"+n.id,staticClass:"metadata-descriptor"},[t._v("\n            "+t._s(e.data?e.data[n.field_name]:"")+"\n          ")]):t._e()})),!t.isCurrentUserClient&&t.isShowInfos&&t.isAssetTime?s("td",{staticClass:"time-spent"},[t._v("\n            "+t._s(t.formatDuration(e.timeSpent))+"\n          ")]):t._e(),t._l(t.sortedValidationColumns,(function(a,o){return!t.hiddenColumns[a]||t.isShowInfos?s("validation-cell",{key:a+"-"+e.id,ref:"validation-"+t.getIndex(i,n)+"-"+o,refInFor:!0,class:{"validation-cell":!t.hiddenColumns[a],"hidden-validation-cell":t.hiddenColumns[a]},attrs:{column:t.taskTypeMap[a],entity:e,"task-test":t.taskMap[e.validations[a]],selected:t.assetSelectionGrid[t.getIndex(i,n)][o],rowX:t.getIndex(i,n),columnY:o,minimized:t.hiddenColumns[a],"is-static":!0,"is-assignees":t.isShowAssignations},on:{select:t.onTaskSelected,unselect:t.onTaskUnselected}}):t._e()})),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":t.editPath(e.id),"delete-route":t.deletePath(e.id),"restore-route":t.restorePath(e.id)}}):s("td",{staticClass:"actions"})],2)})),t._m(2,!0)],2)})),0):t._e()]),t.isEmptyList||t.isLoading?t._e():s("p",{staticClass:"has-text-centered nb-assets"},[t._v("\n    "+t._s(t.displayedAssetsLength)+" "+t._s(t.$tc("assets.number",t.displayedAssetsLength))+"\n  ")])],1)}),Et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("66a5")}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("66a5")}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"empty-line"},[s("td",{attrs:{colspan:"30"}})])}],jt=s("e9c6"),xt=s("4f18"),Dt=s("1338"),At=s("e211"),Mt=s("03b1"),Lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-menu hidden"},[s("div",{on:{click:function(e){return t.$emit("minimize-clicked")}}},[t.isMinimized?s("span",[t._v("\n      "+t._s(t.$t("main.maximize"))+"\n    ")]):s("span",[t._v(t._s(t.$t("main.minimize")))])]),t.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(e){return t.$emit("delete-all-clicked")}}},[t._v("\n    "+t._s(t.$t("main.delete_all"))+"\n  ")]):t._e()])},It=[];function $t(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function qt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?$t(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):$t(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Nt={name:"table-header-menu",props:{isMinimized:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:qt({},Object(d["c"])([])),methods:qt({},Object(d["b"])([]))},Rt=Nt,Ft=(s("05fb"),Object(m["a"])(Rt,Lt,It,!1,null,"53a8772e",null)),Vt=Ft.exports,Ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-menu hidden"},[t.isCurrentUserAdmin?s("div",{on:{click:function(e){return t.$emit("edit-clicked")}}},[t._v("\n    "+t._s(t.$t("main.edit"))+"\n  ")]):t._e(),t.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(e){return t.$emit("delete-clicked")}}},[t._v("\n    "+t._s(t.$t("main.delete"))+"\n  ")]):t._e()])},Bt=[];function zt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Ht(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?zt(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):zt(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Gt={name:"table-metadata-header-menu",props:{isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:Ht({},Object(d["c"])([])),methods:Ht({},Object(d["b"])([]))},Wt=Gt,Kt=(s("9b9d"),Object(m["a"])(Wt,Ut,Bt,!1,null,"32da9ee2",null)),Yt=Kt.exports,Qt=s("cb0e");function Jt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Xt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Jt(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Jt(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Zt={name:"asset-list",mixins:[jt["a"],xt["a"],Dt["a"]],props:{displayedAssets:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!0},isError:{type:Boolean,default:!0},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonLink:At["a"],ButtonSimple:B["a"],DescriptionCell:z["a"],EntityThumbnail:_t["a"],ChevronDownIcon:U["d"],RowActions:Mt["a"],TableInfo:rt["a"],TableHeaderMenu:Vt,TableMetadataHeaderMenu:Yt,ValidationCell:Qt["a"]},computed:Xt({},Object(d["c"])(["assets","assetFilledColumns","assetMetadataDescriptors","assetSearchText","assetSelectionGrid","episodeMap","currentEpisode","currentProduction","displayedAssetsLength","nbSelectedTasks","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserManager","isShowAssignations","isShowInfos","isAssetTime","isTVShow","selectedTasks","taskMap","taskTypeMap"]),{createTasksPath:function(){return this.getPath("create-asset-tasks")},isEmptyList:function(){return 0===this.displayedAssetsLength&&!this.isLoading&&!this.isError&&(!this.assetSearchText||0===this.assetSearchText.length)},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedAssetsLength>0}}),methods:Xt({},Object(d["b"])(["displayMoreAssets"]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.loadMoreAssets()},loadMoreAssets:function(){this.displayMoreAssets(),this.$nextTick(this.resizeHeaders)},getIndex:function(t,e){var s=0,n=0;while(s<e)n+=this.displayedAssets[s].length,s++;return t+n},newAssetPath:function(){return this.getPath("new-asset")},assetPath:function(t){return this.getPath("asset",t)},editPath:function(t){return this.getPath("edit-asset",t)},deletePath:function(t){return this.getPath("delete-asset",t)},restorePath:function(t){return this.getPath("restore-asset",t)},taskTypePath:function(t){var e={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:t,type:"assets"}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-task-type",e.params.episode_id=this.currentEpisode.id),e},getPath:function(t,e){var s={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(t),s.params.episode_id=this.currentEpisode.id),e&&(s.params.asset_id=e),s},resizeHeaders:function(){this.$refs["th-episode"]?this.resizeSplittedTableHeaders([{index:0,name:"episode"},{index:1,name:"thumbnail"},{index:2,name:"name"},{index:3,name:"description"}]):this.resizeSplittedTableHeaders([{index:0,name:"thumbnail"},{index:1,name:"name"},{index:2,name:"description"}])}}),watch:{validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},te=Zt,ee=(s("96d8"),Object(m["a"])(te,Pt,Et,!1,null,"3fd525ff",null)),se=ee.exports,ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("productions.metadata.title"))+"\n      ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("assets.fields.name")},on:{enter:t.confirm},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("combobox",{directives:[{name:"focus",rawName:"v-focus"}],ref:"typeField",attrs:{label:t.$t("assets.fields.type"),options:t.typeOptions},on:{enter:t.confirm},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),"choices"===t.type?s("div",[s("p",{staticClass:"strong"},[t._v("\n          "+t._s(t.$t("productions.metadata.available_values"))+"\n        ")]),t.form.values.length>0?s("div",{ref:"valueList",staticClass:"choice-value-wrapper"},t._l(t.form.values,(function(e){return s("p",{key:e,staticClass:"choice-value"},[s("span",[t._v("\n              "+t._s(e)+"\n            ")]),s("span",{staticClass:"remove-button pull-right",on:{click:function(s){return t.removeValue(e)}}},[t._v("\n             x\n            ")])])})),0):s("div",[t._v("\n          "+t._s(t.$t("productions.metadata.add_new_values"))+"\n        ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"addChoiceField",attrs:{"button-label":t.$t("Add value")},on:{enter:t.addValue},model:{value:t.valueToAdd,callback:function(e){t.valueToAdd=e},expression:"valueToAdd"}})],1):t._e(),s("modal-footer",{attrs:{"error-text":t.$t("productions.metadata.error"),"is-loading":t.isLoading,"is-disabled":!t.isFormFilled},on:{confirm:t.confirm,cancel:function(e){return t.$emit("cancel")}}})],1)])])},ie=[],ae=s("66e7"),oe=s("d5c9");function re(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function ce(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?re(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):re(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var de={name:"add-metadata-modal",mixins:[K["a"]],components:{Combobox:J["a"],ModalFooter:oe["a"],TextField:Y["a"]},props:{active:{type:Boolean,default:!1},descriptorToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:"",values:[]},valueToAdd:"",type:"free",typeOptions:[{label:this.$t("productions.metadata.free"),value:"free"},{label:this.$t("productions.metadata.choices"),value:"choices"}]}},mounted:function(){this.reset()},computed:ce({},Object(d["c"])([]),{isFormFilled:function(){return this.form.name.length>0&&(this.form.values.length>0||"free"===this.type)},valueList:function(){return this.$refs.valueList}}),methods:ce({},Object(d["b"])([]),{addValue:function(){var t=this,e=this.$refs.addChoiceField.value;return!this.form.values.find((function(t){return t===e}))&&e&&(this.form.values.push(e),this.valueToAdd="",this.$nextTick((function(){t.valueList.scrollTop=t.valueList.scrollHeight}))),e},confirm:function(){return"free"===this.type&&(this.form.values=[]),this.$emit("confirm",this.form)},removeValue:function(t){this.form.values=Object(ae["d"])(this.form.values,t)},reset:function(){this.form={name:"",values:[]},this.valueToAdd="",this.descriptorToEdit.name&&(this.form={id:this.descriptorToEdit.id,name:"".concat(this.descriptorToEdit.name),values:Object(W["a"])(this.descriptorToEdit.choices)}),this.type=this.form.values.length>0?"choices":"free"}}),watch:{active:function(){var t=this;this.active&&(this.reset(),this.$nextTick((function(){t.$refs.nameField.focus()})))}}},ue=de,le=(s("d114"),Object(m["a"])(ue,ne,ie,!1,null,"37e06676",null)),pe=le.exports,fe=s("9355"),he=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("page-title",{attrs:{text:t.title}}),s("p",[t._v(t._s(t.text))]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("combobox",{attrs:{label:t.$t("tasks.fields.task_type"),options:t.isAssetTasks?t.getAssetTaskTypeOptions:t.getShotTaskTypeOptions},model:{value:t.form.task_type_id,callback:function(e){t.$set(t.form,"task_type_id",e)},expression:"form.task_type_id"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoadingStay},on:{click:t.confirmAndStayClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation_and_stay"))+"\n        ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("button",{staticClass:"button is-link",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.errorText)+"\n        ")]):t._e()])],1)])])},me=[];function _e(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function ve(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?_e(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):_e(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var be={name:"create-task-modal",mixins:[K["a"]],components:{PageTitle:vt["a"],Combobox:J["a"]},props:{active:{type:Boolean,default:!1},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isLoadingStay:{type:Boolean,default:!1},isSuccess:{type:Boolean,default:!1},text:{type:String,default:""},title:{type:String,default:""}},data:function(){return{form:{task_type_id:""}}},computed:ve({},Object(d["c"])(["taskTypes","getAssetTaskTypeOptions","getShotTaskTypeOptions"]),{isAssetTasks:function(){return this.$route.path.indexOf("assets")>=0}}),methods:ve({},Object(d["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},confirmAndStayClicked:function(){this.$emit("confirm-and-stay",this.form)}}),mounted:function(){this.isAssetTasks?this.getAssetTaskTypeOptions.length>0&&(this.form.task_type_id=this.getAssetTaskTypeOptions[0].value):this.getShotTaskTypeOptions.length>0&&(this.form.task_type_id=this.getShotTaskTypeOptions[0].value)}},ye=be,ge=(s("fd61"),Object(m["a"])(ye,he,me,!1,null,"b1c1d4b6",null)),ke=ge.exports,Oe=s("5f48"),Se=s("440f"),we=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[t._v(t._s(t.text))]),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userLockText,expression:"userLockText"}],ref:"confirmation-name",staticClass:"input",attrs:{type:"text"},domProps:{value:t.userLockText},on:{input:function(e){e.target.composing||(t.userLockText=e.target.value)}}})]),t.isError?s("p",{staticClass:"is-danger"},[t._v(t._s(t.errorText))]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":t.isLoading},attrs:{disabled:t.isLocked},on:{click:function(e){return t.$emit("confirm")}}},[t._v("\n            "+t._s(t.$t("main.confirmation"))+"\n          ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n            "+t._s(t.$t("main.cancel"))+"\n          ")])],1)])])])},Te=[];function Ce(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Pe(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ce(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ce(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ee={name:"hard-delete-modal",data:function(){return{userLockText:""}},props:{text:{type:String,default:""},active:{type:Boolean,default:!1},cancelRoute:{type:Object,default:function(){}},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},lockText:{type:String,default:"locked"}},computed:Pe({},Object(d["c"])([]),{isLocked:function(){return"locked"===this.lockText||this.lockText!==this.userLockText}}),methods:Pe({},Object(d["b"])([])),watch:{active:function(){var t=this;this.active&&(this.userLockText="",this.$nextTick((function(){t.$refs["confirmation-name"]&&t.$refs["confirmation-name"].focus()})))}}},je=Ee,xe=(s("4ca5"),Object(m["a"])(je,we,Te,!1,null,"0eb9c986",null)),De=xe.exports,Ae=s("4d04"),Me=s("55ce"),Le=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":t.isShowAssignations},attrs:{title:t.$t(t.isShowAssignations?"tasks.hide_assignations":"tasks.show_assignations")},on:{click:t.toggleAssignations}},[s("users-icon",{staticClass:"icon is-small"})],1)},Ie=[];function $e(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function qe(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?$e(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):$e(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ne={name:"show-assignations-button",components:{UsersIcon:U["H"]},props:{},computed:qe({},Object(d["c"])(["isShowAssignations"])),methods:qe({},Object(d["b"])(["showAssignations","hideAssignations"]),{toggleAssignations:function(){this.isShowAssignations?this.hideAssignations():this.showAssignations()}}),mounted:function(){"false"===localStorage.getItem("show-assignations")?this.hideAssignations():this.showAssignations()},watch:{isShowAssignations:function(){localStorage.setItem("show-assignations",this.isShowAssignations,{expires:"1M"})}}},Re=Ne,Fe=Object(m["a"])(Re,Le,Ie,!1,null,null,null),Ve=Fe.exports,Ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":t.isShowInfos},attrs:{title:t.$t(t.isShowInfos?"tasks.hide_infos":"tasks.show_infos")},on:{click:t.toggleInfos}},[s("database-icon",{staticClass:"icon is-small"})],1)},Be=[];function ze(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function He(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ze(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ze(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ge={name:"show-infos-button",components:{DatabaseIcon:U["h"]},props:{},computed:He({},Object(d["c"])(["isShowInfos"])),methods:He({},Object(d["b"])(["showInfos","hideInfos"]),{toggleInfos:function(){this.isShowInfos?this.hideInfos():this.showInfos()}}),mounted:function(){"false"===localStorage.getItem("show-infos")?this.hideInfos():this.showInfos()},watch:{isShowInfos:function(){localStorage.setItem("show-infos",this.isShowInfos,{expires:"1M"})}}},We=Ge,Ke=Object(m["a"])(We,Ue,Be,!1,null,null,null),Ye=Ke.exports,Qe=s("9d94");function Je(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Xe(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Je(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Je(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ze={name:"assets",components:{AssetList:se,AddMetadataModal:pe,ButtonLink:At["a"],ButtonHrefLink:fe["a"],ButtonSimple:B["a"],CreateTasksModal:ke,DeleteModal:Oe["a"],EditAssetModal:nt,HardDeleteModal:De,ImportModal:Se["a"],SearchField:Ae["a"],SearchQueryList:Me["a"],ShowAssignationsButton:Ve,ShowInfosButton:Ye,TaskInfo:Qe["a"]},data:function(){return{initialLoading:!0,modals:{isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isNewDisplayed:!1},loading:{addMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,importing:!1,stay:!1,taskStay:!1},errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,importing:!1},assetToDelete:null,assetToRestore:null,assetToEdit:null,assetFilters:[{type:"Type",value:{name:"open"}}],assetFilterTypes:["Type"],descriptorToEdit:{},columns:["Type","Name","Description"],deleteAllTasksLockText:null}},computed:Xe({},Object(d["c"])(["assetMap","assetsPath","assetListScrollPosition","assetsCsvFormData","assetSearchText","assetSearchQueries","assetTypes","assetValidationColumns","currentEpisode","currentProduction","editAsset","deleteAsset","displayedAssetsByType","openProductions","isAssetsLoading","isAssetsLoadingError","isCurrentUserManager","isTVShow","nbSelectedTasks","restoreAsset","selectedTasks","taskTypeMap"]),{newAssetPath:function(){return this.getPath("new-asset")},importPath:function(){return this.getPath("import-assets")}}),created:function(){this.setLastProductionScreen("assets")},mounted:function(){var t=this;this.assetSearchText.length>0&&this.$refs["asset-search-field"].setValue(this.assetSearchText),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition),Object.keys(this.assetMap).length<2||this.assetValidationColumns.length>0&&!Object.keys(this.assetMap)[0].validations?setTimeout((function(){t.loadAssets((function(e){e||(t.handleModalsDisplay(),t.onSearchChange(),setTimeout((function(){t.$refs["asset-list"]&&t.$refs["asset-list"].setScrollPosition(t.assetListScrollPosition)}),500)),setTimeout((function(){t.initialLoading=!1,t.resizeHeaders()}),200)}))}),0):(this.isAssetsLoading||(this.initialLoading=!1),this.onSearchChange(),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition))},methods:Xe({},Object(d["b"])(["addMetadataDescriptor","deleteAllTasks","deleteMetadataDescriptor","loadAssets","loadComment","removeAssetSearch","saveAssetSearch","setLastProductionScreen","setAssetSearch"]),{confirmNewAssetStay:function(t){var e=this,s="newAsset";this.loading.stay=!0,this.editAsset.isSuccess=!1,this.editAsset.isError=!1,this.$store.dispatch(s,{data:t,callback:function(t){e.loading.stay=!1,t?e.loading.edit=!1:(e.resetLightEditModal(),e.$refs["edit-asset-modal"].focusName(),e.editAsset.isSuccess=!0,e.resizeHeaders())}})},confirmEditAsset:function(t){var e=this,s="newAsset";this.loading.edit=!0,this.editAsset.isCreateError=!1,this.assetToEdit&&this.assetToEdit.id&&(s="editAsset",t.id=this.assetToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t?(e.loading.edit=!1,e.editAsset.isCreateError=!0):(e.loading.edit=!1,e.modals.isNewDisplayed=!1,e.$router.push(e.assetsPath),e.resizeHeaders())}})},confirmDeleteAsset:function(){var t=this;this.$store.dispatch("deleteAsset",{asset:this.assetToDelete,callback:function(e){e||t.$router.push(t.assetsPath)}})},confirmRestoreAsset:function(){var t=this;this.$store.dispatch("restoreAsset",{asset:this.assetToRestore,callback:function(e){e||(t.modals.isRestoreDisplayed=!1)}})},confirmCreateTasks:function(t){var e=this;this.loading.creatingTasks=!0,this.runTasksCreation(t,(function(){e.hideCreateTasksModal(),e.loading.creatingTasks=!1}))},confirmCreateTasksAndStay:function(t){var e=this;this.loading.taskStay=!0,this.runTasksCreation(t,(function(){e.loading.taskStay=!1}))},runTasksCreation:function(t,e){var s=this;this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:t.task_type_id,type:"assets",project_id:this.currentProduction.id,callback:function(t){t?s.errors.creatingTasks=!0:s.loadAssets((function(){s.resizeHeaders()})),e(t)}})},confirmDeleteAllTasks:function(){var t=this,e=this.$route.params.task_type_id,s=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllTasks({projectId:s,taskTypeId:e}).then((function(){t.loading.deleteAllTasks=!1,t.loadAssets((function(){t.resizeHeaders()})),t.$router.push(t.assetsPath)})).catch((function(e){console.error(e),t.loading.deleteAllTasks=!1,t.errors.deleteAllTasks=!0}))},confirmDeleteMetadata:function(){var t=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){t.errors.deleteMetadata=!1,t.loading.deleteMetadata=!1,t.modals.isDeleteMetadataDisplayed=!1})).catch((function(e){console.error(e),t.errors.deleteMetadata=!0,t.loading.deleteMetadata=!1}))},resetLightEditModal:function(){var t={name:"",entity_type_id:this.assetToEdit.entity_type_id,production_id:this.currentProduction.id};this.assetToEdit=t},resetEditModal:function(){var t={name:""};this.assetTypes.length>0&&(t.asset_type_id=this.assetTypes[0].id),t.production_id=this.currentProduction.id,this.assetToEdit=t},deleteText:function(){var t=this.assetToDelete;return t?this.$t("assets.delete_text",{name:t.name}):""},deleteAllTasksText:function(){var t=this.taskTypeMap[this.$route.params.task_type_id];return t?this.$t("tasks.delete_all_text",{name:t.name}):""},restoreText:function(){var t=this.assetToRestore;return t?this.$t("assets.restore_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.asset_id;if(this.editAsset.isSuccess=!1,this.editAsset.isError=!1,t.indexOf("new")>0)this.resetEditModal(),this.editAsset.isSuccess=!1,this.modals.isNewDisplayed=!0;else if(t.indexOf("edit")>0)this.editAsset.isSuccess=!1,this.assetToEdit=this.assetMap[e],this.modals.isNewDisplayed=!0;else if(t.indexOf("delete-all-tasks")>0){var s=this.taskTypeMap[this.$route.params.task_type_id];this.deleteAllTasksLockText=s.name,this.modals.isDeleteAllTasksDisplayed=!0}else t.indexOf("delete")>0?(this.assetToDelete=this.assetMap[e],this.modals.isDeleteDisplayed=!0):t.indexOf("restore")>0?(this.assetToRestore=this.assetMap[e],this.modals.isRestoreDisplayed=!0):this.modals={isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1}},selectFile:function(t){this.$store.commit("ASSET_CSV_FILE_SELECTED",t)},uploadImportFile:function(){var t=this;this.loading.importing=!0,this.errors.importing=!1,this.$store.dispatch("uploadAssetFile",(function(e){e?(t.loading.importing=!1,t.errors.importing=!0):(t.loading.importing=!1,t.loadAssets((function(){t.resizeHeaders()})),t.hideImportModal())}))},onSearchChange:function(){var t=this.$refs["asset-search-field"].getValue();1!==t.length&&(this.setAssetSearch(t),this.resizeHeaders())},changeSearch:function(t){this.$refs["asset-search-field"].setValue(t.search_query),this.$refs["asset-search-field"].$emit("change",t.search_query),this.resizeHeaders()},saveSearchQuery:function(t){this.saveAssetSearch(t).then((function(){})).catch((function(t){t&&console.log("error")}))},removeSearchQuery:function(t){this.removeAssetSearch(t).then((function(){})).catch((function(t){t&&console.log("error")}))},saveScrollPosition:function(t){this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",t)},getPath:function(t){var e={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-".concat(t),e.params.episode_id=this.currentEpisode.id),e},resizeHeaders:function(){var t=this;setTimeout((function(){t.$refs["asset-list"]&&t.$refs["asset-list"].resizeHeaders()}),0)},onDeleteAllTasksClicked:function(t){var e=this.getPath("delete-all-asset-tasks"),s=this.taskTypeMap[t];e.params.task_type_id=t,this.deleteAllTasksLockText=s.name,this.$router.push(e)},confirmAddMetadata:function(t){var e=this;this.loading.addMetadata=!0,t.entity_type="Asset",this.addMetadataDescriptor(t).then((function(){e.loading.addMetadata=!1,e.modals.isAddMetadataDisplayed=!1})).catch((function(t){console.error(t),e.loading.addMetadata=!1,e.errors.addMetadata=!0}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(t){this.descriptorIdToDelete=t,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(t){this.descriptorToEdit=this.currentProduction.descriptors.find((function(e){return e.id===t})),this.modals.isAddMetadataDisplayed=!0},showImportModal:function(){this.modals.isImportDisplayed=!0},hideImportModal:function(){this.modals.isImportDisplayed=!1},showCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!0},hideCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!1}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var t=this;this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.isTVShow||(this.initialLoading=!0,this.loadAssets((function(e){t.initialLoading=!1,t.resizeHeaders(),e||t.handleModalsDisplay()})))},currentEpisode:function(){var t=this;this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.isTVShow&&this.currentEpisode&&(this.initialLoading=!0,this.loadAssets((function(e){e||(t.handleModalsDisplay(),t.initialLoading=!1,t.resizeHeaders())})))},displayedAssets:function(){this.resizeHeaders()}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("assets.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("assets.title")," - Kitsu")}}},ts=Ze,es=(s("3ee4"),Object(m["a"])(ts,Tt,Ct,!1,null,"9e6860da",null)),ss=es.exports,ns=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login hero is-fullheight"},[s("div",{staticClass:"container has-text-centered"},[s("div",{staticClass:"box has-text-left"},[t._m(0),s("div",{staticClass:"field mt1"},[s("p",{staticClass:"control has-icon"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"input is-medium email",attrs:{type:"text",placeholder:t.$t("login.fields.email")},on:{input:t.updateEmail,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.confirmLogIn(e)}}}),s("span",{staticClass:"icon"},[s("mail-icon",{attrs:{width:"20",height:"20"}})],1)])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icon"},[s("input",{staticClass:"input is-medium password",attrs:{type:"password",placeholder:t.$t("login.fields.password")},on:{input:t.updatePassword,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.confirmLogIn(e)}}}),s("span",{staticClass:"icon"},[s("lock-icon",{attrs:{width:"20",height:"20"}})],1)])]),s("p",{staticClass:"control"},[s("a",{class:{button:!0,"main-button":!0,"is-fullwidth":!0,"is-loading":t.isLoginLoading},on:{click:t.confirmLogIn}},[t._v("\n          "+t._s(t.$t("login.login"))+"\n        ")])]),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isLoginError,expression:"isLoginError"}],staticClass:"control error"},[t._v("\n        "+t._s(t.$t("login.login_failed"))+"\n      ")]),s("p",{staticClass:"has-text-centered"},[s("router-link",{attrs:{to:{name:"reset-password"}}},[t._v("\n          "+t._s(t.$t("login.forgot_password"))+"\n        ")])],1)])])])},is=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"has-text-centered login-header"},[n("img",{attrs:{src:s("ad6c")}}),n("h1",{staticClass:"title"},[t._v("\n          Kitsu\n        ")])])}];function as(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function os(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?as(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):as(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var rs={name:"login",components:{MailIcon:U["q"],LockIcon:U["p"]},computed:os({},Object(d["c"])(["isLoginLoading","isLoginError"])),methods:os({},Object(d["b"])(["logIn"]),{updateEmail:function(t){this.$store.dispatch("changeEmail",t.target.value)},updatePassword:function(t){this.$store.dispatch("changePassword",t.target.value)},confirmLogIn:function(){var t=this;this.logIn((function(e,s){e&&(e.default_password?t.$router.push({name:"reset-change-password",params:{token:e.token}}):console.log(e)),s&&t.$router.push("/")}))}}),metaInfo:function(){return{title:this.$t("login.title")}}},cs=rs,ds=(s("5aca"),Object(m["a"])(cs,ns,is,!1,null,"0f148f0e",null)),us=ds.exports,ls=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("topbar"),s("action-topbar"),s("sidebar"),s("router-view")],1)},ps=[],fs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"topbar"},[s("div",{class:{"is-active":!t.isUserMenuHidden},attrs:{id:"c-mask-user-menu"},on:{click:function(e){return t.toggleUserMenu()}}}),s("nav",{staticClass:"nav"},[s("div",{staticClass:"nav-left"},[s("a",{staticClass:"nav-item sidebar-button",class:{selected:!t.isSidebarHidden},attrs:{id:"toggle-menu-button"},on:{click:function(e){return t.toggleSidebar()}}},[t._v("\n        ≡\n      ")]),t.isProductionContext?s("div",{class:{"nav-item":!0}},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-item"},[s("combobox",{staticClass:"context-selector",attrs:{options:t.openProductionOptions,"is-top":!0},model:{value:t.currentProductionId,callback:function(e){t.currentProductionId=e},expression:"currentProductionId"}}),s("strong",[t._v("\n            >\n            ")]),s("combobox",{staticClass:"context-selector",attrs:{options:t.navigationOptions,"is-top":!0},model:{value:t.currentProjectSection,callback:function(e){t.currentProjectSection=e},expression:"currentProjectSection"}}),t.isEpisodeContext?s("strong",[t._v("\n            >\n            ")]):t._e(),t.isEpisodeContext?s("combobox",{staticClass:"context-selector",attrs:{options:t.episodeOptions,"is-top":!0},model:{value:t.currentEpisodeId,callback:function(e){t.currentEpisodeId=e},expression:"currentEpisodeId"}}):t._e()],1)])]):t.lastProduction&&"/open-productions"!==t.$route.path?s("div",{staticClass:"nav-item"},[s("router-link",{staticClass:"flexrow",attrs:{to:t.lastSectionPath}},[s("chevron-left-icon"),t._v("\n          "+t._s(t.$t("main.go_productions"))+"\n        ")],1)],1):t._e()]),s("div",{staticClass:"nav-right"},[s("notification-bell"),s("div",{ref:"user-name",class:{"nav-item":!0,"user-nav":!0,active:!t.isUserMenuHidden},on:{click:t.toggleUserMenu}},[s("people-avatar",{ref:"avatar",staticClass:"avatar",attrs:{"no-cache":!0,person:t.user,"is-link":!1}}),s("people-name",{staticClass:"user-name",attrs:{person:t.user}})],1)],1)]),s("nav",{directives:[{name:"show",rawName:"v-show",value:!t.isUserMenuHidden,expression:"!isUserMenuHidden"}],ref:"user-menu",staticClass:"user-menu"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/profile"},nativeOn:{click:function(e){return t.toggleUserMenu()}}},[t._v("\n          "+t._s(t.$t("main.profile"))+"\n        ")])],1),s("li",{on:{click:t.toggleDarkTheme}},[t.isDarkTheme?s("span",[t._v("\n          "+t._s(t.$t("main.white_theme"))+"\n        ")]):s("span",[t._v("\n          "+t._s(t.$t("main.dark_theme"))+"\n        ")])]),s("li",[s("a",{attrs:{href:"https://kitsu.cg-wire.com",target:"_blank"}},[t._v("\n          "+t._s(t.$t("main.documentation"))+"\n        ")])]),t._m(0),t._m(1),s("li",[s("a",{attrs:{href:"https://cg-wire.com/en/about.html",target:"_blank"}},[t._v("\n          "+t._s(t.$t("main.about"))+"\n        ")])]),s("li",{on:{click:t.onLogoutClicked}},[t._v("\n        "+t._s(t.$t("main.logout"))+"\n      ")]),s("li",{staticClass:"version"},[t._v("\n        Kitsu "+t._s(t.kitsuVersion)+"\n      ")])])])])},hs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("a",{attrs:{href:"https://slack.cg-wire.com",target:"_blank"}},[t._v("\n          Slack\n        ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("a",{attrs:{href:"https://trello.com/b/TGi6LZNa/kitsu-roadmap",target:"_blank"}},[t._v("\n          Roadmap\n        ")])])}],ms=(s("28a5"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-item"},[s("router-link",{attrs:{to:{name:"notifications"}}},[s("bell-icon",{class:t.notificationBellClass})],1)],1)}),_s=[];function vs(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function bs(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?vs(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):vs(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var ys={name:"notification-bell",components:{BellIcon:U["b"]},props:{isWhite:{type:Boolean,default:!1}},computed:bs({},Object(d["c"])(["isNewNotification"]),{notificationBellClass:function(){return this.isNewNotification?{"has-notifications":!0}:this.isWhite?{"has-no-notifications":!0,white:!0}:{"has-no-notifications":!0}}})},gs=ys,ks=(s("6366"),Object(m["a"])(gs,ms,_s,!1,null,"29330b35",null)),Os=ks.exports,Ss=s("0073"),ws=s("9224");function Ts(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Cs(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ts(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ts(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ps={name:"topbar",components:{Combobox:J["a"],ChevronLeftIcon:U["e"],NotificationBell:Os,PeopleName:Ss["a"],PeopleAvatar:dt["a"]},data:function(){return{currentProductionId:this.$route.params.production_id,currentEpisodeId:this.$route.params.episode_id,currentProjectSection:this.getCurrentSectionFromRoute(),kitsuVersion:ws["a"],silent:!1}},mounted:function(){var t=this.$refs["user-menu"],e=this.$refs["user-name"];if(e){var s=e.clientWidth;s>100&&(t.style.width="".concat(s,"px"),e.style.width="".concat(s,"px"))}this.setProductionFromRoute()},computed:Cs({},Object(d["c"])(["assetsPath","currentEpisode","currentProduction","episodes","episodeOptions","isDarkTheme","isSidebarHidden","isUserMenuHidden","isTVShow","isNewNotification","lastProductionScreen","lastProductionViewed","openProductions","openProductionOptions","productionMap","user"]),{isShotPage:function(){return this.$route.params.episode_id},isProductionContext:function(){return void 0!==this.$route.params.production_id||this.$route.path.indexOf("tasks")>0},isEpisodeContext:function(){return this.isTVShow&&this.isShotPage&&this.episodes.length>0},lastProduction:function(){var t=this.productionMap[this.lastProductionViewed];return t||(t=this.currentProduction),t},lastSectionPath:function(){var t=this.lastProduction,e=this.lastProductionScreen,s={name:e,params:{production_id:t.id}};return"tvshow"===t.production_type&&(s.name="episode-".concat(e),s.params.episode_id=t.first_episode_id),s},navigationOptions:function(){var t=[{label:this.$t("assets.title"),value:"assets"},{label:this.$t("shots.title"),value:"shots"},{label:this.$t("sequences.title"),value:"sequences"},{label:this.$t("episodes.title"),value:"episodes"},{label:this.$t("asset_types.production_title"),value:"assetTypes"},{label:this.$t("breakdown.title"),value:"breakdown"},{label:this.$t("playlists.title"),value:"playlists"},{label:this.$t("people.team"),value:"team"},{label:this.$t("news.title"),value:"newsFeed"},{label:this.$t("schedule.title"),value:"schedule"}];return this.isTVShow||t.splice(3,1),t}}),methods:Cs({},Object(d["b"])(["clearEpisodes","loadEpisodes","loadNotification","logout","setProduction","setCurrentEpisode","toggleDarkTheme","toggleSidebar","toggleUserMenu"]),{onLogoutClicked:function(){var t=this;this.logout((function(e,s){e&&console.log(e),t.toggleUserMenu(),s&&t.$router.push("/login")}))},getCurrentSectionFromRoute:function(){var t="",e=this.$route.path.split("/");return this.isTVShow&&(t=e[5]),t||(t=e[3],"episodes"===t&&6===e.length&&(t=e[5])),"asset-types"===t&&(t="assetTypes"),"news-feed"===t&&(t="newsFeed"),t},updateRoute:function(){var t=this.getCurrentSectionFromRoute(),e=this.currentProjectSection,s=e&&this.$route.path.indexOf("manage")<0,n=e!==t||this.$route.params.production_id!==this.currentProductionId||this.currentEpisodeId&&this.$route.params.episode_id&&this.$route.params.episode_id!==this.currentEpisodeId;return e&&"newsFeed"===e&&(e="news-feed"),s&&n&&("assetTypes"===e&&(e="production-asset-types"),this.pushContextRoute(e)),this.$route.path},pushContextRoute:function(t){var e=this.currentEpisodeId,s=!!this.currentEpisodeId,n={name:t,params:{production_id:this.currentProductionId}};!this.productionMap[this.currentProductionId]||this.$route.params.production_id===this.currentProductionId&&e||(e=this.productionMap[this.currentProductionId].first_episode_id,s="tvshow"===this.productionMap[this.currentProductionId].production_type);var i=s&&"team"!==t&&"news-feed"!==t&&"schedule"!==t&&"episodes"!==t;i?(n.name="episode-".concat(t),n.params.episode_id=e):"episodes"!==t||s||(n.name="assets"),n.params.production_id&&this.$router.push(n)},clearContext:function(){this.silent=!0,this.currentProductionId=null,this.currentEpisodeId=null,this.currentProjectSection=null,this.setCurrentEpisode(null),this.setProduction(null),this.silent=!1},setProductionFromRoute:function(){var t=this,e=this.$route.params.production_id,s=this.$route.params.episode_id;this.currentProduction&&this.currentProductionId===e&&this.currentProduction.id===e?this.episodes.length<2&&this.isTVShow&&(!this.currentEpisode||this.currentEpisode.id!==s)?this.loadEpisodes((function(){t.setEpisodeFromRoute(),t.updateComboFromRoute()})):("open-productions"===this.assetsPath.name&&e&&this.setProduction(e),this.setEpisodeFromRoute(),this.updateComboFromRoute()):(this.setProduction(e),this.isTVShow?this.loadEpisodes((function(){t.setEpisodeFromRoute(),t.updateComboFromRoute()})):(this.clearEpisodes(),this.updateComboFromRoute()))},setEpisodeFromRoute:function(){var t=this.$route.params.episode_id;this.isTVShow?this.currentEpisode&&this.currentEpisodeId===t&&this.currentEpisode.id===t||this.setCurrentEpisode(t):(this.silent=!0,this.clearEpisodes(),this.currentEpisodeId=null,this.silent=!1)},updateContext:function(t){t?this.setProductionFromRoute():this.clearContext()},updateComboFromRoute:function(){var t=this.$route.params.production_id,e=this.$route.params.episode_id,s=this.getCurrentSectionFromRoute();this.silent=!0,this.currentProductionId=t,this.currentEpisodeId=e,this.currentProjectSection=s,this.silent=!1}}),watch:{$route:function(){var t=this.$route.params.production_id;this.updateContext(t)},currentProductionId:function(){this.silent||this.updateRoute()},currentEpisodeId:function(){this.silent||this.updateRoute()},currentProjectSection:function(){this.silent||this.updateRoute()}},socket:{events:{"notification:new":function(t){if(this.user.id===t.person_id){var e=t.notification_id;this.loadNotification(e)}},"person:update":function(t){this.user.id===t.person_id&&this.$refs.avatar.reloadAvatar()}}}},Es=Ps,js=(s("504d"),Object(m["a"])(Es,fs,hs,!1,null,"63522b22",null)),xs=js.exports,Ds=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{class:{"action-topbar":!0,hidden:t.isHidden}},[s("div",{staticClass:"flexrow action-bar"},[s("div",{staticClass:"flexrow-item more-menu-icon",on:{click:t.toggleMenu}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.currentMenuLabel)+"\n          ")]),s("chevron-down-icon",{staticClass:"flexrow-item"})],1)]),"assignation"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[t.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("div",{staticClass:"assignation flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.$tc("tasks.assign",t.nbSelectedTasks,{nbSelectedTasks:t.nbSelectedTasks}))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("people-field",{attrs:{people:t.currentTeam},model:{value:t.person,callback:function(e){t.person=e},expression:"person"}})],1),t.isAssignationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0,size:25}})],1):t._e(),t.isAssignationLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmAssign}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])]),t.isAssignationLoading?t._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.$t("main.or"))+"\n          ")]),t.isAssignationLoading?t._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[s("button",{staticClass:"button is-link clear-assignation-button hide-small-screen",on:{click:t.clearAssignation}},[t._v("\n              "+t._s(t.$t("tasks.clear_assignations"))+"\n            ")])])]):s("div",{staticStyle:{"padding-left":"1em"}},[t._v("\n          "+t._s(t.$t("tasks.no_assignation_right"))+"\n        ")])]):t._e(),"change-status"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.change_status_to"))+"\n          ")]),s("div",{staticClass:"flexrow-item"},[s("combobox-status",{attrs:{"task-status-list":t.taskStatusForCurrentUser},model:{value:t.taskStatusId,callback:function(e){t.taskStatusId=e},expression:"taskStatusId"}})],1),t.isChangeStatusLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmTaskStatusChange}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])]),t.isChangeStatusLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):t._e(),t.isChangeStatusLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.statusComment,expression:"statusComment"}],staticClass:"comment-text input",attrs:{type:"text",placeholder:t.$t("tasks.with_comment")},domProps:{value:t.statusComment},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.confirmTaskStatusChange(e):null},input:function(e){e.target.composing||(t.statusComment=e.target.value)}}})])])]):t._e(),"priorities"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.change_priority"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox",{attrs:{options:t.priorityOptions},model:{value:t.priority,callback:function(e){t.priority=e},expression:"priority"}})],1),t.isChangePriorityLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmPriorityChange}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])]),t.isChangePriorityLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):t._e()])]):t._e(),"estimations"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.set_estimations"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.estimation,expression:"estimation"}],staticClass:"input estimation-input",attrs:{type:"number",min:"0"},domProps:{value:t.estimation},on:{input:function(e){e.target.composing||(t.estimation=e.target.value)}}})]),t.isChangeEstimationLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmEstimationChange}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])]),t.isChangeEstimationLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):t._e()])]):t._e(),"tasks"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.create_for_selection"))+"\n          ")]),t.isCreationLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmTaskCreation}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")]),t.isCreationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0}})],1):t._e()])])]):t._e(),"delete-tasks"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.delete_for_selection"))+"\n          ")]),t.isDeletionLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-danger confirm-button",on:{click:t.confirmTaskDeletion}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])])])]):t._e(),"custom-actions"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("custom_actions.run_for_selection"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox-model",{attrs:{models:t.customActions},model:{value:t.customAction,callback:function(e){t.customAction=e},expression:"customAction"}})],1),t.customAction&&!t.customAction.is_ajax?s("div",{staticClass:"flexrow-item"},[s("form",{attrs:{target:"_blank",method:"POST",action:t.customAction.url}},[s("input",{attrs:{type:"hidden",id:"personid",name:"personid"},domProps:{value:t.user.id}}),s("input",{attrs:{type:"hidden",id:"personemail",name:"personemail"},domProps:{value:t.user.email}}),s("input",{attrs:{type:"hidden",id:"projectid",name:"projectid"},domProps:{value:t.currentProduction?t.currentProduction.id:null}}),s("input",{attrs:{type:"hidden",id:"currentpath",name:"currentpath"},domProps:{value:t.currentUrl}}),s("input",{attrs:{type:"hidden",id:"currentserver",name:"currentserver"},domProps:{value:t.currentHost}}),s("input",{attrs:{type:"hidden",id:"selection",name:"selection"},domProps:{value:t.selectedTaskIds}}),s("input",{attrs:{type:"hidden",id:"entitytype",name:"entitytype"},domProps:{value:t.currentEntityType}}),s("button",{staticClass:"button is-success",attrs:{type:"submit"}},[t._v("\n                "+t._s(t.$t("main.confirmation"))+"\n              ")])])]):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success",on:{click:t.runCustomAction}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])])])]):t._e(),s("div",{staticClass:"flexrow-item clear-selection-container has-text-right"},[s("div",{staticClass:"flexrow has-text-right"},[s("div",{staticStyle:{flex:"1"}}),s("notification-bell",{staticClass:"flexrow-item",attrs:{"is-white":!0}}),s("div",{staticClass:"clear-selection flexrow flexrow-item",on:{click:t.clearSelectedTasks}},[s("x-icon",{staticClass:"flexrow-item"}),s("span",{staticClass:"flexrow-item hide-small-screen"},[t._v("\n              "+t._s(t.$t("main.clear_selection"))+"\n            ")])],1)],1)])]),s("div",{ref:"moreMenu",class:{"more-menu":!0,"is-hidden":t.isMoreMenuDisplayed}},[t.isCurrentViewAsset||t.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(e){return t.selectBar("assignation")}}},[t._v("\n        "+t._s(t.$t("menu.assign_tasks"))+"\n      ")]):t._e(),s("div",{staticClass:"more-menu-item",on:{click:function(e){return t.selectBar("change-status")}}},[t._v("\n        "+t._s(t.$t("menu.change_status"))+"\n      ")]),t.isCurrentViewAsset||t.isCurrentViewShot||t.isCurrentViewPerson?s("div",{staticClass:"more-menu-item",on:{click:function(e){return t.selectBar("priorities")}}},[t._v("\n        "+t._s(t.$t("menu.change_priority"))+"\n      ")]):t._e(),t.isCurrentViewTaskType||t.isCurrentViewPerson?s("div",{staticClass:"more-menu-item",on:{click:function(e){return t.selectBar("estimations")}}},[t._v("\n        "+t._s(t.$t("menu.set_estimations"))+"\n      ")]):t._e(),!t.isCurrentViewAsset&&!t.isCurrentViewShot||t.isCurrentViewTaskType?t._e():s("div",{staticClass:"more-menu-item",on:{click:function(e){return t.selectBar("tasks")}}},[t._v("\n        "+t._s(t.$t("menu.create_tasks"))+"\n      ")]),t.isCurrentViewAsset||t.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(e){return t.selectBar("delete-tasks")}}},[t._v("\n        "+t._s(t.$t("menu.delete_tasks"))+"\n      ")]):t._e(),t.isCurrentViewTaskType?t._e():s("div",{staticClass:"more-menu-item",on:{click:function(e){return t.selectBar("custom-actions")}}},[t._v("\n        "+t._s(t.$t("menu.run_custom_action"))+"\n      ")])])]),s("div",{class:{"menu-mask":!0,"is-hidden":t.isMoreMenuDisplayed},on:{click:t.toggleMenu}})])},As=[],Ms=(s("20d6"),s("c5f6"),s("2229")),Ls=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("combobox",{attrs:{label:t.label,disabled:t.disabled,options:t.modelOptions,value:t.currentModelId},on:{input:t.emitValue,enter:t.emitEnter}})},Is=[],$s={name:"combobox-model",components:{Combobox:J["a"]},props:{label:{default:"",type:String},value:{default:function(){},type:Object},models:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{currentModelId:"",modelMap:{},modelOptions:[]}},mounted:function(){this.reset()},computed:{},methods:{emitValue:function(t){this.currentModelId=t;var e=this.modelMap[this.currentModelId];this.$emit("input",e)},emitEnter:function(t){this.currentModelId=t;var e=this.modelMap[this.currentModelId];this.$emit("enter",e)},reset:function(){var t=this;this.models.length>0&&(this.currentModelId=this.models[0].id,this.modelMap={},this.modelOptions=this.models.map((function(t){return{label:t.name,value:t.id}})),this.models.forEach((function(e){t.modelMap[e.id]=e})))}},watch:{models:function(){this.reset()}}},qs=$s,Ns=Object(m["a"])(qs,Ls,Is,!1,null,"7a8e9a6c",null),Rs=Ns.exports,Fs=s("56a0"),Vs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-autocomplete",{ref:"autocomplete",attrs:{items:t.items,"get-label":t.getAssignationLabel,"component-item":t.assignationItem,"min-len":1,"auto-select-one-item":!1,"input-attrs":{placeholder:this.$t("people.select_person")}},on:{"update-items":t.update,input:t.onChange},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})},Us=[],Bs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{"no-cache":!0,person:t.item,size:30}}),s("span",{staticClass:"flexrow-item"},[t._v("\n    "+t._s(t.item.name)+"\n  ")])],1)},zs=[],Hs={name:"assignation-item",components:{PeopleAvatar:dt["a"]},props:{item:{required:!0},searchText:{required:!0}},computed:{nonHighilightedText:function(){return this.searchText===this.item.first_name?"&nbsp;"+this.item.name.substring(this.searchText.length):this.item.name.substring(this.searchText.length)}}},Gs=Hs,Ws=(s("620e"),Object(m["a"])(Gs,Bs,zs,!1,null,"c09f3b40",null)),Ks=Ws.exports,Ys=s("2017");function Qs(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Js(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Qs(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Qs(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Xs={name:"people-field",data:function(){return{assignationItem:Ks,items:[],item:{},searchText:""}},created:function(){this.items=this.people,this.item=this.value,this.index=Object(Ys["c"])(this.people)},mounted:function(){var t=this;this.items=this.people,this.$refs.autocomplete.$el.children[0].children[0].addEventListener("keyup",(function(e){13===e.keyCode&&t.item&&t.$emit("enter"),t.searchText=t.$refs.autocomplete.$el.children[0].children[0].value,t.item||0!==t.searchText.length||(t.items=t.people)}))},props:{value:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}}},computed:Js({},Object(d["c"])(["peopleIndex"])),methods:{getAssignationLabel:function(t){return t?t.name:""},update:function(t){if(t){var e=Object(Ys["h"])(this.index,[t]);this.items=e}else this.items=this.people},onChange:function(){this.$emit("input",this.item)},clear:function(){this.item=null}},watch:{item:function(){this.item||(this.items=this.people)},people:function(){this.items=null,this.items=this.people,this.index=Object(Ys["c"])(this.people)}}},Zs=Xs,tn=(s("997c"),Object(m["a"])(Zs,Vs,Us,!1,null,null,null)),en=tn.exports;function sn(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function nn(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?sn(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):sn(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var an={name:"action-topbar",components:{ChevronDownIcon:U["d"],Combobox:J["a"],ComboboxModel:Rs,ComboboxStatus:Fs["a"],NotificationBell:Os,PeopleField:en,Spinner:u["a"],XIcon:U["I"]},data:function(){return{currentTeam:[],customAction:{},customActions:[],estimation:0,isAssignationLoading:!1,isChangeEstimationLoading:!1,isChangePriorityLoading:!1,isChangeStatusLoading:!1,isCreationLoading:!1,isDeletionLoading:!1,isMoreMenuDisplayed:!0,selectedBar:"assignation",person:null,priority:"0",selectedTaskIds:[],taskStatusId:"",statusComment:"",priorityOptions:[{label:this.$t("tasks.priority.normal"),value:"0"},{label:this.$t("tasks.priority.high"),value:"1"},{label:this.$t("tasks.priority.very_high"),value:"2"},{label:this.$t("tasks.priority.emergency"),value:"3"}]}},computed:nn({},Object(d["c"])(["allCustomActions","assetMap","assetCustomActions","currentProduction","getPersonOptions","isCurrentUserManager","nbSelectedTasks","nbSelectedValidations","people","personMap","selectedTasks","shotCustomActions","taskStatusForCurrentUser","user"]),{isHidden:function(){return 0===this.nbSelectedTasks&&0===this.nbSelectedValidations||!(this.isCurrentViewAsset||this.isCurrentViewTodos||this.isCurrentViewShot)||!this.isCurrentViewTodos&&!this.isCurrentUserManager},currentUrl:function(){return this.$route.path},currentHost:function(){return window.location.host},currentEntityType:function(){return this.isCurrentViewAsset?"asset":"shot"},defaultCustomAction:function(){return this.customActions.length>0?this.customActions[0]:{}},isCurrentViewAsset:function(){return this.$route.path.indexOf("asset")>0&&!this.$route.params.asset_id},isCurrentViewShot:function(){return this.$route.path.indexOf("shot")>0&&!this.$route.params.shot_id},isCurrentViewTodos:function(){return this.$route.path.indexOf("todos")>0||this.$route.path.indexOf("people/")>0},isCurrentViewPerson:function(){return this.$route.path.indexOf("people/")>0},isCurrentViewPersonTasks:function(){return this.$route.path.indexOf("todos")>0},isCurrentViewTaskType:function(){return this.$route.path.indexOf("task-type")>0},isList:function(){return this.isCurrentViewAsset||this.isCurrentViewShot},selectedPersonId:function(){return this.person?this.person.id:null},currentProductionTeam:function(){return this.currentProduction?this.currentProduction.team:[]},currentMenuLabel:function(){var t={assignation:"menu.assign_tasks",estimations:"menu.set_estimations","change-status":"menu.change_status",priorities:"menu.change_priority",tasks:"menu.create_tasks","delete-tasks":"menu.delete_tasks","custom-actions":"menu.run_custom_action"};return this.$t(t[this.selectedBar])},storagePrefix:function(){var t="todos-";return(this.isCurrentViewAsset||this.isCurrentViewShot)&&(t="entities-"),this.isCurrentViewTaskType&&(t="tasks-"),t}}),methods:nn({},Object(d["b"])(["assignSelectedTasks","changeSelectedEstimations","createSelectedTasks","deleteSelectedTasks","unassignSelectedTasks","changeSelectedTaskStatus","changeSelectedPriorities","clearSelectedTasks","postCustomAction"]),{confirmAssign:function(){var t=this;this.selectedPersonId&&(this.isAssignationLoading=!0,this.assignSelectedTasks({personId:this.selectedPersonId,callback:function(){t.isAssignationLoading=!1}}))},confirmTaskStatusChange:function(){var t=this;this.isChangeStatusLoading=!0,this.taskStatusId||(this.taskStatusId=this.taskStatusForCurrentUser[0].id),this.changeSelectedTaskStatus({taskStatusId:this.taskStatusId,comment:this.statusComment,callback:function(){t.isChangeStatusLoading=!1,t.statusComment=""}})},confirmPriorityChange:function(){var t=this;this.isChangePriorityLoading=!0,this.changeSelectedPriorities({priority:Number(this.priority),callback:function(){t.isChangePriorityLoading=!1}})},confirmEstimationChange:function(){var t=this;this.isChangeEstimationLoading=!0;var e=Math.floor(8*this.estimation*60);this.changeSelectedEstimations(e).then((function(){t.isChangeEstimationLoading=!1})).catch((function(e){t.isChangeEstimationLoading=!1,t.isChangeEstimationError=!0,console.error(e)}))},confirmTaskCreation:function(){var t=this,e=this.$route.path.indexOf("shots")>0?"shots":"assets";this.isCreationLoading=!0,this.createSelectedTasks({type:e,projectId:this.currentProduction.id,callback:function(){t.isCreationLoading=!1}})},confirmTaskDeletion:function(){var t=this;this.isDeletionLoading=!0,this.deleteSelectedTasks().then((function(){t.isDeletionLoading=!1})).catch((function(t){console.error(t)}))},clearAssignation:function(){var t=this;this.isAssignationLoading=!0,this.unassignSelectedTasks({callback:function(){t.isAssignationLoading=!1}})},selectBar:function(t){localStorage.setItem("".concat(this.storagePrefix,"-selected-bar"),t,{expires:"1M"}),this.selectedBar=t,this.toggleMenu()},toggleMenu:function(){this.isMoreMenuDisplayed=!this.isMoreMenuDisplayed},setCurrentTeam:function(){var t=this;return this.people.length>10&&this.currentProduction?this.currentTeam=Object(Ms["e"])(this.currentProduction.team.map((function(e){return t.personMap[e]}))):this.currentTeam=this.people,this.currentTeam},runCustomAction:function(){this.postCustomAction({data:{entitytype:this.currentEntityType,originurl:this.currentUrl,originserver:this.currentHost,selection:this.selectedTaskIds,productionid:this.currentProduction.id,userid:this.user.id,useremail:this.user.email},url:this.customAction.url})}}),mounted:function(){this.customAction=this.defaultCustomAction,this.setCurrentTeam()},watch:{isHidden:function(){if(!this.isHidden){var t=this.storagePrefix,e=localStorage.getItem("".concat(t,"-selected-bar"));e?this.selectedBar=e:this.isCurrentViewAsset||this.isCurrentViewShot?this.selectedBar="assignation":this.selectedBar="change-status"}},nbSelectedTasks:function(){var t=this;if(this.selectedTaskIds=Object.keys(this.selectedTasks),this.nbSelectedTasks>0){for(var e=!1,s=!1,n=0,i=Object.keys(this.selectedTasks);n<i.length;n++){var a=i[n],o=this.selectedTasks[a];o.sequence_name?e=!0:s=!0}if(this.customActions=e&&s?this.allCustomActions:e?this.shotCustomActions:this.assetCustomActions,this.customActions.length>0){var r=this.customAction.url&&this.customActions.findIndex((function(e){return e.id===t.customAction.id}))>=0;r||(this.customAction=this.customActions[0])}}},currentProduction:function(){this.setCurrentTeam()},currentProductionTeam:function(){this.setCurrentTeam()},people:function(){this.setCurrentTeam()},$route:function(){this.clearSelectedTasks()}}},on=an,rn=(s("8942"),Object(m["a"])(on,Ds,As,!1,null,"e8dc063e",null)),cn=rn.exports,dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar"},[n("aside",{class:{hidden:t.isSidebarHidden}},[n("div",[n("router-link",{staticClass:"home-link",attrs:{to:"/"},on:{click:function(e){return t.toggleSidebar()}}},[n("div",{staticClass:"company-logo has-text-centered"},[t.organisation&&t.organisation.has_avatar?n("img",{attrs:{src:t.logoPath}}):n("img",{attrs:{src:s("ad6c")}})])]),n("section",[t.isCurrentUserClient?t._e():n("div",[n("h2",[t._v(t._s(t.$t("main.user")))]),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"todos"}}},[t._v("\n             "+t._s(t.$t("tasks.my_tasks"))+"\n           ")])],1),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"open-productions"}}},[t._v("\n             "+t._s(t.$t("productions.open_productions"))+"\n           ")])],1)]),t.isCurrentUserAdmin?n("div",[n("h2",[t._v(t._s(t.$t("main.studio")))]),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"productions"}}},[t._v("\n           "+t._s(t.$t("productions.title"))+"\n           ")])],1),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"people"}}},[t._v("\n           "+t._s(t.$t("people.title"))+"\n           ")])],1),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"timesheets"}}},[t._v("\n           "+t._s(t.$t("timesheets.title"))+"\n           ")])],1)]):t._e(),t.isCurrentUserAdmin?n("div",[n("h2",[t._v(t._s(t.$t("main.admin")))]),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{attrs:{to:"/task-types"}},[t._v("\n           "+t._s(t.$t("task_types.title"))+"\n           ")])],1),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{staticClass:"task-status-link",attrs:{to:"/task-status"}},[t._v("\n           "+t._s(t.$t("task_status.title"))+"\n           ")])],1),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{attrs:{to:"/asset-types"}},[t._v("\n           "+t._s(t.$t("asset_types.title"))+"\n           ")])],1),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"custom-actions"}}},[t._v("\n           "+t._s(t.$t("custom_actions.title"))+"\n           ")])],1),n("p",{on:{click:function(e){return t.toggleSidebar()}}},[n("router-link",{attrs:{to:{name:"settings"}}},[t._v("\n             "+t._s(t.$t("settings.title"))+"\n           ")])],1)]):t._e()])],1)]),n("div",{class:{"is-active":!t.isSidebarHidden},attrs:{id:"c-mask"},on:{click:function(e){return t.toggleSidebar()}}})])},un=[];function ln(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function pn(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ln(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ln(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var fn={name:"sidebar",data:function(){return{title:"",logoPath:""}},mounted:function(){this.reset()},computed:pn({},Object(d["c"])(["isSidebarHidden","isCurrentUserClient","isCurrentUserCGArtist","isCurrentUserManager","isCurrentUserAdmin","organisation"])),methods:pn({},Object(d["b"])(["toggleSidebar"]),{reset:function(){this.title=this.organisation.name,this.logoPath="/api/pictures/thumbnails/organisations/"+"".concat(this.organisation.id,".png?t=")+(new Date).toISOString()}}),watch:{organisation:function(){this.reset()}}},hn=fn,mn=(s("cd0c"),Object(m["a"])(hn,dn,un,!1,null,"3a2770ab",null)),_n=mn.exports,vn={name:"main-wrapper",components:{ActionTopbar:cn,Topbar:xs,Sidebar:_n}},bn=vn,yn=(s("c266"),Object(m["a"])(bn,ls,ps,!1,null,null,null)),gn=yn.exports,kn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"notifications page"},[t.loading.notifications||t.notifications&&0!==t.notifications.length?t._e():s("div",{staticClass:"empty-list has-text-centered"},[t._v("\n      "+t._s(t.$t("notifications.no_notifications"))+"\n    ")]),t.loading.notifications?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t._e(),t._l(t.notifications,(function(e){return s("div",{key:e.id,class:{notification:!0,unread:!e.read,selected:e.id===t.currentNotificationId},on:{click:function(s){return t.onNotificationSelected(e)}}},[s("div",{staticClass:"flexrow notification-line"},[s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[t.isMention(e)?s("at-sign-icon",{staticClass:"icon flexrow-item"}):t._e(),t.isComment(e)?s("message-square-icon",{staticClass:"icon flexrow-item"}):t._e(),t.isAssignation(e)?s("user-icon",{staticClass:"icon flexrow-item"}):t._e(),s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":t.buildTaskTypeFromNotification(e),"production-id":e.project_id}})],1),s("div",{staticClass:"mt1"},[e.change?s("validation-tag",{staticClass:"validation-tag flexrow-item mt1",attrs:{task:t.buildTaskFromNotification(e)}}):t._e()],1)]),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"notification-info flexrow"},[t.personMap[e.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.personMap[e.author_id],size:30}}):t._e(),s("router-link",{staticClass:"person-name flexrow-item",attrs:{to:{name:"person",params:{person_id:e.author_id}}}},[t._v("\n            "+t._s(t.personName(e))+"\n          ")]),t.isComment(e)?s("span",{staticClass:"explaination flexrow-item"},[t._v("\n            "+t._s(t.$t("notifications.commented_on"))+"\n          ")]):t._e(),t.isAssignation(e)?s("span",{staticClass:"explaination flexrow-item"},[t._v("\n            "+t._s(t.$t("notifications.assigned_you"))+"\n          ")]):t._e(),t.isMention(e)?s("span",{staticClass:"explaination flexrow-item"},[t._v("\n            "+t._s(t.$t("notifications.mention_you_on"))+"\n          ")]):t._e(),s("router-link",{staticClass:" flexrow-item",attrs:{to:t.entityPath(e)}},[t._v("\n            "+t._s(e.project_name)+" / "+t._s(e.full_entity_name)+"\n          ")])],1)]),(t.isComment(e)||t.isMention(e))&&e.comment_text?s("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.renderComment(e.comment_text,e.mentions,t.personMap))}}):t._e(),e.preview_file_id?s("div",{staticClass:"flexrow"},[s("paperclip-icon",{staticClass:"icon flexrow-item"}),e.preview_file_id?s("div",{staticClass:"thumbnail-picture-wrapper flexrow-item"},[s("entity-thumbnail",{attrs:{entity:{preview_file_id:e.preview_file_id},height:40}})],1):t._e()],1):t._e(),!t.isComment(e)&&!t.isMention(e)||e.comment_text?t._e():s("div",{staticClass:"comment-text"},[t._v("\n        "+t._s(t.$t("comments.empty_text"))+"\n      ")]),s("div",{staticClass:"date flexrow"},[s("span",{staticClass:"flexrow-item"},[t._v("\n          "+t._s(t.formatDate(e.created_at))+"\n        ")])])])])])}))],2)]),t.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:t.currentTask,"is-loading":t.loading.currentTask}})],1):t._e()])},On=[],Sn=s("0e54"),wn=s.n(Sn),Tn=s("66be"),Cn=s("274f");function Pn(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function En(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Pn(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Pn(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var jn={name:"notification-page",components:{AtSignIcon:U["a"],EntityThumbnail:_t["a"],PaperclipIcon:U["t"],PeopleAvatar:dt["a"],MessageSquareIcon:U["s"],Spinner:u["a"],TaskInfo:Qe["a"],TaskTypeName:Cn["a"],UserIcon:U["G"],ValidationTag:ct["a"]},data:function(){return{loading:{notifications:!1,currentTask:!0},errors:{notifications:!1},currentTask:null,currentNotificationId:null}},mounted:function(){var t=this;this.loading.notifications=!0,this.errors.notifications=!1,this.currentTask=null,this.loadNotifications().then((function(){t.loading.notifications=!1})).catch((function(e){console.error(e),t.errors.notifications=!0}))},computed:En({},Object(d["c"])(["notifications","personMap","taskTypeMap","taskStatusMap","personMap"])),methods:En({},Object(d["b"])(["loadNotifications","loadTask","markAllNotificationsAsRead"]),{entityPath:function(t){var e=this.getTaskType(t).for_shots?"shot":"asset",s={name:"task",params:{production_id:t.project_id,task_id:t.task_id,type:e}};return t.episode_id&&(s.name="episode-task",s.params.episode_id=t.episode_id),s},getTaskType:function(t){return this.taskTypeMap[t.task_type_id]},formatDate:function(t){var e=j.a.tz(t,"UTC");return t=j()(e.format()).fromNow(),t[0].toUpperCase()+t.slice(1)},compileMarkdown:function(t){return wn()(t||"")},personName:function(t){var e=this.personMap[t.author_id];return e?e.full_name:""},buildTaskFromNotification:function(t){return{id:t.task_id,task_status_id:t.task_status_id,task_type_id:t.task_type_id,episode_id:t.episode_id}},buildTaskTypeFromNotification:function(t){return En({},this.taskTypeMap[t.task_type_id],{episode_id:t.episode_id})},onNotificationSelected:function(t){var e=this;this.loading.currentTask=!0,this.loadTask({taskId:t.task_id,callback:function(s,n){s&&console.log(s),e.loading.currentTask=!1,e.currentTask=n,e.currentNotificationId=t.id}})},renderComment:Tn["b"],isComment:function(t){return!t.notification_type||"comment"===t.notification_type},isMention:function(t){return"mention"===t.notification_type},isAssignation:function(t){return"assignation"===t.notification_type}}),socket:{events:{"preview-file:add-file":function(t){var e=t.comment_id,s=t.preview_file_id;this.$store.commit("NOTIFICATION_ADD_PREVIEW",{previewId:s,commentId:e})}}},beforeDestroy:function(){this.markAllNotificationsAsRead()},metaInfo:function(){return{title:"".concat(this.$t("notifications.title")," - Kitsu")}}},xn=jn,Dn=(s("cd0b"),Object(m["a"])(xn,kn,On,!1,null,"2cb9092d",null)),An=Dn.exports,Mn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"open-productions page"},[t.isOpenProductionsLoading?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t.openProductions.length>0?s("div",{staticClass:"open-productions-box"},[s("img",{attrs:{src:""}}),s("h1",{staticClass:"title has-text-centered"},[t._v("\n      "+t._s(t.$t("productions.home.title"))+"\n    ")]),s("div",{class:{"open-productions-list":!0,"is-grid":t.openProductions&&t.openProductions.length>4}},t._l(t.openProductions,(function(e){return s("div",{key:e.id,staticClass:"open-production has-text-centered"},[s("router-link",{attrs:{to:t.getPath(e)}},[s("div",{staticClass:"avatar has-text-centered",style:{background:t.getAvatarColor(e)}},[e.has_avatar?s("img",{attrs:{src:t.getThumbnailPath(e)}}):s("span",[t._v("\n              "+t._s(t.generateAvatar(e))+"\n            ")])]),s("div",{staticClass:"production-name"},[t._v("\n            "+t._s(e.name)+"\n          ")])]),s("router-link",{staticClass:"secondary",attrs:{to:t.assetsPath(e)}},[t._v("\n          "+t._s(t.$t("assets.title"))+"\n        ")]),t._v("\n        -\n        "),s("router-link",{staticClass:"secondary",attrs:{to:t.shotsPath(e)}},[t._v("\n          "+t._s(t.$t("shots.title"))+"\n        ")])],1)})),0),t.isCurrentUserClient?t._e():s("div",{staticClass:"has-text-centered new-production-link"},[s("a",{on:{click:t.showNewModal}},[t._v("\n        "+t._s(t.$t("productions.home.create_new"))+"\n      ")])])]):s("div",{staticClass:"has-text-centered welcome"},[t._m(0),s("h1",{staticClass:"title has-text-centered"},[t._v("\n      "+t._s(t.$t("productions.home.welcome"))+"\n    ")]),t.isCurrentUserManager?s("div",[s("p",{staticClass:"has-text-centered info"},[t._v("\n        "+t._s(t.$t("productions.home.empty"))+"\n      ")]),s("p",{staticClass:"has-text-centered"},[s("button-simple",{staticClass:"level-item big-button",attrs:{text:t.$t("productions.home.create_new"),"is-responsive":!1},on:{click:t.showNewModal}})],1)]):t.isCurrentUserClient?s("div",[s("p",{staticClass:"has-text-centered"},[t._v("\n        "+t._s(t.$t("productions.home.no_prod_for_client"))+"\n      ")])]):s("div",[s("p",{staticClass:"has-text-centered"},[t._v("\n        "+t._s(t.$t("productions.home.no_task"))+"\n      ")])])]),s("edit-production-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editProduction.isLoading,"is-error":t.editProduction.isError},on:{confirm:t.confirmEditProduction,cancel:t.hideNewModal}})],1)},Ln=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"kitsu-logo info"},[n("img",{attrs:{src:s("cb88")}})])}],In=s("7930"),$n=s("1d3d");function qn(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Nn(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?qn(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):qn(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Rn={name:"open-productions",components:{ButtonSimple:B["a"],EditProductionModal:$n["a"],Spinner:u["a"]},data:function(){return{modals:{isNewDisplayed:!1}}},computed:Nn({},Object(d["c"])(["editProduction","isCurrentUserManager","isCurrentUserClient","isOpenProductionsLoading","lastProductionScreen","openProductions"])),methods:Nn({},Object(d["b"])(["newProduction"]),{generateAvatar:function(t){var e=t.name.length>0?t.name[0]:"P";return e.toUpperCase()},getAvatarColor:function(t){return In["a"].fromString(t.name)},getPath:function(t){return this.sectionPath(t,this.lastProductionScreen)},assetsPath:function(t){return this.sectionPath(t,"assets")},shotsPath:function(t){return this.sectionPath(t,"shots")},sequencesPath:function(t){return this.sectionPath(t,"sequences")},sectionPath:function(t,e){var s={name:e,params:{production_id:t.id}};return"tvshow"===t.production_type&&(s.name="episode-".concat(e),s.params.episode_id=t.first_episode_id),s},getThumbnailPath:function(t){return"/api/pictures/thumbnails/projects/".concat(t.id,".png")},confirmEditProduction:function(t){var e=this;this.newProduction({data:t,callback:function(t,s){t||(e.modals.isNewDisplayed=!1)}})},showNewModal:function(){this.modals.isNewDisplayed=!0},hideNewModal:function(){this.modals.isNewDisplayed=!1}}),watch:{},metaInfo:function(){return{title:"".concat(this.$t("productions.home.title")," - Kitsu")}}},Fn=Rn,Vn=(s("011b"),Object(m["a"])(Fn,Mn,Ln,!1,null,"110c2e16",null)),Un=Vn.exports,Bn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"news page"},[s("div",{staticClass:"timeline-wrapper"},[s("div",{staticClass:"filters flexrow"},[s("span",{staticClass:"filler"}),s("combobox",{staticClass:"flexrow-item selector",attrs:{label:t.$t("news.infos"),options:t.previewOptions},model:{value:t.previewMode,callback:function(e){t.previewMode=e},expression:"previewMode"}}),s("combobox-status",{staticClass:"flexrow-item selector",attrs:{label:t.$t("news.task_status"),"task-status-list":t.taskStatusList},model:{value:t.taskStatusId,callback:function(e){t.taskStatusId=e},expression:"taskStatusId"}}),s("combobox-task-type",{staticClass:"flexrow-item selector",attrs:{label:t.$t("news.task_type"),"task-type-list":t.taskTypeList},model:{value:t.taskTypeId,callback:function(e){t.taskTypeId=e},expression:"taskTypeId"}}),s("span",{staticClass:"filler"})],1),s("div",{staticClass:"timeline"},[t.loading.news||t.newsList&&0!==t.newsList.length?t._e():s("div",{staticClass:"empty-list has-text-centered"},[t._v("\n            "+t._s(t.$t("news.no_news"))+"\n          ")]),t.loading.news?s("div",{staticClass:"has-text-centered mt2"},[s("spinner")],1):t._e(),t._l(t.newsListByDay,(function(e){return s("div",{key:e.length>0?e[0].created_at:""},[s("div",{staticClass:"has-text-centered subtitle timeline-entry"},[s("span",{staticClass:"big-dot"}),t._v("\n              "+t._s(e.length>0?t.formatDay(e[0].created_at):"")+"\n            ")]),t._l(e,(function(e){return s("div",{key:"news-"+e.id},["comments"===t.previewMode?s("div",[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:e.id===t.currentNewsId},on:{click:function(s){return s.preventDefault(),t.onNewsSelected(e)}}},[s("span",{class:{dot:!0,red:t.hasRetakeValue(e),green:t.hasDoneValue(e)}}),s("span",{staticClass:"date flexrow-item"},[t._v("\n                    "+t._s(t.formatTime(e.created_at))+"\n                  ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":t.buildTaskTypeFromNews(e),"production-id":t.currentProduction.id}})],1),s("div",{staticClass:"flexrow-item validation-wrapper"},[e.change?s("validation-tag",{staticClass:"validation-tag",attrs:{task:t.buildTaskFromNews(e)}}):t._e()],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[t.personMap[e.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.personMap[e.author_id],size:30,"no-link":!0}}):t._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[t._v("\n                            "+t._s(t.personName(e))+"\n                          ")]),s("span",[t._v("\n                            "+t._s(t.$t("news.commented_on"))+"\n                          ")]),e.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:e.task_entity_id,preview_file_id:e.entity_preview_file_id}}}):t._e(),s("span",{staticClass:"strong"},[t._v("\n                            "+t._s(e.full_entity_name)+"\n                          ")])],1)],1)])])])]):t._e(),e.preview_file_id&&"previews"===t.previewMode?s("div",{staticClass:"preview"},[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:e.id===t.currentNewsId},on:{click:function(s){return s.preventDefault(),t.onNewsSelected(e)}}},[s("span",{class:{dot:!0,red:t.hasRetakeValue(e),green:t.hasDoneValue(e)}}),s("span",{staticClass:"date flexrow-item"},[t._v("\n                    "+t._s(t.formatTime(e.created_at))+"\n                  ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":t.buildTaskTypeFromNews(e),"production-id":t.currentProduction.id}})],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[t.personMap[e.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.personMap[e.author_id],size:30,"no-link":!0}}):t._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[t._v("\n                            "+t._s(t.personName(e))+"\n                          ")]),s("span",[t._v("\n                            "+t._s(t.$t("news.set_preview_on"))+"\n                          ")]),e.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:e.task_entity_id,preview_file_id:e.entity_preview_file_id}}}):t._e(),s("span",{staticClass:"strong"},[t._v("\n                            "+t._s(e.full_entity_name)+"\n                          ")])],1)],1)])])]),"previews"==t.previewMode?s("div",{staticClass:"has-text-centered"},["mp4"==e.preview_file_extension?s("div",[s("video-player",{attrs:{preview:{id:e.preview_file_id},"task-type-map":t.taskTypeMap,"read-only":!0,light:!0}})],1):"obj"==e.preview_file_extension?s("model-viewer",{staticClass:"model-viewer",attrs:{"preview-url":t.getPreviewPath(e),"preview-dl-path":t.getPreviewDlPath(e),light:!0,"read-only":!0}}):"png"==e.preview_file_extension?s("picture-viewer",{ref:"preview-picture",refInFor:!0,attrs:{preview:{previews:[{id:e.preview_file_id}]},light:!0,"read-only":!0}}):s("div",{staticClass:"preview-standard-file"},[s("a",{ref:"preview-file",refInFor:!0,staticClass:"button",attrs:{href:t.getPreviewDlPath(e)}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("\n                        "+t._s(t.$t("tasks.download_pdf_file",{extension:e.preview_file_extension}))+"\n                      ")])],1)])],1):t._e()]):t._e()])}))],2)}))],2)])])]),t.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:t.currentTask,"is-loading":t.loading.currentTask}})],1):t._e()])},zn=[],Hn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[t.label.length>0?s("label",{staticClass:"label"},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),s("div",{staticClass:"task-type-combo"},[s("div",{staticClass:"flexrow",on:{click:t.toggleTaskTypeList}},[s("div",{staticClass:"selected-task-type-line flexrow-item"},[t.currentTaskType?s("task-type-name",{attrs:{"task-type":t.currentTaskType}}):t._e()],1),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),t.showTaskTypeList?s("div",{ref:"select",staticClass:"select-input"},t._l(t.taskTypeList,(function(e){return s("div",{key:e.id,staticClass:"task-type-line",on:{click:function(s){return t.selectTaskType(e)}}},[s("task-type-name",{attrs:{"task-type":e}})],1)})),0):t._e()])])},Gn=[];function Wn(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Kn(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Wn(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Wn(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Yn={name:"combobox-task-type",components:{ChevronDownIcon:U["d"],TaskTypeName:Cn["a"]},data:function(){return{showTaskTypeList:!1}},props:{label:{default:"",type:String},taskTypeList:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){this.selectedTaskType=this.taskType},computed:Kn({},Object(d["c"])(["taskTypeMap"]),{currentTaskType:function(){return this.value?this.taskTypeMap[this.value]:this.taskTypeList[0]}}),methods:{selectTaskType:function(t){this.$emit("input",t.id),this.showTaskTypeList=!1},toggleTaskTypeList:function(){this.showTaskTypeList=!this.showTaskTypeList}}},Qn=Yn,Jn=(s("ad52"),Object(m["a"])(Qn,Hn,Gn,!1,null,"b9cbf9d2",null)),Xn=Jn.exports,Zn=s("8078"),ti=s("41e2"),ei=s("7d5f");function si(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function ni(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?si(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):si(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var ii={name:"news-page",components:{Combobox:J["a"],ComboboxStatus:Fs["a"],ComboboxTaskType:Xn,DownloadIcon:U["i"],EntityThumbnail:_t["a"],ModelViewer:Zn["a"],PeopleAvatar:dt["a"],PictureViewer:ti["a"],TaskTypeName:Cn["a"],ValidationTag:ct["a"],Spinner:u["a"],TaskInfo:Qe["a"],VideoPlayer:ei["a"]},data:function(){return{currentNewsId:null,currentPage:1,currentTask:null,errors:{news:!1},loading:{more:!1,news:!1,currentTask:!0},previewMode:"comments",previewOptions:[{label:this.$t("news.only_comments"),value:"comments"},{label:this.$t("news.only_previews"),value:"previews"}],taskStatusId:"",taskTypeId:""}},mounted:function(){this.$options.silent=!0,this.previewMode=localStorage.getItem("news:preview-mode")||"comments",this.taskTypeId=localStorage.getItem("news:task-type-id")||"",this.taskStatusId=localStorage.getItem("news:task-status-id")||"",this.$options.silent=!1,(0===this.newsList.length||this.currentProduction&&this.newsList[0].project_id!==this.currentProduction.id)&&!this.loading.news&&this.init()},computed:ni({},Object(d["c"])(["currentProduction","newsList","newsListByDay","personMap","taskStatusMap","taskTypeMap","taskStatus","taskTypes","user"]),{params:function(){var t={productionId:this.currentProduction.id,only_preview:"previews"===this.previewMode,page_size:"previews"===this.previewMode?6:50,task_type_id:""!==this.taskTypeId?this.taskTypeId:void 0,task_status_id:""!==this.taskStatusId?this.taskStatusId:void 0,page:this.currentPage};return t},taskStatusList:function(){return[{id:"",color:"#999",short_name:this.$t("news.all")}].concat(Object(Ms["c"])(Object(W["a"])(this.taskStatus)))},taskTypeList:function(){return[{id:"",color:"#999",name:this.$t("news.all")}].concat(Object(Ms["c"])(Object(W["a"])(this.taskTypes)))},timezone:function(){return this.user.timezone||j.a.tz.guess()}}),methods:ni({},Object(d["b"])(["loadNews","loadSingleNews","loadMoreNews","loadTask"]),{loadFollowingNews:function(){var t=this;this.loading.more||this.loading.news||(this.loading.more=!0,this.currentPage+=1,this.loadMoreNews(this.params).then((function(){t.loading.more=!1})))},formatDay:function(t){var e=j.a.tz(t,"UTC").tz(this.timezone);return e.format("LL")},formatTime:function(t){var e=j.a.tz(t,"UTC").tz(this.timezone);return e.format("HH:mm")},personName:function(t){var e=this.personMap[t.author_id];return e?e.full_name:""},buildTaskFromNews:function(t){return{id:t.task_id,task_status_id:t.task_status_id,task_type_id:t.task_type_id,episode_id:t.episode_id}},buildTaskTypeFromNews:function(t){return ni({},this.taskTypeMap[t.task_type_id],{episode_id:t.episode_id})},onNewsSelected:function(t){var e=this;this.loading.currentTask=!0,this.loadTask({taskId:t.task_id,callback:function(s,n){s&&console.log(s),e.loading.currentTask=!1,e.currentTask=n,e.currentNewsId=t.id}})},init:function(){var t=this;this.currentPage=1,this.loading.news=!0,this.errors.news=!1,this.currentTask=null,this.loadNews(this.params).then((function(){t.loading.news=!1})).catch((function(e){console.error(e),t.loading.news=!1,t.errors.news=!0}))},onBodyScroll:function(t,e){var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&(this.newsList.length%50===0&&"comments"===this.previewMode||this.newsList.length%6===0&&"previews"===this.previewMode)&&this.loadFollowingNews()},getPreviewPath:function(t){var e=t.preview_file_id,s=t.preview_file_extension;return"/api/pictures/originals/preview-files/".concat(e,".").concat(s)},getPreviewDlPath:function(t){var e=t.preview_file_id;return"/api/pictures/originals/preview-files/".concat(e,"/download")},hasRetakeValue:function(t){var e=this.taskStatusMap[t.task_status_id];return!!e&&(t.change&&e.is_retake)},hasDoneValue:function(t){var e=this.taskStatusMap[t.task_status_id];return!!e&&(t.change&&e.is_done)}}),socket:{events:{"preview-file:add-file":function(t){var e=t.comment_id,s=t.preview_file_id,n=t.extension;this.$store.commit("NEWS_ADD_PREVIEW",{previewId:s,commentId:e,extension:n})},"news:new":function(t){t.project_id!==this.currentProduction.id||this.taskTypeId&&this.taskTypeId!==t.task_type_id||this.taskStatusId&&this.taskStatusId!==t.task_status_id||this.loadSingleNews({productionId:this.currentProduction.id,newsId:t.news_id})}}},watch:{currentProduction:function(){this.$options.silent||this.loading.news||this.init()},previewMode:function(){localStorage.setItem("news:preview-mode",this.previewMode),this.$options.silent||this.init()},taskTypeId:function(){localStorage.setItem("news:task-type-id",this.taskTypeId),this.$options.silent||this.init()},taskStatusId:function(){localStorage.setItem("news:task-status-id",this.taskStatusId),this.init()}},metaInfo:function(){return this.currentProduction?{title:"".concat(this.currentProduction.name," ").concat(this.$t("news.title")," - Kitsu")}:{title:"".concat(this.$t("news.title")," - Kitsu")}}},ai=ii,oi=(s("3d32"),Object(m["a"])(ai,Bn,zn,!1,null,"227acda9",null)),ri=oi.exports,ci=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sequences page fixed-page"},[s("div",{staticClass:"sequence-list-header page-header flexrow"},[s("search-field",{ref:"sequence-search-field",staticClass:"flexrow-item mt1",attrs:{placeholder:"ex: e01 s01 anim=wip"},on:{change:t.onSearchChange}}),s("combobox",{staticClass:"mb0 flexrow-item",attrs:{label:t.$t("statistics.display_mode"),"locale-key-prefix":"statistics.",options:t.displayModeOptions},model:{value:t.displayMode,callback:function(e){t.displayMode=e},expression:"displayMode"}}),s("combobox",{staticClass:"mb0 flexrow-item",attrs:{label:t.$t("statistics.count_mode"),"locale-key-prefix":"statistics.",options:t.countModeOptions},model:{value:t.countMode,callback:function(e){t.countMode=e},expression:"countMode"}}),s("span",{staticClass:"filler"}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download"},on:{click:t.exportStatisticsToCsv}})],1),s("sequence-list",{ref:"sequence-list",attrs:{"count-mode":t.countMode,"display-mode":t.displayMode,entries:t.displayedSequences,"is-loading":t.isShotsLoading||t.initialLoading,"is-error":t.isShotsLoadingError,"validation-columns":t.shotValidationColumns,"sequence-stats":t.sequenceStats,"show-all":0===t.sequenceSearchText.length},on:{scroll:t.saveScrollPosition}}),s("edit-sequence-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-error":t.errors.edit,"cancel-route":t.sequencesPath,"sequence-to-edit":t.sequenceToEdit},on:{confirm:t.confirmEditSequence}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.loading.del,"is-error":t.errors.del,text:t.deleteText(),"error-text":t.$t("sequences.delete_error"),"cancel-route":t.sequencesPath},on:{confirm:t.confirmDeleteSequence}})],1)},di=[],ui=s("c1df"),li=s.n(ui),pi=s("3455"),fi=s("8c97"),hi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.sequenceToEdit&&this.sequenceToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("sequences.edit_title"))+" "+t._s(t.sequenceToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("sequences.new_sequence"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("sequences.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:t.$t("sequences.fields.description")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.runConfirmation(e):null}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("sequences.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.sequenceSuccessText)+"\n        ")])],1)])])])},mi=[];function _i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function vi(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?_i(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):_i(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var bi={name:"edit-sequence-modal",components:{TextField:Y["a"],TextareaField:Q["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","sequenceToEdit","errorText"],data:function(){return this.sequenceToEdit&&this.sequenceToEdit.id?{form:{id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,production_id:this.sequenceToEdit.project_id},sequenceSuccessText:""}:{form:{id:"",name:"",description:"",fps:""},sequenceSuccessText:""}},computed:vi({},Object(d["c"])(["currentProduction"])),methods:vi({},Object(d["b"])([]),{runConfirmation:function(){this.confirmClicked()},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.sequenceToEdit&&this.sequenceToEdit.id},resetForm:function(){this.sequenceSuccessText="",this.isEditing()?this.form={id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description}:(this.form.id=null,this.form.name="",this.form.description="")}}),mounted:function(){this.resetForm()},watch:{active:function(){this.resetForm()},sequenceToEdit:function(){this.resetForm()}}},yi=bi,gi=(s("fb8a"),Object(m["a"])(yi,hi,mi,!1,null,"17e984db",null)),ki=gi.exports,Oi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{ref:"th-sequence",staticClass:"name"},[t._v("\n            "+t._s(t.$t("shots.fields.sequence"))+"\n          ")]),s("th",{staticClass:"description"},[t._v(t._s(t.$t("shots.fields.description")))]),s("th",{staticClass:"validation"},[t._v(t._s(t.$t("main.all")))]),t._l(t.sortedValidationColumns,(function(e){return t.isLoading?t._e():s("th",{key:e,staticClass:"validation validation-cell",style:t.getValidationStyle(e)},[s("router-link",{attrs:{to:t.taskTypePath(e)}},[t._v("\n              "+t._s(t.taskTypeMap[e].name)+"\n            ")])],1)})),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),!t.isEmptyList||t.isCurrentUserClient||t.isLoading?t._e():s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("sequences.empty_list")))])]),t.isEmptyList&&t.isCurrentUserClient&&!t.isLoading?s("div",{staticClass:"has-text-centered"},[t._m(1),s("p",{staticClass:"info"},[t._v(t._s(t.$t("sequences.empty_list_client")))])]):t._e(),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},[t.showAll&&!t.isEmptyList?s("tr",{staticClass:"all-line"},[s("td",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("sequences.all_sequences"))+"\n          ")]),s("td",{staticClass:"description"}),s("stats-cell",{attrs:{colors:t.chartColors("all","all"),data:t.chartData("all","all"),"frames-data":t.chartData("all","all","frames"),countMode:t.countMode,displayMode:t.displayMode}}),t._l(t.sortedValidationColumns,(function(e){return s("stats-cell",{key:"all-"+e,style:t.getValidationStyle(e),attrs:{colors:t.chartColors("all",e),data:t.chartData("all",e),"frames-data":t.chartData("all",e,"frames"),countMode:t.countMode,displayMode:t.displayMode}})})),s("td",{staticClass:"actions"})],2):t._e(),t._l(t.entries,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n          ")]),s("td",{staticClass:"description"},[t._v("\n            "+t._s(e.description)+"\n          ")]),t.isStats(e.id,"all")?s("stats-cell",{attrs:{colors:t.chartColors(e.id,"all"),data:t.chartData(e.id,"all"),"frames-data":t.chartData(e.id,"all","frames"),countMode:t.countMode,displayMode:t.displayMode}}):s("td"),t._l(t.sortedValidationColumns,(function(n){return t.isStats(e.id,n)?s("stats-cell",{key:e.id+n,style:t.getValidationStyle(n),attrs:{colors:t.chartColors(e.id,n),data:t.chartData(e.id,n),"frames-data":t.chartData(e.id,n,"frames"),countMode:t.countMode,displayMode:t.displayMode}}):s("td",{style:t.getValidationStyle(n)})})),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":t.editPath(e.id),"delete-route":t.deletePath(e.id)}}):s("td",{staticClass:"actions"})],2)}))],2)])]),t.isEmptyList||t.isLoading?t._e():s("p",{staticClass:"has-text-centered nb-sequences"},[t._v("\n    "+t._s(t.displayedSequencesLength)+"\n    "+t._s(t.$tc("sequences.number",t.displayedSequencesLength))+"\n  ")])],1)},Si=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])}],wi=s("09d3"),Ti=s("b131");function Ci(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Pi(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ci(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ci(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ei={name:"sequence-list",mixins:[jt["a"]],components:{RowActions:Mt["a"],StatsCell:Ti["a"],TableInfo:rt["a"]},props:{countMode:{type:String,default:"count"},displayMode:{type:String,default:"pie"},entries:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},sequenceStats:{type:Object,default:function(){}},showAll:{type:Boolean,default:!1},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{busy:!1,lastSelection:null}},computed:Pi({},Object(d["c"])(["currentProduction","currentEpisode","displayedSequencesLength","isDarkTheme","isCurrentUserClient","isCurrentUserManager","isTVShow","sequenceSearchText","taskTypeMap"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.sequenceSearchText||0===this.sequenceSearchText.length)}}),methods:Pi({},Object(d["b"])(["displayMoreSequences","loadMoreSequences"]),{chartColors:function(t,e){return Object(wi["b"])(this.sequenceStats,t,e)},chartData:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"count";return Object(wi["c"])(this.sequenceStats,t,e,s)},isStats:function(t,e){return this.sequenceStats[t]&&this.sequenceStats[t][e]},onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.loadMoreSequences()},loadMoreSequences:function(){this.displayMoreSequences(),this.$nextTick(this.resizeHeaders)},setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},resizeHeaders:function(){if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].children.length>0){var t=this.$refs["body-tbody"].children[0].children[0].offsetWidth;this.$refs["th-sequence"].style="min-width: ".concat(t,"px")}},editPath:function(t){return this.getPath("edit-sequence",t)},deletePath:function(t){return this.getPath("delete-sequence",t)},taskTypePath:function(t){var e={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:t,type:"shots"}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-task-type",e.params.episode_id=this.currentEpisode.id),e},getPath:function(t,e){var s={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(t),s.params.episode_id=this.currentEpisode.id),e&&(s.params.sequence_id=e),s}})},ji=Ei,xi=(s("03c9"),Object(m["a"])(ji,Oi,Si,!1,null,"02072d9e",null)),Di=xi.exports;function Ai(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Mi(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ai(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ai(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Li={name:"sequences",components:{ButtonSimple:B["a"],Combobox:J["a"],DeleteModal:Oe["a"],EditSequenceModal:ki,SearchField:Ae["a"],SequenceList:Di},data:function(){return{countMode:"count",displayMode:"pie",initialLoading:!0,sequenceToDelete:null,sequenceToEdit:null,countModeOptions:[{label:"shots",value:"count"},{label:"frames",value:"frames"}],displayModeOptions:[{label:"pie",value:"pie"},{label:"count",value:"count"}],errors:{edit:!1,del:!1},loading:{edit:!1,del:!1},modals:{isNewDisplayed:!1,isDeleteDisplayed:!1}}},computed:Mi({},Object(d["c"])(["currentEpisode","currentProduction","displayedSequences","isCurrentUserManager","isShotsLoading","isShotsLoadingError","isTVShow","sequences","sequenceMap","sequencesPath","sequenceStats","sequenceSearchText","sequenceListScrollPosition","shotValidationColumns","taskTypeMap","taskStatusMap"])),mounted:function(){var t=this;setTimeout((function(){t.initSequences().then(t.handleModalsDisplay).then(t.resizeHeaders).then((function(){t.initialLoading=!1})),t.setDefaultSearchText(),t.setDefaultListScrollPosition()}),100)},methods:Mi({},Object(d["b"])(["computeSequenceStats","deleteSequence","editSequence","hideAssignations","initSequences","loadComment","setLastProductionScreen","setSequenceSearch","setSequenceListScrollPosition","showAssignations"]),{setDefaultSearchText:function(){this.sequenceSearchText.length>0&&this.$refs["sequence-search-field"].setValue(this.sequenceSearchText)},setDefaultListScrollPosition:function(){this.$refs["sequence-list"]&&this.$refs["sequence-list"].setScrollPosition(this.sequenceListScrollPosition)},navigateToList:function(){this.$router.push(this.sequencesPath)},confirmEditSequence:function(t){var e=this;this.loading.edit=!0,this.errors.edit=!1,this.editSequence(t).then((function(){e.loading.edit=!1,e.resizeHeaders(),e.navigateToList()})).catch((function(){e.loading.edit=!1,e.errors.edit=!0}))},confirmDeleteSequence:function(){var t=this;this.loading.del=!0,this.deleteSequence(this.sequenceToDelete).then((function(){t.loading.del=!1,t.resizeHeaders(),t.navigateToList()})).catch((function(){t.loading.del=!1,t.errors.del=!0}))},resetEditModal:function(){var t={name:""};this.sequences.length>0&&(t.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(t.production_id=this.openProductions[0].id),this.sequenceToEdit=t},deleteText:function(){var t=this.sequenceToDelete;return t?this.$t("sequences.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.sequence_id;this.errors={edit:!1,delete:!1},this.modals={isNewDisplayed:!1,isDeleteDisplayed:!1},t.indexOf("edit")>0?(this.sequenceToEdit=this.sequenceMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete")>0&&(this.sequenceToDelete=this.sequenceMap[e],this.modals.isDeleteDisplayed=!0)},onSearchChange:function(t){var e=this.$refs["sequence-search-field"].getValue();this.setSequenceSearch(e)},saveScrollPosition:function(t){this.setSequenceListScrollPosition(t)},resizeHeaders:function(){var t=this;setTimeout((function(){t.$refs["sequence-list"]&&t.$refs["sequence-list"].resizeHeaders()}),0)},exportStatisticsToCsv:function(){var t=[li()().format("YYYYMMDD"),this.currentProduction.name,"sequences","statistics"];this.currentEpisode&&t.splice(2,0,this.currentEpisode.name);var e=Object(fi["b"])(t.join("_"));pi["a"].generateStatReports(e,this.sequenceStats,this.taskTypeMap,this.taskStatusMap,this.sequenceMap,this.countMode)}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){this.$refs["sequence-search-field"].setValue(""),this.$store.commit("SET_SEQUENCE_LIST_SCROLL_POSITION",0),this.isTVShow||this.initSequences().then(this.handleModalsDisplay).then(this.resizeHeaders)},currentEpisode:function(){var t=this;this.isTVShow&&this.currentEpisode&&this.initSequences().then(this.handleModalsDisplay).then(this.resizeHeaders).then((function(){t.initialLoading=!1}))}},socket:{events:{"comment:new":function(t){var e=this,s=t.comment_id;this.loadComment({commentId:s,callback:function(){e.computeSequenceStats()}})}}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("sequences.title")," - Kitsu")}:{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" ".concat(this.$t("sequences.title")," - Kitsu")}}},Ii=Li,$i=(s("7ab7"),Object(m["a"])(Ii,ci,di,!1,null,"02467c35",null)),qi=$i.exports,Ni=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page shot"},[s("div",{staticClass:"page-header flexrow"},[s("router-link",{staticClass:"flexrow-item has-text-centered back-link",attrs:{to:t.shotsPath}},[s("chevron-left-icon")],1),t.currentShot?s("entity-thumbnail",{staticClass:"shot-thumbnail flexrow-item",attrs:{entity:t.currentShot,"with-link":!1}}):t._e(),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:t.title}})],1),s("div",{staticClass:"flexrow-item"},[s("button-simple",{attrs:{icon:"edit"},on:{click:function(e){t.modals.edit=!0}}})],1)],1),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:t.$t("shots.tasks")}}),s("entity-task-list",{staticClass:"task-list",attrs:{entries:t.currentShot?t.currentShot.tasks:[],"is-loading":!t.currentShot,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:t.$t("main.info")}}),s("div",{staticClass:"table-body"},[t.currentShot?s("table",{staticClass:"table"},[s("tbody",[t.currentShot.data&&t.currentShot.data.fps?s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.fps")))]),s("td",[t._v("\n                "+t._s(t.currentShot?t.currentShot.data.fps:"")+"\n              ")])]):t._e(),t.currentShot.data&&t.currentShot.data.frame_in?s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.frame_in")))]),s("td",[t._v("\n                "+t._s(t.currentShot?t.currentShot.data.frame_in:"")+"\n              ")])]):t._e(),t.currentShot.data&&t.currentShot.data.frame_out?s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.frame_out")))]),s("td",[t._v("\n                "+t._s(t.currentShot?t.currentShot.data.frame_out:"")+"\n              ")])]):t._e(),s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.description")))]),s("description-cell",{attrs:{entry:t.currentShot,full:!0}})],1),s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.nb_frames")))]),s("td",[t._v("\n                "+t._s(t.currentShot?t.currentShot.nb_frames:"")+"\n              ")])]),t._l(t.shotMetadataDescriptors,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"field-label"},[t._v(t._s(e.name))]),s("td",[t._v("\n                "+t._s(t.currentShot.data?t.currentShot.data[e.field_name]:"")+"\n              ")])])}))],2)]):t._e()])],1)]),s("div",{staticClass:"shot-casting"},[s("page-subtitle",{attrs:{text:t.$t("shots.casting")}}),t.currentShot?s("div",[t.currentShot.castingAssetsByType&&t.currentShot.castingAssetsByType[0].length>0?s("div",t._l(t.currentShot.castingAssetsByType,(function(e){return s("div",{key:e.length>0?e[0].asset_type_name:"",staticClass:"type-assets"},[s("div",{staticClass:"asset-type"},[t._v("\n            "+t._s(e.length>0?e[0].asset_type_name:"")+"\n          ")]),s("div",{staticClass:"asset-list"},t._l(e,(function(e){return s("router-link",{key:e.id,staticClass:"asset-link",attrs:{to:{name:"asset",params:{production_id:t.currentProduction.id,asset_id:e.asset_id}}}},[s("entity-thumbnail",{attrs:{entity:e,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[t._v(t._s(e.name))]),e.nb_occurences>1?s("span",[t._v("\n                  ("+t._s(e.nb_occurences)+")\n                ")]):t._e()])],1)})),1)])})),0):s("div",[t._v("\n        "+t._s(t.$t("shots.no_casting"))+"\n      ")])]):s("table-info",{attrs:{"is-loading":t.casting.isLoadin,"is-error":t.casting.isError}})],1),s("edit-shot-modal",{ref:"edit-shot-modal",attrs:{active:t.modals.edit,"is-loading":t.loading.edit,"is-error":t.errors.edit,"shot-to-edit":t.currentShot},on:{cancel:function(e){t.modals.edit=!1},confirm:t.confirmEditShot}})],1)},Ri=[],Fi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.shotToEdit&&this.shotToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("shots.edit_title"))+" "+t._s(t.shotToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("shots.new_shot"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("combobox",{attrs:{label:t.$t("shots.fields.sequence"),options:t.getSequenceOptions},model:{value:t.form.sequence_id,callback:function(e){t.$set(t.form,"sequence_id",e)},expression:"form.sequence_id"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("shots.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:t.$t("shots.fields.description")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.runConfirmation(e):null}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nbFramesField",attrs:{label:t.$t("shots.fields.nb_frames"),type:"number"},on:{enter:t.runConfirmation},model:{value:t.form.nb_frames,callback:function(e){t.$set(t.form,"nb_frames",e)},expression:"form.nb_frames"}}),s("text-field",{ref:"frameInField",attrs:{label:t.$t("shots.fields.frame_in"),type:"number"},model:{value:t.form.frameIn,callback:function(e){t.$set(t.form,"frameIn",e)},expression:"form.frameIn"}}),s("text-field",{ref:"frameOutField",attrs:{label:t.$t("shots.fields.frame_out"),type:"number"},on:{enter:t.runConfirmation},model:{value:t.form.frameOut,callback:function(e){t.$set(t.form,"frameOut",e)},expression:"form.frameOut"}}),s("text-field",{ref:"fpsField",attrs:{label:t.$t("shots.fields.fps"),type:"number"},on:{enter:t.runConfirmation},model:{value:t.form.fps,callback:function(e){t.$set(t.form,"fps",e)},expression:"form.fps"}}),t._l(t.shotMetadataDescriptors,(function(e){return s("div",{key:e.id},[e.choices.length>0?s("combobox",{attrs:{label:e.name,options:t.getDescriptorChoicesOptions(e)},model:{value:t.form.data[e.field_name],callback:function(s){t.$set(t.form.data,e.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:e.name},on:{enter:t.runConfirmation},model:{value:t.form.data[e.field_name],callback:function(s){t.$set(t.form.data,e.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)}))],2),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),t.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")]):s("button",{staticClass:"button is-link",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("shots.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.shotSuccessText)+"\n        ")])],1)])])])},Vi=[];function Ui(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Bi(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ui(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ui(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var zi={name:"edit-shot-modal",mixins:[K["a"]],components:{Combobox:J["a"],TextField:Y["a"],TextareaField:Q["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","shotToEdit","errorText"],data:function(){return{form:{data:{}},shotSuccessText:""}},computed:Bi({},Object(d["c"])(["currentProduction","getSequenceOptions","getOpenProductionOptions","openProductions","sequences","shots","shotCreated","shotMetadataDescriptors"]),{frameIn:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_in:""},frameOut:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_out:""},fps:function(){return this.shotToEdit.data?this.shotToEdit.data.fps:""}}),methods:Bi({},Object(d["b"])([]),{runConfirmation:function(){this.isEditing()?this.confirmClicked():this.confirmAndStayClicked()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},getDescriptorChoicesOptions:function(t){var e=t.choices.map((function(t){return{label:t,value:t}}));return[{label:"",value:""}].concat(Object(W["a"])(e))},isEditing:function(){return this.shotToEdit&&this.shotToEdit.id},resetForm:function(){this.shotSuccessText="",this.isEditing()?this.form={sequence_id:this.shotToEdit.sequence_id,project_id:this.shotToEdit.project_id,name:this.shotToEdit.name,description:this.shotToEdit.description,nb_frames:this.shotToEdit.nb_frames,frameIn:this.frameIn,frameOut:this.frameOut,fps:this.fps,data:Bi({},this.shotToEdit.data)||{}}:(this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.sequences.length>0&&(this.form.sequence_id=this.sequences[0].id),this.form.name="",this.form.description="",this.form.nb_frames=0,this.form.data={})}}),mounted:function(){this.resetForm()},watch:{active:function(){var t=this;this.shotSuccessText="",this.resetForm(),this.active&&setTimeout((function(){t.$refs.nameField.focus()}),100)},shotToEdit:function(){this.resetForm()},shotCreated:function(){this.isEditing()?this.shotSuccessText=this.$t("shots.edit_success",{name:this.shotCreated}):this.shotSuccessText=this.$t("shots.new_success",{name:this.shotCreated})}}},Hi=zi,Gi=(s("eae5"),Object(m["a"])(Hi,Fi,Vi,!1,null,"219c6310",null)),Wi=Gi.exports;function Ki(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Yi(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ki(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ki(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Qi={name:"shot",components:{ButtonSimple:B["a"],ChevronLeftIcon:U["e"],DescriptionCell:z["a"],EditShotModal:Wi,EntityThumbnail:_t["a"],EntityTaskList:mt,PageSubtitle:bt["a"],PageTitle:vt["a"],TableInfo:rt["a"]},data:function(){return{currentShot:null,casting:{isLoading:!1,isError:!1},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},created:function(){var t=this;if(this.currentProduction){var e={productionId:this.currentProduction.id};this.currentEpisode&&(e.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",e)}else this.setProduction(this.$route.params.production_id);this.clearSelectedTasks(),this.currentShot=this.getCurrentShot(),this.casting.isLoading=!0,this.casting.isError=!1,this.currentShot?this.loadShotCasting({shot:this.currentShot,callback:function(e,s){t.casting.isError=!!e,t.casting.isLoading=!0}}):this.loadShot(this.route.params.shot_id).then((function(e){t.currentShot=t.getCurrentShot(),t.loadShotCasting({shot:t.currentShot,callback:function(e,s){t.casting.isError=!!e,t.casting.isLoading=!0}})}))},computed:Yi({},Object(d["c"])(["currentProduction","route","shotMap","shotMetadataDescriptors","shotsPath"]),{title:function(){return this.currentShot?this.currentShot.episode_name?"".concat(this.currentShot.episode_name," / ")+"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"Loading..."},shotThumbnailPath:function(){var t=this.currentShot.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,".png")},isPreview:function(){return this.currentShot&&this.currentShot.preview_file_id&&this.currentShot.preview_file_id.length>0}}),methods:Yi({},Object(d["b"])(["editShot","loadShot","loadShotCasting","clearSelectedTasks"]),{changeTab:function(t){this.selectedTab=t},getCurrentShot:function(){return this.shotMap[this.route.params.shot_id]||null},onEditClicked:function(){this.modals.edit=!0},confirmEditShot:function(t){var e=this;t.id=this.currentShot.id,this.loading.edit=!0,this.errors.edit=!1,this.editShot({data:t,callback:function(t){t?(e.loading.edit=!1,e.errors.edit=!0):(e.loading.edit=!1,e.modals.edit=!1)}})}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Ji=Qi,Xi=(s("7132"),Object(m["a"])(Ji,Ni,Ri,!1,null,"25ada82a",null)),Zi=Xi.exports,ta=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"shots page"},[s("div",{staticClass:"shot-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("search-field",{ref:"shot-search-field",attrs:{"can-save":!0,placeholder:"ex: e01 s01 anim=wip"},on:{change:t.onSearchChange,save:t.saveSearchQuery}})],1)]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),t.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:t.$t("main.csv.import_file"),icon:"upload","is-responsive":!0},on:{click:t.showImportModal}}),s("button-href-link",{staticClass:"flexrow-item",attrs:{title:t.$t("main.csv.export_file"),icon:"download","is-responsive":!0,path:"/api/export/csv/projects/"+t.currentProduction.id+"/shots.csv"}}),s("button-simple",{staticClass:"flexrow-item",attrs:{text:t.$t("shots.manage"),icon:"plus","is-responsive":!0},on:{click:t.showManageShots}})],1):t._e()])]),s("div",{staticClass:"query-list"},[t.isShotsLoading||t.initialLoading?t._e():s("search-query-list",{attrs:{queries:t.shotSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1)]),s("shot-list",{ref:"shot-list",attrs:{"displayed-shots":t.displayedShotsBySequence,"is-loading":t.isShotsLoading||t.initialLoading,"is-error":t.isShotsLoadingError,"validation-columns":t.shotValidationColumns},on:{"create-tasks":t.showCreateTasksModal,scroll:t.saveScrollPosition,"delete-all-tasks":t.onDeleteAllTasksClicked,"add-metadata":t.onAddMetadataClicked,"delete-metadata":t.onDeleteMetadataClicked,"edit-metadata":t.onEditMetadataClicked,"add-shots":t.showManageShots}})],1)]),1===t.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(t.selectedTasks)[0]}})],1):t._e(),s("manage-shots-modal",{attrs:{active:t.modals.isManageDisplayed,"is-loading":t.loading.manage,"is-error":!1,"is-success":!1,"cancel-route":t.shotsPath},on:{cancel:t.hideManageShots}}),s("edit-shot-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-loading-stay":t.loading.stay,"is-error":t.editShot.isCreateError,"is-success":t.editShot.isSuccess,"cancel-route":t.shotsPath,"shot-to-edit":t.shotToEdit},on:{confirm:t.confirmEditShot}}),s("delete-modal",{ref:"delete-shot-modal",attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteShot.isLoading,"is-error":t.deleteShot.isError,"cancel-route":t.shotsPath,text:t.deleteText(),"error-text":t.$t("shots.delete_error")},on:{confirm:t.confirmDeleteShot}}),s("delete-modal",{ref:"restore-shot-modal",attrs:{active:t.modals.isRestoreDisplayed,"is-loading":t.restoreShot.isLoading,"is-error":t.restoreShot.isError,"cancel-route":t.shotsPath,text:t.restoreText(),"error-text":t.$t("shots.restore_error")},on:{confirm:t.confirmRestoreShot}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:t.modals.isDeleteMetadataDisplayed,"is-loading":t.loading.deleteMetadata,"is-error":t.errors.deleteMetadata,text:t.$t("productions.metadata.delete_text"),"error-text":t.$t("productions.metadata.delete_error")},on:{cancel:function(e){t.modals.isDeleteMetadataDisplayed=!1},confirm:t.confirmDeleteMetadata}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:t.modals.isDeleteAllTasksDisplayed,"is-loading":t.loading.deleteAllTasks,"is-error":t.errors.deleteAllTasks,"cancel-route":t.shotsPath,text:t.deleteAllTasksText(),"error-text":t.$t("tasks.delete_all_error"),"lock-text":t.deleteAllTasksLockText},on:{confirm:t.confirmDeleteAllTasks}}),s("import-modal",{attrs:{active:t.modals.isImportDisplayed,"is-loading":t.loading.importing,"is-error":t.errors.importing,"form-data":t.shotsCsvFormData,columns:t.columns},on:{cancel:t.hideImportModal,fileselected:t.selectFile,confirm:t.uploadImportFile}}),s("create-tasks-modal",{attrs:{active:t.modals.isCreateTasksDisplayed,"is-loading":t.loading.creatingTasks,"is-loading-stay":t.loading.creatingTasksStay,"is-error":t.errors.creatingTasks,title:t.$t("tasks.create_tasks_shot"),text:t.$t("tasks.create_tasks_shot_explaination"),"error-text":t.$t("tasks.create_tasks_shot_failed")},on:{cancel:t.hideCreateTasksModal,confirm:t.confirmCreateTasks,"confirm-and-stay":t.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:t.modals.isAddMetadataDisplayed,"is-loading":t.loading.addMetadata,"is-loading-stay":t.loading.addMetadata,"is-error":t.errors.addMetadata,"descriptor-to-edit":t.descriptorToEdit},on:{cancel:t.closeMetadataModal,confirm:t.confirmAddMetadata}})],1)},ea=[],sa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("page-title",{staticClass:"title",attrs:{text:t.$t("shots.manage")}}),s("div",{staticClass:"explaination"},[t._v(t._s(t.$t("shots.creation_explaination")))]),s("div",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"filler"}),s("combobox",{ref:"shot-padding",staticClass:"shot-padding flexrow-item",attrs:{label:t.$t("shots.padding"),options:t.shotPaddingOptions},model:{value:t.shotPadding,callback:function(e){t.shotPadding=e},expression:"shotPadding"}})],1)]),s("div",{staticClass:"shot-columns"},[t.isTVShow?s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[t._v(t._s(t.$t("shots.episodes")))]),s("div",{staticClass:"list"},t._l(t.episodes,(function(e){return s("div",{key:e.id,class:{"entity-line":!0,selected:e.id===t.selectedEpisodeId},on:{click:function(s){return t.selectEpisode(e.id)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.names.episode,expression:"names.episode"},{name:"focus",rawName:"v-focus"}],ref:"addEpisodeInput",staticClass:"input",attrs:{placeholder:"EP01",type:"text"},domProps:{value:t.names.episode},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.focusAddSequence(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addEpisode(e)}],input:function(e){e.target.composing||t.$set(t.names,"episode",e.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":t.loading.addEpisode},attrs:{disabled:!t.isAddEpisodeAllowed},on:{click:t.addEpisode}},[t._v("\n              "+t._s(t.$t("main.add"))+"\n            ")])])]):t._e(),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[t._v(t._s(t.$t("shots.sequences")))]),s("div",{staticClass:"list"},t._l(t.displayedSequences,(function(e){return s("div",{key:e.id,class:{"entity-line":!0,selected:e.id===t.selectedSequenceId},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.focusAddShot(e)},click:function(s){return t.selectSequence(e.id)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.names.sequence,expression:"names.sequence"}],ref:"addSequenceInput",staticClass:"input",attrs:{placeholder:"SQ01",type:"text"},domProps:{value:t.names.sequence},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addSequence(e)},input:function(e){e.target.composing||t.$set(t.names,"sequence",e.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":t.loading.addSequence},attrs:{disabled:!t.isAddSequenceAllowed},on:{click:t.addSequence}},[t._v("\n              "+t._s(t.$t("main.add"))+"\n            ")])])]),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[t._v(t._s(t.$t("shots.title")))]),s("div",{staticClass:"list"},t._l(t.displayedShots,(function(e){return s("div",{key:e.id,staticClass:"entity-line"},[t._v("\n              "+t._s(e.name)+"\n            ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.names.shot,expression:"names.shot"}],ref:"addShotInput",staticClass:"input",attrs:{placeholder:"SH01",type:"text"},domProps:{value:t.names.shot},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addShot(e)},input:function(e){e.target.composing||t.$set(t.names,"shot",e.target.value)}}})]),s("div",{staticClass:"field"},[s("button",{class:{button:!0,"is-success":!0,"is-loading":t.loading.addShot},attrs:{disabled:!t.isAddShotAllowed},on:{click:t.addShot}},[t._v("\n              "+t._s(t.$t("main.add"))+"\n            ")])])])]),s("p",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")])])],1)])])},na=[];s("8615");function ia(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function aa(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ia(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ia(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var oa={name:"manage-shot-modal",mixins:[K["a"]],components:{Combobox:J["a"],PageTitle:vt["a"]},props:{active:{default:!0,type:Boolean}},data:function(){return{names:{episode:"",sequence:"",shot:""},loading:{addEpisode:!1,addSequence:!1,addShot:!1},displayedSequences:[],displayedShots:[],selectedEpisodeId:null,selectedSequenceId:null,shotPaddingOptions:[{label:"1",padding:"1"},{label:"2",padding:"2"},{label:"10",padding:"10"}],shotPadding:"1"}},watch:{active:function(){var t=this;this.active&&(this.shotPadding="1",setTimeout((function(){t.isTVShow?t.$refs.addEpisodeInput.focus():t.$refs.addSequenceInput.focus()}),100))},sequences:function(){this.displayedSequences=this.sequences,this.displayedShots=[]}},computed:aa({},Object(d["c"])(["currentProduction","episodes","isTVShow","sequences","shotMap"]),{isAddEpisodeAllowed:function(){var t=this,e=""===this.names.episode,s=this.episodes.find((function(e){return t.names.episode===e.name}));return!e&&!s},isAddSequenceAllowed:function(){var t=this,e=""===this.names.sequence,s=this.displayedSequences.find((function(e){return t.names.sequence===e.name}));return!e&&!s&&(this.selectedEpisodeId||!this.isTVShow)},isAddShotAllowed:function(){var t=this,e=""===this.names.shot,s=this.displayedShots.find((function(e){return t.names.shot===e.name}));return!e&&!s&&this.selectedSequenceId}}),methods:aa({},Object(d["b"])(["newEpisode","newSequence","newShot","setCurrentEpisode"]),{focusAddSequence:function(){this.$refs.addSequenceInput.focus()},focusAddShot:function(){this.$refs.addShotInput.focus()},selectEpisode:function(t){this.isTVShow?(this.selectedEpisodeId=t,this.$router.push({name:"episode-shots",params:{production_id:this.currentProduction.id,episode_id:t}})):(this.selectedEpisodeId=t,this.displayedSequences=this.sequences.filter((function(e){return e.parent_id===t})),this.displayedShots=[])},selectSequence:function(t){this.selectedSequenceId=t,this.displayedShots=Object.values(this.shotMap).filter((function(e){return e.sequence_id===t}))},addEpisode:function(){var t=this;if(this.isAddEpisodeAllowed){var e=this.names.episode;if(e.length>0){this.loading.addEpisode=!0;var s={name:this.names.episode,project_id:this.currentProduction.id};this.newEpisode({episode:s,callback:function(e,s){e&&console.log(e),t.loading.addEpisode=!1,t.selectEpisode(s.id),t.names.episode=fi["a"].generateNextName(s.name)}})}}},addSequence:function(){var t=this;if(this.isAddSequenceAllowed){var e=this.names.sequence;if(e.length>0&&(this.selectedEpisodeId||!this.isTVShow)){this.loading.addSequence=!0;var s={name:this.names.sequence,episode_id:this.selectedEpisodeId,project_id:this.currentProduction.id};this.newSequence({sequence:s,callback:function(e,s){e&&console.log(e),t.loading.addSequence=!1,t.selectEpisode(t.selectedEpisodeId),t.selectSequence(s.id),t.names.sequence=fi["a"].generateNextName(s.name)}})}}},addShot:function(){var t=this;if(this.isAddShotAllowed){var e=this.names.shot;if(this.loading.addShot=!0,e.length>0&&this.selectedSequenceId){var s={name:this.names.shot,sequence_id:this.selectedSequenceId,project_id:this.currentProduction.id};this.loading.addShot=!1,this.newShot({shot:s,callback:function(e){e&&console.log(e),t.loading.addShot=!1,t.selectSequence(t.selectedSequenceId),t.names.shot=fi["a"].generateNextName(s.name,parseInt(t.shotPadding))}})}}}})},ra=oa,ca=(s("976d"),Object(m["a"])(ra,sa,na,!1,null,"16886222",null)),da=ca.exports,ua=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":t.hiddenColumns[t.lastHeaderMenuDisplayed],"is-current-user-admin":t.isCurrentUserAdmin},on:{"minimize-clicked":function(e){return t.onMinimizeColumnToggled()},"delete-all-clicked":function(e){return t.onDeleteAllTasksClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":t.isCurrentUserAdmin},on:{"edit-clicked":function(e){return t.onEditMetadataClicked()},"delete-clicked":function(e){return t.onDeleteMetadataClicked()}}}),s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"thumbnail"}),s("th",{ref:"th-shot",staticClass:"name shot-name"},[t._v("\n            "+t._s(t.$t("shots.fields.name"))+"\n          ")]),!t.isCurrentUserClient&&t.isShowInfos?s("th",{staticClass:"description"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[t._v("\n                "+t._s(t.$t("shots.fields.description"))+"\n              ")]),t.isCurrentUserAdmin&&!t.isLoading?s("button-simple",{staticClass:"is-small flexrow",attrs:{icon:"plus",text:""},on:{click:t.onAddMetadataClicked}}):t._e()],1)]):t._e(),t._l(t.shotMetadataDescriptors,(function(e){return t.isShowInfos?s("th",{key:e.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item descriptor-name"},[t._v("\n              "+t._s(e.name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return t.showMetadataHeaderMenu(e.id,s)}}})],1)]):t._e()})),!t.isCurrentUserClient&&t.isShowInfos&&t.isTime?s("th",{ref:"th-spent",staticClass:"time-spent"},[t._v("\n            "+t._s(t.$t("shots.fields.time_spent"))+"\n          ")]):t._e(),t.isShowInfos?s("th",{staticClass:"frames"},[t._v("\n            "+t._s(t.$t("shots.fields.nb_frames"))+"\n          ")]):t._e(),t.isFrameIn&&t.isShowInfos?s("th",{staticClass:"framein"},[t._v("\n            "+t._s(t.$t("shots.fields.frame_in"))+"\n          ")]):t._e(),t.isFrameOut&&t.isShowInfos?s("th",{staticClass:"frameout"},[t._v("\n            "+t._s(t.$t("shots.fields.frame_out"))+"\n          ")]):t._e(),t.isFps&&t.isShowInfos?s("th",{staticClass:"fps"},[t._v("\n            "+t._s(t.$t("shots.fields.fps"))+"\n          ")]):t._e(),t._l(t.sortedValidationColumns,(function(e){return t.isLoading||t.hiddenColumns[e]&&!t.isShowInfos?t._e():s("th",{key:e,class:{"validation-cell":!t.hiddenColumns[e],"hidden-validation-cell":t.hiddenColumns[e]},style:t.getValidationStyle(e)},[s("div",{staticClass:"flexrow"},[s("router-link",{staticClass:"flexrow-item validation-name",staticStyle:{"margin-right":"0"},attrs:{to:t.taskTypePath(e)}},[t._v("\n                "+t._s(t.hiddenColumns[e]?"":t.taskTypeMap[e].name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return t.showHeaderMenu(e,s)}}})],1)])})),s("th",{staticClass:"actions"},[t.isCurrentUserManager?s("button-simple",{class:{"is-small":!0,highlighted:t.isEmptyTask},attrs:{icon:"plus",text:t.$t("tasks.create_tasks")},on:{click:function(e){return t.$emit("create-tasks")}}}):t._e()],1)],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),!t.isEmptyList||t.isCurrentUserClient||t.isLoading?t._e():s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("shots.empty_list")))]),s("button-simple",{staticClass:"level-item big-button",attrs:{text:t.$t("shots.new_shots")},on:{click:function(e){return t.$emit("add-shots")}}})],1),t.isEmptyList&&t.isCurrentUserClient&&!t.isLoading?s("div",{staticClass:"has-text-centered"},[t._m(1),s("p",{staticClass:"info"},[t._v(t._s(t.$t("shots.empty_list_client")))])]):t._e(),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[t.isListVisible?s("table",{staticClass:"table splitted-table unselectable"},t._l(t.displayedShots,(function(e,n){return s("tbody",{key:e[0]?e[0].sequence_id+e[0].canceled:"",ref:"body-tbody",refInFor:!0,staticClass:"tbody"},[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[t._v("\n            "+t._s(e[0]?e[0].sequence_name:"")+"\n          ")])]),t._l(e,(function(e,i){return s("tr",{key:e.id,class:{canceled:e.canceled}},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e}})],1),s("td",{class:{"shot-name":!0,name:!0,bold:!e.canceled}},[s("router-link",{attrs:{to:t.shotPath(e.id)}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1),!t.isCurrentUserClient&&t.isShowInfos?s("description-cell",{staticClass:"description",attrs:{entry:e}}):t._e(),t._l(t.shotMetadataDescriptors,(function(n){return t.isShowInfos?s("td",{key:e.id+"-"+n.id,staticClass:"metadata-descriptor"},[t._v("\n            "+t._s(e.data?e.data[n.field_name]:"")+"\n          ")]):t._e()})),!t.isCurrentUserClient&&t.isShowInfos&&t.isTime?s("td",{staticClass:"time-spent"},[t._v("\n            "+t._s(t.formatDuration(e.timeSpent))+"\n          ")]):t._e(),!t.isCurrentUserClient&&t.isShowInfos?s("td",{staticClass:"frames"},[t._v("\n            "+t._s(e.nb_frames)+"\n          ")]):t._e(),t.isFrameIn&&t.isShowInfos?s("td",{staticClass:"framein"},[t._v("\n            "+t._s(e.data&&e.data.frame_in?e.data.frame_in:"")+"\n          ")]):t._e(),t.isFrameIn&&t.isShowInfos?s("td",{staticClass:"frameout"},[t._v("\n            "+t._s(e.data&&e.data.frame_out?e.data.frame_out:"")+"\n          ")]):t._e(),t.isFps&&t.isShowInfos?s("td",{staticClass:"fps"},[t._v("\n            "+t._s(e.data&&e.data.fps?e.data.fps:"")+"\n          ")]):t._e(),t._l(t.sortedValidationColumns,(function(a,o){return t.isLoading||t.hiddenColumns[a]&&!t.isShowInfos?t._e():s("validation-cell",{key:a+"-"+e.id,ref:"validation-"+t.getIndex(i,n)+"-"+o,refInFor:!0,class:{"validation-cell":!t.hiddenColumns[a],"hidden-validation-cell":t.hiddenColumns[a]},attrs:{column:t.taskTypeMap[a],entity:e,"task-test":t.taskMap[e.validations[a]],minimized:t.hiddenColumns[a],selected:t.shotSelectionGrid[t.getIndex(i,n)][o],rowX:t.getIndex(i,n),columnY:o,"is-assignees":t.isShowAssignations},on:{select:t.onTaskSelected,unselect:t.onTaskUnselected}})})),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":t.editPath(e.id),"restore-route":t.restorePath(e.id),"delete-route":t.deletePath(e.id)}}):s("td",{staticClass:"actions"})],2)})),t._m(2,!0)],2)})),0):t._e()]),t.isEmptyList||t.isLoading?t._e():s("p",{staticClass:"has-text-centered nb-shots"},[t._v("\n    "+t._s(t.displayedShotsLength)+" "+t._s(t.$tc("shots.number",t.displayedShotsLength))+"\n    ("+t._s(t.formatDuration(t.displayedShotsTimeSpent))+"\n     "+t._s(t.$tc("main.days_spent",t.displayedShotsTimeSpent))+", "+t._s(t.displayedShotsFrames)+" "+t._s(t.$tc("main.nb_frames",t.displayedShotsFrames))+")\n\n  ")])],1)},la=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"info"},[n("img",{attrs:{src:s("732b")}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"empty-line"},[s("td",{attrs:{colspan:"30"}})])}];function pa(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function fa(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?pa(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):pa(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var ha={name:"shot-list",mixins:[jt["a"],Dt["a"],xt["a"]],props:{displayedShots:{type:Array,default:function(){return[]}},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonSimple:B["a"],ChevronDownIcon:U["d"],DescriptionCell:z["a"],EntityThumbnail:_t["a"],RowActions:Mt["a"],TableHeaderMenu:Vt,TableMetadataHeaderMenu:Yt,TableInfo:rt["a"],ValidationCell:Qt["a"]},computed:fa({},Object(d["c"])(["currentProduction","currentEpisode","displayedShotsLength","displayedShotsTimeSpent","displayedShotsFrames","isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isFps","isFrameIn","isFrameOut","isSingleEpisode","isShowAssignations","isShowInfos","isTime","isTVShow","nbSelectedTasks","shotFilledColumns","shotMap","shotMetadataDescriptors","shotSearchText","shotSelectionGrid","taskMap","taskTypeMap"]),{isEmptyList:function(){return this.displayedShots&&0===this.displayedShots[0].length&&!this.isLoading&&!this.isError&&(!this.shotSearchText||0===this.shotSearchText.length)},createTasksPath:function(){return this.getPath("create-shot-tasks")},manageShotsPath:function(){var t={name:"manage-shots",params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-manage-shots",t.params.episode_id=this.currentEpisode.id),t},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedShotsLength>0}}),methods:fa({},Object(d["b"])(["displayMoreShots"]),{onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.loadMoreShots()},loadMoreShots:function(){this.displayMoreShots(),this.$nextTick(this.resizeHeaders)},resizeHeaders:function(){this.resizeSplittedTableHeaders([{index:1,name:"shot"}])},taskTypePath:function(t){return this.isTVShow&&this.currentEpisode?{name:"episode-task-type",params:{production_id:this.currentProduction.id,episode_id:this.currentEpisode.id,task_type_id:t,type:"shots"}}:{name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:t,type:"shots"}}},shotPath:function(t){return this.getPath("shot",t)},editPath:function(t){return this.getPath("edit-shot",t)},deletePath:function(t){return this.getPath("delete-shot",t)},restorePath:function(t){return this.getPath("restore-shot",t)},getPath:function(t,e){var s={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(t),s.params.episode_id=this.currentEpisode.id),e&&(s.params.shot_id=e),s},getIndex:function(t,e){var s=0,n=0;while(s<e)n+=this.displayedShots[s].length,s++;return t+n}}),watch:{validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},ma=ha,_a=(s("5d53"),Object(m["a"])(ma,ua,la,!1,null,"efb5d304",null)),va=_a.exports;function ba(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function ya(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ba(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ba(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var ga={name:"shots",components:{AddMetadataModal:pe,ButtonHrefLink:fe["a"],ButtonSimple:B["a"],CreateTasksModal:ke,DeleteModal:Oe["a"],EditShotModal:Wi,ImportModal:Se["a"],HardDeleteModal:De,ManageShotsModal:da,SearchField:Ae["a"],SearchQueryList:Me["a"],ShowAssignationsButton:Ve,ShowInfosButton:Ye,ShotList:va,TaskInfo:Qe["a"]},data:function(){return{initialLoading:!0,modals:{isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isDeleteAllTasksDisplayed:!1,isImportDisplayed:!1,isManageDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1},loading:{addMetadata:!1,creatingTasks:!1,creatingTasksStay:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,importing:!1,stay:!1},errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,importing:!1},descriptorToEdit:{},shotToDelete:null,shotToEdit:null,columns:["Episode","Sequence","Name","Description","FPS","Frame In","Frame Out"],deleteAllTasksLockText:null}},computed:ya({},Object(d["c"])(["currentEpisode","currentProduction","deleteShot","displayedShotsBySequence","editShot","episodeMap","episodes","isCurrentUserManager","isShotsLoading","isShotsLoadingError","isShowAssignations","isTVShow","nbSelectedTasks","openProductions","restoreShot","sequences","selectedTasks","shotMap","shotsCsvFormData","shotSearchQueries","shotSearchText","shotsPath","shotValidationColumns","shotListScrollPosition","taskTypeMap"])),created:function(){this.setLastProductionScreen("shots")},mounted:function(){var t=this;this.shotSearchText.length>0&&this.$refs["shot-search-field"].setValue(this.shotSearchText),Object.keys(this.shotMap).length<2||this.shotValidationColumns.length>0&&!Object.keys(this.shotMap)[0].validations?setTimeout((function(){t.loadShots((function(e){setTimeout((function(){t.initialLoading=!1}),200),t.resizeHeaders(),e||(t.onSearchChange(),t.handleModalsDisplay(),setTimeout((function(){t.resizeHeaders(),t.$refs["shot-list"].setScrollPosition(t.shotListScrollPosition)}),500))}))}),100):(this.isShotsLoading||(this.initialLoading=!1),this.resizeHeaders(),this.onSearchChange(),this.$refs["shot-list"].setScrollPosition(this.shotListScrollPosition))},methods:ya({},Object(d["b"])(["addMetadataDescriptor","deleteAllTasks","deleteMetadataDescriptor","hideAssignations","loadShots","loadComment","removeShotSearch","saveShotSearch","setLastProductionScreen","setShotSearch","showAssignations","uploadShotFile"]),{confirmAddMetadata:function(t){var e=this;this.loading.addMetadata=!0,t.entity_type="Shot",this.addMetadataDescriptor(t).then((function(){e.loading.addMetadata=!1,e.modals.isAddMetadataDisplayed=!1})).catch((function(t){console.error(t),e.loading.addMetadata=!1,e.errors.addMetadata=!0}))},closeMetadataModal:function(){this.modals.isAddMetadataDisplayed=!1},confirmDeleteMetadata:function(){var t=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){t.errors.deleteMetadata=!1,t.loading.deleteMetadata=!1,t.modals.isDeleteMetadataDisplayed=!1})).catch((function(e){console.error(e),t.errors.deleteMetadata=!0,t.loading.deleteMetadata=!1}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(t){this.descriptorIdToDelete=t,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(t){this.descriptorToEdit=this.currentProduction.descriptors.find((function(e){return e.id===t})),this.modals.isAddMetadataDisplayed=!0},confirmEditShot:function(t){var e=this,s="newShot";this.loading.edit=!0,this.editShot.isCreateError=!1,this.shotToEdit&&this.shotToEdit.id&&(s="editShot",t.id=this.shotToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t?(e.loading.edit=!1,e.editShot.isCreateError=!0):(e.loading.edit=!1,e.modals.isNewDisplayed=!1,e.$router.push(e.shotsPath))}})},confirmDeleteAllTasks:function(){var t=this,e=this.$route.params.task_type_id,s=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllTasks({projectId:s,taskTypeId:e}).then((function(){t.loading.deleteAllTasks=!1,t.loadShots((function(){t.resizeHeaders()})),t.$router.push(t.shotsPath)})).catch((function(e){console.error(e),t.loading.deleteAllTasks=!1,t.errors.deleteAllTasks=!0}))},confirmDeleteShot:function(){var t=this;this.$store.dispatch("deleteShot",{shot:this.shotToDelete,callback:function(e){e||t.$router.push(t.shotsPath)}})},confirmRestoreShot:function(){var t=this;this.$store.dispatch("restoreShot",{shot:this.shotToRestore,callback:function(e){e||t.$router.push(t.shotsPath)}})},confirmCreateTasks:function(t){var e=this;this.loading.creatingTasks=!0,this.runTasksCreation(t,(function(){e.hideCreateTasksModal(),e.loading.creatingTasks=!1}))},confirmCreateTasksAndStay:function(t){var e=this;this.loading.creatingTasksStay=!0,this.runTasksCreation(t,(function(){e.loading.creatingTasksStay=!1}))},runTasksCreation:function(t,e){var s=this;this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:t.task_type_id,project_id:this.currentProduction.id,type:"shots",callback:function(t){t?s.errors.creatingTasks=!0:s.loadShots((function(){s.resizeHeaders()})),e(t)}})},resetEditModal:function(){var t={name:""};this.sequences.length>0&&(t.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(t.production_id=this.openProductions[0].id),this.shotToEdit=t},deleteText:function(){var t=this.shotToDelete;return t?this.$t("shots.delete_text",{name:t.name}):""},deleteAllTasksText:function(){var t=this.taskTypeMap[this.$route.params.task_type_id];return t?this.$t("tasks.delete_all_text",{name:t.name}):""},restoreText:function(){var t=this.shotToRestore;return t?this.$t("shots.restore_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$route.path,e=this.$route.params.shot_id;this.editShot.isSuccess=!1,this.editShot.isError=!1,Object.assign(this.modals,{isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1}),t.indexOf("new")>0?(this.resetEditModal(),this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.shotToEdit=this.shotMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete-all-tasks")>0?this.modals.isDeleteAllTasksDisplayed=!0:t.indexOf("delete")>0?(this.shotToDelete=this.shotMap[e],this.modals.isDeleteDisplayed=!0):t.indexOf("restore")>0&&(this.shotToRestore=this.shotMap[e],this.modals.isRestoreDisplayed=!0)},selectFile:function(t){this.$store.commit("SHOT_CSV_FILE_SELECTED",t)},uploadImportFile:function(){var t=this;this.loading.importing=!0,this.errors.importing=!1,this.uploadShotFile((function(e){e?(t.loading.importing=!1,t.errors.importing=!0):(t.loading.importing=!1,t.hideImportModal(),t.loadShots((function(){t.resizeHeaders()})))}))},onDeleteAllTasksClicked:function(t){var e=this.getPath("delete-all-shot-tasks"),s=this.taskTypeMap[t];e.params.task_type_id=t,this.deleteAllTasksLockText=s.name,this.$router.push(e)},onSearchChange:function(t){var e=this.$refs["shot-search-field"].getValue();1!==e.length&&(this.setShotSearch(e),this.resizeHeaders())},saveScrollPosition:function(t){this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",t)},changeSearch:function(t){this.$refs["shot-search-field"].setValue(t.search_query),this.$refs["shot-search-field"].$emit("change",t.search_query),this.resizeHeaders()},saveSearchQuery:function(t){this.saveShotSearch(t).then((function(){})).catch((function(t){t&&console.log("error")}))},removeSearchQuery:function(t){this.removeShotSearch(t).then((function(){})).catch((function(t){t&&console.log("error")}))},resizeHeaders:function(){var t=this;setTimeout((function(){t.$refs["shot-list"]&&t.$refs["shot-list"].resizeHeaders()}),0)},getPath:function(t){var e={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-".concat(t),e.params.episode_id=this.currentEpisode.id),e},showManageShots:function(){this.modals.isManageDisplayed=!0},hideManageShots:function(){this.modals.isManageDisplayed=!1},showImportModal:function(){this.modals.isImportDisplayed=!0},hideImportModal:function(){this.modals.isImportDisplayed=!1},showCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!0},hideCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!1}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var t=this;this.$refs["shot-search-field"].setValue(""),this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",0),this.initialLoading=!0,this.isTVShow||this.loadShots((function(e){t.initialLoading=!1,t.resizeHeaders(),e||t.handleModalsDisplay()}))},currentEpisode:function(){var t=this;this.isTVShow&&this.currentEpisode&&(this.initialLoading=!0,this.loadShots((function(e){t.initialLoading=!1,t.resizeHeaders(),e||t.handleModalsDisplay()})))},displayedShots:function(){this.resizeHeaders()}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("shots.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("shots.title")," - Kitsu")}}},ka=ga,Oa=(s("711b"),Object(m["a"])(ka,ta,ea,!1,null,"c39785a2",null)),Sa=Oa.exports,wa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"people page fixed-page"},[s("div",{staticClass:"flexrow mt2 add-people"},[s("span",{staticClass:"flexrow-item people-field-label"},[t._v("\n      "+t._s(t.$t("people.add_member_to_team"))+"\n    ")]),s("people-field",{ref:"people-field",staticClass:"flexrow-item add-people-field",attrs:{people:t.unlistedPeople},on:{enter:t.addPerson},model:{value:t.person,callback:function(e){t.person=e},expression:"person"}}),s("button",{staticClass:"button flexrow-item",on:{click:t.addPerson}},[t._v("\n      "+t._s(t.$t("main.add"))+"\n    ")])],1),s("production-team-list",{attrs:{entries:t.teamPersons,"is-loading":t.isTeamLoading,"is-error":t.isTeamLoadingError},on:{remove:t.removePerson}})],1)},Ta=[],Ca=(s("6762"),s("2fdb"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v("\n          "+t._s(t.$t("people.list.name"))+"\n          ")]),s("th",{staticClass:"email"},[t._v("\n          "+t._s(t.$t("people.list.email"))+"\n          ")]),s("th",{staticClass:"phone"},[t._v("\n          "+t._s(t.$t("people.list.phone"))+"\n          ")]),s("th",{staticClass:"role"},[t._v("\n          "+t._s(t.$t("people.list.role"))+"\n          ")]),s("th",{staticClass:"actions"})])])])]),t.isEmpty?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,(function(e){return s("tr",{key:e.id},[s("people-name-cell",{staticClass:"name",attrs:{person:e}}),s("td",{staticClass:"email"},[t._v(t._s(e.email))]),s("td",{staticClass:"phone"},[t._v(t._s(e.phone))]),s("td",{staticClass:"role"},[t._v(t._s(t.$t("people.role."+e.role)))]),t.isCurrentUserAdmin?s("td",{staticClass:"actions"},[s("button",{staticClass:"button",on:{click:function(s){return t.removePerson(e)}}},[t._v("\n              "+t._s(t.$t("main.remove"))+"\n            ")])]):s("td",{staticClass:"actions"})],1)})),0)])]),t.isEmpty?s("div",{staticClass:"table-body"},[t.isEmpty?s("p",{staticClass:"has-text-centered mt2"},[t._v("\n      "+t._s(t.$t("people.empty_team"))+"\n    ")]):t._e()]):t._e(),s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("people.persons",t.entries.length))+"\n  ")])])}),Pa=[],Ea=s("7365");function ja(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function xa(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ja(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ja(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Da={name:"production-team-list",components:{PeopleNameCell:Ea["a"]},props:["entries"],computed:xa({},Object(d["c"])(["isCurrentUserAdmin"]),{isEmpty:function(){return!this.entries||0===this.entries.length}}),methods:xa({},Object(d["b"])(["removePersonFromTeam"]),{removePerson:function(t){this.removePersonFromTeam(t)},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},Aa=Da,Ma=(s("dea4"),Object(m["a"])(Aa,Ca,Pa,!1,null,"f3c95f54",null)),La=Ma.exports;function Ia(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function $a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ia(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ia(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var qa={name:"people",components:{PeopleField:en,ProductionTeamList:La},data:function(){return{person:null,isTeamLoading:!1,isTeamLoadingError:!1}},computed:$a({},Object(d["c"])(["currentProduction","productionMap","openProductions","personMap","people"]),{teamPersons:function(){var t=this;return Object(Ms["e"])(this.currentProduction.team.map((function(e){return t.personMap[e]})))},unlistedPeople:function(){var t=this;return this.people.filter((function(e){return!t.currentProduction.team.includes(e.id)}))}}),methods:$a({},Object(d["b"])(["addPersonToTeam"]),{addPerson:function(){var t=this;this.addPersonToTeam(this.person),setTimeout((function(){t.$refs["people-field"].clear()}),1)},removePerson:function(t){this.removePersonFromTeam(t)}}),metaInfo:function(){return{title:"".concat(this.currentProduction.name," | ").concat(this.$t("people.team")," - Kitsu")}}},Na=qa,Ra=(s("e5b1"),Object(m["a"])(Na,wa,Ta,!1,null,"2ba0d78a",null)),Fa=Ra.exports,Va=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-type columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"task-type page"},[s("div",{staticClass:"task-type-header page-header"},[s("div",{staticClass:"flexcolumn-item flexrow"},[t.currentTaskType.for_shots?s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:t.shotsPath}},[s("chevron-left-icon")],1):s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:t.assetsPath}},[s("chevron-left-icon")],1),s("task-type-name",{staticClass:"flexrow-item",attrs:{"task-type":t.currentTaskType}}),s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow-item"},[s("button-simple",{attrs:{icon:"download",title:t.$t("main.csv.export_file")},on:{click:t.onExportClick}})],1)],1),s("div",{staticClass:"flexcolumn-item flexrow"},[s("div",{staticClass:"flexrow-item ml1"},[s("search-field",{ref:"task-search-field",attrs:{"can-save":!0,placeholder:"ex: retake chara"},on:{change:t.onSearchChange,save:t.saveSearchQuery}})],1),s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow-item sorting-combobox"},[s("combobox",{attrs:{label:t.$t("main.sorted_by"),options:t.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:t.currentSort,callback:function(e){t.currentSort=e},expression:"currentSort"}})],1)])]),s("div",{staticClass:"query-list"},[t.loading.entities?t._e():s("search-query-list",{attrs:{queries:t.searchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1),s("task-list",{ref:"task-list",attrs:{tasks:t.tasks,"is-assets":t.isAssets,"is-loading":t.loading.entities,"is-error":t.errors.entities},on:{"task-selected":t.onTaskSelected}})],1)]),1===t.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(t.selectedTasks)[0]}})],1):t._e()])},Ua=[],Ba=(s("55dd"),s("ceca")),za=s.n(Ba),Ha=s("ca76"),Ga=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",{ref:"thead"},[s("tr",[s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),t.isAssets?s("th",{ref:"th-type",staticClass:"asset-type"},[t._v("\n            "+t._s(t.$t("tasks.fields.asset_type"))+"\n          ")]):s("th",{ref:"th-type",staticClass:"sequence"},[t._v("\n            "+t._s(t.$t("tasks.fields.sequence"))+"\n          ")]),s("th",{ref:"th-name",staticClass:"name"},[t._v("\n            "+t._s(t.$t("tasks.fields.entity_name"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"status"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_status"))+"\n          ")]),s("th",{ref:"th-assignees",staticClass:"assignees"},[t._v("\n            "+t._s(t.$t("tasks.fields.assignees"))+"\n          ")]),t.isAssets?t._e():s("th",{ref:"th-frames",staticClass:"frames"},[t._v("\n            "+t._s(t.$t("tasks.fields.frames"))+"\n          ")]),s("th",{ref:"th-estimation",staticClass:"estimation"},[t._v("\n            "+t._s(t.$t("tasks.fields.estimation").substring(0,3))+".\n          ")]),s("th",{ref:"th-duration",staticClass:"duration"},[t._v("\n            "+t._s(t.$t("tasks.fields.duration").substring(0,3))+".\n          ")]),s("th",{ref:"th-retake-count",staticClass:"retake-count"},[t._v("\n            "+t._s(t.$t("tasks.fields.retake_count"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"real-start-date"},[t._v("\n            "+t._s(t.$t("tasks.fields.real_start_date"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"real-end-date"},[t._v("\n            "+t._s(t.$t("tasks.fields.real_end_date"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"last-comment-date"},[t._v("\n            "+t._s(t.$t("tasks.fields.last_comment_date"))+"\n          ")]),s("th",{ref:"",staticClass:"empty"},[t._v("\n             \n          ")])])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table unselectable"},[s("tbody",{ref:"body-tbody",staticClass:"tbody"},t._l(t.displayedTasks,(function(e,n){return s("tr",{key:e.id,ref:"task-"+e.id,refInFor:!0,class:{"task-line":!0,selected:t.selectionGrid[e.id]},on:{click:function(s){return t.selectTask(s,n,e)}}},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:t.getEntity(e.entity.id),width:50,height:33}})],1),t.isAssets?s("td",{staticClass:"asset-type"},[t._v("\n            "+t._s(t.getEntity(e.entity.id).asset_type_name)+"\n          ")]):s("td",{staticClass:"sequence"},[t._v("\n            "+t._s(t.getEntity(e.entity.id).sequence_name)+"\n          ")]),s("td",{staticClass:"name"},[t._v("\n            "+t._s(t.getEntity(e.entity.id).name)+"\n          ")]),s("validation-cell",{staticClass:"status unselectable",attrs:{"task-test":e,"is-border":!1,"is-assignees":!1,selectable:!1,"is-static":!0}}),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},t._l(e.assignees,(function(n){return s("people-avatar",{key:e.id+"-"+n,staticClass:"flexrow-item",attrs:{person:t.personMap[n],size:30,"font-size":17}})})),1)]),t.isAssets?t._e():s("td",{staticClass:"frames"},[t._v("\n            "+t._s(t.getEntity(e.entity.id).nb_frames)+"\n          ")]),s("td",{staticClass:"estimation"},[t._v("\n            "+t._s(t.formatEstimation(e.estimation))+"\n          ")]),s("td",{class:{duration:!0,error:t.isEstimationBurned(e)}},[t._v("\n            "+t._s(t.formatDuration(e.duration))+"\n          ")]),s("td",{staticClass:"retake-count"},t._l(e.retake_count,(function(e){return s("span",{key:e},[t._v("\n              •\n            ")])})),0),s("td",{staticClass:"real-start-date"},[t._v("\n            "+t._s(t.formatDate(e.real_start_date))+"\n          ")]),s("td",{staticClass:"real-end-date"},[t._v("\n            "+t._s(t.formatDate(e.real_end_date))+"\n          ")]),s("td",{staticClass:"last-comment-date"},[t._v("\n            "+t._s(t.formatDate(e.last_comment_date))+"\n          ")]),s("td")],1)})),0)])]),t.isLoading?t._e():s("p",{staticClass:"has-text-centered nb-tasks"},[t._v("\n    "+t._s(t.tasks.length)+" "+t._s(t.$tc("tasks.number",t.tasks.length))+"\n    ("+t._s(t.formatDuration(t.timeSpent))+"\n     "+t._s(t.$tc("main.days_spent",Math.floor((t.timeSpent?t.timeSpent:0)/60)/8))),t.isAssets?t._e():s("span",[t._v(", "+t._s(t.nbFrames)+" "+t._s(t.$tc("main.nb_frames",t.nbFrames)))]),t._v(")\n  ")])],1)},Wa=[],Ka=s("3657");function Ya(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Qa(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ya(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ya(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ja={name:"task-list",mixins:[xt["a"]],components:{EntityThumbnail:_t["a"],PeopleAvatar:dt["a"],TableInfo:rt["a"],ValidationCell:Qt["a"]},data:function(){return{lastSelection:null,page:1,selectionGrid:{}}},props:{isAssets:{type:Boolean,default:!0},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},tasks:{type:Array,default:function(){return[]}},taskType:{type:Object,default:function(){}}},mounted:function(){window.addEventListener("keydown",this.onKeyDown,!1),this.$nextTick(this.resizeHeaders)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Qa({},Object(d["c"])(["assetMap","nbSelectedTasks","personMap","selectedTasks","shotMap"]),{timeSpent:function(){var t=0;return this.tasks.forEach((function(e){t+=e.duration})),t},nbFrames:function(){var t=this,e=0;return this.tasks.forEach((function(s){var n=t.shotMap[s.entity.id];n&&n.nb_frames&&(e+=n.nb_frames)})),e},displayedTasks:function(){return this.tasks&&this.tasks.length>0?this.tasks.slice(0,60*this.page):[]}}),methods:Qa({},Object(d["b"])(["addSelectedTask","addSelectedTasks","clearSelectedTasks","removeSelectedTask"]),{formatEstimation:function(t){return t?t<10?t:this.formatDuration(t):0},formatDate:function(t){return t?j()(t).format("YYYY-MM-DD"):""},isEstimationBurned:function(t){return t.estimation&&t.estimation>0&&t.duration>t.estimation},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.page++},getEntity:function(t){return this.isAssets?this.assetMap[t]:this.shotMap[t]},onKeyDown:function(t){if(this.tasks.length>0&&t.ctrlKey){var e=this.lastSelection?this.lastSelection:0;[37,38].includes(t.keyCode)?(e=e-1<0?e=this.tasks.length-1:e-1,this.selectTask({},e,this.tasks[e])):[39,40].includes(t.keyCode)&&(e=e+1>=this.tasks.length?e=0:e+1,this.selectTask({},e,this.tasks[e]))}},selectTask:function(t,e,s){var n=this,a=this.selectionGrid[s.id],o=Object.keys(this.selectionGrid).length>1;if(t.ctrlKey||t.shiftKey||(this.clearSelectedTasks({task:s}),this.resetSelection()),t.shiftKey){this.selectionGrid={};var r=[];r=this.lastSelection>e?Object(Ka["f"])(e,this.lastSelection):Object(Ka["f"])(this.lastSelection,e);var c=r.map((function(t){return{task:n.tasks[t]}}));c.forEach((function(t){i.a.set(n.selectionGrid,t.task.id,!0)})),this.addSelectedTasks(c)}else this.selectionGrid[s.id]?(this.removeSelectedTask({task:s}),i.a.set(this.selectionGrid,s.id,void 0)):a&&!o||(this.addSelectedTask({task:s}),this.$emit("task-selected",s),i.a.set(this.selectionGrid,s.id,!0),this.lastSelection=e);this.scrollToLine(s.id)},setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},scrollToLine:function(t){var e=this.$refs["task-"+t];if(e&&this.$refs.body){var s=30,n=e[0].getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),a=n.bottom>i.bottom-s,o=n.top<i.top+s;if(a){var r=n.bottom-i.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=i.top-n.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},resetSelection:function(){this.selectionGrid={},this.lastSelection=null},resizeHeaders:function(){var t=this;if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].children.length>0){var e=this.$refs["body-tbody"].children[0],s=[{index:1,name:"type"},{index:2,name:"name"},{index:4,name:"assignees"}];s.forEach((function(s){var n=Math.max(e.children[s.index].offsetWidth,100);t.$refs["th-"+s.name].style["min-width"]="".concat(n,"px")}))}},getTableData:function(){var t=this,e=[this.isAssets?this.$t("tasks.fields.asset_type"):this.$t("tasks.fields.sequence"),this.$t("tasks.fields.entity_name"),this.$t("tasks.fields.task_status"),this.$t("tasks.fields.assignees"),this.$t("tasks.fields.estimation"),this.$t("tasks.fields.duration"),this.$t("tasks.fields.retake_count"),this.$t("tasks.fields.real_start_date"),this.$t("tasks.fields.real_end_date"),this.$t("tasks.fields.last_comment_date")];this.isAssets||e.splice(4,0,"otot");var s=[e];return this.tasks.forEach((function(e){var n=e.assignees.map((function(e){var s=t.personMap[e];return s?s.name:""})).join(", "),i=[t.isAssets?t.getEntity(e.entity.id).asset_type_name:t.getEntity(e.entity.id).sequence_name,t.getEntity(e.entity.id).name,e.task_status_short_name,n,e.estimation,t.formatDuration(e.duration),e.retake_count,t.formatDate(e.real_start_date),t.formatDate(e.real_end_date),t.formatDate(e.last_comment_date)];if(!t.isAssets){var a=t.getEntity(e.entity.id).nb_frames;i.splice(4,0,a)}s.push(i)})),s}}),watch:{tasks:function(){this.page=1,this.resetSelection(),this.$nextTick(this.resizeHeaders)},nbSelectedTasks:function(){0===this.nbSelectedTasks&&this.resetSelection()}}},Xa=Ja,Za=(s("07a4"),Object(m["a"])(Xa,Ga,Wa,!1,null,"4550e911",null)),to=Za.exports;function eo(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function so(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?eo(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):eo(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var no={name:"task-type-page",components:{ButtonSimple:B["a"],ChevronLeftIcon:U["e"],Combobox:J["a"],SearchField:Ae["a"],SearchQueryList:Me["a"],TaskList:to,TaskInfo:Qe["a"],TaskTypeName:Cn["a"]},entityListCache:[],data:function(){return{currentSort:"entity_name",currentTask:null,isAssets:!0,tasks:[],selection:{},loading:{entities:!1},errors:{entities:!1}}},created:function(){if(this.currentProduction){var t={productionId:this.currentProduction.id};this.currentEpisode&&(t.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",t)}else this.setProduction(this.$route.params.production_id)},mounted:function(){var t=this;this.isAssets=this.$route.path.includes("assets"),setTimeout((function(){t.initData(!1)}),100)},beforeDestroy:function(){},computed:so({},Object(d["c"])(["assetMap","assetsPath","currentEpisode","currentProduction","currentTaskType","isTVShow","nbSelectedTasks","selectedTasks","sequenceSubscriptions","shotsByEpisode","shotMap","shotsPath","taskSearchQueries","taskMap"]),{assetTasks:function(){return this.getTasks(Object.values(this.assetMap))},shotTasks:function(){return this.getTasks(Object.values(this.shotMap))},title:function(){return this.currentProduction?this.isTVShow&&this.currentEpisode?"".concat(this.currentProduction.name," / ")+"".concat(this.currentEpisode.name," / ")+"".concat(this.currentTaskType.name):"".concat(this.currentProduction.name," / ").concat(this.currentTaskType.name):"Loading..."},sortOptions:function(){return["entity_name","task_status_short_name","priority","estimation","duration","retake_count","real_start_date","real_end_date","last_comment_date"].map((function(t){return{label:t,value:t}}))},searchQueries:function(){return this.isAssets?this.taskSearchQueries.filter((function(t){return"Asset"===t.entity_type})):this.taskSearchQueries}}),methods:so({},Object(d["b"])(["clearSelectedTasks","initTaskType","saveTaskSearch","removeTaskSearch","setProduction","subscribeToSequence","unsubscribeFromSequence"]),{initData:function(t){var e=this;this.loading.entities=!0,this.errors.entities=!1,this.initTaskType(t).then((function(){e.loading.entities=!1,e.resetTasks(),e.resetTaskIndex(),e.$refs["task-search-field"].focus()})).catch((function(t){console.error(t),e.loading.entities=!1,e.errors.entities=!0}))},changeSearch:function(t){this.$refs["task-search-field"].setValue(t.search_query),this.$refs["task-search-field"].$emit("change",t.search_query)},onSearchChange:function(t){if(t&&1!==t.length){t=t.toLowerCase().trim();var e=Object(Ha["d"])(t)||[],s=Object(Ha["b"])(t)||[];if(e.length>0||s.length>0){var n=[],i=Object(Ha["e"])(this.$options.taskIndex,t);n=e.length>0?Object(Ys["h"])(this.$options.taskIndex,e):this.tasks,n=Object(Ha["a"])(n,i,this.taskMap),this.tasks=this.sortTasks(n)}else this.resetTasks()}else this.resetTasks();this.clearSelectedTasks()},onTaskSelected:function(t){this.currentTask=t},resetTasks:function(){this.isAssets?this.tasks=this.assetTasks:this.tasks=this.shotTasks,this.tasks=this.sortTasks()},resetTaskIndex:function(){this.isAssets?this.$options.taskIndex=Object(Ys["f"])(this.assetTasks):this.$options.taskIndex=Object(Ys["f"])(this.shotTasks)},getTasks:function(t){var e=this,s=[];return t.forEach((function(t){t.tasks.forEach((function(t){var n=e.taskMap[t];n&&n.task_type_id===e.currentTaskType.id&&s.push(n)}))})),s},sortTasks:function(t){t||(t=this.tasks);var e=["task_status_short_name","entity_name"].includes(this.currentSort);return t.sort(za()(this.currentSort,e?1:-1).thenBy("entity_name"))},saveSearchQuery:function(t){var e=this.isAssets?"Asset":"Shot";this.saveTaskSearch({searchQuery:t,entityType:e}).then((function(){})).catch((function(t){t&&console.log("error")}))},removeSearchQuery:function(t){this.removeTaskSearch(t).then((function(){})).catch((function(t){t&&console.log("error")}))},onExportClick:function(){var t=this.$refs["task-list"].getTableData(),e=[li()().format("YYYY-MM-DD"),this.currentProduction.name,this.currentTaskType.name,"tasks"];this.currentEpisode&&e.splice(1,0,this.currentEpisode.name);var s=Object(fi["b"])(e.join("_"));pi["a"].buildCsvFile(s,t)}}),watch:{$route:function(){this.initData(!0)},currentProduction:function(){this.initData(!0)},currentSort:function(){this.sortTasks(),this.$refs["task-list"].resetSelection(),this.clearSelectedTasks()}},socket:{events:{"task:update":function(t){this.taskMap[t.task_id]&&setTimeout(this.resetTaskIndex,1e3)}}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},io=no,ao=(s("ffff1"),Object(m["a"])(io,Va,Ua,!1,null,"bfbee802",null)),oo=ao.exports,ro=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[t.isCurrentUserManager?s("div",{staticClass:"timesheets page"},[s("div",{staticClass:"page-header flexrow"},[s("page-title",{staticClass:"flexrow-item",attrs:{text:t.$t("timesheets.title")}}),s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("timesheets.detail_level"),options:t.detailOptions},model:{value:t.detailLevelString,callback:function(e){t.detailLevelString=e},expression:"detailLevelString"}}),s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("timesheets.year"),options:t.yearOptions},model:{value:t.yearString,callback:function(e){t.yearString=e},expression:"yearString"}}),"day"===t.detailLevelString?s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("timesheets.month"),options:t.monthOptions},model:{value:t.monthString,callback:function(e){t.monthString=e},expression:"monthString"}}):t._e(),s("div",{staticClass:"filler"}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:t.$t("timesheets.export_timesheet"),icon:"download"},on:{click:t.exportTimesheet}})],1),s("people-timesheet-list",{staticClass:"data-list",attrs:{people:t.filteredPeople,timesheet:t.timesheet,"detail-level":t.detailLevel,month:t.currentMonth,year:t.currentYear,"is-loading":t.isLoading,"is-error":t.isLoadingError}})],1):t._e()]),t.showInfo?s("div",{staticClass:"column side-column"},[s("people-timesheet-info",{attrs:{person:t.currentPerson,year:t.currentYear,month:t.currentMonth,week:t.currentWeek,day:t.currentDay,"is-loading":t.isInfoLoading,"is-loading-error":t.isInfoLoadingError,tasks:t.tasks},on:{close:t.hideSideInfo}})],1):t._e()])},co=[],uo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("people.list.name"))+"\n          ")]),t._l(t.monthRange,(function(e){return"month"===t.detailLevel?s("th",{key:"month-"+e,staticClass:"time month"},[t._v("\n            "+t._s(t.monthToString(e))+"\n          ")]):t._e()})),t._l(t.weekRange,(function(e){return"week"===t.detailLevel?s("th",{key:"week-"+e,staticClass:"daytime"},[t._v("\n            "+t._s(e)+"\n          ")]):t._e()})),t._l(t.dayRange,(function(e){return"day"===t.detailLevel?s("th",{key:"day-"+e,staticClass:"daytime"},[t._v("\n            "+t._s(e)+"\n          ")]):t._e()})),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.people,(function(e){return s("tr",{key:e.id},[s("people-name-cell",{staticClass:"name",attrs:{person:e}}),t._l(t.monthRange,(function(n){return"month"===t.detailLevel?s("td",{key:"month-"+n+"-"+e.id,class:{time:!0,month:!0,selected:t.isMonthSelected(e.id,t.year,n)}},[t.monthDuration(n,e.id)>0?s("router-link",{staticClass:"duration",attrs:{to:{name:"timesheets-month-person",params:{person_id:e.id,year:t.year,month:n}}}},[t._v("\n              "+t._s(t.monthDuration(n,e.id))+"\n            ")]):s("span",[t._v("\n            -\n            ")])],1):t._e()})),t._l(t.weekRange,(function(n){return"week"===t.detailLevel?s("td",{key:"week-"+n+"-"+e.id,class:{daytime:!0,selected:t.isWeekSelected(e.id,t.year,n)}},[t.weekDuration(n,e.id)>0?s("router-link",{class:{duration:!0,warning:t.weekDuration(n,e.id)>5*t.organisation.hours_by_day},attrs:{to:{name:"timesheets-week-person",params:{person_id:e.id,year:t.year,week:n}}}},[t._v("\n              "+t._s(t.weekDuration(n,e.id))+"\n            ")]):s("span",[t._v("\n            -\n            ")])],1):t._e()})),t._l(t.dayRange,(function(n){return"day"===t.detailLevel?s("td",{key:"day-"+n+"-"+e.id,staticClass:"daytime",class:{daytime:!0,weekend:t.isWeekend(t.year,t.month,n),selected:t.isDaySelected(e.id,t.year,t.month,n)}},[t.dayDuration(n,e.id)>0?s("router-link",{staticClass:"duration",attrs:{to:{name:"timesheets-day-person",params:{person_id:e.id,year:t.year,month:t.month,day:n}}}},[t._v("\n              "+t._s(t.dayDuration(n,e.id))+"\n            ")]):s("span",[t._v("\n            -\n            ")])],1):t._e()})),s("td",{staticClass:"actions"})],2)})),0)])]),t.isLoading?t._e():s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.people.length)+" "+t._s(t.$tc("people.persons",t.people.length))+"\n  ")])],1)},lo=[];function po(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function fo(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?po(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):po(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var ho={name:"people-timesheet-list",components:{PeopleNameCell:Ea["a"],TableInfo:rt["a"]},data:function(){return{detailOptions:[{label:"Day",value:"day"},{label:"Month",value:"month"}],currentMonth:j()().month()+1,currentYear:j()().year(),currentWeek:j()().week()}},props:{timesheet:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}},detailLevel:{type:String,default:"day"},year:{type:Number,default:0},month:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:fo({},Object(d["c"])(["isCurrentUserManager","organisation","route"]),{monthRange:function(){return Object(Ka["c"])(this.year,this.currentYear,this.currentMonth)},dayRange:function(){return Object(Ka["b"])(this.year,this.month,this.currentYear,this.currentMonth)},weekRange:function(){return Object(Ka["d"])(this.year,this.currentYear,this.currentWeek)}}),methods:fo({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},monthToString:Ka["e"],monthDuration:function(t,e){var s="".concat(t);return this.getDuration(s,e)},weekDuration:function(t,e){return this.getDuration(t,e)},dayDuration:function(t,e){return this.getDuration(t,e)},getDuration:function(t,e){return this.timesheet&&this.timesheet[t]&&this.timesheet[t][e]?this.timesheet[t][e]/60:"-"},isWeekend:function(t,e,s){var n=j()("".concat(t,"-").concat(e,"-").concat(s));return s<10&&(n=j()("".concat(t,"-").concat(e,"-0").concat(s))),[0,6].includes(n.day())},isDaySelected:function(t,e,s,n){return this.$route.params.person_id&&this.$route.params.person_id===t&&this.$route.params.year===e&&this.$route.params.month===s&&this.$route.params.day===n},isWeekSelected:function(t,e,s){return this.$route.params.person_id&&this.$route.params.person_id===t&&this.$route.params.year===e&&this.$route.params.week===s},isMonthSelected:function(t,e,s){return this.$route.params.person_id&&this.$route.params.person_id===t&&this.$route.params.year===e&&this.$route.params.month===s}}),watch:{detailLevel:function(){this.$refs.headerWrapper.style.left=0},route:function(){var t=document.getElementsByClassName("selected");0===t.length&&(this.$refs.body.scrollLeft+=350)}}},mo=ho,_o=(s("2bdb"),Object(m["a"])(mo,uo,lo,!1,null,"a6b9b238",null)),vo=_o.exports,bo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"people-timesheet-info"},[s("div",{staticClass:"close"},[s("router-link",{staticClass:"close-button",attrs:{to:t.closeRoute}},[s("x-icon")],1)],1),s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.person,"no-cache":!0}}),s("page-title",{staticClass:"flexrow-item",attrs:{text:t.person.full_name}})],1),t.isMonthInfo?s("div",{staticClass:"info-date"},[t._v("\n    "+t._s(t.monthString)+" "+t._s(t.year)+"\n  ")]):t.isWeekInfo?s("div",{staticClass:"info-date"},[t._v("\n    week "+t._s(t.week)+", "+t._s(t.startDay)+" - "+t._s(t.endDay)+" "+t._s(t.weekMonth)+" "+t._s(t.year)+"\n  ")]):t.isDayInfo?s("div",{staticClass:"info-date"},[t._v("\n    "+t._s(t.day)+" "+t._s(t.monthString)+" "+t._s(t.year)+"\n  ")]):t._e(),s("time-spent-task-list",{staticClass:"time-spent-list",attrs:{tasks:t.tasks,"is-loading":t.isLoading,"is-error":t.isLoadingError}})],1)},yo=[],go=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isLoadingError}}),s("div",{staticClass:"aggregated-time-spents"},t._l(Object.keys(t.projects),(function(e){return s("div",{key:e,staticClass:"by-project"},[t.projectNames[e]?s("production-name",{attrs:{project:{id:e,name:t.projectNames[e]}}}):t._e(),t._l(Object.keys(t.projects[e]),(function(n){return s("div",{key:n,staticClass:"by-task-type-id"},[s("task-type-name",{attrs:{"task-type":t.taskTypeMap[n]}}),s("div",{staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.projects[e][n],(function(e){return s("tr",{key:e.id,staticClass:"by-task-type-id"},[s("td",{staticClass:"name"},[t._v(t._s(e.name))]),s("td",{staticClass:"duration"},[t._v(t._s(e.duration/60))])])})),0)])])],1)}))],2)})),0)],1)},ko=[],Oo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"production-name"},[s("router-link",{staticClass:"flexrow",attrs:{title:t.productionInfo,to:t.productionRoute}},[t.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:t.getAvatarColor(t.project),width:t.size+"px",height:t.size+"px","font-size":t.size-15+"px","line-height":t.size+"px"}},[t.project.has_avatar?s("span",[s("img",{attrs:{src:t.getThumbnailPath(t.project)}})]):s("span",[t._v("\n        "+t._s(t.generateAvatar(t.project))+"\n      ")])]):t._e(),t.onlyAvatar?t._e():s("span",{staticClass:"flexrow-item"},[t._v("\n      "+t._s(t.project.name)+"\n    ")])])],1)},So=[];function wo(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function To(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?wo(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):wo(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Co={name:"production-name",props:{project:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String}},computed:To({},Object(d["c"])([]),{productionRoute:function(){var t={name:this.lastProductionScreen,params:{production_id:this.project.id}};return this.project.first_episode_id&&(t.name="episode-".concat(this.lastProductionScreen),t.params.episode_id=this.project.first_episode_id),t},productionInfo:function(){var t=this.project.fps,e=this.project.ratio,s=this.project.resolution;return t||e||s?"fps: ".concat(t,"\nratio: ").concat(e,"\nresolution: ").concat(s):""}}),methods:To({},Object(d["b"])([]),{generateAvatar:function(t){var e=t.name.length>0?t.name[0]:"P";return e.toUpperCase()},getAvatarColor:function(t){return In["a"].fromString(t.name)},getThumbnailPath:function(t){return"/api/pictures/thumbnails/projects/".concat(t.id,".png")}})},Po=Co,Eo=(s("4706"),Object(m["a"])(Po,Oo,So,!1,null,"0820b058",null)),jo=Eo.exports;function xo(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Do(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?xo(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):xo(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var Ao={name:"todos-list",components:{TableInfo:rt["a"],ProductionName:jo,TaskTypeName:Cn["a"]},data:function(){return{projectNames:{}}},props:{tasks:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isLoadingError:{type:Boolean,default:!1}},computed:Do({},Object(d["c"])(["currentProduction","lastProductionScreen","taskTypeMap"]),{projects:function(){var t={};return this.tasks.forEach((function(e){t[e.project_id]||(t[e.project_id]={}),t[e.project_id][e.task_type_id]||(t[e.project_id][e.task_type_id]=[]);var s=e.entity_name;["Shot","Sequence"].includes(e.entity_type_name)?(s="".concat(e.sequence_name," / ").concat(s),e.episode_name&&(s="".concat(e.episode_name," / ").concat(s))):s="".concat(e.entity_type_name," / ").concat(s),t[e.project_id][e.task_type_id].push({id:e.id,name:s,duration:e.duration})})),Object.keys(t).forEach((function(e){Object.keys(t[e]).forEach((function(s){t[e][s]=Object(Ms["c"])(t[e][s])}))})),t}}),methods:Do({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}}),watch:{tasks:function(){this.projectNames=this.tasks.reduce((function(t,e){return t[e.project_id]=e.project_name,t}),{})}}},Mo=Ao,Lo=(s("f8b1"),Object(m["a"])(Mo,go,ko,!1,null,"31ebad26",null)),Io=Lo.exports;function $o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function qo(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?$o(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):$o(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var No={name:"people-timesheet-info",components:{XIcon:U["I"],PageTitle:vt["a"],PeopleAvatar:dt["a"],TimeSpentTaskList:Io},props:{person:{type:Object,default:function(){}},year:{type:Number,default:0},month:{type:Number,default:0},week:{type:Number,default:0},day:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isLoadingError:{type:Boolean,default:!1},tasks:{type:Array,default:function(){return[]}}},computed:qo({},Object(d["c"])([]),{startDay:function(){return j()().day("Monday").year(this.year).week(this.week).date()},endDay:function(){return j()().day("Monday").year(this.year).week(this.week).add("days",6).date()},weekMonth:function(){return j()().day("Monday").year(this.year).week(this.week).format("MMM")},monthString:function(){return Object(Ka["e"])(this.month)},isMonthInfo:function(){return this.$route.path.indexOf("month")>0},isWeekInfo:function(){return this.$route.path.indexOf("week")>0},isDayInfo:function(){return this.$route.path.indexOf("day")>0},closeRoute:function(){return this.isMonthInfo?{name:"timesheets-month",params:{year:this.year}}:this.isWeekInfo?{name:"timesheets-week",params:{year:this.year}}:this.isDayInfo?{name:"timesheets-day",params:{year:this.year,month:this.month}}:{name:"timesheets"}}}),methods:qo({},Object(d["b"])([]),{onCloseClicked:function(){this.$emit("close")}})},Ro=No,Fo=(s("0fef"),Object(m["a"])(Ro,bo,yo,!1,null,"7275f22e",null)),Vo=Fo.exports;function Uo(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Bo(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Uo(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Uo(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var zo={name:"people",components:{ButtonSimple:B["a"],Combobox:J["a"],PageTitle:vt["a"],PeopleTimesheetList:vo,PeopleTimesheetInfo:Vo},data:function(){return{detailOptions:[{label:"Day",value:"day"},{label:"Week",value:"week"},{label:"Month",value:"month"}],detailLevelString:"day",detailLevel:"day",yearString:"".concat(j()().year()),monthString:"".concat(j()().month()+1),currentYear:j()().year(),currentMonth:j()().month()+1,currentWeek:j()().week(),currentDay:j()().date(),currentPerson:this.getCurrentPerson(),isLoading:!1,isLoadingError:!1,showInfo:!0,isInfoLoading:!1,isInfoLoadingError:!1,tasks:[]}},created:function(){var t=this;this.isLoading=!0,0===this.people.length?this.loadPeople((function(){t.loadRoute()})):this.loadRoute()},computed:Bo({},Object(d["c"])(["isCurrentUserManager","people","personMap","timesheet"]),{filteredPeople:function(){var t=this;return this.people.filter((function(e){var s=Object.keys(t.timesheet),n=!1,i=0;do{t.timesheet[s[i]]&&(n=void 0!==t.timesheet[s[i]][e.id]),i++}while(!n&&i<s.length);return e.active&&n}))},yearOptions:function(){var t=2018,e=j()().year();return Object(Ka["f"])(t,e).map((function(t){return{label:t,value:"".concat(t)}}))},monthOptions:function(){var t="".concat(j()().year()),e=1,s=j()().month()+1,n=Object(Ka["f"])(e,12);return t===this.yearString&&(n=Object(Ka["f"])(e,s)),n.map((function(t){return{label:Object(Ka["e"])(t),value:"".concat(t)}}))}}),methods:Bo({},Object(d["b"])(["loadPeople","loadAggregatedPersonTimeSpents","loadTimesheets"]),{reloadTimesheet:function(){var t=this;this.isLoading=!0,this.loadTimesheets({detailLevel:this.detailLevel,year:this.currentYear,month:this.currentMonth}).then((function(e){t.isLoading=!1})).catch((function(){t.isLoading=!1,t.isLoadingError=!0}))},showSideInfo:function(){this.showInfo=!0},hideSideInfo:function(){this.showInfo=!1},loadRoute:function(){var t=this.$route.params,e=t.month,s=t.year,n=t.week,i=t.day,a="".concat(this.detailLevel),o="".concat(this.currentMonth),r="".concat(this.currentYear);this.$route.path.indexOf("week")>0&&(this.detailLevel="week"),this.$route.path.indexOf("month")>0&&(this.detailLevel="month"),this.$route.path.indexOf("day")>0&&(this.detailLevel="day"),this.currentPerson=this.getCurrentPerson(),this.detailLevelString=this.detailLevel,e&&(this.currentMonth=Number(e),this.monthString="".concat(e)),s&&(this.currentYear=Number(s),this.yearString="".concat(s)),n&&(this.currentWeek=Number(n),this.weekString="".concat(n)),i&&(this.currentDay=Number(i));var c=a!==this.detailLevel,d=0!==o.localeCompare("".concat(this.currentMonth)),u=0!==r.localeCompare("".concat(this.currentYear));this.$route.path.indexOf("person")>0?(this.showSideInfo(),this.loadAggregate(),this.isLoading&&this.reloadTimesheet()):(this.hideSideInfo(),(this.isLoading||d||u||c)&&this.reloadTimesheet())},loadAggregate:function(){var t=this;this.isInfoLoading=!0,this.isInfoLoadingError=!1,this.tasks=[],this.loadAggregatedPersonTimeSpents({personId:this.$route.params.person_id,detailLevel:this.detailLevel,year:this.$route.params.year,month:this.$route.params.month,week:this.$route.params.week,day:this.$route.params.day}).then((function(e){t.isInfoLoading=!1,t.tasks=e.filter((function(t){return t.duration>0}))})).catch((function(e){console.error(e),t.isInfoLoadingError=!0}))},getCurrentPerson:function(){var t=this.$route.params.person_id;return t&&this.personMap?this.personMap[t]:{}},exportTimesheet:function(){var t=["timesheet",this.detailLevel,this.currentYear];"day"===this.detailLevel&&t.push(this.currentMonth);var e=Object(fi["b"])(t.join("_"));pi["a"].generateTimesheet(e,this.timesheet,this.filteredPeople,this.detailLevel,this.currentYear,this.currentMonth,j()().month()+1,j()().year(),j()().week())}}),watch:{detailLevelString:function(){this.detailLevel!==this.detailLevelString&&("month"===this.detailLevelString?this.$router.push({name:"timesheets-month",params:{year:this.currentYear}}):"week"===this.detailLevelString?this.$router.push({name:"timesheets-week",params:{year:this.currentYear}}):"day"===this.detailLevelString&&this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:this.currentMonth}}))},yearString:function(){var t=Number(this.yearString),e=j()().month();this.currentYear!==t&&("month"===this.detailLevel?this.$router.push({name:"timesheets-month",params:{year:t}}):"week"===this.detailLevel?this.$router.push({name:"timesheets-week",params:{year:t}}):this.$router.push({name:"timesheets-day",params:{year:t,month:Math.min(Number(this.monthString),e)}}))},monthString:function(){this.currentMonth!==Number(this.monthString)&&this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:Number(this.monthString)}})},$route:function(){this.loadRoute()}},metaInfo:function(){return{title:"".concat(this.$t("timesheets.title")," - Kitsu")}}},Ho=zo,Go=(s("104d"),Object(m["a"])(Ho,ro,co,!1,null,"04694d4c",null)),Wo=Go.exports,Ko=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"todos page"},[s("div",{staticClass:"task-tabs tabs"},[s("ul",[s("li",{class:{"is-active":t.isTabActive("todos")}},[s("router-link",{attrs:{to:{name:"todos"}}},[t._v("\n              "+t._s(t.$t("tasks.current"))+"\n            ")])],1),s("li",{class:{"is-active":t.isTabActive("done")},on:{click:function(e){return t.selectTab("done")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"done"}}}},[t._v("\n              "+t._s(t.$t("tasks.done"))+" ("+t._s(t.displayedDoneTasks.length)+")\n            ")])],1),s("li",{class:{"is-active":t.isTabActive("timesheets")},on:{click:function(e){return t.selectTab("timesheets")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"timesheets"}}}},[t._v("\n              "+t._s(t.$t("timesheets.title"))+"\n            ")])],1)])]),s("div",{staticClass:"flexrow"},[t.isTabActive("done")?t._e():s("search-field",{ref:"todos-search-field",class:{"search-field":!0,"flexrow-item":!0},attrs:{"can-save":!0},on:{change:t.onSearchChange,save:t.saveSearchQuery}}),s("span",{staticClass:"flexrow-item push-right"}),s("span",{staticClass:"flexrow-item"}),s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("main.sorted_by"),options:t.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:t.currentSort,callback:function(e){t.currentSort=e},expression:"currentSort"}})],1),t.isTabActive("todos")||t.isTabActive("timesheets")?s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:t.todoSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1):t._e(),t.isTabActive("todos")?s("todos-list",{ref:"todo-list",attrs:{tasks:t.sortedTasks,"is-loading":t.isTodosLoading,"is-error":t.isTodosLoadingError,"selection-grid":t.todoSelectionGrid},on:{scroll:t.setTodoListScrollPosition}}):t._e(),t.isTabActive("done")?s("div",[t._v("\n         \n      ")]):t._e(),t.isTabActive("done")?s("todos-list",{ref:"done-list",attrs:{tasks:t.displayedDoneTasks,"is-loading":t.isTodosLoading,"is-error":t.isTodosLoadingError,done:!0}}):t._e(),t.isTabActive("timesheets")?s("timesheet-list",{ref:"timesheet-list",attrs:{tasks:t.loggableTodos,"done-tasks":t.loggableDoneTasks,"is-loading":t.isTodosLoading,"is-error":t.isTodosLoadingError,"time-spent-map":t.timeSpentMap,"time-spent-total":t.timeSpentTotal,"hide-done":t.todosSearchText.length>0||0===t.loggableDoneTasks.length},on:{"date-changed":t.onDateChanged,"time-spent-change":t.onTimeSpentChange}}):t._e()],1)]),1===t.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(t.selectedTasks)[0]}})],1):t._e()])},Yo=[],Qo=s("b11e"),Jo=s("e739");function Xo(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function Zo(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Xo(s,!0).forEach((function(e){Object(c["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Xo(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var tr={name:"todos",components:{Combobox:J["a"],SearchField:Ae["a"],SearchQueryList:Me["a"],TaskInfo:Qe["a"],TimesheetList:Qo["a"],TodosList:Jo["a"]},data:function(){return{activeTab:"todos",currentSort:"priority",selectedDate:j()().format("YYYY-MM-DD"),sortOptions:["entity_name","priority","task_status_short_name","estimation","last_comment_date"].map((function(t){return{label:t,value:t}}))}},mounted:function(){var t=this;this.updateActiveTab(),this.todosSearchText.length>0&&this.$refs["todos-search-field"].setValue(this.todosSearchText),this.loadTodos({date:this.selectedDate,callback:function(){t.todoList&&t.$nextTick((function(){t.todoList.setScrollPosition(t.todoListScrollPosition)})),t.resizeHeaders()}})},afterDestroy:function(){this.$store.commit("USER_LOAD_TODOS_END",{tasks:[],userFilters:{},taskTypeMap:this.taskTypeMap})},computed:Zo({},Object(d["c"])(["displayedDoneTasks","displayedTodos","isTodosLoading","isTodosLoadingError","nbSelectedTasks","selectedTasks","taskTypeMap","todosSearchText","timeSpentMap","timeSpentTotal","todoListScrollPosition","todoSelectionGrid","todoSearchQueries","user"]),{loggableTodos:function(){var t=this;return this.displayedTodos.filter((function(e){return t.taskTypeMap[e.task_type_id].allow_timelog}))},loggableDoneTasks:function(){var t=this;return this.displayedDoneTasks.filter((function(e){return t.taskTypeMap[e.task_type_id].allow_timelog}))},todoList:function(){return this.$refs["todo-list"]},haveDoneList:function(){return this.$refs["done-list"]},sortedTasks:function(){var t="entity_name"===this.currentSort,e=Object(W["a"])(this.displayedTodos);return t?e.sort(za()("project_name").thenBy("task_type_name").thenBy("full_entity_name")):e.sort(za()(this.currentSort,-1).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name"))}}),methods:Zo({},Object(d["b"])(["loadTodos","loadOpenProductions","removeTodoSearch","saveTodoSearch","setTodoListScrollPosition","setTodosSearch","setTimeSpent"]),{isTabActive:function(t){return this.activeTab===t},resizeHeaders:function(){var t=this;this.$nextTick((function(){t.todoList&&t.todoList.resizeHeaders(),t.haveDoneList&&t.haveDoneList.resizeHeaders()}))},selectTab:function(t){var e=this;this.activeTab=t,this.resizeHeaders(),setTimeout((function(){e.$refs["todos-search-field"]&&e.$refs["todos-search-field"].focus()}),300)},updateActiveTab:function(){["done","timesheets"].includes(this.$route.params.tab)?this.activeTab=this.$route.params.tab:this.activeTab="todos"},onSearchChange:function(t){this.setTodosSearch(t)},changeSearch:function(t){this.$refs["todos-search-field"].setValue(t.search_query),this.$refs["todos-search-field"].$emit("change",t.search_query)},saveSearchQuery:function(t){this.saveTodoSearch(t).then((function(){})).catch((function(t){t&&console.log("error",t)}))},removeSearchQuery:function(t){this.removeTodoSearch(t).then((function(){})).catch((function(t){t&&console.log("error",t)}))},onDateChanged:function(t){this.selectedDate=j()(t).format("YYYY-MM-DD"),this.loadTodos({date:this.selectedDate,forced:!0})},onTimeSpentChange:function(t){t.personId=this.user.id,t.date=this.selectedDate,this.setTimeSpent(t)},onAssignation:function(t){var e=this;this.user.id===t.person_id&&this.loadOpenProductions((function(){e.loadTodos({forced:!0,date:e.selectedDate,callback:function(){e.todoList&&e.$nextTick((function(){e.todoList.setScrollPosition(e.todoListScrollPosition)})),e.resizeHeaders()}})}))}}),socket:{events:{"task:assign":function(t){this.onAssignation(t)},"task:unassign":function(t){this.onAssignation(t)}}},watch:{$route:function(){this.updateActiveTab()}},metaInfo:function(){return{title:"".concat(this.$t("tasks.my_tasks")," - Kitsu")}}},er=tr,sr=(s("b023"),Object(m["a"])(er,Ko,Yo,!1,null,"7c5dd5f7",null)),nr=sr.exports,ir=function(){return s.e("chunk-6f438935").then(s.bind(null,"319f"))},ar=function(){return s.e("chunk-47fa2c64").then(s.bind(null,"fd5f"))},or=function(){return s.e("chunk-7e6c82cc").then(s.bind(null,"38fe"))},rr=function(){return s.e("chunk-33836174").then(s.bind(null,"a591"))},cr=function(){return s.e("chunk-2d22d490").then(s.bind(null,"f79b"))},dr=function(){return s.e("chunk-3aa178f9").then(s.bind(null,"a01b"))},ur=function(){return s.e("chunk-2745e2f2").then(s.bind(null,"6893"))},lr=function(){return s.e("chunk-5c38ed31").then(s.bind(null,"d1e3"))},pr=function(){return s.e("chunk-accc4560").then(s.bind(null,"4e82"))},fr=function(){return s.e("chunk-300ec739").then(s.bind(null,"d46a"))},hr=function(){return s.e("chunk-84b2e9b8").then(s.bind(null,"9633"))},mr=function(){return s.e("chunk-d31673be").then(s.bind(null,"421c"))},_r=function(){return s.e("chunk-2d21082e").then(s.bind(null,"b7cf"))},vr=function(){return s.e("chunk-2d0dacb1").then(s.bind(null,"6cb0"))},br=function(){return s.e("chunk-2d0cfa35").then(s.bind(null,"6522"))},yr=function(){return s.e("chunk-21d64005").then(s.bind(null,"2e31"))},gr=function(){return s.e("chunk-32ed85ba").then(s.bind(null,"99a3"))},kr=function(){return s.e("chunk-0b09a0ec").then(s.bind(null,"9f1e"))},Or=function(){return s.e("chunk-0caa9092").then(s.bind(null,"56b8"))},Sr=function(){return s.e("chunk-2d0c7360").then(s.bind(null,"503b"))},wr=[{path:"",component:gn,beforeEnter:function(t,e,s){var n=C["a"].getParser(window.navigator.userAgent),i=n.satisfies({chrome:">20.1.1432",firefox:">31"});if(!i)return s({name:"wrong-browser"});P["a"].requireAuth(t,e,(function(t){t?s(t):(M.setTimezone(),A.setLocale(),0===x["a"].state.productions.openProductions.length?q((function(t){t?s({name:"server-down"}):N["a"].getters.isCurrentUserCGArtist(N["a"].state)?s({name:"todos"}):s({name:"open-productions"})})):N["a"].getters.isCurrentUserCGArtist(N["a"].state)?(x["a"].commit("DATA_LOADING_END"),s({name:"todos"})):(x["a"].commit("DATA_LOADING_END"),s({name:"open-productions"})))}))}},{path:"/",component:gn,beforeEnter:function(t,e,s){P["a"].requireAuth(t,e,(function(t){t?s(t):(M.setTimezone(),A.setLocale(),0===R["a"].state.taskTypes.length?q((function(){x["a"].commit("DATA_LOADING_END"),s()})):(x["a"].commit("DATA_LOADING_END"),s()))}))},children:[{path:"",name:"home"},{path:"asset-types",component:ir,children:[{path:"new",component:ir},{name:"edit-asset-type",path:"edit/:asset_type_id",component:ir},{name:"delete-asset-type",path:"delete/:asset_type_id",component:ir}]},{name:"custom-actions",path:"custom-actions",component:or,children:[{name:"custom-actions-new",path:"new",component:or},{name:"edit-custom-action",path:"edit/:custom_action_id",component:or},{name:"delete-custom-action",path:"delete/:custom_action_id",component:or}]},{name:"notifications",path:"notifications",component:An},{path:"open-productions",component:Un,name:"open-productions"},{path:"people",component:ur,name:"people",children:[{path:"new",component:ur,name:"new-people"},{path:"edit/:person_id",component:ur,name:"edit-person"},{name:"delete-person",path:"delete/:person_id",component:ur}]},{path:"people/:person_id",component:dr,name:"person",children:[{path:":tab",component:dr,name:"person-tab"}]},{path:"/timesheets",component:Wo,name:"timesheets",children:[{path:"month/:year",component:Wo,name:"timesheets-month"},{path:"month/:year/:month/persons/:person_id",component:Wo,name:"timesheets-month-person"},{path:"week/:year",component:Wo,name:"timesheets-week"},{path:"week/:year/:week/persons/:person_id",component:Wo,name:"timesheets-week-person"},{path:"day/:year/:month",component:Wo,name:"timesheets-day"},{path:"day/:year/:month/:day/persons/:person_id",component:Wo,name:"timesheets-day-person"}]},{path:"profile",component:mr,name:"profile",children:[{path:"change-avatar",component:mr,name:"change-avatar"}]},{path:"settings",component:yr,name:"settings"},{name:"task-types",path:"task-types",component:Or,children:[{path:"new",component:Or},{name:"edit-task-type",path:"edit/:task_type_id",component:Or},{name:"delete-task-type",path:"delete/:task_type_id",component:Or}]},{name:"task-status",path:"task-status",component:kr,children:[{name:"new-task-status",path:"new",component:kr},{name:"edit-task-status",path:"edit/:task_status_id",component:kr},{name:"delete-task-status",path:"delete/:task_status_id",component:kr}]},{path:"todos",component:nr,name:"todos",children:[{path:":tab",component:nr,name:"todos-tab"}]},{path:"productions",component:pr,name:"productions",children:[{path:"new",component:pr,name:"productions-new"},{path:"edit/:production_edit_id",component:pr,name:"edit-production"},{path:"delete/:production_delete_id",component:pr,name:"delete-production"}]},{path:"productions/:production_id/team",component:Fa,name:"team"},{path:"productions/:production_id/news-feed",component:ri,name:"news-feed"},{path:"productions/:production_id/schedule",component:hr,name:"schedule"},{path:"productions/:production_id/playlists",component:lr,name:"playlists",children:[{name:"playlist",path:":playlist_id",component:lr},{name:"delete-playlist",path:":playlist_id/delete",component:lr},{name:"edit-playlist",path:":playlist_id/edit",component:lr}]},{path:"productions/:production_id/breakdown",component:ar,name:"breakdown",children:[{path:"sequences/:sequence_id",component:ar,name:"breakdown-sequence"},{path:"asset-types/:asset_type_id",component:ar,name:"breakdown-asset-type"}]},{path:"productions/:production_id/assets",component:ss,name:"assets",children:[{path:"new",component:ss,name:"new-asset"},{path:"edit/:asset_id",component:ss,name:"edit-asset"},{path:"delete/:asset_id",component:ss,name:"delete-asset"},{path:"restore/:asset_id",component:ss,name:"restore-asset"},{path:"delete-all-tasks/:task_type_id",component:ss,name:"delete-all-asset-tasks"}]},{path:"productions/:production_id/assets/:asset_id",component:wt,name:"asset"},{path:"productions/:production_id/shots",component:Sa,name:"shots",children:[{path:"delete-all-tasks/:task_type_id",component:Sa,name:"delete-all-shot-tasks"},{path:"edit/:shot_id",component:Sa,name:"edit-shot"},{path:"delete/:shot_id",component:Sa,name:"delete-shot"},{path:"restore/:shot_id",component:Sa,name:"restore-shot"}]},{path:"productions/:production_id/shots/:shot_id",component:Zi,name:"shot"},{path:"productions/:production_id/sequences",component:qi,name:"sequences",children:[{path:"edit/:sequence_id",component:qi,name:"edit-sequence"},{path:"delete/:sequence_id",component:qi,name:"delete-sequence"}]},{path:"productions/:production_id/asset-types",component:fr,name:"production-asset-types"},{path:"productions/:production_id/:type/task-types/:task_type_id",component:oo,name:"task-type"},{name:"task",path:"productions/:production_id/:type/tasks/:task_id",component:gr,children:[{name:"task-delete",path:"delete",component:gr},{name:"task-change-preview",path:"comments/:comment_id/change-preview",component:gr},{name:"task-preview",path:"previews/:preview_id",component:gr},{name:"task-edit-comment",path:"comments/:comment_id/edit",component:gr},{name:"task-delete-comment",path:"comments/:comment_id/delete",component:gr}]},{path:"productions/:production_id/episodes",component:rr,name:"episodes",children:[{path:"edit/:episode_id",component:rr,name:"edit-episode"},{path:"delete/:episode_id",component:rr,name:"delete-episode"}]},{path:"productions/:production_id/episodes/:episode_id/schedule",component:hr,name:"episode-schedule"},{path:"productions/:production_id/episodes/:episode_id/playlists",component:lr,name:"episode-playlists",children:[{name:"episode-playlist",path:":playlist_id",component:lr},{name:"episode-delete-playlist",path:":playlist_id/delete",component:lr},{name:"episode-edit-playlist",path:":playlist_id/edit",component:lr}]},{path:"productions/:production_id/episodes/:episode_id/breakdown",component:ar,name:"episode-breakdown",children:[{path:"sequences/:sequence_id",component:ar,name:"episode-breakdown-sequence"},{path:"asset-types/:asset_type_id",component:ar,name:"episode-breakdown-asset-type"}]},{path:"productions/:production_id/episodes/:episode_id/assets",component:ss,name:"episode-assets",children:[{path:"new",component:ss,name:"episode-new-asset"},{path:"edit/:asset_id",component:ss,name:"episode-edit-asset"},{path:"delete/:asset_id",component:ss,name:"episode-delete-asset"},{path:"restore/:asset_id",component:ss,name:"episode-restore-asset"},{path:"delete-all-tasks/:task_type_id",component:ss,name:"episode-delete-all-asset-tasks"}]},{path:"productions/:production_id/episodes/:episode_id/assets/:asset_id",component:wt,name:"episode-asset"},{path:"productions/:production_id/episodes/:episode_id/shots",component:Sa,name:"episode-shots",children:[{path:"shots/manage",component:Sa,name:"episode-manage-shots"},{path:"delete-all-tasks/:task_type_id",component:Sa,name:"episode-delete-all-shot-tasks"},{path:"edit/:shot_id",component:Sa,name:"episode-edit-shot"},{path:"delete/:shot_id",component:Sa,name:"episode-delete-shot"},{path:"shots/restore/:shot_id",component:Sa,name:"episode-restore-shot"}]},{path:"productions/:production_id/episodes/:episode_id/shots/:shot_id",component:Zi,name:"episode-shot"},{path:"productions/:production_id/episodes/:episode_id/asset-types",component:fr,name:"episode-production-asset-types"},{path:"productions/:production_id/episodes/:episode_id/sequences",component:qi,name:"episode-sequences",children:[{path:"edit/:sequence_id",component:qi,name:"episode-edit-sequence"},{path:"delete/:sequence_id",component:qi,name:"episode-delete-sequence"}]},{path:"productions/:production_id/episodes/:episode_id/:type/task-types/:task_type_id",component:oo,name:"episode-task-type"},{path:"productions/:production_id/episodes/:episode_id/:type/tasks/:task_id",name:"episode-task",component:gr,children:[{name:"episode-task-delete",path:"delete",component:gr},{name:"episode-task-change-preview",path:"comments/:comment_id/change-preview",component:gr},{name:"episode-task-preview",path:"previews/:preview_id",component:gr},{name:"episode-task-edit-comment",path:"comments/:comment_id/edit",component:gr},{name:"episode-task-delete-comment",path:"comments/:comment_id/delete",component:gr}]}]},{path:"/login",component:us,name:"login"},{path:"/reset-password",component:_r,name:"reset-password"},{path:"/reset-change-password/:token",component:vr,name:"reset-change-password"},{path:"/server-down",component:br,name:"server-down"},{path:"/wrong-browser",component:Sr,name:"wrong-browser"},{path:"/*",component:cr,name:"not-found"}];i.a.use(T["a"]);var Tr=function(t,e,s){return s||{x:0,y:0}},Cr=new T["a"]({mode:"history",scrollBehavior:Tr,routes:wr}),Pr=s("d051"),Er=s.n(Pr),jr=s("30ef"),xr=s.n(jr),Dr=s("58ca"),Ar=s("d842"),Mr=s("00e7"),Lr=s.n(Mr),Ir=s("df76"),$r=s.n(Ir),qr=s("caf9"),Nr=s("b9dd"),Rr=s("802e"),Fr=s("6c34"),Vr=s.n(Fr),Ur=s("e37d");s("a507");i.a.config.productionTip=!1,i.a.use(Er.a),i.a.use(Dr["a"]),i.a.use(Ur["a"]),i.a.use(Ar["a"],{adapter:xr.a}),i.a.use(Lr.a),i.a.use(qr["a"]),i.a.use(Nr["a"]),i.a.use($r.a),i.a.use(Rr["default"]),i.a.use(Vr.a,"/events"),Object(a["sync"])(x["a"],Cr),i.a.directive("focus",{inserted:function(t){t.focus()}}),i.a.prototype.$locale={change:function(t){w.locale=t},current:function(){return w.locale}},new i.a({el:"#app",components:{App:v},template:"<App/>",i18n:w,router:Cr,store:x["a"]}),document.addEventListener("keyup",(function(t){27===t.keyCode&&x["a"].commit("CLEAR_SELECTED_TASKS")})),i.a.config.keyCodes.backspace=8},"56f3":function(t,e,s){},"586b":function(t,e,s){},"58f5":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("task-type-name",{attrs:{"task-type":t.entry,"production-id":t.productionId}})],1)},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("274f");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={name:"task-type-cell",components:{TaskTypeName:r["a"]},props:["entry","productionId"],computed:d({},Object(o["c"])([]),{color:function(){return"#000000"===this.entry.color.toUpperCase()?"$grey-strong":this.entry.color}}),methods:d({},Object(o["b"])([]))},l=u,p=(s("4267"),s("2877")),f=Object(p["a"])(l,n,i,!1,null,"6f7d3066",null);e["a"]=f.exports},"592c":function(t,e,s){"use strict";var n=s("7c00"),i=s.n(n);i.a},"5a3f":function(t,e,s){},"5aca":function(t,e,s){"use strict";var n=s("c54f"),i=s.n(n);i.a},"5b23":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.commentToEdit&&t.commentToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("comments.edit_title"))+"\n      ")]):t._e(),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("div",{staticClass:"field"},[s("at-ta",{attrs:{members:t.team,"name-key":"full_name",limit:"2"},scopedSlots:t._u([{key:"item",fn:function(e){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.item,size:20,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[t._v("\n                  "+t._s(e.item.full_name)+"\n                ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.text,expression:"form.text"},{name:"focus",rawName:"v-focus"}],ref:"textField",staticClass:"input",domProps:{value:t.form.text},on:{keyup:function(e){return e.ctrlKey?t.runConfirmation(e):null},input:function(e){e.target.composing||t.$set(t.form,"text",e.target.value)}}})])],1)]),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("button",{staticClass:"button is-link",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n        "+t._s(t.$t("assets.edit_fail"))+"\n      ")]):t._e()])])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("53ff"),r=s.n(o),c=s("eb8c");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var l={name:"edit-comment-modal",components:{AtTa:r.a,PeopleAvatar:c["a"]},props:["active","cancelRoute","isLoading","isError","commentToEdit","team"],watch:{commentToEdit:function(){this.commentToEdit&&this.commentToEdit.id?this.form.text=this.commentToEdit.text:this.form={text:""}},active:function(){var t=this;this.active&&setTimeout((function(){t.$refs.textField.focus()}),100)}},data:function(){return this.commentToEdit&&this.commentToEdit.id?{form:{text:this.commentToEdit.text}}:{form:{text:""}}},methods:{runConfirmation:function(t){13!==t.keyCode&&t.keyCode||this.$emit("confirm",u({id:this.commentToEdit.id},this.form))}}},p=l,f=(s("f52f"),s("2877")),h=Object(f["a"])(p,n,i,!1,null,"621d2267",null);e["a"]=h.exports},"5bf3":function(t,e,s){"use strict";var n=s("4cb5"),i=s.n(n);i.a},"5c0b":function(t,e,s){"use strict";var n=s("5e27"),i=s.n(n);i.a},"5c3d":function(t,e,s){t.exports=s.p+"img/spinner.c09255da.svg"},"5d53":function(t,e,s){"use strict";var n=s("bc45"),i=s.n(n);i.a},"5e27":function(t,e,s){},"5eef":function(t,e,s){},"5f48":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[t._v(t._s(t.text))]),t.isError?s("p",{staticClass:"is-danger"},[t._v(t._s(t.errorText))]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":t.isLoading},on:{click:function(e){return t.$emit("confirm")}}},[t._v("\n            "+t._s(t.$t("main.confirmation"))+"\n          ")]),t.cancelRoute?s("router-link",{staticClass:"button is-text",attrs:{to:t.cancelRoute}},[t._v("\n            "+t._s(t.$t("main.cancel"))+"\n          ")]):s("button",{staticClass:"button is-text",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n            "+t._s(t.$t("main.cancel"))+"\n          ")])],1)])])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"delete-modal",props:["text","active","cancelRoute","isLoading","isError","errorText"],computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]))},u=d,l=(s("826f"),s("2877")),p=Object(l["a"])(u,n,i,!1,null,"37caaffe",null);e["a"]=p.exports},"5f56":function(t,e,s){},6185:function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"c",(function(){return c}));s("8e6e"),s("ac6a"),s("456d");var n=s("bd86");function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(s,!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var o=function(t,e){for(var s={},n=0;n<t;n++){s[n]||(s[n]={});for(var i=0;i<e;i++)s[n][i]=!1}return s},r=function(t,e,s,n){for(var i=a({},t),o=e;o<s;o++){i[o]||(i[o]={});for(var r=0;r<n;r++)i[o][r]=!1}return i},c=function(t){for(var e=Object.keys(t).length,s=t[0]?Object.keys(t[0]).length:0,n=0;n<e;n++)for(var i=0;i<s;i++)t[n][i]&&(t[n][i]=!1);return t}},"620e":function(t,e,s){"use strict";var n=s("69ba"),i=s.n(n);i.a},6366:function(t,e,s){"use strict";var n=s("56f3"),i=s.n(n);i.a},"65e3":function(t,e,s){"use strict";var n=s("e990"),i=s.n(n);i.a},"66a5":function(t,e,s){t.exports=s.p+"img/empty_asset.bf75a153.png"},"66be":function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return o}));s("a481"),s("ac6a");var n=s("0e54"),i=s.n(n),a=function(t){var e="transparent";return t&&(e=t.task_type_color),{"border-left":"4px solid ".concat(e)}},o=function(t,e,s){var n=i()(t||"");return e&&e.forEach((function(t){var e=s[t];n=n.replace("@".concat(e.full_name),'<a class="mention" href="/people/'.concat(e.id,'">@').concat(e.full_name,"</a>"))})),n}},"66d4":function(t,e,s){"use strict";var n=s("4e8d"),i=s.n(n);i.a},"66e7":function(t,e,s){"use strict";s.d(e,"c",(function(){return n})),s.d(e,"f",(function(){return i})),s.d(e,"e",(function(){return a})),s.d(e,"d",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return c}));s("ac4d"),s("8a81"),s("ac6a"),s("7514");var n=function(t){"Shot"===t.entity_type_name?(t.episode_name?t.full_entity_name="".concat(t.episode_name," / ").concat(t.sequence_name," / ").concat(t.entity_name):t.full_entity_name="".concat(t.sequence_name," / ").concat(t.entity_name),t.entity_path={name:"shot",params:{production_id:t.project_id,shot_id:t.entity_id}}):(t.full_entity_name="".concat(t.entity_type_name," / ").concat(t.entity_name),t.entity_path={name:"asset",params:{production_id:t.project_id,asset_id:t.entity_id}})},i=function(t,e){var s=t.find((function(t){return t.id===e.id}));return s&&Object.assign(s,e),s},a=function(t,e){return t.filter((function(t){return t.id!==e.id}))},o=function(t,e){return t.filter((function(t){return t!==e}))},r=function(t){var e={};return t.forEach((function(t){t.validations?Object.assign(e,t.validations):t.tasks.forEach((function(t){e[t.task_type_id]=t.id}))})),e},c=function(t,e){var s=[],n=[],i=null,a=!0,o=!1,r=void 0;try{for(var c,d=t[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var u=c.value;i&&u[e]!==i[e]&&(s.push(n.slice(0)),n=[]),n.push(u),i=u}}catch(l){o=!0,r=l}finally{try{a||null==d.return||d.return()}finally{if(o)throw r}}return s.push(n),s}},6798:function(t,e,s){},"69ba":function(t,e,s){},"6a44":function(t,e,s){},"6ac8":function(t,e,s){},"6be5":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{ref:"wrapper",class:{"add-comment":!0,"word-break":!0,media:!0,"is-dragging":t.isDragging},on:{drop:t.onDrop,dragover:t.onDragover,dragleave:t.onDragleave}},[t.light?t._e():s("figure",{staticClass:"media-left"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("people-avatar",{staticClass:"level-item",attrs:{person:t.user}})],1)])]),s("div",{staticClass:"media-content"},[s("at-ta",{attrs:{members:t.team,"name-key":"full_name",limit:2},scopedSlots:t._u([{key:"item",fn:function(e){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.item,size:20,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[t._v("\n            "+t._s(e.item.full_name)+"\n          ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"},{name:"focus",rawName:"v-focus"}],ref:"commentTextarea",staticClass:"textarea flexrow-item",attrs:{placeholder:t.$t("comments.add_comment"),disabled:t.isLoading},domProps:{value:t.text},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.runAddComment(t.text,t.task_status_id):null},input:function(e){e.target.composing||(t.text=e.target.value)}}})]),s("div",{staticClass:"flexrow preview-section"},[s("button",{staticClass:"button flexrow-item",on:{click:function(e){return t.$emit("add-preview")}}},[t._v("\n        "+t._s(t.$t("comments.add_preview"))+"\n      ")]),s("span",{staticClass:"attachment-file flexrow-item"},[t.isFileAttached?t._e():s("em",[t._v("\n          "+t._s(t.$t("comments.no_file_attached"))+"\n        ")]),t.isFileAttached?s("em",[t._v("\n          "+t._s(t.attachedFileName)+"\n        ")]):t._e()])]),s("div",{staticClass:"flexrow mt1"},[s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow-item status-combo-wrapper"},[s("combobox-status",{staticClass:"status-selector",attrs:{"task-status-list":t.taskStatus},model:{value:t.task_status_id,callback:function(e){t.task_status_id=e},expression:"task_status_id"}})],1),s("div",{staticClass:"flexrow-item post-button-wrapper"},[s("button",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},style:{"background-color":t.taskStatusColor},on:{click:function(e){return t.runAddComment(t.text,t.task_status_id)}}},[t._v("\n        "+t._s(t.$t("comments.post_status"))+"\n      ")])])]),t.isError?s("div",{staticClass:"error pull-right"},[s("em",[t._v(t._s(t.$t("comments.error")))])]):t._e()],1)])},i=[],a=(s("7514"),s("ac6a"),s("53ff")),o=s.n(a),r=s("56a0"),c=s("eb8c"),d={name:"add-comment",components:{AtTa:o.a,ComboboxStatus:r["a"],PeopleAvatar:c["a"]},data:function(){return{isDragging:!1,text:"",task_status_id:this.task.task_status_id}},props:{addComment:{type:Function,default:null},isLoading:{type:Boolean,default:null},isError:{type:Boolean,default:null},light:{type:Boolean,default:!1},task:{type:Object,default:function(){return[]}},taskStatus:{type:Array,default:function(){return[]}},user:{type:Object,default:function(){}},attachedFileName:{type:String,default:""},team:{type:Array,default:function(){return[]}}},mounted:function(){var t=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach((function(e){t.$refs.wrapper.addEventListener(e,(function(t){t.preventDefault(),t.stopPropagation()}))}))},computed:{isFileAttached:function(){return void 0!==this.attachedFileName&&this.attachedFileName.length>0},taskStatusColor:function(){var t=this,e=this.taskStatus.find((function(e){return e.id===t.task_status_id}))||this.taskStatus[0];return"todo"===e.short_name?"#666":e.color}},methods:{runAddComment:function(t,e){this.$emit("add-comment",t,e),this.text=""},updateValue:function(t){this.task_status_id=this.$refs.statusSelect.value},focus:function(){this.$refs.commentTextarea.focus()},onDragover:function(){this.isDragging=!0},onDragleave:function(){this.isDragging=!1},onDrop:function(t){for(var e=0;e<t.dataTransfer.files.length;e++){var s=new FormData;s.append("file",t.dataTransfer.files[e]),this.$emit("file-drop",s)}this.isDragging=!1}},watch:{task:function(){this.task_status_id=this.task.task_status_id}}},u=d,l=(s("1dea"),s("2877")),p=Object(l["a"])(u,n,i,!1,null,"afc16aec",null);e["a"]=p.exports},"6c12":function(t,e,s){},"6e8e":function(t,e,s){},7038:function(t,e,s){"use strict";var n=s("6c12"),i=s.n(n);i.a},"711b":function(t,e,s){"use strict";var n=s("9647"),i=s.n(n);i.a},"712a":function(t,e,s){},7132:function(t,e,s){"use strict";var n=s("53e5"),i=s.n(n);i.a},7156:function(t,e,s){},"732b":function(t,e,s){t.exports=s.p+"img/empty_shot.8f70da90.png"},7365:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("div",{staticClass:"people-name"},[s("people-avatar",{staticClass:"avatar",attrs:{person:t.person}}),s("people-name",{staticClass:"people-name",attrs:{person:t.person}})],1)])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("eb8c"),c=s("0073");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var l={name:"people-name-cell",components:{PeopleName:c["a"],PeopleAvatar:r["a"]},props:{person:{type:Object,required:!0}},computed:u({},Object(o["c"])([])),methods:u({},Object(o["b"])([]))},p=l,f=(s("a109"),s("2877")),h=Object(f["a"])(p,n,i,!1,null,"4ddc0854",null);e["a"]=h.exports},"736c":function(t,e,s){"use strict";var n=s("5eef"),i=s.n(n);i.a},7434:function(t,e,s){},7686:function(t,e,s){},7930:function(t,e,s){"use strict";var n=s("4710"),i=s.n(n),a=s("6929"),o=s.n(a),r={},c={};e["a"]={fromString:function(t){var e=new i.a({lightness:.7,saturation:.8});return localStorage&&"true"===localStorage.getItem("dark-theme")&&(e=new i.a({lightness:.6,saturation:.8})),e.hex(t)},validationBackgroundColor:function(t){return t?"wtg"===t.task_status_short_name?"#f5f5f5":"ip"===t.task_status_short_name?"#3273dc":"pndng"===t.task_status_short_name?"#ab26ff":"fin"===t.task_status_short_name?"#22d160":"rtk"===t.task_status_short_name?"#ff3860":"cfrm"===t.task_status_short_name?"#f1c40f":"recd"===t.task_status_short_name?"#1abc9c":t.task_status_color:"#ffffff"},validationTextColor:function(t){return t&&"todo"!==t.task_status_short_name&&"wtg"!==t.task_status_short_name?"white":"#333"},hexToRGBa:function(t,e){var s=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return e?"rgba("+s+", "+n+", "+i+", "+e+")":"rgb("+s+", "+n+", "+i+")"},darkenColor:function(t){return r[t]||(r[t]=o()(t).darken(.3).saturate(.6)),r[t]},lightenColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return c[t+e]||(c[t+e]=o()(t).fade(e)),c[t+e]}}},"795b":function(t,e,s){},"7ab7":function(t,e,s){"use strict";var n=s("5f56"),i=s.n(n);i.a},"7bf8":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[t.label?s("label",{staticClass:"label"},[t._v(t._s(t.label))]):t._e(),s("p",{staticClass:"control flexrow"},[s("input",{ref:"input",class:"input flexrow-item"+t.inputClass,attrs:{placeholder:t.placeholder,type:t.type,disabled:t.disabled,min:"0"},domProps:{value:t.value},on:{input:function(e){return t.updateValue()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.emitEnter()}}}),t.buttonLabel?s("button",{staticClass:"button flexrow-item",on:{click:function(e){return t.emitEnter()}}},[t._v("\n      "+t._s(t.buttonLabel)+"\n    ")]):t._e()])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("c5f6"),s("2f62"));function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"text-field",props:{disabled:{default:!1,type:Boolean},label:{default:"",type:String},value:{default:"",type:[String,Number]},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String},buttonLabel:{default:"",type:String}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},focus:function(){this.$refs.input.focus()}})},u=d,l=(s("3014"),s("2877")),p=Object(l["a"])(u,n,i,!1,null,"a8a5162c",null);e["a"]=p.exports},"7c00":function(t,e,s){},"7c8c":function(t,e,s){"use strict";var n=s("b4ce"),i=s.n(n);i.a},"7d5f":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"video-player"},[s("div",{ref:"video-wrapper",staticClass:"video-wrapper"},[t.isLoading?s("div",{staticClass:"loading-background"},[s("spinner",{staticClass:"spinner"})],1):t._e(),s("div",{staticClass:"canvas-wrapper"},[t.readOnly?t._e():s("canvas",{ref:"annotation-canvas",staticClass:"canvas",attrs:{id:"annotation-canvas"}})]),s("video",{ref:"movie",staticClass:"annotation-movie",style:{display:t.isLoading?"none":"block"},attrs:{id:"annotation-movie",preload:"auto",src:t.moviePath,poster:t.posterPath}}),t.isComparing&&t.previewToCompareId?s("video",{ref:"comparison-movie",staticClass:"annotation-movie",attrs:{id:"comparison-movie",preload:"auto",src:t.comparisonMoviePath,poster:t.comparisonPosterPath}}):t._e()]),s("div",{ref:"button-bar",staticClass:"button-bar"},[s("div",{staticClass:"video-progress pull-bottom"},[s("progress",{ref:"progress",attrs:{value:"0",min:"0"},on:{click:t.onProgressClicked}},[s("span",{ref:"progress-bar",attrs:{id:"progress-bar"}})])]),t.readOnly?t._e():s("annotation-bar",{ref:"annotation-bar",attrs:{annotations:t.annotations,maxDurationRaw:t.videoDuration},on:{"select-annotation":t.loadAnnotation}}),s("div",{staticClass:"buttons flexrow pull-bottom"},[s("div",{staticClass:"left flexrow"},[s("button",{staticClass:"button flexrow-item",on:{click:t.onPlayPauseClicked}},[t.isPlaying?s("pause-icon",{staticClass:"icon"}):t._e(),t.isPlaying?t._e():s("play-icon",{staticClass:"icon"})],1),!t.light||t.readOnly?s("button",{class:{button:!0,"flexrow-item":!0,active:t.isRepeating},on:{click:t.onRepeatClicked}},[s("repeat-icon",{staticClass:"icon smaller"})],1):t._e(),s("span",{staticClass:"flexrow-item time-indicator"},[t._v("\n          "+t._s(t.currentTime)+"\n        ")]),!t.light||t.readOnly||t.isFullScreen()?s("span",{staticClass:"flexrow-item time-indicator"},[t._v("\n        /\n        ")]):t._e(),!t.light||t.readOnly||t.isFullScreen()?s("span",{staticClass:"flexrow-item time-indicator"},[t._v("\n         "+t._s(t.maxDuration)+"\n        ")]):t._e(),!t.readOnly&&t.taskTypeOptions.length>0&&(!t.light||t.isFullScreen())?s("button",{class:{button:!0,"flexrow-item":!0,active:t.isComparing,"comparison-button":!0},on:{click:t.onCompareClicked}},[s("copy-icon",{staticClass:"icon smaller"})],1):t._e(),t.readOnly||!t.isComparing||t.light&&!t.isFullScreen()?t._e():s("combobox",{staticClass:"comparison-combobox",attrs:{options:t.taskTypeOptions,"is-dark":!0},model:{value:t.taskTypeId,callback:function(e){t.taskTypeId=e},expression:"taskTypeId"}}),t.readOnly||!t.isComparing||t.light&&!t.isFullScreen()?t._e():s("combobox",{staticClass:"comparison-combobox",attrs:{options:t.previewFileOptions,"is-dark":!0},model:{value:t.previewToCompareId,callback:function(e){t.previewToCompareId=e},expression:"previewToCompareId"}})],1),s("div",{staticClass:"right flexrow"},[!t.readOnly&&t.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:t.onDeleteClicked}},[s("x-icon",{staticClass:"icon"})],1):t._e(),!t.readOnly&&t.isFullScreenEnabled?s("button",{class:{button:!0,"flexrow-item":!0,active:t.isDrawing},on:{click:t.onPencilAnnotateClicked}},[s("edit-2-icon",{staticClass:"icon"})],1):t._e(),t.readOnly?t._e():s("a",{staticClass:"button flexrow-item",attrs:{href:t.movieDlPath}},[s("download-icon",{staticClass:"icon"})],1),t.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:t.onFullscreenClicked}},[s("maximize-icon",{staticClass:"icon"})],1):t._e()])])],1)])},i=[],a=(s("8e6e"),s("20d6"),s("55dd"),s("7514"),s("6762"),s("2fdb"),s("7f7f"),s("bd86")),o=(s("ac6a"),s("456d"),s("2f62")),r=s("7a94"),c=s("0a35"),d=s("bcd2"),u=s("8707"),l=s("992f"),p=s("be83"),f=s("9fbc");function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var _={name:"video-player",mixins:[f["a"]],components:{AnnotationBar:u["a"],CopyIcon:c["g"],Combobox:l["a"],DownloadIcon:c["i"],Edit2Icon:c["j"],MaximizeIcon:c["r"],PauseIcon:c["u"],PlayIcon:c["v"],RepeatIcon:c["x"],Spinner:p["a"],XIcon:c["I"]},props:{preview:{type:Object,default:function(){}},entityPreviewFiles:{type:Object,default:function(){}},taskTypeMap:{type:Object,default:function(){}},light:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},data:function(){return{annotations:[],currentTime:"00:00.00",fabricCanvas:null,isComparing:!1,isDrawing:!1,isLoading:!1,isPlaying:!1,isRepeating:!1,maxDuration:"00:00.00",previewToCompareId:null,taskTypeId:this.entityPreviewFIles?Object.keys(this.entityPreviewFiles)[0]:null,videoDuration:0}},mounted:function(){var t=this;this.reloadAnnotations(),this.container.style.height=this.getDefaultHeight()+"px",this.isLoading=!0,this.setupFabricCanvas(),setTimeout((function(){t.video&&(t.video.addEventListener("loadedmetadata",(function(){t.configureVideo(),t.onWindowResize(),t.isLoading=!1,t.setDefaultComparisonTaskType()})),t.video.addEventListener("ended",(function(){t.isLoading=!1})),t.video.addEventListener("error",(function(){t.$refs.movie.style.height=t.getDefaultHeight()-90+"px",t.isLoading=!1})),window.addEventListener("keydown",t.onKeyDown,!1),window.addEventListener("resize",t.onWindowResize))}),0)},beforeDestroy:function(){this.clearCanvas(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},computed:m({},Object(o["c"])(["currentProduction"]),{canvas:function(){return this.$refs["annotation-canvas"]},container:function(){return this.$refs.container},fps:function(){return this.currentProduction.fps||24},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)},isVideo:function(){return this.$refs.movie&&this.videoDuration&&this.videoDuration>0},moviePath:function(){return"/api/movies/originals/preview-files/".concat(this.preview.id,".mp4")},movieDlPath:function(){return"/api/movies/originals/preview-files/".concat(this.preview.id,"/download")},posterPath:function(){return"/api/pictures/previews/preview-files/".concat(this.preview.id,".png")},comparisonMoviePath:function(){return"/api/movies/originals/preview-files/".concat(this.previewToCompareId,".mp4")},comparisonPosterPath:function(){return"/api/pictures/originals/preview-files/".concat(this.previewToCompareId,".png")},progress:function(){return this.$refs.progress},progressBar:function(){return this.$refs["progress-bar"]},video:function(){return this.$refs.movie},comparisonVideo:function(){return this.$refs["comparison-movie"]},videoWrapper:function(){return this.$refs["video-wrapper"]},taskTypeOptions:function(){var t=this,e=Object.keys(this.entityPreviewFiles);return e.filter((function(e){return t.entityPreviewFiles[e].length>1||1===t.entityPreviewFiles[e].length&&t.entityPreviewFiles[e][0].id!==t.preview.id})).map((function(e){var s=t.taskTypeMap[e];return s?{label:s.name,value:s.id}:{label:"",value:""}}))},previewFileOptions:function(){var t=this,e=this.entityPreviewFiles[this.taskTypeId];return e?(e=e.filter((function(e){return e.id!==t.preview.id})),e&&e.length>0?e.map((function(t){return{label:"v".concat(t.revision),value:t.id}})):[]):[]}}),methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},getDefaultHeight:function(){return this.isFullScreen()?screen.height:screen.width>1300&&(!this.light||this.readOnly)?500:200},getDimensions:function(){var t=this.video.videoHeight/this.video.videoWidth,e=this.container.offsetWidth-1,s=Math.floor(e*t);return s=Math.min(s,this.getDefaultHeight()-60),e=Math.floor(s/t),{width:e,height:s}},getTimelinePosition:function(t,e){if(this.$refs.movie){var s=Math.round(t/this.$refs.movie.duration*this.progress.offsetWidth);return s=s-10*e-5,s<0&&(s=0),s+10>this.progress.offsetWidth&&(s-=5),s}return 0},setCurrentTime:function(t){if(t=Object(d["a"])(t,this.fps),this.progress.value=t,this.progressBar.style.width=Math.floor(t/this.video.duration*100)+"%",this.clearCanvas(),this.video.currentTime=t,this.isComparing){var e=document.getElementById("comparison-movie");e&&(e.currentTime=t)}},configureVideo:function(){this.reloadAnnotations(),this.video.addEventListener("timeupdate",this.updateProgressBar),this.video.onended=this.onVideoEnd,0===this.video.currentTime&&(this.clearCanvas(),this.mountVideo())},mountVideo:function(){if(this.video.mute=!0,this.videoDuration=this.video.duration,this.progress.setAttribute("max",this.videoDuration),this.maxDuration=this.formatTime(this.videoDuration),this.isLoading=!1,this.isPlaying=!1,this.isRepeating=!1,this.container){var t=this.getDimensions(),e=t.width,s=t.height;if(s>0)if(this.isComparing){this.container.style.height=this.getDefaultHeight()+"px",this.video.style.width=e/2+"px",this.video.style.height=s/2+"px";var n=document.getElementById("comparison-movie");n&&(n.style.width=e/2+"px",n.style.height=s/2+"px"),this.videoWrapper.style.width=e+"px",this.videoWrapper.style.height=s+"px"}else this.container.style.height=this.getDefaultHeight()+"px",this.video.style.width=e+"px",this.video.style.height=s+"px",this.videoWrapper.style.width=e+"px",this.videoWrapper.style.height=s+"px";this.readOnly||this.resetCanvas()}},clearCanvas:function(){this.fabricCanvas&&this.fabricCanvas.clear()},setupFabricCanvas:function(){var t=this;if(!this.readOnly)return this.fabricCanvas=new r["fabric"].Canvas("annotation-canvas"),this.fabricCanvas.on("object:moved",this.saveAnnotations),this.fabricCanvas.on("object:scaled",this.saveAnnotations),this.fabricCanvas.on("mouse:up",(function(){t.isDrawing&&t.saveAnnotations()})),this.fabricCanvas.setDimensions({width:100,height:100}),this.fabricCanvas.freeDrawingBrush.color="#ff3860",this.fabricCanvas.freeDrawingBrush.width=4,this.fabricCanvas},play:function(){if(this.clearCanvas(),this.isPlaying=!0,this.readOnly||(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1),this.video.play(),this.isComparing){var t=document.getElementById("comparison-movie");t&&t.play()}},pause:function(){if(this.isPlaying=!1,this.video.pause(),this.isComparing){var t=document.getElementById("comparison-movie");t&&t.pause()}},goPreviousFrame:function(){var t=this.video.currentTime-1/this.fps;t<0?this.setCurrentTime(0):this.setCurrentTime(t);var e=this.getAnnotation(this.video.currentTime);e&&this.loadAnnotation(e)},goNextFrame:function(){var t=this.video.currentTime+1/this.fps;t>this.video.duration?this.setCurrentTime(this.video.duration):this.setCurrentTime(t);var e=this.getAnnotation(this.video.currentTime);e&&this.loadAnnotation(e)},formatTime:function(t){var e=".".concat(Math.round(t%1*100));2===e.length&&(e+="0");try{return new Date(1e3*t).toISOString().substr(14,5)+e}catch(s){return console.error(s),"00:00.00"}},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0)},onDeleteClicked:function(){this.deleteSelection()},onVideoEnd:function(){if(this.isPlaying=!1,this.isRepeating){if(this.video.currentTime=0,this.isComparing){var t=document.getElementById("comparison-movie");t&&(t.currentTime=0)}this.progress.value=0,this.play()}},onPlayPauseClicked:function(){this.video.paused||this.video.ended?this.play():this.pause()},onRepeatClicked:function(){this.isRepeating?this.isRepeating=!1:this.isRepeating=!0},onCompareClicked:function(){var t=this;this.isComparing?(this.isComparing=!1,this.mountVideo()):(this.isComparing=!0,this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=!1),this.isDrawing=!1,this.$nextTick((function(){t.mountVideo(),t.$nextTick((function(){var e=t.getAnnotation(t.video.currentTime);e&&t.loadAnnotation(e)}))})))},onProgressClicked:function(t){var e=this.progress.offsetLeft;0!==e||this.isFullScreen()||(e=this.progress.parentElement.offsetParent.offsetLeft-10);var s=(t.pageX-e)/this.progress.offsetWidth,n=s*this.video.duration;this.setCurrentTime(n)},updateProgressBar:function(){this.progress.getAttribute("max")||this.progress.setAttribute("max",this.video.duration),this.progress.value=1*this.video.currentTime;var t=Math.floor(this.video.currentTime/this.video.duration*100);this.progressBar.style.width=t+"%",this.currentTime=this.formatTime(this.video.currentTime)},onFullscreenClicked:function(){this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},onScaled:function(t){var e=t.target;e&&e.set({strokeWidth:8/(e.scaleX+e.scaleY)})},onPencilAnnotateClicked:function(){this.isDrawing?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.fabricCanvas.isDrawingMode=!0,this.isDrawing=!0)},onWindowResize:function(t){var e=this,s=(new Date).getTime();this.lastCall=this.lastCall||0,s-this.lastCall>600&&(this.lastCall=s,this.$nextTick((function(){e.mountVideo(),e.reloadAnnotations();var s=e.getAnnotation(e.video.currentTime);e.$nextTick((function(){s&&e.loadAnnotation(s)})),t&&"function"===typeof t&&t()})))},onKeyDown:function(t){["INPUT","TEXTAREA"].includes(t.target.tagName)||(46===t.keyCode&&this.fabricCanvas?this.deleteSelection():37===t.keyCode?this.goPreviousFrame():39===t.keyCode?this.goNextFrame():32===t.keyCode&&this.onPlayPauseClicked())},getAnnotation:function(t){return t=Object(d["a"])(t,this.fps),this.annotations.find((function(e){return e.time===t}))},saveAnnotations:function(){var t=Object(d["a"])(this.video.currentTime,this.fps)||0,e=this.getAnnotation(t),s=this.getNewAnnotations(t,e);this.$emit("annotationchanged",{preview:this.preview,annotations:s})},loadAnnotation:function(t){var e=this;if(t){var s=t.time||0;s=Object(d["a"])(s,this.fps),this.video.pause(),this.fabricCanvas||this.setupFabricCanvas(),this.resetCanvasSize(),this.video.currentTime=s,this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.clearCanvas();var n=1,i=1;t.width&&(n=this.fabricCanvas.width/t.width,i=this.fabricCanvas.width/t.width),t.height&&(i=this.fabricCanvas.height/t.height),t.drawing.objects.forEach((function(t){var s={left:t.left*n,top:t.top*i,fill:"transparent",stroke:"#ff3860",strokeWidth:4,radius:t.radius,width:t.width,height:t.height,scaleX:t.scaleX*n,scaleY:t.scaleY*i};if("path"===t.type){var a=1;t.canvasWidth&&(a=t.canvasWidth/e.fabricCanvas.width);var o=new r["fabric"].Path(t.path,m({},s,{strokeWidth:3*a,canvasWidth:t.canvasWidth}));o.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),e.fabricCanvas.add(o)}}))}else console.error("Annotations are malformed and cannot be loaded.")},reloadAnnotations:function(){if(!this.readOnly){if(this.annotations=[],this.preview.annotations){var t=[];this.preview.annotations.forEach((function(e){return t.push(m({},e))})),this.annotations=t.sort((function(t,e){return t.time<e.time}))||[]}else this.annotations=[];return this.annotations}},getAnnotationStyles:function(t,e){return{cursor:"pointer",position:"relative",display:"inline-block",left:this.getTimelinePosition(t.time,e)+"px"}},deleteSelection:function(){this.fabricCanvas.remove(this.fabricCanvas.getActiveObject()),this.saveAnnotations()},setDefaultComparisonTaskType:function(){var t=this;if(!this.readOnly){var e=Object.keys(this.entityPreviewFiles);if(e&&e.length>0){var s=this.taskTypeOptions.find((function(e){return t.entityPreviewFiles[e.value].findIndex((function(e){return e.id===t.preview.id}))>=0}));s?this.taskTypeId=s.value:this.taskTypeOptions.length>0&&(this.taskTypeId=this.taskTypeOptions[0].value),this.taskTypeId&&this.setDefaultComparisonPreview()}else this.previewToCompareId=null}},setDefaultComparisonPreview:function(){var t=this,e=this.entityPreviewFiles[this.taskTypeId];e?(e=e.filter((function(e){return e.id!==t.preview.id})),e.length>0?this.previewToCompareId=e[0].id:this.previewToCompareId=null):this.previewToCompareId=null},resetCanvas:function(){this.fabricCanvas||this.setupFabricCanvas(),this.resetCanvasSize(),this.fabricCanvas.renderAll(),this.clearCanvas();var t=this.getAnnotation(this.video.currentTime);t&&this.loadAnnotation(t)},resetCanvasSize:function(){var t=this.$refs["movie"].offsetWidth,e=this.$refs["movie"].offsetHeight;this.fabricCanvas.setDimensions({width:t,height:e})}},watch:{preview:function(){this.maxDuration="00:00.00",this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.reloadAnnotations(),this.isComparing&&(this.isComparing=!1,this.mountVideo()),this.setDefaultComparisonTaskType()},previewToCompareId:function(){if(this.isComparing){this.pause();var t=this.video.currentTime;this.$nextTick((function(){var e=document.getElementById("comparison-movie");e&&(e.currentTime=t)}))}},taskTypeId:function(){this.setDefaultComparisonPreview()},light:function(){this.onWindowResize()}}},v=_,b=(s("4af4"),s("2877")),y=Object(b["a"])(v,n,i,!1,null,"0975978a",null);e["a"]=y.exports},"7e03":function(t,e,s){},8019:function(t,e,s){"use strict";var n=s("abd7"),i=s.n(n);i.a},8078:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"model-viewer",class:{light:t.light&&!t.readOnly},attrs:{id:"model-viewer"}}),s("div",{staticClass:"viewer-actions flexrow"},[s("span",{staticClass:"filler"}),t.readOnly?t._e():s("a",{staticClass:"button flexrow-item",attrs:{href:t.previewDlPath}},[s("download-icon",{staticClass:"icon"})],1),s("button",{staticClass:"button flexrow-item",on:{click:t.goFullScreen}},[s("maximize-icon",{staticClass:"icon"})],1)])])},i=[],a=s("0a35"),o=s("9d51"),r={name:"model-viewer",components:{DownloadIcon:a["i"],MaximizeIcon:a["r"]},props:{previewUrl:{default:"",type:String},previewDlPath:{default:"",type:String},light:{default:!1,type:Boolean},readOnly:{default:!1,type:Boolean}},computed:{element:function(){return this.$refs["model-viewer"]}},methods:{goFullScreen:function(){Object(o["b"])(this.element)}},mounted:function(){var t=this;setTimeout((function(){t.scene=Object(o["d"])(t.element),Object(o["c"])(t.scene,t.previewUrl)}),100)},watch:{previewUrl:function(){Object(o["a"])(this.scene),Object(o["c"])(this.scene,this.previewUrl)},light:function(){var t=this;Object(o["a"])(this.scene),this.element.innerHTML="",setTimeout((function(){t.scene=Object(o["d"])(t.element),Object(o["c"])(t.scene,t.previewUrl)}),100)}}},c=r,d=(s("1295"),s("2877")),u=Object(d["a"])(c,n,i,!1,null,"66557bb0",null);e["a"]=u.exports},"821b":function(t,e,s){},"826f":function(t,e,s){"use strict";var n=s("4e2d"),i=s.n(n);i.a},8411:function(t,e,s){},8485:function(t,e,s){},8529:function(t,e,s){},8707:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"playlist-annotation",staticClass:"annotation-bar"},t._l(t.annotations,(function(e,n){return s("span",{key:"annotation-"+n,staticClass:"annotation-mark",style:{left:t.getAnnotationPosition(e)+"px"},on:{click:function(s){return t.$emit("select-annotation",e)}}})})),0)},i=[],a=(s("c5f6"),{name:"annotation-bar",props:{annotations:{default:function(){return[]},type:Array},maxDurationRaw:{default:0,type:Number},width:{default:0,type:Number}},methods:{getAnnotationPosition:function(t){var e=t.time/this.maxDurationRaw,s=this.width;if(0===s){var n=this.$parent.progress,i=n.getBoundingClientRect();s=i.width}return s*e-3}}}),o=a,r=(s("a574"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"7f4a1724",null);e["a"]=c.exports},8751:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"subtitle"},[t._v(t._s(t.text))])},i=[],a={name:"page-subtitle",props:{text:{default:"",type:String}}},o=a,r=(s("fb36"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"67ee08da",null);e["a"]=c.exports},"887c":function(t,e,s){"use strict";var n=s("2867"),i=s.n(n);i.a},8942:function(t,e,s){"use strict";var n=s("fef0"),i=s.n(n);i.a},"8ab4":function(t,e,s){"use strict";var n=s("2ca8"),i=s.n(n);i.a},"8b77":function(t,e,s){},"8bd9":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{class:{comment:!0,pinned:t.comment.pinned,highlighted:t.highlighted},style:{"border-left":"6px solid "+t.comment.task_status.color}},[n("div",{staticClass:"media"},[n("figure",{staticClass:"media-left"},[n("people-avatar",{staticClass:"level-item",attrs:{person:t.comment.person}})],1),n("div",{staticClass:"media-content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"comment-person flexrow"},[n("div",{staticClass:"flexrow-item"},[n("strong",{},[n("people-name",{attrs:{person:t.comment.person}})],1),n("span",{staticClass:"comment-date"},[t._v("\n            "+t._s(t.formatDate(t.comment.created_at))+"\n          ")]),!t.light&&t.comment.previews.length>0?n("router-link",{staticClass:"revision",attrs:{to:t.previewRoute}},[t._v("\n            "+t._s(t.$t("comments.revision"))+" "+t._s(t.comment.previews[0].revision)+"\n          ")]):t._e()],1),n("span",{staticClass:"filler"}),n("div",{staticClass:"flexrow-item menu-wrapper"},[n("chevron-down-icon",{staticClass:"menu-icon",on:{click:t.toggleCommentMenu}}),n("comment-menu",{ref:"menu",attrs:{"is-pinned":t.comment.pinned,"is-editable":t.editable},on:{"pin-clicked":function(e){return t.$emit("pin-comment",t.comment)},"edit-clicked":function(e){t.$emit("edit-comment",t.comment),t.toggleCommentMenu()},"delete-clicked":function(e){t.$emit("delete-comment",t.comment),t.toggleCommentMenu()}}})],1)]),n("div",[t.light&&t.comment.previews.length>0?n("router-link",{staticClass:"revision",attrs:{to:t.previewRoute}},[t._v("\n          "+t._s(t.$t("comments.revision"))+" "+t._s(t.comment.previews[0].revision)+"\n        ")]):t._e()],1),"Done"===t.comment.task_status.name?n("p",[n("span",{style:{color:t.comment.task_status.color}},[t._v("\n          "+t._s(t.$t("comments.validated"))+"\n        ")])]):t._e(),t.taskStatus.is_done&&t.isLast?n("p",[n("img",{attrs:{src:s("ce80")}})]):t._e(),t.comment.text?n("p",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.renderComment(t.comment.text,t.comment.mentions,t.personMap))}}):n("p",{staticClass:"comment-text empty word-break"},[t._v("\n        "+t._s(t.$t("comments.empty_text"))+"\n      ")]),t.checklist.length>0?n("div",t._l(t.checklist,(function(e,s){return n("div",{key:"comment-checklist-"+t.comment.id+"-"+s,class:{"checklist-entry":!0,flexrow:!0,checked:e.checked}},[n("span",{staticClass:"flexrow-item",on:{click:function(s){return t.toggleEntryChecked(e)}}},[e.checked?n("check-square-icon",{staticClass:"icon"}):n("square-icon",{staticClass:"icon"})],1),n("textarea-autosize",{ref:"checklist-entry-"+s,refInFor:!0,staticClass:"checklist-text flexrow-item",attrs:{type:"text",rows:"1",disabled:!t.isChangeChecklistAllowed},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addChecklistEntry(s,e))},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"backspace",void 0,e.key,void 0)?null:t.removeChecklistEntry(s)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.focusPrevious(s)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.focusNext(s)},function(e){return t.emitChangeEvent(e)}]},model:{value:e.text,callback:function(s){t.$set(e,"text",s)},expression:"entry.text"}})],1)})),0):t._e(),t.comment.pinned?n("p",{staticClass:"pinned-text"},[t._v("\n        "+t._s(t.$t("comments.pinned"))+"\n      ")]):t._e()])])]),t.isAddChecklistAllowed?n("div",{staticClass:"has-text-centered add-checklist",on:{click:function(e){return t.addChecklistEntry(-1)}}},[t._v("\n    "+t._s(t.$t("comments.add_checklist"))+"\n  ")]):t._e()])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),o=s("75fc"),r=s("2f62"),c=s("3657"),d=s("66be"),u=s("66e7"),l=s("0a35"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"main",staticClass:"comment-menu hidden"},[s("div",{on:{click:t.onPinClicked}},[t.isPinned?s("span",[t._v("\n      "+t._s(t.$t("comments.unpin"))+"\n    ")]):s("span",[t._v(t._s(t.$t("comments.pin")))])]),t.isEditable?s("div",{on:{click:function(e){return t.$emit("edit-clicked")}}},[t._v("\n    "+t._s(t.$t("main.edit"))+"\n  ")]):t._e(),t.isEditable?s("div",{staticClass:"error",on:{click:function(e){return t.$emit("delete-clicked")}}},[t._v("\n    "+t._s(t.$t("main.delete"))+"\n  ")]):t._e()])},f=[];function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var _={name:"comment-menu",props:{isPinned:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1},isEditable:{type:Boolean,default:!0}},data:function(){return{}},computed:m({},Object(r["c"])([])),methods:m({},Object(r["b"])([]),{toggle:function(){var t=this.$refs.main;"comment-menu"===t.className?t.className="comment-menu hidden":t.className="comment-menu"},onPinClicked:function(){this.$emit("pin-clicked"),this.toggle()}})},v=_,b=(s("49b6"),s("2877")),y=Object(b["a"])(v,p,f,!1,null,"762a3f7a",null),g=y.exports,k=s("eb8c"),O=s("0073");function S(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function w(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?S(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):S(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var T={name:"comment",components:{CheckSquareIcon:l["c"],ChevronDownIcon:l["d"],CommentMenu:g,PeopleAvatar:k["a"],PeopleName:O["a"],SquareIcon:l["D"]},data:function(){return{checklist:[]}},props:{comment:{type:Object,default:function(){}},highlighted:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},light:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},mounted:function(){this.comment.checklist&&(this.checklist=Object(o["a"])(this.comment.checklist))},computed:w({},Object(r["c"])(["currentProduction","user","personMap","taskMap","taskTypeMap","taskStatusMap"]),{previewRoute:function(){var t={name:"task",params:{task_id:this.comment.object_id,production_id:this.currentProduction.id}};this.comment.previews.length>0&&(t={name:"task-preview",params:{task_id:this.comment.object_id,preview_id:this.comment.previews[0].id,production_id:this.currentProduction.id}}),this.$route.params.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=this.$route.params.episode_id);var e=this.taskMap[this.comment.object_id],s=this.taskTypeMap[e.task_type_id];return t.params.type=s.for_shots?"shots":"assets",t},deleteCommentPath:function(){return this.getPath("task-delete-comment")},editCommentPath:function(){return this.getPath("task-edit-comment")},addPreviewPath:function(){return this.getPath("task-add-preview")},taskStatus:function(){var t=this.taskStatusMap[this.comment.task_status.id];return t||this.comment.task_status},isAddChecklistAllowed:function(){return this.taskStatus.is_retake&&0===this.checklist.length&&this.user.id===this.comment.person_id},isChangeChecklistAllowed:function(){return this.taskStatus.is_retake&&this.user.id===this.comment.person_id}}),methods:{formatDate:function(t){return Object(c["a"])(t)},getPath:function(t){var e={name:t,params:{task_id:this.comment.object_id,comment_id:this.comment.id}};return this.$route.params.episode_id&&(e.name="episode-".concat(e.name),e.params.episode_id=this.$route.params.episode_id),e},toggleCommentMenu:function(){this.$refs.menu.toggle()},addChecklistEntry:function(t,e){var s=this;e&&(this.checklist[t].text=this.checklist[t].text.trim()),-1!==t&&t!==this.checklist.length-1||this.checklist.push({text:"",checked:!1}),this.$nextTick((function(){s.focusNext(t)}))},removeChecklistEntry:function(t){var e=this.checklist[t];0===e.text.length&&(this.checklist=Object(u["d"])(this.checklist,e),this.focusPrevious(t))},toggleEntryChecked:function(t){t.checked=!t.checked,this.emitChangeEvent()},focusPrevious:function(t){if(this.checklist.length>0){0===t&&(t=this.checklist.length),t--;var e="checklist-entry-".concat(t);this.$refs[e][0].$el.focus()}},focusNext:function(t){if(this.checklist.length>0){t===this.checklist.length-1&&(t=-1),t++;var e="checklist-entry-".concat(t);this.$refs[e][0].$el.focus()}},emitChangeEvent:function(t){var e=(new Date).getTime();this.lastCall=this.lastCall||0,e-this.lastCall>1e3&&(this.lastCall=e,this.$emit("checklist-updated",this.comment,this.checklist.filter((function(t){return t.text&&t.text.length>0}))))},renderComment:d["b"]},watch:{checklist:function(){this.emitChangeEvent()}}},C=T,P=(s("efab"),Object(b["a"])(C,n,i,!1,null,"007a30e1",null));e["a"]=P.exports},"8c97":function(t,e,s){"use strict";s.d(e,"b",(function(){return n}));s("3b2b"),s("a481"),s("f576"),s("4917");e["a"]={generateNextName:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=t.match(/\d+$/);if(s){var n=s[0],i=t.substring(0,t.length-n.length),a=parseInt(n);return 1===a&&10===e?a=10:a+=e,i+String(a).padStart(n.length,"0")}return""},shortenText:function(t,e){var s=t||"";return void 0!==t&&t.length>e&&(s=t.slice(0,e)+"...",s=s.replace(/\n/g," ")),s}};var n=function(t){t=t.replace(/^\s+|\s+$/g,"").toLowerCase();for(var e="àáäâèéëêìíïîòóöôùúüûñç·/_,:",s="aaaaeeeeiiiioooouuuunc------",n=0,i=e.length;n<i;n++)t=t.replace(new RegExp(e.charAt(n),"g"),s.charAt(n));return t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"_").replace(/-+/g,"_")}},"8d07":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h1",{staticClass:"title hide-small-screen"},[t._v(t._s(t.text))])},i=[],a={name:"page-title",props:{text:{default:"",type:String}}},o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"ead134bc",null);e["a"]=c.exports},"8ecf":function(t,e,s){},"8f49":function(t,e,s){"use strict";var n=s("93f7"),i=s.n(n);i.a},"91c2":function(t,e,s){},9224:function(t){t.exports={a:"0.10.34"}},9355:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"button",attrs:{title:t.title,href:t.path,target:t.target}},["plus"===t.icon?s("plus-icon",{staticClass:"icon is-small"}):t._e(),"download"===t.icon?s("download-icon",{staticClass:"icon is-small"}):t._e(),"upload"===t.icon?s("upload-icon",{staticClass:"icon is-small"}):t._e(),s("span",{staticClass:"text is-hidden-touch"},[t._v("\n    "+t._s(t.text)+"\n  ")])],1)},i=[],a=s("0a35"),o={name:"button-href-link",components:{PlusIcon:a["w"],DownloadIcon:a["i"],UploadIcon:a["F"]},props:{text:{default:"",type:String},path:{default:"",type:String},icon:{default:"",type:String},title:{default:"",type:String},styleclass:{default:"",type:String},target:{default:"_self",type:String}}},r=o,c=(s("f4d2"),s("2877")),d=Object(c["a"])(r,n,i,!1,null,"a4487af4",null);e["a"]=d.exports},"93f7":function(t,e,s){},9433:function(t,e,s){"use strict";var n=s("7686"),i=s.n(n);i.a},"95de":function(t,e,s){"use strict";var n=s("074d"),i=s.n(n);i.a},9647:function(t,e,s){},"96d8":function(t,e,s){"use strict";var n=s("8411"),i=s.n(n);i.a},"971a":function(t,e,s){"use strict";var n=s("e446"),i=s.n(n);i.a},"976d":function(t,e,s){"use strict";var n=s("f38a"),i=s.n(n);i.a},"978d":function(t,e,s){},9799:function(t,e,s){},"97c8":function(t,e,s){"use strict";var n=s("8b77"),i=s.n(n);i.a},9856:function(t,e,s){},"992f":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[t.label.length>0?s("label",{staticClass:"label"},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0,"is-top":this.isTop}},[s("select",{ref:"select",staticClass:"select-input",attrs:{disabled:t.disabled},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.emitEnter()},change:t.updateValue}},t._l(t.options,(function(e,n){return s("option",{key:n+"-"+e.label+"-"+e.value,domProps:{value:e.value||e.label,selected:t.value===e.value}},[t._v("\n          "+t._s(t.getOptionLabel(e))+"\n        ")])})),0)])])])},i=[],a={name:"combobox",props:{label:{default:"",type:String},value:{default:"",type:String},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isTop:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",this.$refs.select.value)},emitEnter:function(){this.$emit("enter",this.$refs.select.value)},getOptionLabel:function(t){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+t.label.toLowerCase()):t.label}}},o=a,r=(s("97c8"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"a55ff27a",null);e["a"]=c.exports},"997c":function(t,e,s){"use strict";var n=s("3238"),i=s.n(n);i.a},"9b9d":function(t,e,s){"use strict";var n=s("49c1"),i=s.n(n);i.a},"9cc0":function(t,e,s){},"9d94":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.task?s("div",{ref:"side-panel",staticClass:"side task-info",style:t.panelStyle},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"flexrow header-title"},[s("div",{staticClass:"title flexrow-item"},[s("router-link",{attrs:{to:t.taskEntityPath}},[t._v("\n          "+t._s(t.task?t.title:"Loading...")+"\n        ")])],1),t.currentTaskType?s("task-type-name",{staticClass:"flexrow-item task-type",attrs:{"task-type":t.currentTaskType,"production-id":t.currentProduction.id}}):t._e()],1),s("div",{staticClass:"flexrow task-information"},[t.isWide&&t.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"right",title:t.$t("tasks.bigger")},on:{click:t.toggleWidth}}):t.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"left",title:t.$t("tasks.bigger")},on:{click:t.toggleWidth}}):t._e(),t.isCurrentUserManager&&t.isPreview?s("button-simple",{staticClass:"flexrow-item set-thumbnail-button",attrs:{icon:"image",disabled:!t.isSetThumbnailAllowed,title:t.$t("tasks.set_preview")},on:{click:t.setCurrentPreviewAsEntityThumbnail}}):t._e(),t.isAssigned?t._e():s("subscribe-button",{staticClass:"flexrow-item",attrs:{subscribed:t.isAssigned||t.isSubscribed},on:{click:t.toggleSubscribe}}),s("validation-tag",{staticClass:"is-medium flexrow-item",attrs:{task:t.task,"is-static":!0}}),s("div",{staticClass:"filler"}),t.isPreview?s("div",{staticClass:"preview-list flexrow"},[t._l(t.lastFivePreviews,(function(e,n){return s("span",{key:"preview-"+e.revision,class:{"flexrow-item":!0,selected:t.currentPreviewIndex===n},on:{click:function(e){return t.onPreviewChanged(n)}}},[t._v("\n          "+t._s(e.revision)+"\n        ")])})),s("router-link",{staticClass:"history-button flexrow-item",attrs:{to:t.taskPath}},[t._v("\n          ...\n        ")])],2):t._e()],1)]),s("div",{ref:"task-columns",staticClass:"task-columns"},[t.isPreview?s("div",{staticClass:"task-column preview-column"},[s("div",{staticClass:"preview-column-content"},[s("div",{staticClass:"preview"},[s("div",{staticClass:"preview-picture"},[t.isMoviePreview?s("div",[s("video-player",{ref:"preview-movie",attrs:{preview:t.currentPreview,"entity-preview-files":t.taskEntityPreviews,"task-type-map":t.taskTypeMap,light:!t.isWide},on:{annotationchanged:t.onAnnotationChanged}})],1):t.isStandardPreview?s("div",{staticClass:"preview-standard-file"},[s("a",{ref:"preview-file",staticClass:"button",attrs:{href:t.currentPreviewDlPath}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("\n                  "+t._s(t.$t("tasks.download_pdf_file",{extension:t.extension}))+"\n                ")])],1)]):t.is3DModelPreview?s("model-viewer",{staticClass:"model-viewer",attrs:{"preview-url":t.currentPreviewPath,"preview-dl-path":t.currentPreviewDlPath,light:!t.isWide}}):t.isPicturePreview?s("picture-viewer",{ref:"preview-picture",attrs:{preview:t.currentPreview,light:!t.isWide},on:{"annotation-changed":t.onAnnotationChanged,"add-preview":t.onAddExtraPreview}}):t._e(),t.taskPreviews&&0!==t.taskPreviews.length?t._e():s("div",{staticClass:"no-preview"},[s("em",[t._v(t._s(t.$t("tasks.no_preview")))])])],1)])])]):t._e(),s("div",{staticClass:"task-column comments-column"},[s("div",[s("div",[t.isCommentingAllowed?s("add-comment",{ref:"add-comment",attrs:{user:t.user,team:t.currentTeam,task:t.task,"task-status":t.taskStatusForCurrentUser,light:!0,"is-loading":t.loading.addComment,"attached-file-name":t.attachedFileName,"is-error":t.errors.addComment},on:{"add-comment":t.addComment,"add-preview":t.onAddPreviewClicked,"file-drop":t.selectFile}}):t._e(),t.taskComments.length>0&&!t.loading.task?s("div",{staticClass:"comments"},t._l(t.taskComments,(function(e,n){return s("comment",{key:"comment"+e.id,attrs:{comment:e,light:!0,"add-preview":t.onAddPreviewClicked,"is-last":n===t.pinnedCount,editable:e.person&&t.user.id===e.person.id},on:{"pin-comment":t.onPinComment,"edit-comment":t.onEditComment,"delete-comment":t.onDeleteComment,"checklist-updated":t.saveComment}})})),1):t.loading.task?t._e():s("div",{staticClass:"no-comment"},[s("em",[t._v("\n              "+t._s(t.$t("tasks.no_comment"))+"\n            ")])])],1)]),t.loading.task?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t._e()])]),s("add-preview-modal",{ref:"add-preview-modal",attrs:{active:t.modals.addPreview,"is-loading":t.loading.addPreview,"is-error":t.errors.addPreview},on:{cancel:t.onClosePreview,fileselected:t.selectFile,confirm:t.onClosePreview}}),s("add-preview-modal",{ref:"add-extra-preview-modal",attrs:{active:t.modals.addExtraPreview,"is-loading":t.loading.addExtraPreview,"is-error":t.errors.addExtraPreview,"form-data":t.addExtraPreviewFormData,extensions:".png,.jpg,.jpeg"},on:{cancel:t.onCloseExtraPreview,fileselected:t.selectFile,confirm:t.createExtraPreview}}),s("edit-comment-modal",{attrs:{active:t.modals.editComment,"is-loading":t.loading.editComment,"is-error":t.errors.editComment,"comment-to-edit":t.commentToEdit,team:t.currentTeam},on:{confirm:t.confirmEditTaskComment,cancel:t.onCancelEditComment}}),s("delete-modal",{attrs:{active:t.modals.deleteComment,"is-loading":t.loading.deleteComment,"is-error":t.errors.deleteComment,text:t.$t("tasks.delete_comment"),"error-text":t.$t("tasks.delete_comment_error")},on:{confirm:t.confirmDeleteTaskComment,cancel:t.onCancelDeleteComment}})],1):s("div",{staticClass:"side task-info has-text-centered"},[t._v("\n  "+t._s(t.$t("tasks.no_task_selected"))+"\n")])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("6762"),s("2fdb"),s("7514"),s("bd86")),o=s("2f62"),r=s("0a35"),c=function(t,e,s,n,i){var a=t.project_id?t.project_id:e.id,o={name:"task",params:{production_id:a,task_id:t.id}};s&&n&&(o.name="episode-task",o.params.episode_id=t.episode_id||n.id);var r=i[t.task_type_id];return o.params.type=r.for_shots?"shots":"assets",o},d=function(t,e){if(t){var s=t.entity_type_name,n=t.entity?t.entity.id:t.entity_id,i={name:"Shot"===s?"shot":"asset",params:{production_id:t.project_id}};return"Shot"===s?i.params.shot_id=n:i.params.asset_id=n,e&&(i.name="episode-".concat(i.name),i.params.episode_id=e),i}return{name:"open-productions"}},u=s("66be"),l=s("6be5"),p=s("ee35"),f=s("de40"),h=s("8bd9"),m=s("5f48"),_=s("5b23"),v=s("8078"),b=s("41e2"),y=s("be83"),g=s("d228"),k=s("274f"),O=s("fe13"),S=s("7d5f");function w(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function T(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?w(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):w(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var C={name:"task-info",components:{AddComment:l["a"],AddPreviewModal:p["a"],ButtonSimple:f["a"],Comment:h["a"],DownloadIcon:r["i"],DeleteModal:m["a"],EditCommentModal:_["a"],ModelViewer:v["a"],PictureViewer:b["a"],Spinner:y["a"],SubscribeButton:g["a"],TaskTypeName:k["a"],ValidationTag:O["a"],VideoPlayer:S["a"]},props:{task:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!0},isPreview:{type:Boolean,default:!0}},data:function(){return{addExtraPreviewFormData:null,attachedFileName:"",currentPreviewIndex:0,currentPreviewPath:"",currentPreviewDlPath:"",commentToEdit:null,isSubscribed:!1,isWide:!1,otherPreviews:[],taskComments:[],taskPreviews:[],errors:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,task:!1},loading:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,task:!1},modals:{addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1}}},mounted:function(){this.loadTaskData(),this.$refs["add-comment"]&&(this.$refs["add-comment"].text=this.lastCommentDraft)},beforeDestroy:function(){var t="".concat(this.$refs["add-comment"].text);this.$store.commit("SET_LAST_COMMENT_DRAFT",t)},computed:T({},Object(o["c"])(["currentEpisode","currentProduction","getTaskComment","getTaskComments","getTaskPreviews","isCurrentUserManager","isSingleEpisode","isTVShow","lastCommentDraft","personMap","previewFormData","productionMap","taskEntityPreviews","taskStatusForCurrentUser","taskTypeMap","user"]),{currentTeam:function(){var t=this,e=this.productionMap[this.task.project_id];return e.team.map((function(e){return t.personMap[e]}))},title:function(){if(this.task){var t=this.task.full_entity_name||this.task.entity_name;return"".concat(t)}return"Loading..."},isAssigned:function(){var t=this;return!!this.task&&this.task.assignees.some((function(e){return e===t.user.id}))},isCommentingAllowed:function(){var t=this;return this.isCurrentUserManager||this.task.assignees.find((function(e){return e===t.user.id}))},isSetThumbnailAllowed:function(){return this.currentPreviewId&&this.task&&this.task.entity&&this.currentPreviewId!==this.task.entity.preview_file_id},currentTaskType:function(){return this.task?this.taskTypeMap[this.task.task_type_id]:null},currentPreview:function(){var t=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[t]:null},currentPreviewId:function(){var t=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[t].id:null},extension:function(){var t=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[t].extension:""},isStandardPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&["ai","blend","ma","mb","pdf","psd","rar","zip"].includes(this.extension)},isMoviePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"mp4"===this.extension},isPicturePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"png"===this.extension},is3DModelPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"obj"===this.extension},moviePath:function(){var t=null;return t=this.currentPreview.id,"/api/movies/originals/preview-files/".concat(t,".mp4")},tasktypeStyle:function(){return Object(u["a"])(this.task)},taskPath:function(){return c(this.task,this.currentProduction,this.isTVShow,this.currentEpisode,this.taskTypeMap)},taskEntityPath:function(){var t=this.$route.params.episode_id;return d(this.task,t)},lastFivePreviews:function(){return this.taskPreviews.slice(0,5)},panelStyle:function(){return{width:this.isWide?700:350}},pinnedCount:function(){return this.taskComments.filter((function(t){return t.pinned})).length}}),methods:T({},Object(o["b"])(["addCommentExtraPreview","commentTask","commentTaskWithPreview","deleteTaskComment","editTaskComment","loadPreviewFileFormData","loadTask","loadTaskComments","loadTaskSubscribed","refreshPreview","pinComment","setPreview","subscribeToTask","unsubscribeFromTask","updatePreviewAnnotation"]),{loadTaskData:function(){var t=this;this.task&&(this.loading.task=!0,this.errors.task=!1,this.loadTaskComments({taskId:this.task.id,entityId:this.task.entity_id,callback:function(e){e?(console.log(e),t.errors.task=!0):t.loadTaskSubscribed({taskId:t.task.id,callback:function(e,s){e&&console.log(e),t.loading.task=!1,t.reset(),t.isSubscribed=s}})}}))},addComment:function(t,e){var s=this,n=function(t,e){t?s.errors.addComment=!0:(s.$refs["add-preview-modal"].reset(),s.reset(),s.attachedFileName=""),s.loading.addComment=!1},i={taskId:this.task.id,taskStatusId:e,commentText:t,comment:t,callback:n};this.loading.addComment=!0,this.errors.addComment=!1,this.attachedFileName?this.commentTaskWithPreview(i):this.commentTask(i)},reset:function(){var t=this;this.task&&(this.taskComments=this.getTaskComments(this.task.id),this.taskPreviews=this.getTaskPreviews(this.task.id),this.setOtherPreviews(),this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath(),this.$nextTick((function(){t.$refs["add-comment"]&&t.$refs["add-comment"].focus()})))},focusCommentTextarea:function(){this.$refs["add-comment"]&&this.$refs["add-comment"].focus()},getOriginalPath:function(){var t=this.currentPreviewId,e=this.extension?this.extension:"png";return"/api/pictures/originals/preview-files/".concat(t,".").concat(e)},getOriginalDlPath:function(){var t=this.currentPreviewId;return"/api/pictures/originals/preview-files/".concat(t,"/download")},setOtherPreviews:function(){var t=this;return this.taskPreviews&&(this.otherPreviews=this.taskPreviews.filter((function(e){return e.id!==t.currentPreviewId&&"mp4"===e.extension}))),this.otherPreviews},selectFile:function(t){this.loadPreviewFileFormData(t),this.attachedFileName=t.get("file").name},createExtraPreview:function(){var t=this,e=this.currentPreviewIndex;this.errors.addExtraPreview=!1,this.loading.addExtraPreview=!0,this.addCommentExtraPreview({taskId:this.task.id,commentId:this.taskComments[0].id,previewId:this.taskPreviews[e].id,callback:function(e,s){t.loading.addExtraPreview=!1,e?t.errors.addExtraPreview=!0:(t.$refs["add-extra-preview-modal"].reset(),t.reset(),setTimeout((function(){t.$refs["preview-picture"].displayLast()}),0),t.modals.addExtraPreview=!1)}})},onPreviewAdded:function(t){var e=t.task_id,s=t.comment_id,n=t.preview_file_id,i=t.revision,a=t.extension,o=this.$store.getters.getTaskComment(e,s);!o||0!==o.previews.length&&o.previews[0].id===n||e!==this.task.id||(this.$store.commit("ADD_PREVIEW_END",{preview:{id:n,revision:i,extension:a},taskId:e,commentId:s,comment:o}),this.reset())},onAnnotationChanged:function(t){var e=t.preview,s=t.annotations,n=this.task.id;this.updatePreviewAnnotation({taskId:n,preview:e,annotations:s})},onAddPreviewClicked:function(t){this.modals.addPreview=!0},onAddExtraPreview:function(){this.modals.addExtraPreview=!0},onClosePreview:function(){this.modals.addPreview=!1},onCloseExtraPreview:function(){this.modals.addExtraPreview=!1},onPreviewChanged:function(t){this.currentPreviewIndex=t},setCurrentPreviewAsEntityThumbnail:function(){this.setPreview({taskId:this.task.id,entityId:this.task.entity.id,previewId:this.currentPreviewId,callback:function(){}})},toggleSubscribe:function(){this.task&&!this.isAssigned&&(this.isSubscribed?(this.unsubscribeFromTask(this.task.id),this.isSubscribed=!1):(this.subscribeToTask(this.task.id),this.isSubscribed=!0))},toggleWidth:function(){this.isWide=!this.isWide;var t=this.$refs["side-panel"];this.isWide?t.parentElement.style["min-width"]="700px":t.parentElement.style["min-width"]="350px"},onPinComment:function(t){this.pinComment(t)},onEditComment:function(t){this.commentToEdit=t,this.modals.editComment=!0},onDeleteComment:function(t){this.commentToEdit=t,this.modals.deleteComment=!0},onCancelEditComment:function(t){this.modals.editComment=!1},onCancelDeleteComment:function(t){this.modals.deleteComment=!1},saveComment:function(t,e){this.editTaskComment({taskId:this.task.id,comment:t,checklist:e})},confirmDeleteTaskComment:function(){var t=this;this.loading.deleteComment=!0,this.errors.deleteComment=!1;var e=this.commentToEdit.id;this.deleteTaskComment({taskId:this.task.id,commentId:e,callback:function(e){t.loading.deleteComment=!1,e?t.errors.deleteComment=!0:(t.reset(),t.modals.deleteComment=!1)}})},confirmEditTaskComment:function(t){var e=this;this.loading.editComment=!0,this.errors.editComment=!1,this.editTaskComment({taskId:this.task.id,comment:t,callback:function(t){e.loading.editComment=!1,t?e.errors.editComment=!0:e.modals.editComment=!1}})}}),watch:{task:function(){this.attachedFileName="",this.currentIndex=0,this.loadTaskData()},isLoading:function(){this.task.loading=this.isLoading}},socket:{events:{"preview-file:add-file":function(t){this.onPreviewAdded(t)},"preview_file:update":function(t){var e=this,s=this.taskPreviews.filter((function(e){return e.id===t.preview_file_id}));s&&this.refreshPreview({taskId:this.task.id,previewId:t.preview_file_id}).then((function(){e.$refs["preview-movie"]?e.$refs["preview-movie"].isDrawing||e.$refs["preview-movie"].reloadAnnotations():e.$refs["preview-picture"]&&(e.$refs["preview-picture"].isDrawing||e.$refs["preview-picture"].reset())}))}}}},P=C,E=(s("05b0"),s("2877")),j=Object(E["a"])(P,n,i,!1,null,"f11a515a",null);e["a"]=j.exports},"9fb0":function(t,e,s){"use strict";s.d(e,"lf",(function(){return n})),s.d(e,"mf",(function(){return i})),s.d(e,"nf",(function(){return a})),s.d(e,"Se",(function(){return o})),s.d(e,"Tc",(function(){return r})),s.d(e,"Rc",(function(){return c})),s.d(e,"Sc",(function(){return d})),s.d(e,"Od",(function(){return u})),s.d(e,"if",(function(){return l})),s.d(e,"tc",(function(){return p})),s.d(e,"ae",(function(){return f})),s.d(e,"yc",(function(){return h})),s.d(e,"wc",(function(){return m})),s.d(e,"xc",(function(){return _})),s.d(e,"kb",(function(){return v})),s.d(e,"ib",(function(){return b})),s.d(e,"jb",(function(){return y})),s.d(e,"gf",(function(){return g})),s.d(e,"rc",(function(){return k})),s.d(e,"Xb",(function(){return O})),s.d(e,"Vb",(function(){return S})),s.d(e,"Wb",(function(){return w})),s.d(e,"hf",(function(){return T})),s.d(e,"sc",(function(){return C})),s.d(e,"Vc",(function(){return P})),s.d(e,"Uc",(function(){return E})),s.d(e,"Ve",(function(){return j})),s.d(e,"De",(function(){return x})),s.d(e,"le",(function(){return D})),s.d(e,"cf",(function(){return A})),s.d(e,"Zd",(function(){return M})),s.d(e,"be",(function(){return L})),s.d(e,"Ue",(function(){return I})),s.d(e,"Yd",(function(){return $})),s.d(e,"Te",(function(){return q})),s.d(e,"Lf",(function(){return N})),s.d(e,"Kf",(function(){return R})),s.d(e,"Mf",(function(){return F})),s.d(e,"E",(function(){return V})),s.d(e,"xf",(function(){return U})),s.d(e,"zf",(function(){return B})),s.d(e,"yf",(function(){return z})),s.d(e,"Af",(function(){return H})),s.d(e,"Bf",(function(){return G})),s.d(e,"Ef",(function(){return W})),s.d(e,"Gf",(function(){return K})),s.d(e,"Ff",(function(){return Y})),s.d(e,"Cf",(function(){return Q})),s.d(e,"Df",(function(){return J})),s.d(e,"df",(function(){return X})),s.d(e,"Bd",(function(){return Z})),s.d(e,"Cd",(function(){return tt})),s.d(e,"ef",(function(){return et})),s.d(e,"sd",(function(){return st})),s.d(e,"Vd",(function(){return nt})),s.d(e,"Wd",(function(){return it})),s.d(e,"kc",(function(){return at})),s.d(e,"rd",(function(){return ot})),s.d(e,"td",(function(){return rt})),s.d(e,"S",(function(){return ct})),s.d(e,"xb",(function(){return dt})),s.d(e,"Ob",(function(){return ut})),s.d(e,"bb",(function(){return lt})),s.d(e,"ce",(function(){return pt})),s.d(e,"de",(function(){return ft})),s.d(e,"i",(function(){return ht})),s.d(e,"h",(function(){return mt})),s.d(e,"ob",(function(){return _t})),s.d(e,"J",(function(){return vt})),s.d(e,"tf",(function(){return bt})),s.d(e,"l",(function(){return yt})),s.d(e,"m",(function(){return gt})),s.d(e,"ne",(function(){return kt})),s.d(e,"N",(function(){return Ot})),s.d(e,"r",(function(){return St})),s.d(e,"of",(function(){return wt})),s.d(e,"Fe",(function(){return Tt})),s.d(e,"se",(function(){return Ct})),s.d(e,"qf",(function(){return Pt})),s.d(e,"Re",(function(){return Et})),s.d(e,"ed",(function(){return jt})),s.d(e,"cd",(function(){return xt})),s.d(e,"dd",(function(){return Dt})),s.d(e,"k",(function(){return At})),s.d(e,"uf",(function(){return Mt})),s.d(e,"me",(function(){return Lt})),s.d(e,"Qc",(function(){return It})),s.d(e,"Oc",(function(){return $t})),s.d(e,"Pc",(function(){return qt})),s.d(e,"hd",(function(){return Nt})),s.d(e,"fd",(function(){return Rt})),s.d(e,"gd",(function(){return Ft})),s.d(e,"dc",(function(){return Vt})),s.d(e,"bc",(function(){return Ut})),s.d(e,"cc",(function(){return Bt})),s.d(e,"rb",(function(){return zt})),s.d(e,"pb",(function(){return Ht})),s.d(e,"qb",(function(){return Gt})),s.d(e,"Le",(function(){return Wt})),s.d(e,"fe",(function(){return Kt})),s.d(e,"ee",(function(){return Yt})),s.d(e,"jf",(function(){return Qt})),s.d(e,"kf",(function(){return Jt})),s.d(e,"d",(function(){return Xt})),s.d(e,"sf",(function(){return Zt})),s.d(e,"hb",(function(){return te})),s.d(e,"Ad",(function(){return ee})),s.d(e,"yd",(function(){return se})),s.d(e,"zd",(function(){return ne})),s.d(e,"qc",(function(){return ie})),s.d(e,"oc",(function(){return ae})),s.d(e,"pc",(function(){return oe})),s.d(e,"Db",(function(){return re})),s.d(e,"Bb",(function(){return ce})),s.d(e,"Cb",(function(){return de})),s.d(e,"wd",(function(){return ue})),s.d(e,"ud",(function(){return le})),s.d(e,"vd",(function(){return pe})),s.d(e,"nc",(function(){return fe})),s.d(e,"lc",(function(){return he})),s.d(e,"mc",(function(){return me})),s.d(e,"Ab",(function(){return _e})),s.d(e,"yb",(function(){return ve})),s.d(e,"zb",(function(){return be})),s.d(e,"Kc",(function(){return ye})),s.d(e,"Ic",(function(){return ge})),s.d(e,"Jc",(function(){return ke})),s.d(e,"Rb",(function(){return Oe})),s.d(e,"Pb",(function(){return Se})),s.d(e,"Qb",(function(){return we})),s.d(e,"eb",(function(){return Te})),s.d(e,"cb",(function(){return Ce})),s.d(e,"db",(function(){return Pe})),s.d(e,"Hc",(function(){return Ee})),s.d(e,"Fc",(function(){return je})),s.d(e,"Gc",(function(){return xe})),s.d(e,"Nb",(function(){return De})),s.d(e,"Lb",(function(){return Ae})),s.d(e,"Mb",(function(){return Me})),s.d(e,"ab",(function(){return Le})),s.d(e,"Y",(function(){return Ie})),s.d(e,"Z",(function(){return $e})),s.d(e,"He",(function(){return qe})),s.d(e,"Xe",(function(){return Ne})),s.d(e,"K",(function(){return Re})),s.d(e,"Dc",(function(){return Fe})),s.d(e,"Bc",(function(){return Ve})),s.d(e,"Cc",(function(){return Ue})),s.d(e,"Ec",(function(){return Be})),s.d(e,"q",(function(){return ze})),s.d(e,"vc",(function(){return He})),s.d(e,"uc",(function(){return Ge})),s.d(e,"Kb",(function(){return We})),s.d(e,"Ib",(function(){return Ke})),s.d(e,"Jb",(function(){return Ye})),s.d(e,"X",(function(){return Qe})),s.d(e,"V",(function(){return Je})),s.d(e,"W",(function(){return Xe})),s.d(e,"ye",(function(){return Ze})),s.d(e,"we",(function(){return ts})),s.d(e,"xe",(function(){return es})),s.d(e,"Ie",(function(){return ss})),s.d(e,"Ce",(function(){return ns})),s.d(e,"he",(function(){return is})),s.d(e,"Eb",(function(){return as})),s.d(e,"P",(function(){return os})),s.d(e,"Je",(function(){return rs})),s.d(e,"a",(function(){return cs})),s.d(e,"pf",(function(){return ds})),s.d(e,"ge",(function(){return us})),s.d(e,"s",(function(){return ls})),s.d(e,"O",(function(){return ps})),s.d(e,"nd",(function(){return fs})),s.d(e,"ld",(function(){return hs})),s.d(e,"md",(function(){return ms})),s.d(e,"id",(function(){return _s})),s.d(e,"Lc",(function(){return vs})),s.d(e,"pd",(function(){return bs})),s.d(e,"od",(function(){return ys})),s.d(e,"ff",(function(){return gs})),s.d(e,"Ac",(function(){return ks})),s.d(e,"zc",(function(){return Os})),s.d(e,"jc",(function(){return Ss})),s.d(e,"hc",(function(){return ws})),s.d(e,"ic",(function(){return Ts})),s.d(e,"gc",(function(){return Cs})),s.d(e,"ec",(function(){return Ps})),s.d(e,"fc",(function(){return Es})),s.d(e,"Ub",(function(){return js})),s.d(e,"Sb",(function(){return xs})),s.d(e,"Tb",(function(){return Ds})),s.d(e,"Ud",(function(){return As})),s.d(e,"Sd",(function(){return Ms})),s.d(e,"Td",(function(){return Ls})),s.d(e,"Rd",(function(){return Is})),s.d(e,"Pd",(function(){return $s})),s.d(e,"Qd",(function(){return qs})),s.d(e,"Nd",(function(){return Ns})),s.d(e,"Ld",(function(){return Rs})),s.d(e,"Md",(function(){return Fs})),s.d(e,"wb",(function(){return Vs})),s.d(e,"ub",(function(){return Us})),s.d(e,"vb",(function(){return Bs})),s.d(e,"tb",(function(){return zs})),s.d(e,"sb",(function(){return Hs})),s.d(e,"gb",(function(){return Gs})),s.d(e,"fb",(function(){return Ws})),s.d(e,"Be",(function(){return Ks})),s.d(e,"ze",(function(){return Ys})),s.d(e,"Ae",(function(){return Qs})),s.d(e,"b",(function(){return Js})),s.d(e,"rf",(function(){return Xs})),s.d(e,"je",(function(){return Zs})),s.d(e,"n",(function(){return tn})),s.d(e,"vf",(function(){return en})),s.d(e,"oe",(function(){return sn})),s.d(e,"o",(function(){return nn})),s.d(e,"wf",(function(){return an})),s.d(e,"pe",(function(){return on})),s.d(e,"t",(function(){return rn})),s.d(e,"bf",(function(){return cn})),s.d(e,"Ee",(function(){return dn})),s.d(e,"re",(function(){return un})),s.d(e,"Ze",(function(){return ln})),s.d(e,"Ne",(function(){return pn})),s.d(e,"Hb",(function(){return fn})),s.d(e,"Gb",(function(){return hn})),s.d(e,"Fb",(function(){return mn})),s.d(e,"af",(function(){return _n})),s.d(e,"Ye",(function(){return vn})),s.d(e,"Me",(function(){return bn})),s.d(e,"R",(function(){return yn})),s.d(e,"Q",(function(){return gn})),s.d(e,"Ke",(function(){return kn})),s.d(e,"L",(function(){return On})),s.d(e,"Oe",(function(){return Sn})),s.d(e,"ve",(function(){return wn})),s.d(e,"U",(function(){return Tn})),s.d(e,"T",(function(){return Cn})),s.d(e,"F",(function(){return Pn})),s.d(e,"G",(function(){return En})),s.d(e,"Ed",(function(){return jn})),s.d(e,"Fd",(function(){return xn})),s.d(e,"Dd",(function(){return Dn})),s.d(e,"Hd",(function(){return An})),s.d(e,"Gd",(function(){return Mn})),s.d(e,"Hf",(function(){return Ln})),s.d(e,"Jf",(function(){return In})),s.d(e,"If",(function(){return $n})),s.d(e,"Ge",(function(){return qn})),s.d(e,"te",(function(){return Nn})),s.d(e,"B",(function(){return Rn})),s.d(e,"A",(function(){return Fn})),s.d(e,"z",(function(){return Vn})),s.d(e,"D",(function(){return Un})),s.d(e,"C",(function(){return Bn})),s.d(e,"y",(function(){return zn})),s.d(e,"x",(function(){return Hn})),s.d(e,"w",(function(){return Gn})),s.d(e,"u",(function(){return Wn})),s.d(e,"v",(function(){return Kn})),s.d(e,"Yc",(function(){return Yn})),s.d(e,"Wc",(function(){return Qn})),s.d(e,"Xc",(function(){return Jn})),s.d(e,"bd",(function(){return Xn})),s.d(e,"Zc",(function(){return Zn})),s.d(e,"ad",(function(){return ti})),s.d(e,"ac",(function(){return ei})),s.d(e,"Yb",(function(){return si})),s.d(e,"Zb",(function(){return ni})),s.d(e,"nb",(function(){return ii})),s.d(e,"lb",(function(){return ai})),s.d(e,"mb",(function(){return oi})),s.d(e,"p",(function(){return ri})),s.d(e,"qe",(function(){return ci})),s.d(e,"I",(function(){return di})),s.d(e,"H",(function(){return ui})),s.d(e,"qd",(function(){return li})),s.d(e,"g",(function(){return pi})),s.d(e,"Jd",(function(){return fi})),s.d(e,"ie",(function(){return hi})),s.d(e,"Mc",(function(){return mi})),s.d(e,"Nc",(function(){return _i})),s.d(e,"Id",(function(){return vi})),s.d(e,"Xd",(function(){return bi})),s.d(e,"xd",(function(){return yi})),s.d(e,"jd",(function(){return gi})),s.d(e,"kd",(function(){return ki})),s.d(e,"M",(function(){return Oi})),s.d(e,"j",(function(){return Si})),s.d(e,"c",(function(){return wi})),s.d(e,"Kd",(function(){return Ti})),s.d(e,"We",(function(){return Ci})),s.d(e,"Pe",(function(){return Pi})),s.d(e,"Qe",(function(){return Ei})),s.d(e,"ue",(function(){return ji})),s.d(e,"e",(function(){return xi})),s.d(e,"f",(function(){return Di})),s.d(e,"ke",(function(){return Ai}));var n="TOGGLE_DARK_THEME",i="TOGGLE_SIDEBAR",a="TOGGLE_USER_MENU",o="SET_LAST_PRODUCTION_SCREEN",r="LOAD_PEOPLE_START",c="LOAD_PEOPLE_END",d="LOAD_PEOPLE_ERROR",u="NEW_PEOPLE_END",l="SHOW_IMPORT_PEOPLE_MODAL",p="HIDE_IMPORT_PEOPLE_MODAL",f="PERSON_CSV_FILE_SELECTED",h="IMPORT_PEOPLE_START",m="IMPORT_PEOPLE_END",_="IMPORT_PEOPLE_ERROR",v="DELETE_PEOPLE_START",b="DELETE_PEOPLE_END",y="DELETE_PEOPLE_ERROR",g="SHOW_DELETE_PEOPLE_MODAL",k="HIDE_DELETE_PEOPLE_MODAL",O="EDIT_PEOPLE_START",S="EDIT_PEOPLE_END",w="EDIT_PEOPLE_ERROR",T="SHOW_EDIT_PEOPLE_MODAL",C="HIDE_EDIT_PEOPLE_MODAL",P="LOAD_PERSON_TASKS_END",E="LOAD_PERSON_DONE_TASKS_END",j="SET_PERSON_TASKS_SEARCH",x="SAVE_PERSON_TASKS_SEARCH_END",D="REMOVE_PERSON_TASKS_SEARCH_END",A="SET_TIME_SPENT",M="PEOPLE_TIMESHEET_LOADED",L="PERSON_LOAD_TIME_SPENTS_END",I="SET_PERSON_TASKS_SCROLL_POSITION",$="PEOPLE_SEARCH_CHANGE",q="SET_ORGANISATION",N="USER_SAVE_PROFILE_LOADING",R="USER_SAVE_PROFILE_ERROR",F="USER_SAVE_PROFILE_SUCCESS",V="CHANGE_AVATAR_FILE",U="UPLOAD_AVATAR_END",B="USER_CHANGE_PASSWORD_LOADING",z="USER_CHANGE_PASSWORD_ERROR",H="USER_CHANGE_PASSWORD_SUCCESS",G="USER_CHANGE_PASSWORD_UNVALID",W="USER_LOAD_TODOS_END",K="USER_LOAD_TODOS_START",Y="USER_LOAD_TODOS_ERROR",Q="USER_LOAD_DONE_TASKS_END",J="USER_LOAD_TIME_SPENTS_END",X="SET_TODOS_SEARCH",Z="LOAD_USER_FILTERS_END",tt="LOAD_USER_FILTERS_ERROR",et="SET_TODO_LIST_SCROLL_POSITION",st="LOAD_TASK_END",nt="NEW_TASK_COMMENT_END",it="NEW_TASK_END",at="EDIT_TASK_END",ot="LOAD_TASK_COMMENTS_END",rt="LOAD_TASK_ENTITY_PREVIEW_FILES_END",ct="CREATE_TASKS_END",dt="DELETE_TASK_END",ut="EDIT_COMMENT_END",lt="DELETE_COMMENT_END",pt="PIN_COMMENT",ft="PREVIEW_FILE_SELECTED",ht="ADD_PREVIEW_START",mt="ADD_PREVIEW_END",_t="DELETE_PREVIEW_END",vt="CHANGE_PREVIEW_END",bt="UPDATE_PREVIEW_ANNOTATION",yt="ADD_SELECTED_TASK",gt="ADD_SELECTED_TASKS",kt="REMOVE_SELECTED_TASK",Ot="CLEAR_SELECTED_TASKS",St="ASSIGN_TASKS",wt="UNASSIGN_TASKS",Tt="SAVE_TASK_SEARCH_END",Ct="REMOVE_TASK_SEARCH_END",Pt="UPDATE_COMMENT_CHECKLIST",Et="SET_LAST_COMMENT_DRAFT",jt="LOAD_PRODUCTIONS_START",xt="LOAD_PRODUCTIONS_END",Dt="LOAD_PRODUCTIONS_ERROR",At="ADD_PRODUCTION",Mt="UPDATE_PRODUCTION",Lt="REMOVE_PRODUCTION",It="LOAD_OPEN_PRODUCTIONS_START",$t="LOAD_OPEN_PRODUCTIONS_END",qt="LOAD_OPEN_PRODUCTIONS_ERROR",Nt="LOAD_PRODUCTION_STATUS_START",Rt="LOAD_PRODUCTION_STATUS_END",Ft="LOAD_PRODUCTION_STATUS_ERROR",Vt="EDIT_PRODUCTION_START",Ut="EDIT_PRODUCTION_END",Bt="EDIT_PRODUCTION_ERROR",zt="DELETE_PRODUCTION_START",Ht="DELETE_PRODUCTION_END",Gt="DELETE_PRODUCTION_ERROR",Wt="SET_CURRENT_PRODUCTION",Kt="PRODUCTION_PICTURE_FILE_SELECTED",Yt="PRODUCTION_AVATAR_UPLOADED",Qt="TEAM_ADD_PERSON",Jt="TEAM_REMOVE_PERSON",Xt="ADD_METADATA_DESCRIPTOR_END",Zt="UPDATE_METADATA_DESCRIPTOR_END",te="DELETE_METADATA_DESCRIPTOR_END",ee="LOAD_TASK_TYPES_START",se="LOAD_TASK_TYPES_END",ne="LOAD_TASK_TYPES_ERROR",ie="EDIT_TASK_TYPE_START",ae="EDIT_TASK_TYPE_END",oe="EDIT_TASK_TYPE_ERROR",re="DELETE_TASK_TYPE_START",ce="DELETE_TASK_TYPE_END",de="DELETE_TASK_TYPE_ERROR",ue="LOAD_TASK_STATUSES_START",le="LOAD_TASK_STATUSES_END",pe="LOAD_TASK_STATUSES_ERROR",fe="EDIT_TASK_STATUS_START",he="EDIT_TASK_STATUS_END",me="EDIT_TASK_STATUS_ERROR",_e="DELETE_TASK_STATUS_START",ve="DELETE_TASK_STATUS_END",be="DELETE_TASK_STATUS_ERROR",ye="LOAD_CUSTOM_ACTIONS_START",ge="LOAD_CUSTOM_ACTIONS_END",ke="LOAD_CUSTOM_ACTIONS_ERROR",Oe="EDIT_CUSTOM_ACTION_START",Se="EDIT_CUSTOM_ACTION_END",we="EDIT_CUSTOM_ACTION_ERROR",Te="DELETE_CUSTOM_ACTION_START",Ce="DELETE_CUSTOM_ACTION_END",Pe="DELETE_CUSTOM_ACTION_ERROR",Ee="LOAD_ASSET_TYPES_START",je="LOAD_ASSET_TYPES_END",xe="LOAD_ASSET_TYPES_ERROR",De="EDIT_ASSET_TYPE_START",Ae="EDIT_ASSET_TYPE_END",Me="EDIT_ASSET_TYPE_ERROR",Le="DELETE_ASSET_TYPE_START",Ie="DELETE_ASSET_TYPE_END",$e="DELETE_ASSET_TYPE_ERROR",qe="SET_ASSET_LIST_SCROLL_POSITION",Ne="SET_PRODUCTION_ASSET_TYPE_LIST_SCROLL_POSITION",Re="CLEAR_ASSETS",Fe="LOAD_ASSETS_START",Ve="LOAD_ASSETS_END",Ue="LOAD_ASSETS_ERROR",Be="LOAD_ASSET_CAST_IN_END",ze="ASSET_CSV_FILE_SELECTED",He="IMPORT_ASSETS_START",Ge="IMPORT_ASSETS_END",We="EDIT_ASSET_START",Ke="EDIT_ASSET_END",Ye="EDIT_ASSET_ERROR",Qe="DELETE_ASSET_START",Je="DELETE_ASSET_END",Xe="DELETE_ASSET_ERROR",Ze="RESTORE_ASSET_START",ts="RESTORE_ASSET_END",es="RESTORE_ASSET_ERROR",ss="SET_ASSET_SEARCH",ns="SAVE_ASSET_SEARCH_END",is="REMOVE_ASSET_SEARCH_END",as="DISPLAY_MORE_ASSETS",os="COMPUTE_ASSET_TYPE_STATS",rs="SET_ASSET_TYPE_SEARCH",cs="ADD_ASSET",ds="UPDATE_ASSET",us="REMOVE_ASSET",ls="CANCEL_ASSET",ps="CLEAR_SHOTS",fs="LOAD_SHOTS_START",hs="LOAD_SHOTS_END",ms="LOAD_SHOTS_ERROR",_s="LOAD_SEQUENCES_END",vs="LOAD_EPISODES_END",bs="LOAD_SHOT_END",ys="LOAD_SHOT_CASTING_END",gs="SHOT_CSV_FILE_SELECTED",ks="IMPORT_SHOTS_START",Os="IMPORT_SHOTS_END",Ss="EDIT_SHOT_START",ws="EDIT_SHOT_END",Ts="EDIT_SHOT_ERROR",Cs="EDIT_SEQUENCE_START",Ps="EDIT_SEQUENCE_END",Es="EDIT_SEQUENCE_ERROR",js="EDIT_EPISODE_START",xs="EDIT_EPISODE_END",Ds="EDIT_EPISODE_ERROR",As="NEW_SHOT_START",Ms="NEW_SHOT_END",Ls="NEW_SHOT_ERROR",Is="NEW_SEQUENCE_START",$s="NEW_SEQUENCE_END",qs="NEW_SEQUENCE_ERROR",Ns="NEW_EPISODE_START",Rs="NEW_EPISODE_END",Fs="NEW_EPISODE_ERROR",Vs="DELETE_SHOT_START",Us="DELETE_SHOT_END",Bs="DELETE_SHOT_ERROR",zs="DELETE_SEQUENCE_START",Hs="DELETE_SEQUENCE_ERROR",Gs="DELETE_EPISODE_START",Ws="DELETE_EPISODE_ERROR",Ks="RESTORE_SHOT_START",Ys="RESTORE_SHOT_END",Qs="RESTORE_SHOT_ERROR",Js="ADD_EPISODE",Xs="UPDATE_EPISODE",Zs="REMOVE_EPISODE",tn="ADD_SEQUENCE",en="UPDATE_SEQUENCE",sn="REMOVE_SEQUENCE",nn="ADD_SHOT",an="UPDATE_SHOT",on="REMOVE_SHOT",rn="CANCEL_SHOT",cn="SET_SHOT_SEARCH",dn="SAVE_SHOT_SEARCH_END",un="REMOVE_SHOT_SEARCH_END",ln="SET_SEQUENCE_SEARCH",pn="SET_EPISODE_SEARCH",fn="DISPLAY_MORE_SHOTS",hn="DISPLAY_MORE_SEQUENCES",mn="DISPLAY_MORE_EPISODES",_n="SET_SHOT_LIST_SCROLL_POSITION",vn="SET_SEQUENCE_LIST_SCROLL_POSITION",bn="SET_EPISODE_LIST_SCROLL_POSITION",yn="COMPUTE_SEQUENCE_STATS",gn="COMPUTE_EPISODE_STATS",kn="SET_CURRENT_EPISODE",On="CLEAR_EPISODES",Sn="SET_EPISODE_STATS",wn="RESET_PRODUCTION_PATH",Tn="DATA_LOADING_START",Cn="DATA_LOADING_END",Pn="CHANGE_EMAIL",En="CHANGE_PASSWORD",jn="LOGIN_RUN",xn="LOGIN_SUCCESS",Dn="LOGIN_FAILURE",An="LOGOUT_SUCCESS",Mn="LOGOUT_FAILURE",Ln="USER_LOGIN",In="USER_LOGOUT",$n="USER_LOGIN_FAIL",qn="SAVE_TODO_SEARCH_END",Nn="REMOVE_TODO_SEARCH_END",Rn="CASTING_SET_SEQUENCE",Fn="CASTING_SET_EPISODE",Vn="CASTING_SET_CASTING",Un="CASTING_SET_SHOTS",Bn="CASTING_SET_SEQUENCES",zn="CASTING_SET_ASSET_TYPES",Hn="CASTING_SET_ASSET_TYPE",Gn="CASTING_SET_ASSETS",Wn="CASTING_ADD_TO_CASTING",Kn="CASTING_REMOVE_FROM_CASTING",Yn="LOAD_PLAYLISTS_START",Qn="LOAD_PLAYLISTS_END",Jn="LOAD_PLAYLISTS_ERROR",Xn="LOAD_PLAYLIST_START",Zn="LOAD_PLAYLIST_END",ti="LOAD_PLAYLIST_ERROR",ei="EDIT_PLAYLIST_START",si="EDIT_PLAYLIST_END",ni="EDIT_PLAYLIST_ERROR",ii="DELETE_PLAYLIST_START",ai="DELETE_PLAYLIST_END",oi="DELETE_PLAYLIST_ERROR",ri="ADD_SHOT_TO_PLAYLIST",ci="REMOVE_SHOT_FROM_PLAYLIST",di="CHANGE_PLAYLIST_PREVIEW",ui="CHANGE_PLAYLIST_ORDER",li="LOAD_SHOT_PREVIEW_FILES_END",pi="ADD_NEW_JOB",fi="MARK_JOB_AS_DONE",hi="REMOVE_BUILD_JOB",mi="LOAD_NOTIFICATIONS_END",_i="LOAD_NOTIFICATION_END",vi="MARK_ALL_NOTIFICATIONS_AS_READ",bi="NOTIFICATION_ADD_PREVIEW",yi="LOAD_TASK_SUBSCRIBE_END",gi="LOAD_SEQUENCE_SUBSCRIBE_END",ki="LOAD_SEQUENCE_SUBSCRIPTION_END",Oi="CLEAR_NEWS",Si="ADD_PREVIOUS_NEWS",wi="ADD_FIRST_NEWS",Ti="NEWS_ADD_PREVIEW",Ci="SET_PREVIEW",Pi="SET_IS_SHOW_ASSIGNATIONS",Ei="SET_IS_SHOW_INFOS",ji="RESET_ALL",xi="ADD_MILESTONE",Di="ADD_MILESTONES",Ai="REMOVE_MILESTONE"},"9fbc":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("8e6e"),s("456d"),s("55dd"),s("20d6"),s("ac6a");var n=s("bd86"),i=s("2f62");function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(s,!0).forEach((function(e){Object(n["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var r={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:o({},Object(i["c"])([])),methods:{getNewAnnotations:function(t,e){var s=this;if(this.fabricCanvas.getObjects().forEach((function(t){"path"===t.type&&(t.canvasWidth||(t.canvasWidth=s.fabricCanvas.width),t.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}))})),e){if(e.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),e.width=this.fabricCanvas.width,e.height=this.fabricCanvas.height,e.time=t,e.drawing&&e.drawing.objects.length<1){var n=this.annotations.findIndex((function(e){return e.time===t}));this.annotations.splice(n,1)}}else this.annotations.push({time:t,width:this.fabricCanvas.width,height:this.fabricCanvas.height,drawing:this.fabricCanvas.toJSON(["canvasWidth"])}),this.annotations=this.annotations.sort((function(t,e){return t.time<e.time}))||[];var i=[];return this.annotations.forEach((function(t){return i.push(o({},t))})),i}}}},a068:function(t,e,s){"use strict";var n=s("e4ed"),i=s.n(n);i.a},a109:function(t,e,s){"use strict";var n=s("712a"),i=s.n(n);i.a},a574:function(t,e,s){"use strict";var n=s("5306"),i=s.n(n);i.a},a6e9:function(t,e,s){"use strict";var n=s("e8e9"),i=s.n(n);i.a},a81e:function(t,e,s){},abd7:function(t,e,s){},ad52:function(t,e,s){"use strict";var n=s("ec7b"),i=s.n(n);i.a},ad6c:function(t,e,s){t.exports=s.p+"img/kitsu.b07d6464.png"},ae79:function(t,e,s){},b023:function(t,e,s){"use strict";var n=s("26fc"),i=s.n(n);i.a},b11e:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-timesheet data-list"},[s("div",{staticClass:"flexrow timesheet-header"},[s("div",{staticClass:"flexrow-item current-date"},[s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-field input",language:t.locale,"disabled-dates":t.disabledDates,"monday-first":!0,format:"d MMMM yyyy"},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1),s("div",{staticClass:"flexrow time-spent-total"},[t._v("\n    -  \n    "+t._s(t.timeSpentTotal)+" "+t._s(t.$t("timesheets.hours"))+"\n    ")])]),s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[t._v("\n            "+t._s(t.$t("tasks.fields.production"))+"\n          ")]),s("th",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("tasks.fields.entity"))+"\n          ")]),s("th",{staticClass:"time-spent"},[t._v("\n            "+t._s(t.$t("timesheets.time_spents"))+"\n          ")])])])])]),t.tasks.length>0&&!t.isLoading?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.displayedTasks,(function(e,n){return s("tr",{key:e.id+"-"+n},[s("production-name-cell",{staticClass:"production",attrs:{entry:t.productionMap[e.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":e.project_id,entry:t.taskTypeMap[e.task_type_id]}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:t.entityPath(e)}},[t._v("\n              "+t._s(e.full_entity_name)+"\n            ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:t.timeSpentMap[e.id]?t.timeSpentMap[e.id].duration/60:0,"task-id":e.id},on:{change:t.onSliderChange}})],1)})),0)]),t.hideDone?t._e():s("page-subtitle",{attrs:{text:t.$t("timesheets.done_tasks")}}),t.isLoading||t.hideDone?t._e():s("table",{staticClass:"table"},[s("tbody",t._l(t.doneTasks,(function(e,n){return s("tr",{key:e+"-"+n},[s("production-name-cell",{staticClass:"production",attrs:{entry:t.productionMap[e.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":e.project_id,entry:{id:e.task_type_id,name:e.task_type_name,color:e.task_type_color}}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:e.entity_path}},[t._v("\n             "+t._s(e.full_entity_name)+"\n           ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:t.timeSpentMap[e.id]?t.timeSpentMap[e.id].duration/60:0,"task-id":e.id},on:{change:t.onSliderChange}})],1)})),0)])],1):t._e(),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isLoading?t._e():s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.tasks.length)+" "+t._s(t.$tc("tasks.tasks",t.tasks.length))+"\n  ")])],1)},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("c5f6"),s("2f62")),r=s("7f45"),c=s.n(r),d=s("fa33"),u=s("2430"),l=s("de26"),p=s("8751"),f=s("09a4"),h=s("58f5"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"value flexrow-item"},[t._v("\n      "+t._s(t.value)+"\n    ")]),s("vue-slider",t._b({ref:"slider",staticClass:"flexrow-item slider",model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"vue-slider",t.options,!1)),s("button",{staticClass:"button flexrow-item",on:{click:function(e){return t.setValue(1)}}},[t._v("1")]),s("button",{staticClass:"button flexrow-item",on:{click:function(e){return t.setValue(4)}}},[t._v("4")]),s("button",{staticClass:"button flexrow-item",on:{click:function(e){return t.setValue(8)}}},[t._v("8")])],1)])},_=[],v=s("4971"),b=s.n(v);s("24df");function y(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function g(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?y(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):y(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var k={name:"time-slider-cell",data:function(){return{value:this.duration,options:{show:!0,width:400,min:0,max:10,interval:.5,lazy:!0,marks:!0,hideLabel:!0,piecewise:!0,tooltip:"focus",tooltipPlacement:"bottom",processStyle:{"background-color":"#8F91EB"},railStyle:{background:"#CCC"}}}},components:{VueSlider:b.a},props:{"task-id":{type:String,default:""},duration:{type:Number,default:0}},computed:g({},Object(o["c"])([])),methods:g({},Object(o["b"])([]),{setValue:function(t){this.value=t}}),watch:{value:function(){this.$emit("change",{taskId:this.taskId,duration:this.value})}}},O=k,S=(s("66d4"),s("2877")),w=Object(S["a"])(O,m,_,!1,null,"5d7ea8f4",null),T=w.exports,C=s("e60b");function P(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function E(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?P(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):P(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var j={name:"timesheet-list",components:{Datepicker:d["a"],ProductionNameCell:f["a"],PageSubtitle:p["a"],TableInfo:C["a"],TaskTypeName:h["a"],TimeSliderCell:T},data:function(){return{disabledDates:{from:c()().toDate()},page:1,selectedDate:c()().toDate()}},props:{tasks:{default:function(){return[]},type:Array},doneTasks:{default:function(){return[]},type:Array},isLoading:{default:!1,type:Boolean},isError:{default:!1,type:Boolean},done:{default:!1,type:Boolean},timeSpentMap:{default:function(){},type:Object},timeSpentTotal:{default:0,type:Number},hideDone:{default:!1,type:Boolean}},computed:E({},Object(o["c"])(["nbSelectedTasks","productionMap","taskTypeMap","user"]),{locale:function(){return"fr_FR"===this.user.locale?u["fr"]:u["en"]},displayedTasks:function(){return this.tasks.slice(0,this.page*(l["a"]/2))}}),methods:E({},Object(o["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px");var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.page++},currentDate:function(){return c()().format("LL")},onSliderChange:function(t){this.$emit("time-spent-change",t)},entityPath:function(t){var e=t.sequence_name?"shot":"asset",s={name:e,params:{production_id:t.project_id}};return"asset"===e?s.params.asset_id=t.entity_id:s.params.shot_id=t.entity_id,t.episode_id&&(s.name="episode-".concat(e),s.params.episode_id=t.episode_id),s}}),watch:{selectedDate:function(){this.$emit("date-changed",this.selectedDate)}}},x=j,D=(s("15b1"),Object(S["a"])(x,n,i,!1,null,"2e4dc7d8",null));e["a"]=D.exports},b131:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"validation"},["pie"===t.displayMode?s("div",[s("pie-chart",{attrs:{width:"70px",height:"50px",legend:!1,colors:t.colors,data:t.selectedData}})],1):s("div",t._l(t.selectedData,(function(e){return e[0]?s("div",{key:e[0]},[s("span",{staticClass:"stats-name",style:{color:e[2]}},[t._v("\n       "+t._s(e[0])+"\n      ")]),s("span",[t._v("\n      :\n      ")]),s("span",{staticClass:"stats-value"},[t._v("\n        "+t._s(e[1])+" ("+t._s(t.percent(e[1]))+"%)\n      ")])]):t._e()})),0)])},i=[],a={name:"stats-cell",components:{},props:{colors:{type:Array,required:!0},countMode:{type:String,default:"count"},data:{type:Array,default:function(){return[]}},displayMode:{type:String,default:"pie"},framesData:{type:Array,default:function(){return[]}}},computed:{selectedData:function(){return"frames"===this.countMode?this.framesData:this.data},total:function(){return this.selectedData.reduce((function(t,e){return e[1]?t+e[1]:t}),0)}},methods:{percent:function(t){var e=0;return this.total>0&&(e=t/this.total*100),e.toFixed(2)}}},o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"0b145201",null);e["a"]=c.exports},b244:function(t,e,s){},b4ce:function(t,e,s){},b56c:function(t,e,s){},b6c5:function(t,e,s){},bb21:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isPreview&&t.withLink?s("a",{style:{width:t.emptyWidth+"px",height:t.emptyHeight+"px"},attrs:{href:t.originalPath,target:"_blank"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.thumbnailPath,expression:"thumbnailPath"}],key:t.thumbnailKey,staticClass:"thumbnail-picture",style:t.imgStyle})]):t.isPreview&&!t.withLink?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.thumbnailPath,expression:"thumbnailPath"}],key:t.thumbnailKey,staticClass:"thumbnail-picture",staticStyle:{}}):s("span",{class:{"thumbnail-picture":!0,"thumbnail-empty":!0,square:t.square},style:{width:t.emptyWidth+"px",height:t.emptyHeight+"px"}})},i=[],a=(s("c5f6"),{name:"entity-thumbnail",props:{entity:{default:function(){},type:Object},square:{default:!1,type:Boolean},width:{default:null,type:Number},height:{default:null,type:Number},emptyWidth:{default:50,type:Number},emptyHeight:{default:30,type:Number},previewFileId:{default:null,type:String},withLink:{default:!0,type:Boolean}},computed:{originalPath:function(){return"/api/pictures/originals/preview-files/"+this.entity.preview_file_id+".png"},isPreview:function(){return this.entity.preview_file_id&&this.entity.preview_file_id.length>0},imgStyle:function(){var t={};return this.width&&(t.width=this.width+"px"),this.height&&(t.height=this.height+"px"),t},thumbnailPath:function(){var t=this.previewFileId||this.entity.preview_file_id;return this.square?"/api/pictures/thumbnails-square/preview-files/"+t+".png":"/api/pictures/thumbnails/preview-files/"+t+".png"},thumbnailKey:function(){var t=this.previewFileId||this.entity.preview_file_id;return"thumbnail-".concat(t)}}}),o=a,r=(s("7038"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"35bcb98c",null);e["a"]=c.exports},bc45:function(t,e,s){},bcd2:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var n=function(t,e){var s=Math.round(1/e*100)/100,n=Math.round(t/s),i=n*s;return i=Math.round(100*i)/100,i}},bd43:function(t,e,s){},bd6d:function(t,e,s){},be83:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isWhite?n("div",{staticClass:"has-text-centered",style:t.style},[n("img",{attrs:{src:s("c9e4")}})]):n("div",{staticClass:"has-text-centered",style:t.style},[n("img",{attrs:{src:s("5c3d")}})])},i=[],a=(s("c5f6"),{name:"spinner",data:function(){return{style:{width:this.size?this.size+"px":"auto"}}},props:{isWhite:{type:Boolean,default:!1},size:{type:Number}}}),o=a,r=s("2877"),c=Object(r["a"])(o,n,i,!1,null,"67d74856",null);e["a"]=c.exports},c266:function(t,e,s){"use strict";var n=s("287b"),i=s.n(n);i.a},c54f:function(t,e,s){},c9e4:function(t,e,s){t.exports=s.p+"img/spinner-white.da0c6413.svg"},ca76:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"d",(function(){return o})),s.d(e,"b",(function(){return r})),s.d(e,"c",(function(){return c})),s.d(e,"e",(function(){return d}));s("f559"),s("4917"),s("a481"),s("28a5"),s("ac6a");var n=s("2017"),i=/([^ ]*)=([^ ]*)|\[([^[]*)\]=([^ ]*)/g,a=function(t,e,s){var n={status:!0},i={assignation:!0},a={exclusion:!0},o={descriptor:!0};return e&&e.length>0?t.filter((function(t){var r=!0;return e.forEach((function(e){var c=null;if(!r)return!1;if(e.taskType&&t.validations[e.taskType.id]&&(c=s[t.validations[e.taskType.id]]),n[e.type])r=c&&c.task_status_id===e.taskStatus.id,e.excluding&&(r=!r);else if(i[e.type])r=e.assigned?c&&c.assignees&&c.assignees.length>0:!c||c&&c.assignees&&0===c.assignees.length;else if(a[e.type])r=!e.excludedIds[t.id];else if(o[e.type]){if(t.data&&t.data[e.descriptor.field_name]&&e.value){var d=t.data[e.descriptor.field_name];d=d.toLowerCase(),r=d.indexOf(e.value.toLowerCase())>=0}else r=!1;e.excluding&&(r=!r)}})),r})):t},o=function(t){return t?t.replace(i,"").split(" ").filter((function(t){return t.length>0&&"-"!==t[0]})):[]},r=function(t){return t.replace(i,"").split(" ").filter((function(t){return t.length>0&&"-"===t[0]})).map((function(t){return t.substring(1)}))},c=function(t,e,s,i,a){var o=u(e,s,a),c=l(i,a),d=r(a)||[];return o=o.concat(c),d.forEach((function(e){var s={},i=Object(n["h"])(t,[e])||[];i.forEach((function(t){s[t.id]=!0})),o.push({type:"exclusion",excludedIds:s})})),o},d=function(t,e){var s=[],i=r(e)||[];return i.forEach((function(e){var i={},a=Object(n["h"])(t,[e])||[];a.forEach((function(t){i[t.id]=!0})),s.push({type:"exclusion",excludedIds:i})})),s},u=function(t,e,s){if(!s)return[];var a=[],o=s.match(i),r=Object(n["c"])(t,!1),c={};return e.forEach((function(t){c[t.short_name.toLowerCase()]=t})),o&&o.forEach((function(t){var e=t.split("="),s=e[1],n=s.startsWith("-");n&&(s=s.substring(1));var i=e[0];"["===i[0]&&(i=i.substring(1,i.length-1));var o=r[i.toLowerCase()];o&&("unassigned"===s?a.push({taskType:o[0],assigned:!1,type:"assignation"}):"assigned"===s?a.push({taskType:o[0],assigned:!0,type:"assignation"}):s&&c[s.toLowerCase()]&&a.push({taskType:o[0],taskStatus:c[s.toLowerCase()],type:"status",excluding:n}))})),a},l=function(t,e){if(!e)return[];var s=[],a=e.match(i),o=Object(n["c"])(t,!1);return a&&a.forEach((function(t){var e=t.split("="),n=e[1],i=e[0];"["===i[0]&&(i=i.substring(1,i.length-1));var a=o[i.toLowerCase()],r=n.startsWith("-");r&&(n=n.substring(1)),a&&s.push({descriptor:a[0],value:n,type:"descriptor",excluding:r})})),s}},cb0e:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{ref:"cell",class:{validation:t.selectable&&!t.isCurrentUserClient,selected:t.selectable&t.selected},style:{"border-left":t.isBorder?"1px solid "+t.column.color:"none",background:t.isBorder?t.getBackground():"transparent"},on:{mouseover:t.onMouseOver,mouseout:t.onMouseOut,click:t.onClick}},[t.minimized?s("div",{staticClass:"wrapper"},[s("span",{staticClass:"tag",style:{background:t.backgroundColor,color:t.color}},[t._v("\n       \n    ")])]):s("div",{staticClass:"wrapper"},[t.task?s("span",[s("span",{staticClass:"tag",style:{background:t.backgroundColor,color:t.color}},[t._v("\n        "+t._s(t.taskStatus.short_name)+"\n      ")]),t.isCurrentUserClient?t._e():s("span",{staticClass:"priority"},[t._v("\n        "+t._s(t.priority)+"\n      ")])]):t._e(),t._l(t.assignees,(function(e){return t.isAssignees?s("span",{key:"avatar-"+e,staticClass:"avatar has-text-centered",style:{background:t.personMap[e].color,width:"20px",height:"20px","font-size":"10px"},attrs:{title:t.personMap[e].full_name}},[t.personMap[e].has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatarPath(e),expression:"avatarPath(personId)"}],key:t.avatarKey(e),attrs:{width:"20",height:"20"}}):s("span",[t._v("\n        "+t._s(t.personMap[e].initials)+"\n      ")])]):t._e()}))],2)])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("c5f6"),s("2f62")),r=s("7930");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={name:"validation-cell",data:function(){return{task:null}},components:{},props:{column:{default:null,type:Object},entity:{default:null,type:Object},taskTest:{default:null,type:Object},isBorder:{default:!0,type:Boolean},isStatic:{default:!1,type:Boolean},isAssignees:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},selectable:{default:!0,type:Boolean},clickable:{default:!0,type:Boolean},selected:{default:!1,type:Boolean},rowX:{default:0,type:Number},columnY:{default:0,type:Number}},mounted:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])},computed:d({},Object(o["c"])(["isDarkTheme","isCurrentUserClient","personMap","taskMap","taskStatusMap"]),{assignees:function(){return this.task?this.task.assignees:[]},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""},taskStatus:function(){if(this.task){var t=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[t]:{}}return{}}}),methods:d({},Object(o["b"])([]),{getBackground:function(){if(this.isBorder){var t=this.isDarkTheme?.15:.08;return r["a"].hexToRGBa(this.column.color,t)}return"transparent"},onMouseOver:function(t){if(this.selectable&&!this.selected){var e=this.isDarkTheme?"#878B97":"#CCFFCC";this.changeStyle(e)}},onMouseOut:function(t){if(this.selectable&&!this.selected){var e=this.getBackground();this.changeStyle(e)}},onClick:function(t){this.clickable&&this.select(t)},changeStyle:function(t){var e=this.isBorder?"1px solid "+this.column.color:"none";this.$refs["cell"].style="border-left: ".concat(e,"; background: ").concat(t,";")},select:function(t){var e=!1!==t.isUserClick;this.selectable&&!this.isCurrentUserClient&&(this.$refs.cell&&this.$refs.cell.className.indexOf("selected")<0?this.$emit("select",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:t.ctrlKey,isShiftKey:t.shiftKey,isUserClick:e}):this.$emit("unselect",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:t.ctrlKey,isShiftKey:t.shiftKey,isUserClick:e}))},avatarPath:function(t){var e=this.personMap[t];return e?e.avatarPath+"?unique="+e.uniqueHash:""},avatarKey:function(t){var e=this.personMap[t];return e?e.id+"-"+e.uniqueHash:""}}),watch:{selected:function(){if(this.selected){var t=this.isDarkTheme?"#5E60BA":"#D1C4E9";this.changeStyle(t)}else{var e=this.getBackground(this.column.color);this.changeStyle(e)}},taskTest:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])}}},l=u,p=(s("ff4d"),s("2877")),f=Object(p["a"])(l,n,i,!1,null,"6e35f2c4",null);e["a"]=f.exports},cb88:function(t,e,s){t.exports=s.p+"img/studio_collaboration.1e49fa73.png"},cd0b:function(t,e,s){"use strict";var n=s("ae79"),i=s.n(n);i.a},cd0c:function(t,e,s){"use strict";var n=s("9799"),i=s.n(n);i.a},ce6b:function(t,e,s){"use strict";s("7f7f");var n=s("edbf");e["a"]={getOrganisation:function(){return new Promise((function(t,e){n["a"].get("/api/data/organisations",(function(s,n){if(s)e(s);else{var i={name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:!1,chat_token_slack:""};n.length>0&&(i=n[0]),i.use_original_file_name=i.use_original_file_name?"true":"false",t(i)}}))}))},updateOrganisation:function(t){return new Promise((function(e,s){var i={name:t.name,hours_by_day:t.hours_by_day,use_original_file_name:"true"===t.use_original_file_name,chat_token_slack:t.chat_token_slack};n["a"].put("/api/data/organisations/".concat(t.id),i,(function(t,n){t?s(t):e(n)}))}))},postOrganisationLogo:function(t,e){return new Promise((function(s,i){n["a"].post("/api/pictures/thumbnails/organisations/".concat(t),e,(function(t,e){t?i(t):s(e)}))}))},getPeople:function(t){n["a"].get("/api/data/persons",t)},getPerson:function(t,e){n["a"].get("/api/data/persons/".concat(t),e)},newPerson:function(t){return new Promise((function(e,s){var i={first_name:t.first_name,last_name:t.last_name,email:t.email.trim(),phone:t.phone,role:t.role,active:t.active};n["a"].post("/api/data/persons/new",i,(function(t,n){t?s(t):e(n)}))}))},invitePerson:function(t){return new Promise((function(e,s){n["a"].get("/api/actions/persons/".concat(t.id,"/invite"),(function(n){n?s(n):e(t)}))}))},updatePerson:function(t){return new Promise((function(e,s){var i={first_name:t.first_name,last_name:t.last_name,email:t.email.trim(),phone:t.phone,timezone:t.timezone,locale:t.locale,role:t.role,active:t.active,notifications_enabled:"true"===t.notifications_enabled,notifications_slack_enabled:"true"===t.notifications_slack_enabled,notifications_slack_userid:t.notifications_slack_userid};n["a"].put("/api/data/persons/".concat(t.id),i,(function(t,n){t?s(t):e(n)}))}))},deletePerson:function(t,e){n["a"].del("/api/data/persons/".concat(t),e)},postCsv:function(t,e){n["a"].post("/api/import/csv/persons",t,e)},postAvatar:function(t,e,s){n["a"].post("/api/pictures/thumbnails/persons/".concat(t),e,s)},changePassword:function(t,e){var s={old_password:t.oldPassword,password:t.password,password_2:t.password2};n["a"].post("/api/auth/change-password",s,e)},loadTodos:function(t){n["a"].get("/api/data/user/tasks",t)},loadDone:function(t){n["a"].get("/api/data/user/done-tasks",t)},loadTimeSpents:function(t,e){n["a"].get("/api/data/user/time-spents/".concat(t),e)},getPersonTasks:function(t,e){n["a"].get("/api/data/persons/".concat(t,"/tasks"),e)},getPersonDoneTasks:function(t,e){n["a"].get("/api/data/persons/".concat(t,"/done-tasks"),e)},getUserSearchFilters:function(t){n["a"].get("/api/data/user/filters",t)},createFilter:function(t,e,s,i,a,o){var r={list_type:t,name:e,query:s,entity_type:a,project_id:i};n["a"].post("/api/data/user/filters",r,o)},removeFilter:function(t,e){n["a"].del("/api/data/user/filters/".concat(t.id),e)},getTimeSpents:function(t,e,s){n["a"].get("/api/data/persons/".concat(t,"/time-spents/").concat(e),s)},setTimeSpent:function(t,e,s,i,a){var o={duration:60*i};n["a"].post("/api/actions/tasks/".concat(t,"/time-spents/").concat(s,"/persons/").concat(e),o,a)},getDayTable:function(t,e){return new Promise((function(s,i){n["a"].get("/api/data/persons/time-spents/day-table/".concat(t,"/").concat(e),(function(t,e){t?i(t):s(e)}))}))},getWeekTable:function(t){return new Promise((function(e,s){n["a"].get("/api/data/persons/time-spents/week-table/".concat(t),(function(t,n){t?s(t):e(n)}))}))},getMonthTable:function(t){return new Promise((function(e,s){n["a"].get("/api/data/persons/time-spents/month-table/".concat(t),(function(t,n){t?s(t):e(n)}))}))},getAggregatedPersonTimeSpents:function(t,e,s,i,a,o){return new Promise((function(r,c){var d="/api/data/persons/".concat(t,"/time-spents/");d+="month"===e?"month/".concat(s,"/").concat(i):"week"===e?"week/".concat(s,"/").concat(a):"day/".concat(s,"/").concat(i,"/").concat(o),n["a"].get(d,(function(t,e){t?c(t):r(e)}))}))}}},ce80:function(t,e,s){t.exports=s.p+"img/validated.a1d2a358.png"},d065:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var n={beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{onKeyDown:function(t){"Escape"===t.key&&this.$emit("cancel")}},watch:{active:function(){this.active?window.addEventListener("keydown",this.onKeyDown,!1):window.removeEventListener("keydown",this.onKeyDown)}}}},d114:function(t,e,s){"use strict";var n=s("821b"),i=s.n(n);i.a},d228:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button",attrs:{title:t.buttonTitle},on:{click:function(e){return t.$emit("click")}}},[t.subscribed?s("eye-icon",{staticClass:"icon is-small only-icon"}):s("eye-off-icon",{staticClass:"icon is-small only-icon"})],1)},i=[],a=s("0a35"),o={name:"subscribe-button",components:{EyeIcon:a["l"],EyeOffIcon:a["m"]},props:{subscribed:{default:!1,type:Boolean}},computed:{buttonTitle:function(){return this.subscribed?this.$t("tasks.unsubscribe_notifications"):this.$t("tasks.subscribe_notifications")}}},r=o,c=(s("5bf3"),s("2877")),d=Object(c["a"])(r,n,i,!1,null,"76d14e74",null);e["a"]=d.exports},d339:function(t,e,s){},d5c9:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isError?s("p",{staticClass:"error"},[t._v("\n    "+t._s(t.errorText)+"\n  ")]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading,"is-disabled":t.isDisabled},on:{click:function(e){return t.$emit("confirm")}}},[t._v("\n      "+t._s(t.$t("main.confirmation"))+"\n    ")]),s("button",{staticClass:"button is-link",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n      "+t._s(t.$t("main.cancel"))+"\n    ")])])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var d={name:"modal-footer",components:{},props:{errorText:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},computed:c({},Object(o["c"])([])),methods:c({},Object(o["b"])([])),watch:{}},u=d,l=(s("e70e"),s("2877")),p=Object(l["a"])(u,n,i,!1,null,"7dbe110d",null);e["a"]=p.exports},d8df:function(t,e,s){},d949:function(t,e,s){},dae3:function(t,e,s){},de26:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var n=30},de40:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button",attrs:{title:t.title},on:{click:function(e){return t.$emit("click")}}},["plus"===t.icon?s("plus-icon",{class:t.iconClass}):t._e(),"comment"===t.icon?s("message-square-icon",{class:t.iconClass}):t._e(),"download"===t.icon?s("download-icon",{class:t.iconClass}):t._e(),"upload"===t.icon?s("upload-icon",{class:t.iconClass}):t._e(),"film"===t.icon?s("film-icon",{class:t.iconClass}):t._e(),"play"===t.icon?s("play-icon",{class:t.iconClass}):t._e(),"pause"===t.icon?s("pause-icon",{class:t.iconClass}):t._e(),"edit"===t.icon?s("edit-icon",{class:t.iconClass}):t._e(),"image"===t.icon?s("image-icon",{class:t.iconClass}):t._e(),"maximize"===t.icon?s("maximize-icon",{class:t.iconClass}):t._e(),"delete"===t.icon?s("trash-icon",{class:t.iconClass}):t._e(),"restore"===t.icon?s("rotate-ccw-icon",{class:t.iconClass}):t._e(),"back"===t.icon?s("skip-back-icon",{class:t.iconClass}):t._e(),"forward"===t.icon?s("skip-forward-icon",{class:t.iconClass}):t._e(),"left"===t.icon?s("chevron-left-icon",{class:t.iconClass}):t._e(),"right"===t.icon?s("chevron-right-icon",{class:t.iconClass}):t._e(),"compare"===t.icon?s("copy-icon",{class:t.iconClass}):t._e(),"remove"===t.icon?s("x-icon",{class:t.iconClass}):t._e(),"pencil"===t.icon?s("edit2-icon",{class:t.iconClass}):t._e(),t.isText?s("span",{class:{text:!0,"is-hidden-touch":t.isResponsive}},[t._v("\n    "+t._s(t.text)+"\n  ")]):t._e()],1)},i=[],a=s("0a35"),o={name:"button-simple",components:{ChevronLeftIcon:a["e"],ChevronRightIcon:a["f"],CopyIcon:a["g"],DownloadIcon:a["i"],EditIcon:a["k"],Edit2Icon:a["j"],FilmIcon:a["n"],ImageIcon:a["o"],MaximizeIcon:a["r"],MessageSquareIcon:a["s"],PauseIcon:a["u"],PlayIcon:a["v"],PlusIcon:a["w"],RotateCcwIcon:a["y"],SkipBackIcon:a["B"],SkipForwardIcon:a["C"],TrashIcon:a["E"],UploadIcon:a["F"],XIcon:a["I"]},props:{icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean},text:{default:"",type:String},title:{default:"",type:String}},computed:{isText:function(){return this.text&&this.text.length>0},iconClass:function(){return{icon:!0,"is-small":!0,"only-icon":!this.isText}}}},r=o,c=(s("544d"),s("2877")),d=Object(c["a"])(r,n,i,!1,null,"2976d64c",null);e["a"]=d.exports},dea4:function(t,e,s){"use strict";var n=s("4663"),i=s.n(n);i.a},dfeb:function(t,e,s){"use strict";var n=s("b6c5"),i=s.n(n);i.a},e07d:function(t,e,s){"use strict";s("8e6e"),s("456d");var n,i=s("bd86"),a=(s("20d6"),s("ac6a"),s("7f7f"),s("edbf")),o=function(t){return{name:t.name,short_name:t.short_name,is_reviewable:Boolean("true"===t.is_reviewable),is_done:Boolean("true"===t.is_done),is_retake:Boolean("true"===t.is_retake),is_artist_allowed:Boolean("true"===t.is_artist_allowed),color:t.color}},r={getTaskStatuses:function(t){a["a"].get("/api/data/task-status",t)},getTaskStatus:function(t,e){a["a"].get("/api/data/task-status/".concat(t),e)},newTaskStatus:function(t,e){var s=o(t);a["a"].post("/api/data/task-status/",s,e)},updateTaskStatus:function(t,e){var s=o(t);a["a"].put("/api/data/task-status/".concat(t.id),s,e)},deleteTaskStatus:function(t,e){a["a"].del("/api/data/task-status/".concat(t.id),e)}},c=s("2229"),d=s("9fb0");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(s,!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p={taskStatus:[],taskStatusMap:{}},f=p,h={taskStatus:function(t){return t.taskStatus},taskStatusMap:function(t){return t.taskStatusMap},editTaskStatus:function(t){return t.editTaskStatus},deleteTaskStatus:function(t){return t.deleteTaskStatus},taskStatusForCurrentUser:function(t,e,s,n){return n.isCurrentUserManager?t.taskStatus:t.taskStatus.filter((function(t){return t.is_artist_allowed}))}},m={loadTaskStatuses:function(t,e){var s=t.commit;t.state;s(d["wd"]),r.getTaskStatuses((function(t,n){t?s(d["vd"]):s(d["ud"],n),e&&e(t)}))},loadTaskStatus:function(t,e){var s=t.commit;t.state;r.getTaskStatus(e,(function(t,e){t?console.error(t):s(d["lc"],e)}))},newTaskStatus:function(t,e){var s=t.commit,n=(t.state,e.form),i=e.callback;s(d["nc"],n),r.newTaskStatus(n,(function(t,e){t?s(d["mc"]):s(d["lc"],e),i&&i(t,e)}))},saveTaskStatus:function(t,e){var s=t.commit,n=(t.state,e.form),i=e.callback;s(d["nc"]),r.updateTaskStatus(n,(function(t,e){t?s(d["mc"]):s(d["lc"],e),i&&i(t)}))},deleteTaskStatus:function(t,e){var s=t.commit,n=(t.state,e.taskStatus),i=e.callback;s(d["Ab"]),r.deleteTaskStatus(n,(function(t){t?s(d["zb"]):s(d["yb"],n),i&&i(t)}))}},_=(n={},Object(i["a"])(n,d["wd"],(function(t){t.taskStatus=[],t.taskStatusMap={}})),Object(i["a"])(n,d["vd"],(function(t){t.taskStatus=[],t.taskStatusMap={}})),Object(i["a"])(n,d["ud"],(function(t,e){t.taskStatus=Object(c["c"])(e),t.taskStatusMap={},e.forEach((function(e){null===e.is_artist_allowed&&(e.is_artist_allowed=!0),t.taskStatusMap[e.id]=e}))})),Object(i["a"])(n,d["nc"],(function(t,e){})),Object(i["a"])(n,d["mc"],(function(t){})),Object(i["a"])(n,d["lc"],(function(t,e){var s=t.taskStatusMap[e.id];s&&s.id?Object.assign(s,e):(t.taskStatus.push(e),t.taskStatus=Object(c["c"])(t.taskStatus)),t.taskStatusMap[e.id]=e})),Object(i["a"])(n,d["Ab"],(function(t){})),Object(i["a"])(n,d["zb"],(function(t){})),Object(i["a"])(n,d["yb"],(function(t,e){var s=t.taskStatus.findIndex((function(t){return t.id===e.id}));s>=0&&t.taskStatus.splice(s,1),delete t.taskStatusMap[e.id]})),Object(i["a"])(n,d["ue"],(function(t){Object.assign(t,l({},p))})),n);e["a"]={state:f,getters:h,actions:m,mutations:_}},e211:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-link",{staticClass:"button",attrs:{title:t.title,to:t.path}},[t.icon.length>0&&t.icon.startsWith("fa")?s("span",{staticClass:"icon is-small"},[s("i",{class:"fa "+t.icon})]):t._e(),"plus"===t.icon?s("plus-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"download"===t.icon?s("download-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"upload"===t.icon?s("upload-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"edit"===t.icon?s("edit-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"delete"===t.icon?s("trash-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"restore"===t.icon?s("rotate-ccw-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.isText?s("span",{class:{text:!0,"is-hidden-touch":t.isResponsive}},[t._v("\n    "+t._s(t.text)+"\n  ")]):t._e()],1)},i=[],a=s("0a35"),o={name:"button-link",components:{DownloadIcon:a["i"],EditIcon:a["k"],PlusIcon:a["w"],RotateCcwIcon:a["y"],TrashIcon:a["E"],UploadIcon:a["F"]},props:{text:{default:"",type:String},title:{default:"",type:String},path:{default:""},icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean}},computed:{isText:function(){return this.text&&this.text.length>0}}},r=o,c=(s("8f49"),s("2877")),d=Object(c["a"])(r,n,i,!1,null,"143e1424",null);e["a"]=d.exports},e446:function(t,e,s){},e4ed:function(t,e,s){},e590:function(t,e,s){},e5b1:function(t,e,s){"use strict";var n=s("bd43"),i=s.n(n);i.a},e60b:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("spinner",{staticClass:"table-info"}):t._e(),t.isError?s("div",{staticClass:"has-text-centered table-info"},[s("span",{staticClass:"tag is-danger"},[t._v("\n      "+t._s(t.$t("main.loading_error"))+"\n    ")])]):t._e()],1)},i=[],a=s("be83"),o={name:"table-footer",components:{Spinner:a["a"]},props:{isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}}},r=o,c=s("2877"),d=Object(c["a"])(r,n,i,!1,null,"50ed1a32",null);e["a"]=d.exports},e632:function(t,e,s){"use strict";var n=s("586b"),i=s.n(n);i.a},e70e:function(t,e,s){"use strict";var n=s("d339"),i=s.n(n);i.a},e739:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list task-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[t._v("\n            "+t._s(t.$t("tasks.fields.production"))+"\n          ")]),s("th",{ref:"th-type",staticClass:"type"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"thumbnail"}),s("th",{ref:"th-name",staticClass:"name"},[t._v("\n            "+t._s(t.$t("tasks.fields.entity"))+"\n          ")]),s("th",{staticClass:"description"},[t._v("\n            "+t._s(t.$t("assets.fields.description"))+"\n          ")]),s("th",{staticClass:"estimation"},[t._v("\n            "+t._s(t.$t("tasks.fields.estimation").substring(0,3))+".\n          ")]),s("th",{staticClass:"status"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_status"))+"\n          ")]),t.done?s("th",{staticClass:"end-date"},[t._v("\n            "+t._s(t.$t("tasks.fields.end_date"))+"\n          ")]):s("th",{staticClass:"last-comment"},[t._v("\n            "+t._s(t.$t("tasks.fields.last_comment"))+"\n          ")])])])])]),t.tasks.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},t._l(t.displayedTasks,(function(e,n){return s("tr",{key:e+"-"+n,class:{selected:!(!t.selectionGrid||!t.selectionGrid[n])&&t.selectionGrid[n][0]},on:{click:function(e){return t.onLineClicked(n,e)}}},[s("production-name-cell",{staticClass:"production",attrs:{"is-tooltip":!0,entry:t.productionMap[e.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":e.project_id,entry:t.getTaskType(e)}}),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{"empty-width":60,"empty-height":40,entity:{preview_file_id:e.entity_preview_file_id}}})],1),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:t.entityPath(e)}},[t._v("\n              "+t._s(e.full_entity_name)+"\n            ")])],1),s("description-cell",{staticClass:"description",attrs:{entry:{description:e.entity_description}}}),s("td",{staticClass:"estimation"},[t._v("\n            "+t._s(t.formatDuration(e.estimation))+"\n          ")]),s("validation-cell",{ref:"validation-"+n+"-0",refInFor:!0,staticClass:"status unselectable",attrs:{"task-test":e,"is-border":!1,"is-assignees":!1,selectable:!t.done,clickable:!1,selected:!(!t.selectionGrid||!t.selectionGrid[n])&&t.selectionGrid[n][0],rowX:n,columnY:0,column:e.taskStatus},on:{select:t.onTaskSelected,unselect:t.onTaskUnselected}}),t.done?s("td",{staticClass:"end-date"},[t._v("\n            "+t._s(t.formatDate(e.end_date))+"\n          ")]):s("last-comment-cell",{staticClass:"last-comment",attrs:{task:e}})],1)})),0)])]):t._e(),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),0!==t.tasks.length||t.isLoading?t._e():s("div",{staticClass:"has-text-centered empty-list"},[t._m(0),s("p",[t._v("\n      "+t._s(t.$t("people.no_task_assigned"))+"\n    ")])]),t.tasks.length&&!t.isLoading?s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.tasks.length)+" "+t._s(t.$tc("tasks.tasks",t.tasks.length))+"\n  ")]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("img",{attrs:{src:s("f64c")}})])}],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),o=s("2f62"),r=s("7f45"),c=s.n(r),d=s("bb21"),u=s("58f5"),l=s("e60b"),p=s("0fcb"),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("div",{staticClass:"flexrow"},[t.task.last_comment.person?s("people-avatar",{staticClass:"flexrow-item avatar-wrapper",attrs:{size:25,"font-size":14,person:t.task.last_comment.person}}):s("span",{staticClass:"no-avatar"},[t._v("\n       \n    ")]),t.commentText&&t.commentText.length>0?s("span",{staticClass:"flexrow-item last-comment pointer",domProps:{innerHTML:t._s(t.compileMarkdown(t.commentText))},on:{click:t.onClick}}):t.task.last_comment.person?s("span",{staticClass:"flexrow-item last-comment no-comment"},[t._v("\n      "+t._s(t.$t("main.empty_comment"))+"\n    ")]):t._e()],1)])},h=[],m=s("0e54"),_=s.n(m),v=s("eb8c");function b(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function y(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?b(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):b(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var g={name:"last-comment-cell",components:{PeopleAvatar:v["a"]},data:function(){return{isOpen:!1,timeout:null}},props:["task"],computed:y({},Object(o["c"])([]),{commentText:function(){var t=this.task.last_comment.text,e=140,s=t||"";return void 0!==t&&t.length>e&&(s=t.slice(0,e)+"..."),s}}),methods:y({},Object(o["b"])([]),{compileMarkdown:function(t){return _()(t||"")},onClick:function(){this.isOpen=!this.isOpen}})},k=g,O=(s("8ab4"),s("2877")),S=Object(O["a"])(k,f,h,!1,null,"7c166565",null),w=S.exports,T=s("09a4"),C=s("cb0e"),P=s("1338"),E=s("4f18"),j=s("de26");function x(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function D(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?x(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):x(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var A={name:"todos-list",mixins:[E["a"],P["a"]],components:{EntityThumbnail:d["a"],DescriptionCell:p["a"],LastCommentCell:w,ProductionNameCell:T["a"],TableInfo:l["a"],TaskTypeName:u["a"],ValidationCell:C["a"]},props:["done","tasks","isLoading","isError","selectionGrid"],data:function(){return{page:1}},mounted:function(){this.page=1,this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:D({},Object(o["c"])(["nbSelectedTasks","taskTypeMap","productionMap"]),{displayedTasks:function(){return this.tasks.slice(0,this.page*j["a"])}}),methods:D({},Object(o["b"])([]),{setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},formatDate:function(t){return t?c()(t).fromNow():""},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.page++},onLineClicked:function(t,e){var s="validation-"+t+"-0",n=this.$refs[s][0];n.select(e)},onTaskSelected:function(t){var e=this;if(t.isShiftKey){if(this.lastSelection){var s=this.lastSelection.x,n=t.x;t.x<this.lastSelection.x&&(s=t.x,n=this.lastSelection.x);for(var i=s;i<=n;i++){var a="validation-"+i+"-0",o=this.$refs[a][0];this.selectionGrid[i][0]||o.select({ctrlKey:!0,isUserClick:!1})}}}else t.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(this.$store.commit("ADD_SELECTED_TASK",t),!t.isShiftKey&&t.isUserClick){var r=t.x,c=0;this.lastSelection={x:r,y:c};var d="validation-"+r+"-"+c,u=this.$refs[d][0];this.$nextTick((function(){e.scrollToValidationCell(u)}))}},onTaskUnselected:function(t){t.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",t):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",t):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",t))},getTaskType:function(t){var e=this.taskTypeMap[t.task_type_id],s=this.productionMap[t.project_id];return e.episode_id=t.episode_id,s&&"tvshow"===s.production_type&&!t.episode_id&&(e.episode_id=s.first_episode_id),e},entityPath:function(t){var e=t.sequence_name?"shot":"asset",s={name:e,params:{production_id:t.project_id}};"asset"===e?s.params.asset_id=t.entity_id:s.params.shot_id=t.entity_id;var n=this.productionMap[t.project_id],i=t.episode_id;return n&&"tvshow"===n.production_type&&!i&&(i=n.first_episode_id),i&&(s.name="episode-".concat(e),s.params.episode_id=i),s},onKeyDown:function(t){var e=this.lastSelection?this.lastSelection:{x:0,y:0},s=e.x,n=e.y,i=null;t.ctrlKey&&(37===t.keyCode?i=this.select(s,n-1):38===t.keyCode?i=this.select(s-1,n):39===t.keyCode?i=this.select(s,n+1):40===t.keyCode&&(i=this.select(s+1,n)),this.scrollToValidationCell(i))},scrollToValidationCell:function(t){if(t){var e=20,s=t.$el.getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),i=s.bottom>n.bottom-e,a=s.top<n.top+e,o=s.right>n.right-e,r=s.left<n.left+e;if(i){var c=s.bottom-n.bottom+e;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var d=n.top-s.top+e;this.setScrollPosition(this.$refs.body.scrollTop-d)}if(o){var u=s.right-n.right+e;this.setScrollLeftPosition(this.$refs.body.scrollLeft+u)}else if(r){var l=n.left-s.left+e;this.setScrollLeftPosition(this.$refs.body.scrollLeft-l)}}},select:function(t,e){var s="validation-"+t+"-"+e,n=this.$refs[s];return n&&n[0].$el.click(),n?n[0]:0},resizeHeaders:function(){var t=this,e=this.$refs["body-tbody"],s=e&&e.children;if(s){var n=e.children[0],i=[{index:1,name:"type"},{index:3,name:"name"}];i.forEach((function(e){var s=Math.max(n.children[e.index].offsetWidth,100);t.$refs["th-"+e.name].style["min-width"]="".concat(s,"px")}))}}})},M=A,L=(s("0b2a"),Object(O["a"])(M,n,i,!1,null,"27278d2d",null));e["a"]=L.exports},e8e9:function(t,e,s){},e990:function(t,e,s){},e9c6:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));s("ac6a"),s("7f7f"),s("55dd");var n=s("75fc"),i=s("7930"),a=s("ba4c"),o=s.n(a),r={created:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)},mounted:function(){this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{sortedValidationColumns:function(){var t=this,e=Object(n["a"])(this.validationColumns);return this.assetFilledColumns?e=e.filter((function(e){return t.assetFilledColumns[e]})):this.shotFilledColumns&&(e=e.filter((function(e){return t.shotFilledColumns[e]}))),e.sort((function(e,s){var n=t.taskTypeMap[e],i=t.taskTypeMap[s];return n.priority===i.priority?n.name.localeCompare(i):n.priority>i.priority?1:-1}))}},methods:{getBackground:function(t){return i["a"].hexToRGBa(t,.08)},buildHideKey:function(t){return"column-".concat(this.currentProduction.id,"-").concat(t)},initHiddenColumns:function(t,e){var s=this;t&&e&&t.forEach((function(t){var n=s.buildHideKey(t);o.a.set(e,t,"true"===localStorage.getItem(n))}))},hideColumn:function(t){var e=this.buildHideKey(t),s=!0;return"true"===localStorage.getItem(e)&&(s=!1),localStorage.setItem(e,s),o.a.set(this.hiddenColumns,t,s),this.hiddenColumns[t]=s,s},setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},setScrollLeftPosition:function(t){this.$refs.body&&(this.$refs.body.scrollLeft=t)},getValidationStyle:function(t){var e=this.taskTypeMap[t];return{"border-left":"1px solid ".concat(e.color),background:this.getBackground(e.color)}},onTaskSelected:function(t){var e=this,s=[];if(t.isShiftKey){if(this.lastSelection){var n=this.lastSelection.x,i=t.x,a=this.lastSelection.y,o=t.y,r=this.assetSelectionGrid;r||(r=this.shotSelectionGrid),t.x<this.lastSelection.x&&(n=t.x,i=this.lastSelection.x),t.y<this.lastSelection.y&&(a=t.y,o=this.lastSelection.y);for(var c=n;c<=i;c++)for(var d=a;d<=o;d++){var u="validation-"+c+"-"+d,l=this.$refs[u][0];r[c][d]||s.push({entity:l.entity,column:l.column,task:l.task,x:l.rowX,y:l.columnY})}this.$store.commit("ADD_SELECTED_TASK",t)}}else t.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(0===s.length?this.$store.commit("ADD_SELECTED_TASK",t):this.$store.commit("ADD_SELECTED_TASKS",s),!t.isShiftKey&&t.isUserClick){var p=t.x,f=t.y;this.lastSelection={x:p,y:f};var h="validation-"+p+"-"+f,m=this.$refs[h][0];this.$nextTick((function(){e.scrollToValidationCell(m)}))}},onTaskUnselected:function(t){t.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",t):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",t):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",t))},showHeaderMenu:function(t,e){var s=this.$refs.headerMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var n=e.srcElement.parentNode.parentNode;"TH"!==n.tagName&&(n=n.parentNode);var i=n.getBoundingClientRect(),a=i.left+11,o=i.bottom+10,r=Math.max(100,i.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastHeaderMenuDisplayed=t},showMetadataHeaderMenu:function(t,e){var s=this.$refs.headerMetadataMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var n=e.srcElement.parentNode.parentNode,i=n.getBoundingClientRect(),a=i.left+11,o=i.bottom+10,r=Math.max(100,i.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastMetadaDataHeaderMenuDisplayed=t},onMinimizeColumnToggled:function(){this.hideColumn(this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onDeleteAllTasksClicked:function(){this.$emit("delete-all-tasks",this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onAddMetadataClicked:function(){this.$emit("add-metadata")},onEditMetadataClicked:function(){this.$emit("edit-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},onDeleteMetadataClicked:function(){this.$emit("delete-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},resizeSplittedTableHeaders:function(t){var e=this;if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].length>0&&this.$refs["body-tbody"][0].children.length>1){var s=this.$refs["body-tbody"][0].children[1];t.forEach((function(t){var n=s.children[t.index].offsetWidth;e.$refs["th-"+t.name]&&(e.$refs["th-"+t.name].style["min-width"]="".concat(n,"px"))}))}}}}},eae5:function(t,e,s){"use strict";var n=s("1e0e"),i=s.n(n);i.a},eb8c:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isLink?s("span",{staticClass:"avatar has-text-centered",style:{background:t.person.color,width:t.size+"px",height:t.size+"px","min-width":t.size+"px","min-height":t.size+"px","font-size":t.person.has_avatar?0:t.fontSize+"px"}},[s("router-link",{staticClass:"avatar-link",attrs:{to:{name:"person",params:{person_id:t.person.id}},title:t.person.full_name}},[t.person.has_avatar&&t.noCache?s("img",{attrs:{src:t.avatarPath}}):t.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatarPath,expression:"avatarPath"}],key:t.avatarKey}):t._e(),t.person.has_avatar?t._e():s("span",[t._v("\n       "+t._s(t.initials)+"\n      ")])])],1):s("span",{staticClass:"avatar has-text-centered",style:{background:t.person.color,width:t.size+"px",height:t.size+"px","font-size":t.fontSize+"px"},attrs:{title:t.person.full_name}},[t.person.has_avatar&&t.noCache?s("img",{attrs:{src:t.avatarPath}}):t.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatarPath,expression:"avatarPath"}],key:t.avatarKey}):s("span",[t._v("\n    "+t._s(t.initials)+"\n  ")])])},i=[],a=(s("c5f6"),{name:"person-avatar",data:function(){return{avatarPath:"",avatarKey:"",initials:""}},props:{person:{type:Object,default:function(){return{id:"empty",color:"#FFF"}}},size:{type:Number,default:40},"font-size":{type:Number,default:18},"is-link":{type:Boolean,default:!0},"no-cache":{type:Boolean,default:!1}},created:function(){this.reloadAvatar()},methods:{reloadAvatar:function(){this.avatarPath=this.person.avatarPath+"?unique="+this.person.uniqueHash,this.avatarKey=this.person.id+"-"+this.person.uniqueHash}},mounted:function(){this.initials=this.person.initials},watch:{person:function(){this.reloadAvatar()},"person.uniqueHash":function(){this.reloadAvatar()}}}),o=a,r=(s("dfeb"),s("2877")),c=Object(r["a"])(o,n,i,!1,null,"498f1c85",null);e["a"]=c.exports},ec7b:function(t,e,s){},edbf:function(t,e,s){"use strict";var n=s("db82"),i=s.n(n),a=(s("a481"),{backToLogin:function(){"/login"!==window.location&&window.location.replace("/login")}}),o=a,r={get:function(t,e){i.a.get(t).end((function(t,s){e(t,s.body)}))},post:function(t,e,s){i.a.post(t).send(e).end((function(t,e){if(401===e.statusCode)return o.backToLogin();s(t,e.body)}))},put:function(t,e,s){i.a.put(t).send(e).end((function(t,e){if(401===e.statusCode)return o.backToLogin();s(t,e.body)}))},del:function(t,e){i.a.del(t).end((function(t,s){if(401===s.statusCode)return o.backToLogin();e(t,s.body)}))},pget:function(t){return new Promise((function(e,s){r.get(t,(function(t,n){t?s(t):e(n)}))}))},ppost:function(t,e,s){return new Promise((function(s,n){i.a.post(t).send(e).end((function(t,e){401===e.statusCode?(o.backToLogin(),n(t)):t?n(t):s(e.body)}))}))},pput:function(t,e,s){return new Promise((function(s,n){i.a.put(t).send(e).end((function(t,e){401===e.statusCode?(o.backToLogin(),n(t)):t?n(t):s(e.body)}))}))},getModel:function(t,e){return new Promise((function(s,n){var i="/api/data/".concat(t,"/").concat(e);r.get(i,(function(t,e){t?n(t):s(e)}))}))}};e["a"]=r},ee35:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[t.isEditing?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("tasks.change_preview"))+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("tasks.add_preview"))+"\n      ")]),s("p",[t._v("\n        "+t._s(t.$t("tasks.select_preview_file"))+"\n      ")]),s("file-upload",{ref:"preview-field",attrs:{accept:t.extensions},on:{fileselected:t.onFileSelected}}),t.isError?s("p",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("tasks.add_preview_error"))+"\n      ")]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading,"is-disabled":void 0==t.formData},on:{click:function(e){return t.$emit("confirm")}}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("button",{staticClass:"button is-link",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])])],1)])])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("4085");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={name:"add-preview-modal",components:{FileUpload:r["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},extensions:{type:String,default:".png,.jpg,.mp4,.mov,.obj,.pdf,.ma,.mb,.zip,.rar,.jpeg,.blend,.wmv,.m4v,.ai,.comp,.exr,.psd,.hip"}},data:function(){return{formData:null}},mounted:function(){this.formData=null},computed:d({},Object(o["c"])([])),methods:d({},Object(o["b"])([]),{onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},reset:function(){this.$refs["preview-field"].reset(),this.formData=null}}),watch:{active:function(){this.reset()}}},l=u,p=(s("7c8c"),s("2877")),f=Object(p["a"])(l,n,i,!1,null,"589bb067",null);e["a"]=f.exports},eef8:function(t,e,s){"use strict";var n=s("f547"),i=s.n(n);i.a},ef8b:function(t,e,s){"use strict";s("8e6e"),s("20d6"),s("ac6a"),s("456d"),s("7f7f");var n,i=s("bd86"),a=s("ba4c"),o=s.n(a),r=(s("c5f6"),s("edbf")),c={getTaskTypes:function(t){r["a"].get("/api/data/task-types",t)},newTaskType:function(t,e){var s={name:t.name,color:t.color,priority:Number(t.priority),for_shots:Boolean("true"===t.for_shots),allow_timelog:Boolean("true"===t.allow_timelog)};r["a"].post("/api/data/task-types/",s,e)},updateTaskType:function(t,e){var s={name:t.name,color:t.color,priority:Number(t.priority),for_shots:Boolean("true"===t.for_shots),allow_timelog:Boolean("true"===t.allow_timelog)};r["a"].put("/api/data/task-types/".concat(t.id),s,e)},deleteTaskType:function(t,e){r["a"].del("/api/data/task-types/".concat(t.id),e)},getTaskType:function(t,e){r["a"].get("/api/data/task-types/".concat(t),e)},getSequenceSubscriptions:function(t,e,s){r["a"].get("/api/data/user/projects/".concat(t,"/task-types/").concat(e,"/")+"sequence-subscriptions",s)}},d=s("2229"),u=s("9fb0");function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(s,!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var f={taskTypes:[],taskTypeMap:{},sequenceSubscriptions:{},editTaskType:{isLoading:!1,isError:!1},deleteTaskType:{isLoading:!1,isError:!1}},h=p({},f),m={taskTypes:function(t){return t.taskTypes},taskTypeMap:function(t){return t.taskTypeMap},sequenceSubscriptions:function(t){return t.sequenceSubscriptions},editTaskType:function(t){return t.editTaskType},deleteTaskType:function(t){return t.deleteTaskType},currentTaskType:function(t,e,s){return t.taskTypeMap[s.route.params.task_type_id]||{}},getTaskTypeOptions:function(t){return t.taskTypes.map((function(t){return{label:t.name,value:t.id}}))},getAssetTaskTypeOptions:function(t){return t.taskTypes.filter((function(t){return!t.for_shots})).map((function(t){return{label:t.name,value:t.id}}))},getShotTaskTypeOptions:function(t){return t.taskTypes.filter((function(t){return t.for_shots})).map((function(t){return{label:t.name,value:t.id}}))},getTaskType:function(t,e){return function(e){return t.taskTypeMap[e]}}},_={loadTaskTypes:function(t,e){var s=t.commit;t.state;s(u["Ad"]),c.getTaskTypes((function(t,n){t?s(u["zd"]):s(u["yd"],n),e&&e(t)}))},loadTaskType:function(t,e){var s=t.commit;t.state;c.getTaskType(e,(function(t,e){t?console.error(t):s(u["oc"],e)}))},newTaskType:function(t,e){var s=t.commit;t.state;s(u["qc"],e.data),c.newTaskType(e.data,(function(t,n){t?s(u["pc"]):s(u["oc"],n),e.callback&&e.callback(t)}))},editTaskType:function(t,e){var s=t.commit;t.state;s(u["qc"]),c.updateTaskType(e.data,(function(t,n){t?s(u["pc"]):s(u["oc"],n),e.callback&&e.callback(t)}))},deleteTaskType:function(t,e){var s=t.commit;t.state;s(u["Db"]);var n=e.taskType;c.deleteTaskType(n,(function(t){t?s(u["Cb"]):s(u["Bb"],n),e.callback&&e.callback(t)}))},initTaskType:function(t,e){var s=t.commit,n=t.dispatch,i=(t.state,t.rootState,t.rootGetters);return new Promise((function(t,a){i.currentTaskType.for_shots?c.getSequenceSubscriptions(i.currentProduction.id,i.currentTaskType.id,(function(o,r){o?a(o):(s(u["kd"],r),Object.keys(i.shotMap).length<2||e?0===i.episodes.length&&i.isTVShow?n("loadEpisodes",(function(e){e?a(e):n("loadShots",(function(e){e?a(e):t()}))})):n("loadShots",(function(e){e?a(e):t()})):t())})):Object.keys(i.assetMap).length<2||e?n("loadAssets",(function(e){e?a(e):t()})):t()}))}},v=(n={},Object(i["a"])(n,u["Ad"],(function(t){})),Object(i["a"])(n,u["zd"],(function(t){t.taskTypes=[],t.taskTypeMap={}})),Object(i["a"])(n,u["yd"],(function(t,e){t.taskTypes=Object(d["k"])(e),t.taskTypeMap={},e.forEach((function(e){t.taskTypeMap[e.id]=e}))})),Object(i["a"])(n,u["qc"],(function(t,e){t.editTaskType.isLoading=!0,t.editTaskType.isError=!1})),Object(i["a"])(n,u["pc"],(function(t){t.editTaskType.isLoading=!1,t.editTaskType.isError=!0})),Object(i["a"])(n,u["oc"],(function(t,e){var s=m.getTaskType(t)(e.id);s&&s.id?Object.assign(s,e):(t.taskTypes.push(e),t.taskTypes=Object(d["k"])(t.taskTypes)),t.taskTypeMap[e.id]=e,t.editTaskType={isLoading:!1,isError:!1}})),Object(i["a"])(n,u["Db"],(function(t){t.deleteTaskType={isLoading:!0,isError:!1}})),Object(i["a"])(n,u["Cb"],(function(t){t.deleteTaskType={isLoading:!1,isError:!0}})),Object(i["a"])(n,u["Bb"],(function(t,e){var s=t.taskTypes.findIndex((function(t){return t.id===e.id}));s>=0&&t.taskTypes.splice(s,1),delete t.taskTypeMap[e.id],t.deleteTaskType={isLoading:!1,isError:!1}})),Object(i["a"])(n,u["jd"],(function(t,e){var s=e.sequenceId,n=e.subscribed;o.a.set(t.sequenceSubscriptions,s,n)})),Object(i["a"])(n,u["kd"],(function(t,e){t.sequenceSubscriptions={},e.forEach((function(e){t.sequenceSubscriptions[e]=!0}))})),Object(i["a"])(n,u["ue"],(function(t){Object.assign(t,p({},f))})),n);e["a"]={state:h,getters:m,actions:_,mutations:v}},efab:function(t,e,s){"use strict";var n=s("2838"),i=s.n(n);i.a},f38a:function(t,e,s){},f4d2:function(t,e,s){"use strict";var n=s("1736"),i=s.n(n);i.a},f52f:function(t,e,s){"use strict";var n=s("dae3"),i=s.n(n);i.a},f547:function(t,e,s){},f64c:function(t,e,s){t.exports=s.p+"img/empty_todo.1f922c20.png"},f8b1:function(t,e,s){"use strict";var n=s("8ecf"),i=s.n(n);i.a},f95d:function(t,e,s){},fb36:function(t,e,s){"use strict";var n=s("3521"),i=s.n(n);i.a},fb8a:function(t,e,s){"use strict";var n=s("ff81"),i=s.n(n);i.a},fd61:function(t,e,s){"use strict";var n=s("9856"),i=s.n(n);i.a},fe13:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[t.minimized?s("span",[t.isStatic||t.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:t.backgroundColor,color:t.color,cursor:t.cursor}},[t._v("\n       \n    ")]):s("router-link",{staticClass:"tag dynamic",style:{background:t.backgroundColor,color:t.color},attrs:{to:t.taskPath(t.task)}},[t._v("\n        \n    ")])],1):s("span",[t.isStatic||t.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:t.backgroundColor,color:t.color,cursor:t.cursor}},[t._v("\n      "+t._s(t.taskStatus.short_name)+"\n    ")]):s("router-link",{staticClass:"tag dynamic",style:{background:t.backgroundColor,color:t.color},attrs:{to:t.taskPath(t.task)}},[t._v("\n      "+t._s(t.taskStatus.short_name)+"\n    ")]),t.isPriority&&!t.isCurrentUserClient?s("span",{staticClass:"priority"},[t._v("\n      "+t._s(t.priority)+"\n    ")]):t._e()],1)])},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62"),r=s("7930");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={name:"validation-tag",props:{task:{default:function(){},type:Object},isStatic:{default:!1,type:Boolean},isPriority:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},pointer:{default:!1,type:Boolean}},computed:d({},Object(o["c"])(["currentEpisode","currentProduction","isDarkTheme","isTVShow","taskMap","taskStatusMap","taskTypeMap","isCurrentUserClient"]),{cursor:function(){return this.pointer?"pointer":"default"},taskStatus:function(){if(this.task){var t=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[t]:{}}return{}},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""}}),methods:{taskPath:function(t){var e=this.task.project_id?this.task.project_id:this.currentProduction.id,s={name:"task",params:{production_id:e,task_id:t.id}};this.isTVShow&&this.currentEpisode&&(s.name="episode-task",s.params.episode_id=t.episode_id||this.currentEpisode.id);var n=this.taskTypeMap[t.task_type_id];return s.params.type=n.for_shots?"shots":"assets",s}}},l=u,p=(s("e632"),s("2877")),f=Object(p["a"])(l,n,i,!1,null,"f7d9b4a2",null);e["a"]=f.exports},fef0:function(t,e,s){},ff4d:function(t,e,s){"use strict";var n=s("0084"),i=s.n(n);i.a},ff81:function(t,e,s){},ffff1:function(t,e,s){"use strict";var n=s("91c2"),i=s.n(n);i.a}});
//# sourceMappingURL=app.1d49991a.js.map