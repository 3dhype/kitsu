(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e61bcc0"],{"0e54d":function(e,t,a){},"2b61":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{modal:!0,"is-active":e.active}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-content"},[a("div",{staticClass:"box content"},[a("h1",{staticClass:"title"},[e._v("\n        "+e._s(e.title)+"\n      ")]),a("p",[e._v("\n        "+e._s(e.$t("main.csv.select_file"))+"\n      ")]),a("file-upload",{ref:"uploadAvatarField",attrs:{accept:".png,.jpg,.jpeg"},on:{fileselected:e.onFileSelected}}),e.isError?a("p",{staticClass:"error"},[e._v("\n        "+e._s(e.$t("profile.avatar.error_upload"))+"\n      ")]):e._e(),a("modal-footer",{attrs:{"error-text":e.$t("productions.metadata.error"),"is-loading":e.isLoading,"is-disabled":!e.formData},on:{confirm:e.onConfirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])},s=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=a("2f62"),r=a("d065"),l=a("4085"),c=a("d5c9");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"change-avatar-modal",mixins:[r["a"]],components:{FileUpload:l["a"],ModalFooter:c["a"]},props:["active","cancelRoute","isLoading","isError","title"],data:function(){return{formData:null}},computed:f({},Object(i["c"])([])),methods:f({},Object(i["b"])([]),{onFileSelected:function(e){this.formData=e,this.$emit("fileselected",e)},onConfirmClicked:function(){this.$emit("confirm",this.formData)}}),watch:{active:function(){this.formData=null,this.$refs.uploadAvatarField.reset()}}},u=p,m=(a("cd92"),a("2877")),v=Object(m["a"])(u,o,s,!1,null,"d5870568",null);t["a"]=v.exports},"421c":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile page"},[a("div",{staticClass:"profile-content"},[a("div",{staticClass:"has-text-centered profile-header"},[a("div",{staticClass:"profile-header-content has-text-centered"},[a("people-avatar",{ref:"avatar",attrs:{"no-cache":!0,person:this.user,size:150,"font-size":60}}),e.isLdap?e._e():a("p",[a("button",{staticClass:"button is-link change-avatar-button",on:{click:e.showAvatarModal}},[e._v("\n          "+e._s(e.$t("profile.change_avatar"))+"\n          ")])]),a("h1",[e._v("\n        "+e._s(e.$t("profile.title"))+"\n        ")])],1)]),a("div",{staticClass:"profile-body"},[a("h2",[e._v("\n        "+e._s(e.$t("profile.info_title"))+"\n      ")]),a("text-field",{attrs:{label:e.$t("people.fields.first_name"),disabled:e.isLdap},model:{value:e.form.first_name,callback:function(t){e.$set(e.form,"first_name",t)},expression:"form.first_name"}}),a("text-field",{attrs:{label:e.$t("people.fields.last_name"),disabled:e.isLdap},model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}}),a("text-field",{attrs:{label:e.$t("people.fields.email"),disabled:e.isLdap},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("text-field",{attrs:{label:e.$t("people.fields.phone")},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[e._v("\n          "+e._s(e.$t("profile.timezone"))+"\n        ")]),a("span",{staticClass:"select is-medium"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.timezone,expression:"form.timezone"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"timezone",t.target.multiple?a:a[0])}}},e._l(e.timezones,(function(t){return a("option",{key:t},[e._v("\n              "+e._s(t)+"\n            ")])})),0)])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[e._v("\n          "+e._s(e.$t("profile.language"))+"\n        ")]),a("span",{staticClass:"select is-medium"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.locale,expression:"form.locale"}],domProps:{value:e.form.locale},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"locale",t.target.multiple?a:a[0])},e.localeChanged]}},[a("option",{attrs:{value:"en_US"}},[e._v("English")]),a("option",{attrs:{value:"fr_FR"}},[e._v("French")]),a("option",{attrs:{value:"de_DE"}},[e._v("German")]),a("option",{attrs:{value:"es_ES"}},[e._v("Spanish")]),a("option",{attrs:{value:"zh_Hans_CN"}},[e._v("Chinese")])])])]),a("div",{staticClass:"field"},[a("combobox-boolean",{attrs:{label:e.$t("profile.notifications_enabled")},model:{value:e.form.notifications_enabled,callback:function(t){e.$set(e.form,"notifications_enabled",t)},expression:"form.notifications_enabled"}})],1),a("div",{staticClass:"field"},[a("combobox-boolean",{attrs:{label:e.$t("profile.notifications_slack_enabled")},model:{value:e.form.notifications_slack_enabled,callback:function(t){e.$set(e.form,"notifications_slack_enabled",t)},expression:"form.notifications_slack_enabled"}})],1),"true"===e.form.notifications_slack_enabled?a("text-field",{attrs:{label:e.$t("profile.notifications_slack_user")},model:{value:e.form.notifications_slack_userid,callback:function(t){e.$set(e.form,"notifications_slack_userid",t)},expression:"form.notifications_slack_userid"}}):e._e(),a("button",{class:{button:!0,"save-button":!0,"is-medium":!0,"is-loading":e.isSaveProfileLoading},on:{click:function(t){return e.saveProfile({form:e.form})}}},[e._v("\n        "+e._s(e.$t("profile.save.button"))+"\n      ")]),a("p",{class:{error:!0,"is-hidden":!e.isSaveProfileLoadingError}},[e._v("\n        "+e._s(e.$t("profile.save.error"))+"\n      ")]),a("h2",[e._v("\n        "+e._s(e.$t("profile.password_title"))+"\n      ")]),a("text-field",{attrs:{label:e.$t("people.fields.old_password"),type:"password"},model:{value:e.passwordForm.oldPassword,callback:function(t){e.$set(e.passwordForm,"oldPassword",t)},expression:"passwordForm.oldPassword"}}),a("text-field",{attrs:{label:e.$t("people.fields.password"),type:"password"},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}}),a("text-field",{attrs:{label:e.$t("people.fields.password_2"),type:"password"},model:{value:e.passwordForm.password2,callback:function(t){e.$set(e.passwordForm,"password2",t)},expression:"passwordForm.password2"}}),a("button",{class:{button:!0,"save-button":!0,"is-medium":!0,"is-loading":e.changePassword.isLoading},on:{click:function(t){return e.passwordChangeRequested()}}},[e._v("\n        "+e._s(e.$t("profile.change_password.button"))+"\n      ")]),a("p",{class:{"change-password-message":!0,error:!0,"is-hidden":e.changePassword.isValid}},[e._v("\n        "+e._s(e.$t("profile.change_password.unvalid"))+"\n      ")]),a("p",{class:{"change-password-message":!0,success:!0,"is-hidden":!e.changePassword.isSuccess}},[e._v("\n        "+e._s(e.$t("profile.change_password.success"))+"\n      ")]),a("p",{class:{"change-password-message":!0,error:!0,"is-hidden":!e.changePassword.isError}},[e._v("\n        "+e._s(e.$t("profile.change_password.error"))+"\n      ")])],1)]),a("change-avatar-modal",{attrs:{active:e.changeAvatar.isModalShown,"is-loading":e.changeAvatar.isLoading,"is-error":e.changeAvatar.isLoadingError,"form-data":e.changeAvatar.formData,title:e.$t("profile.avatar.title")},on:{fileselected:e.selectFile,confirm:e.uploadAvatarFile,cancel:e.hideAvatarModal}})],1)},s=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=a("7f45"),r=a.n(i),l=a("2f62"),c=a("4636"),d=a("2b61"),f=a("eb8c"),p=a("7bf8");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={name:"profile",components:{ComboboxBoolean:c["a"],PeopleAvatar:f["a"],ChangeAvatarModal:d["a"],TextField:p["a"]},data:function(){return{form:{first_name:"",last_name:"",notifications_enabled:"false",notifications_slack_enabled:"false",notifications_slack_userid:"",email:"",phone:"",timezone:"Europe/Paris",locale:"French"},passwordForm:{oldPassword:"",password:"",password2:""},changeAvatar:{isModalShown:!1,isLoading:!1,isLoadingError:!1,formData:null}}},watch:{user:function(){Object.assign(this.form,this.user)}},computed:m({},Object(l["c"])(["changePassword","isCurrentUserAdmin","isLdap","isSaveProfileLoading","isSaveProfileLoadingError","user"]),{departments:function(){return[{name:"Animation"},{name:"Modeling"}]},timezones:function(){return r.a.tz.names().filter((function(e){return e.indexOf("/")>0&&e.indexOf("Etc")<0}))}}),methods:m({},Object(l["b"])(["saveProfile","checkNewPasswordValidityAndSave","uploadAvatar"]),{localeChanged:function(){this.$i18n.locale=this.form.locale.substring(0,2),"zh_Hans_CN"===this.form.locale?r.a.locale("zh_CN"):r.a.locale(this.form.locale.substring(0,2))},passwordChangeRequested:function(){var e=this;this.checkNewPasswordValidityAndSave({form:this.passwordForm,callback:function(){e.passwordForm={oldPassword:"",password:"",password2:""}}})},selectFile:function(e){this.$store.commit("CHANGE_AVATAR_FILE",e)},uploadAvatarFile:function(){var e=this;this.changeAvatar.isLoading=!0,this.changeAvatar.isError=!1,this.uploadAvatar((function(t){t&&(e.changeAvatar.isError=!0),e.changeAvatar.isLoading=!1,e.$refs.avatar.reloadAvatar(),e.hideAvatarModal()}))},hideAvatarModal:function(){this.changeAvatar.isModalShown=!1},showAvatarModal:function(){this.changeAvatar.isModalShown=!0}}),mounted:function(){this.form=Object.assign(this.form,this.user),this.form.notifications_enabled=this.form.notifications_enabled?"true":"false",this.form.notifications_slack_enabled=this.form.notifications_slack_enabled?"true":"false"},metaInfo:function(){return{title:"".concat(this.$t("profile.title")," - Kitsu")}}},b=v,h=(a("6bb8"),a("2877")),_=Object(h["a"])(b,o,s,!1,null,"54a1e3d8",null);t["default"]=_.exports},4636:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("combobox",{attrs:{label:e.label,disabled:e.disabled,options:e.booleanOptions,value:e.value},on:{input:e.emitValue,enter:e.emitEnter}})},s=[],n=a("992f"),i={name:"combobox-boolean",components:{Combobox:n["a"]},props:{label:{default:"",type:String},value:{default:"false",type:String},options:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{booleanOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}]}},computed:{},methods:{emitValue:function(e){this.$emit("input",e)},emitEnter:function(e){this.$emit("enter",e)}}},r=i,l=a("2877"),c=Object(l["a"])(r,o,s,!1,null,"5da9e2c2",null);t["a"]=c.exports},"6bb8":function(e,t,a){"use strict";var o=a("9eb6"),s=a.n(o);s.a},"9eb6":function(e,t,a){},cd92:function(e,t,a){"use strict";var o=a("0e54d"),s=a.n(o);s.a}}]);
//# sourceMappingURL=chunk-0e61bcc0.4009035d.js.map