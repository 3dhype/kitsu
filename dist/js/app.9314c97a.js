(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],u=0,p=[];u<r.length;u++)o=r[u],n[o]&&p.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},n={app:0},a=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0019":function(t,e,s){"use strict";var i=s("1301"),n=s.n(i);n.a},"0586":function(t,e,s){"use strict";var i=s("e59e"),n=s.n(i);n.a},"05fb":function(t,e,s){"use strict";var i=s("6a44"),n=s.n(i);n.a},"0799":function(t,e,s){},"0a55":function(t,e,s){},"0af2":function(t,e,s){},"0bbb":function(t,e,s){"use strict";var i=s("33c0"),n=s.n(i);n.a},"0cf8":function(t,e,s){},"0e12":function(t,e,s){},"0e7c":function(t,e,s){"use strict";var i=s("0a55"),n=s.n(i);n.a},"0f97":function(t,e,s){},1:function(t,e){},"115f":function(t,e,s){},"119b":function(t,e,s){},"11f3":function(t,e,s){},"128d":function(t,e,s){},1299:function(t,e,s){},1301:function(t,e,s){},"187a":function(t,e,s){"use strict";var i=s("fa4d"),n=s.n(i);n.a},"19c5":function(t,e,s){},2:function(t,e){},"205b":function(t,e,s){},"20c8":function(t,e,s){"use strict";var i=s("d8ad"),n=s.n(i);n.a},"21d7":function(t,e,s){},2271:function(t,e,s){},"22b6":function(t,e,s){},"24b9":function(t,e,s){},2534:function(t,e,s){"use strict";var i=s("ac17"),n=s.n(i);n.a},"271b":function(t,e,s){"use strict";var i=s("ca57"),n=s.n(i);n.a},"27c0":function(t,e,s){"use strict";var i=s("60ec"),n=s.n(i);n.a},"287b":function(t,e,s){},"2eb6":function(t,e,s){"use strict";var i=s("c486"),n=s.n(i);n.a},"2ec3":function(t,e,s){},3:function(t,e){},3238:function(t,e,s){},3291:function(t,e,s){},"32b8":function(t,e,s){},3378:function(t,e,s){},"33c0":function(t,e,s){},"33c0d":function(t,e,s){},"34c5":function(t,e,s){"use strict";var i=s("94fd"),n=s.n(i);n.a},"34e0":function(t,e,s){},3521:function(t,e,s){},3523:function(t,e,s){},"361d":function(t,e,s){},3689:function(t,e,s){"use strict";var i=s("7b9b"),n=s.n(i);n.a},3889:function(t,e,s){},"397c":function(t,e,s){"use strict";var i=s("cf7b"),n=s.n(i);n.a},"39a1":function(t,e,s){"use strict";var i=s("5245"),n=s.n(i);n.a},"3be1":function(t,e,s){"use strict";var i=s("128d"),n=s.n(i);n.a},"3bef":function(t,e,s){},"3e9c":function(t,e,s){"use strict";var i=s("4b2f"),n=s.n(i);n.a},4:function(t,e){},4076:function(t,e,s){"use strict";var i=s("cfdd"),n=s.n(i);n.a},4082:function(t,e,s){"use strict";var i=s("a81e"),n=s.n(i);n.a},"40ef":function(t,e,s){"use strict";var i=s("fe95"),n=s.n(i);n.a},4116:function(t,e,s){},4129:function(t,e,s){"use strict";var i=s("3523"),n=s.n(i);n.a},"41a9":function(t,e,s){"use strict";var i=s("0799"),n=s.n(i);n.a},4267:function(t,e,s){"use strict";var i=s("8485"),n=s.n(i);n.a},4562:function(t,e,s){},"45d7":function(t,e,s){},4678:function(t,e,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=a(t);return s(e)}function a(t){var e=i[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}n.keys=function(){return Object.keys(i)},n.resolve=a,t.exports=n,n.id="4678"},4706:function(t,e,s){"use strict";var i=s("d8df"),n=s.n(i);n.a},"499f":function(t,e,s){},"49c1":function(t,e,s){},"4b2f":function(t,e,s){},"4ca5":function(t,e,s){"use strict";var i=s("d949"),n=s.n(i);n.a},"4cb5":function(t,e,s){},"4d1b":function(t,e,s){"use strict";var i=s("8c23"),n=s.n(i);n.a},"4f7d":function(t,e,s){},"51aa":function(t,e,s){"use strict";var i=s("56f2"),n=s.n(i);n.a},5245:function(t,e,s){},"52b8":function(t,e,s){},"538d":function(t,e,s){"use strict";var i=s("b1a8"),n=s.n(i);n.a},"542c":function(t,e,s){"use strict";var i=s("5803"),n=s.n(i);n.a},"54fe":function(t,e,s){"use strict";var i=s("4116"),n=s.n(i);n.a},"55ec":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var i={};s.r(i),s.d(i,"route",function(){return Q});s("cadf"),s("551c"),s("f751"),s("097d");var n=s("ba4c"),a=s.n(n),o=s("31bd"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{theme:!0,dark:t.isDarkTheme}},[t.user&&t.isDataLoading?s("div",{staticClass:"has-text-centered mt2 loading-info"},[s("span",[t._v(t._s(t.$t("main.loading_data"))+"...")]),s("spinner",{staticClass:"mt2"})],1):s("router-view")],1)},c=[],l=s("cebc"),d=s("2f62"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isWhite?i("div",{staticClass:"has-text-centered",style:t.style},[i("img",{attrs:{src:s("c9e4")}})]):i("div",{staticClass:"has-text-centered",style:t.style},[i("img",{attrs:{src:s("5c3d")}})])},p=[],h=(s("c5f6"),{name:"spinner",data:function(){return{style:{width:this.size?this.size+"px":"auto"}}},props:{isWhite:{type:Boolean,default:!1},size:{type:Number}}}),m=h,f=s("2877"),_=Object(f["a"])(m,u,p,!1,null,"67d74856",null),v=_.exports,y={name:"app",components:{Spinner:v},computed:Object(l["a"])({},Object(d["c"])(["assetTypeMap","isLoginLoading","isDataLoading","isDarkTheme","isSavingCommentPreview","route","personMap","taskMap","taskStatusMap","taskTypeMap","user"])),mounted:function(){"true"!==localStorage.getItem("dark-theme")||this.isDarkTheme?(document.documentElement.style.background="#FFF",document.body.style.background="#FFF"):(this.$store.commit("TOGGLE_DARK_THEME"),document.documentElement.style.background="#36393F",document.body.style.background="#36393F")},metaInfo:{link:[{rel:"icon",href:"/static/favicon.ico"}]},methods:Object(l["a"])({},Object(d["b"])(["getTask","loadAsset","loadAssetType","loadComment","loadPerson","loadPersonTasks","loadTaskStatus","loadTaskType","refreshPreview","refreshMetadataDescriptor","removeAsset"]),{onAssignation:function(t){this.route.path.indexOf(t.person_id)>0&&this.loadPersonTasks({personId:t.person_id,forced:!0})}}),watch:{isDarkTheme:function(){this.isDarkTheme?(document.documentElement.style.background="#36393F",document.body.style.background="#36393F"):(document.documentElement.style.background="#FFF",document.body.style.background="#FFF")}},socket:{events:{"task-type:new":function(t){this.taskTypeMap[t.task_type_id]||this.loadTaskType(t.task_type_id)},"task-type:update":function(t){this.taskTypeMap[t.task_type_id]&&this.loadTaskType(t.task_type_id)},"task-type:delete":function(t){this.taskTypeMap[t.task_type_id]&&this.$store.commit("DELETE_TASK_TYPE_END",{id:t.task_type_id})},"task-status:new":function(t){this.taskStatusMap[t.task_status_id]||this.loadTaskStatus(t.task_status_id)},"task-status:update":function(t){this.taskStatusMap[t.task_status_id]&&this.loadTaskStatus(t.task_status_id)},"task-status:delete":function(t){this.taskStatusMap[t.task_status_id]&&this.$store.commit("DELETE_TASK_STATUS_END",{id:t.task_status_id})},"entity-type:new":function(t){this.assetTypeMap[t.entity_type_id]||this.loadAssetType(t.entity_type_id)},"entity-type:update":function(t){this.assetTypeMap[t.entity_type_id]&&this.loadAssetType(t.entity_type_id)},"entity-type:delete":function(t){this.assetTypeMap[t.entity_type_id]&&this.$store.commit("DELETE_ASSET_TYPE_END",{id:t.entity_type_id})},"person:new":function(t){this.personMap[t.person_id]||this.loadPerson(t.person_id)},"person:update":function(t){this.personMap[t.person_id]&&this.loadPerson(t.person_id)},"person:delete":function(t){var e=this.personMap[t.person_id];e&&(this.$store.commit("DELETE_PEOPLE_START",e),this.$store.commit("DELETE_PEOPLE_END",e))},"task:assign":function(t){this.onAssignation(t)},"task:unassign":function(t){this.onAssignation(t)},"comment:new":function(t){var e=t.comment_id;this.isSavingCommentPreview||this.loadComment({commentId:e})},"task:update":function(t){this.taskMap[t.task_id]&&this.getTask({taskId:t.task_id})},"metadata-descriptor:new":function(t){this.refreshMetadataDescriptor(t.descriptor_id)},"metadata-descriptor:update":function(t){this.refreshMetadataDescriptor(t.descriptor_id)},"metadata-descriptor:delete":function(t){this.$store.commit("DELETE_METADATA_DESCRIPTOR_END",{id:t.descriptor_id})}}}},g=y,k=(s("5c0b"),Object(f["a"])(g,r,c,!1,null,null,null)),b=k.exports,T=s("a925"),S={assets:{cast_in:"Cast in",delete_error:"An error occured while deleting this asset. There are probably data linked to it. Are you sure this asset type has no task linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_fail:"Creation or edition failed, an error occured.",edit_success:"Asset {name} successfully edited.",edit_title:"Edit asset",empty_list:"There is no asset in the production. What about creating some?",empty_list_client:"There is no asset in this production.",new_asset:"Add an asset",new_assets:"Add assets",new_success:"Asset {name} successfully created.",no_cast_in:"This asset is not cast in any shot.",number:"asset | assets",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this asset.",tasks:"Asset tasks",title:"Assets",fields:{description:"Description",episode:"Ep.",name:"Name",production:"Prod",time_spent:"Time",type:"Type"}},asset_types:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this asset type. There are probably data linked to it. Are you sure this asset type has no asset linked to it?",edit_title:"Edit asset type",new_asset_type:"Add an asset type",number:"asset type | asset types",title:"Asset Types",production_title:"Asset Types Stats",fields:{name:"Name"}},breakdown:{all_assets:"All available assets",select_shot:"Please select a shot on the left to manage its casting.",selected_shot:"Assets in {sequence_name} / {name} casting",save_error:"An error occured while saving breakdown.",title:"Breakdown"},comments:{add_comment:"Add a comment...",add_preview:"Attach preview",change_preview:"Change preview",empty_text:"This comment is empty",edit_title:"Edit comment",error:"An error occured while posting comment",no_file_attached:"No file attached",post_status:"Post comment",retake:"Retake",validated:"Validated!",validation_required:"Validation Required",set_status_to:"Set status to",fields:{text:"text"}},custom_actions:{delete_text:"Are you sure you want to remove custom action {name} from your database?",delete_error:"An error occured while deleting this custom custom action.",edit_title:"Edit a custom action",new_custom_action:"Add a custom action",number:"custom action | custom actions",run_for_selection:"Run custom action for selected tasks:",title:"Custom Actions",fields:{name:"Name",url:"URL",entity_type:"Entity Type"},entity_types:{all:"All",shot:"Shot",asset:"Asset"}},episodes:{delete_error:"An error occured while deleting this episode. There are probably data linked to it. Are you sure this episode has no sequence linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_title:"Edit episode",empty_list:"There is no episode in the production. What about creating some?",empty_list_client:"There is no episode in this production.",new_episode:"New episode",number:"episode | episodes",title:"Episode Stats",fields:{name:"name",description:"description"}},login:{forgot_password:"Forgot password?",login:"Log in",login_failed:"Log in failed, please verify your credentials",login_page:"Cancel",reset_change_password:"Change password",reset_change_password_form_failed:"There is a problem with the password you gave. Please, verify that it is more than 6 chars long and that both passwords match.",reset_change_password_failed:"Changing password failed. Please, restart the whole procedure again.",reset_change_password_succeed:"Your password was changed successfully. Please, go back to the login page to use it.",reset_change_password_title:"Enter a new password",reset_password:"Reset Password",reset_password_failed:"Reset Password failed. Please verify your email.",reset_password_succeed:"Reset Password succeeded. Please check your inbox.",reset_password_title:"Enter your email to reset your password",title:"Log in to Kitsu",fields:{email:"Email",password:"Password",password2:"Password again"}},main:{add:"add",all:"All",admin:"Admin",cancel:"Cancel",clear_selection:"Clear current selection",documentation:"Documentation",close:"Close",confirmation:"Confirm",confirmation_and_stay:"Confirm and stay",dark_theme:"Dark Theme",days_spent:"day spent | days spent",delete:"Delete",delete_all:"Delete all",delete_text:"Are you sure you want to remove {name} from your database?",edit:"Edit",empty_comment:"Empty comment",history:"history",info:"Information",or:"or",no:"no",loading_data:"Loading data",loading_error:"An error occured while loading data.",logout:"Logout",modify:"Modify",minimize:"Minimize",maximize:"Maximize",nb_frames:"frame | frames",profile:"Profile",production:"Production",remove:"Remove",save:"Save",sorted_by:"Tasks sorted by:",studio:"Studio",user:"User",white_theme:"White Theme",yes:"yes",csv:{export_file:"Export",error_upload:"An error occured while uploading your CSV file.",import_file:"Import",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:"}},menu:{assign_tasks:"Assign tasks",change_priority:"Change priority",change_status:"Change status",create_tasks:"Create tasks",delete_tasks:"Delete tasks",run_custom_action:"Run custom action",set_estimations:"Set estimations"},not_found:{text:"There was something wrong with the link you clicked on, we encourage you to come back on the home page.",title:"Page not found... are your looking for something you deleted?"},notifications:{and_change_status:"and changed status to",commented_on:"commented on",no_notifications:"There is currently no notification for you for your current projects.",title:"Notifications",with_preview:"with a preview"},people:{active:"Active",add_member_to_team:"Add a member to the team: ",delete_error:"An error occured while deleting this person. There are probably data linked to it. Are you sure this person has no assignation or wrote no comment?",delete_text:"Are you sure you want to remove {personName} from your database?",edit_title:"Edit person",empty_team:"There is no one listed in the project team.",new_person:"Add a new employee",no_task_assigned:"There are no assigned running tasks.",persons:"person | persons",running_tasks:"Running tasks",select_person:"Select a person...",team:"Team",title:"People",unactive:"Unactive",csv:{import_file:"Import a .csv file",export_file:"Download as a .csv file",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:",error_upload:"An error occured while uploading your CSV file."},fields:{first_name:"First name",last_name:"Last name",email:"Email",phone:"Phone",role:"Role",old_password:"Current password",password:"New password",password_2:"New password (repeat)",active:"Active"},list:{name:"Name",email:"Email",phone:"Phone",role:"Role",active:"Active"},role:{admin:"Studio Manager",client:"Client",manager:"Supervisor",user:"CG Artist"}},playlists:{add_shots:"Select shots",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this playlist.",edit_title:"Edit playlist",loading_error:"A server error occured. Playlists cannot be loaded.",new_playlist:"Add a playlist",no_playlist:"There is currently no playlist for this project.",no_selection:"Please select a playlist on the left.",no_sequence_for_episode:"There is no sequence for this episode",no_shot_for_production:"There is no shot for this production",no_shot_for_sequence:"There is no shot for this sequence",select_shot:"Please select a shot in the right column",select_playlist:"Please select a playlist in the left column",title:"Playlists",remove:"remove",fields:{name:"Name"}},productions:{current:"Selected production",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this production. There are probably data linked to it. Are you sure this production has no task, shot or asset linked to it? Kitsu doesn't allow production deletion. If you don't want to see the production anymore, you can close it instead.",edit_title:"Edit production",new_production:"Add a production",number:"production | productions",open_productions:"My productions",picture:"Change picture",title:"Productions",home:{create_new:"Create a new production",empty:"You don't have any production open. What about creating a new one?",no_task:"You have no task assigned. See your supervisor to see what you can do!",no_prod_for_client:"You don't have access to any production. Contact your contractor to obtain an access.",title:"Running Productions",welcome:"Welcome to Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Add specific data required by this project.",add_failed:"An error occured while adding metadata to your project.",add_new_values:"There is currently no available values.",available_values:"Available values",choices:"List of values",delete_text:"Are you sure you want to delete this column and related data for all assets of this production?",delete_error:"An error occured while deleting this metadata column.",error:"An error occured while adding the metadata column. Make sure there is no column with similar name and that all fields are filled. If the problem is persists, please contact the support team.",free:"Free value",title:"Add metadata column"},status:{closed:"Closed",open:"Open",active:"Open",archived:"Closed"},type:{short:"Short",featurefilm:"Feature Film",tvshow:"TV Show"}},profile:{info_title:"Information",language:"Language",password_title:"Change password",timezone:"Timezone",title:"Your Profile",change_avatar:"Change avatar",avatar:{title:"Change avatar"},change_password:{button:"Change password",error:"An error occured while changing password. Please verify your current password.",success:"Your password was successfully changed!",unvalid:"Your new password confirmation doesn't match or your password is too short (7 chars, at least, is expected)."},save:{button:"Save changes",error:"An error occured while saving changes"}},task_status:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task status. There are probably data linked to it. Are you sure this task status has no task linked to it?",edit_title:"Edit task status",number:"task status | task status",new_task_status:"Add a task status",title:"Task Status",fields:{is_artist_allowed:"Is artist allowed",color:"Color",is_done:"Is done",is_reviewable:"Is reviewable",is_retake:"Has retake value",name:"Name",short_name:"Short name"}},task_types:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task type. There are probably data linked to it. Are you sure this task type has no task linked to it?",edit_title:"Edit task type",new_task_type:"Add a task type",number:"task type | task types",title:"Task Types",fields:{dedicated_to:"For",color:"Color",name:"Name",allow_timelog:"Timelog",priority:"Priority"}},sequences:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this sequence. There are probably data linked to it. Are you sure this sequence has no shot linked to it?",edit_title:"Edit sequence",empty_list:"There is no sequence in the production. What about creating some?",empty_list_client:"There is no sequence in this production.",new_sequence:"New sequence",number:"sequence | sequences",title:"Sequence Stats",fields:{name:"name",description:"description"}},shots:{casting:"Shot casting",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this shot. There are probably data linked to it. Are you sure this shot has no task linked to it?",edit_success:"Shot {name} successfully edited.",edit_fail:"Creation or edition failed, an error occured. Make sure that you are not renaming the shot with a name already listed for given sequence.",edit_title:"Edit shot",empty_list:"There is no shot in the production. What about creating some?",empty_list_client:"There is no shot in this production.",new_shot:"Add a shot",new_shots:"Add shots",new_sequences:"Add sequences",new_episodes:"Add episodes",no_casting:"The shot casting is empty.",number:"shot | shots",manage:"Create shots",new_success:"Shot {name} successfully created.",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this shot.",tasks:"Shot Tasks",title:"Shots",fields:{description:"Description",nb_frames:"Frames",episode:"Episode",frame_in:"In",frame_out:"Out",fps:"FPS",name:"Shot",production:"Prod",sequence:"Sequence",time_spent:"Time"}},server_down:{text:"Please contact your vendor support, your system administrator or your IT department to understand what is going wrong.",title:"Kitsu encountered an error while reaching its data API."},tasks:{add_preview:"Add preview",add_preview_error:"An error occured while adding preview.",assign:"Assign one task to: | Assign {nbSelectedTasks} tasks to:",back_to_list:"back to list",change_status_to:"Change task status to:",change_preview:"Change preview",change_priority:"Change priority to:",clear_assignations:"clear assignations",create_for_selection:"Create task for each empty cell:",create_tasks:"Add tasks",create_tasks_shot:"Add tasks for current shots",create_tasks_shot_explaination:"You are going to create a new task for each shot of current list for the given task type. Do you want to continue?",create_tasks_shot_failed:"A server error occured while proceeding creations.",create_tasks_asset:"Add tasks for current assets",create_tasks_asset_explaination:"You are going to create a new task for each asset of current list for the given task type. Do you want to continue?",create_tasks_asset_failed:"A server error occured while proceeding creations.",current:"Task to do",current_status:"Current status :",delete_all_text:"Are you sure you want to delete all tasks for given {name}? Please, confirm by typing the task type name of the tasks you want to delete in the text field.",delete_all_error:"Deleting all tasks for given task type failed.",delete_error:"An error occured while deleting task.",delete_comment:"Are you sure you want to delete last comment?",delete_comment_error:"An error occured while deleting comment.",delete_for_selection:"Delete selected tasks:",delete_preview:"Are you sure you want to delete this preview?",delete_preview_error:"An error occured while deleting preview.",edit_comment:"Edit comment",done:"Done",download_pdf_file:"Download .{extension} file",feedback:"feedback",full_screen:"Display in full screen",hide_assignations:"Hide assignations",hide_infos:"Hide additional information",my_tasks:"My tasks",next:"next task",no_assignation_right:"You are not allowed to manage assignations",no_comment:"There is currently no comment for this task.",no_preview:"There is currently no preview for this task.",number:"task | tasks",preview:"Previews",previous:"previous task",unsubscribe_notifications:"Unsubscribe from notifications",set_estimations:"Set estimations for selected tasks:",set_preview:"Set this preview as thumbnail",set_preview_error:"An error occured while setting preview as thumbnail",set_preview_done:"This preview is used as thumbnail for the current entity.",select_preview_file:"Please select a picture from your hard drive to be used as a preview for the current task:",show_assignations:"Show assignations",show_infos:"Show additional information",subscribe_notifications:"Subscribe to notifications",validation:"Validation",tasks:"Tasks",fields:{asset_type:"Asset type",assignees:"Assignees",end_date:"End date",duration:"Duration",entity:"Entity",entity_name:"Name",estimation:"Estimation",frames:"Fram.",last_comment:"Last comment",last_comment_date:"Last comment",priority:"Priority",production:"Prod",real_end_date:"Validation date",real_start_date:"WIP date",retake_count:"Retakes",sequence:"Sequence",task_status:"Status",task_status_short_name:"Status",task_type:"Type"},priority:{emergency:"Emergency",normal:"Normal",high:"High",very_high:"Very High"}},timesheets:{detail_level:"Detail level",done_tasks:"Done tasks",hours:"hours",month:"Month",time_spents:"Time Spent (hours)",title:"Timesheets",year:"Year"}},C={people:{active:"Présents",add_member_to_team:"Ajouter un membre à l'équipe: ",delete_text:"Êtes vous sûr de vouloir retirer {personName} de la base de données?",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à elle. Etes vous sur que cette personne n'a aucune tâche assignée et n'a fait aucun commentaire ?",edit_title:"Modifier les informations de",empty_team:"Personne n'a été affecté à cette production.",no_task_assigned:"Il n'y a aucune tâche assignée.",new_person:"Ajouter un employé",persons:"Personnes",picture:"Changer l'image",running_tasks:"Tâches en cours",select_person:"Sélectionner une personne...",team:"Équipe",title:"Employés",unactive:"Absents",csv:{export_file:"Télécharger",import_file:"Importer",import_title:"Import employees from a CSV file",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionnez un fichier de votre disque dur :"},list:{active:"Actif",email:"Adresse Mail",name:"Nom",phone:"Téléphone",role:"Rôle"},fields:{active:"Actif",email:"Adresse email",first_name:"Prénom",last_name:"Nom",old_password:"Mot de passe actuel",password:"Nouveau mot de passe",password_2:"Répétez le nouveau mot de passe",phone:"Téléphone",role:"Rôle"},role:{admin:"Studio Manager",manager:"Superviseur",user:"Graphiste",client:"Client"}},profile:{title:"Votre Profil",info_title:"Informations",password_title:"Changement de mot de passe",timezone:"Fuseau horaire",language:"Langue",change_avatar:"Changer Avatar",save:{button:"Sauvegardez vos changements",error:"Une erreur est survenue pendant la sauvegarde de vos changememts."},avatar:{title:"Changer votre avatar"},change_password:{button:"Changez de mot de passe",success:"Votre mot de passe a été changé avec succès !",unvalid:"Les nouveaux mots de passe sont différents ou votre mot de passe est trop court (7 caractères minimum).",error:"Une erreur s'est produite lors du changement de mot de passe. Veuillez vérifier votre mot de pass actuel."}},main:{add:"Ajouter",all:"Tous",admin:"Admin",back_to_list:"retour à la liste",cancel:"Annuler",confirmation:"Confirmer",confirmation_and_stay:"Confirmer et rester",clear_selection:"Effacer la sélection",close:"Fermer",edit:"Modifier",dark_theme:"Thème sombre",delete:"Supprimer",delete_all:"Supprimer tout",documentation:"Documentation",delete_text:"Etes vous sûr de vouloir supprimer {name} de la base de données ?",empty_comment:"Commentaire vide",history:"Historique",info:"Information",loading_data:"Chargement des données",loading_error:"Une erreur est survenue en chargeant les données.",logout:"Se déconnecter",maximize:"Maximiser",minimize:"Minimiser",no:"non",or:"ou",production:"Production",profile:"Profil",remove:"Enlever",studio:"Studio",user:"Utilisateur",save:"Enregistrer",sorted_by:"Tâches triées par :",white_theme:"Thème blanc",yes:"oui",csv:{import_file:"Importer",export_file:"Exporter",import_title:"Importer depuis un .csv",required_fields:"Le fichier CSV à importer doit comporter les colonnes suivantes :",select_file:"Sélectionner un fichier depuis votre dossier :",error_upload:"Une erreur est survenue en téleversant votre fichier .csv."}},menu:{assign_tasks:"Assigner des tâches",create_tasks:"Créer des tâches",change_status:"Changer le statut",change_priority:"Change priority",delete_tasks:"Supprimer des tâches",run_custom_action:"Lancer des actions",set_estimations:"Définir estimations"},login:{title:"Se connecter à Kitsu",login:"Se connecter",login_failed:"La connexion a échoué, vérifiez vos identifiants",fields:{email:"Adresse Mail",password:"Mot de passe"}},productions:{current:"Production sélectionnée ",delete_text:"Êtes vous sûr de vouloir retirer {name} de la base de données?",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des données liées à cette production. Etes vous sur que cette production n'a aucune tâche, shot ou asset lié ? Kitsu n'autorise pas la suppression de production. Si vous ne souhaitez plus la voir apparaitre, vous pouvez fermer la production.",edit_title:"Modifier la production",new_production:"Ajouter une production",number:"production | productions",open_productions:"Mes productions",picture:"Changer l'image",title:"Productions",home:{create_new:"Créer une nouvelle production",empty:"Vous n'avez pas de production ouverte, voulez vous en créer une nouvelle ?",no_task:"Vous n'avez pas de tâches assignées. Demandez à votre superviseur ce que vous pouvez faire !",title:"Productions en cours",welcome:"Bienvenue sur Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Ajouter des données spécifiques au projet.",add_failed:"Une erreur s'est produite en ajoutant des métadonnées au projet.",add_new_values:"Il n'y a pour le moment aucune valeur enregistrée.",available_values:"Valeurs disponibles",choices:"Liste de valeurs",delete_text:"Êtes vous sûr de vouloir supprimmer cette colonne et toutes les données liées?",delete_error:"Une erreur est survenue en supprimant la colone de métadonnées.",error:"Une erreur est survenue en ajoutant la colone de métadonnées. Assurez vous qu'aucune colonne ne porte le même nom et que les champs sont bien renseignés. Si le problème persiste, contactez le support.",free:"Valeur libre",title:"Ajouter une colonne de métadonnées"},status:{open:"Ouvert",closed:"Fermé"},type:{short:"Format court",featurefilm:"Long Métrage",tvshow:"Série télé"}},comments:{add_comment:"Ajouter un commentaire...",add_preview:"Attacher un fichier",edit_title:"Modifier le commentaire",empty_text:"Ce commentaire est vide",no_file_attached:"Aucun fichier attaché",post_status:"Publier",retake:"Reprise",set_status_to:"Positionner le statut à",validated:"Validé !",validation_required:"Validation requise",fields:{text:"Texte"}},tasks:{add_preview:"Attacher une préviz",add_preview_error:"Une erreur est survenue en ajoutant la preview.",assign:"Assigner une tâche à : | Assigner {nbSelectedTasks} tâches à :",back_to_list:"Retour à la liste",change_status_to:"Changer le statut de la tâche à : ",change_priority:"Changer le priorité de la tâche à : ",change_preview:"Modifier preview",clear_assignations:"effacer les assignations",create_tasks:"Ajouter des tâches",create_tasks_shot:"Ajouter des tâches pour les plans affichés",create_tasks_shot_explaination:"Vous allez créer une nouvelle tâche pour chaque plan de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_shot_failed:"Une erreur serveur est survenue pendant la création des tâches.",create_tasks_asset:"Ajouter des tâches pour les assets affichés",create_tasks_asset_explaination:"Vous allez créer une nouvelle tâche pour chaque asset de la liste affichée. Est-ce que vous voulez continuer ?",create_tasks_asset_failed:"Une erreur serveur est survenue pendant la création des tâches.",create_for_selection:"Créer une tâche pour chaque cellule vide :",current:"Tâches à faire",current_status:"Statut actuel :",delete_all_error:"Supprimer toutes les tâches pour ce type de tâche a échoué",delete_comment:"Êtes vous sûr de vouloir supprimer ce commentaire ?",delete_comment_error:"Une erreur est survenue en supprimant le commentaire.",delete_error:"Une erreur est survenue en supprimant la tâche.",delete_for_selection:"Delete selected tasks:",delete_preview:"Êtes vous sûr de vouloir supprimer cette préviz ?",delete_preview_error:"Une erreur est survenue en supprimant la preview.",done:"Terminées",download_pdf_file:"Télécharger le fichier .{extension}",feedback:"retours",full_screen:"Afficher en plein écran",hide_assignations:"Cacher assignations",hide_infos:"Cacher informations additionnelles",my_tasks:"Mes tâches",no_preview:"Il n'y a pas de préviz pour cette tâche.",no_comment:"Il n'y a pas de commentaires pour cette tâche.",no_assignation_right:"vous n'êtes pas autorisé à gérer les assigations.",next:"Suivante",preview:"Pré-visualisation",previous:"Précédente",select_preview_file:"Choisissez une preview sur votre disque dur:",set_estimations:"Donner une estimation pour les tâches sélectionnées :",set_preview:"Utilisez cette previz comme vignette",set_preview_error:"Une erreur est survenue en utilisant cette vignette.",set_preview_done:"Cette previz sert de vignette à l'entité courante.",subscribe_notifications:"S'abonner aux notifications",show_assignations:"Voir assignations",show_infos:"Montrer informations additionnelles",unsubscribe_notifications:"Se désabonner des notifications",tasks:"Tâches",validation:"Validation",fields:{asset_type:"Type d'asset",assignees:"Assignés",duration:"Duration",end_date:"Date de fin",estimation:"Estimation",entity:"Entité",entity_name:"Nom",last_comment_date:"Dernier comm.",priority:"Priorité",production:"Prod",real_end_date:"Date de valid.",real_start_date:"Date de début",retake_count:"Retakes",sequence:"Séquence",task_status:"Statut",last_comment:"Dernier commentaire",last_status_short_name:"Statut",task_type:"Type"},priority:{emergency:"Urgence",normal:"Normale",high:"Haute",very_high:"Très haute"}},timesheets:{title:"Feuille de temps",time_spents:"Temps passé (heures)",hours:"heures",done_tasks:"Tâches terminées",detail_level:"Niveau de détail",year:"Année",month:"Mois"},task_types:{title:"Types de tâches",edit_title:"Modifier le type de tâches",number:"type de tâche | types de tâches",new_task_type:"Ajouter un type de tâche",fields:{allow_timelog:"Temps passé",name:"Nom",color:"Couleur",priority:"Priorité",dedicated_to:"Pour"},delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du type de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce type de tâche ?"},task_status:{title:"Statuts de tâche",edit_title:"Modifier statut",number:"statut | statuts de tâche",new_task_status:"Ajouter un statut de tâche",fields:{name:"Nom",short_name:"Nom court",color:"Couleur",is_retake:"A valeur de retake",is_reviewable:"Est vérifiable",is_done:"Est terminé",is_artist_allowed:"Autorisé aux artistes"},delete_text:"Êtes vous sur de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue lors de la suppression du statut de tâche. Êtes vous sûr qu'aucune tâche n'est lié à ce statut de tâche ?"},custom_actions:{title:"Actions",new_custom_action:"Ajouter une action personnalisée",edit_title:"Modifier une action personnalisée",number:"action pesonnalisée | actions personnalisées",run_for_selection:"Lancer une action personnalisée pour les tâche sélectionnées :",delete_text:"Êtes-vous sûr de supprimer l'action personnalisée {name} de la base de données?",delete_error:"Une erreur est survenue en supprimant l'action personnalisée.",fields:{name:"Nom",url:"URL",entity_type:"Type d'entité"},entity_types:{all:"Tous",shot:"Plan",asset:"Asset"}},asset_types:{delete_error:"Une erreur est survenue en supprimant un type d'asset. Êtes vous sûr qu'aucun asset est lié à ce type d'asset?",delete_text:"Êtes vous sur de vouloir enlever {name} de la base de données ?",edit_title:"Modifier le type d'asset",new_asset_type:"Ajouter un type d'asset",number:"type d'asset | types d'assets",production_title:"Stats types d'assets",title:"Types d'assets",fields:{name:"Nom"}},assets:{title:"Assets",edit_title:"Modifier asset",number:"asset | assets",new_asset:"Ajouter un asset",new_assets:"Ajouter des assets",edit_success:"Asset {name} édité avec succès.",edit_fail:"La création ou l'édition a échoué, une erreur est survenue.",new_success:"Asset {name} créé avec succès.",empty_list:"Il n'y a pas d'assets dans la production. Voulez vous en créer ?",fields:{description:"Description",episode:"Ép.",name:"Nom",production:"Prod",type:"Type"},delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant l'asset, êtes vous sûr de vouloir que l'asset n'ait plus aucun lien ?",restore_text:"Êtes vous sûr de vouloir restaurer {name} dans votre base de données ?",restore_error:"Une erreur est survenue en restaurant l'asset.",tasks:"Tâches de fabrication",cast_in:"Présent dans",no_cast_in:"Cet asset n'apparait dans aucun shot."},shots:{title:"Plans",edit_title:"Modifier plan",number:"plan | plans",new_shot:"Ajouter un plan",new_shots:"Ajouter des plans",new_sequences:"Ajouter des séquences",new_episodes:"Ajouter des épisodes",manage:"Créer des plans",edit_fail:"La création ou l'édition a échoué, une erreur est survenue. Assurez-vous qu'il n'y pas déjà un shot portant le nom que vous donnez pour la séqence choisie.",new_success:"Plan {name} créé avec succès.",edit_success:"Plan {name} édité avec succès.",description:"Description",empty_list:"Il n'y a pas de plans dans la production. Voulez vous en créer ?",fields:{name:"Plan",episode:"Épisode",sequence:"Séquence",frame_in:"In",frame_out:"Out",fps:"FPS",description:"Description",production:"Prod"},delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que le plan n'a plus aucun lien ?",restore_text:"Etes vous sûr de vouloir restorer {name} dans la base de données ?",restore_error:"Une erreur est survenue en restorant le plan.",tasks:"Tâches de fabrication",casting:"Casting",no_casting:"Le casting du plan est vide."},sequences:{title:"Stats séquence",number:"séquence | séquences",new_sequence:"Nouvelle séquence",edit_title:"Éditer séquence",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas de séquence dans la production. Voulez vous en créer ?",fields:{name:"Nom",description:"Description"}},episodes:{title:"Stats épisodes",number:"épisode | épisodes",new_episode:"Nouvel épisode",edit_title:"Éditer épisode",delete_text:"Etes vous sûr de vouloir retirer {name} de la base de données ?",delete_error:"Une erreur est survenue en créant le plan, êtes vous sûr que la séquence n'a plus aucun lien ?",empty_list:"Il n'y a pas d'épisodes dans la production. Voulez vous en créer ?",fields:{name:"Nom",description:"Description"}},breakdown:{title:"Casting",select_shot:"Sélectionnez un shot à gauche pour gérer son casting",selected_shot:"Assets présents dans le casting de {sequence_name} / {name}",all_assets:"Tous les assets disponibles",save_error:"Une erreur est survenue en sauvegardant le casting."},playlists:{add_shots:"Selectonner les plans",title:"Playlists",new_playlist:"Ajouter une playlist",loading_error:"Une erreur serveur est apparue, les playlists ne peuvent pas être chargées.",no_selection:"Séléctionnez une playlist sur la gauche.",delete_text:"Êtes vous sûr de vouloir supprimer {name} de la base de données ?",delete_error:"Une erreur est survenue en supprimant la playlist.",edit_title:"Modifier la playlist",no_playlist:"Il n'y a pas de playlist pour ce projet.",no_sequence_for_episode:"Il n'y a pas de séquence pour cette épisode",no_shot_for_production:"Il n'y pas de plan pour cette production",select_shot:"Sélectionnez un plan dans la colonne de droite",select_playlist:"Sélectionnez une playlist dans la colonne de gauche",remove:"enlever",fields:{name:"Nom"}},notifications:{and_change_status:"et changé le statut à",commented_on:"a commenté",no_notifications:"Il n'y a pas encore de notifications pour vous pour les projets en cours",title:"Notifications",with_preview:"avec une version"},server_down:{title:"Kitsu a rencontré une erreur en communiquant avec son API de données.",text:"Contactez votre fournisseur, votre administrateur système ou votre département informatique pour comprendre ce qui ne va pas."}},w={assets:{cast_in:"角色分配",delete_error:"删除此资源时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此资源类型吗?",delete_text:"您确定要从您的数据库移除{name}吗?",edit_fail:"创建或编辑失败, 有错误出现.",edit_success:"已成功编辑资源{name}.",edit_title:"编辑资源",empty_list:"制作中没有资源. 要创建一些吗?",empty_list_client:"此制作中没有资源.",new_asset:"添加资源",new_assets:"添加多个资源",new_success:"已成功创建资源{name}.",no_cast_in:"任何镜头中都没为此资源分配角色.",number:"资源 | 资源(多个)",restore_text:"您确定要将{name}恢复进您的数据库吗?",restore_error:"恢复此资源时出现错误.",tasks:"资源任务(多个)",title:"资源(多个)",fields:{description:"说明",episode:"片段",name:"名称",production:"制作",type:"类型"}},asset_types:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此资源类型时出现错误. 很可能存在有链接至此的数据. 您确定没有资源链接至此资源类型吗?",edit_title:"编辑资源类型",new_asset_type:"添加资源类型",number:"资源类型 | 资源类型(多种)",title:"资源类型(多种)",fields:{name:"名称"}},breakdown:{all_assets:"所有可用资源",select_shot:"请从左侧选择一镜头来管理其角色分配.",selected_shot:"{sequence_name}中的多个资源 / {name}的角色分配",save_error:"保存支配表时出现错误.",title:"支配表"},comments:{add_comment:"添加注释...",add_preview:"附加预览",change_preview:"更换预览",empty_text:"此条注释为空",edit_title:"编辑注释",error:"发布注释时出现错误",no_file_attached:"未附加文件",post_status:"发布注释",retake:"重拍",validated:"已确认!",validation_required:"需要得到确认",set_status_to:"将状态设为",fields:{text:"文本"}},custom_actions:{delete_text:"您确定要从您的数据库移除自定义操作{name}吗?",delete_error:"删除此自定义操作时出现错误.",edit_title:"编辑自定义操作",new_custom_action:"添加自定义操作",number:"自定义操作 | 自定义操作(多个)",run_for_selection:"为所选的多个任务执行自定义操作:",title:"自定义操作(多个)",fields:{name:"名称",url:"URL",entity_type:"实体类型"},entity_types:{all:"所有",shot:"镜头",asset:"资源"}},episodes:{delete_error:"删除此片段时出现错误. 很可能存在有链接至此的数据. 您确定没有序列链接至此片段吗?",delete_text:"您确定要从您的数据库移除{name}吗?",edit_title:"编辑片段",empty_list:"制作中没有片段. 要创建一些吗?",empty_list_client:"此制作中没有片段.",new_episode:"新建片段",number:"片段 | 片段(多个)",title:"片段(多个)",fields:{name:"名称",description:"说明"}},login:{forgot_password:"密码忘记了?",login:"登录",login_failed:"登录失败, 请核实您的凭据",login_page:"取消",reset_change_password:"更改密码",reset_change_password_form_failed:"您给出的密码有问题. 请核实密码长度大于6个字符且两次密码一致.",reset_change_password_failed:"更改密码失败. 请再次重启整个步骤.",reset_change_password_succeed:"您的密码已成功更改. 请返回到登录页面来使用它.",reset_change_password_title:"输入新密码",reset_password:"重置密码",reset_password_failed:"重置密码失败. 请核实您的电子邮箱.",reset_password_succeed:"已成功重置密码. 请查看您的收件箱.",reset_password_title:"进入您的电子邮件来重置密码",title:"登录Kitsu",fields:{email:"电子邮箱",password:"密码",password2:"再次输入密码"}},main:{add:"添加",all:"全部",admin:"管理员",cancel:"取消",clear_selection:"清除当前所选",documentation:"文档",close:"关闭",confirmation:"确认",confirmation_and_stay:"做确认, 之后不离开",dark_theme:"黑色主题",delete:"删除",delete_all:"全部删除",delete_text:"您确定要从您的数据库移除{name}吗?",edit:"编辑",empty_comment:"空注释",history:"历史",info:"信息",or:"或",no:"否",loading_data:"正在加载数据",loading_error:"加载数据时出现错误.",logout:"退出",modify:"修改",minimize:"最小化",maximize:"最大化",profile:"简介",production:"制作",remove:"移除",save:"保存",studio:"工作室",user:"用户",white_theme:"白色主题",yes:"是",csv:{export_file:"导出",error_upload:"上传您的CSV文件时出现错误.",import_file:"导入",import_title:"从CSV文件导入数据",required_fields:"您的CSV文件需要有如下列项",select_file:"请从您的某个文件夹选择文件:"}},menu:{assign_tasks:"分配多个任务",change_priority:"更改优先级",change_status:"更改状态",create_tasks:"创建多个任务",delete_tasks:"删除多个任务",run_custom_action:"执行自定义操作"},not_found:{text:"您点击的链接有问题, 我们提倡您返回主页.",title:"页面未找到..., 您要找一下自己已删除的内容吗?"},notifications:{and_change_status:", 也已经将状态更改为了",commented_on:"已给出针对性注释, 注释对象为",no_notifications:"目前没有关于您当前项目的通知.",title:"通知(多个)",with_preview:"带有预览"},people:{active:"活动",add_member_to_team:"向团队添加成员: ",delete_error:"删除此人员时出现错误. 很可能存在有链接至此的数据. 您确定此人员没有分配任务或是没写注释吗?",delete_text:"您确定要从您的数据库移除{personName}吗?",edit_title:"编辑人员",empty_team:"项目团队里没有所列人员.",new_person:"添加新员工",no_task_assigned:"在执行任务未进行分配.",persons:"人员 | 人员(多名)",running_tasks:"在执行任务",select_person:"选择人员...",team:"团队",title:"人员(多名)",unactive:"非活动",csv:{import_file:"导入.csv文件",export_file:"下载为.csv文件",import_title:"从CSV文件导入数据",required_fields:"您的CSV文件需要有如下列项",select_file:"请从您的某个文件夹选择文件:",error_upload:"上传您的CSV文件时出现错误."},fields:{first_name:"名称",last_name:"姓氏",email:"电子邮箱",phone:"电话",role:"职责",old_password:"当前密码",password:"新密码",password_2:"新密码(重复)",active:"活动"},list:{name:"名称",email:"电子邮箱",phone:"电话",role:"职责",active:"活动"},role:{admin:"工作室经理",client:"客户",manager:"监制",user:"CG艺术家"}},playlists:{add_shots:"选择多个镜头",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此播放列表时出现错误.",edit_title:"编辑播放列表",loading_error:"出现服务器错误. 多个播放列表无法被加载.",new_playlist:"添加播放列表",no_playlist:"此项目当前没有播放列表.",no_selection:"请从左侧选择播放列表.",no_sequence_for_episode:"此片段没有序列",no_shot_for_production:"此制作没有镜头",no_shot_for_sequence:"此序列没有镜头",select_shot:"请从右列中选择镜头",select_playlist:"请从左列中选择播放列表",title:"播放列表(多个)",remove:"移除",fields:{name:"名称"}},productions:{current:"所选制作",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此制作时出现错误. 很可能存在有链接至此的数据. 您确定没有任务, 镜头或资源链接至此制作吗?",edit_title:"编辑制作",new_production:"添加制作",number:"制作 | 制作(多个)",open_productions:"我的制作",picture:"更换图片",title:"制作(多个)",home:{create_new:"创建新制作",empty:"您什么制作也没开启. 要创建一个新的吗?",no_task:"还没有任务分配给您. 您可以到监制那儿了解一下自己能做些什么!",no_prod_for_client:"您无权访问任何制作. 请联系您的承包商获取访问权限.",title:"执行多个制作",welcome:"欢迎使用Kitsu"},fields:{fps:"FPS",name:"名称",ratio:"宽高比",resolution:"分辨率",status:"状态",type:"类型"},metadata:{add_explaination:"添加此项目需要的特定数据.",add_failed:"向您的项目添加元数据时出现错误.",add_new_values:"当前没有可用值.",available_values:"可用值",choices:"值列表",delete_text:"您确定要删除此列以及此制作的所有资源方面的相关数据吗?",delete_error:"删除此元数据列时出现错误.",error:"添加元数据列时出现错误. 要确保没有相似名称的列, 还要确保填充了所有字段. 如果问题仍然存在, 还请联系我们的支持团队.",free:"空闲值",title:"添加元数据列"},status:{closed:"已关闭",open:"开启",active:"开启",archived:"已关闭"},type:{short:"短片",featurefilm:"故事片",tvshow:"电视节目"}},profile:{info_title:"信息",language:"语种",password_title:"更改密码",timezone:"时区",title:"您的简介",change_avatar:"更换头像",avatar:{title:"更换头像"},change_password:{button:"更改密码",error:"更改密码时出现错误. 请核实您当前的密码.",success:"您的密码已成功更改!",unvalid:"您的确认密码与新密码不相符或您的密码长度太短(预期至少是7个字符)."},save:{button:"保存更改",error:"保存更改时出现错误"}},task_status:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此任务状态时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务状态吗?",edit_title:"编辑任务状态",number:"任务状态 | 任务状态(多种)",new_task_status:"添加任务状态",title:"任务状态(多种)",fields:{color:"颜色",is_done:"已完成",is_reviewable:"可回顾",is_artist_allowed:"得到了艺术家的获准",name:"名称",short_name:"短名称"}},task_types:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此任务类型时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此任务类型吗?",edit_title:"编辑任务类型",new_task_type:"添加任务类型",number:"任务类型 | 任务类型(多种)",title:"任务类型(多种)",fields:{dedicated_to:"专用于",color:"颜色",name:"名称",allow_timelog:"时间日志",priority:"优先级"}},sequences:{delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此序列时出现错误. 很可能存在有链接至此的数据. 您确定没有镜头链接至此序列吗?",edit_title:"编辑序列",empty_list:"制作中没有序列. 要创建一些吗?",empty_list_client:"此制作中没有序列.",new_sequence:"新建序列",number:"序列 | 序列(多个)",title:"序列(多个)",fields:{name:"名称",description:"说明"}},shots:{casting:"镜头的角色分配",delete_text:"您确定要从您的数据库移除{name}吗?",delete_error:"删除此镜头时出现错误. 很可能存在有链接至此的数据. 您确定没有任务链接至此镜头吗?",edit_success:"已成功编辑镜头{name}.",edit_fail:"创建或编辑失败, 有错误出现. 要确保您没要重命名其名称已为给定序列列出的镜头.",edit_title:"编辑镜头",empty_list:"制作中没有镜头. 要创建一些吗?",empty_list_client:"此制作中没有镜头.",new_shot:"添加镜头",new_shots:"添加多个镜头",new_sequences:"添加多个序列",new_episodes:"添加多个片段",no_casting:"镜头的角色分配为空.",number:"镜头 | 镜头(多个)",manage:"创建多个镜头",new_success:"已成功创建镜头{name}.",restore_text:"您确定要将{name}恢复进您的数据库吗?",restore_error:"恢复此镜头时出现错误.",tasks:"镜头任务(多个)",title:"镜头(多个)",fields:{description:"说明",episode:"片段",frame_in:"入镜",frame_out:"出镜",fps:"FPS",name:"镜头",production:"制作",sequence:"序列"}},server_down:{text:"请联系您的供应商支持, 您的系统管理员或您的IT部门来搞清楚出什么问题了.",title:"Kitsu在访问其数据API时出现错误."},tasks:{add_preview:"添加预览",add_preview_error:"添加预览时出现错误.",assign:"将单个任务分配给: | 将{nbSelectedTasks}个任务分配给:",back_to_list:"返回列表",change_status_to:"将任务状态改为:",change_preview:"更换预览",change_priority:"将优先级改为:",clear_assignations:"清除多个任务分配",create_for_selection:"为每个空单元格都创建任务:",create_tasks:"添加多个任务",create_tasks_shot:"为当前的多个镜头添加多个任务",create_tasks_shot_explaination:"您将要为当前列表的每个镜头都创建给定任务类型的新任务. 要继续吗?",create_tasks_shot_failed:"继续进行多个创建时出现服务器错误.",create_tasks_asset:"为当前的多个资源添加多个任务",create_tasks_asset_explaination:"您将要为当前列表的每个资源都创建给定任务类型的新任务. 要继续吗?",create_tasks_asset_failed:"继续进行多个创建时出现服务器错误.",current:"待执行任务",current_status:"当前状态:",delete_all_text:"您确定要删除所有给定{name}的任务吗? 请通过在文本字段输入您想要删除的那些任务的任务类型名称来确认.",delete_all_error:"删除所有给定任务类型的任务失败.",delete_error:"删除任务时出现错误.",delete_comment:"您确定要删除最新注释吗?",delete_comment_error:"删除注释时出现错误",delete_for_selection:"删除所选的多个任务:",delete_preview:"您确定要删除此预览吗?",delete_preview_error:"删除预览时出现错误.",edit_comment:"编辑注释",done:"已完成",download_pdf_file:"下载.{extension}文件",feedback:"反馈",full_screen:"全屏显示",hide_assignations:"隐藏多个任务分配",my_tasks:"我的任务(多个)",next:"下一个任务",no_assignation_right:"不允许您管理多个任务分配",no_comment:"此任务当前没有注释.",no_preview:"此任务当前没有预览.",preview:"预览(多个)",previous:"上一个任务",unsubscribe_notifications:"通过通知取消订阅",set_preview:"将此预览设置为缩略图",set_preview_error:"将预览设置为缩略图时出现错误",set_preview_done:"此预览被用作当前实体的缩略图.",select_preview_file:"请从您的硬盘选择一张要被用作当前任务的预览的图片:",show_assignations:"显示多个任务分配",subscribe_notifications:"订阅通知",validation:"确认",tasks:"任务(多个)",fields:{assignees:"被分配任务人员(多名)",end_date:"结束日期",entity:"实体",last_comment:"最新注释",production:"制作",task_status:"状态",task_type:"类型"},priority:{emergency:"紧急",normal:"正常",high:"高",very_high:"非常高"}},timesheets:{detail_level:"细节层次",done_tasks:"已完成任务",hours:"小时",month:"月",time_spents:"已用时长(小时)",title:"时间表(多个)",year:"年"}},E={en:S,zh:w,fr:C};a.a.use(T["a"]);var P,x,O,A,$,L,D,j,I,M,F,q,N,R,V,B=new T["a"]({locale:"en",fallbackLocale:"en",messages:E}),U=B,z=s("8c4f"),H=(s("6762"),s("2fdb"),s("795b")),G=s.n(H),W=s("db82"),K=s.n(W),Q=function(t){return t.route},Y=s("bd86"),X=(s("20d6"),s("5176")),J=s.n(X),Z=(s("ac6a"),s("7f7f"),s("7514"),{get:function(t,e){K.a.get(t).end(function(t,s){if(401===s.statusCode)return Pc.backToLogin();e(t,s.body)})},post:function(t,e,s){K.a.post(t).send(e).end(function(t,e){if(401===e.statusCode)return Pc.backToLogin();s(t,e.body)})},put:function(t,e,s){K.a.put(t).send(e).end(function(t,e){if(401===e.statusCode)return Pc.backToLogin();s(t,e.body)})},del:function(t,e){K.a.del(t).end(function(t,s){if(401===s.statusCode)return Pc.backToLogin();e(t,s.body)})}}),tt=Z,et={getAssetTypes:function(t){tt.get("/api/data/asset-types",t)},getAssetType:function(t,e){tt.get("/api/data/entity-types/".concat(t),e)},newAssetType:function(t,e){var s={name:t.name};tt.post("/api/data/entity-types",s,e)},updateAssetType:function(t,e){var s={name:t.name};tt.put("/api/data/entity-types/".concat(t.id),s,e)},deleteAssetType:function(t,e){tt.del("/api/data/entity-types/".concat(t.id),e)}},st="TOGGLE_DARK_THEME",it="TOGGLE_SIDEBAR",nt="TOGGLE_USER_MENU",at="SET_LAST_PRODUCTION_SCREEN",ot="LOAD_PEOPLE_START",rt="LOAD_PEOPLE_END",ct="LOAD_PEOPLE_ERROR",lt="NEW_PEOPLE_END",dt="SHOW_IMPORT_PEOPLE_MODAL",ut="HIDE_IMPORT_PEOPLE_MODAL",pt="PERSON_CSV_FILE_SELECTED",ht="IMPORT_PEOPLE_START",mt="IMPORT_PEOPLE_END",ft="IMPORT_PEOPLE_ERROR",_t="DELETE_PEOPLE_START",vt="DELETE_PEOPLE_END",yt="DELETE_PEOPLE_ERROR",gt="SHOW_DELETE_PEOPLE_MODAL",kt="HIDE_DELETE_PEOPLE_MODAL",bt="EDIT_PEOPLE_START",Tt="EDIT_PEOPLE_END",St="EDIT_PEOPLE_ERROR",Ct="SHOW_EDIT_PEOPLE_MODAL",wt="HIDE_EDIT_PEOPLE_MODAL",Et="LOAD_PERSON_TASKS_END",Pt="LOAD_PERSON_DONE_TASKS_END",xt="SET_PERSON_TASKS_SEARCH",Ot="SAVE_PERSON_TASKS_SEARCH_END",At="REMOVE_PERSON_TASKS_SEARCH_END",$t="SET_TIME_SPENSET_TIME_SPENT",Lt="PEOPLE_TIMESHEET_LOADED",Dt="PERSON_LOAD_TIME_SPENTS_END",jt="SET_PERSON_TASKS_SCROLL_POSITION",It="PEOPLE_SEARCH_CHANGE",Mt="USER_SAVE_PROFILE_LOADING",Ft="USER_SAVE_PROFILE_ERROR",qt="USER_SAVE_PROFILE_SUCCESS",Nt="CHANGE_AVATAR_FILE",Rt="UPLOAD_AVATAR_END",Vt="USER_CHANGE_PASSWORD_LOADING",Bt="USER_CHANGE_PASSWORD_ERROR",Ut="USER_CHANGE_PASSWORD_SUCCESS",zt="USER_CHANGE_PASSWORD_UNVALID",Ht="USER_LOAD_TODOS_END",Gt="USER_LOAD_TODOS_START",Wt="USER_LOAD_TODOS_ERROR",Kt="USER_LOAD_DONE_TASKS_END",Qt="USER_LOAD_TIME_SPENTS_END",Yt="SET_TODOS_SEARCH",Xt="LOAD_USER_FILTERS_END",Jt="LOAD_USER_FILTERS_ERROR",Zt="SET_TODO_LIST_SCROLL_POSITION",te="LOAD_TASK_END",ee="NEW_TASK_COMMENT_END",se="NEW_TASK_END",ie="EDIT_TASK_END",ne="LOAD_TASK_COMMENTS_END",ae="LOAD_TASK_ENTITY_PREVIEW_FILES_END",oe="CREATE_TASKS_END",re="DELETE_TASK_END",ce="EDIT_COMMENT_END",le="DELETE_COMMENT_END",de="PREVIEW_FILE_SELECTED",ue="ADD_PREVIEW_START",pe="ADD_PREVIEW_END",he="DELETE_PREVIEW_END",me="CHANGE_PREVIEW_END",fe="UPDATE_PREVIEW_ANNOTATION",_e="ADD_SELECTED_TASK",ve="ADD_SELECTED_TASKS",ye="REMOVE_SELECTED_TASK",ge="CLEAR_SELECTED_TASKS",ke="ASSIGN_TASKS",be="UNASSIGN_TASKS",Te="SAVE_TASK_SEARCH_END",Se="REMOVE_TASK_SEARCH_END",Ce="LOAD_PRODUCTIONS_START",we="LOAD_PRODUCTIONS_END",Ee="LOAD_PRODUCTIONS_ERROR",Pe="LOAD_OPEN_PRODUCTIONS_START",xe="LOAD_OPEN_PRODUCTIONS_END",Oe="LOAD_OPEN_PRODUCTIONS_ERROR",Ae="LOAD_PRODUCTION_STATUS_START",$e="LOAD_PRODUCTION_STATUS_END",Le="LOAD_PRODUCTION_STATUS_ERROR",De="EDIT_PRODUCTION_START",je="EDIT_PRODUCTION_END",Ie="EDIT_PRODUCTION_ERROR",Me="DELETE_PRODUCTION_START",Fe="DELETE_PRODUCTION_END",qe="DELETE_PRODUCTION_ERROR",Ne="SET_CURRENT_PRODUCTION",Re="PRODUCTION_PICTURE_FILE_SELECTED",Ve="PRODUCTION_AVATAR_UPLOADED",Be="TEAM_ADD_PERSON",Ue="TEAM_REMOVE_PERSON",ze="ADD_METADATA_DESCRIPTOR_END",He="UPDATE_METADATA_DESCRIPTOR_END",Ge="DELETE_METADATA_DESCRIPTOR_END",We="LOAD_TASK_TYPES_START",Ke="LOAD_TASK_TYPES_END",Qe="LOAD_TASK_TYPES_ERROR",Ye="EDIT_TASK_TYPE_START",Xe="EDIT_TASK_TYPE_END",Je="EDIT_TASK_TYPE_ERROR",Ze="DELETE_TASK_TYPE_START",ts="DELETE_TASK_TYPE_END",es="DELETE_TASK_TYPE_ERROR",ss="LOAD_TASK_STATUSES_START",is="LOAD_TASK_STATUSES_END",ns="LOAD_TASK_STATUSES_ERROR",as="EDIT_TASK_STATUS_START",os="EDIT_TASK_STATUS_END",rs="EDIT_TASK_STATUS_ERROR",cs="DELETE_TASK_STATUS_START",ls="DELETE_TASK_STATUS_END",ds="DELETE_TASK_STATUS_ERROR",us="LOAD_CUSTOM_ACTIONS_START",ps="LOAD_CUSTOM_ACTIONS_END",hs="LOAD_CUSTOM_ACTIONS_ERROR",ms="EDIT_CUSTOM_ACTION_START",fs="EDIT_CUSTOM_ACTION_END",_s="EDIT_CUSTOM_ACTION_ERROR",vs="DELETE_CUSTOM_ACTION_START",ys="DELETE_CUSTOM_ACTION_END",gs="DELETE_CUSTOM_ACTION_ERROR",ks="LOAD_ASSET_TYPES_START",bs="LOAD_ASSET_TYPES_END",Ts="LOAD_ASSET_TYPES_ERROR",Ss="EDIT_ASSET_TYPE_START",Cs="EDIT_ASSET_TYPE_END",ws="EDIT_ASSET_TYPE_ERROR",Es="DELETE_ASSET_TYPE_START",Ps="DELETE_ASSET_TYPE_END",xs="DELETE_ASSET_TYPE_ERROR",Os="SET_ASSET_LIST_SCROLL_POSITION",As="SET_PRODUCTION_ASSET_TYPE_LIST_SCROLL_POSITION",$s="LOAD_ASSETS_START",Ls="LOAD_ASSETS_END",Ds="LOAD_ASSETS_ERROR",js="LOAD_ASSET_END",Is="LOAD_ASSET_CAST_IN_END",Ms="ASSET_CSV_FILE_SELECTED",Fs="IMPORT_ASSETS_START",qs="IMPORT_ASSETS_END",Ns="EDIT_ASSET_START",Rs="EDIT_ASSET_END",Vs="EDIT_ASSET_ERROR",Bs="DELETE_ASSET_START",Us="DELETE_ASSET_END",zs="DELETE_ASSET_ERROR",Hs="RESTORE_ASSET_START",Gs="RESTORE_ASSET_END",Ws="RESTORE_ASSET_ERROR",Ks="SET_ASSET_SEARCH",Qs="SAVE_ASSET_SEARCH_END",Ys="REMOVE_ASSET_SEARCH_END",Xs="DISPLAY_MORE_ASSETS",Js="COMPUTE_ASSET_TYPE_STATS",Zs="SET_ASSET_TYPE_SEARCH",ti="LOAD_SHOTS_START",ei="LOAD_SHOTS_END",si="LOAD_SHOTS_ERROR",ii="LOAD_SEQUENCES_END",ni="LOAD_EPISODES_END",ai="LOAD_SHOT_END",oi="LOAD_SHOT_CASTING_END",ri="SHOT_CSV_FILE_SELECTED",ci="IMPORT_SHOTS_START",li="IMPORT_SHOTS_END",di="EDIT_SHOT_START",ui="EDIT_SHOT_END",pi="EDIT_SHOT_ERROR",hi="EDIT_SEQUENCE_START",mi="EDIT_SEQUENCE_END",fi="EDIT_SEQUENCE_ERROR",_i="EDIT_EPISODE_START",vi="EDIT_EPISODE_END",yi="EDIT_EPISODE_ERROR",gi="NEW_SHOT_START",ki="NEW_SHOT_END",bi="NEW_SHOT_ERROR",Ti="NEW_SEQUENCE_START",Si="NEW_SEQUENCE_END",Ci="NEW_SEQUENCE_ERROR",wi="NEW_EPISODE_START",Ei="NEW_EPISODE_END",Pi="NEW_EPISODE_ERROR",xi="DELETE_SHOT_START",Oi="DELETE_SHOT_END",Ai="DELETE_SHOT_ERROR",$i="DELETE_SEQUENCE_START",Li="DELETE_SEQUENCE_END",Di="DELETE_SEQUENCE_ERROR",ji="DELETE_EPISODE_START",Ii="DELETE_EPISODE_END",Mi="DELETE_EPISODE_ERROR",Fi="RESTORE_SHOT_START",qi="RESTORE_SHOT_END",Ni="RESTORE_SHOT_ERROR",Ri="SET_SHOT_SEARCH",Vi="SAVE_SHOT_SEARCH_END",Bi="REMOVE_SHOT_SEARCH_END",Ui="SET_SEQUENCE_SEARCH",zi="SET_EPISODE_SEARCH",Hi="DISPLAY_MORE_SHOTS",Gi="DISPLAY_MORE_SEQUENCES",Wi="DISPLAY_MORE_EPISODES",Ki="SET_SHOT_LIST_SCROLL_POSITION",Qi="SET_SEQUENCE_LIST_SCROLL_POSITION",Yi="SET_EPISODE_LIST_SCROLL_POSITION",Xi="COMPUTE_SEQUENCE_STATS",Ji="COMPUTE_EPISODE_STATS",Zi="SET_CURRENT_EPISODE",tn="CLEAR_EPISODES",en="SET_EPISODE_STATS",sn="RESET_PRODUCTION_PATH",nn="DATA_LOADING_START",an="DATA_LOADING_END",on="CHANGE_EMAIL",rn="CHANGE_PASSWORD",cn="LOGIN_RUN",ln="LOGIN_SUCCESS",dn="LOGIN_FAILURE",un="LOGOUT_SUCCESS",pn="LOGOUT_FAILURE",hn="USER_LOGIN",mn="USER_LOGOUT",fn="USER_LOGIN_FAIL",_n="SAVE_TODO_SEARCH_END",vn="REMOVE_TODO_SEARCH_END",yn="CASTING_SET_SHOT",gn="CASTING_SET_SEQUENCE",kn="CASTING_SET_EPISODE",bn="CASTING_SET_CASTING",Tn="CASTING_SET_SHOTS",Sn="CASTING_SET_SEQUENCES",Cn="CASTING_SET_ISDIRTY",wn="CASTING_ADD_TO_CASTING",En="CASTING_REMOVE_FROM_CASTING",Pn="LOAD_PLAYLISTS_START",xn="LOAD_PLAYLISTS_END",On="LOAD_PLAYLISTS_ERROR",An="LOAD_PLAYLIST_START",$n="LOAD_PLAYLIST_END",Ln="LOAD_PLAYLIST_ERROR",Dn="EDIT_PLAYLIST_START",jn="EDIT_PLAYLIST_END",In="EDIT_PLAYLIST_ERROR",Mn="DELETE_PLAYLIST_START",Fn="DELETE_PLAYLIST_END",qn="DELETE_PLAYLIST_ERROR",Nn="ADD_SHOT_TO_PLAYLIST",Rn="REMOVE_SHOT_FROM_PLAYLIST",Vn="CHANGE_PLAYLIST_PREVIEW",Bn="LOAD_SHOT_PREVIEW_FILES_END",Un="LOAD_NOTIFICATIONS_END",zn="LOAD_NOTIFICATION_END",Hn="MARK_ALL_NOTIFICATIONS_AS_READ",Gn="NOTIFICATION_ADD_PREVIEW",Wn="LOAD_TASK_SUBSCRIBE_END",Kn="LOAD_SEQUENCE_SUBSCRIBE_END",Qn="LOAD_SEQUENCE_SUBSCRIPTION_END",Yn="SET_PREVIEW",Xn="SET_IS_SHOW_ASSIGNATIONS",Jn="SET_IS_SHOW_INFOS",Zn="RESET_ALL",ta=(s("55dd"),s("ceca")),ea=s.n(ta),sa=function(t){return t.sort(ea()("canceled").thenBy(function(t,e){return t.asset_type_name.localeCompare(e.asset_type_name)}).thenBy(function(t,e){return t.name.localeCompare(e.name)}))},ia=function(t){return t.sort(ea()("canceled").thenBy(function(t,e){return t.episode_name?t.episode_name.localeCompare(e.episode_name):0}).thenBy(function(t,e){return t.sequence_name.localeCompare(e.sequence_name)}).thenBy(function(t,e){return t.name.localeCompare(e.name)}))},na=function(t){return t.sort(ea()("canceled").thenBy(function(t,e){return t.episode_name?t.episode_name.localeCompare(e.episode_name):0}).thenBy(function(t,e){return t.name.localeCompare(e.name)}))},aa=function(t){return t.sort(function(t,e){return t.project_status_name===e.project_status_name?t.name.localeCompare(e.name):-1*t.project_status_name.localeCompare(e.project_status_name)})},oa=function(t,e){return t.sort(ea()("priority",-1).thenBy(function(t,e){return t.project_name?t.project_name.localeCompare(e.project_name):0}).thenBy(function(t,s){var i=e[t.task_type_id],n=e[s.task_type_id];return i.name.localeCompare(n.name)}).thenBy(function(t,e){return t.full_entity_name?t.full_entity_name.localeCompare(e.full_entity_name):t.entity_name.localeCompare(e.entity_name)}))},ra=function(t){return t.sort(ea()("for_shots").thenBy("priority").thenBy("name"))},ca=function(t){return t.sort(ea()("created_at",-1).thenBy(function(t,e){return t.name.localeCompare(e.name)}))},la=function(t){return t.sort(ea()("active",-1).thenBy(function(t,e){return t.first_name.localeCompare(e.first_name)}).thenBy(function(t,e){return t.last_name.localeCompare(e.last_name)}))},da=function(t){return t.sort(function(t,e){return t.name.localeCompare(e.name)})},ua=function(t){return t.sort(ea()("created_at",-1))},pa=function(t,e){return t.sort(function(t,s){var i=e[t],n=e[s];return i.priority!==n.priority?i.priority>n.priority:i.name.localeCompare(n.name)})},ha={assetTypes:[],assetTypeMap:{},isAssetTypesLoading:!1,isAssetTypesLoadingError:!1,editAssetType:{isLoading:!1,isError:!1},deleteAssetType:{isLoading:!1,isError:!1}},ma=Object(l["a"])({},ha),fa={assetTypes:function(t){return t.assetTypes},assetTypeMap:function(t){return t.assetTypeMap},isAssetTypesLoading:function(t){return t.isAssetTypesLoading},isAssetTypesLoadingError:function(t){return t.isAssetTypesLoadingError},editAssetType:function(t){return t.editAssetType},deleteAssetType:function(t){return t.deleteAssetType},getAssetType:function(t,e){return function(e){return t.assetTypes.find(function(t){return t.id===e})}},getAssetTypeOptions:function(t){return t.assetTypes.map(function(t){return{label:t.name,value:t.id}})}},_a={loadAssetTypes:function(t,e){var s=t.commit;t.state;s(ks),et.getAssetTypes(function(t,i){t?s(Ts):s(bs,i),e&&e(t)})},loadAssetType:function(t,e){var s=t.commit;t.state;et.getAssetType(e,function(t,e){t?console.error(t):s(Cs,e)})},newAssetType:function(t,e){var s=t.commit;t.state;s(Ss,e.data),et.newAssetType(e.data,function(t,i){t?s(ws):s(Cs,i),e.callback&&e.callback(t)})},editAssetType:function(t,e){var s=t.commit;t.state;s(Ss),et.updateAssetType(e.data,function(t,i){t?s(ws):s(Cs,i),e.callback&&e.callback(t)})},deleteAssetType:function(t,e){var s=t.commit;t.state;s(Es);var i=e.assetType;et.deleteAssetType(i,function(t){t?s(xs):s(Ps,i),e.callback&&e.callback(t)})}},va=(P={},Object(Y["a"])(P,ks,function(t){t.isAssetTypesLoading=!0,t.isAssetTypesLoadingError=!1}),Object(Y["a"])(P,Ts,function(t){t.isAssetTypesLoading=!1,t.isAssetTypesLoadingError=!0}),Object(Y["a"])(P,bs,function(t,e){t.isAssetTypesLoading=!1,t.isAssetTypesLoadingError=!1,t.assetTypes=e,t.assetTypes=da(t.assetTypes),t.assetTypeMap={},t.assetTypes.forEach(function(e){t.assetTypeMap[e.id]=e})}),Object(Y["a"])(P,Ss,function(t,e){t.editAssetType.isLoading=!0,t.editAssetType.isError=!1}),Object(Y["a"])(P,ws,function(t){t.editAssetType.isLoading=!1,t.editAssetType.isError=!0}),Object(Y["a"])(P,Cs,function(t,e){var s=fa.getAssetType(t)(e.id);s&&s.id?J()(s,e):(t.assetTypes.push(e),t.assetTypeMap[e.id]=e),t.editAssetType={isLoading:!1,isError:!1},t.assetTypes=da(t.assetTypes)}),Object(Y["a"])(P,Es,function(t){t.deleteAssetType={isLoading:!0,isError:!1}}),Object(Y["a"])(P,xs,function(t){t.deleteAssetType={isLoading:!1,isError:!0}}),Object(Y["a"])(P,Ps,function(t,e){var s=t.assetTypes.findIndex(function(t){return t.id===e.id});s>=0&&t.assetTypes.splice(s,1),delete t.assetTypeMap[e.id],t.deleteAssetType={isLoading:!1,isError:!1}}),Object(Y["a"])(P,Zn,function(t){J()(t,Object(l["a"])({},ha))}),P),ya={state:ma,getters:fa,actions:_a,mutations:va},ga=s("f499"),ka=s.n(ga),ba=s("a4bb"),Ta=s.n(ba),Sa=(s("5df3"),s("db0c")),Ca=s.n(Sa),wa=s("5d73"),Ea=s.n(wa),Pa=(s("6b54"),{getAssets:function(t,e,s){var i="/api/data/assets/with-tasks";t&&(i+="?project_id=".concat(t.id)),e&&(i+="&episode_id=".concat(e.id)),tt.get(i,s)},getAsset:function(t,e){var s="/api/data/assets/".concat(t);tt.get(s,e)},getCastIn:function(t,e){tt.get("/api/data/assets/".concat(t.id,"/cast-in"),e)},newAsset:function(t,e){var s={name:t.name,description:t.description,entity_type_id:t.entity_type_id,project_id:t.project_id,data:t.data};"null"!==t.source_id&&(s.source_id=t.source_id),tt.post("/api/data/entities/",s,e)},updateAsset:function(t,e){var s={name:t.name,description:t.description,entity_type_id:t.entity_type_id,project_id:t.project_id,data:t.data};("null"===t.source_id||t.source_id)&&(s.source_id=t.source_id),tt.put("/api/data/entities/".concat(t.id),s,e)},deleteAsset:function(t,e){t.canceled?tt.del("/api/data/assets/".concat(t.id,"?force=true"),e):tt.del("/api/data/assets/".concat(t.id),e)},restoreAsset:function(t,e){var s={canceled:!1};tt.put("/api/data/entities/".concat(t.id),s,e)},postCsv:function(t,e,s){tt.post("/api/import/csv/projects/".concat(t.id,"/assets"),e,s)}}),xa={getPeople:function(t){tt.get("/api/data/persons",t)},getPerson:function(t,e){tt.get("/api/data/persons/".concat(t),e)},newPerson:function(t,e){var s={first_name:t.first_name,last_name:t.last_name,email:t.email.trim(),phone:t.phone,role:t.role,active:t.active};tt.post("/api/data/persons/new",s,e)},updatePerson:function(t,e){var s={first_name:t.first_name,last_name:t.last_name,email:t.email.trim(),phone:t.phone,timezone:t.timezone,locale:t.locale,role:t.role,active:t.active};tt.put("/api/data/persons/".concat(t.id),s,e)},deletePerson:function(t,e){tt.del("/api/data/persons/".concat(t),e)},postCsv:function(t,e){tt.post("/api/import/csv/persons",t,e)},postAvatar:function(t,e,s){tt.post("/api/pictures/thumbnails/persons/".concat(t),e,s)},changePassword:function(t,e){var s={old_password:t.oldPassword,password:t.password,password_2:t.password2};tt.post("/api/auth/change-password",s,e)},loadTodos:function(t){tt.get("/api/data/user/tasks",t)},loadDone:function(t){tt.get("/api/data/user/done-tasks",t)},loadTimeSpents:function(t,e){tt.get("/api/data/user/time-spents/".concat(t),e)},getPersonTasks:function(t,e){tt.get("/api/data/persons/".concat(t,"/tasks"),e)},getPersonDoneTasks:function(t,e){tt.get("/api/data/persons/".concat(t,"/done-tasks"),e)},getUserSearchFilters:function(t){tt.get("/api/data/user/filters",t)},createFilter:function(t,e,s,i,n,a){var o={list_type:t,name:e,query:s,entity_type:n,project_id:i};tt.post("/api/data/user/filters",o,a)},removeFilter:function(t,e){tt.del("/api/data/user/filters/".concat(t.id),e)},getTimeSpents:function(t,e,s){tt.get("/api/data/persons/".concat(t,"/time-spents/").concat(e),s)},setTimeSpent:function(t,e,s,i,n){var a={duration:60*i};tt.post("/api/actions/tasks/".concat(t,"/time-spents/").concat(s,"/persons/").concat(e),a,n)},getDayTable:function(t,e){return new G.a(function(s,i){tt.get("/api/data/persons/time-spents/day-table/".concat(t,"/").concat(e),function(t,e){t?i(t):s(e)})})},getWeekTable:function(t){return new G.a(function(e,s){tt.get("/api/data/persons/time-spents/week-table/".concat(t),function(t,i){t?s(t):e(i)})})},getMonthTable:function(t){return new G.a(function(e,s){tt.get("/api/data/persons/time-spents/month-table/".concat(t),function(t,i){t?s(t):e(i)})})},getAggregatedPersonTimeSpents:function(t,e,s,i,n,a){return new G.a(function(o,r){var c="/api/data/persons/".concat(t,"/time-spents/");c+="month"===e?"month/".concat(s,"/").concat(i):"week"===e?"week/".concat(s,"/").concat(n):"day/".concat(s,"/").concat(i,"/").concat(a),tt.get(c,function(t,e){t?r(t):o(e)})})}},Oa=s("75fc"),Aa=s("71f1"),$a=s.n(Aa),La={getTask:function(t,e){tt.get("/api/data/tasks/".concat(t,"/full"),e)},updateTask:function(t,e,s){tt.put("/api/data/tasks/".concat(t),e,s)},getTaskStatuses:function(t){tt.get("/api/data/task-status",t)},getTaskSubscribed:function(t,e){tt.get("/api/data/user/tasks/".concat(t,"/subscribed"),e)},subscribeToTask:function(t,e){tt.post("/api/actions/user/tasks/".concat(t,"/subscribe"),{},e)},unsubscribeFromTask:function(t,e){tt.del("/api/actions/user/tasks/".concat(t,"/unsubscribe"),e)},subscribeToSequence:function(t,e,s){tt.post("/api/actions/user/sequences/".concat(t,"/task-types/")+"".concat(e,"/subscribe"),{},s)},unsubscribeFromSequence:function(t,e,s){tt.del("/api/actions/user/sequences/".concat(t,"/task-types/")+"".concat(e,"/unsubscribe"),s)},getTaskComments:function(t,e){tt.get("/api/data/tasks/".concat(t,"/comments"),e)},getTaskPreviews:function(t,e){tt.get("/api/data/tasks/".concat(t,"/previews"),e)},commentTask:function(t,e){var s={task_status_id:t.taskStatusId,comment:t.comment};tt.post("/api/actions/tasks/".concat(t.taskId,"/comment"),s,e)},getTaskComment:function(t,e){tt.get("/api/data/comments/".concat(t.id),e)},editTaskComment:function(t,e){var s={text:t.text};tt.put("/api/data/comments/".concat(t.id),s,e)},deleteTaskComment:function(t,e,s){tt.del("/api/data/tasks/".concat(t,"/comments/").concat(e),s)},createTasks:function(t,e){var s=t.task_type_id,i=t.type,n=t.project_id;tt.post("/api/actions/task-types/".concat(s,"/").concat(i,"/create-tasks?project_id=").concat(n),{},e)},createTask:function(t,e){var s=t.entity_id,i=t.task_type_id,n=t.type,a=t.project_id;tt.post("/api/actions/task-types/".concat(i,"/").concat(n,"/create-tasks?project_id=").concat(a,"&id=").concat(s),{},e)},deleteTask:function(t,e){tt.del("/api/data/tasks/".concat(t.id,"?force=true"),e)},deleteAllTasks:function(t,e,s){tt.del("/api/data/projects/".concat(t,"/task-types/").concat(e,"/tasks"),s)},addPreview:function(t,e){var s=t.taskId,i=t.commentId;tt.post("/api/actions/tasks/".concat(s,"/comments/").concat(i,"/add-preview"),{},e)},addExtraPreview:function(t,e,s,i){tt.post("/api/actions/tasks/".concat(e,"/comments/").concat(s,"/preview-files/")+"".concat(t),{},i)},deletePreview:function(t,e,s,i){return new G.a(function(i,n){tt.del("/api/actions/tasks/".concat(t,"/comments/").concat(e,"/preview-files/")+"".concat(s),function(t,e){t?n(t):i(e)})})},setPreview:function(t,e,s){tt.put("/api/actions/entities/".concat(t,"/set-main-preview/").concat(e),{},s)},uploadPreview:function(t,e,s){tt.post("/api/pictures/preview-files/".concat(t),e,s)},updatePreviewAnnotation:function(t,e){return new G.a(function(s,i){tt.put("/api/data/preview-files/".concat(t.id),{annotations:e},function(t,e){t?i(t):s(e)})})},getPreviewFile:function(t){return new G.a(function(e,s){tt.get("/api/data/preview-files/".concat(t),function(t,i){t?s(t):e(i)})})},assignTasks:function(t,e,s){tt.put("/api/actions/persons/".concat(t,"/assign"),{task_ids:e},s)},unassignTasks:function(t,e){tt.put("/api/actions/tasks/clear-assignation",{task_ids:t},e)}},Da={getPlaylists:function(t,e,s){var i="/api/data/projects/".concat(t.id);i+=e?"/episodes/".concat(e.id,"/playlists"):"/playlists",tt.get(i,s)},getPlaylist:function(t,e,s){var i="/api/data/projects/".concat(t.id,"/playlists/").concat(e.id);tt.get(i,s)},getShotPreviewFiles:function(t,e){var s="/api/data/shots/".concat(t.id,"/preview-files");tt.get(s,e)},getEntityPreviewFiles:function(t,e){var s="/api/data/playlists/entities/".concat(t.id,"/preview-files");tt.get(s,e)},newPlaylist:function(t,e){var s={name:t.name,project_id:t.production_id,episode_id:t.episode_id};tt.post("/api/data/playlists/",s,e)},updatePlaylist:function(t,e){var s={name:t.name};t.shots&&(s.shots=t.shots),tt.put("/api/data/playlists/".concat(t.id),s,e)},deletePlaylist:function(t,e){tt.del("/api/data/playlists/".concat(t.id),e)}},ja=s("e814"),Ia=s.n(ja),Ma=s("4710"),Fa=s.n(Ma),qa=s("6929"),Na=s.n(qa),Ra={},Va={fromString:function(t){var e=new Fa.a({lightness:.7,saturation:.8});return localStorage&&"true"===localStorage.getItem("dark-theme")&&(e=new Fa.a({lightness:.6,saturation:.8})),e.hex(t)},validationBackgroundColor:function(t){return t?"wtg"===t.task_status_short_name?"#f5f5f5":"ip"===t.task_status_short_name?"#3273dc":"pndng"===t.task_status_short_name?"#ab26ff":"fin"===t.task_status_short_name?"#22d160":"rtk"===t.task_status_short_name?"#ff3860":"cfrm"===t.task_status_short_name?"#f1c40f":"recd"===t.task_status_short_name?"#1abc9c":t.task_status_color:"#ffffff"},validationTextColor:function(t){return t&&"todo"!==t.task_status_short_name&&"wtg"!==t.task_status_short_name?"white":"#333"},hexToRGBa:function(t,e){var s=Ia()(t.slice(1,3),16),i=Ia()(t.slice(3,5),16),n=Ia()(t.slice(5,7),16);return e?"rgba("+s+", "+i+", "+n+", "+e+")":"rgb("+s+", "+i+", "+n+")"},darkenColor:function(t){return Ra[t]||(Ra[t]=Na()(t).darken(.3).saturate(.6)),Ra[t]}},Ba=(s("3b2b"),s("a481"),s("7f45")),Ua=s.n(Ba),za=function(t){"Shot"===t.entity_type_name?(t.episode_name?t.full_entity_name="".concat(t.episode_name," / ").concat(t.sequence_name," / ").concat(t.entity_name):t.full_entity_name="".concat(t.sequence_name," / ").concat(t.entity_name),t.entity_path={name:"shot",params:{production_id:t.project_id,shot_id:t.entity_id}}):(t.full_entity_name="".concat(t.entity_type_name," / ").concat(t.entity_name),t.entity_path={name:"asset",params:{production_id:t.project_id,asset_id:t.entity_id}})},Ha=function(t,e){for(var s={},i=0;i<t;i++){s[i]||(s[i]={});for(var n=0;n<e;n++)s[i][n]=!1}return s},Ga=function(t,e,s,i){for(var n=Object(l["a"])({},t),a=e;a<s;a++){n[a]||(n[a]={});for(var o=0;o<i;o++)n[a][o]=!1}return n},Wa=function(t){for(var e=Ta()(t).length,s=t[0]?Ta()(t[0]).length:0,i=0;i<e;i++)for(var n=0;n<s;n++)t[i][n]&&(t[i][n]=!1);return t},Ka=function(t,e,s,i){var n={};return t.forEach(function(t){if(!t.canceled){var a=t[e];n[a]||(n[a]={}),t.tasks.forEach(function(t){var e=i[t];if(e){var o=e.task_type_id,r=s[e.task_status_id];if(r){var c=r.color;n[a][o]||(n[a][o]={}),n[a][o][c]||(n[a][o][c]={name:r.short_name,color:r.color,value:0}),n[a][o][c].value++}}})}}),n},Qa=function(t,e){return Object(Oa["a"])(Array(e-t+1).keys()).map(function(e){return e+t})},Ya=function(t){var e=Ua()().year();return Ua()("".concat(e,"-").concat(t),"YYYY-M").format("MMM")},Xa=function(t,e,s){return Qa(1,e===t?s:12)},Ja=function(t,e,s,i){if(s===t&&i===e)return Qa(1,Ua()().date()+1);var n=Ua()("".concat(t,"-").concat(Number(e)),"YYYY-M");return Qa(1,n.endOf("month").date())},Za=function(t,e){return Qa(1,e===t?Ua()().week():52)},to=function(t,e){var s=t.find(function(t){return t.id===e.id});return s&&J()(s,e),s},eo=function(t,e){return t.filter(function(t){return t.id!==e.id})},so=function(t,e){return t.filter(function(t){return t!==e})},io=function(t){var e={};return t.forEach(function(t){t.validations?J()(e,t.validations):t.tasks.forEach(function(t){e[t.task_type_id]=t.id})}),e},no=function(t){var e="transparent";return t&&(e=t.task_type_color),{"border-left":"4px solid ".concat(e)}},ao=function(t,e,s,i,n){var a=t.project_id?t.project_id:e.id,o={name:"task",params:{production_id:a,task_id:t.id}};s&&i&&(o.name="episode-task",o.params.episode_id=t.episode_id||i.id);var r=n[t.task_type_id];return o.params.type=r.for_shots?"shots":"assets",o},oo=function(t,e){if(t){var s=t.entity_type_name,i=t.entity?t.entity.id:t.entity_id,n={name:"Shot"===s?"shot":"asset",params:{production_id:t.project_id}};return"Shot"===s?n.params.shot_id=i:n.params.asset_id=i,e&&(n.name="episode-".concat(n.name),n.params.episode_id=e),n}return{name:"open-productions"}},ro=function(t){t=t.replace(/^\s+|\s+$/g,"").toLowerCase();for(var e="àáäâèéëêìíïîòóöôùúüûñç·/_,:",s="aaaaeeeeiiiioooouuuunc------",i=0,n=e.length;i<n;i++)t=t.replace(new RegExp(e.charAt(i),"g"),s.charAt(i));return t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"_").replace(/-+/g,"_")},co=s("b6d0"),lo=s.n(co),uo=(s("28a5"),function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s={},i={};return t.forEach(function(t){var n;t&&(n=e?t.name.split(" "):[t.name],bo(s,i,t,n))}),s}),po=function(t){var e={},s={};return t.forEach(function(t){var i=t.full_entity_name.replace(/_/g," ").replace(/-/g," "),n=i.split(" ").concat([t.task_type_name,t.task_status_short_name,t.project_name]);bo(e,s,t,n)}),e},ho=function(t){var e={},s={};return t.forEach(function(t){var i=t.entity_name.replace(/_/g," ").replace(/-/g," "),n=i.split(" ").concat([t.task_status_short_name]);bo(e,s,t,n)}),e},mo=function(t){var e={},s={};return t.forEach(function(t){var i=t.name.replace(/_/g," ").replace(/-/g," "),n=t.asset_type_name.split(" "),a=i.split(" ").concat(n);bo(e,s,t,a)}),e},fo=function(t){var e={},s={};return t.forEach(function(t){var i=[t.name,t.sequence_name,t.episode_name];bo(e,s,t,i)}),e},_o=function(t){var e={},s={};return t.forEach(function(t){var i=[t.name,t.episode_name];bo(e,s,t,i)}),e},vo=function(t){var e={},s={};return t.forEach(function(t){var i=[t.name];bo(e,s,t,i)}),e},yo=function(t,e){e||(e=[]);var s=e.map(function(e){return ko(t,e)}).filter(function(t){return null!==t});return s.length>0?s.reduce(go,Object(Oa["a"])(s[0])):null},go=function(t,e){return t.filter(function(t){return e.has(t)})},ko=function(t,e){return e&&e.indexOf("=")<0?t[e.toLowerCase()]?new lo.a(t[e.toLowerCase()]):new lo.a([]):null},bo=function(t,e,s,i){var n=!0,a=!1,o=void 0;try{for(var r,c=Ea()(i);!(n=(r=c.next()).done);n=!0){var l=r.value,d="";if(l){var u=!0,p=!1,h=void 0;try{for(var m,f=Ea()(l);!(u=(m=f.next()).done);u=!0){var _=m.value;d+=_.toLowerCase(),void 0===t[d]&&(t[d]=[],e[d]={}),e[d][s.id]||(t[d].push(s),e[d][s.id]=!0)}}catch(v){p=!0,h=v}finally{try{u||null==f.return||f.return()}finally{if(p)throw h}}}}}catch(v){a=!0,o=v}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return t},To=(s("f559"),s("4917"),/([^ ]*)=([^ ]*)|\[([^[]*)\]=([^ ]*)/g),So=function(t,e,s){var i={status:!0},n={assignation:!0},a={exclusion:!0},o={descriptor:!0};return e&&e.length>0?t.filter(function(t){var r=!0;return e.forEach(function(e){var c=null;if(!r)return!1;if(e.taskType&&t.validations[e.taskType.id]&&(c=s[t.validations[e.taskType.id]]),i[e.type])r=c&&c.task_status_id===e.taskStatus.id,e.excluding&&(r=!r);else if(n[e.type])r=e.assigned?c&&c.assignees&&c.assignees.length>0:!c||c&&c.assignees&&0===c.assignees.length;else if(a[e.type])r=!e.excludedIds[t.id];else if(o[e.type]){if(t.data&&t.data[e.descriptor.field_name]&&e.value){var l=t.data[e.descriptor.field_name];l=l.toLowerCase(),console.log(l,e),r=l.indexOf(e.value.toLowerCase())>=0}else r=!1;e.excluding&&(r=!r)}}),r}):t},Co=function(t){return t?t.replace(To,"").split(" ").filter(function(t){return t.length>0&&"-"!==t[0]}):[]},wo=function(t){return t.replace(To,"").split(" ").filter(function(t){return t.length>0&&"-"===t[0]}).map(function(t){return t.substring(1)})},Eo=function(t,e,s,i,n){var a=xo(e,s,n),o=Oo(i,n),r=wo(n)||[];return a=a.concat(o),r.forEach(function(e){var s={},i=yo(t,[e])||[];i.forEach(function(t){s[t.id]=!0}),a.push({type:"exclusion",excludedIds:s})}),a},Po=function(t,e){var s=[],i=wo(e)||[];return i.forEach(function(e){var i={},n=yo(t,[e])||[];n.forEach(function(t){i[t.id]=!0}),s.push({type:"exclusion",excludedIds:i})}),s},xo=function(t,e,s){if(!s)return[];var i=[],n=s.match(To),a=uo(t,!1),o={};return e.forEach(function(t){o[t.short_name.toLowerCase()]=t}),n&&n.forEach(function(t){var e=t.split("="),s=e[1],n=s.startsWith("-");n&&(s=s.substring(1));var r=e[0];"["===r[0]&&(r=r.substring(1,r.length-1));var c=a[r.toLowerCase()];c&&("unassigned"===s?i.push({taskType:c[0],assigned:!1,type:"assignation"}):"assigned"===s?i.push({taskType:c[0],assigned:!0,type:"assignation"}):s&&o[s.toLowerCase()]&&i.push({taskType:c[0],taskStatus:o[s.toLowerCase()],type:"status",excluding:n}))}),i},Oo=function(t,e){if(!e)return[];var s=[],i=e.match(To),n=uo(t,!1);return i&&i.forEach(function(t){var e=t.split("="),i=e[1],a=e[0];"["===a[0]&&(a=a.substring(1,a.length-1));var o=n[a.toLowerCase()],r=i.startsWith("-");r&&(i=i.substring(1)),o&&s.push({descriptor:o[0],value:i,type:"descriptor",excluding:r})}),s},Ao=function(t){return{name:t.name,short_name:t.short_name,is_reviewable:Boolean("true"===t.is_reviewable),is_done:Boolean("true"===t.is_done),is_retake:Boolean("true"===t.is_retake),is_artist_allowed:Boolean("true"===t.is_artist_allowed),color:t.color}},$o={getTaskStatuses:function(t){tt.get("/api/data/task-status",t)},getTaskStatus:function(t,e){tt.get("/api/data/task-status/".concat(t),e)},newTaskStatus:function(t,e){var s=Ao(t);tt.post("/api/data/task-status/",s,e)},updateTaskStatus:function(t,e){var s=Ao(t);tt.put("/api/data/task-status/".concat(t.id),s,e)},deleteTaskStatus:function(t,e){tt.del("/api/data/task-status/".concat(t.id),e)}},Lo={taskStatus:[],taskStatusMap:{}},Do=Lo,jo={taskStatus:function(t){return t.taskStatus},taskStatusMap:function(t){return t.taskStatusMap},editTaskStatus:function(t){return t.editTaskStatus},deleteTaskStatus:function(t){return t.deleteTaskStatus},taskStatusForCurrentUser:function(t,e,s,i){return i.isCurrentUserManager?t.taskStatus:t.taskStatus.filter(function(t){return t.is_artist_allowed})}},Io={loadTaskStatuses:function(t,e){var s=t.commit;t.state;s(ss),$o.getTaskStatuses(function(t,i){t?s(ns):s(is,i),e&&e(t)})},loadTaskStatus:function(t,e){var s=t.commit;t.state;$o.getTaskStatus(e,function(t,e){t?console.error(t):s(os,e)})},newTaskStatus:function(t,e){var s=t.commit,i=(t.state,e.form),n=e.callback;s(as,i),$o.newTaskStatus(i,function(t,e){t?s(rs):s(os,e),n&&n(t,e)})},saveTaskStatus:function(t,e){var s=t.commit,i=(t.state,e.form),n=e.callback;s(as),$o.updateTaskStatus(i,function(t,e){t?s(rs):s(os,e),n&&n(t)})},deleteTaskStatus:function(t,e){var s=t.commit,i=(t.state,e.taskStatus),n=e.callback;s(cs),$o.deleteTaskStatus(i,function(t){t?s(ds):s(ls,i),n&&n(t)})}},Mo=(x={},Object(Y["a"])(x,ss,function(t){t.taskStatus=[],t.taskStatusMap={}}),Object(Y["a"])(x,ns,function(t){t.taskStatus=[],t.taskStatusMap={}}),Object(Y["a"])(x,is,function(t,e){t.taskStatus=da(e),t.taskStatusMap={},e.forEach(function(e){null===e.is_artist_allowed&&(e.is_artist_allowed=!0),t.taskStatusMap[e.id]=e})}),Object(Y["a"])(x,as,function(t,e){}),Object(Y["a"])(x,rs,function(t){}),Object(Y["a"])(x,os,function(t,e){var s=t.taskStatusMap[e.id];s&&s.id?J()(s,e):(t.taskStatus.push(e),t.taskStatus=da(t.taskStatus)),t.taskStatusMap[e.id]=e}),Object(Y["a"])(x,cs,function(t){}),Object(Y["a"])(x,ds,function(t){}),Object(Y["a"])(x,ls,function(t,e){var s=t.taskStatus.findIndex(function(t){return t.id===e.id});s>=0&&t.taskStatus.splice(s,1),delete t.taskStatusMap[e.id]}),Object(Y["a"])(x,Zn,function(t){J()(t,Object(l["a"])({},Lo))}),x),Fo={state:Do,getters:jo,actions:Io,mutations:Mo},qo={addAdditionalInformation:function(t){if(t&&(t.first_name&&t.last_name?(t.name="".concat(t.first_name," ").concat(t.last_name),t.initials="".concat(t.first_name[0]).concat(t.last_name[0])):t.first_name?(t.name=t.first_name,t.initials=t.first_name[0]):t.last_name?(t.name=t.last_name,t.initials=t.last_name[0]):t.email?(t.name=t.email,t.initials=t.email[0]):t.initials="NN",t.initials=t.initials.toUpperCase(),t.color=Va.fromString(t.name),t.has_avatar)){var e=Math.random().toString(36).substring(7);t.avatarPath="/api/pictures/thumbnails/persons/".concat(t.id)+".png?unique=".concat(e)}return t},getTaskStatus:function(t){return Fo.state.taskStatusMap[t]}},No={people:[],displayedPeople:[],peopleIndex:{},personMap:{},isPeopleLoading:!1,isPeopleLoadingError:!0,isImportPeopleModalShown:!1,isImportPeopleLoading:!1,isImportPeopleLoadingError:!1,isEditModalShown:!1,isEditLoading:!1,isEditLoadingError:!1,personToEdit:{role:"user"},isDeleteModalShown:!1,isDeleteLoading:!1,isDeleteLoadingError:!1,personToDelete:void 0,personCsvFormData:void 0,person:{},personTasks:[],displayedPersonTasks:[],displayedPersonDoneTasks:[],personTasksIndex:{},personTasksSearchText:"",personTaskSelectionGrid:{},personTaskSearchQueries:[],personTasksScrollPosition:0,timesheet:{},personTimeSpentMap:{},personTimeSpentTotal:0},Ro=Object(l["a"])({},No),Vo={people:function(t){return t.people},displayedPeople:function(t){return t.displayedPeople},peopleIndex:function(t){return t.peopleIndex},personMap:function(t){return t.personMap},isPeopleLoading:function(t){return t.isPeopleLoading},isPeopleLoadingError:function(t){return t.isPeopleLoadingError},isImportPeopleModalShown:function(t){return t.isImportPeopleModalShown},isImportPeopleLoading:function(t){return t.isImportPeopleLoading},isImportPeopleLoadingError:function(t){return t.isImportPeopleLoadingError},isDeleteModalShown:function(t){return t.isDeleteModalShown},isDeleteLoading:function(t){return t.isDeleteLoading},isDeleteLoadingError:function(t){return t.isDeleteLoadingError},personToDelete:function(t){return t.personToDelete},isEditModalShown:function(t){return t.isEditModalShown},isEditLoading:function(t){return t.isEditLoading},isEditLoadingError:function(t){return t.isEditLoadingError},personToEdit:function(t){return t.personToEdit},personCsvFormData:function(t){return t.personCsvFormData},displayedPersonTasks:function(t){return t.displayedPersonTasks},displayedPersonDoneTasks:function(t){return t.displayedPersonDoneTasks},personTasksSearchText:function(t){return t.personTasksSearchText},personTaskSearchQueries:function(t){return t.personTaskSearchQueries},personTaskSelectionGrid:function(t){return t.personTaskSelectionGrid},personTasksScrollPosition:function(t){return t.personTasksScrollPosition},getPerson:function(t,e){return function(e){return t.personMap[e]}},getPersonOptions:function(t){return t.people.map(function(t){return{label:"".concat(t.first_name," ").concat(t.last_name),value:t.id}})},timesheet:function(t){return t.timesheet},personTimeSpentMap:function(t){return t.personTimeSpentMap},personTimeSpentTotal:function(t){return t.personTimeSpentTotal}},Bo={loadPeople:function(t,e){var s=t.commit;t.state;s(ot),xa.getPeople(function(t,i){t?s(ct):s(rt,i.map(function(t){return t.departments=t.departments||"",t})),e&&e(t)})},loadPerson:function(t,e){var s=t.commit;t.state;xa.getPerson(e,function(t,e){t?console.error(t):e.email&&(s(bt,e),s(Tt,e))})},newPeople:function(t,e){var s=t.commit,i=t.state;s(bt,e.data),xa.newPerson(i.personToEdit,function(t,i){t?s(St):(s(lt,i.id),s(Tt),s(wt)),e.callback&&e.callback(t)})},editPeople:function(t,e){var s=t.commit,i=t.state;s(bt,e.data),xa.updatePerson(i.personToEdit,function(t,n){t?s(St):(s(Tt,i.personToEdit),s(wt)),e.callback&&e.callback(t)})},deletePeople:function(t,e){var s=t.commit,i=t.state;s(_t),xa.deletePerson(i.personToDelete.id,function(t,n){t?s(yt):(s(vt,i.personToDelete),s(kt)),e&&e(t)})},uploadPersonFile:function(t,e){var s=t.commit,i=t.state;s(ht),xa.postCsv(i.personCsvFormData,function(t){t&&s(ft),s(mt),e&&e(t)})},loadPersonTasks:function(t,e){var s=t.commit,i=(t.state,t.rootGetters),n=e.personId,a=(e.forced,e.date),o=e.callback,r=i.userFilters,c=i.taskTypeMap;s(Et,{personId:n,tasks:[],userFilters:r,taskTypeMap:c}),s(Pt,[]),xa.getPersonTasks(n,function(t,e){t&&(e=[]),xa.getPersonDoneTasks(n,function(t,i){t&&(i=[]),s(Pt,i),xa.getTimeSpents(n,a,function(t,i){t&&(i=[]),s(Dt,i),s(Et,{personId:n,tasks:e,userFilters:r,taskTypeMap:c}),o&&o(t)})})})},loadAggregatedPersonTimeSpents:function(t,e){t.commit,t.state,t.rootGetters;var s=e.personId,i=e.detailLevel,n=e.year,a=e.month,o=e.week,r=e.day;return new G.a(function(t,e){xa.getAggregatedPersonTimeSpents(s,i,n,a,o,r).then(function(e){t(e)}).catch(function(t){return e(t)})})},showPersonImportModal:function(t,e){var s=t.commit;t.state;s(dt)},hidePersonImportModal:function(t,e){var s=t.commit;t.state;s(ut)},showPersonEditModal:function(t,e){var s=t.commit;t.state;s(Ct,e)},hidePersonEditModal:function(t,e){var s=t.commit;t.state;s(wt,e)},showPersonDeleteModal:function(t,e){var s=t.commit;t.state;s(gt,e)},hidePersonDeleteModal:function(t,e){var s=t.commit;t.state;s(kt,e)},setPersonTasksSearch:function(t,e){var s=t.commit;t.state;s(xt,e)},savePersonTasksSearch:function(t,e){var s=t.commit;t.rootGetters;return new G.a(function(t,i){var n=Ro.personTaskSearchQueries.find(function(t){return t.name===e});n?t():xa.createFilter("persontasks",e,e,null,null,function(e,n){s(Ot,{searchQuery:n}),e?i(e):t(n)})})},removePersonTasksSearch:function(t,e){var s=t.commit;t.rootGetters;return new G.a(function(t,i){xa.removeFilter(e,function(n){s(At,{searchQuery:e}),n?i(n):t()})})},setTimeSpent:function(t,e){var s=t.commit,i=e.personId,n=e.taskId,a=e.date,o=e.duration;return new G.a(function(t,e){xa.setTimeSpent(n,i,a,o,function(i,n){i?e(i):(s($t,n),t())})})},setPersonTasksScrollPosition:function(t,e){var s=t.commit;s(jt,e)},loadTimesheets:function(t,e){var s=t.commit,i=e.detailLevel,n=e.year,a=e.month;return new G.a(function(t,e){var o=1===a.length?"0".concat(Ia()(a)+1):"".concat(a),r=xa.getMonthTable;"day"===i&&(r=xa.getDayTable),"week"===i&&(r=xa.getWeekTable),r(n,o).then(function(e){s(Lt,e),t()}).catch(e)})},peopleSearchChange:function(t,e){var s=t.commit;s(It,e)}},Uo=(O={},Object(Y["a"])(O,ot,function(t){t.isPeopleLoading=!0,t.isPeopleLoadingError=!1,t.personMap={}}),Object(Y["a"])(O,ct,function(t){t.isPeopleLoading=!1,t.isPeopleLoadingError=!0}),Object(Y["a"])(O,rt,function(t,e){t.isPeopleLoading=!1,t.isPeopleLoadingError=!1,t.people=la(e),t.displayedPeople=t.people,t.people.forEach(function(e){e=qo.addAdditionalInformation(e),t.personMap[e.id]=e}),t.peopleIndex=uo(t.people)}),Object(Y["a"])(O,_t,function(t){t.isDeleteLoading=!0,t.isDeleteLoadingError=!1}),Object(Y["a"])(O,vt,function(t,e){t.isDeleteLoading=!1;var s=t.people.findIndex(function(t){return t.id===e.id});s>=0&&t.people.splice(s,1),delete t.personMap[e.id]}),Object(Y["a"])(O,yt,function(t){t.isDeleteLoading=!1,t.isDeleteLoadingError=!0}),Object(Y["a"])(O,gt,function(t,e){t.isDeleteModalShown=!0,t.isDeleteLoadingError=!1,t.isDeleteLoading=!1,t.personToDelete=t.people.find(function(t){return t.id===e})}),Object(Y["a"])(O,kt,function(t,e){t.isDeleteModalShown=!1,t.personToDelete=void 0}),Object(Y["a"])(O,bt,function(t,e){t.isEditLoading=!0,t.isEditLoadingError=!1,t.personToEdit=J()(t.personToEdit,e)}),Object(Y["a"])(O,lt,function(t,e){t.personToEdit.id=e}),Object(Y["a"])(O,Tt,function(t,e){t.isEditLoading=!1,t.isEditLoadingError=!1;var s=t.people.findIndex(function(e){return e.id===t.personToEdit.id});t.personToEdit=qo.addAdditionalInformation(t.personToEdit),s>=0?(console.log("ok",t.personToEdit.name),delete t.people[s],t.personMap[t.personToEdit.id]=Object(l["a"])({},t.personToEdit),t.people[s]=t.personMap[t.personToEdit.id]):(t.people=[].concat(Object(Oa["a"])(t.people),[t.personToEdit]),t.personMap[t.personToEdit.id]=t.personToEdit,t.displayedPeople.push(t.personToEdit),la(t.people),la(t.displayedPeople)),t.personToEdit={role:"user"}}),Object(Y["a"])(O,St,function(t){t.isEditLoading=!1,t.isEditLoadingError=!0}),Object(Y["a"])(O,ht,function(t,e){t.isImportPeopleLoading=!0,t.isImportPeopleLoadingError=!1}),Object(Y["a"])(O,mt,function(t,e){t.isImportPeopleLoading=!1,t.isImportPeopleLoadingError=!1}),Object(Y["a"])(O,ft,function(t){t.isImportPeopleLoading=!1,t.isImportPeopleLoadingError=!0}),Object(Y["a"])(O,Ct,function(t,e){t.isEditModalShown=!0,t.isEditLoadingError=!1,t.isEditLoading=!1,t.personToEdit=void 0!==e?t.people.find(function(t){return t.id===e}):{first_name:"",last_name:"",phone:"",email:"",role:"user"}}),Object(Y["a"])(O,wt,function(t){t.isEditModalShown=!1,t.personToEdit={}}),Object(Y["a"])(O,dt,function(t){t.isImportPeopleModalShown=!0,t.isImportPeopleLoading=!1,t.isImportPeopleLoadingError=!1}),Object(Y["a"])(O,ut,function(t){t.isImportPeopleModalShown=!1}),Object(Y["a"])(O,pt,function(t,e){t.personCsvFormData=e}),Object(Y["a"])(O,Rt,function(t,e){var s=Math.random().toString(36).substring(7),i=t.personMap[e];i.has_avatar=!0,i.avatarPath="/api/pictures/thumbnails/persons/".concat(i.id)+".png?unique=".concat(s)}),Object(Y["a"])(O,Et,function(t,e){var s=e.personId,i=e.tasks,n=e.userFilters,a=e.taskTypeMap;t.person=t.personMap[s],i.forEach(za),i.forEach(function(t){var e=qo.getTaskStatus(t.task_status_id);t.taskStatus=e});for(var o={},r=0;r<i.length;r++)o[r]={0:!1};t.personTaskSelectionGrid=o,t.personTasks=oa(i,a),t.personTasksIndex=po(i);var c=Co(t.personTasksSearchText),l=yo(t.personTasksIndex,c);t.displayedPersonTasks=l||t.personTasks,n.persontasks&&n.persontasks.all?t.personTaskSearchQueries=n.persontasks.all:t.personTaskSearchQueries=[]}),Object(Y["a"])(O,Pt,function(t,e){e.forEach(za),t.displayedPersonDoneTasks=e}),Object(Y["a"])(O,xt,function(t,e){t.displayedPersonTasks=[];var s=Co(e),i=yo(t.personTasksIndex,s);t.personTasksSearchText=e,t.displayedPersonTasks=i||t.personTasks}),Object(Y["a"])(O,Ot,function(t,e){var s=e.searchQuery;t.personTaskSearchQueries.push(s),t.personTaskSearchQueries=da(t.personTaskSearchQueries)}),Object(Y["a"])(O,At,function(t,e){var s=e.searchQuery,i=t.personTaskSearchQueries.findIndex(function(t){return t.name===s.name});i>=0&&t.personTaskSearchQueries.splice(i,1)}),Object(Y["a"])(O,ee,function(t,e){var s=e.comment,i=e.taskId,n=t.personTasks.find(function(t){return t.id===i});if(n){var a=qo.getTaskStatus(s.task_status_id);J()(n,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color}),t.personTasksIndex=po(t.personTasks)}}),Object(Y["a"])(O,ye,function(t,e){t.personTaskSelectionGrid[e.x]&&(t.personTaskSelectionGrid[e.x][0]=!1)}),Object(Y["a"])(O,_e,function(t,e){t.personTaskSelectionGrid[e.x]&&(t.personTaskSelectionGrid[e.x][0]=!0)}),Object(Y["a"])(O,ge,function(t,e){t.personTaskSelectionGrid=Wa(t.personTaskSelectionGrid)}),Object(Y["a"])(O,Lt,function(t,e){t.timesheet=e}),Object(Y["a"])(O,$t,function(t,e){t.person.id===e.person_id&&(t.personTimeSpentMap[e.task_id]=e),t.personTimeSpentTotal=Ca()(t.personTimeSpentMap).reduce(function(t,e){return e.duration+t},0)/60}),Object(Y["a"])(O,Dt,function(t,e){var s={};e.forEach(function(t){s[t.task_id]=t}),t.personTimeSpentMap=s,t.personTimeSpentTotal=Ca()(t.personTimeSpentMap).reduce(function(t,e){return e.duration+t},0)/60}),Object(Y["a"])(O,jt,function(t,e){t.personTasksScrollPosition=e}),Object(Y["a"])(O,It,function(t,e){if(e){var s=Co(e);t.displayedPeople=yo(t.peopleIndex,s)}else t.displayedPeople=t.people}),Object(Y["a"])(O,qt,function(t,e){var s=t.personMap[e.id];s&&(J()(s,e),qo.addAdditionalInformation(s))}),Object(Y["a"])(O,Zn,function(t,e){J()(t,Object(l["a"])({},No))}),O),zo={state:Ro,getters:Vo,actions:Bo,mutations:Uo,helpers:qo},Ho={getTaskTypes:function(t){tt.get("/api/data/task-types",t)},newTaskType:function(t,e){var s={name:t.name,color:t.color,priority:Number(t.priority),for_shots:Boolean("true"===t.for_shots),allow_timelog:Boolean("true"===t.allow_timelog)};tt.post("/api/data/task-types/",s,e)},updateTaskType:function(t,e){var s={name:t.name,color:t.color,priority:Number(t.priority),for_shots:Boolean("true"===t.for_shots),allow_timelog:Boolean("true"===t.allow_timelog)};tt.put("/api/data/task-types/".concat(t.id),s,e)},deleteTaskType:function(t,e){tt.del("/api/data/task-types/".concat(t.id),e)},getTaskType:function(t,e){tt.get("/api/data/task-types/".concat(t),e)},getSequenceSubscriptions:function(t,e,s){tt.get("/api/data/user/projects/".concat(t,"/task-types/").concat(e,"/")+"sequence-subscriptions",s)}},Go={taskTypes:[],taskTypeMap:{},sequenceSubscriptions:{},editTaskType:{isLoading:!1,isError:!1},deleteTaskType:{isLoading:!1,isError:!1}},Wo=Object(l["a"])({},Go),Ko={taskTypes:function(t){return t.taskTypes},taskTypeMap:function(t){return t.taskTypeMap},sequenceSubscriptions:function(t){return t.sequenceSubscriptions},editTaskType:function(t){return t.editTaskType},deleteTaskType:function(t){return t.deleteTaskType},currentTaskType:function(t,e,s){return t.taskTypeMap[s.route.params.task_type_id]||{}},getTaskTypeOptions:function(t){return t.taskTypes.map(function(t){return{label:t.name,value:t.id}})},getAssetTaskTypeOptions:function(t){return t.taskTypes.filter(function(t){return!t.for_shots}).map(function(t){return{label:t.name,value:t.id}})},getShotTaskTypeOptions:function(t){return t.taskTypes.filter(function(t){return t.for_shots}).map(function(t){return{label:t.name,value:t.id}})},getTaskType:function(t,e){return function(e){return t.taskTypeMap[e]}}},Qo={loadTaskTypes:function(t,e){var s=t.commit;t.state;s(We),Ho.getTaskTypes(function(t,i){t?s(Qe):s(Ke,i),e&&e(t)})},loadTaskType:function(t,e){var s=t.commit;t.state;Ho.getTaskType(e,function(t,e){t?console.error(t):s(Xe,e)})},newTaskType:function(t,e){var s=t.commit;t.state;s(Ye,e.data),Ho.newTaskType(e.data,function(t,i){t?s(Je):s(Xe,i),e.callback&&e.callback(t)})},editTaskType:function(t,e){var s=t.commit;t.state;s(Ye),Ho.updateTaskType(e.data,function(t,i){t?s(Je):s(Xe,i),e.callback&&e.callback(t)})},deleteTaskType:function(t,e){var s=t.commit;t.state;s(Ze);var i=e.taskType;Ho.deleteTaskType(i,function(t){t?s(es):s(ts,i),e.callback&&e.callback(t)})},initTaskType:function(t,e){var s=t.commit,i=t.dispatch,n=(t.state,t.rootState,t.rootGetters);return new G.a(function(t,a){n.currentTaskType.for_shots?Ho.getSequenceSubscriptions(n.currentProduction.id,n.currentTaskType.id,function(o,r){o?a(o):(s(Qn,r),Ta()(n.shotMap).length<2||e?0===n.episodes.length&&n.isTVShow?i("loadEpisodes",function(e){e?a(e):i("loadShots",function(e){e?a(e):t()})}):i("loadShots",function(e){e?a(e):t()}):t())}):Ta()(n.assetMap).length<2||e?i("loadAssets",function(e){e?a(e):t()}):t()})}},Yo=(A={},Object(Y["a"])(A,We,function(t){}),Object(Y["a"])(A,Qe,function(t){t.taskTypes=[],t.taskTypeMap={}}),Object(Y["a"])(A,Ke,function(t,e){t.taskTypes=ra(e),t.taskTypeMap={},e.forEach(function(e){t.taskTypeMap[e.id]=e})}),Object(Y["a"])(A,Ye,function(t,e){t.editTaskType.isLoading=!0,t.editTaskType.isError=!1}),Object(Y["a"])(A,Je,function(t){t.editTaskType.isLoading=!1,t.editTaskType.isError=!0}),Object(Y["a"])(A,Xe,function(t,e){var s=Ko.getTaskType(t)(e.id);s&&s.id?J()(s,e):(t.taskTypes.push(e),t.taskTypes=ra(t.taskTypes)),t.taskTypeMap[e.id]=e,t.editTaskType={isLoading:!1,isError:!1}}),Object(Y["a"])(A,Ze,function(t){t.deleteTaskType={isLoading:!0,isError:!1}}),Object(Y["a"])(A,es,function(t){t.deleteTaskType={isLoading:!1,isError:!0}}),Object(Y["a"])(A,ts,function(t,e){var s=t.taskTypes.findIndex(function(t){return t.id===e.id});s>=0&&t.taskTypes.splice(s,1),delete t.taskTypeMap[e.id],t.deleteTaskType={isLoading:!1,isError:!1}}),Object(Y["a"])(A,Kn,function(t,e){var s=e.sequenceId,i=e.subscribed;a.a.set(t.sequenceSubscriptions,s,i)}),Object(Y["a"])(A,Qn,function(t,e){t.sequenceSubscriptions={},e.forEach(function(e){t.sequenceSubscriptions[e]=!0})}),Object(Y["a"])(A,Zn,function(t){J()(t,Object(l["a"])({},Go))}),A),Xo={state:Wo,getters:Ko,actions:Qo,mutations:Yo},Jo={taskMap:{},taskStatusMap:{},assetValidationColumns:[],shotValidationColumns:[],taskStatuses:[],taskComments:{},taskPreviews:{},taskEntityPreviews:{},selectedTasks:{},selectedValidations:{},taskSearchQueries:[],nbSelectedTasks:0,nbSelectedValidations:0,isShowAssignations:!0,isShowInfos:!0,isSavingCommentPreview:!1,previewFormData:null},Zo=Object(l["a"])({},Jo),tr={getPerson:function(t){return zo.getters.getPerson(zo.state,zo.getters)(t)},getTaskType:function(t){return Xo.state.taskTypeMap[t]}},er={taskMap:function(t){return t.taskMap},getTaskComments:function(t,e){return function(e){return t.taskComments[e]}},getTaskPreviews:function(t,e){return function(e){return t.taskPreviews[e]}},getTaskComment:function(t,e){return function(e,s){return t.taskComments[e].find(function(t){return t.id===s})}},getTaskStatus:function(t,e){return function(e){return t.taskStatuses.find(function(t){return t.id===e})}},taskStatusOptions:function(t){return t.taskStatuses.map(function(t){return{label:t.short_name,value:t.id,color:t.color,isArtistAllowed:t.is_artist_allowed}})},selectedTasks:function(t){return t.selectedTasks},nbSelectedTasks:function(t){return t.nbSelectedTasks},nbSelectedValidations:function(t){return t.nbSelectedValidations},taskSearchQueries:function(t){return t.taskSearchQueries},isShowAssignations:function(t){return t.isShowAssignations},isShowInfos:function(t){return t.isShowInfos},taskEntityPreviews:function(t){return t.taskEntityPreviews},previewFormData:function(t){return t.previewFormData},isSavingCommentPreview:function(t){return t.isSavingCommentPreview},assetValidationColumns:function(t,e){return pa(Ca()(t.assetValidationColumns),e.taskTypeMap)},shotValidationColumns:function(t,e){return pa(Ca()(t.shotValidationColumns),e.taskTypeMap)}},sr={loadTask:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.callback;La.getTask(i,function(t,e){t||s(te,e),n&&n(t,e)})},loadTaskSubscribed:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.callback;La.getTaskSubscribed(i,function(t,e){t||s(Wn,{taskId:i,subscribed:e}),n&&n(t,e)})},subscribeToTask:function(t,e){var s=t.commit;t.state;return new G.a(function(t,i){La.subscribeToTask(e,function(n){n?i(n):(s(Wn,{taskId:e,subscribed:!0}),t())})})},subscribeToSequence:function(t,e){var s=t.commit,i=(t.state,e.sequenceId),n=e.taskTypeId;return new G.a(function(t,e){La.subscribeToSequence(i,n,function(a){a?e(a):(s(Kn,{sequenceId:i,taskTypeId:n,subscribed:!0}),t())})})},unsubscribeFromTask:function(t,e){var s=t.commit;t.state;return new G.a(function(t,i){La.unsubscribeFromTask(e,function(n){n?i(n):(s(Wn,{taskId:e,subscribed:!1}),t())})})},unsubscribeFromSequence:function(t,e){var s=t.commit,i=(t.state,e.sequenceId),n=e.taskTypeId;return new G.a(function(t,e){La.unsubscribeFromSequence(i,n,function(a){a?e(a):(s(Kn,{sequenceId:i,taskTypeId:n,subscribed:!1}),t())})})},loadTaskComments:function(t,e){var s=t.commit,i=(t.state,t.dispatch),n=e.taskId,a=e.entityId,o=e.callback;La.getTaskComments(n,function(t,e){t?o(t):(s(ne,{comments:e,taskId:n}),i("loadTaskEntityPreviewFiles",{callback:o,entityId:a}))})},loadTaskEntityPreviewFiles:function(t,e){var s=t.commit,i=(t.state,e.callback),n=e.entityId,a={id:n};Da.getEntityPreviewFiles(a,function(t,e){s(ae,e),i&&i(t)})},commentTask:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.taskStatusId,a=e.comment,o=e.callback;La.commentTask({taskId:i,taskStatusId:n,comment:a},function(t,e){t||s(ee,{comment:e,taskId:i}),o&&o(t,e)})},loadComment:function(t,e){var s=t.commit,i=(t.state,e.commentId),n=e.callback;La.getTaskComment({id:i},function(t,e){t||s(ee,{comment:e,taskId:e.object_id}),n&&n(t,e)})},createTasks:function(t,e){t.commit,t.state;var s={task_type_id:e.task_type_id,type:e.type,project_id:e.project_id};La.createTasks(s,function(t,s){e.callback&&e.callback(t,s)})},createSelectedTasks:function(t,e){var s=t.commit,i=t.state,n=e.type,a=e.projectId,o=e.callback;$a.a.eachSeries(Ta()(i.selectedValidations),function(t,e){var o=i.selectedValidations[t],r={entity_id:o.entity.id,task_type_id:o.column.id,type:n,project_id:a};La.createTask(r,function(t,i){s(oe,i),i.forEach(function(t){s(ye,o),t.assigneesInfo=[],o.task=t,s(_e,o)}),e(t,i[0])})},o)},deleteSelectedTasks:function(t){var e=t.commit,s=t.state;return new G.a(function(t,i){var n=Ta()(s.selectedTasks);$a.a.eachSeries(n,function(t,i){var n=s.taskMap[t];La.deleteTask(n,function(t){t||e(re,n),i(t)})},function(e){e?i(e):t()})})},deleteAllTasks:function(t,e){t.commit,t.state;var s=e.projectId,i=e.taskTypeId;return new G.a(function(t,e){La.deleteAllTasks(s,i,function(s){s?e(s):t()})})},createTask:function(t,e){var s=t.commit,i=(t.state,t.rootGetters,e.entityId),n=e.projectId,a=e.taskTypeId,o=e.type;return new G.a(function(t,e){var r={entity_id:i,task_type_id:a,type:o,project_id:n};La.createTask(r,function(i,n){i?e(i):(s(se,n[0]),t())})})},changeSelectedTaskStatus:function(t,e){var s=t.commit,i=t.state,n=e.taskStatusId,a=e.callback;$a.a.eachSeries(Ta()(i.selectedTasks),function(t,e){var a=i.taskMap[t];a&&a.task_status_id!==n?sr.commentTask({commit:s,state:i},{taskId:t,taskStatusId:n,comment:"",callback:function(t){e(t)}}):e()},function(t){a(t)})},changeSelectedPriorities:function(t,e){var s=t.commit,i=t.state,n=t.rootGetters,a=e.priority,o=e.callback;$a.a.eachSeries(Ta()(i.selectedTasks),function(t,e){var o=i.taskMap[t],r=n.taskTypeMap[o.task_type_id];o&&o.priority!==a?La.updateTask(t,{priority:a},function(t,i){t||s(ie,{task:i,taskType:r}),e(t)}):e()},function(t){o(t)})},changeSelectedEstimations:function(t,e){var s=t.commit,i=t.state,n=t.rootGetters;return new G.a(function(t,a){$a.a.eachSeries(Ta()(i.selectedTasks),function(t,a){var o=i.taskMap[t],r=n.taskTypeMap[o.task_type_id];o&&o.estimation!==e?La.updateTask(t,{estimation:e},function(t,e){t||s(ie,{task:e,taskType:r}),a(t)}):a()},function(e){e?a(e):t()})})},getTask:function(t,e){var s=t.commit,i=t.rootGetters,n=e.taskId,a=e.callback;La.getTask(n,function(t,e){if(!t){var n=i.taskTypeMap[e.task_type_id];s(ie,{task:e,taskType:n})}a&&a(t)})},deleteTask:function(t,e){var s=t.commit,i=e.task,n=e.callback;La.deleteTask(i,function(t){t||s(re,i),n&&n(t)})},editTaskComment:function(t,e){var s=t.commit,i=e.taskId,n=e.comment,a=e.callback;La.editTaskComment(n,function(t,e){t||s(ce,{taskId:i,comment:e}),a&&a(t)})},deleteTaskComment:function(t,e){var s=t.commit,i=t.rootState,n=e.taskId,a=e.commentId,o=e.callback,r=i.taskStatus.taskStatus.find(function(t){return"todo"===t.short_name});La.deleteTaskComment(n,a,function(t){t||s(le,{commentId:a,taskId:n,taskStatusMap:i.taskStatus.taskStatusMap,todoStatus:r}),o&&o(t)})},commentTaskWithPreview:function(t,e){var s=t.commit,i=(t.getters,t.state),n=e.taskId,a=e.commentText,o=e.taskStatusId,r=e.callback,c={taskId:n,taskStatusId:o,comment:a};s(ue),La.commentTask(c,function(t,e){if(t)r(t);else{var a={taskId:n,commentId:e.id};La.addPreview(a,function(t,a){t&&r?r(t):La.uploadPreview(a.id,i.previewFormData,function(t,i){t||(s(ee,{comment:e,taskId:n}),s(pe,{preview:i,taskId:n,commentId:e.id,comment:e})),r&&r(t,i)})})}})},addCommentExtraPreview:function(t,e){var s=t.commit,i=t.getters,n=t.state,a=e.taskId,o=e.commentId,r=e.previewId,c=e.callback;La.addExtraPreview(r,a,o,function(t,e){t&&c?c(t):La.uploadPreview(e.id,n.previewFormData,function(t){if(!t){var n=i.getTaskComment(a,o);e.extension="png",s(pe,{preview:e,taskId:a,commentId:o,comment:n})}c&&c(t,e)})})},deleteTaskPreview:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.commentId,a=e.previewId;return new G.a(function(t,e){La.deletePreview(i,n,a).then(function(){s(he,{taskId:i,previewId:a}),t()}).catch(e)})},changeCommentPreview:function(t,e){var s=t.commit,i=t.state,n=e.comment,a=e.preview,o=(e.taskId,e.callback),r=i.previewFormData.get("file").name,c=r.slice(r.length-4);a.extension=c,La.uploadPreview(a.id,i.previewFormData,function(t){t||s(me,{comment:n,preview:a}),o&&o(t,c)})},setPreview:function(t,e){var s=t.commit,i=t.state,n=e.taskId,a=e.entityId,o=e.previewId,r=e.callback,c=i.taskMap;La.setPreview(a,o,function(t,e){t&&r?r(t):r&&(s(Yn,{taskId:n,entityId:a,previewId:o,taskMap:c}),r(t,e))})},updatePreviewAnnotation:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.preview,a=e.annotations;return new G.a(function(t,e){La.updatePreviewAnnotation(n,a).then(function(e){s(fe,{taskId:i,preview:n,annotations:a}),t()}).catch(function(t){console.log(t),e(t)})})},refreshPreview:function(t,e){var s=t.commit,i=(t.state,e.taskId),n=e.previewId;return new G.a(function(t,e){La.getPreviewFile(n).then(function(e){s(fe,{taskId:i,preview:e,annotations:e.annotations}),t()}).catch(e)})},assignSelectedTasks:function(t,e){var s=t.commit,i=t.state,n=e.personId,a=e.callback,o=Ta()(i.selectedTasks);La.assignTasks(n,o,function(t){t||s(ke,{selectedTaskIds:o,personId:n}),a&&a(t)})},unassignSelectedTasks:function(t,e){var s=t.commit,i=t.state,n=(e.personId,e.callback),a=Ta()(i.selectedTasks);La.unassignTasks(a,function(t){t||s(be,a),n&&n(t)})},showAssignations:function(t){var e=t.commit;t.state;e(Xn,!0)},hideAssignations:function(t){var e=t.commit;t.state;e(Xn,!1)},showInfos:function(t){var e=t.commit;t.state;e(Jn,!0)},hideInfos:function(t){var e=t.commit;t.state;e(Jn,!1)},loadPreviewFileFormData:function(t,e){var s=t.commit;s("PREVIEW_FILE_SELECTED",e)},addSelectedTask:function(t,e){var s=t.commit;s(_e,e)},addSelectedTasks:function(t,e){var s=t.commit;s(ve,e)},clearSelectedTasks:function(t,e){var s=t.commit;s(ge,e)},removeSelectedTask:function(t,e){var s=t.commit;s(ye,e)},saveTaskSearch:function(t,e){var s=t.commit,i=t.rootGetters,n=e.searchQuery,a=e.entityType;return new G.a(function(t,e){var o=Zo.taskSearchQueries.find(function(t){return t.name===n}),r=i.currentProduction;o?t():xa.createFilter("task",n,n,r.id,a,function(i,n){s(Te,{searchQuery:n,production:r}),i?e(i):t(n)})})},removeTaskSearch:function(t,e){var s=t.commit,i=t.rootGetters;return new G.a(function(t,n){var a=i.currentProduction;xa.removeFilter(e,function(i){s(Se,{searchQuery:e,production:a}),i?n(i):t()})})}},ir=($={},Object(Y["a"])($,$s,function(t,e){t.assetValidationColumns=[]}),Object(Y["a"])($,Ls,function(t,e){var s=e.production,i=e.assets,n=e.personMap,a=e.userFilters,o={};t.taskMap={},i.forEach(function(e){e.validations={},e.tasks.forEach(function(s){var i=tr.getTaskType(s.task_type_id);o[i.name]||(o[i.name]=s.task_type_id),s.assignees.length>1&&(s.assignees=s.assignees.sort(function(t,e){return n[t].name.localeCompare(n[e].name)})),e.validations[s.task_type_id]=s.id,s.episode_id=e.source_id,t.taskMap[s.id]=s}),e.tasks=e.tasks.map(function(t){return t.id})}),t.assetValidationColumns=o,a.task&&a.task[s.id]?t.taskSearchQueries=a.task[s.id]:t.taskSearchQueries=[]}),Object(Y["a"])($,ti,function(t,e){t.shotValidationColumns={}}),Object(Y["a"])($,ei,function(t,e){var s=e.production,i=e.shots,n=e.personMap,a=e.userFilters,o={};t.taskMap={},i.forEach(function(e){e.validations={},e.tasks.forEach(function(s){var i=tr.getTaskType(s.task_type_id);o[i.name]||(o[i.name]=s.task_type_id),s.assignees.length>1&&(s.assignees=s.assignees.sort(function(t,e){return n[t].name.localeCompare(n[e])})),e.validations[s.task_type_id]=s.id,s.episode_id=e.episode_id,t.taskMap[s.id]=s}),e.tasks=e.tasks.map(function(t){return t.id})}),t.shotValidationColumns=o,a.task&&a.task[s.id]?t.taskSearchQueries=a.task[s.id]:t.taskSearchQueries=[]}),Object(Y["a"])($,te,function(t,e){J()(e,{project_name:e.project.name,entity_type_name:e.entity_type.name}),"Shot"===e.entity_type.name?e.episode?e.entity_name="".concat(e.episode.name," / ").concat(e.sequence.name," / ").concat(e.entity.name):e.entity_name="".concat(e.sequence.name," / ").concat(e.entity.name):e.entity_name="".concat(e.entity_type.name," / ").concat(e.entity.name),t.taskMap[e.id]=e}),Object(Y["a"])($,ae,function(t,e){t.taskEntityPreviews=e}),Object(Y["a"])($,ne,function(t,e){var s=e.taskId,i=e.comments;i.forEach(function(t){t.person=zo.helpers.addAdditionalInformation(t.person)}),t.taskComments[s]=i,t.taskPreviews[s]=i.reduce(function(t,e){if(e.previews&&e.previews.length>0){var s=e.previews[0];return s.previews=e.previews.map(function(t){return{id:t.id,annotations:t.annotations}}),t.push(s),t}return t},[])}),Object(Y["a"])($,is,function(t,e){t.taskStatuses=da(e),t.taskStatuses.forEach(function(e){t.taskStatusMap[e.id]=e})}),Object(Y["a"])($,Wn,function(t,e){e.taskId,e.subscribed}),Object(Y["a"])($,ee,function(t,e){var s=e.comment,i=e.taskId,n=t.taskMap[i];if(void 0===s.task_status){var a=er.getTaskStatus(t,er);s.task_status=a(s.task_status_id)}if(void 0===s.person){var o=zo.getters.getPerson(zo.state,zo.getters);s.person=o(s.person_id)}s.person=zo.helpers.addAdditionalInformation(s.person),t.taskComments[i]||(t.taskComments[i]=[]),t.taskComments[i].find(function(t){return t.id===s.id})||t.taskComments[i].unshift(s),n&&J()(n,{task_status_id:s.task_status_id,last_comment:s})}),Object(Y["a"])($,re,function(t,e){t.taskComments[e.id]=void 0,t.taskPreviews[e.id]=void 0,t.taskMap[e.id]=void 0}),Object(Y["a"])($,le,function(t,e){var s=e.taskId,i=(e.commentId,e.taskStatusMap),n=e.todoStatus,a=t.taskMap[s],o=n;if(t.taskComments[s]=Object(Oa["a"])(t.taskComments[s]).splice(1),t.taskPreviews[s]=Object(Oa["a"])(t.taskPreviews[s]).splice(1),t.taskComments[s].length>0){var r=t.taskComments[s][0].task_status_id;o=i[r]}a&&J()(a,{task_status_id:o.id,task_status_priority:o.priority})}),Object(Y["a"])($,ce,function(t,e){var s=e.taskId,i=e.comment;t.taskComments[s][0].text=i.text}),Object(Y["a"])($,de,function(t,e){t.previewFormData=e}),Object(Y["a"])($,ue,function(t){t.isSavingCommentPreview=!0}),Object(Y["a"])($,pe,function(t,e){var s=e.preview,i=e.taskId,n=(e.commentId,e.comment);t.isSavingCommentPreview=!1;var a={id:s.id,feedback:!1,revision:s.revision,extension:s.extension},o=t.taskPreviews[i].find(function(t){return t.revision===s.revision});if(o){var r=o.previews.find(function(t){return t.id===a.id});r||o.previews.push(a)}else a.previews=[Object(l["a"])({},a)],t.taskPreviews[i]=[a].concat(t.taskPreviews[i]),n.preview=a,n.previews=[a]}),Object(Y["a"])($,he,function(t,e){var s=e.taskId,i=e.previewId;t.taskPreviews[s].forEach(function(t){var e=t.previews.findIndex(function(t){return t.id===i});e>=0&&t.previews.splice(e,1)})}),Object(Y["a"])($,fe,function(t,e){var s=e.taskId,i=e.preview,n=e.annotations,a=null;t.taskPreviews[s].forEach(function(t){t.previews.forEach(function(t){t.id===i.id&&(a=t)}),t.id===i.id&&(t.annotations=n)}),a&&(a.annotations=n)}),Object(Y["a"])($,me,function(t,e){var s=e.preview,i=e.comment,n=i.object_id,a={id:s.id,feedback:!1,revision:s.revision,extension:s.extension};t.taskPreviews[n].shift(),t.taskPreviews[n]=[a].concat(t.taskPreviews[n])}),Object(Y["a"])($,_e,function(t,e){if(e.task)t.selectedTasks[e.task.id]=e.task,t.nbSelectedTasks=Ta()(t.selectedTasks).length;else{var s=e.column.id,i=e.entity.id,n="".concat(i,"-").concat(s);t.selectedValidations[n]=e,t.nbSelectedValidations=Ta()(t.selectedValidations).length}}),Object(Y["a"])($,ve,function(t,e){var s=JSON.parse(ka()(t.selectedTasks)),i=JSON.parse(ka()(t.selectedValidations)),n=!1;e.forEach(function(t){if(t.task)s[t.task.id]=t.task;else{var e=t.column.id,a=t.entity.id,o="".concat(a,"-").concat(e);i[o]=t,n=!0}}),t.selectedTasks=s,t.nbSelectedTasks=Ta()(t.selectedTasks).length,n&&(t.selectedValidations=i,t.nbSelectedValidations=Ta()(t.selectedValidations).length)}),Object(Y["a"])($,ye,function(t,e){if(e.task)delete t.selectedTasks[e.task.id],t.nbSelectedTasks=Ta()(t.selectedTasks).length;else{var s=e.column.id,i=e.entity.id,n="".concat(i,"-").concat(s);delete t.selectedValidations[n],t.nbSelectedValidations=Ta()(t.selectedValidations).length}}),Object(Y["a"])($,ge,function(t){t.selectedTasks={},t.nbSelectedTasks=0,t.selectedValidations={},t.nbSelectedValidations=0}),Object(Y["a"])($,oe,function(t,e){e.forEach(function(e){t.taskMap[e.id]=e})}),Object(Y["a"])($,se,function(t,e){t.taskMap[e.id]=e}),Object(Y["a"])($,ie,function(t,e){var s=e.task,i=t.taskMap[s.id];i&&J()(t.taskMap[s.id],{task_status_id:s.task_status_id,task_status_short_name:t.taskStatusMap[s.task_status_id].short_name,priority:s.priority,estimation:s.estimation,duration:s.duration,real_start_date:s.real_start_date,end_date:s.end_date,real_end_date:s.end_date,last_comment_date:s.last_comment_date,retake_count:s.retake_count})}),Object(Y["a"])($,ke,function(t,e){var s=e.selectedTaskIds,i=e.personId;s.forEach(function(e){var s=t.taskMap[e];s&&!s.assignees.find(function(t){return t===i})&&s.assignees.push(i)})}),Object(Y["a"])($,be,function(t,e){e.forEach(function(e){var s=t.taskMap[e];s.assignees=[],s.assigneesInfo=[]})}),Object(Y["a"])($,Yn,function(t,e){var s=e.taskId,i=e.previewId;t.taskMap[s]&&(t.taskMap[s].entity.preview_file_id=i)}),Object(Y["a"])($,Xn,function(t,e){t.isShowAssignations=e}),Object(Y["a"])($,Jn,function(t,e){t.isShowInfos=e}),Object(Y["a"])($,Et,function(t,e){var s=e.tasks;s.forEach(function(e){if(e.last_comment.person_id){var s=tr.getPerson(e.last_comment.person_id);e.last_comment.person=s}t.taskMap[e.id]=e})}),Object(Y["a"])($,Ht,function(t,e){var s=e.tasks;s.forEach(function(e){if(e.last_comment.person_id){var s=tr.getPerson(e.last_comment.person_id);e.last_comment.person=s}t.taskMap[e.id]=e})}),Object(Y["a"])($,Te,function(t,e){var s=e.searchQuery;t.taskSearchQueries.includes(s)||(t.taskSearchQueries.push(s),t.taskSearchQueries=da(t.taskSearchQueries))}),Object(Y["a"])($,Se,function(t,e){var s=e.searchQuery,i=t.taskSearchQueries.findIndex(function(t){return t.name===s.name});i>=0&&t.taskSearchQueries.splice(i,1)}),Object(Y["a"])($,Zn,function(t,e){J()(t,Object(l["a"])({},Jo))}),$),nr={state:Zo,getters:er,actions:sr,mutations:ir},ar={getProductions:function(t){tt.get("/api/data/projects/all",t)},getOpenProductions:function(t){tt.get("/api/data/projects/open",t)},getProductionStatus:function(t){tt.get("/api/data/project-status",t)},newProduction:function(t,e){var s={name:t.name,project_status_id:t.project_status_id,production_type:t.production_type};tt.post("/api/data/projects/",s,e)},updateProduction:function(t,e){var s={name:t.name,project_status_id:t.project_status_id,production_type:t.production_type,fps:t.fps,ratio:t.ratio,resolution:t.resolution};tt.put("/api/data/projects/".concat(t.id),s,e)},postAvatar:function(t,e,s){tt.post("/api/pictures/thumbnails/projects/".concat(t),e,s)},deleteProduction:function(t,e){tt.del("/api/data/projects/".concat(t.id),e)},addPersonToTeam:function(t,e){return new G.a(function(s,i){var n={person_id:e};tt.post("/api/data/projects/".concat(t,"/team"),n,function(t,e){t?i(t):s(e)})})},removePersonFromTeam:function(t,e){return new G.a(function(s,i){tt.del("/api/data/projects/".concat(t,"/team/").concat(e),function(t,e){t?i(t):s(e)})})},addMetadataDescriptor:function(t,e){return new G.a(function(s,i){var n={name:e.name,choices:e.values,entity_type:e.entity_type};tt.post("/api/data/projects/".concat(t,"/metadata-descriptors"),n,function(t,e){t?i(t):s(e)})})},getMetadataDescriptor:function(t,e){return new G.a(function(s,i){tt.get("/api/data/projects/".concat(t,"/metadata-descriptors/").concat(e),function(t,e){t?i(t):s(e)})})},updateMetadataDescriptor:function(t,e){return new G.a(function(s,i){var n={id:e.id,name:e.name,choices:e.values,entity_type:e.entity_type};tt.put("/api/data/projects/".concat(t,"/metadata-descriptors/").concat(e.id),n,function(t,e){t?i(t):s(e)})})},deleteMetadataDescriptor:function(t,e){return new G.a(function(s,i){tt.del("/api/data/projects/".concat(t,"/metadata-descriptors/").concat(e),function(t){t?i(t):s()})})}},or={productions:[],productionMap:{},openProductions:[],productionStatus:[],currentProduction:null,productionAvatarFormData:null,isProductionsLoading:!1,isProductionsLoadingError:!1,isOpenProductionsLoading:!1,editProduction:{isLoading:!1,isError:!1},deleteProduction:{isLoading:!1,isError:!1},assetsPath:{name:"open-productions"},assetTypesPath:{name:"open-productions"},shotsPath:{name:"open-productions"},sequencesPath:{name:"open-productions"},episodesPath:{name:"open-productions"},breakdownPath:{name:"open-productions"},playlistsPath:{name:"open-productions"},teamPath:{name:"open-productions"}},rr=Object(l["a"])({},or),cr={getProductionComponentPath:function(t,e,s){return s?{name:"episode-"+t,params:{episode_id:s,production_id:e}}:e?{name:t,params:{production_id:e}}:{name:"open-productions"}}},lr={productions:function(t){return t.productions},productionMap:function(t){return t.productionMap},openProductions:function(t){return t.openProductions},productionStatus:function(t){return t.productionStatus},productionAvatarFormData:function(t){return t.productionAvatarFormData},isProductionsLoading:function(t){return t.isProductionsLoading},isProductionsLoadingError:function(t){return t.isProductionsLoadingError},isOpenProductionsLoading:function(t){return t.isOpenProductionsLoading},editProduction:function(t){return t.editProduction},deleteProduction:function(t){return t.deleteProduction},assetsPath:function(t){return t.assetsPath},assetTypesPath:function(t){return t.assetTypesPath},shotsPath:function(t){return t.shotsPath},sequencesPath:function(t){return t.sequencesPath},episodesPath:function(t){return t.episodesPath},breakdownPath:function(t){return t.breakdownPath},playlistsPath:function(t){return t.playlistsPath},teamPath:function(t){return t.teamPath},currentProduction:function(t){return t.currentProduction?t.currentProduction:t.openProductions.length>0?t.openProductions[0]:null},isTVShow:function(t){var e=lr.currentProduction(t);return e&&"tvshow"===e.production_type},assetMetadataDescriptors:function(t){return t.currentProduction&&t.currentProduction.descriptors?da(t.currentProduction.descriptors.filter(function(t){return"Asset"===t.entity_type})):[]},shotMetadataDescriptors:function(t){return t.currentProduction&&t.currentProduction.descriptors?da(t.currentProduction.descriptors.filter(function(t){return"Shot"===t.entity_type})):[]},productionStatusOptions:function(t){return t.productionStatus.map(function(t){return{label:t.name,value:t.id}})},openProductionOptions:function(t){return t.openProductions.map(function(t){return{label:t.name,value:t.id}})},getProduction:function(t,e){return function(e){return t.productions.find(function(t){return t.id===e})}},getProductionStatus:function(t,e){return function(e){return t.productionStatus.find(function(t){return t.id===e})}}},dr={loadProductionStatus:function(t,e){var s=t.commit;t.state;s(Ae),ar.getProductionStatus(function(t,i){t?s(Le):s($e,i),e&&e(t)})},loadOpenProductions:function(t,e){var s=t.commit;t.state;s(Pe),ar.getOpenProductions(function(t,i){t?s(Oe):s(xe,i),e&&e(t)})},loadProductions:function(t,e){var s=t.commit;t.state;s(Ce),ar.getProductions(function(t,i){t?s(Ee):s(we,i),e&&e(t)})},newProduction:function(t,e){var s=t.commit,i=(t.state,e.data),n=e.callback;s(De,i),ar.newProduction(i,function(t,e){t?s(Ie):s(je,e),n&&n(t,e)})},editProduction:function(t,e){var s=t.commit;t.state;s(De),ar.updateProduction(e.data,function(t,i){t?s(Ie):s(je,i),e.callback&&e.callback(t)})},deleteProduction:function(t,e){var s=t.commit;t.state;s(Me);var i=e.production;ar.deleteProduction(i,function(t){t?s(qe):s(Fe,i),e.callback&&e.callback(t)})},setProduction:function(t,e){var s=t.commit,i=t.rootGetters;if(s(Ne,e),i.isTVShow){var n=i.currentEpisode,a=n?n.id:null;e&&a&&s(sn,{productionId:e,episodeId:a})}else e&&s(sn,{productionId:e})},storeProductionPicture:function(t,e){var s=t.commit;s(Re,e)},uploadProductionAvatar:function(t,e){var s=t.commit,i=t.state;return new G.a(function(t,n){ar.postAvatar(e,i.productionAvatarFormData,function(i){s(Ve,e),i?n(i):t()})})},addPersonToTeam:function(t,e){var s=t.commit,i=t.state;return new G.a(function(t,n){return s(Be,e.id),ar.addPersonToTeam(i.currentProduction.id,e.id).then(t).catch(n)})},removePersonFromTeam:function(t,e){var s=t.commit,i=t.state;return new G.a(function(t,n){return s(Ue,e.id),ar.removePersonFromTeam(i.currentProduction.id,e.id).then(t).catch(n)})},addMetadataDescriptor:function(t,e){var s=t.commit,i=t.state;return new G.a(function(t,n){return e.id?ar.updateMetadataDescriptor(i.currentProduction.id,e).then(function(e){s(He,{production:i.currentProduction,descriptor:e}),t()}).catch(n):ar.addMetadataDescriptor(i.currentProduction.id,e).then(function(e){s(ze,{production:i.currentProduction,descriptor:e}),t()}).catch(n)})},deleteMetadataDescriptor:function(t,e){var s=t.commit,i=t.state;return new G.a(function(t,n){return ar.deleteMetadataDescriptor(i.currentProduction.id,e).then(function(){s(Ge,{id:e}),t()}).catch(n)})},refreshMetadataDescriptor:function(t,e){var s=t.commit,i=t.state;return new G.a(function(t,n){return ar.getMetadataDescriptor(i.currentProduction.id,e).then(function(e){var n={};i.openProductions.forEach(function(t){t.descriptors.forEach(function(t){n[t.id]=t})}),n[e.id]?s(He,{production:i.productionMap[e.project_id],descriptor:e}):s(ze,{production:i.productionMap[e.project_id],descriptor:e}),t()}).catch(n)})}},ur=(L={},Object(Y["a"])(L,Ce,function(t){t.productions=[],t.isProductionsLoading=!0,t.isProductionsLoadingError=!1}),Object(Y["a"])(L,Ee,function(t){t.productions=[],t.isProductionsLoading=!1,t.isProductionsLoadingError=!0}),Object(Y["a"])(L,we,function(t,e){t.isProductionsLoading=!1,t.isProductionsLoadingError=!1,t.productions=aa(e);var s={};t.productions.forEach(function(t){s[t.id]||(s[t.id]=t)}),t.productionMap=s}),Object(Y["a"])(L,Pe,function(t){t.isOpenProductionsLoading=!0,t.openProductions=[]}),Object(Y["a"])(L,Oe,function(t){t.isOpenProductionsLoading=!1}),Object(Y["a"])(L,xe,function(t,e){t.isOpenProductionsLoading=!1,t.openProductions=da(e);var s={};e.forEach(function(t){s[t.id]=t}),t.productionMap=s,!t.currentProduction&&t.openProductions.length>0&&(t.currentProduction=t.openProductions[0])}),Object(Y["a"])(L,Ae,function(t){t.productionStatus=[]}),Object(Y["a"])(L,Le,function(t){}),Object(Y["a"])(L,$e,function(t,e){t.productionStatus=e}),Object(Y["a"])(L,De,function(t,e){t.editProduction.isLoading=!0,t.editProduction.isError=!1}),Object(Y["a"])(L,Ie,function(t){t.editProduction.isLoading=!1,t.editProduction.isError=!0}),Object(Y["a"])(L,je,function(t,e){var s=t.productionMap[e.id],i=lr.getProductionStatus(t)(e.project_status_id),n=t.openProductions.find(function(t){return t.id===e.id});if(e.project_status_name=i.name,s){var a=t.openProductions.findIndex(function(t){return t.id===e.id});e.project_status_id&&(a>=0&&s.project_status_id!==e.project_status_id?t.openProductions.splice(a,1):a<0&&(t.openProductions.push(s),t.openProductions=da(t.openProductions))),e.production_type&&e.production_type!==s.production_type&&"short"===e.production_type&&(s.first_episode_id=void 0,n.first_episode_id=void 0),J()(s,e),n&&J()(n,e)}else t.productions.push(e),t.productionMap[e.id]=e,t.openProductions.push(e),t.productions=aa(t.productions),t.openProductions=da(t.openProductions);t.editProduction={isLoading:!1,isError:!1}}),Object(Y["a"])(L,Me,function(t){t.deleteProduction={isLoading:!0,isError:!1}}),Object(Y["a"])(L,qe,function(t){t.deleteProduction={isLoading:!1,isError:!0}}),Object(Y["a"])(L,Fe,function(t,e){var s=t.productions.findIndex(function(t){return t.id===e.id});t.productions.splice(s,1),t.deleteProduction={isLoading:!1,isError:!1}}),Object(Y["a"])(L,Re,function(t,e){t.productionAvatarFormData=e}),Object(Y["a"])(L,Ve,function(t,e){var s=t.productionMap[e];s&&(s.has_avatar=!0)}),Object(Y["a"])(L,Ne,function(t,e){var s=t.productionMap[e];t.currentProduction=s}),Object(Y["a"])(L,sn,function(t,e){var s=e.productionId,i=e.episodeId;t.assetsPath=cr.getProductionComponentPath("assets",s,i),t.assetTypesPath=cr.getProductionComponentPath("production-asset-types",s,i),t.shotsPath=cr.getProductionComponentPath("shots",s,i),t.sequencesPath=cr.getProductionComponentPath("sequences",s,i),t.episodesPath=cr.getProductionComponentPath("episodes",s),t.breakdownPath=cr.getProductionComponentPath("breakdown",s,i),t.playlistsPath=cr.getProductionComponentPath("playlists",s,i),t.teamPath=cr.getProductionComponentPath("team",s)}),Object(Y["a"])(L,Be,function(t,e){t.currentProduction.team.find(function(t){return t===e})||t.currentProduction.team.push(e)}),Object(Y["a"])(L,Ue,function(t,e){var s=t.currentProduction.team.findIndex(function(t){return t===e});null!==s&&t.currentProduction.team.splice(s,1)}),Object(Y["a"])(L,ze,function(t,e){var s=e.production,i=e.descriptor;s&&(s.descriptors?s.descriptors.push(i):s.descriptors=[i])}),Object(Y["a"])(L,He,function(t,e){var s=e.production,i=e.descriptor;s&&(s.descriptors?to(s.descriptors,i):s.descriptors=[])}),Object(Y["a"])(L,Ge,function(t,e){var s=t.openProductions.find(function(t){return t.descriptors.find(function(t){return t.id===e.id})});s&&(s.descriptors=eo(s.descriptors,e))}),Object(Y["a"])(L,Zn,function(t){J()(t,Object(l["a"])({},or))}),L),pr={state:rr,getters:lr,actions:dr,mutations:ur},hr=60,mr={getCurrentProduction:function(){return pr.getters.currentProduction(pr.state)},getTaskStatus:function(t){return nr.state.taskStatusMap[t]},getTaskType:function(t){return Xo.state.taskTypeMap[t]},getTask:function(t){return nr.state.taskMap[t]},getPerson:function(t){return zo.state.personMap[t]},populateTask:function(t,e,s){return t.name=mr.getTaskType(t.task_type_id).priority.toString(),t.task_status_short_name=mr.getTaskStatus(t.task_status_id).short_name,J()(t,{project_id:e.production_id,entity_name:"".concat(e.asset_type_name," / ").concat(e.name),entity_type_name:e.asset_type_name,entity:{id:e.id,preview_file_id:e.preview_file_id}}),t},groupAssetsByType:function(t){var e=[],s=[],i=null,n=!0,a=!1,o=void 0;try{for(var r,c=Ea()(t);!(n=(r=c.next()).done);n=!0){var l=r.value;i&&l.asset_type_name!==i.asset_type_name&&(e.push(s.slice(0)),s=[]),s.push(l),i=l}}catch(d){a=!0,o=d}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return e.push(s),e}},fr={assetIndex:{},assetTypeIndex:{},assets:[]},_r={assetMap:{},nbValidationColumns:0,filteredAssets:[],displayedAssets:[],displayedAssetsLength:0,assetFilledColumns:{},assetSearchText:"",assetSelectionGrid:{},assetSearchQueries:[],displayedAssetTypes:[],displayedAssetTypesLength:0,assetTypeSearchText:"",assetTypeStats:{},isAssetsLoading:!1,isAssetsLoadingError:!1,assetsCsvFormData:null,assetCreated:"",editAsset:{isCreateError:!1,isLoading:!1,isError:!1},deleteAsset:{isLoading:!1,isError:!1},restoreAsset:{isLoading:!1,isError:!1},personTasks:[],assetListScrollPosition:0},vr=Object(l["a"])({},_r),yr={assetMap:function(t){return t.assetMap},assetSearchText:function(t){return t.assetSearchText},assetSearchQueries:function(t){return t.assetSearchQueries},assetSelectionGrid:function(t){return t.assetSelectionGrid},isAssetsLoading:function(t){return t.isAssetsLoading},isAssetsLoadingError:function(t){return t.isAssetsLoadingError},displayedAssets:function(t){return t.displayedAssets},displayedAssetsLength:function(t){return t.displayedAssetsLength},assetFilledColumns:function(t){return t.assetFilledColumns},displayedAssetTypes:function(t){return t.displayedAssetTypes},displayedAssetTypesLength:function(t){return t.displayedAssetTypesLength},assetTypeSearchText:function(t){return t.assetTypeSearchText},assetTypeStats:function(t){return t.assetTypeStats},assetTypeListScrollPosition:function(t){return t.assetTypeListScrollPosition},assetListScrollPosition:function(t){return t.assetListScrollPosition},displayedAssetsByType:function(t){return mr.groupAssetsByType(t.displayedAssets)},assetsByType:function(t){return mr.groupAssetsByType(Ca()(t.displayedAssets))},editAsset:function(t){return t.editAsset},deleteAsset:function(t){return t.deleteAsset},restoreAsset:function(t){return t.restoreAsset},assetCreated:function(t){return t.assetCreated},assetsCsvFormData:function(t){return t.assetsCsvFormData}},gr={loadAssets:function(t,e){var s=t.commit,i=t.state,n=t.rootGetters,a=n.currentProduction,o=n.userFilters,r=n.personMap,c=n.currentEpisode,l=n.isTVShow;return l&&!c?e?e():null:i.isAssetsLoading?e():(s($s),void Pa.getAssets(a,c,function(t,i){t?s(Ds):(i.forEach(function(t){return t.project_name=a.name,t}),s(Ls,{production:a,assets:i,userFilters:o,personMap:r})),e&&e(t)}))},loadAsset:function(t,e){var s=t.commit,i=(t.state,t.rootGetters),n=e.assetId,a=e.callback,o=i.taskTypeMap;Pa.getAsset(n,function(t,e){t||s(js,{asset:e,taskTypeMap:o}),a&&a(t)})},loadAssetCastIn:function(t,e){var s=t.commit,i=(t.state,t.rootState),n=e.asset,a=e.callback,o=i.shots.shotMap;Pa.getCastIn(n,function(t,e){t||s(Is,{asset:n,castIn:e,shotMap:o}),a&&a(t,e)})},newAsset:function(t,e){var s=t.commit,i=t.dispatch,n=(t.state,t.rootGetters),a=e.data,o=e.callback;if(fr.assets.find(function(t){return t.name===a.name}))return o();s(Ns,a),Pa.newAsset(a,function(t,e){if(t)s(Vs),o&&o(t);else{var a=n.assetTypeMap;s(Rs,{newAsset:e,assetTypeMap:a});var r=Ca()(n.assetValidationColumns),c=r.map(function(t){return i("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t,type:"assets"})});G.a.all(c).then(function(){o&&o()}).catch(function(t){console.log(t)})}})},editAsset:function(t,e){var s=t.commit,i=(t.state,t.rootState),n=e.data,a=e.callback,o=n.name&&fr.assets.find(function(t){return t.name===n.name&&n.id!==t.id});if(o)return a();s(Ns);var r=i.assetTypes.assetTypeMap;Pa.updateAsset(n,function(t,e){t?s(Vs):s(Rs,{newAsset:e,assetTypeMap:r}),a&&a(t)})},deleteAsset:function(t,e){var s=t.commit,i=(t.state,e.asset),n=e.callback;s(Bs),Pa.deleteAsset(i,function(t){t?s(zs):s(Us,i),n&&n(t)})},restoreAsset:function(t,e){var s=t.commit;t.state;s(Hs);var i=e.asset;Pa.restoreAsset(i,function(t){t?s(Ws):s(Gs,i),e.callback&&e.callback(t)})},uploadAssetFile:function(t,e){var s=t.commit,i=t.state,n=mr.getCurrentProduction();s(Fs),Pa.postCsv(n,i.assetsCsvFormData,function(t){s(qs),e&&e(t)})},setAssetSearch:function(t,e){var s=t.commit,i=t.rootGetters,n=i.taskStatusMap,a=i.taskTypeMap,o=i.taskMap,r=i.currentProduction;s(Ks,{assetSearch:e,taskMap:o,taskStatusMap:n,taskTypeMap:a,production:r})},saveAssetSearch:function(t,e){var s=t.commit,i=t.rootGetters;return new G.a(function(t,n){var a=vr.assetSearchQueries.find(function(t){return t.name===e}),o=i.currentProduction;a?t():xa.createFilter("asset",e,e,o.id,null,function(e,i){s(Qs,{searchQuery:i,production:o}),e?n(e):t(i)})})},removeAssetSearch:function(t,e){var s=t.commit,i=t.rootGetters;return new G.a(function(t,n){var a=i.currentProduction;xa.removeFilter(e,function(i){s(Ys,{searchQuery:e,production:a}),i?n(i):t()})})},displayMoreAssets:function(t){var e=t.commit,s=t.rootGetters;e(Xs,{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},initAssetTypes:function(t){t.commit;var e=t.dispatch;t.state,t.rootState,t.rootGetters;return new G.a(function(t,s){e("setLastProductionScreen","production-asset-types"),e("loadAssets",function(i){i?s(i):(e("computeAssetTypeStats"),t())})})},setAssetTypeListScrollPosition:function(t){var e=t.commit;e(As)},computeAssetTypeStats:function(t){var e=t.commit,s=t.rootGetters,i=s.taskStatusMap,n=s.taskMap;e(Js,{taskStatusMap:i,taskMap:n})},setAssetTypeSearch:function(t,e){var s=t.commit;s(Zs,e)}},kr=(D={},Object(Y["a"])(D,$s,function(t){fr.assets=[],t.assetMap={},t.isAssetsLoading=!0,t.isAssetsLoadingError=!1,fr.assetIndex={},t.displayedAssets=[],t.assetFilledColumns={},t.displayedAssetsLength=0,t.assetSearchQueries=[]}),Object(Y["a"])(D,Ds,function(t){t.isAssetsLoading=!1,t.isAssetsLoadingError=!0}),Object(Y["a"])(D,Ls,function(t,e){var s=e.production,i=e.assets,n=e.userFilters,a={},o={};i=sa(i),t.assetMap={},i.forEach(function(e){var i=0;o[e.asset_type]||(o[e.asset_type_id]={id:e.asset_type_id,name:e.asset_type_name}),e.production_id=s.id,e.tasks.forEach(function(t){mr.populateTask(t,e),a[t.task_type_id]=!0,i+=t.duration}),e.timeSpent=i,t.assetMap[e.id]=e}),fr.assets=i,t.isAssetsLoading=!1,t.isAssetsLoadingError=!1,t.nbValidationColumns=Ta()(a).length,fr.assetIndex=mo(i),t.displayedAssets=fr.assets.slice(0,hr),t.displayedAssetsLength=fr.assets?fr.assets.length:0,t.assetFilledColumns=io(t.displayedAssets),t.assetTypes=Ca()(o),t.displayedAssetTypes=t.assetTypes,t.displayedAssetTypesLength=t.assetTypes.length,fr.assetTypeIndex=uo(t.assetTypes);var r=t.displayedAssets.length,c=t.nbValidationColumns;t.assetSelectionGrid=Ha(r,c),n.asset&&n.asset[s.id]?t.assetSearchQueries=n.asset[s.id]:t.assetSearchQueries=[]}),Object(Y["a"])(D,js,function(t,e){var s=e.asset,i=e.taskTypeMap;s.tasks.forEach(function(t){mr.populateTask(t,s)}),s.tasks=oa(s.tasks,i),t.assetMap[s.id]=s}),Object(Y["a"])(D,Ms,function(t,e){t.assetsCsvFormData=e}),Object(Y["a"])(D,Fs,function(t){}),Object(Y["a"])(D,qs,function(t){t.assetsCsvFormData=null}),Object(Y["a"])(D,Ns,function(t,e){t.editAsset.isLoading=!0,t.editAsset.isError=!1}),Object(Y["a"])(D,Vs,function(t){t.editAsset.isLoading=!1,t.editAsset.isError=!0,t.editAsset.isCreateError=!0}),Object(Y["a"])(D,Rs,function(t,e){var s=e.newAsset,i=e.assetTypeMap;t.editAsset.isCreateError=!1,t.editAsset.isSuccess=!0,t.assetCreated=s.name;var n=t.assetMap[s.id],a=i[s.entity_type_id];if(a&&(s.asset_type_name=a.name,s.asset_type_id=a.id),s.tasks=[],n)s.episode_id=s.source_id,J()(n,s),t.displayedAssets=sa(t.displayedAssets);else{s.validations={},s.production_id=s.project_id,s.episode_id=s.source_id,fr.assets.push(s),fr.assets=sa(fr.assets),t.displayedAssets.push(s),t.displayedAssets=sa(t.displayedAssets),t.assetFilledColumns=io(t.displayedAssets),t.displayedAssetsLength=fr.assets.length;var o=t.displayedAssets.length,r=t.nbValidationColumns;t.assetSelectionGrid=Ha(o,r),t.assetMap[s.id]=s}t.editAsset={isLoading:!1,isError:!1},fr.assetIndex=mo(fr.assets)}),Object(Y["a"])(D,Bs,function(t){t.deleteAsset={isLoading:!0,isError:!1}}),Object(Y["a"])(D,zs,function(t){t.deleteAsset={isLoading:!1,isError:!0}}),Object(Y["a"])(D,Us,function(t,e){var s=t.assetMap[e.id];if(s.tasks.length>0&&!e.canceled)s.canceled=!0;else{var i=fr.assets.findIndex(function(t){return t.id===e.id}),n=fr.assets.findIndex(function(t){return t.id===e.id});fr.assets.splice(i,1),t.displayedAssets.splice(n,1),t.assetFilledColumns=io(t.displayedAssets),t.assetMap[e.id]=void 0,t.displayedAssetsLength=Math.max(t.displayedAssetsLength-1,0)}t.deleteAsset={isLoading:!1,isError:!1},fr.assetIndex=mo(fr.assets)}),Object(Y["a"])(D,Hs,function(t){t.restoreAsset={isLoading:!0,isError:!1}}),Object(Y["a"])(D,Ws,function(t){t.restoreAsset={isLoading:!1,isError:!0}}),Object(Y["a"])(D,Gs,function(t,e){var s=t.assetMap[e.id];s.canceled=!1,t.restoreAsset={isLoading:!1,isError:!1},fr.assetIndex=mo(fr.assets)}),Object(Y["a"])(D,Hs,function(t){t.restoreAsset={isLoading:!0,isError:!1}}),Object(Y["a"])(D,Ws,function(t){t.restoreAsset={isLoading:!1,isError:!0}}),Object(Y["a"])(D,Gs,function(t,e){var s=t.assetMap[e.id];s.canceled=!1,t.restoreAsset={isLoading:!1,isError:!1},fr.assetIndex=mo(fr.assets)}),Object(Y["a"])(D,re,function(t,e){var s=t.displayedAssets.find(function(t){return t.id===e.entity_id});if(s){var i=JSON.parse(ka()(s.validations));delete s.validations,a.a.set(s,"validations",i);var n=JSON.parse(ka()(s.tasks)),o=n.findIndex(function(t){return t===e.id});n.splice(o,1),a.a.set(s,"tasks",n)}}),Object(Y["a"])(D,ee,function(t,e){e.comment,e.taskId}),Object(Y["a"])(D,Ks,function(t,e){var s=e.assetSearch,i=e.taskStatusMap,n=e.taskTypeMap,a=e.taskMap,o=e.production,r=Ca()(n),c=Ta()(i).map(function(t){return i[t]}),l=s,d=Co(l)||[],u=Eo(fr.assetIndex,r,c,o.descriptors||[],l),p=yo(fr.assetIndex,d)||fr.assets;p=So(p,u,a),t.displayedAssets=p.slice(0,hr),t.assetFilledColumns=io(t.displayedAssets),t.displayedAssetsLength=p?p.length:0,t.assetSearchText=l;var h=t.displayedAssets.length,m=t.nbValidationColumns;t.assetSelectionGrid=Ha(h,m)}),Object(Y["a"])(D,Qs,function(t,e){var s=e.searchQuery;t.assetSearchQueries.includes(s)||(t.assetSearchQueries.push(s),t.assetSearchQueries=da(t.assetSearchQueries))}),Object(Y["a"])(D,Ys,function(t,e){var s=e.searchQuery,i=t.assetSearchQueries.findIndex(function(t){return t.name===s.name});i>=0&&t.assetSearchQueries.splice(i,1)}),Object(Y["a"])(D,Xs,function(t,e){var s,i=e.taskTypeMap,n=e.taskStatusMap,a=e.taskMap,o=e.production;if(t.assetSearchText.length>0){var r=Ca()(i),c=Ca()(n),l=t.assetSearchText,d=Co(l)||[],u=Eo(fr.assetIndex,r,c,o.descriptors||[],l);s=yo(fr.assetIndex,d)||fr.assets,s=So(s,u,a)}else s=fr.assets;t.displayedAssets=s.slice(0,t.displayedAssets.length+hr),t.assetFilledColumns=io(t.displayedAssets);var p=t.displayedAssets.length-hr,h=t.displayedAssets.length,m=t.nbValidationColumns;p>=0&&(t.assetSelectionGrid=Ga(t.assetSelectionGrid,p,h,m))}),Object(Y["a"])(D,Ne,function(t,e){t.assetSearchText=""}),Object(Y["a"])(D,Yn,function(t,e){var s=e.entityId,i=(e.taskId,e.previewId),n=e.taskMap,a=t.assetMap[s];a&&(a.preview_file_id=i,a.tasks.forEach(function(t){var e=n[t];e.entity.preview_file_id=i}))}),Object(Y["a"])(D,Os,function(t,e){t.assetListScrollPosition=e}),Object(Y["a"])(D,As,function(t,e){t.assetTypeListScrollPosition=e}),Object(Y["a"])(D,ye,function(t,e){t.assetSelectionGrid[0]&&t.assetSelectionGrid[e.x]&&(t.assetSelectionGrid[e.x][e.y]=!1)}),Object(Y["a"])(D,_e,function(t,e){t.assetSelectionGrid[0]&&t.assetSelectionGrid[e.x]&&(t.assetSelectionGrid[e.x][e.y]=!0)}),Object(Y["a"])(D,ve,function(t,e){var s=JSON.parse(ka()(t.assetSelectionGrid));e.forEach(function(t){s[0]&&s[t.x]&&(s[t.x][t.y]=!0)}),t.assetSelectionGrid=s}),Object(Y["a"])(D,ge,function(t,e){var s=JSON.parse(ka()(t.assetSelectionGrid));t.assetSelectionGrid=Wa(s)}),Object(Y["a"])(D,se,function(t,e){var s=t.assetMap[e.entity_id];s&&e&&(e=mr.populateTask(e,s),s.tasks.push(e),a.a.set(s.validations,e.task_type_id,e.id))}),Object(Y["a"])(D,oe,function(t,e){e.forEach(function(e){if(e){var s=t.assetMap[e.entity_id];if(s){var i=Object(l["a"])({},s.validations);a.a.set(i,e.task_type_id,e.id),delete s.validations,a.a.set(s,"validations",i)}}})}),Object(Y["a"])(D,Zs,function(t,e){var s=yo(fr.assetTypeIndex,e)||t.assetTypes;t.displayedAssetTypes=s,t.displayedAssetTypesLength=s?s.length:0,t.assetTypeSearchText=e}),Object(Y["a"])(D,Js,function(t,e){var s=e.taskStatusMap,i=e.taskMap;t.assetTypeStats=Ka(fr.assets,"asset_type_id",s,i)}),Object(Y["a"])(D,Zn,function(t){fr.assets=[],fr.assetIndex={},J()(t,Object(l["a"])({},_r))}),D),br={state:vr,getters:yr,actions:gr,mutations:kr},Tr={getShot:function(t,e){var s="/api/data/shots/".concat(t);tt.get(s,e)},getShots:function(t,e,s){var i="/api/data/shots/with-tasks";t&&(i+="?project_id=".concat(t.id)),e&&(i+="&episode_id=".concat(e.id)),tt.get(i,s)},getSequences:function(t,e,s){var i="/api/data/projects/".concat(t.id,"/sequences");e&&(i="/api/data/episodes/".concat(e.id,"/sequences")),tt.get(i,s)},getEpisodes:function(t,e){var s="/api/data/projects/".concat(t.id,"/episodes");tt.get(s,e)},getShotType:function(t){tt.get("/api/data/shot-type",t)},newShot:function(t,e){var s={name:t.name,description:t.description,sequence_id:t.sequence_id};tt.post("/api/data/projects/".concat(t.project_id,"/shots"),s,e)},newSequence:function(t,e){var s={name:t.name,episode_id:t.episode_id};tt.post("/api/data/projects/".concat(t.project_id,"/sequences"),s,e)},newEpisode:function(t,e){var s={name:t.name};tt.post("/api/data/projects/".concat(t.project_id,"/episodes"),s,e)},updateShot:function(t,e){var s={name:t.name,parent_id:t.sequence_id,description:t.description,nb_frames:Ia()(t.nb_frames),data:t.data};void 0===t.frameOut&&void 0===t.frameIn&&void 0===t.fps||J()(s.data,{frame_in:t.frameIn,frame_out:t.frameOut,fps:t.fps}),tt.put("/api/data/entities/".concat(t.id),s,e)},updateSequence:function(t,e){var s={name:t.name,description:t.description};tt.put("/api/data/entities/".concat(t.id),s,e)},updateEpisode:function(t,e){var s={name:t.name,description:t.description};tt.put("/api/data/entities/".concat(t.id),s,e)},deleteShot:function(t,e){t.canceled?tt.del("/api/data/shots/".concat(t.id,"?force=true"),e):tt.del("/api/data/shots/".concat(t.id),e)},deleteSequence:function(t,e){tt.del("/api/data/entities/".concat(t.id),e)},deleteEpisode:function(t,e){tt.del("/api/data/entities/".concat(t.id),e)},restoreShot:function(t,e){var s={canceled:!1};tt.put("/api/data/entities/".concat(t.id),s,e)},getCasting:function(t,e){tt.get("/api/data/shots/".concat(t.id,"/casting"),e)},updateCasting:function(t,e,s){tt.put("/api/data/shots/".concat(t.id,"/casting"),e,s)},postCsv:function(t,e,s){tt.post("/api/import/csv/projects/".concat(t.id,"/shots"),e,s)},getEpisodeStats:function(t){return new G.a(function(e,s){tt.get("/api/data/projects/".concat(t,"/episodes/stats"),function(t,i){t?s(t):e(i)})})}},Sr={buildCastingAssetsByType:function(t){var e=[],s=[],i=t.length>0?t[0]:null,n=!0,a=!1,o=void 0;try{for(var r,c=Ea()(t);!(n=(r=c.next()).done);n=!0){var l=r.value,d=l.asset_type_name!==i.asset_type_name;l.name||(l.name=l.asset_name),i&&d&&(e.push(s.slice(0)),s=[]),l.nb_occurences||(l.nb_occurences=1),s.push(l),i=l}}catch(u){a=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return e.push(s),e},buildCastInShotsBySequence:function(t){var e=[],s=[],i=t.length>0?t[0]:null,n=!0,a=!1,o=void 0;try{for(var r,c=Ea()(t);!(n=(r=c.next()).done);n=!0){var l=r.value,d=l.sequence_name!==i.sequence_name;l.name||(l.name=l.shot_name),i&&d&&(e.push(s.slice(0)),s=[]),l.nb_occurences||(l.nb_occurences=1),s.push(l),i=l}}catch(u){a=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return e.push(s),e}},Cr={castingSequenceId:"",castingShotId:0,castingSequenceShots:[],castingEpisodeSequences:[],castingSequenceOptions:[],castingCurrentShot:null,casting:{},castingAssetsByType:[],isCastingDirty:!1},wr=Object(l["a"])({},Cr),Er={castingSequenceId:function(t){return t.castingSequenceId},castingShotId:function(t){return t.castingShotId},castingSequenceShots:function(t){return t.castingSequenceShots},castingEpisodeSequences:function(t){return t.castingEpisodeSequences},castingSequenceOptions:function(t){return t.castingSequenceOptions},castingCurrentShot:function(t){return t.castingCurrentShot},casting:function(t){return t.casting},castingAssetsByType:function(t){return t.castingAssetsByType},isCastingDirty:function(t){return t.isCastingDirty},isCastingSaveActive:function(t){return null!==t.castingCurrentShot&&t.isCastingDirty},getCastingAssetsByType:function(t){var e=sa(Ca()(t.casting));return Sr.buildCastingAssetsByType(e)}},Pr={setCastingShot:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=e.shotId,o=e.callback;if(a){var r=n.shots.shotMap[a],c=n.assets.assetMap;s(bn,[]),s(yn,r),i.castingCurrentShot?Tr.getCasting(i.castingCurrentShot,function(t,e){if(!t){var i={};e.forEach(function(t){i[t.asset_id]=c[t.asset_id],i[t.asset_id].nb_occurences=t.nb_occurences}),s(bn,i)}o&&o(t)}):o&&o()}else s(bn,[]),s(yn,null),o&&o()},setCastingSequence:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=t.rootGetters;if(!e)if(i.castingCurrentShot)e=i.castingCurrentShot.sequence_id;else{var o=a.getSequenceOptions[0];o&&(e=o.value)}var r=Ca()(n.shots.shotMap),c=r.filter(function(t){return t.sequence_id===e});s(gn,e),s(Tn,c)},setCastingEpisode:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=t.rootGetters;if(!e)if(i.castingCurrentShot)e=i.castingCurrentShot.episode_id;else{var o=a.getEpisodeOptions[0];o&&(e=o.value)}var r=n.shots.sequences;e&&(r=n.shots.sequences.filter(function(t){return t.parent_id===e})),s(Sn,r),s(kn,e)},addAssetToCasting:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=e.assetId,o=e.nbOccurences;if(i.castingCurrentShot){var r=n.assets.assetMap[a];s(wn,{asset:r,nbOccurences:o})}},removeAssetFromCasting:function(t,e){var s=t.commit,i=t.state,n=t.rootState,a=e.assetId,o=e.nbOccurences;if(i.castingCurrentShot&&i.casting[a]){var r=n.assets.assetMap[a];s(En,{asset:r,nbOccurences:o})}},saveCasting:function(t,e){var s=t.commit,i=t.state,n=(t.rootState,[]);Ca()(i.casting).forEach(function(t){n.push({asset_id:t.id,nb_occurences:t.nb_occurences||1})}),Tr.updateCasting(i.castingCurrentShot,n,function(t){t?console.log(t):s(Cn,!1),e&&e(t)})}},xr=(j={},Object(Y["a"])(j,yn,function(t,e){e?(t.castingCurrentShot=e,t.castingShotId=e.id,t.castingEpisodeId=e.episode_id,t.castingSequenceId=e.sequence_id):(t.castingCurrentShot=null,t.castingShotId=null,t.castingSequenceId=null,t.episodeSequenceId=null)}),Object(Y["a"])(j,Tn,function(t,e){t.castingSequenceShots=e}),Object(Y["a"])(j,Sn,function(t,e){t.castingEpisodeSequences=e,t.castingSequenceOptions=e.map(function(t){return{label:t.name,value:t.id}})}),Object(Y["a"])(j,gn,function(t,e){t.castingSequenceId=e}),Object(Y["a"])(j,kn,function(t,e){t.castingEpisodeId=e}),Object(Y["a"])(j,bn,function(t,e){t.casting=e,t.castingAssetsByType=Er.getCastingAssetsByType(t),t.isCastingDirty=!1}),Object(Y["a"])(j,Cn,function(t,e){t.isCastingDirty=e}),Object(Y["a"])(j,wn,function(t,e){var s=e.asset,i=e.nbOccurences;t.casting[s.id]?t.casting[s.id].nb_occurences+=i:(t.casting[s.id]=s,t.casting[s.id].nb_occurences=i),t.castingAssetsByType=Er.getCastingAssetsByType(t),t.isCastingDirty=!0}),Object(Y["a"])(j,En,function(t,e){var s=e.asset,i=e.nbOccurences,n=t.casting[s.id];n&&(n.nb_occurences-=i,n.nb_occurences<1&&delete t.casting[s.id]),t.castingAssetsByType=Er.getCastingAssetsByType(t),t.isCastingDirty=!0}),Object(Y["a"])(j,oi,function(t,e){t.state,t.rootState;var s=e.shot,i=e.casting;s.casting=i,a.a.set(s,"castingAssetsByType",Sr.buildCastingAssetsByType(i))}),Object(Y["a"])(j,Is,function(t,e){t.state,t.rootState;var s=e.asset,i=e.castIn;i.forEach(function(t){t.episode_name&&(t.sequence_name="".concat(t.episode_name," / ").concat(t.sequence_name))}),s.castIn=i,a.a.set(s,"castInShotsBySequence",Sr.buildCastInShotsBySequence(i))}),Object(Y["a"])(j,Zn,function(t){J()(t,Object(l["a"])({},Cr))}),j),Or={state:wr,getters:Er,actions:Pr,mutations:xr},Ar={getCustomActions:function(t){tt.get("/api/data/custom-actions",t)},newCustomAction:function(t,e){var s={name:t.name,url:t.url};tt.post("/api/data/custom-actions/",s,e)},updateCustomAction:function(t,e){var s={name:t.name,url:t.url,entity_type:t.entityType};tt.put("/api/data/custom-actions/".concat(t.id),s,e)},deleteCustomAction:function(t,e){tt.del("/api/data/custom-actions/".concat(t.id),e)}},$r={customActions:[],isCustomActionsLoading:!1,isCustomActionsLoadingError:!1,editCustomAction:{isLoading:!1,isError:!1},deleteCustomAction:{isLoading:!1,isError:!1}},Lr=Object(l["a"])({},$r),Dr={getOptions:function(t){return{label:t.name,value:t.url,entity_type:t.entity_type}}},jr={customActions:function(t){return t.customActions},isCustomActionsLoading:function(t){return t.isCustomActionsLoading},isCustomActionsLoadingError:function(t){return t.isCustomActionsLoadingError},editCustomAction:function(t){return t.editCustomAction},deleteCustomAction:function(t){return t.deleteCustomAction},customAction:function(t,e,s){return function(e){return t.customActions.find(function(t){return t.id===e})}},allCustomActionOptions:function(t){return t.customActions.map(Dr.getOptions).filter(function(t){return"all"===t.entity_type})},assetCustomActionOptions:function(t){return t.customActions.map(Dr.getOptions).filter(function(t){return["all","asset"].includes(t.entity_type)})},shotCustomActionOptions:function(t){return t.customActions.map(Dr.getOptions).filter(function(t){return["all","shot"].includes(t.entity_type)})}},Ir={loadCustomActions:function(t,e){var s=t.commit;t.state;s(us),Ar.getCustomActions(function(t,i){t?s(hs):s(ps,i),e&&e(t)})},newCustomAction:function(t,e){var s=t.commit,i=(t.state,e.data),n=e.callback;s(ms,i),Ar.newCustomAction(i,function(t,e){t?s(_s):s(fs,e),n&&n(t)})},editCustomAction:function(t,e){var s=t.commit,i=(t.state,e.data),n=e.callback;s(ms),Ar.updateCustomAction(i,function(t,e){t?s(_s):s(fs,e),n&&n(t)})},deleteCustomAction:function(t,e){var s=t.commit,i=(t.state,e.customAction),n=e.callback;s(vs),Ar.deleteCustomAction(i,function(t){t?s(gs):s(ys,i),n&&n(t)})}},Mr=(I={},Object(Y["a"])(I,us,function(t){t.isCustomActionsLoading=!0,t.isCustomActionsLoadingError=!1}),Object(Y["a"])(I,hs,function(t){t.isCustomActionsLoading=!1,t.isCustomActionsLoadingError=!0}),Object(Y["a"])(I,ps,function(t,e){t.isCustomActionsLoading=!1,t.isCustomActionsLoadingError=!1,t.customActions=e,t.customActions=da(t.customActions)}),Object(Y["a"])(I,ms,function(t,e){t.editCustomAction.isLoading=!0,t.editCustomAction.isError=!1}),Object(Y["a"])(I,_s,function(t){t.editCustomAction.isLoading=!1,t.editCustomAction.isError=!0}),Object(Y["a"])(I,fs,function(t,e){var s=jr.customAction(t)(e.id);s&&s.id?J()(s,e):(t.customActions.push(e),t.customActions=da(t.customActions)),t.editCustomAction={isLoading:!1,isError:!1}}),Object(Y["a"])(I,vs,function(t){t.deleteCustomAction={isLoading:!0,isError:!1}}),Object(Y["a"])(I,gs,function(t){t.deleteCustomAction={isLoading:!1,isError:!0}}),Object(Y["a"])(I,ys,function(t,e){var s=t.customActions.findIndex(function(t){return t.id===e.id});t.customActions.splice(s,1),t.deleteCustomAction={isLoading:!1,isError:!1}}),Object(Y["a"])(I,Zn,function(t){J()(t,Object(l["a"])({},$r))}),I),Fr={state:Lr,getters:jr,actions:Ir,mutations:Mr},qr={email:"",password:"",isLdap:!1,isLoginLoading:!1,isLoginError:!1,isDataLoading:!1},Nr=Object(l["a"])({},qr),Rr={email:function(t){return t.email},password:function(t){return t.password},isLdap:function(t){return t.isLdap},isLoginLoading:function(t){return t.isLoginLoading},isLoginError:function(t){return t.isLoginError},isDataLoading:function(t){return t.isDataLoading}},Vr={changeEmail:function(t,e){var s=t.commit;t.state;s(on,e)},changePassword:function(t,e){var s=t.commit;t.state;s(rn,e)},logIn:function(t,e){var s=t.commit,i=t.state;s(cn),Pc.logIn(i.email,i.password,function(t){t?(s(dn),e(null,!1)):(s(ln),e(null,!0))})},logout:function(t,e){var s=t.commit;t.state;Pc.logout(function(t){t?(s(pn),e(null,!1)):(s(Zn),s(un),s(nt),e(null,!0))})},resetPassword:function(t,e){t.commit;return new G.a(function(t,s){Pc.resetPassword(e).then(t).catch(s)})},resetChangePassword:function(t,e){var s=t.commit,i=e.token,n=e.password,a=e.password2;return new G.a(function(t,e){Pc.resetChangePassword(i,n,a).then(function(){s(ln),t()}).catch(e)})}},Br=(M={},Object(Y["a"])(M,on,function(t,e){t.email=e}),Object(Y["a"])(M,rn,function(t,e){t.password=e}),Object(Y["a"])(M,cn,function(t){t.isLoginLoading=!0,t.isLoginError=!1}),Object(Y["a"])(M,ln,function(t,e){t.isLoginLoading=!1,t.isLoginError=!1}),Object(Y["a"])(M,dn,function(t,e){t.isLoginLoading=!1,t.isLoginError=!0}),Object(Y["a"])(M,un,function(t,e){t.isLoginLoading=!1,t.isLoginError=!1}),Object(Y["a"])(M,nn,function(t,e){t.isDataLoading=!0,e&&void 0!==e.isLdap&&(t.isLdap=e.isLdap)}),Object(Y["a"])(M,an,function(t){t.isDataLoading=!1}),Object(Y["a"])(M,Zn,function(t,e){J()(t,Object(l["a"])({},qr))}),M),Ur={state:Nr,getters:Rr,actions:Vr,mutations:Br},zr={isDarkTheme:!1,isSidebarHidden:!0,isUserMenuHidden:!0,lastProductionScreen:"assets",currentProductionScreen:"assets"},Hr=Object(l["a"])({},zr),Gr={isDarkTheme:function(t){return t.isDarkTheme},isSidebarHidden:function(t){return t.isSidebarHidden},isUserMenuHidden:function(t){return t.isUserMenuHidden},lastProductionScreen:function(t){return t.lastProductionScreen},currentProductionScreen:function(t){return t.currentProductionScreen}},Wr={toggleDarkTheme:function(t){var e=t.commit,s=t.state;e(st),localStorage&&localStorage.setItem("dark-theme",s.isDarkTheme)},toggleSidebar:function(t){var e=t.commit;t.state;e(it)},toggleUserMenu:function(t){var e=t.commit;t.state;e(nt)},setLastProductionScreen:function(t,e){var s=t.commit;t.state;s(at,e)}},Kr=(F={},Object(Y["a"])(F,st,function(t){t.isDarkTheme=!t.isDarkTheme}),Object(Y["a"])(F,it,function(t){t.isSidebarHidden=!t.isSidebarHidden}),Object(Y["a"])(F,nt,function(t){t.isUserMenuHidden=!t.isUserMenuHidden}),Object(Y["a"])(F,at,function(t,e){t.lastProductionScreen=e}),Object(Y["a"])(F,Zn,function(t){var e=t.isDarkTheme;J()(t,Object(l["a"])({},zr)),t.isDarkTheme=e}),F),Qr={state:Hr,getters:Gr,actions:Wr,mutations:Kr},Yr={getNotifications:function(t){tt.get("/api/data/user/notifications",t)},getNotification:function(t,e){tt.get("/api/data/user/notifications/".concat(t),e)}},Xr={notifications:[]},Jr=Object(l["a"])({},Xr),Zr={notifications:function(t){return t.notifications},isNewNotification:function(t){var e=t.notifications.filter(function(t){return!t.read});return e.length>0}},tc={loadNotifications:function(t,e){var s=t.commit;t.state;if(!e)return new G.a(function(t,e){s(Un,[]),Yr.getNotifications(function(i,n){i?e(i):(s(Un,n),t())})});s(Un,[]),Yr.getNotifications(function(t,i){t?e(t):(s(Un,i),e())})},loadNotification:function(t,e){var s=t.commit;t.state;return new G.a(function(t,i){Yr.getNotification(e,function(e,n){e?i(e):(s(zn,n),t())})})},markAllNotificationsAsRead:function(t){var e=t.commit;e(Hn)}},ec=(q={},Object(Y["a"])(q,Un,function(t,e){t.notifications=ua(e)}),Object(Y["a"])(q,zn,function(t,e){t.notifications.push(e),t.notifications=ua(t.notifications)}),Object(Y["a"])(q,Hn,function(t){t.notifications.forEach(function(t){t.read=!0})}),Object(Y["a"])(q,Gn,function(t,e){var s=e.commentId,i=e.previewId,n=t.notifications.find(function(t){return t.comment_id===s});n&&(n.preview_file_id=i)}),Object(Y["a"])(q,Zn,function(t){J()(t,Object(l["a"])({},Xr))}),q),sc={state:Jr,getters:Zr,actions:tc,mutations:ec},ic={getTaskStatus:function(t){return Fo.state.taskStatusMap[t]}},nc={user:null,isAuthenticated:!1,avatarFormData:null,isSaveProfileLoading:!1,isSaveProfileLoadingError:!1,changePassword:{isLoading:!1,isError:!1,isSuccess:!1,isValid:!0},isTodosLoading:!1,isTodosLoadingError:!1,todos:[],displayedTodos:[],displayedDoneTasks:[],todosIndex:{},todosSearchText:"",todoSelectionGrid:{},todoSearchQueries:[],userFilters:{},todoListScrollPosition:0,timeSpentMap:{},timeSpentTotal:0},ac=Object(l["a"])({},nc),oc={user:function(t){return t.user},isAuthenticated:function(t){return t.isAuthenticated},isCurrentUserManager:function(t){return t.user&&["admin","manager"].includes(t.user.role)},isCurrentUserAdmin:function(t){return t.user&&"admin"===t.user.role},isCurrentUserCGArtist:function(t){return t.user&&"user"===t.user.role},isCurrentUserClient:function(t){return t.user&&"client"===t.user.role},isSaveProfileLoading:function(t){return t.isSaveProfileLoading},isSaveProfileLoadingError:function(t){return t.isSaveProfileLoadingError},changePassword:function(t){return t.changePassword},displayedTodos:function(t){return t.displayedTodos},displayedDoneTasks:function(t){return t.displayedDoneTasks},todosSearchText:function(t){return t.todosSearchText},todoSelectionGrid:function(t){return t.todoSelectionGrid},todoSearchQueries:function(t){return t.todoSearchQueries},userFilters:function(t){return t.userFilters},isTodosLoading:function(t){return t.isTodosLoading},isTodosLoadingError:function(t){return t.isTodosLoadingError},todoListScrollPosition:function(t){return t.todoListScrollPosition},timeSpentMap:function(t){return t.timeSpentMap},timeSpentTotal:function(t){return t.timeSpentTotal}},rc={saveProfile:function(t,e){var s=t.commit,i=t.state;s(Mt),xa.updatePerson(e.form,function(t){t?s(Ft):(e.form.id=i.user.id,s(qt,e.form)),e.callback&&e.callback()})},checkNewPasswordValidityAndSave:function(t,e){var s=t.commit,i=t.state,n=e.form,a=e.callback;Pc.isPasswordValid(n.password,n.password2)?rc.changeUserPassword({commit:s,state:i},{form:n,callback:a}):(s(zt),a&&a())},changeUserPassword:function(t,e){var s=t.commit;t.state;s(Vt),xa.changePassword(e.form,function(t){s(t?Bt:Ut),e.callback&&e.callback()})},loadTodos:function(t,e){var s=t.commit,i=t.state,n=t.rootGetters,a=e.callback,o=e.forced,r=e.date,c=n.userFilters,l=n.taskTypeMap;0===i.todos.length||o?(s(Gt),xa.loadTodos(function(t,e){t?(s(Wt),a&&a(t)):xa.loadDone(function(t,i){t?s(Wt):s(Kt,i),xa.loadTimeSpents(r,function(t,i){t?s(Wt):(s(Qt,i),s(Ht,{tasks:e,userFilters:c,taskTypeMap:l})),a&&a(t)})})})):a&&a()},uploadAvatar:function(t,e){var s=t.commit,i=t.state;xa.postAvatar(i.user.id,i.avatarFormData,function(t){t||s(Rt,i.user.id),e&&e(t)})},setTodosSearch:function(t,e){var s=t.commit;t.state;s(Yt,e)},loadUserSearchFilters:function(t,e){var s=t.commit;xa.getUserSearchFilters(function(t,i){t?s(Jt):s(Xt,i),e(t)})},saveTodoSearch:function(t,e){var s=t.commit;t.rootGetters;return new G.a(function(t,i){var n=ac.todoSearchQueries.find(function(t){return t.name===e});n?t():xa.createFilter("todos",e,e,null,null,function(e,n){s(_n,{searchQuery:n}),e?i(e):t(n)})})},removeTodoSearch:function(t,e){var s=t.commit;t.rootGetters;return new G.a(function(t,i){xa.removeFilter(e,function(n){s(vn,{searchQuery:e}),n?i(n):t()})})},setTodoListScrollPosition:function(t,e){var s=t.commit;t.rootGetters;s(Zt,e)}},cc=(N={},Object(Y["a"])(N,hn,function(t,e){t.user=zo.helpers.addAdditionalInformation(e),t.isAuthenticated=!0}),Object(Y["a"])(N,mn,function(t,e){t.user=null,t.isAuthenticated=!1}),Object(Y["a"])(N,fn,function(t,e){t.user=null,t.isAuthenticated=!1}),Object(Y["a"])(N,Mt,function(t){t.isSaveProfileLoading=!0,t.isSaveProfileLoadingError=!1}),Object(Y["a"])(N,Ft,function(t){t.isSaveProfileLoading=!1,t.isSaveProfileLoadingError=!0}),Object(Y["a"])(N,qt,function(t,e){J()(t.user,e),J()(t.user,zo.helpers.addAdditionalInformation(t.user)),t.isSaveProfileLoading=!1,t.isSaveProfileLoadingError=!1}),Object(Y["a"])(N,Tt,function(t,e){t.user&&e&&t.user.id===e.id&&(J()(t.user,e),J()(t.user,zo.helpers.addAdditionalInformation(t.user)))}),Object(Y["a"])(N,Vt,function(t){t.changePassword={isLoading:!0,isError:!1,isSuccess:!1,isValid:!0}}),Object(Y["a"])(N,Bt,function(t){t.changePassword={isLoading:!1,isError:!0,isSuccess:!1,isValid:!0}}),Object(Y["a"])(N,Ut,function(t){t.changePassword={isLoading:!1,isError:!1,isSuccess:!0,isValid:!0}}),Object(Y["a"])(N,zt,function(t){t.changePassword={isLoading:!1,isError:!1,isSuccess:!1,isValid:!1}}),Object(Y["a"])(N,Gt,function(t){t.isTodosLoadingError=!1,t.isTodosLoading=!0,t.timeSpents={},t.timeSpentTotal=0}),Object(Y["a"])(N,Ht,function(t,e){var s=e.tasks,i=e.userFilters,n=e.taskTypeMap;t.isTodosLoading=!1,s.forEach(za),s.forEach(function(t){var e=ic.getTaskStatus(t.task_status_id);t.taskStatus=e}),t.todoSelectionGrid=Ha(s.length,1),t.todos=oa(s,n),t.todosIndex=po(s);var a=Co(t.todosSearchText),o=yo(t.todosIndex,a);t.displayedTodos=o||t.todos,i.todos&&i.todos.all?t.todoSearchQueries=i.todos.all:t.todoSearchQueries=[]}),Object(Y["a"])(N,Kt,function(t,e){e.forEach(za),e.forEach(function(t){var e=ic.getTaskStatus(t.task_status_id);t.taskStatus=e}),t.displayedDoneTasks=e}),Object(Y["a"])(N,Wt,function(t,e){t.isTodosLoadingError=!0}),Object(Y["a"])(N,Nt,function(t,e){t.avatarFormData=e}),Object(Y["a"])(N,Rt,function(t){if(t.user){var e=Math.random().toString(36).substring(7);t.user.has_avatar=!0,t.user.avatarPath="/api/pictures/thumbnails/persons/".concat(t.user.id)+".png?unique=".concat(e)}}),Object(Y["a"])(N,ee,function(t,e){var s=e.comment,i=e.taskId,n=t.todos.find(function(t){return t.id===i});if(n){var a=ic.getTaskStatus(s.task_status_id);J()(n,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color,last_comment:s}),t.todosIndex=po(t.todos)}}),Object(Y["a"])(N,Yt,function(t,e){var s=Co(e),i=yo(t.todosIndex,s);t.todosSearchText=e,t.displayedTodos=i||t.todos}),Object(Y["a"])(N,_n,function(t,e){var s=e.searchQuery;t.todoSearchQueries.push(s),t.todoSearchQueries=da(t.todoSearchQueries)}),Object(Y["a"])(N,vn,function(t,e){var s=e.searchQuery,i=t.todoSearchQueries.findIndex(function(t){return t.name===s.name});i>=0&&t.todoSearchQueries.splice(i,1)}),Object(Y["a"])(N,_e,function(t,e){t.todoSelectionGrid&&t.todoSelectionGrid[0]&&(t.todoSelectionGrid[e.x][e.y]=!0)}),Object(Y["a"])(N,ye,function(t,e){t.todoSelectionGrid&&t.todoSelectionGrid[0]&&(t.todoSelectionGrid[e.x][e.y]=!1)}),Object(Y["a"])(N,ge,function(t){t.todoSelectionGrid=Wa(t.todoSelectionGrid)}),Object(Y["a"])(N,Zt,function(t,e){t.todoListScrollPosition=e}),Object(Y["a"])(N,Jt,function(t){}),Object(Y["a"])(N,Xt,function(t,e){t.userFilters=e}),Object(Y["a"])(N,$t,function(t,e){t.user.id===e.person_id&&(t.timeSpentMap[e.task_id]=e),t.timeSpentTotal=Ca()(t.timeSpentMap).reduce(function(t,e){return e.duration+t},0)/60}),Object(Y["a"])(N,Qt,function(t,e){var s={};e.forEach(function(t){s[t.task_id]=t}),t.timeSpentMap=s,t.timeSpentTotal=Ca()(t.timeSpentMap).reduce(function(t,e){return e.duration+t},0)/60}),Object(Y["a"])(N,Qs,function(t,e){var s=e.searchQuery,i=e.production;i&&(t.userFilters.task||(t.userFilters.task={}),t.userFilters.task[i.id]||(t.userFilters.task[i.id]=[]),t.userFilters.task[i.id].includes(s)||(t.userFilters.task[i.id].push(s),t.userFilters.task[i.id]=da(t.userFilters.task[i.id])))}),Object(Y["a"])(N,Vi,function(t,e){var s=e.searchQuery,i=e.production;t.userFilters.shot[i.id]||(t.userFilters.shot[i.id]=[]),t.userFilters.shot[i.id].includes(s)||(t.userFilters.shot[i.id].push(s),t.userFilters.shot[i.id]=da(t.userFilters.shot[i.id]))}),Object(Y["a"])(N,Ys,function(t){}),Object(Y["a"])(N,Zn,function(t){J()(t,Object(l["a"])({},nc))}),N),lc={namespace:!0,state:ac,getters:oc,actions:rc,mutations:cc},dc={playlists:[],playlistMap:{}},uc=Object(l["a"])({},dc),pc={playlists:function(t){return t.playlists},playlistMap:function(t){return t.playlistMap}},hc={loadPlaylists:function(t,e){var s=t.commit,i=t.rootGetters,n=i.currentProduction,a=i.currentEpisode,o=i.isTVShow;if(o&&!a)return e?e():null;s(Pn),Da.getPlaylists(n,a,function(t,i){t?s(On):s(xn,i),e&&e(t)})},loadPlaylist:function(t,e){var s=t.commit,i=t.rootGetters,n=e.playlist,a=e.callback,o=i.currentProduction;s(An),Da.getPlaylist(o,n,function(t,e){t?s(Ln):s($n,e),a&&a(t,e)})},loadShotPreviewFiles:function(t,e){t.commit,e.playlist;var s=e.shot,i=e.callback;Da.getShotPreviewFiles(s,function(t,e){i&&i(t,e)})},newPlaylist:function(t,e){var s=t.commit,i=e.data,n=e.callback;s(Dn,i),Da.newPlaylist(i,function(t,e){t?s(In):s(jn,e),n&&n(t,e)})},editPlaylist:function(t,e){var s=t.commit,i=e.data,n=e.callback;s(Dn),Da.updatePlaylist(i,function(t,e){t?s(In):s(jn,e),n&&n(t)})},deletePlaylist:function(t,e){var s=t.commit,i=e.playlist,n=e.callback;s(Mn),Da.deletePlaylist(i,function(t){t?s(qn):s(Fn,i),n&&n(t)})},addShotPreviewToPlaylist:function(t,e){var s=t.commit,i=t.dispatch,n=e.playlist,a=e.shot,o=e.previewFiles,r=e.callback;s(Nn,{playlist:n,shot:a}),s(Bn,{playlist:n,shot:a,previewFiles:o}),i("editPlaylist",{data:n,callback:r})},removeShotPreviewFromPlaylist:function(t,e){var s=t.commit,i=t.dispatch,n=e.playlist,a=e.shot,o=e.callback;s(Rn,{playlist:n,shot:a}),i("editPlaylist",{data:n,callback:o})},changePlaylistPreview:function(t,e){var s=t.commit,i=t.dispatch,n=e.playlist,a=e.shot,o=e.previewFileId,r=e.callback;s(Vn,{playlist:n,shotId:a.id,previewFileId:o}),i("editPlaylist",{data:n,callback:r})}},mc=(R={},Object(Y["a"])(R,Pn,function(t){}),Object(Y["a"])(R,On,function(t){}),Object(Y["a"])(R,xn,function(t,e){t.playlists=e,t.playlists=ca(t.playlists),t.playlistMap={},e.forEach(function(e){e.shots||(e.shots=[]),t.playlistMap[e.id]=e})}),Object(Y["a"])(R,An,function(t){}),Object(Y["a"])(R,Ln,function(t){}),Object(Y["a"])(R,$n,function(t){}),Object(Y["a"])(R,Dn,function(t,e){}),Object(Y["a"])(R,In,function(t){}),Object(Y["a"])(R,jn,function(t,e){var s=t.playlistMap[e.id];s&&s.id?J()(s,e):(t.playlists.push(e),t.playlists=ca(t.playlists)),t.playlistMap[e.id]=e}),Object(Y["a"])(R,Mn,function(t){}),Object(Y["a"])(R,qn,function(t){}),Object(Y["a"])(R,Fn,function(t,e){var s=t.playlists.findIndex(function(t){return t.id===e.id});t.playlists.splice(s,1),delete t.playlistMap[e.id]}),Object(Y["a"])(R,Bn,function(t,e){var s=e.playlist,i=e.shot,n=e.previewFiles,a=s.shots.find(function(t){return t.shot_id===i.id});a.preview_files=n}),Object(Y["a"])(R,Nn,function(t,e){var s=e.playlist,i=e.shot;s.shots||(s.shots=[]),s.shots.push({shot_id:i.id,preview_file_id:i.preview_file_id,preview_files:i.preview_files})}),Object(Y["a"])(R,Rn,function(t,e){var s=e.playlist,i=e.shot;s.shots||(s.shots=[]);var n=s.shots.findIndex(function(t){return t.shot_id===i.id});s.shots.splice(n,1)}),Object(Y["a"])(R,Vn,function(t,e){var s=e.playlist,i=e.shotId,n=e.previewFileId,a=s.shots.find(function(t){return t.shot_id===i});a.preview_file_id=n}),Object(Y["a"])(R,Zn,function(t){J()(t,Object(l["a"])({},dc))}),R),fc={state:uc,getters:pc,actions:hc,mutations:mc},_c={shots:[],shotIndex:[]},vc={getTask:function(t){return nr.state.taskMap[t]},getTaskStatus:function(t){return nr.state.taskStatusMap[t]},getTaskType:function(t){return Xo.state.taskTypeMap[t]},getPerson:function(t){return zo.state.personMap[t]},populateTask:function(t,e,s){t.name=vc.getTaskType(t.task_type_id).priority.toString(),t.task_status_short_name=vc.getTaskStatus(t.task_status_id).short_name;var i="".concat(e.sequence_name," / ").concat(e.name);return e.episode_name&&(i="".concat(e.episode_name," / ").concat(i)),J()(t,{project_id:e.production_id,entity_name:i,entity_type_name:e.shot_type_name,sequence_name:e.sequence_name,entity:{id:e.id,preview_file_id:e.preview_file_id}}),t},setListStats:function(t,e){var s=0,i=0;t.displayedShotsLength=e.length,e.forEach(function(t){s+=t.timeSpent,i+=t.nb_frames}),t.displayedShotsTimeSpent=s,t.displayedShotsFrames=i}},yc={shotMap:{},sequences:[],episodes:[],shotSearchText:"",shotSearchQueries:[],sequenceSearchText:"",sequenceStats:{},episodeSearchText:"",episodeStats:{},currentEpisode:null,episodeValidationColumns:[],isFps:!1,isFrameIn:!1,isFrameOut:!1,displayedShots:[],displayedShotsLength:0,displayedShotsTimeSpent:0,displayedShotsFrames:0,displayedSequences:[],displayedSequencesLength:0,displayedEpisodes:[],displayedEpisodesLength:0,sequenceIndex:{},shotFilledColumns:{},sequenceMap:{},episodeMap:{},shotCreated:"",shotSelectionGrid:{},sequenceSelectionGrid:{},isShotsLoading:!1,isShotsLoadingError:!1,shotsCsvFormData:null,editShot:{isLoading:!1,isError:!1},deleteShot:{isLoading:!1,isError:!1},restoreShot:{isLoading:!1,isError:!1},shotListScrollPosition:0,sequenceListScrollPosition:0,episodeListScrollPosition:0},gc=Object(l["a"])({},yc),kc={sequences:function(t){return t.sequences},sequenceMap:function(t){return t.sequenceMap},sequenceStats:function(t){return t.sequenceStats},episodes:function(t){return t.episodes},episodeMap:function(t){return t.episodeMap},episodeStats:function(t){return t.episodeStats},currentEpisode:function(t){return t.currentEpisode},shotSearchQueries:function(t){return t.shotSearchQueries},shotMap:function(t){return t.shotMap},isFps:function(t){return t.isFps},isFrameIn:function(t){return t.isFrameIn},isFrameOut:function(t){return t.isFrameOut},shotSearchText:function(t){return t.shotSearchText},sequenceSearchText:function(t){return t.sequenceSearchText},episodeSearchText:function(t){return t.episodeSearchText},shotSelectionGrid:function(t){return t.shotSelectionGrid},sequenceSelectionGrid:function(t){return t.sequenceSelectionGrid},displayedShots:function(t){return t.displayedShots},displayedShotsLength:function(t){return t.displayedShotsLength},displayedShotsTimeSpent:function(t){return t.displayedShotsTimeSpent},displayedShotsFrames:function(t){return t.displayedShotsFrames},displayedSequences:function(t){return t.displayedSequences},displayedSequencesLength:function(t){return t.displayedSequencesLength},displayedEpisodes:function(t){return t.displayedEpisodes},displayedEpisodesLength:function(t){return t.displayedEpisodesLength},shotFilledColumns:function(t){return t.shotFilledColumns},isShotsLoading:function(t){return t.isShotsLoading},isShotsLoadingError:function(t){return t.isShotsLoadingError},editShot:function(t){return t.editShot},deleteShot:function(t){return t.deleteShot},restoreShot:function(t){return t.restoreShot},shotCreated:function(t){return t.shotCreated},shotsCsvFormData:function(t){return t.shotsCsvFormData},shotListScrollPosition:function(t){return t.shotListScrollPosition},sequenceListScrollPosition:function(t){return t.sequenceListScrollPosition},episodeListScrollPosition:function(t){return t.episodeListScrollPosition},episodeValidationColumns:function(t){return t.episodeValidationColumns},shotsByEpisode:function(t){for(var e=[],s=[],i=null,n=Ca()(t.shotMap),a=0;a<n.length;a++){var o=n[a];i&&o.sequence_name!==i.sequence_name&&(e.push(s.slice(0)),s=[]),s.push(o),i=o}return e.push(s),e},getSequenceOptions:function(t){return t.sequences.map(function(t){return{label:t.name,value:t.id}})},getEpisodeOptions:function(t){return t.episodes.map(function(t){return{label:t.name,value:t.id}})},isSingleEpisode:function(t){return t.episodes.length<2},episodeOptions:function(t){return t.episodes.map(function(t){return{label:t.name,value:t.id}})}},bc={clearEpisodes:function(t){var e=t.commit;e(tn)},loadEpisodes:function(t,e){var s=t.commit,i=(t.state,t.rootGetters),n=i.currentProduction;Tr.getEpisodes(n,function(t,i){t&&console.log(t),s(ni,i),e&&e()})},loadShots:function(t,e){var s=t.commit,i=(t.dispatch,t.state),n=t.rootGetters,a=n.currentProduction,o=n.userFilters,r=n.taskTypeMap,c=n.personMap,l=n.isTVShow,d=l?n.currentEpisode:null;return l&&!d?e():i.isShotsLoading?e():(s(ti),void Tr.getSequences(a,d,function(t,i){t?s(si):Tr.getShots(a,d,function(t,n){t?s(si):(n.forEach(function(t){return t.project_name=a.name,t}),s(ii,i),s(ei,{production:a,shots:n,userFilters:o,taskTypeMap:r,personMap:c})),e&&e(t)})}))},loadShot:function(t,e){var s=t.commit,i=(t.state,t.rootGetters),n=e.shotId,a=e.callback,o=i.taskTypeMap;Tr.getShot(n,function(t,e){t||s(ai,{shot:e,taskTypeMap:o}),a&&a(t)})},loadShotCasting:function(t,e){var s=t.commit,i=t.rootGetters,n=e.shot,a=e.callback,o=i.assetMap;Tr.getCasting(n,function(t,e){t||s(oi,{shot:n,casting:e,assetMap:o}),a&&a(t,e)})},newShot:function(t,e){var s=t.commit,i=t.dispatch,n=t.rootGetters,a=e.shot,o=e.callback;s(gi),Tr.newShot(a,function(t,e){if(t)s(bi),o&&o(t);else{s(ki,e);var a=Ca()(n.shotValidationColumns),r=a.map(function(t){return i("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t,type:"shots"})});G.a.all(r).then(function(){o&&o(null,e)}).catch(function(t){console.log(t)})}})},newSequence:function(t,e){var s=t.commit,i=(t.state,e.sequence),n=e.callback;s(Ti),Tr.newSequence(i,function(t,e){t?s(Ci):s(Si,e),n&&n(t,e)})},newEpisode:function(t,e){var s=t.commit;t.state;s(wi),Tr.newEpisode(e.episode,function(t,i){t?s(Pi):s(Ei,i),e.callback&&e.callback(t,i)})},editShot:function(t,e){var s=t.commit;t.state;s(di),Tr.updateShot(e.data,function(t,i){t?s(pi):s(ui,i),e.callback&&e.callback(t)})},editEpisode:function(t,e){var s=t.commit;t.state;return new G.a(function(t,i){s(_i),Tr.updateEpisode(e,function(e,n){e?(s(yi),i(e)):(s(vi,n),t(n))})})},editSequence:function(t,e){var s=t.commit;t.state;return new G.a(function(t,i){s(hi),Tr.updateSequence(e,function(e,n){e?(s(fi),i(e)):(s(mi,n),t(n))})})},deleteShot:function(t,e){var s=t.commit,i=(t.state,e.shot),n=e.callback;s(xi),Tr.deleteShot(i,function(t){t?s(Ai):s(Oi,i),n&&n(t)})},deleteEpisode:function(t,e){var s=t.commit;t.state;return new G.a(function(t,i){s(ji),Tr.deleteEpisode(e,function(n){n?(s(Mi),i(n)):(s(Ii,e),t(e))})})},deleteSequence:function(t,e){var s=t.commit;t.state;return new G.a(function(t,i){s($i),Tr.deleteSequence(e,function(n){n?s(Di):s(Li,e),n?i(n):t(e)})})},restoreShot:function(t,e){var s=t.commit;t.state;s(Fi);var i=e.shot;Tr.restoreShot(i,function(t){t?s(Ni):s(qi,i),e.callback&&e.callback(t)})},uploadShotFile:function(t,e){var s=t.commit,i=t.state,n=t.rootGetters;s(ci);var a=n.currentProduction;Tr.postCsv(a,i.shotsCsvFormData,function(t){s(li),e&&e(t)})},displayMoreShots:function(t){var e=t.commit,s=t.rootGetters;e(Hi,{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},displayMoreSequences:function(t){var e=t.commit;e(Gi)},displayMoreEpisodes:function(t){var e=t.commit;e(Wi)},setShotSearch:function(t,e){var s=t.commit,i=t.rootGetters,n=i.taskStatusMap,a=i.taskTypeMap,o=i.taskMap,r=i.currentProduction;s(Ri,{shotSearch:e,taskStatusMap:n,taskMap:o,taskTypeMap:a,production:r})},saveShotSearch:function(t,e){var s=t.commit,i=t.rootGetters;return new G.a(function(t,n){var a=gc.shotSearchQueries.find(function(t){return t.name===e}),o=i.currentProduction;a?t():xa.createFilter("shot",e,e,o.id,null,function(e,i){s(Vi,{searchQuery:i,production:o}),e?n(e):t(i)})})},removeShotSearch:function(t,e){var s=t.commit,i=t.rootGetters;return new G.a(function(t,n){var a=i.currentProduction;xa.removeFilter(e,function(i){s(Bi,{searchQuery:e,production:a}),i?n(i):t()})})},initSequences:function(t){t.commit;var e=t.dispatch,s=t.state,i=t.rootState;t.rootGetters;return new G.a(function(t,n){var a=i.route.params.production_id;e("setLastProductionScreen","sequences"),0!==s.sequences.length&&s.sequences[0].production_id===a||e("loadShots",function(s){s?n(s):(e("computeSequenceStats"),t())})})},setSequenceSearch:function(t,e){var s=t.commit;s(Ui,e)},setSequenceListScrollPosition:function(t,e){var s=t.commit;s(Qi,e)},computeSequenceStats:function(t){var e=t.commit,s=t.rootGetters,i=s.taskStatusMap,n=s.taskMap;e(Xi,{taskStatusMap:i,taskMap:n})},setCurrentEpisode:function(t,e){var s=t.commit,i=t.rootGetters;s(Zi,e);var n=i.currentProduction.id;s(sn,{productionId:n,episodeId:e})},initEpisodes:function(t){t.commit;var e=t.dispatch,s=t.state,i=t.rootState,n=t.rootGetters;return new G.a(function(t,a){var o=i.route.params.production_id,r=n.isTVShow;e("setLastProductionScreen","episodes"),0!==s.episodes.length&&s.episodes[0].production_id===o||(r?e("loadEpisodes",function(){return e("loadEpisodeStats",o)}):(e("computEpisodeStats"),t()))})},loadEpisodeStats:function(t,e){var s=t.commit;return new G.a(function(t,i){s(en,{}),Tr.getEpisodeStats(e).then(function(e){s(en,e),t()}).catch(i)})},setEpisodeSearch:function(t,e){var s=t.commit;s(zi,e)},setEpisodeListScrollPosition:function(t,e){var s=t.commit;s(Yi,e)},computeEpisodeStats:function(t){var e=t.commit,s=t.dispatch,i=t.rootGetters,n=i.taskStatusMap,a=i.taskMap,o=i.isTVShow;o?s("loadEpisodeStats",i.currentProduction.id):e(Ji,{taskStatusMap:n,taskMap:a})}},Tc=(V={},Object(Y["a"])(V,ti,function(t){_c.shots=[],_c.result=[],_c.shotIndex={},t.shotMap={},t.sequences=[],t.isShotsLoading=!0,t.isShotsLoadingError=!1,t.sequenceIndex={},t.displayedShots=[],t.displayedShotsLength=0,t.displayedTimeSpent=0,t.displayedFrames=0,t.shotSearchQueries=[],t.displayedSequences=[],t.displayedSequencesLength=0,t.displayedEpisodes=[],t.displayedEpisodesLength=0}),Object(Y["a"])(V,si,function(t){t.isShotsLoading=!1,t.isShotsLoadingError=!0}),Object(Y["a"])(V,ei,function(t,e){var s=e.production,i=e.shots,n=e.userFilters,a=(e.taskTypeMap,{}),o=!1,r=!1,c=!1;i=ia(i),t.shotMap={},i.forEach(function(e){var i=0;e.production_id=s.id,e.tasks.forEach(function(t){vc.populateTask(t,e,s),a[t.task_type_id]=!0,i+=t.duration}),e.timeSpent=i,!o&&e.data.fps&&(o=!0),!r&&e.data.frame_in&&(r=!0),!c&&e.data.frame_out&&(c=!0),t.shotMap[e.id]=e}),t.isShotsLoading=!1,t.isShotsLoadingError=!1,t.nbValidationColumns=Ta()(a).length,t.isFps=o,t.isFrameIn=r,t.isFrameOut=c,_c.shotIndex=fo(i),t.displayedShots=i.slice(0,hr),vc.setListStats(t,i),t.shotFilledColumns=io(t.displayedShots),_c.shots=i;var l=t.displayedShots.length,d=t.nbValidationColumns;t.shotSelectionGrid=Ha(l,d),n.shot&&n.shot[s.id]?t.shotSearchQueries=n.shot[s.id]:t.shotSearchQueries=[]}),Object(Y["a"])(V,Vi,function(t,e){var s=e.searchQuery;t.shotSearchQueries.push(s),t.shotSearchQueries=da(t.shotSearchQueries)}),Object(Y["a"])(V,Bi,function(t,e){var s=e.searchQuery,i=t.shotSearchQueries.findIndex(function(t){return t.name===s.name});i>=0&&t.shotSearchQueries.splice(i,1)}),Object(Y["a"])(V,ii,function(t,e){var s={};e.forEach(function(e){if(s[e.id]=e,e.parent_id){var i=t.episodeMap[e.parent_id];i&&J()(e,{episode_id:i.id,episode_name:i.name})}}),t.sequenceMap=s,t.sequences=na(e),t.sequenceIndex=_o(t.sequences),t.displayedSequences=t.sequences.slice(0,hr),t.displayedSequencesLength=t.sequences.length}),Object(Y["a"])(V,ni,function(t,e){var s={};e||(e=[]),e.forEach(function(t){s[t.id]=t}),t.episodeMap=s,t.episodes=da(e),t.episodeIndex=vo(t.episodes),t.displayedEpisodes=t.episodes.slice(0,hr),t.displayedEpisodesLength=t.episodes.length,t.episodes.length>0?t.currentEpisode=t.episodes[0]:t.currentEpisode=null}),Object(Y["a"])(V,ai,function(t,e){var s=e.shot,i=e.taskTypeMap;s.tasks.forEach(function(t){vc.populateTask(t,s)}),s.tasks=oa(s.tasks,i),t.shotMap[s.id]=s}),Object(Y["a"])(V,ri,function(t,e){t.shotsCsvFormData=e}),Object(Y["a"])(V,ci,function(t){}),Object(Y["a"])(V,li,function(t){t.shotsCsvFormData=null}),Object(Y["a"])(V,xe,function(t,e){t.openProductions=e}),Object(Y["a"])(V,di,function(t,e){t.editShot.isLoading=!0,t.editShot.isError=!1}),Object(Y["a"])(V,pi,function(t){t.editShot.isLoading=!1,t.editShot.isError=!0}),Object(Y["a"])(V,ui,function(t,e){var s=t.shotMap[e.id],i=t.sequences.find(function(t){return t.id===e.parent_id});if(e.sequence_name=i.name,s)J()(s,e);else{_c.shots.push(e),_c.shots=ia(_c.shots),t.shotMap[e.id]=e;var n=t.displayedShots.length,a=t.nbValidationColumns;t.shotSelectionGrid=Ha(n,a)}t.editShot={isLoading:!1,isError:!1},_c.shotIndex=fo(_c.shots),t.shotCreated=e.name,t.shotSearchText?vc.setListStats(t,_c.result):vc.setListStats(t,_c.shots),e.data.fps&&(t.isFps=!0),e.data.frame_in&&(t.isFrameIn=!0),e.data.frame_out&&(t.isFrameOut=!0)}),Object(Y["a"])(V,hi,function(t,e){}),Object(Y["a"])(V,fi,function(t){}),Object(Y["a"])(V,mi,function(t,e){var s=t.sequenceMap[e.id];s&&J()(s,e),t.sequenceIndex=_o(t.sequences)}),Object(Y["a"])(V,_i,function(t,e){}),Object(Y["a"])(V,yi,function(t){}),Object(Y["a"])(V,vi,function(t,e){var s=t.episodeMap[e.id];s&&J()(s,e),t.episodeIndex=vo(t.episodes)}),Object(Y["a"])(V,xi,function(t){t.deleteShot={isLoading:!0,isError:!1}}),Object(Y["a"])(V,Ai,function(t){t.deleteShot={isLoading:!1,isError:!0}}),Object(Y["a"])(V,Oi,function(t,e){var s=t.shotMap[e.id];if(s.tasks.length>0&&!s.canceled)s.canceled=!0;else{var i=_c.shots.findIndex(function(t){return t.id===e.id}),n=t.displayedShots.findIndex(function(t){return t.id===e.id});_c.shots.splice(i,1),t.displayedShots.splice(n,1),t.shotMap[e.id]=void 0,t.displayedShotsLength=Math.max(t.displayedShotsLength-1,0),e.timeSpent&&(t.displayedShotsTimeSpent-=e.timeSpent),s.nb_frames&&(t.displayedShotsFrames-=e.nb_frames)}t.deleteShot={isLoading:!1,isError:!1},_c.shotIndex=fo(_c.shots)}),Object(Y["a"])(V,$i,function(t){}),Object(Y["a"])(V,Di,function(t){}),Object(Y["a"])(V,Li,function(t,e){var s=t.sequences.findIndex(function(t){return t.id===e.id}),i=t.sequences.findIndex(function(t){return t.id===e.id});t.sequences.splice(s,1),t.displayedSequences.splice(i,1),t.displayedSequencesLength=t.displayedSequences.length,t.sequenceMap[e.id]=void 0,t.sequenceIndex=_o(t.sequences)}),Object(Y["a"])(V,ji,function(t){}),Object(Y["a"])(V,Mi,function(t){}),Object(Y["a"])(V,Ii,function(t,e){var s=t.episodes.findIndex(function(t){return t.id===e.id}),i=t.episodes.findIndex(function(t){return t.id===e.id});t.episodes.splice(s,1),t.displayedEpisodes.splice(i,1),t.displayedEpisodesLength=t.displayedEpisodes.length,t.episodeMap[e.id]=void 0,t.episodeIndex=vo(t.episodes)}),Object(Y["a"])(V,Fi,function(t){t.restoreShot={isLoading:!0,isError:!1}}),Object(Y["a"])(V,Ni,function(t){t.restoreShot={isLoading:!1,isError:!0}}),Object(Y["a"])(V,qi,function(t,e){var s=t.shotMap[e.id];s.canceled=!1,t.restoreShot={isLoading:!1,isError:!1},_c.shotIndex=fo(_c.shots)}),Object(Y["a"])(V,ee,function(t,e){e.comment,e.taskId}),Object(Y["a"])(V,Ri,function(t,e){var s=e.shotSearch,i=e.taskStatusMap,n=e.taskMap,a=e.taskTypeMap,o=e.production,r=Ca()(a),c=Ca()(i),l=s,d=Co(l)||[],u=Eo(_c.shotIndex,r,c,o.descriptors,l),p=yo(_c.shotIndex,d)||_c.shots;p=So(p,u,n),_c.result=p,t.displayedShots=p.slice(0,hr),vc.setListStats(t,p),t.shotFilledColumns=io(t.displayedShots),t.shotSearchText=s;var h=t.displayedShots.length,m=t.nbValidationColumns;t.shotSelectionGrid=Ha(h,m)}),Object(Y["a"])(V,Ui,function(t,e){var s=Co(e),i=yo(t.sequenceIndex,s)||t.sequences;t.displayedSequences=i.slice(0,hr),t.displayedSequencesLength=i.length,t.sequenceSearchText=e}),Object(Y["a"])(V,zi,function(t,e){var s=Co(e),i=yo(t.episodeIndex,s)||t.episodes;t.displayedEpisodes=i.slice(0,hr),t.displayedEpisodesLength=i.length,t.episodeSearchText=e}),Object(Y["a"])(V,gi,function(t){}),Object(Y["a"])(V,bi,function(t){}),Object(Y["a"])(V,ki,function(t,e){var s=t.sequenceMap[e.parent_id],i=t.episodeMap[s.parent_id];e.production_id=e.project_id,e.sequence_name=s.name,e.sequence_id=s.id,e.episode_name=i?i.name:null,e.episode_id=i?i.id:null,e.preview_file_id="",e.tasks=[],e.validations={},e.data={},_c.shots.push(e),_c.shots=ia(_c.shots),t.displayedShots=_c.shots.slice(0,hr),vc.setListStats(t,_c),t.shotFilledColumns=io(t.displayedShots),t.shotMap[e.id]=e,_c.shotIndex=fo(_c.shots);var n=t.displayedShots.length,a=t.nbValidationColumns;t.shotSelectionGrid=Ha(n,a),e.data.fps&&(t.isFps=!0),e.data.frame_in&&(t.isFrameIn=!0),e.data.frame_out&&(t.isFrameOut=!0)}),Object(Y["a"])(V,Ti,function(t){}),Object(Y["a"])(V,Ci,function(t){}),Object(Y["a"])(V,Si,function(t,e){if(e.parent_id){var s=t.episodeMap[e.parent_id];e.episode_id=s.id,e.episode_name=s.name}t.sequences.push(e),t.sequences=na(t.sequences),t.sequenceMap[e.id]=e,t.sequenceIndex=_o(t.sequences)}),Object(Y["a"])(V,wi,function(t){}),Object(Y["a"])(V,Pi,function(t){}),Object(Y["a"])(V,Ei,function(t,e){t.episodes.push(e),t.episodes=da(t.episodes),t.displayedEpisodes=t.episodes,t.episodeMap[e.id]=e}),Object(Y["a"])(V,oe,function(t,e){e.forEach(function(e){if(e){var s=t.shotMap[e.entity_id];if(s){var i=Object(l["a"])({},s.validations);a.a.set(i,e.task_type_id,e.id),delete s.validations,a.a.set(s,"validations",i)}}})}),Object(Y["a"])(V,Hi,function(t,e){var s=e.taskTypeMap,i=e.taskStatusMap,n=e.taskMap,a=e.production,o=_c.shots;if(t.shotSearchText.length>0){var r=Ca()(s),c=Ca()(i),l=t.shotSearchText,d=Co(l)||[],u=Eo(_c.shotIndex,r,c,a.descriptors||[],l);o=yo(_c.shotIndex,d)||_c.shots,o=So(o,u,n)}t.displayedShots=o.slice(0,t.displayedShots.length+hr),t.shotFilledColumns=io(t.displayedShots);var p=t.displayedShots.length-hr,h=t.displayedShots.length,m=t.nbValidationColumns;p>=0&&(t.shotSelectionGrid=Ga(t.shotSelectionGrid,p,h,m))}),Object(Y["a"])(V,Gi,function(t,e){var s=t.sequences;if(t.sequenceSearchText.length>0){var i=Co(t.sequenceSearchText);s=yo(t.sequenceIndex,i)}t.displayedSequences=s.slice(0,t.displayedSequences.length+hr)}),Object(Y["a"])(V,Wi,function(t,e){var s=t.episodes;if(t.episodeSearchText.length>0){var i=Co(t.episodeSearchText);s=yo(t.episodeIndex,i)}t.displayedEpisodes=s.slice(0,t.displayedEpisodes.length+hr)}),Object(Y["a"])(V,Ne,function(t,e){t.shotSearchText="",t.sequenceSearchText=""}),Object(Y["a"])(V,tn,function(t){t.episodes=[],t.currentEpisode=null}),Object(Y["a"])(V,Yn,function(t,e){var s=e.entityId,i=(e.taskId,e.previewId),n=e.taskMap,a=t.shotMap[s];a&&(a.preview_file_id=i,a.tasks.forEach(function(t){var e=n[t];e.entity.preview_file_id=i}))}),Object(Y["a"])(V,Ki,function(t,e){t.shotListScrollPosition=e}),Object(Y["a"])(V,Qi,function(t,e){t.sequenceListScrollPosition=e}),Object(Y["a"])(V,Yi,function(t,e){t.episodeListScrollPosition=e}),Object(Y["a"])(V,ye,function(t,e){t.shotSelectionGrid[0]&&t.shotSelectionGrid[e.x]&&(t.shotSelectionGrid[e.x][e.y]=!1)}),Object(Y["a"])(V,_e,function(t,e){t.shotSelectionGrid[0]&&t.shotSelectionGrid[e.x]&&(t.shotSelectionGrid[e.x][e.y]=!0)}),Object(Y["a"])(V,ge,function(t,e){var s=JSON.parse(ka()(t.shotSelectionGrid));t.shotSelectionGrid=Wa(s)}),Object(Y["a"])(V,Xi,function(t,e){var s=e.taskMap,i=e.taskStatusMap;t.sequenceStats=Ka(_c.shots,"sequence_id",i,s)}),Object(Y["a"])(V,Ji,function(t,e){var s=e.taskMap,i=e.taskStatusMap;t.episodeStats=Ka(_c.shots,"episode_id",i,s)}),Object(Y["a"])(V,se,function(t,e){var s=t.shotMap[e.entity_id];s&&e&&(e=vc.populateTask(e,s),s.tasks.push(e),a.a.set(s.validations,e.task_type_id,e.id))}),Object(Y["a"])(V,re,function(t,e){var s=t.displayedShots.find(function(t){return t.id===e.entity_id});if(s){var i=JSON.parse(ka()(s.validations));delete i[e.task_type_id],delete s.validations,a.a.set(s,"validations",i);var n=s.tasks.findIndex(function(t){return t===e.id});s.tasks.splice(n,1)}}),Object(Y["a"])(V,oe,function(t,e){e.forEach(function(e){if(e){var s=t.shotMap[e.entity_id];if(s){var i=Object(l["a"])({},s.validations);a.a.set(i,e.task_type_id,e.id),delete s.validations,a.a.set(s,"validations",i)}}})}),Object(Y["a"])(V,ve,function(t,e){var s=JSON.parse(ka()(t.shotSelectionGrid));e.forEach(function(t){s[0]&&s[t.x]&&(s[t.x][t.y]=!0)}),t.shotSelectionGrid=s}),Object(Y["a"])(V,Zi,function(t,e){e&&(t.currentEpisode=t.episodeMap[e])}),Object(Y["a"])(V,en,function(t,e){var s={};Ta()(e).forEach(function(t){Ta()(e[t]).forEach(function(t){s[t]=!0})}),t.episodeStats=e,t.episodeValidationColumns=Ta()(s)}),Object(Y["a"])(V,Zn,function(t){J()(t,Object(l["a"])({},yc)),_c.shots=[],_c.result=[],_c.shotIndex={}}),V),Sc={state:gc,getters:kc,actions:bc,mutations:Tc};a.a.use(d["a"]);var Cc={assetTypes:ya,assets:br,breakdown:Or,customActions:Fr,login:Ur,main:Qr,people:zo,playlists:fc,productions:pr,notifications:sc,shots:Sc,tasks:nr,taskTypes:Xo,taskStatus:Fo,user:lc},wc=new d["a"].Store({getters:i,strict:!0,modules:Cc}),Ec={logIn:function(t,e,s){K.a.post("/api/auth/login").send({email:t,password:e}).end(function(t,e){if(t)e.body.default_password&&AT.push({name:"reset-change-password",params:{token:e.body.token}}),s(t);else if(e.body.login){var i=e.body.user,n=e.body.ldap;wc.commit(nn,{isLdap:n}),s(null,i)}else wc.commit(fn),s(new Error("Login failed"))})},logout:function(t){K.a.get("/api/auth/logout").end(function(e,s){e&&(console.error(e),t(e)),wc.commit(mn),t()})},backToLogin:function(){AT.push("/login"),wc.commit(Zn),wc.commit(mn)},resetPassword:function(t){return new G.a(function(e,s){K.a.post("/api/auth/reset-password").send({email:t}).end(function(t,i){t?s(t):e()})})},resetChangePassword:function(t,e,s){return new G.a(function(i,n){K.a.put("/api/auth/reset-password").send({token:t,password:e,password2:s}).end(function(t,e){t?n(t):i()})})},isServerLoggedIn:function(t){K.a.get("/api/auth/authenticated").end(function(e,s){if(e&&[401,422].includes(s.statusCode))wc.commit(fn),t(null);else if(e)wc.commit(fn),t(e);else if(null===s.body)wc.commit(fn),t(e);else{var i=s.body.user,n=s.body.ldap;wc.commit(hn,i),t(null,n)}})},requireAuth:function(t,e,s){var i=function(e){wc.state.user.isAuthenticated?(wc.commit(nn,{isLdap:e}),s()):s({path:"/login",query:{redirect:t.fullPath}})};null===wc.state.user.user?Ec.isServerLoggedIn(function(e,n){e?s({path:"/server-down",query:{redirect:t.fullPath}}):i(n)}):i()},isPasswordValid:function(t,e){return t.length>6&&t===e}},Pc=Ec,xc={setLocale:function(){var t=wc.state.user.user.locale;U.locale=t.substring(0,2),"zh_Hans_CN"===t?Ua.a.locale("zh_CN"):Ua.a.locale(t.substring(0,2))}},Oc=xc,Ac={setTimezone:function(){var t=wc.state.user.user.timezone||Ua.a.tz.guess();Ua.a.tz.setDefault(t)}},$c=function(t){wc.commit(nn);var e=["loadProductionStatus","loadTaskStatuses","loadAssetTypes","loadTaskTypes","loadPeople","loadOpenProductions","loadCustomActions","loadUserSearchFilters","loadNotifications"];$a.a.mapSeries(e,wc.dispatch,function(e){e&&console.log("An init operation failed: ",e),wc.commit(an),t()})},Lc=$c,Dc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page asset"},[s("div",{staticClass:"page-header flexrow"},[s("router-link",{staticClass:"flexrow-item has-text-centered back-link",attrs:{to:t.assetsPath}},[s("chevron-left-icon")],1),t.currentAsset?s("entity-thumbnail",{staticClass:"asset-thumbnail flexrow-item",attrs:{entity:t.currentAsset,"with-link":!1}}):t._e(),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:t.title}})],1),s("div",{staticClass:"flexrow-item"},[s("button-simple",{attrs:{icon:"edit"},on:{click:function(e){t.modals.edit=!0}}})],1)],1),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:t.$t("assets.tasks")}}),s("entity-task-list",{staticClass:"task-list",attrs:{entries:t.currentAsset?t.currentAsset.tasks:[],"is-loading":!t.currentAsset,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:t.$t("main.info")}}),s("div",{staticClass:"table-body"},[t.currentAsset?s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("assets.fields.description")))]),s("description-cell",{attrs:{entry:t.currentAsset,full:!0}})],1),t._l(t.assetMetadataDescriptors,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"field-label"},[t._v(t._s(e.name))]),s("td",[t._v("\n                "+t._s(t.currentAsset.data?t.currentAsset.data[e.field_name]:"")+"\n              ")])])})],2)]):t._e()])],1)]),s("div",{staticClass:"asset-casted-in"},[s("page-subtitle",{attrs:{text:t.$t("assets.cast_in")}}),t.currentAsset?s("div",t._l(t.currentAsset.castInShotsBySequence,function(e){return t.currentAsset.castInShotsBySequence[0].length>0?s("div",{key:e.length>0?e[0].sequence_name:"",staticClass:"sequence-shots"},[s("div",{staticClass:"shot-sequence"},[t._v("\n          "+t._s(e.length>0?e[0].sequence_name:"")+"\n        ")]),s("div",{staticClass:"shot-list"},t._l(e,function(e){return s("router-link",{key:e.shot_id,staticClass:"shot-link",attrs:{to:{name:"shot",params:{production_id:t.currentProduction.id,shot_id:e.shot_id}}}},[s("entity-thumbnail",{attrs:{entity:e,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[t._v(t._s(e.name))]),e.nb_occurences>1?s("span",[t._v("\n                ("+t._s(e.nb_occurences)+")\n              ")]):t._e()])],1)}))]):s("div",[t._v("\n        "+t._s(t.$t("assets.no_cast_in"))+"\n      ")])})):s("table-info",{attrs:{"is-loading":t.castIn.isLoadin,"is-error":t.castIn.isError}})],1),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:t.modals.edit,"is-loading":t.loading.edit,"is-error":t.errors.edit,"asset-to-edit":t.currentAsset},on:{cancel:function(e){t.modals.edit=!1},confirm:t.confirmEditAsset}})],1)},jc=[],Ic=s("0a35"),Mc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button",attrs:{title:t.title},on:{click:function(e){t.$emit("click")}}},["plus"===t.icon?s("plus-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"download"===t.icon?s("download-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"upload"===t.icon?s("upload-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"edit"===t.icon?s("edit-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"image"===t.icon?s("image-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"delete"===t.icon?s("trash-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"restore"===t.icon?s("rotate-ccw-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.isText?s("span",{class:{text:!0,"is-hidden-touch":t.isResponsive}},[t._v("\n    "+t._s(t.text)+"\n  ")]):t._e()],1)},Fc=[],qc={name:"button-simple",components:{DownloadIcon:Ic["i"],EditIcon:Ic["k"],ImageIcon:Ic["n"],PlusIcon:Ic["u"],RotateCcwIcon:Ic["w"],TrashIcon:Ic["A"],UploadIcon:Ic["B"]},props:{icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean},text:{default:"",type:String},title:{default:"",type:String}},computed:{isText:function(){return this.text&&this.text.length>0}}},Nc=qc,Rc=(s("ad4c"),Object(f["a"])(Nc,Mc,Fc,!1,null,"326fd8b8",null)),Vc=Rc.exports,Bc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[t.entry.description&&t.entry.description.length>0&&!t.full?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltipOptions,expression:"tooltipOptions"}],staticClass:"description",domProps:{innerHTML:t._s(t.compileMarkdown(t.shortenText(t.entry.description,20)))},on:{click:t.onClick}}):s("span",{domProps:{innerHTML:t._s(t.compileMarkdown(t.entry.description))}})])},Uc=[],zc=s("0e54"),Hc=s.n(zc),Gc=(s("f576"),{generateNextName:function(t){var e=t.match(/\d+$/);if(e){var s=e[0],i=t.substring(0,t.length-s.length),n=Ia()(s)+1;return i+String(n).padStart(s.length,"0")}return""},shortenText:function(t,e){var s=t||"";return void 0!==t&&t.length>e&&(s=t.slice(0,e)+"...",s=s.replace(/\n/g," ")),s}}),Wc={name:"description-cell",data:function(){return{isOpen:!1,timeout:null}},components:{},props:{entry:{type:Object,default:function(){}},full:{type:Boolean,default:!1}},computed:Object(l["a"])({},Object(d["c"])([]),{tooltipOptions:function(){return{content:this.compileMarkdown(this.entry.description),show:this.isOpen,trigger:"manual",delay:{hide:5e3}}}}),methods:Object(l["a"])({},Object(d["b"])([]),{compileMarkdown:function(t){return Hc()(t||"")},shortenText:Gc.shortenText,onClick:function(){var t=this;this.isOpen=!this.isOpen,this.isOpen?this.timeout=setTimeout(function(){t.isOpen=!1},3e3):clearTimeout(this.timeout)}})},Kc=Wc,Qc=(s("0586"),Object(f["a"])(Kc,Bc,Uc,!1,null,"219bad1e",null)),Yc=Qc.exports,Xc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.assetToEdit&&this.assetToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("assets.edit_title"))+" "+t._s(t.assetToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("assets.new_asset"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("combobox",{attrs:{label:t.$t("assets.fields.type"),options:t.getAssetTypeOptions},model:{value:t.form.entity_type_id,callback:function(e){t.$set(t.form,"entity_type_id",e)},expression:"form.entity_type_id"}}),t.isTVShow?s("combobox",{attrs:{label:t.$t("assets.fields.episode"),options:t.episodeOptions},model:{value:t.form.source_id,callback:function(e){t.$set(t.form,"source_id",e)},expression:"form.source_id"}}):t._e(),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("assets.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"descriptionField",attrs:{label:t.$t("assets.fields.description")},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t._l(t.assetMetadataDescriptors,function(e){return s("div",{key:e.id},[e.choices.length>0?s("combobox",{attrs:{label:e.name,options:t.getDescriptorChoicesOptions(e)},model:{value:t.form.data[e.field_name],callback:function(s){t.$set(t.form.data,e.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:e.name},on:{enter:t.runConfirmation},model:{value:t.form.data[e.field_name],callback:function(s){t.$set(t.form.data,e.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)})],2),s("div",{staticClass:"has-text-right"},[t.assetToEdit&&t.assetToEdit.id?t._e():s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoadingStay},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:t.confirmAndStayClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation_and_stay"))+"\n        ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),t.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")]):s("button",{staticClass:"button is-link",on:{click:function(e){t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("assets.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.assetSuccessText)+"\n        ")])],1)])])])},Jc=[],Zc={beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{onKeyDown:function(t){"Escape"===t.key&&this.$emit("cancel")}},watch:{active:function(){this.active?window.addEventListener("keydown",this.onKeyDown,!1):window.removeEventListener("keydown",this.onKeyDown)}}},tl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v(t._s(t.label))]),s("p",{staticClass:"control flexrow"},[s("input",{ref:"input",class:"input flexrow-item"+t.inputClass,attrs:{placeholder:t.placeholder,type:t.type,disabled:t.disabled,min:"0"},domProps:{value:t.value},on:{input:function(e){t.updateValue()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.emitEnter()}}}),t.buttonLabel?s("button",{staticClass:"button flexrow-item",on:{click:function(e){t.emitEnter()}}},[t._v("\n      "+t._s(t.buttonLabel)+"\n    ")]):t._e()])])},el=[],sl={name:"text-field",props:{disabled:{default:!1,type:Boolean},label:{default:"",type:String},value:{default:"",type:[String,Number]},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String},buttonLabel:{default:"",type:String}},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},focus:function(){this.$refs.input.focus()}})},il=sl,nl=(s("542c"),Object(f["a"])(il,tl,el,!1,null,"a1846642",null)),al=nl.exports,ol=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v(t._s(t.label))]),s("p",{staticClass:"control"},[s("textarea",{ref:"input",staticClass:"input",class:"input "+t.inputClass,attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.value},on:{input:function(e){t.updateValue()},keyup:[function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.emitEnter()},t.emitKeyup]}})])])},rl=[],cl={name:"textarea-field",props:{label:{default:"",type:String},value:{default:"",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String}},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]),{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},emitKeyup:function(t){this.$emit("keyup",t)},focus:function(){this.$refs.input.focus()}})},ll=cl,dl=(s("736c"),Object(f["a"])(ll,ol,rl,!1,null,"e433a15c",null)),ul=dl.exports,pl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isSimple?s("span",{staticClass:"select"},[s("select",{ref:"select",staticClass:"select-input",on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.emitEnter()},change:t.updateValue}},t._l(t.options,function(e,i){return s("option",{key:i+"-"+e.label+"-"+e.value,domProps:{value:e.value||e.label,selected:t.value===e.value}},[t._v("\n      "+t._s(t.getOptionLabel(e))+"\n    ")])}))]):s("div",{staticClass:"field"},[t.label.length>0?s("label",{staticClass:"label"},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0,"is-top":this.isTop}},[s("select",{ref:"select",staticClass:"select-input",on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.emitEnter()},change:t.updateValue}},t._l(t.options,function(e,i){return s("option",{key:i+"-"+e.label+"-"+e.value,domProps:{value:e.value||e.label,selected:t.value===e.value}},[t._v("\n          "+t._s(t.getOptionLabel(e))+"\n        ")])}))])])])},hl=[],ml={name:"combobox",props:{label:{default:"",type:String},value:{default:"",type:[String,Boolean]},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isTop:{default:!1,type:Boolean},isSimple:{default:!1,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",this.$refs.select.value)},emitEnter:function(){this.$emit("enter",this.$refs.select.value)},getOptionLabel:function(t){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+t.label.toLowerCase()):t.label}}},fl=ml,_l=(s("538d"),Object(f["a"])(fl,pl,hl,!1,null,"68b9f27e",null)),vl=_l.exports,yl={name:"edit-asset-modal",mixins:[Zc],components:{TextField:al,TextareaField:ul,Combobox:vl},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","assetToEdit","errorText"],data:function(){return{form:{name:"",description:"",source_id:null,data:{}},assetSuccessText:""}},computed:Object(l["a"])({},Object(d["c"])(["assets","assetCreated","assetMetadataDescriptors","assetTypes","currentProduction","currentEpisode","episodes","getAssetTypeOptions","getOpenProductionOptions","isTVShow","openProductions"]),{episodeOptions:function(){var t=this.episodes.map(function(t){return{label:t.name,value:t.id}});return t.unshift({label:this.$t("main.all"),value:"null"}),t}}),mounted:function(){this.resetForm(),this.assetSuccessText=""},methods:Object(l["a"])({},Object(d["b"])([]),{runConfirmation:function(){this.form.name.length>0&&(this.isEditing()?this.confirmClicked():this.confirmAndStayClicked())},focusName:function(){this.$refs.nameField.focus()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.assetToEdit&&this.assetToEdit.id},getDescriptorChoicesOptions:function(t){var e=t.choices.map(function(t){return{label:t,value:t}});return[{label:"",value:""}].concat(Object(Oa["a"])(e))},resetForm:function(){this.isEditing()?this.form={entity_type_id:this.assetToEdit.asset_type_id,project_id:this.assetToEdit.project_id,name:this.assetToEdit.name,description:this.assetToEdit.description,source_id:this.assetToEdit.source_id||this.assetToEdit.episode_id,data:Object(l["a"])({},this.assetToEdit.data)||{}}:(!this.form.entity_type_id&&this.assetTypes.length>0&&(this.form.entity_type_id=this.assetTypes[0].id),this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.form.name="",this.form.description="",this.form.source_id=this.currentEpisode?this.currentEpisode.id:null,this.form.data={})}}),watch:{assetToEdit:function(){this.resetForm()},assetCreated:function(){this.isEditing()?this.assetSuccessText=this.$t("assets.edit_success",{name:this.assetCreated}):this.assetSuccessText=this.$t("assets.new_success",{name:this.assetCreated})},active:function(){var t=this;this.assetSuccessText="",this.resetForm(),this.active&&setTimeout(function(){t.$refs.nameField.focus()},100)}}},gl=yl,kl=(s("6632"),Object(f["a"])(gl,Xc,Jc,!1,null,"69492809",null)),bl=kl.exports,Tl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"status"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_status"))+"\n          ")]),s("th",{staticClass:"assignees"},[t._v("\n            "+t._s(t.$t("tasks.fields.assignees"))+"\n          ")])])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.task_type_id},[t.getTaskType(e)?s("task-type-name",{staticClass:"type",attrs:{entry:t.getTaskType(e),"production-id":t.currentProduction.id}}):t._e(),s("td",{staticClass:"status"},[t.getTask(e)?s("validation-tag",{attrs:{task:t.getTask(e)}}):t._e()],1),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},t._l(t.getAssignees(e),function(i){return s("div",{key:i,staticClass:"avatar-wrapper"},[s("people-avatar",{key:e.id+"-"+i,staticClass:"person-avatar flexrow-item",attrs:{person:t.personMap[i],size:30,"font-size":15}})],1)}))])],1)}))])]):t._e()],1)},Sl=[],Cl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("task-type-name",{attrs:{"task-type":t.entry,"production-id":t.productionId}})],1)},wl=[],El=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.productionId?s("router-link",{attrs:{to:t.taskTypePath}},[s("span",{staticClass:"tag task-type-name",style:{"border-left":"4px solid "+t.color}},[t._v("\n    "+t._s(t.taskType.name)+"\n  ")])]):s("div",{staticClass:"tag task-type-name no-link",style:{"border-left":"4px solid "+t.color}},[t._v("\n  "+t._s(t.taskType.name)+"\n")])},Pl=[],xl={name:"task-type-name",components:{},props:["taskType","productionId"],computed:Object(l["a"])({},Object(d["c"])([]),{color:function(){return"#000000"===this.taskType.color.toUpperCase()?"$grey-strong":this.taskType.color},taskTypePath:function(){var t={name:"task-type",params:{production_id:this.productionId,task_type_id:this.taskType.id,type:this.taskType.for_shots?"shots":"assets"}};return(this.taskType.episode_id||this.$route.params.episode_id)&&(t.name="episode-task-type",t.params.episode_id=this.taskType.episode_id||this.$route.params.episode_id),t}}),methods:Object(l["a"])({},Object(d["b"])([]))},Ol=xl,Al=(s("c9ad"),Object(f["a"])(Ol,El,Pl,!1,null,"0bdc8bba",null)),$l=Al.exports,Ll={name:"task-type-cell",components:{TaskTypeName:$l},props:["entry","productionId"],computed:Object(l["a"])({},Object(d["c"])([]),{color:function(){return"#000000"===this.entry.color.toUpperCase()?"$grey-strong":this.entry.color}}),methods:Object(l["a"])({},Object(d["b"])([]))},Dl=Ll,jl=(s("4267"),Object(f["a"])(Dl,Cl,wl,!1,null,"6f7d3066",null)),Il=jl.exports,Ml=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("spinner",{staticClass:"table-info"}):t._e(),t.isError?s("div",{staticClass:"has-text-centered table-info"},[s("span",{staticClass:"tag is-danger"},[t._v("\n      "+t._s(t.$t("main.loading_error"))+"\n    ")])]):t._e()],1)},Fl=[],ql={name:"table-footer",components:{Spinner:v},props:{isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}}},Nl=ql,Rl=Object(f["a"])(Nl,Ml,Fl,!1,null,"3aa8ce60",null),Vl=Rl.exports,Bl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[t.minimized?s("span",[t.isStatic||t.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:t.backgroundColor,color:t.color,cursor:t.cursor}},[t._v("\n     \n  ")]):s("router-link",{staticClass:"tag dynamic",style:{background:t.backgroundColor,color:t.color},attrs:{to:t.taskPath(t.task)}},[t._v("\n      \n  ")])],1):s("span",[t.isStatic||t.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:t.backgroundColor,color:t.color,cursor:t.cursor}},[t._v("\n    "+t._s(t.taskStatus.short_name)+"\n  ")]):s("router-link",{staticClass:"tag dynamic",style:{background:t.backgroundColor,color:t.color},attrs:{to:t.taskPath(t.task)}},[t._v("\n    "+t._s(t.taskStatus.short_name)+"\n  ")]),t.isPriority&&!t.isCurrentUserClient?s("span",{staticClass:"priority"},[t._v("\n    "+t._s(t.priority)+"\n  ")]):t._e()],1)])},Ul=[],zl={name:"validation-tag",props:{task:{default:function(){},type:Object},isStatic:{default:!1,type:Boolean},isPriority:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},pointer:{default:!1,type:Boolean}},computed:Object(l["a"])({},Object(d["c"])(["currentEpisode","currentProduction","isDarkTheme","isTVShow","taskMap","taskStatusMap","taskTypeMap","isCurrentUserClient"]),{cursor:function(){return this.pointer?"pointer":"default"},taskStatus:function(){if(this.task){var t=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[t]:{}}return{}},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?Va.darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return!this.task.priority||this.taskStatus.is_done?"":3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":void 0}}),methods:{taskPath:function(t){var e=this.task.project_id?this.task.project_id:this.currentProduction.id,s={name:"task",params:{production_id:e,task_id:t.id}};this.isTVShow&&this.currentEpisode&&(s.name="episode-task",s.params.episode_id=t.episode_id||this.currentEpisode.id);var i=this.taskTypeMap[t.task_type_id];return s.params.type=i.for_shots?"shots":"assets",s}}},Hl=zl,Gl=(s("6ec4"),Object(f["a"])(Hl,Bl,Ul,!1,null,"6078d13a",null)),Wl=Gl.exports,Kl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isLink?s("span",{staticClass:"avatar has-text-centered",style:{background:t.person.color,width:t.size+"px",height:t.size+"px","min-width":t.size+"px","min-height":t.size+"px","font-size":t.person.has_avatar?0:t.fontSize+"px"}},[s("router-link",{staticClass:"avatar-link",attrs:{to:{name:"person",params:{person_id:t.person.id}}}},[t.person.has_avatar&&t.noCache?s("img",{attrs:{src:t.avatarPath}}):t.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatarPath,expression:"avatarPath"}]}):t._e(),t.person.has_avatar?t._e():s("span",[t._v("\n       "+t._s(t.person.initials)+"\n      ")])])],1):s("span",{staticClass:"avatar has-text-centered",style:{background:t.person.color,width:t.size+"px",height:t.size+"px","font-size":t.fontSize+"px"}},[t.person.has_avatar&&t.noCache?s("img",{attrs:{src:t.avatarPath}}):t.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.person.avatarPath,expression:"person.avatarPath"}]}):s("span",[t._v("\n    "+t._s(t.person.initials)+"\n  ")])])},Ql=[],Yl={name:"person-avatar",data:function(){return{avatarPath:"".concat(this.person.avatarPath)}},props:{person:{type:Object,default:function(){return{color:"#FFF"}}},size:{type:Number,default:40},"font-size":{type:Number,default:18},"is-link":{type:Boolean,default:!0},"no-cache":{type:Boolean,default:!1}},methods:{reloadAvatar:function(){this.avatarPath=this.person.avatarPath+"&stamp="+(new Date).toISOString()}},watch:{person:function(){this.reloadAvatar()}}},Xl=Yl,Jl=(s("9a30"),Object(f["a"])(Xl,Kl,Ql,!1,null,"143d559e",null)),Zl=Jl.exports,td={name:"todos-list",components:{TableInfo:Vl,TaskTypeName:Il,PeopleAvatar:Zl,ValidationTag:Wl},props:{entries:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","personMap","taskMap","taskTypeMap"])),methods:Object(l["a"])({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},getTask:function(t){return"string"===typeof t?this.taskMap[t]:t},getTaskType:function(t){var e=this.getTask(t);return e?this.taskTypeMap[e.task_type_id]:null},getAssignees:function(t){var e=this.getTask(t);return e?e.assignees:[]}})},ed=td,sd=(s("2534"),Object(f["a"])(ed,Tl,Sl,!1,null,"40f8ab6a",null)),id=sd.exports,nd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isPreview&&t.withLink?s("a",{style:{width:t.emptyWidth+"px",height:t.emptyHeight+"px"},attrs:{href:t.originalPath,target:"_blank"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.thumbnailPath,expression:"thumbnailPath"}],key:t.thumbnailKey,staticClass:"thumbnail-picture",style:t.imgStyle})]):t.isPreview&&!t.withLink?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.thumbnailPath,expression:"thumbnailPath"}],key:t.thumbnailKey,staticClass:"thumbnail-picture",staticStyle:{}}):s("span",{class:{"thumbnail-picture":!0,"thumbnail-empty":!0,square:t.square},style:{width:t.emptyWidth+"px",height:t.emptyHeight+"px"}})},ad=[],od={name:"entity-thumbnail",props:{entity:{default:function(){},type:Object},square:{default:!1,type:Boolean},width:{default:null,type:Number},height:{default:null,type:Number},emptyWidth:{default:50,type:Number},emptyHeight:{default:30,type:Number},previewFileId:{default:null,type:String},withLink:{default:!0,type:Boolean}},computed:{originalPath:function(){return"/api/pictures/originals/preview-files/"+this.entity.preview_file_id+".png"},isPreview:function(){return this.entity.preview_file_id&&this.entity.preview_file_id.length>0},imgStyle:function(){var t={};return this.width&&(t.width=this.width+"px"),this.height&&(t.height=this.height+"px"),t},thumbnailPath:function(){var t=this.previewFileId||this.entity.preview_file_id;return this.square?"/api/pictures/thumbnails-square/preview-files/"+t+".png":"/api/pictures/thumbnails/preview-files/"+t+".png"},thumbnailKey:function(){var t=this.previewFileId||this.entity.preview_file_id;return"thumbnail-".concat(t)}}},rd=od,cd=(s("916c"),Object(f["a"])(rd,nd,ad,!1,null,"0dd6f0a2",null)),ld=cd.exports,dd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h1",{staticClass:"title hide-small-screen"},[t._v(t._s(t.text))])},ud=[],pd={name:"page-title",props:{text:{default:"",type:String}}},hd=pd,md=Object(f["a"])(hd,dd,ud,!1,null,"ead134bc",null),fd=md.exports,_d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"subtitle"},[t._v(t._s(t.text))])},vd=[],yd={name:"page-subtitle",props:{text:{default:"",type:String}}},gd=yd,kd=(s("fb36"),Object(f["a"])(gd,_d,vd,!1,null,"67ee08da",null)),bd=kd.exports,Td={name:"asset",components:{ButtonSimple:Vc,ChevronLeftIcon:Ic["d"],DescriptionCell:Yc,EditAssetModal:bl,EntityThumbnail:ld,EntityTaskList:id,PageSubtitle:bd,PageTitle:fd,TableInfo:Vl},data:function(){return{currentAsset:null,castIn:{isLoading:!1,isError:!1},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},created:function(){var t=this;this.clearSelectedTasks(),this.currentAsset=this.getCurrentAsset(),this.castIn.isLoading=!0,this.castIn.isError=!1,this.currentAsset?this.loadAssetCastIn({asset:this.currentAsset,callback:function(e,s){t.castIn.isError=!!e,t.castIn.isLoading=!0}}):this.loadAsset({assetId:this.route.params.asset_id,callback:function(e){e||(t.currentAsset=t.getCurrentAsset(),t.loadAssetCastIn({asset:t.currentAsset,callback:function(e,s){t.castIn.isError=!!e,t.castIn.isLoading=!0}}))}})},computed:Object(l["a"])({},Object(d["c"])(["assetMap","assetMetadataDescriptors","assetsPath","currentProduction","route"]),{title:function(){return this.currentAsset?"".concat(this.currentAsset.asset_type_name," / ")+"".concat(this.currentAsset.name):"Loading..."},assetThumbnailPath:function(){var t=this.currentAsset.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,".png")},isPreview:function(){return this.currentAsset&&this.currentAsset.preview_file_id&&this.currentAsset.preview_file_id.length>0}}),methods:Object(l["a"])({},Object(d["b"])(["editAsset","loadAsset","loadAssetCastIn","clearSelectedTasks"]),{changeTab:function(t){this.selectedTab=t},getCurrentAsset:function(){return this.assetMap[this.route.params.asset_id]||null},onEditClicked:function(){this.modals.edit=!0},confirmEditAsset:function(t){var e=this;t.id=this.currentAsset.id,this.loading.edit=!0,this.errors.edit=!1,this.editAsset({data:t,callback:function(t){t?(e.loading.edit=!1,e.errors.edit=!0):(e.loading.edit=!1,e.modals.edit=!1)}})}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Sd=Td,Cd=(s("6c70"),Object(f["a"])(Sd,Dc,jc,!1,null,"05489abc",null)),wd=Cd.exports,Ed=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"assets page"},[s("div",{staticClass:"asset-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("search-field",{ref:"asset-search-field",attrs:{"can-save":!0,placeholder:"ex: props modeling=wip"},on:{change:t.onSearchChange,save:t.saveSearchQuery}})],1)]),s("div",{staticClass:"level-right flexrow"},[s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),t.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-link",{staticClass:"flexrow-item",attrs:{title:t.$t("main.csv.import_file"),icon:"upload","is-responsive":!0,path:t.importPath}}),s("button-href-link",{staticClass:"flexrow-item",attrs:{title:t.$t("main.csv.export_file"),icon:"download","is-responsive":!0,path:"/api/export/csv/projects/"+t.currentProduction.id+"/assets.csv"}}),s("button-link",{staticClass:"flexrow-item",attrs:{text:t.$t("assets.new_asset"),icon:"plus","is-responsive":!0,path:t.newAssetPath}})],1):t._e()])]),s("div",{staticClass:"query-list"},[t.isAssetsLoading||t.initialLoading?t._e():s("search-query-list",{attrs:{queries:t.assetSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1)]),s("asset-list",{ref:"asset-list",attrs:{"displayed-assets":t.displayedAssetsByType,"is-loading":t.isAssetsLoading||t.initialLoading,"is-error":t.isAssetsLoadingError,"validation-columns":t.assetValidationColumns},on:{scroll:t.saveScrollPosition,"delete-all-tasks":t.onDeleteAllTasksClicked,"add-metadata":t.onAddMetadataClicked,"delete-metadata":t.onDeleteMetadataClicked,"edit-metadata":t.onEditMetadataClicked}})],1)]),1===t.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(t.selectedTasks)[0]}})],1):t._e(),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-loading-stay":t.loading.stay,"is-error":t.editAsset.isCreateError,"is-success":t.editAsset.isSuccess,"cancel-route":t.assetsPath,"asset-to-edit":t.assetToEdit},on:{confirm:t.confirmEditAsset,confirmAndStay:t.confirmNewAssetStay}}),s("delete-modal",{ref:"delete-asset-modal",attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteAsset.isLoading,"is-error":t.deleteAsset.isError,"cancel-route":t.assetsPath,text:t.deleteText(),"error-text":t.$t("assets.delete_error")},on:{confirm:t.confirmDeleteAsset}}),s("delete-modal",{ref:"restore-asset-modal",attrs:{active:t.modals.isRestoreDisplayed,"is-loading":t.restoreAsset.isLoading,"is-error":t.restoreAsset.isDeleteError,"cancel-route":t.assetsPath,text:t.restoreText(),"error-text":t.$t("assets.restore_error")},on:{confirm:t.confirmRestoreAsset}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:t.modals.isDeleteAllTasksDisplayed,"is-loading":t.loading.deleteAllTasks,"is-error":t.errors.deleteAllTasks,"cancel-route":t.assetsPath,text:t.deleteAllTasksText(),"error-text":t.$t("tasks.delete_all_error"),"lock-text":t.deleteAllTasksLockText},on:{confirm:t.confirmDeleteAllTasks}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:t.modals.isDeleteMetadataDisplayed,"is-loading":t.loading.deleteMetadata,"is-error":t.errors.deleteMetadata,text:t.$t("productions.metadata.delete_text"),"error-text":t.$t("productions.metadata.delete_error")},on:{cancel:function(e){t.modals.isDeleteMetadataDisplayed=!1},confirm:t.confirmDeleteMetadata}}),s("import-modal",{attrs:{active:t.modals.isImportDisplayed,"is-loading":t.loading.importing,"is-error":t.errors.importing,"cancel-route":t.assetsPath,"form-data":t.assetsCsvFormData,columns:t.columns},on:{fileselected:t.selectFile,confirm:t.uploadImportFile}}),s("create-tasks-modal",{attrs:{active:t.modals.isCreateTasksDisplayed,"is-loading":t.loading.creatingTasks,"is-loading-stay":t.loading.taskStay,"is-error":t.errors.creatingTasks,"cancel-route":t.assetsPath,title:t.$t("tasks.create_tasks_asset"),text:t.$t("tasks.create_tasks_asset_explaination"),"error-text":t.$t("tasks.create_tasks_asset_failed")},on:{confirm:t.confirmCreateTasks,"confirm-and-stay":t.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:t.modals.isAddMetadataDisplayed,"is-loading":t.loading.addMetadata,"is-loading-stay":t.loading.addMetadata,"is-error":t.errors.addMetadata,"descriptor-to-edit":t.descriptorToEdit},on:{cancel:function(e){t.modals.isAddMetadataDisplayed=!1},confirm:t.confirmAddMetadata}})],1)},Pd=[],xd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":t.hiddenColumns[t.lastHeaderMenuDisplayed],"is-current-user-admin":t.isCurrentUserAdmin},on:{"minimize-clicked":function(e){t.onMinimizeColumnToggled()},"delete-all-clicked":function(e){t.onDeleteAllTasksClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":t.isCurrentUserAdmin},on:{"edit-clicked":function(e){t.onEditMetadataClicked()},"delete-clicked":function(e){t.onDeleteMetadataClicked()}}}),s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[t.isTVShow?s("th",{ref:"th-episode",staticClass:"episode"},[t._v("\n            "+t._s(t.$t("assets.fields.episode"))+"\n          ")]):t._e(),s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),s("th",{ref:"th-name",staticClass:"name"},[t._v(t._s(t.$t("assets.fields.name")))]),!t.isCurrentUserClient&&t.isShowInfos?s("th",{ref:"th-description",staticClass:"description"},[t._v("\n            "+t._s(t.$t("assets.fields.description"))+"\n            "),t.isCurrentUserAdmin&&!t.isLoading?s("button-simple",{staticClass:"is-small",attrs:{icon:"plus",text:""},on:{click:t.onAddMetadataClicked}}):t._e()],1):t._e(),t._l(t.assetMetadataDescriptors,function(e){return t.isShowInfos?s("th",{key:e.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[t._v("\n              "+t._s(e.name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){t.showMetadataHeaderMenu(e.id,s)}}})],1)]):t._e()}),!t.isCurrentUserClient&&t.isShowInfos?s("th",{ref:"th-spent",staticClass:"time-spent"},[t._v("\n            "+t._s(t.$t("assets.fields.time_spent"))+"\n          ")]):t._e(),t._l(t.sortedValidationColumns,function(e){return t.isLoading||t.hiddenColumns[e]&&!t.isShowInfos?t._e():s("th",{key:e,class:{"validation-cell":!t.hiddenColumns[e],"hidden-validation-cell":t.hiddenColumns[e]},style:t.getValidationStyle(e)},[s("div",{staticClass:"flexrow"},[s("router-link",{staticClass:"flexrow-item",staticStyle:{"margin-right":"0"},attrs:{to:t.taskTypePath(e)}},[t._v("\n                "+t._s(t.hiddenColumns[e]?"":t.taskTypeMap[e].name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){t.showHeaderMenu(e,s)}}})],1)])}),s("th",{staticClass:"actions"},[t.isCurrentUserManager&&t.displayedAssets.length>0&&!t.isLoading?s("button-link",{class:{"is-small":!0,highlighted:t.isEmptyTask},attrs:{icon:"plus",text:t.$t("tasks.create_tasks"),path:t.createTasksPath}}):t._e()],1)],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),!t.isEmptyList||t.isCurrentUserClient||t.isLoading?t._e():s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("assets.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("assets.new_assets"),path:t.newAssetPath()}})],1),t.isEmptyList&&t.isCurrentUserClient&&!t.isLoading?s("div",{staticClass:"has-text-centered"},[t._m(1),s("p",{staticClass:"info"},[t._v(t._s(t.$t("assets.empty_list_client")))])]):t._e(),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[t.isListVisible?s("table",{staticClass:"table splitted-table unselectable"},t._l(t.displayedAssets,function(e,i){return s("tbody",{key:e[0]?e[0].asset_type_id+e[0].canceled:"",ref:"body-tbody",refInFor:!0,staticClass:"tbody"},[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[t._v("\n            "+t._s(e[0]?e[0].asset_type_name:"")+"\n          ")])]),t._l(e,function(e,n){return s("tr",{key:e.id,class:{canceled:e.canceled}},[t.isTVShow?s("td",{staticClass:"episode"},[t._v("\n            "+t._s(t.episodeMap[e.episode_id]?t.episodeMap[e.episode_id].name:t.$t("main.all"))+"\n          ")]):t._e(),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e}})],1),s("td",{class:{name:!0,bold:!e.canceled}},[s("router-link",{staticClass:"asset-link",attrs:{to:t.assetPath(e.id)}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1),!t.isCurrentUserClient&&t.isShowInfos?s("description-cell",{staticClass:"description",attrs:{entry:e}}):t._e(),t._l(t.assetMetadataDescriptors,function(i){return t.isShowInfos?s("td",{key:e.id+"-"+i.id,staticClass:"metadata-descriptor"},[t._v("\n            "+t._s(e.data?e.data[i.field_name]:"")+"\n          ")]):t._e()}),!t.isCurrentUserClient&&t.isShowInfos?s("td",{staticClass:"time-spent"},[t._v("\n            "+t._s(t.formatDuration(e.timeSpent))+"\n          ")]):t._e(),t._l(t.sortedValidationColumns,function(a,o){return!t.hiddenColumns[a]||t.isShowInfos?s("validation-cell",{key:a+"-"+e.id,ref:"validation-"+t.getIndex(n,i)+"-"+o,refInFor:!0,class:{"validation-cell":!t.hiddenColumns[a],"hidden-validation-cell":t.hiddenColumns[a]},attrs:{column:t.taskTypeMap[a],entity:e,"task-test":t.taskMap[e.validations[a]],selected:t.assetSelectionGrid[t.getIndex(n,i)][o],rowX:t.getIndex(n,i),columnY:o,minimized:t.hiddenColumns[a],"is-static":!0},on:{select:t.onTaskSelected,unselect:t.onTaskUnselected}}):t._e()}),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":t.editPath(e.id),"delete-route":t.deletePath(e.id),"restore-route":t.restorePath(e.id)}}):s("td",{staticClass:"actions"})],2)}),t._m(2,!0)],2)})):t._e()]),t.isEmptyList||t.isLoading?t._e():s("p",{staticClass:"has-text-centered nb-assets"},[t._v("\n    "+t._s(t.displayedAssetsLength)+" "+t._s(t.$tc("assets.number",t.displayedAssetsLength))+"\n  ")])],1)},Od=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("66a5")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("66a5")}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"empty-line"},[s("td",{attrs:{colspan:"30"}})])}],Ad={created:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)},mounted:function(){this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{sortedValidationColumns:function(){var t=this,e=Object(Oa["a"])(this.validationColumns);return this.assetFilledColumns?e=e.filter(function(e){return t.assetFilledColumns[e]}):this.shotFilledColumns&&(e=e.filter(function(e){return t.shotFilledColumns[e]})),e.sort(function(e,s){var i=t.taskTypeMap[e],n=t.taskTypeMap[s];return i.priority===n.priority?i.name.localeCompare(n):i.priority>n.priority?1:-1})}},methods:{getBackground:function(t){return Va.hexToRGBa(t,.08)},buildHideKey:function(t){return"column-".concat(this.currentProduction.id,"-").concat(t)},initHiddenColumns:function(t,e){var s=this;t.forEach(function(t){var i=s.buildHideKey(t);a.a.set(e,t,"true"===localStorage.getItem(i))})},hideColumn:function(t){var e=this.buildHideKey(t),s=!0;return"true"===localStorage.getItem(e)&&(s=!1),localStorage.setItem(e,s),a.a.set(this.hiddenColumns,t,s),this.hiddenColumns[t]=s,s},setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},setScrollLeftPosition:function(t){this.$refs.body&&(this.$refs.body.scrollLeft=t)},getValidationStyle:function(t){var e=this.taskTypeMap[t];return{"border-left":"1px solid ".concat(e.color),background:this.getBackground(e.color)}},onTaskSelected:function(t){var e=this,s=[];if(t.isShiftKey){if(this.lastSelection){var i=this.lastSelection.x,n=t.x,a=this.lastSelection.y,o=t.y,r=this.assetSelectionGrid;r||(r=this.shotSelectionGrid),t.x<this.lastSelection.x&&(i=t.x,n=this.lastSelection.x),t.y<this.lastSelection.y&&(a=t.y,o=this.lastSelection.y);for(var c=i;c<=n;c++)for(var l=a;l<=o;l++){var d="validation-"+c+"-"+l,u=this.$refs[d][0];r[c][l]||s.push({entity:u.entity,column:u.column,task:u.task,x:u.rowX,y:u.columnY})}this.$store.commit("ADD_SELECTED_TASK",t)}}else t.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(0===s.length?this.$store.commit("ADD_SELECTED_TASK",t):this.$store.commit("ADD_SELECTED_TASKS",s),!t.isShiftKey&&t.isUserClick){var p=t.x,h=t.y;this.lastSelection={x:p,y:h};var m="validation-"+p+"-"+h,f=this.$refs[m][0];this.$nextTick(function(){e.scrollToValidationCell(f)})}},onTaskUnselected:function(t){t.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",t):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",t):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",t))},showHeaderMenu:function(t,e){var s=this.$refs.headerMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var i=e.srcElement.parentNode.parentNode;"TH"!==i.tagName&&(i=i.parentNode);var n=i.getBoundingClientRect(),a=n.left+11,o=n.bottom+10,r=Math.max(100,n.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastHeaderMenuDisplayed=t},showMetadataHeaderMenu:function(t,e){var s=this.$refs.headerMetadataMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var i=e.srcElement.parentNode.parentNode,n=i.getBoundingClientRect(),a=n.left+11,o=n.bottom+10,r=Math.max(100,n.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastMetadaDataHeaderMenuDisplayed=t},onMinimizeColumnToggled:function(){this.hideColumn(this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onDeleteAllTasksClicked:function(){this.$emit("delete-all-tasks",this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onAddMetadataClicked:function(){this.$emit("add-metadata")},onEditMetadataClicked:function(){this.$emit("edit-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},onDeleteMetadataClicked:function(){this.$emit("delete-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()}}},$d={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{formatDuration:function(t){return t?(t/60/8).toLocaleString("fullwide",{maximumFractionDigits:1}):0}}},Ld={computed:{},methods:{onKeyDown:function(t){var e=this.lastSelection?this.lastSelection:{x:0,y:0},s=e.x,i=e.y,n=null;t.ctrlKey&&(37===t.keyCode?n=this.select(s,i-1):38===t.keyCode?n=this.select(s-1,i):39===t.keyCode?n=this.select(s,i+1):40===t.keyCode&&(n=this.select(s+1,i)),this.scrollToValidationCell(n))},setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},setScrollLeftPosition:function(t){this.$refs.body&&(this.$refs.body.scrollLeft=t)},select:function(t,e){var s="validation-"+t+"-"+e,i=this.$refs[s];return i&&i[0].$el.click(),i?i[0]:0},scrollToValidationCell:function(t){if(t){var e=20,s=t.$el.getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),n=s.bottom>i.bottom-e,a=s.top<i.top+e,o=s.right>i.right-e,r=s.left<i.left+e;if(n){var c=s.bottom-i.bottom+e;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var l=i.top-s.top+e;this.setScrollPosition(this.$refs.body.scrollTop-l)}if(o){var d=s.right-i.right+e;this.setScrollLeftPosition(this.$refs.body.scrollLeft+d)}else if(r){var u=i.left-s.left+e;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}}}},Dd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{class:"button "+t.styleclass,attrs:{title:t.title,href:t.path,target:t.target}},[t.icon.length>0&&t.icon.startsWith("fa")?s("span",{staticClass:"icon is-small"},[s("i",{class:"fa "+t.icon})]):t._e(),"plus"===t.icon?s("plus-icon",{staticClass:"icon is-small"}):t._e(),"download"===t.icon?s("download-icon",{staticClass:"icon is-small"}):t._e(),"upload"===t.icon?s("upload-icon",{staticClass:"icon is-small"}):t._e(),s("span",{staticClass:"text is-hidden-touch"},[t._v("\n    "+t._s(t.text)+"\n  ")])],1)},jd=[],Id={name:"button-href-link",components:{PlusIcon:Ic["u"],DownloadIcon:Ic["i"],UploadIcon:Ic["B"]},props:{text:{default:"",type:String},path:{default:"",type:String},icon:{default:"",type:String},title:{default:"",type:String},styleclass:{default:"",type:String},target:{default:"_self",type:String}}},Md=Id,Fd=(s("3be1"),Object(f["a"])(Md,Dd,jd,!1,null,"3d78d18a",null)),qd=Fd.exports,Nd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-link",{staticClass:"button",attrs:{title:t.title,to:t.path}},[t.icon.length>0&&t.icon.startsWith("fa")?s("span",{staticClass:"icon is-small"},[s("i",{class:"fa "+t.icon})]):t._e(),"plus"===t.icon?s("plus-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"download"===t.icon?s("download-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"upload"===t.icon?s("upload-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"edit"===t.icon?s("edit-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"delete"===t.icon?s("trash-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),"restore"===t.icon?s("rotate-ccw-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.isText?s("span",{class:{text:!0,"is-hidden-touch":t.isResponsive}},[t._v("\n    "+t._s(t.text)+"\n  ")]):t._e()],1)},Rd=[],Vd={name:"button-link",components:{DownloadIcon:Ic["i"],EditIcon:Ic["k"],PlusIcon:Ic["u"],RotateCcwIcon:Ic["w"],TrashIcon:Ic["A"],UploadIcon:Ic["B"]},props:{text:{default:"",type:String},title:{default:"",type:String},path:{default:""},icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean}},computed:{isText:function(){return this.text&&this.text.length>0}}},Bd=Vd,Ud=(s("8f49"),Object(f["a"])(Bd,Nd,Rd,!1,null,"143e1424",null)),zd=Ud.exports,Hd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"actions has-text-right"},[t.hideEdit||t.entry.canceled?t._e():s("router-link",{staticClass:"button",attrs:{to:t.editRoute}},[s("edit-icon",{staticClass:"icon is-small only-icon"})],1),t.entry.canceled?s("router-link",{staticClass:"button",attrs:{to:t.restoreRoute}},[s("rotate-ccw-icon",{staticClass:"icon is-small only-icon"})],1):t._e(),(t.hideDelete||t.entry.canceled||!t.isCurrentUserAdmin)&&t.hideDelete?t._e():s("router-link",{staticClass:"button",attrs:{to:t.deleteRoute}},[s("trash-icon",{staticClass:"icon is-small only-icon"})],1)],1)},Gd=[],Wd={name:"row-actions",components:{EditIcon:Ic["k"],RotateCcwIcon:Ic["w"],TrashIcon:Ic["A"]},props:{entry:{type:Object,default:function(){return{}}},editRoute:{type:Object,default:function(){return{name:"home"}}},deleteRoute:{type:Object,default:function(){return{name:"home"}}},restoreRoute:{type:Object,default:null},hideEdit:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1}},computed:Object(l["a"])({},Object(d["c"])(["isCurrentUserAdmin"])),methods:Object(l["a"])({},Object(d["b"])([]))},Kd=Wd,Qd=Object(f["a"])(Kd,Hd,Gd,!1,null,"37a09c18",null),Yd=Qd.exports,Xd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-menu hidden"},[s("div",{on:{click:function(e){t.$emit("minimize-clicked")}}},[t.isMinimized?s("span",[t._v("\n      "+t._s(t.$t("main.maximize"))+"\n    ")]):s("span",[t._v(t._s(t.$t("main.minimize")))])]),t.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(e){t.$emit("delete-all-clicked")}}},[t._v("\n    "+t._s(t.$t("main.delete_all"))+"\n  ")]):t._e()])},Jd=[],Zd={name:"table-header-menu",props:{isMinimized:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]))},tu=Zd,eu=(s("05fb"),Object(f["a"])(tu,Xd,Jd,!1,null,"53a8772e",null)),su=eu.exports,iu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-menu hidden"},[t.isCurrentUserAdmin?s("div",{on:{click:function(e){t.$emit("edit-clicked")}}},[t._v("\n    "+t._s(t.$t("main.edit"))+"\n  ")]):t._e(),t.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(e){t.$emit("delete-clicked")}}},[t._v("\n    "+t._s(t.$t("main.delete"))+"\n  ")]):t._e()])},nu=[],au={name:"table-metadata-header-menu",props:{isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]))},ou=au,ru=(s("9b9d"),Object(f["a"])(ou,iu,nu,!1,null,"32da9ee2",null)),cu=ru.exports,lu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{ref:"cell",class:{validation:t.selectable&&!t.isCurrentUserClient,selected:t.selectable&t.selected},style:{"border-left":t.isBorder?"1px solid "+t.column.color:"none",background:t.isBorder?t.getBackground():"transparent"},on:{mouseover:t.onMouseOver,mouseout:t.onMouseOut,click:t.select}},[t.minimized?s("div",{staticClass:"wrapper"},[t.task?s("validation-tag",{staticClass:"validation-tag",attrs:{task:t.task,minimized:t.minimized}}):t._e()],1):s("div",{staticClass:"wrapper"},[t.task?s("validation-tag",{staticClass:"validation-tag",attrs:{task:t.task,"is-static":t.selectable||t.isStatic,pointer:!0}}):t._e(),t._l(t.assignees,function(e){return t.isAssignees&&t.isShowAssignations&&!t.isCurrentUserClient?s("people-avatar",{key:t.task.id+"-"+e,staticClass:"person-avatar",attrs:{person:t.personMap[e],size:20,"font-size":10,"is-link":!1}}):t._e()})],2)])},du=[],uu={name:"validation-cell",data:function(){return{task:null}},components:{ValidationTag:Wl,PeopleAvatar:Zl},props:{column:{default:null,type:Object},entity:{default:null,type:Object},taskTest:{default:null,type:Object},isBorder:{default:!0,type:Boolean},isStatic:{default:!1,type:Boolean},isAssignees:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},selectable:{default:!0,type:Boolean},selected:{default:!1,type:Boolean},rowX:{default:0,type:Number},columnY:{default:0,type:Number}},mounted:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])},computed:Object(l["a"])({},Object(d["c"])(["isDarkTheme","isCurrentUserClient","isShowAssignations","nbSelectedTasks","personMap","selectedTasks","selectedValidations","taskMap","taskStatusMap"]),{assignees:function(){return this.task?this.task.assignees:[]}}),methods:Object(l["a"])({},Object(d["b"])([]),{getBackground:function(){if(this.isBorder){var t=this.isDarkTheme?.15:.08;return Va.hexToRGBa(this.column.color,t)}return"transparent"},onMouseOver:function(t){if(this.selectable&&!this.selected){var e=this.isDarkTheme?"#878B97":"#CCFFCC";this.changeStyle(e)}},onMouseOut:function(t){if(this.selectable&&!this.selected){var e=this.getBackground();this.changeStyle(e)}},changeStyle:function(t){var e=this.isBorder?"1px solid "+this.column.color:"none";this.$refs["cell"].style="border-left: ".concat(e,"; background: ").concat(t,";")},select:function(t){var e=!1!==t.isUserClick;this.selectable&&!this.isCurrentUserClient&&(this.$refs.cell&&this.$refs.cell.className.indexOf("selected")<0?this.$emit("select",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:t.ctrlKey,isShiftKey:t.shiftKey,isUserClick:e}):this.$emit("unselect",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:t.ctrlKey,isShiftKey:t.shiftKey,isUserClick:e}))}}),watch:{selected:function(){if(this.selected){var t=this.isDarkTheme?"#5E60BA":"#D1C4E9";this.changeStyle(t)}else{var e=this.getBackground(this.column.color);this.changeStyle(e)}},taskTest:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])}}},pu=uu,hu=(s("b23f"),Object(f["a"])(pu,lu,du,!1,null,"962976d0",null)),mu=hu.exports,fu={name:"asset-list",mixins:[Ad,$d,Ld],props:{displayedAssets:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!0},isError:{type:Boolean,default:!0},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonLink:zd,ButtonSimple:Vc,ButtonHrefLink:qd,DescriptionCell:Yc,EntityThumbnail:ld,ChevronDownIcon:Ic["c"],PageTitle:fd,RowActions:Yd,TableInfo:Vl,TableHeaderMenu:su,TableMetadataHeaderMenu:cu,ValidationCell:mu},computed:Object(l["a"])({},Object(d["c"])(["assets","assetFilledColumns","assetMetadataDescriptors","assetSearchText","assetSelectionGrid","episodeMap","currentEpisode","currentProduction","displayedAssetsLength","nbSelectedTasks","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserManager","isShowInfos","isTVShow","selectedTasks","taskMap","taskTypeMap"]),{createTasksPath:function(){return this.getPath("create-asset-tasks")},isEmptyList:function(){return 0===this.displayedAssetsLength&&!this.isLoading&&!this.isError&&(!this.assetSearchText||0===this.assetSearchText.length)},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedAssetsLength>0}}),methods:Object(l["a"])({},Object(d["b"])(["displayMoreAssets"]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.loadMoreAssets()},loadMoreAssets:function(){this.displayMoreAssets(),this.$nextTick(this.resizeHeaders)},getIndex:function(t,e){var s=0,i=0;while(s<e)i+=this.displayedAssets[s].length,s++;return t+i},newAssetPath:function(){return this.getPath("new-asset")},assetPath:function(t){return this.getPath("asset",t)},editPath:function(t){return this.getPath("edit-asset",t)},deletePath:function(t){return this.getPath("delete-asset",t)},restorePath:function(t){return this.getPath("restore-asset",t)},taskTypePath:function(t){var e={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:t,type:"assets"}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-task-type",e.params.episode_id=this.currentEpisode.id),e},getPath:function(t,e){var s={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(t),s.params.episode_id=this.currentEpisode.id),e&&(s.params.asset_id=e),s},resizeHeaders:function(){if(this.$refs["body-tbody"]&&this.$refs["body-tbody"][0]&&this.$refs["body-tbody"][0].children.length>0)if(this.$refs["th-episode"]){var t=this.$refs["body-tbody"][0].children[1].children[0].offsetWidth;this.$refs["th-episode"].style["min-width"]="".concat(t,"px");var e=this.$refs["body-tbody"][0].children[1].children[2].offsetWidth;this.$refs["th-name"].style["min-width"]="".concat(Math.max(e,120),"px")}else{var s=this.$refs["body-tbody"][0].children[1].children[0].offsetWidth;this.$refs["th-thumbnail"].style["min-width"]="".concat(s,"px");var i=this.$refs["body-tbody"][0].children[1].children[1].offsetWidth;if(this.$refs["th-name"].style["min-width"]="".concat(i,"px"),this.$refs["th-description"]){var n=this.$refs["body-tbody"][0].children[1].children[2].offsetWidth;this.$refs["th-description"].style["min-width"]="".concat(n,"px")}}}}),watch:{validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},_u=fu,vu=(s("82f9"),Object(f["a"])(_u,xd,Od,!1,null,"0cf41e94",null)),yu=vu.exports,gu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("productions.metadata.title"))+"\n      ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("assets.fields.name")},on:{enter:t.confirm},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("combobox",{directives:[{name:"focus",rawName:"v-focus"}],ref:"typeField",attrs:{label:t.$t("assets.fields.type"),options:t.typeOptions},on:{enter:t.confirm},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),"choices"===t.type?s("div",[s("p",{staticClass:"strong"},[t._v("\n          "+t._s(t.$t("productions.metadata.available_values"))+"\n        ")]),t.form.values.length>0?s("div",{ref:"valueList",staticClass:"choice-value-wrapper"},t._l(t.form.values,function(e){return s("p",{key:e,staticClass:"choice-value"},[s("span",[t._v("\n              "+t._s(e)+"\n            ")]),s("span",{staticClass:"remove-button pull-right",on:{click:function(s){t.removeValue(e)}}},[t._v("\n             x\n            ")])])})):s("div",[t._v("\n          "+t._s(t.$t("productions.metadata.add_new_values"))+"\n        ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"addChoiceField",attrs:{"button-label":t.$t("Add value")},on:{enter:t.addValue},model:{value:t.valueToAdd,callback:function(e){t.valueToAdd=e},expression:"valueToAdd"}})],1):t._e(),s("modal-footer",{attrs:{"error-text":t.$t("productions.metadata.error"),"is-loading":t.isLoading,"is-disabled":!t.isFormFilled},on:{confirm:t.confirm,cancel:function(e){t.$emit("cancel")}}})],1)])])},ku=[],bu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isError?s("p",{staticClass:"error"},[t._v("\n    "+t._s(t.errorText)+"\n  ")]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading,"is-disabled":t.isDisabled},on:{click:function(e){t.$emit("confirm")}}},[t._v("\n      "+t._s(t.$t("main.confirmation"))+"\n    ")]),s("button",{staticClass:"button is-link",on:{click:function(e){t.$emit("cancel")}}},[t._v("\n      "+t._s(t.$t("main.cancel"))+"\n    ")])])])},Tu=[],Su={name:"add-metadata-modal",components:{},props:{errorText:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([])),watch:{}},Cu=Su,wu=(s("5866"),Object(f["a"])(Cu,bu,Tu,!1,null,"4adabc0d",null)),Eu=wu.exports,Pu={name:"add-metadata-modal",mixins:[Zc],components:{Combobox:vl,ModalFooter:Eu,TextField:al},props:{active:{type:Boolean,default:!1},descriptorToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:"",values:[]},valueToAdd:"",type:"free",typeOptions:[{label:this.$t("productions.metadata.free"),value:"free"},{label:this.$t("productions.metadata.choices"),value:"choices"}]}},mounted:function(){this.reset()},computed:Object(l["a"])({},Object(d["c"])([]),{isFormFilled:function(){return this.form.name.length>0&&(this.form.values.length>0||"free"===this.type)},valueList:function(){return this.$refs.valueList}}),methods:Object(l["a"])({},Object(d["b"])([]),{addValue:function(){var t=this,e=this.$refs.addChoiceField.value;return!this.form.values.find(function(t){return t===e})&&e&&(this.form.values.push(e),this.valueToAdd="",this.$nextTick(function(){t.valueList.scrollTop=t.valueList.scrollHeight})),e},confirm:function(){return"free"===this.type&&(this.form.values=[]),this.$emit("confirm",this.form)},removeValue:function(t){this.form.values=so(this.form.values,t)},reset:function(){this.form={name:"",values:[]},this.valueToAdd="",this.descriptorToEdit.name&&(this.form={id:this.descriptorToEdit.id,name:"".concat(this.descriptorToEdit.name),values:Object(Oa["a"])(this.descriptorToEdit.choices)}),this.type=this.form.values.length>0?"choices":"free"}}),watch:{active:function(){var t=this;this.active&&(this.reset(),this.$nextTick(function(){t.$refs.nameField.focus()}))}}},xu=Pu,Ou=(s("4076"),Object(f["a"])(xu,gu,ku,!1,null,"a555499a",null)),Au=Ou.exports,$u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("page-title",{attrs:{text:t.title}}),s("p",[t._v(t._s(t.text))]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("combobox",{attrs:{label:t.$t("tasks.fields.task_type"),options:t.isAssetTasks?t.getAssetTaskTypeOptions:t.getShotTaskTypeOptions},model:{value:t.form.task_type_id,callback:function(e){t.$set(t.form,"task_type_id",e)},expression:"form.task_type_id"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoadingStay},on:{click:t.confirmAndStayClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation_and_stay"))+"\n        ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.errorText)+"\n        ")]):t._e()],1)],1)])])},Lu=[],Du={name:"create-task-modal",components:{PageTitle:fd,Combobox:vl},props:["active","cancelRoute","errorText","isError","isLoading","isLoadingStay","isSuccess","onConfirmClicked","text","title"],data:function(){return{form:{task_type_id:""}}},computed:Object(l["a"])({},Object(d["c"])(["taskTypes","getAssetTaskTypeOptions","getShotTaskTypeOptions"]),{isAssetTasks:function(){return this.cancelRoute.name.indexOf("assets")>=0}}),methods:Object(l["a"])({},Object(d["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},confirmAndStayClicked:function(){this.$emit("confirm-and-stay",this.form)}}),mounted:function(){this.isAssetTasks?this.getAssetTaskTypeOptions.length>0&&(this.form.task_type_id=this.getAssetTaskTypeOptions[0].value):this.getShotTaskTypeOptions.length>0&&(this.form.task_type_id=this.getShotTaskTypeOptions[0].value)}},ju=Du,Iu=(s("f86f"),Object(f["a"])(ju,$u,Lu,!1,null,"7c72b6ac",null)),Mu=Iu.exports,Fu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[t._v(t._s(t.text))]),t.isError?s("p",{staticClass:"is-danger"},[t._v(t._s(t.errorText))]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":t.isLoading},on:{click:function(e){t.$emit("confirm")}}},[t._v("\n            "+t._s(t.$t("main.confirmation"))+"\n          ")]),t.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n            "+t._s(t.$t("main.cancel"))+"\n          ")]):s("button",{staticClass:"button is-link",on:{click:function(e){t.$emit("cancel")}}},[t._v("\n            "+t._s(t.$t("main.cancel"))+"\n          ")])],1)])])])},qu=[],Nu={name:"delete-modal",props:["text","active","cancelRoute","isLoading","isError","errorText"],computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]))},Ru=Nu,Vu=(s("3e9c"),Object(f["a"])(Ru,Fu,qu,!1,null,"5a554ea5",null)),Bu=Vu.exports,Uu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("main.csv.import_title"))+"\n      ")]),s("p",{staticClass:"description",on:{submit:function(t){t.preventDefault()}}},[t._v("\n        "+t._s(t.$t("main.csv.required_fields"))+"\n        "),s("ul",t._l(t.columns,function(e){return s("li",{key:e},[t._v("\n            "+t._s(e)+"\n          ")])}))]),s("p",[t._v("\n        "+t._s(t.$t("main.csv.select_file"))+"\n      ")]),s("file-upload",{on:{fileselected:t.onFileSelected}}),t.isError?s("p",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("main.csv.error_upload"))+"\n      ")]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading,"is-disabled":void 0==t.formData},on:{click:t.onConfirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)],1)])])},zu=[],Hu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-upload-wrapper"},[s("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[s("div",{staticClass:"dropbox"},[s("input",{ref:"uploadInput",staticClass:"input-file",attrs:{type:"file",accept:t.accept,name:t.uploadFieldName,disabled:t.isSaving},on:{change:function(e){t.filesChange(e.target.name,e.target.files)}}})])])])},Gu=[],Wu={name:"file-upload",props:{uploadFieldName:{default:"file",type:String},accept:{default:".csv",type:String}},data:function(){return{isInitial:!0,isSaving:!1,uploadedFiles:[]}},computed:{},watch:{},methods:{filesChange:function(t,e){var s=new FormData;s.append(this.uploadFieldName,e[0],e[0].name),this.$emit("fileselected",s)},reset:function(){this.isSaving=!1,this.isInitial=!0,this.uploadedFiles=[],this.$refs.uploadInput.value=""}},mounted:function(){this.reset()}},Ku=Wu,Qu=(s("4082"),Object(f["a"])(Ku,Hu,Gu,!1,null,"cff1c5ec",null)),Yu=Qu.exports,Xu={name:"import-people-modal",props:["active","cancelRoute","isLoading","isError","columns"],watch:{},data:function(){return{formData:null}},components:{FileUpload:Yu},computed:Object(l["a"])({},Object(d["c"])([])),mounted:function(){this.formData=null},methods:Object(l["a"])({},Object(d["b"])([]),{onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},onConfirmClicked:function(){this.$emit("confirm")}})},Ju=Xu,Zu=(s("f39c"),Object(f["a"])(Ju,Uu,zu,!1,null,"1a32532a",null)),tp=Zu.exports,ep=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[t._v(t._s(t.text))]),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userLockText,expression:"userLockText"}],ref:"confirmation-name",staticClass:"input",attrs:{type:"text"},domProps:{value:t.userLockText},on:{input:function(e){e.target.composing||(t.userLockText=e.target.value)}}})]),t.isError?s("p",{staticClass:"is-danger"},[t._v(t._s(t.errorText))]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":t.isLoading},attrs:{disabled:t.isLocked},on:{click:function(e){t.$emit("confirm")}}},[t._v("\n            "+t._s(t.$t("main.confirmation"))+"\n          ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n            "+t._s(t.$t("main.cancel"))+"\n          ")])],1)])])])},sp=[],ip={name:"hard-delete-modal",data:function(){return{userLockText:""}},props:{text:{type:String,default:""},active:{type:Boolean,default:!1},cancelRoute:{type:Object,default:function(){}},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},lockText:{type:String,default:"locked"}},computed:Object(l["a"])({},Object(d["c"])([]),{isLocked:function(){return"locked"===this.lockText||this.lockText!==this.userLockText}}),methods:Object(l["a"])({},Object(d["b"])([])),watch:{active:function(){var t=this;this.active&&(this.userLockText="",this.$nextTick(function(){t.$refs["confirmation-name"]&&t.$refs["confirmation-name"].focus()}))}}},np=ip,ap=(s("4ca5"),Object(f["a"])(np,ep,sp,!1,null,"0eb9c986",null)),op=ap.exports,rp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item"},[s("search-icon")],1),s("div",{staticClass:"flexrow-item search-field"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"input",staticClass:"input search-input",attrs:{type:"text",placeholder:t.placeholder},on:{input:t.onSearchChange,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSaveClicked(e):null}}})]),s("div",{staticClass:"flexrow-item erase-search"},[s("span",{staticClass:"tag",on:{click:t.clearSearch}},[t._v("\n      x\n    ")])]),t.canSave?s("div",{staticClass:"flexrow-item save-search"},[s("button",{staticClass:"button save-button",on:{click:t.onSaveClicked}},[s("save-icon",{staticClass:"icon is-small only-icon"})],1)]):t._e()])},cp=[],lp={name:"search-field",props:{placeholder:{type:String,default:""},canSave:{type:Boolean,default:!1}},components:{SaveIcon:Ic["x"],SearchIcon:Ic["y"],XIcon:Ic["D"]},computed:{},methods:{onSearchChange:function(){this.$emit("change",this.$refs.input.value)},onSaveClicked:function(){var t=this.$refs.input.value.trim();t.length>0&&this.canSave&&this.$emit("save",t)},getValue:function(t){return this.$refs.input.value},setValue:function(t){this.$refs.input.value=t},focus:function(){this.$refs.input.focus()},clearSearch:function(){this.setValue(""),this.onSearchChange()}}},dp=lp,up=(s("703b"),Object(f["a"])(dp,rp,cp,!1,null,"a9533be4",null)),pp=up.exports,hp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-queries"},t._l(t.queries,function(e){return s("span",{key:e.id,staticClass:"tag",on:{click:function(s){t.changeSearch(s,e)}}},[t._v("\n    "+t._s(e.name)+"\n    "),s("button",{staticClass:"delete",on:{click:function(s){s.preventDefault(),t.removeSearch(e)}}})])}))},mp=[],fp={name:"search-query-list",props:{queries:{type:Array,default:function(){return[]}}},components:{XIcon:Ic["D"],SaveIcon:Ic["x"],SearchIcon:Ic["y"]},computed:{},methods:{changeSearch:function(t,e){"delete"!==t.target.className&&this.$emit("changesearch",e)},removeSearch:function(t){this.$emit("removesearch",t)}}},_p=fp,vp=(s("a068"),Object(f["a"])(_p,hp,mp,!1,null,null,null)),yp=vp.exports,gp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":t.isShowAssignations},attrs:{title:t.$t(t.isShowAssignations?"tasks.hide_assignations":"tasks.show_assignations")},on:{click:t.toggleAssignations}},[s("users-icon",{staticClass:"icon is-small"})],1)},kp=[],bp={name:"show-assignations-button",components:{UsersIcon:Ic["C"]},props:{},computed:Object(l["a"])({},Object(d["c"])(["isShowAssignations"])),methods:Object(l["a"])({},Object(d["b"])(["showAssignations","hideAssignations"]),{toggleAssignations:function(){this.isShowAssignations?this.hideAssignations():this.showAssignations()}}),mounted:function(){"false"===localStorage.getItem("show-assignations")?this.hideAssignations():this.showAssignations()},watch:{isShowAssignations:function(){localStorage.setItem("show-assignations",this.isShowAssignations,{expires:"1M"})}}},Tp=bp,Sp=Object(f["a"])(Tp,gp,kp,!1,null,null,null),Cp=Sp.exports,wp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":t.isShowInfos},attrs:{title:t.$t(t.isShowInfos?"tasks.hide_infos":"tasks.show_infos")},on:{click:t.toggleInfos}},[s("database-icon",{staticClass:"icon is-small"})],1)},Ep=[],Pp={name:"show-infos-button",components:{DatabaseIcon:Ic["h"]},props:{},computed:Object(l["a"])({},Object(d["c"])(["isShowInfos"])),methods:Object(l["a"])({},Object(d["b"])(["showInfos","hideInfos"]),{toggleInfos:function(){this.isShowInfos?this.hideInfos():this.showInfos()}}),mounted:function(){"false"===localStorage.getItem("show-infos")?this.hideInfos():this.showInfos()},watch:{isShowInfos:function(){localStorage.setItem("show-infos",this.isShowInfos,{expires:"1M"})}}},xp=Pp,Op=Object(f["a"])(xp,wp,Ep,!1,null,null,null),Ap=Op.exports,$p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.task?s("div",{staticClass:"side task-info"},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"flexrow header-title"},[s("div",{staticClass:"title flexrow-item"},[s("router-link",{attrs:{to:t.taskEntityPath}},[t._v("\n          "+t._s(t.task?t.title:"Loading...")+"\n        ")])],1),t.currentTaskType?s("task-type-name",{staticClass:"flexrow-item task-type",attrs:{"task-type":t.currentTaskType,"production-id":t.currentProduction.id}}):t._e()],1),s("div",{staticClass:"flexrow task-information"},[s("span",{staticClass:"flexrow-item"},[t._v(t._s(t.$t("tasks.current_status")))]),s("validation-tag",{staticClass:"is-medium flexrow-item",attrs:{task:t.task,"is-static":!0}}),s("router-link",{staticClass:"flexrow-item history-button",attrs:{to:t.taskPath}},[t._v("\n        "+t._s(t.$t("main.history"))+"\n      ")]),t.isCurrentUserManager?s("button-simple",{staticClass:"flexrow-item set-thumbnail-button",attrs:{icon:"image",disabled:!t.isSetThumbnailAllowed,title:t.$t("tasks.set_preview")},on:{click:t.setCurrentPreviewAsEntityThumbnail}}):t._e(),t.isAssigned?t._e():s("subscribe-button",{staticClass:"flexrow-item",attrs:{subscribed:t.isAssigned||t.isSubscribed},on:{click:t.toggleSubscribe}})],1)]),s("div",{ref:"task-columns",staticClass:"task-columns"},[s("div",{staticClass:"task-column preview-column"},[s("div",{staticClass:"preview-column-content"},[s("div",{staticClass:"preview-picture"},[t.isMoviePreview?s("div",[s("video-player",{ref:"preview-movie",attrs:{preview:t.currentPreview,"entity-preview-files":t.taskEntityPreviews,"task-type-map":t.taskTypeMap,light:!0},on:{annotationchanged:t.onAnnotationChanged}})],1):t.isStandardPreview?s("div",{staticClass:"preview-standard-file"},[s("a",{ref:"preview-file",staticClass:"button",attrs:{href:t.currentPreviewDlPath}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("\n                "+t._s(t.$t("tasks.download_pdf_file",{extension:t.extension}))+"\n              ")])],1)]):t.is3DModelPreview?s("model-viewer",{staticClass:"model-viewer",attrs:{"preview-url":t.currentPreviewPath,"preview-dl-path":t.currentPreviewDlPath,light:!0}}):t.isPicturePreview?s("picture-viewer",{ref:"preview-picture",attrs:{preview:t.currentPreview,light:!0},on:{"annotation-changed":t.onAnnotationChanged,"add-preview":t.onAddExtraPreview}}):t._e(),t.taskPreviews&&0!==t.taskPreviews.length?t._e():s("div",{staticClass:"no-preview"},[s("em",[t._v(t._s(t.$t("tasks.no_preview")))])])],1)])]),s("div",{staticClass:"task-column comments-column"},[s("div",[s("div",[t.isCommentingAllowed?s("add-comment",{ref:"add-comment",attrs:{user:t.user,task:t.task,"task-status":t.taskStatusForCurrentUser,light:!0,"is-loading":t.loading.addComment,"attached-file-name":t.attachedFileName,"is-error":t.errors.addComment},on:{"add-comment":t.addComment,"add-preview":t.onAddPreviewClicked,"file-drop":t.selectFile}}):t._e(),t.taskComments.length>0&&!t.loading.task?s("div",{staticClass:"comments"},t._l(t.taskComments,function(e){return s("comment",{key:"comment"+e.id,attrs:{comment:e,light:!0,"add-preview":t.onAddPreviewClicked}})})):t.loading.task?t._e():s("div",{staticClass:"no-comment"},[s("em",[t._v("\n              "+t._s(t.$t("tasks.no_comment"))+"\n            ")])])],1)]),t.loading.task?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t._e()])]),s("add-preview-modal",{ref:"add-preview-modal",attrs:{active:t.modals.addPreview,"is-loading":t.loading.addPreview,"is-error":t.errors.addPreview},on:{cancel:t.onClosePreview,fileselected:t.selectFile,confirm:t.onClosePreview}}),s("add-preview-modal",{ref:"add-extra-preview-modal",attrs:{active:t.modals.addExtraPreview,"is-loading":t.loading.addExtraPreview,"is-error":t.errors.addExtraPreview,"form-data":t.addExtraPreviewFormData,extensions:".png,.jpg"},on:{cancel:t.onCloseExtraPreview,fileselected:t.selectFile,confirm:t.createExtraPreview}})],1):s("div",{staticClass:"side task-info has-text-centered"},[t._v("\n  No task selected.\n")])},Lp=[],Dp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{ref:"wrapper",class:{"add-comment":!0,"word-break":!0,media:!0,"is-dragging":t.isDragging},on:{drop:t.onDrop,dragover:t.onDragover,dragleave:t.onDragleave}},[t.light?t._e():s("figure",{staticClass:"media-left"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("people-avatar",{staticClass:"level-item",attrs:{person:t.user}})],1)])]),s("div",{staticClass:"media-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"},{name:"focus",rawName:"v-focus"}],ref:"commentTextarea",staticClass:"textarea flexrow-item",attrs:{placeholder:t.$t("comments.add_comment"),disabled:t.isLoading},domProps:{value:t.text},on:{keyup:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter"))&&e.ctrlKey?void t.runAddComment(t.text,t.task_status_id):null},input:function(e){e.target.composing||(t.text=e.target.value)}}}),s("div",{staticClass:"flexrow preview-section"},[s("button",{staticClass:"button flexrow-item",on:{click:function(e){t.$emit("add-preview")}}},[t._v("\n        "+t._s(t.$t("comments.add_preview"))+"\n      ")]),s("span",{staticClass:"attachment-file flexrow-item"},[t.isFileAttached?t._e():s("em",[t._v("\n          "+t._s(t.$t("comments.no_file_attached"))+"\n        ")]),t.isFileAttached?s("em",[t._v("\n          "+t._s(t.attachedFileName)+"\n        ")]):t._e()])]),s("div",{staticClass:"flexrow mt1"},[s("span",{staticClass:"flexrow-item"},[t._v("\n        "+t._s(t.$t("comments.set_status_to"))+"\n      ")]),s("combobox-status",{staticClass:"flexrow-item status-selector",attrs:{"task-status-list":t.taskStatus},model:{value:t.task_status_id,callback:function(e){t.task_status_id=e},expression:"task_status_id"}}),s("div",{staticClass:"flexrow-item post-button-wrapper"},[s("button",{class:{button:!0,button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:function(e){t.runAddComment(t.text,t.task_status_id)}}},[t._v("\n        "+t._s(t.$t("comments.post_status"))+"\n      ")])])],1),t.isError?s("div",{staticClass:"error pull-right"},[s("em",[t._v(t._s(t.$t("comments.error")))])]):t._e()])])},jp=[],Ip=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"status-combo"},[s("div",{staticClass:"flexrow",on:{click:t.toggleStatusList}},[s("div",{staticClass:"selected-status-line flexrow-item"},[s("span",{staticClass:"tag",style:{background:t.backgroundColor(t.currentStatus),color:t.color(t.currentStatus)}},[t._v("\n        "+t._s(t.currentStatus.short_name)+"\n      ")])]),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),t.showStatusList?s("div",{ref:"select",staticClass:"select-input"},t._l(t.taskStatusList,function(e){return s("div",{key:e.id,staticClass:"status-line",on:{click:function(s){t.selectStatus(e)}}},[s("span",{staticClass:"tag",style:{background:t.backgroundColor(e),color:t.color(e)}},[t._v("\n        "+t._s(e.short_name)+"\n      ")])])})):t._e()])},Mp=[],Fp={name:"combobox-status",components:{ChevronDownIcon:Ic["c"]},data:function(){return{showStatusList:!1}},props:{taskStatusList:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){this.selectedTaskStatus=this.taskStatus},computed:Object(l["a"])({},Object(d["c"])(["isDarkTheme","taskStatusMap"]),{currentStatus:function(){return this.value?this.taskStatusMap[this.value]:this.taskStatusList[0]}}),methods:{selectStatus:function(t){this.$emit("input",t.id),this.showStatusList=!1},backgroundColor:function(t){return"todo"!==t.short_name||this.isDarkTheme?"todo"===t.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?Va.darkenColor(t.color):t.color:"#ECECEC"},color:function(t){return"todo"!==t.short_name||this.isDarkTheme?"white":"#333"},toggleStatusList:function(){this.showStatusList=!this.showStatusList}}},qp=Fp,Np=(s("f659"),Object(f["a"])(qp,Ip,Mp,!1,null,"0f5ec27a",null)),Rp=Np.exports,Vp={name:"add-comment",components:{ComboboxStatus:Rp,PeopleAvatar:Zl},data:function(){return{isDragging:!1,text:"",task_status_id:this.task.task_status_id}},props:{addComment:{type:Function,default:null},isLoading:{type:Boolean,default:null},isError:{type:Boolean,default:null},light:{type:Boolean,default:!1},task:{type:Object,default:function(){return[]}},taskStatus:{type:Array,default:function(){return[]}},taskStatusOptions:{type:Array,default:function(){return[]}},user:{type:Object,default:function(){}},attachedFileName:{type:String,default:""}},mounted:function(){var t=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){t.$refs.wrapper.addEventListener(e,function(t){t.preventDefault(),t.stopPropagation()})})},computed:{isFileAttached:function(){return void 0!==this.attachedFileName&&this.attachedFileName.length>0}},methods:{runAddComment:function(t,e){this.$emit("add-comment",t,e),this.text=""},updateValue:function(t){this.task_status_id=this.$refs.statusSelect.value},focus:function(){this.$refs.commentTextarea.focus()},onDragover:function(){this.isDragging=!0},onDragleave:function(){this.isDragging=!1},onDrop:function(t){for(var e=0;e<t.dataTransfer.files.length;e++){var s=new FormData;s.append("file",t.dataTransfer.files[e]),this.$emit("file-drop",s)}this.isDragging=!1}},watch:{task:function(){this.task_status_id=this.task.task_status_id}}},Bp=Vp,Up=(s("e78c"),Object(f["a"])(Bp,Dp,jp,!1,null,"4a6a527e",null)),zp=Up.exports,Hp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[t.isEditing?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("tasks.change_preview"))+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("tasks.add_preview"))+"\n      ")]),s("p",[t._v("\n        "+t._s(t.$t("tasks.select_preview_file"))+"\n      ")]),s("file-upload",{ref:"preview-field",attrs:{accept:t.extensions},on:{fileselected:t.onFileSelected}}),t.isError?s("p",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("tasks.add_preview_error"))+"\n      ")]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading,"is-disabled":void 0==t.formData},on:{click:function(e){t.$emit("confirm")}}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("button",{staticClass:"button is-link",on:{click:function(e){t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])])],1)])])},Gp=[],Wp={name:"add-preview-modal",components:{FileUpload:Yu},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},extensions:{type:String,default:".png,.jpg,.mp4,.mov,.obj,.pdf,.ma,.mb,.zip,.rar,.jpeg,.blend,.wmv,.m4v"}},data:function(){return{formData:null}},mounted:function(){this.formData=null},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]),{onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},reset:function(){this.$refs["preview-field"].reset(),this.formData=null}}),watch:{active:function(){this.reset()}}},Kp=Wp,Qp=(s("51aa"),Object(f["a"])(Kp,Hp,Gp,!1,null,"4e6359fc",null)),Yp=Qp.exports,Xp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{class:{media:!0,comment:!0,highlighted:t.highlighted},style:{"border-left":"6px solid "+t.comment.task_status.color}},[s("figure",{staticClass:"media-left"},[s("people-avatar",{staticClass:"level-item",attrs:{person:t.comment.person}})],1),s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("div",{staticClass:"comment-person flexrow"},[s("div",{staticClass:"flexrow-item"},[s("strong",{},[s("people-name",{attrs:{person:t.comment.person}})],1),s("span",{staticClass:"comment-date"},[t._v("\n            "+t._s(t.formatDate(t.comment.created_at))+"\n          ")]),!t.light&&t.comment.previews.length>0?s("router-link",{staticClass:"revision",attrs:{to:t.previewRoute}},[t._v("\n            revision "+t._s(t.comment.previews[0].revision)+"\n          ")]):t._e()],1),t.light?t._e():s("div",{staticClass:"flexrow-item"},[t.editable?s("button-link",{attrs:{icon:"edit",path:t.editCommentPath}}):t._e(),t.editable?s("button-link",{attrs:{icon:"delete",path:t.deleteCommentPath}}):t._e()],1)]),s("div",[t.light&&t.comment.previews.length>0?s("router-link",{staticClass:"revision",attrs:{to:t.previewRoute}},[t._v("\n          revision "+t._s(t.comment.previews[0].revision)+"\n        ")]):t._e()],1),"Done"===t.comment.task_status.name?s("p",[s("span",{style:{color:t.comment.task_status.color}},[t._v("\n        "+t._s(t.$t("comments.validated"))+"\n        ")])]):t._e(),t.comment.text?s("p",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.compileMarkdown(t.comment.text))}}):s("p",{staticClass:"comment-text empty word-break"},[t._v("\n        "+t._s(t.$t("comments.empty_text"))+"\n      ")])])])])},Jp=[],Zp=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"person-name"},[t._v("\n  "+t._s(t.person.first_name+" "+t.person.last_name)+"\n")])},th=[],eh={name:"person-name",props:["person"],computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]))},sh=eh,ih=(s("65e3"),Object(f["a"])(sh,Zp,th,!1,null,"9de062a6",null)),nh=ih.exports,ah={name:"comment",components:{PeopleAvatar:Zl,PeopleName:nh,ButtonLink:zd},props:{comment:{type:Object,default:function(){}},highlighted:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},light:{type:Boolean,default:!1}},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","taskMap","taskTypeMap"]),{previewRoute:function(){var t={name:"task",params:{task_id:this.comment.object_id,production_id:this.currentProduction.id}};this.comment.previews.length>0&&(t={name:"task-preview",params:{task_id:this.comment.object_id,preview_id:this.comment.previews[0].id,production_id:this.currentProduction.id}}),this.$route.params.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=this.$route.params.episode_id);var e=this.taskMap[this.comment.object_id],s=this.taskTypeMap[e.task_type_id];return t.params.type=s.for_shots?"shots":"assets",t},deleteCommentPath:function(){return this.getPath("task-delete-comment")},editCommentPath:function(){return this.getPath("task-edit-comment")},addPreviewPath:function(){return this.getPath("task-add-preview")}}),methods:{formatDate:function(t){var e=Ua.a.tz(t,"UTC");return Ua()().diff(e,"days")>1?e.format("YYYY-MM-DD HH:mm"):Ua()(e.format()).fromNow()},compileMarkdown:function(t){return Hc()(t||"")},getPath:function(t){var e={name:t,params:{task_id:this.comment.object_id,comment_id:this.comment.id}};return this.$route.params.episode_id&&(e.name="episode-".concat(e.name),e.params.episode_id=this.$route.params.episode_id),e}}},oh=ah,rh=(s("4129"),Object(f["a"])(oh,Xp,Jp,!1,null,"24b27b4a",null)),ch=rh.exports,lh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"model-viewer",class:{light:t.light},attrs:{id:"model-viewer"}}),s("div",{staticClass:"viewer-actions"},[s("a",{staticClass:"button pull-right",attrs:{href:t.previewDlPath}},[s("download-icon",{staticClass:"icon"})],1),s("button",{staticClass:"button pull-right",on:{click:t.goFullScreen}},[s("maximize-icon",{staticClass:"icon"})],1)])])},dh=[],uh=s("9d51"),ph={name:"model-viewer",components:{DownloadIcon:Ic["i"],MaximizeIcon:Ic["q"]},props:{previewUrl:{default:"",type:String},previewDlPath:{default:"",type:String},light:{default:!1,type:Boolean}},computed:{element:function(){return this.$refs["model-viewer"]}},methods:{goFullScreen:function(){Object(uh["b"])(this.element)}},mounted:function(){var t=this;setTimeout(function(){t.scene=Object(uh["d"])(t.element),Object(uh["c"])(t.scene,t.previewUrl)},100)},watch:{previewUrl:function(){Object(uh["a"])(this.scene),Object(uh["c"])(this.scene,this.previewUrl)}}},hh=ph,mh=(s("34c5"),Object(f["a"])(hh,lh,dh,!1,null,"32f3bb56",null)),fh=mh.exports,_h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"picture-player"},[s("div",{ref:"picture-wrapper",staticClass:"picture-wrapper"},[t.isLoading?s("div",{staticClass:"loading-background"},[s("spinner",{staticClass:"spinner"})],1):t._e(),s("canvas",{ref:"annotation-canvas",staticClass:"canvas",style:{display:"block"},attrs:{id:"annotation-canvas"}})]),s("div",{ref:"button-bar",staticClass:"buttons flexrow pull-bottom"},[s("div",{staticClass:"left flexrow"},[s("button",{staticClass:"button flexrow-item",on:{click:t.onPreviousClicked}},[s("chevron-left-icon",{staticClass:"icon"})],1),s("span",{staticClass:"flexrow-item bar-element"},[t._v("\n        "+t._s(t.currentIndex)+" / "+t._s(t.preview.previews.length)+"\n      ")]),s("button",{staticClass:"button flexrow-item",on:{click:t.onNextClicked}},[s("chevron-right-icon",{staticClass:"icon"})],1),s("button",{staticClass:"button flexrow-item",on:{click:t.onAddPreviewClicked}},[s("plus-icon",{staticClass:"icon"})],1),t.currentIndex>1&&!t.light?s("button",{staticClass:"button flexrow-item",on:{click:t.onRemovePreviewClicked}},[s("trash-icon",{staticClass:"icon"})],1):t._e()]),s("div",{staticClass:"right flexrow"},[t.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:t.onDeleteClicked}},[s("x-icon",{staticClass:"icon"})],1):t._e(),t.isFullScreenEnabled?s("button",{class:{button:!0,"flexrow-item":!0,active:t.isDrawing},on:{click:t.onPencilAnnotateClicked}},[s("edit-2-icon",{staticClass:"icon"})],1):t._e(),t.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:t.onFullscreenClicked}},[s("maximize-icon",{staticClass:"icon"})],1):t._e(),s("a",{staticClass:"button flexrow-item",attrs:{href:t.pictureDlPath}},[s("download-icon",{staticClass:"icon"})],1)])])])},vh=[],yh=s("7a94"),gh={name:"picture-viewer",components:{ChevronLeftIcon:Ic["d"],ChevronRightIcon:Ic["e"],CircleIcon:Ic["f"],DownloadIcon:Ic["i"],Edit2Icon:Ic["j"],MaximizeIcon:Ic["q"],PlusIcon:Ic["u"],SquareIcon:Ic["z"],Spinner:v,TrashIcon:Ic["A"],XIcon:Ic["D"]},props:{preview:{type:Object,default:function(){}},light:{type:Boolean,default:!1}},data:function(){return{currentIndex:1,isLoading:!0,isDrawing:!1,annotations:this.preview.annotations?Object(Oa["a"])(this.preview.annotations):[],fabricCanvas:null}},mounted:function(){var t=this;this.container.style.height=this.getDefaultHeight()+"px",setTimeout(function(){t.mountPicture(),window.addEventListener("keydown",t.onKeyDown),window.addEventListener("resize",t.onWindowResize)},0)},computed:{container:function(){return this.$refs.container},canvas:function(){return this.$refs.canvas},picture:function(){return this.$refs.picture},pictureWrapper:function(){return this.$refs["picture-wrapper"]},picturePath:function(){var t=this.preview.previews[this.currentIndex-1].id;return"/api/pictures/originals/preview-files/".concat(t,".png")},pictureDlPath:function(){var t=this.preview.previews[this.currentIndex-1].id;return"/api/pictures/originals/preview-files/".concat(t,"/download")},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("picture").webkitRequestFullScreen)},currentPreview:function(){return this.preview.previews[this.currentIndex-1]}},beforeDestroy:function(){this.clearCanvas(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},mountPicture:function(){var t=this;this.isResizing=!0,this.isLoading=!0,this.clearCanvas(function(){t.setupFabricPicture(function(e){t.isLoading=!1,t.fabricCanvas=e,t.loadAnnotation(0),t.isResizing=!1,t.fixCanvasSize(),t.fabricCanvas&&t.fabricCanvas.calcOffset()})})},clearCanvas:function(t){var e=this;this.fabricCanvas&&this.fabricCanvas.getObjects().forEach(function(t){e.fabricCanvas.remove(t)}),this.$refs["annotation-canvas"]&&(this.$refs["annotation-canvas"].innerHTML="",this.$refs["annotation-canvas"].innerText="",this.$refs["annotation-canvas"].html=""),setTimeout(function(){if(e.fabricCanvas){try{e.fabricCanvas.clear()}catch(s){console.log(s)}try{e.fabricCanvas.dispose()}catch(s){console.log(s)}}e.fabricCanvas=null,t&&t()},0)},getDefaultHeight:function(){return this.isFullScreen()?screen.height:screen.width>1300&&!this.light?500:200},getDimensions:function(t){var e=t.height/t.width,s=this.container.offsetWidth-1,i=Math.floor(s*e);return i>this.getDefaultHeight()&&(i=this.getDefaultHeight()),i-=32,s=Math.floor(i/e),{width:s,height:i}},setupFabricPicture:function(t){var e=this;yh["fabric"].Image.fromURL(this.picturePath,function(s){var i=e.getDimensions(s),n=i.width,a=i.height,o=new yh["fabric"].Canvas("annotation-canvas");e.container.style.height=e.getDefaultHeight()+"px",o.setDimensions({width:n,height:a}),e.pictureWrapper.style.width=n+"px",e.pictureWrapper.style.height=a+"px",s=s.set({left:0,top:0,objectCaching:!1,selectable:!1}),o.add(s),s.sendToBack(),e.fabricPicture=s,e.fabricPicture.scaleToWidth(n),e.fabricPicture.scaleToHeight(a),o.freeDrawingBrush.color="#ff3860",o.freeDrawingBrush.width=4,o.off("object:scaling",e.onScaled),o.on("object:scaling",e.onScaled),o.off("object:scaled",e.onScaled),o.on("object:scaled",e.onScaled),o.off("object:moved",e.saveAnnotations),o.off("object:moved",e.saveAnnotations),o.on("object:moved",e.saveAnnotations),o.off("object:scaled",e.saveAnnotations),o.on("object:scaled",e.saveAnnotations),o.off("mouse:up",e.onMouseUp),o.on("mouse:up",e.onMouseUp),t(o)})},onAddPreviewClicked:function(){this.$emit("add-preview")},onRemovePreviewClicked:function(){this.$emit("remove-extra-preview",this.currentPreview)},onFullscreenClicked:function(){this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0)},onDeleteClicked:function(){this.deleteSelection()},onRectAnnotateClicked:function(){this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1;var t=new yh["fabric"].Rect({left:Math.floor(this.fabricCanvas.width/2)-25,top:Math.floor(this.fabricCanvas.height/2)-25,fill:"transparent",strokeWidth:4,stroke:"#ff3860",width:50,height:50});this.fabricCanvas.add(t),this.fabricCanvas.setActiveObject(t),this.saveAnnotations()},onCircleAnnotateClicked:function(){this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1;var t=new yh["fabric"].Circle({left:this.fabricCanvas.width/2-25,top:this.fabricCanvas.height/2-25,radius:20,fill:"transparent",strokeWidth:4,stroke:"#ff3860",width:50,height:50});this.fabricCanvas.add(t),this.fabricCanvas.setActiveObject(t),t.bringToFront(),this.saveAnnotations()},onPencilAnnotateClicked:function(){this.fabricCanvas.isDrawingMode?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.fabricCanvas.isDrawingMode=!0,this.isDrawing=!0)},onWindowResize:function(){var t=this,e=(new Date).getTime();this.lastCall=this.lastCall||0,e-this.lastCall>600&&(this.lastCall=e,setTimeout(function(){t.mountPicture(),t.reloadAnnotations()},0))},onKeyDown:function(t){46===t.keyCode&&this.fabricCanvas&&this.deleteSelection()},onMouseUp:function(){this.isDrawing&&this.saveAnnotations()},onScaled:function(t){var e=t.target;e&&e.set({strokeWidth:8/(e.scaleX+e.scaleY)})},saveAnnotations:function(){var t=this,e=this.getAnnotation(0);if(this.fabricCanvas.getObjects().forEach(function(e){"path"===e.type&&(e.canvasWidth||(e.canvasWidth=t.fabricCanvas.width),e.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}))}),e)e.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),e.width=this.fabricCanvas.width,e.drawing&&1===e.drawing.objects.length&&this.annotations.splice(0,1);else{this.annotations=[];var s={time:0,width:this.fabricCanvas.width,drawing:this.fabricCanvas.toJSON(["canvasWidth"])};this.annotations.push(s)}this.$emit("annotation-changed",{preview:this.currentPreview,annotations:Object(Oa["a"])(this.annotations)})},getAnnotation:function(t){return Object(Oa["a"])(this.annotations)[t]},clearAnnotations:function(){var t=this;this.fabricCanvas&&this.fabricCanvas.getObjects().forEach(function(e){["rect","circle","path"].includes(e.type)&&t.fabricCanvas.remove(e)})},loadAnnotation:function(t){var e=this,s=this.getAnnotation(t);this.clearAnnotations();var i=1;s&&(s.width&&(i=this.fabricCanvas.width/s.width),s.drawing.objects.forEach(function(t){var s={left:t.left*i,top:t.top*i,fill:"transparent",stroke:"#ff3860",radius:t.radius*i,width:t.width,height:t.height,scaleX:t.scaleX*i,scaleY:t.scaleY*i};if("rect"===t.type){var n=new yh["fabric"].Rect(Object(l["a"])({},s));e.fabricCanvas.add(n),n.set({strokeWidth:8/(t.scaleX+t.scaleY)})}else if("circle"===t.type){var a=new yh["fabric"].Circle(Object(l["a"])({},s));e.fabricCanvas.add(a),a.set({strokeWidth:8/(t.scaleX+t.scaleY)})}else if("path"===t.type){var o=1;t.canvasWidth&&(o=t.canvasWidth/e.fabricCanvas.width);var r=new yh["fabric"].Path(t.path,Object(l["a"])({},s,{strokeWidth:3*o,canvasWidth:t.canvasWidth}));r.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),e.fabricCanvas.add(r)}}))},deleteSelection:function(){this.fabricCanvas.remove(this.fabricCanvas.getActiveObject()),this.saveAnnotations()},reloadAnnotations:function(){return this.currentPreview.annotations?this.annotations=this.currentPreview.annotations:this.annotations=[],this.annotations},onPreviousClicked:function(){this.currentIndex>1?this.currentIndex--:this.currentIndex=this.preview.previews.length},onNextClicked:function(){this.currentIndex<this.preview.previews.length?this.currentIndex++:this.currentIndex=1},displayFirst:function(){this.currentIndex>1?this.currentIndex=1:this.reset()},displayLast:function(){this.currentIndex=this.preview.previews.length},reset:function(){this.clearAnnotations(),this.annotations=[],this.reloadAnnotations(),this.mountPicture()},fixCanvasSize:function(){var t=this;if(this.fabricPicture){for(var e=this.getDimensions(this.fabricPicture),s=e.width,i=e.height,n=document.getElementsByClassName("canvas-container"),a=0;a<n.length;a++){var o=n[a];o.style.width=s+"px",o.style.height=i+"px"}n=document.getElementsByClassName("upper-canvas");for(var r=0;r<n.length;r++){var c=n[r];c.style.width=s+"px",c.style.height=i+"px",c.setAttribute("width",s),c.setAttribute("height",i)}setTimeout(function(){t.fabricCanvas&&t.fabricCanvas.calcOffset()},10)}}},watch:{preview:function(){this.currentIndex>1?this.currentIndex=1:this.reset()},currentIndex:function(){this.reset()}}},kh=gh,bh=(s("bdfb"),Object(f["a"])(kh,_h,vh,!1,null,"03ee437b",null)),Th=bh.exports,Sh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button",attrs:{title:t.buttonTitle},on:{click:function(e){t.$emit("click")}}},[t.subscribed?s("eye-icon",{staticClass:"icon is-small only-icon"}):s("eye-off-icon",{staticClass:"icon is-small only-icon"})],1)},Ch=[],wh={name:"subscribe-button",components:{EyeIcon:Ic["l"],EyeOffIcon:Ic["m"]},props:{subscribed:{default:!1,type:Boolean}},computed:{buttonTitle:function(){return this.subscribed?this.$t("tasks.unsubscribe_notifications"):this.$t("tasks.subscribe_notifications")}}},Eh=wh,Ph=(s("5bf3"),Object(f["a"])(Eh,Sh,Ch,!1,null,"76d14e74",null)),xh=Ph.exports,Oh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"video-player"},[s("div",{ref:"video-wrapper",staticClass:"video-wrapper"},[t.isLoading?s("div",{staticClass:"loading-background"},[s("spinner",{staticClass:"spinner"})],1):t._e(),s("video",{ref:"movie",staticClass:"annotation-movie",style:{display:t.isLoading?"none":"block"},attrs:{id:"annotation-movie",preload:"auto",src:t.moviePath,poster:t.posterPath}}),t.isComparing&&t.previewToCompareId?s("video",{ref:"comparison-movie",staticClass:"annotation-movie",attrs:{id:"comparison-movie",preload:"auto",src:t.comparisonMoviePath,poster:t.comparisonPosterPath}}):t._e(),s("canvas",{ref:"annotation-canvas",staticClass:"canvas",staticStyle:{display:"none"},attrs:{id:"annotation-canvas"}})]),s("div",{ref:"button-bar",staticClass:"button-bar"},[s("div",{staticClass:"video-progress pull-bottom"},[s("progress",{ref:"progress",attrs:{value:"0",min:"0"},on:{click:t.onProgressClicked}},[s("span",{ref:"progress-bar",attrs:{id:"progress-bar"}})])]),s("div",{ref:"annotation-bar",staticClass:"video-annotation pull-bottom"},t._l(t.annotations,function(e,i){return s("span",{key:"annotation-"+e.time,staticClass:"annotation-mark",style:t.getAnnotationStyles(e,i),on:{click:function(s){t.loadAnnotation(e.time)}}})})),s("div",{staticClass:"buttons flexrow pull-bottom"},[s("div",{staticClass:"left flexrow"},[s("button",{staticClass:"button flexrow-item",on:{click:t.onPlayPauseClicked}},[t.isPlaying?s("pause-icon",{staticClass:"icon"}):t._e(),t.isPlaying?t._e():s("play-icon",{staticClass:"icon"})],1),t.light?t._e():s("button",{class:{button:!0,"flexrow-item":!0,active:t.isRepeating},on:{click:t.onRepeatClicked}},[s("repeat-icon",{staticClass:"icon smaller"})],1),s("span",{staticClass:"flexrow-item time-indicator"},[t._v("\n          "+t._s(t.currentTime)+"\n        ")]),!t.light||t.isFullScreen()?s("span",{staticClass:"flexrow-item time-indicator"},[t._v("\n        /\n        ")]):t._e(),!t.light||t.isFullScreen()?s("span",{staticClass:"flexrow-item time-indicator"},[t._v("\n         "+t._s(t.maxDuration)+"\n        ")]):t._e(),t.taskTypeOptions.length>0&&(!t.light||t.isFullScreen())?s("button",{class:{button:!0,"flexrow-item":!0,active:t.isComparing,"comparison-button":!0},on:{click:t.onCompareClicked}},[s("copy-icon",{staticClass:"icon smaller"})],1):t._e(),t.isComparing?s("combobox",{staticClass:"comparison-combobox",attrs:{options:t.taskTypeOptions,"is-dark":!0},model:{value:t.taskTypeId,callback:function(e){t.taskTypeId=e},expression:"taskTypeId"}}):t._e(),t.isComparing?s("combobox",{staticClass:"comparison-combobox",attrs:{options:t.previewFileOptions,"is-dark":!0},model:{value:t.previewToCompareId,callback:function(e){t.previewToCompareId=e},expression:"previewToCompareId"}}):t._e()],1),s("div",{staticClass:"right flexrow"},[t.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:t.onDeleteClicked}},[s("x-icon",{staticClass:"icon"})],1):t._e(),t.isFullScreenEnabled?s("button",{class:{button:!0,"flexrow-item":!0,active:t.isDrawing},on:{click:t.onPencilAnnotateClicked}},[s("edit-2-icon",{staticClass:"icon"})],1):t._e(),t.isFullScreenEnabled?s("button",{staticClass:"button flexrow-item",on:{click:t.onFullscreenClicked}},[s("maximize-icon",{staticClass:"icon"})],1):t._e(),s("a",{staticClass:"button flexrow-item",attrs:{href:t.movieDlPath}},[s("download-icon",{staticClass:"icon"})],1)])])])])},Ah=[],$h={name:"video-player",components:{CircleIcon:Ic["f"],CopyIcon:Ic["g"],Combobox:vl,DownloadIcon:Ic["i"],Edit2Icon:Ic["j"],MaximizeIcon:Ic["q"],PauseIcon:Ic["s"],PlayIcon:Ic["t"],RepeatIcon:Ic["v"],Spinner:v,SquareIcon:Ic["z"],XIcon:Ic["D"]},props:{preview:{type:Object,default:function(){}},entityPreviewFiles:{type:Object,default:function(){}},taskTypeMap:{type:Object,default:function(){}},light:{type:Boolean,default:!1}},data:function(){return{annotations:[],currentTime:"00:00.00",fabricCanvas:null,isComparing:!1,isDrawing:!1,isLoading:!1,isPlaying:!1,isRepeating:!1,maxDuration:"00:00.00",previewToCompareId:null,taskTypeId:this.entityPreviewFIles?Ta()(this.entityPreviewFiles)[0]:null,videoDuration:0}},mounted:function(){var t=this;this.reloadAnnotations(),this.container.style.height=this.getDefaultHeight()+"px",this.isLoading=!0,setTimeout(function(){t.video&&(t.video.addEventListener("loadedmetadata",function(){t.configureVideo(),t.isLoading=!1,t.setDefaultComparisonTaskType()}),t.video.addEventListener("ended",function(){t.isLoading=!1}),t.video.addEventListener("error",function(){t.$refs.movie.style.height=t.getDefaultHeight()-80+"px",t.isLoading=!1}),window.addEventListener("keydown",t.onKeyDown,!1),window.addEventListener("resize",t.onWindowResize))},0)},beforeDestroy:function(){this.clearCanvas(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},computed:{canvas:function(){return this.$refs["annotation-canvas"]},container:function(){return this.$refs.container},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)},isVideo:function(){return this.$refs.movie&&this.videoDuration&&this.videoDuration>0},moviePath:function(){return"/api/movies/originals/preview-files/".concat(this.preview.id,".mp4")},movieDlPath:function(){return"/api/movies/originals/preview-files/".concat(this.preview.id,"/download")},posterPath:function(){return"/api/pictures/previews/preview-files/".concat(this.preview.id,".png")},comparisonMoviePath:function(){return"/api/movies/originals/preview-files/".concat(this.previewToCompareId,".mp4")},comparisonPosterPath:function(){return"/api/pictures/originals/preview-files/".concat(this.previewToCompareId,".png")},progress:function(){return this.$refs.progress},progressBar:function(){return this.$refs["progress-bar"]},video:function(){return this.$refs.movie},comparisonVideo:function(){return this.$refs["comparison-movie"]},videoWrapper:function(){return this.$refs["video-wrapper"]},taskTypeOptions:function(){var t=this,e=Ta()(this.entityPreviewFiles);return e.filter(function(e){return t.entityPreviewFiles[e].length>1||1===t.entityPreviewFiles[e].length&&t.entityPreviewFiles[e][0].id!==t.preview.id}).map(function(e){var s=t.taskTypeMap[e];return{label:s.name,value:s.id}})},previewFileOptions:function(){var t=this,e=this.entityPreviewFiles[this.taskTypeId];return e?(e=e.filter(function(e){return e.id!==t.preview.id}),e&&e.length>0?e.map(function(t){return{label:"v".concat(t.revision),value:t.id}}):[]):[]}},methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},getDefaultHeight:function(){return this.isFullScreen()?screen.height:screen.width>1300&&!this.light?500:200},getDimensions:function(){var t=this.video.videoHeight/this.video.videoWidth,e=this.container.offsetWidth-1,s=Math.floor(e*t);return s=Math.min(s,this.getDefaultHeight())-55,e=Math.floor(s/t),{width:e,height:s}},getTimelinePosition:function(t,e){if(this.$refs.movie){var s=Math.round(t/this.$refs.movie.duration*this.progress.offsetWidth);return s=s-10*e-5,s<0&&(s=0),s+10>this.progress.offsetWidth&&(s-=5),s}return 0},setCurrentTime:function(t){if(this.progress.value=t,this.progressBar.style.width=Math.floor(t/this.video.duration*100)+"%",this.clearAnnotations(),this.video.currentTime=t,this.isComparing){var e=document.getElementById("comparison-movie");e&&(e.currentTime=t)}this.showVideo()},configureVideo:function(){var t=this;this.reloadAnnotations(),this.video.addEventListener("timeupdate",this.updateProgressBar),this.video.onended=this.onVideoEnd,this.showVideo(),0===this.video.currentTime&&(this.clearCanvas(),this.$nextTick(function(){t.mountVideo()}))},showCanvas:function(t){this.isVideoShown?(this.isComparing=!1,this.canvas.style.display="block",this.video.style.display="none",this.mountVideo(),this.isVideoShown=!1,this.loadAnnotation(this.video.currentTime),t&&t()):t&&t()},showVideo:function(){if(!this.isVideoShown&&this.canvas){this.canvas.style.display="none",this.video.style.display="block";for(var t=document.getElementsByClassName("canvas-container"),e=0;e<t.length;e++){var s=t[e];s.style.display="none"}}this.isVideoShown=!0},mountVideo:function(){var t=this;if(this.clearCanvas(),this.video.mute=!0,this.videoDuration=this.video.duration,this.progress.setAttribute("max",this.videoDuration),this.maxDuration=this.formatTime(this.videoDuration),this.isLoading=!1,this.isPlaying=!1,this.isRepeating=!1,this.container){var e=this.getDimensions(),s=e.width,i=e.height;if(i>0)if(this.isComparing){this.container.style.height=this.getDefaultHeight()+"px",this.video.style.width=s/2+"px",this.video.style.height=i/2+"px";var n=document.getElementById("comparison-movie");n&&(n.style.width=s/2+"px",n.style.height=i/2+"px"),this.videoWrapper.style.width=s+"px",this.videoWrapper.style.height=i+"px"}else this.container.style.height=this.getDefaultHeight()+"px",this.video.style.width=s+"px",this.video.style.height=i+"px",this.videoWrapper.style.width=s+"px",this.videoWrapper.style.height=i+"px",this.fabricCanvas=this.setupFabricVideo(s,i),this.fabricCanvas.on("object:moved",this.saveAnnotations),this.fabricCanvas.on("object:scaled",this.saveAnnotations),this.fabricCanvas.on("mouse:up",function(){t.isDrawing&&t.saveAnnotations()}),this.fixCanvasSize()}},clearCanvas:function(){var t=this;this.fabricCanvas&&this.fabricCanvas.getObjects().forEach(function(e){t.fabricCanvas.remove(e)});try{this.fabricCanvas&&this.fabricCanvas.clear()}catch(e){}try{this.fabricCanvas&&this.fabricCanvas.dispose()}catch(e){}},setupFabricVideo:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.fabricCanvas;s||(i=new yh["fabric"].Canvas("annotation-canvas"),i.setDimensions({width:t,height:e}));var n=new yh["fabric"].Image(this.video,{left:0,top:0,width:this.video.videoWidth,height:this.video.videoHeight,objectCaching:!1,selectable:!1});return n.scaleToWidth(t),n.scaleToHeight(e),i.add(n),n.sendToBack(),this.fabricVideo=n,i.freeDrawingBrush.color="#ff3860",i.freeDrawingBrush.width=4,i.off("object:scaling",this.onScaled),i.on("object:scaling",this.onScaled),i.off("object:scaled",this.onScaled),i.on("object:scaled",this.onScaled),yh["fabric"].util.requestAnimFrame(function t(){try{i.renderAll()}catch(e){}yh["fabric"].util.requestAnimFrame(t)}),i},play:function(){if(this.clearAnnotations(),this.isPlaying=!0,this.showVideo(),this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.video.play(),this.isComparing){var t=document.getElementById("comparison-movie");t&&t.play()}},pause:function(){if(this.isPlaying=!1,this.video.pause(),this.isComparing){var t=document.getElementById("comparison-movie");t&&t.pause()}},goPreviousFrame:function(){var t=this.video.currentTime-.04;t<0?this.setCurrentTime(0):this.setCurrentTime(t)},goNextFrame:function(){var t=this.video.currentTime+.04;t>this.video.duration?this.setCurrentTime(this.video.duration):this.setCurrentTime(t)},formatTime:function(t){var e=".".concat(Math.round(t%1*100));2===e.length&&(e+="0");try{return new Date(1e3*t).toISOString().substr(14,5)+e}catch(s){return console.log(s),"00:00.00"}},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0)},onDeleteClicked:function(){this.deleteSelection()},onVideoEnd:function(){if(this.isPlaying=!1,this.isRepeating){if(this.video.currentTime=0,this.isComparing){var t=document.getElementById("comparison-movie");t&&(t.currentTime=0)}this.progress.value=0,this.play()}},onPlayPauseClicked:function(){this.video.paused||this.video.ended?this.play():this.pause()},onRepeatClicked:function(){this.isRepeating?this.isRepeating=!1:this.isRepeating=!0},onCompareClicked:function(){var t=this;this.isComparing?(this.isComparing=!1,this.mountVideo()):(this.isComparing=!0,this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=!1),this.isDrawing=!1,this.$nextTick(function(){t.isVideoShown||t.showVideo(),t.mountVideo()}))},onProgressClicked:function(t){var e=(t.pageX-this.progress.offsetLeft)/this.progress.offsetWidth,s=e*this.video.duration;this.setCurrentTime(s)},updateProgressBar:function(){this.progress.getAttribute("max")||this.progress.setAttribute("max",this.video.duration),this.progress.value=1*this.video.currentTime;var t=Math.floor(this.video.currentTime/this.video.duration*100);this.progressBar.style.width=t+"%",this.currentTime=this.formatTime(this.video.currentTime)},onFullscreenClicked:function(){this.isFullScreen()?this.exitFullScreen():this.setFullScreen()},onScaled:function(t){var e=t.target;e&&e.set({strokeWidth:8/(e.scaleX+e.scaleY)})},onRectAnnotateClicked:function(){var t=this;this.showCanvas(function(){t.fabricCanvas.isDrawingMode=!1,t.isDrawing=!1;var e=new yh["fabric"].Rect({left:t.fabricCanvas.width/2-25,top:t.fabricCanvas.height/2-25,fill:"transparent",strokeWidth:4,stroke:"#ff3860",width:50,height:50});t.fabricCanvas.add(e),t.fabricCanvas.setActiveObject(e),t.saveAnnotations()})},onCircleAnnotateClicked:function(){var t=this;this.showCanvas(function(){t.fabricCanvas.isDrawingMode=!1,t.isDrawing=!1;var e=new yh["fabric"].Circle({left:t.fabricCanvas.width/2-25,top:t.fabricCanvas.height/2-25,radius:20,fill:"transparent",strokeWidth:4,stroke:"#ff3860",width:50,height:50});t.fabricCanvas.add(e),t.fabricCanvas.setActiveObject(e),t.saveAnnotations()})},onPencilAnnotateClicked:function(){var t=this;this.showCanvas(function(){t.fabricCanvas.isDrawingMode?(t.fabricCanvas.isDrawingMode=!1,t.isDrawing=!1):(t.fabricCanvas.isDrawingMode=!0,t.isDrawing=!0)})},onWindowResize:function(t){var e=this,s=(new Date).getTime();this.lastCall=this.lastCall||0,s-this.lastCall>600&&(this.lastCall=s,this.$nextTick(function(){if(e.mountVideo(),e.reloadAnnotations(),e.loadAnnotation(e.video.currentTime),e.isVideoShown){e.canvas.style.display="none";for(var s=document.getElementsByClassName("canvas-container"),i=0;i<s.length;i++){var n=s[i];n.style.display="none"}}t&&"function"===typeof t&&t()}))},onKeyDown:function(t){["INPUT","TEXTAREA"].includes(t.target.tagName)||(46===t.keyCode&&this.fabricCanvas?this.deleteSelection():37===t.keyCode?this.goPreviousFrame():39===t.keyCode?this.goNextFrame():32===t.keyCode&&this.onPlayPauseClicked())},getAnnotation:function(t){return this.annotations.find(function(e){return e.time===t})},clearAnnotations:function(){var t=this;this.fabricCanvas&&this.fabricCanvas.getObjects().length>0&&this.fabricCanvas.getObjects().forEach(function(e){["rect","circle","path"].includes(e.type)&&t.fabricCanvas.remove(e)})},saveAnnotations:function(){var t=this,e=this.video.currentTime,s=this.getAnnotation(e);if(this.fabricCanvas.getObjects().forEach(function(e){"path"===e.type&&(e.canvasWidth||(e.canvasWidth=t.fabricCanvas.width),e.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}))}),s){if(s.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),s.width=this.fabricCanvas.width,s.drawing&&1===s.drawing.objects.length){var i=this.annotations.findIndex(function(t){return t.time===e});this.annotations.splice(i,1)}}else this.annotations.push({time:e,width:this.fabricCanvas.width,drawing:this.fabricCanvas.toJSON(["canvasWidth"])}),this.annotations=this.annotations.sort(function(t,e){return t.time<e.time})||[];var n=[];this.annotations.forEach(function(t){return n.push(Object(l["a"])({},t))}),this.$emit("annotationchanged",{preview:this.preview,annotations:n})},loadAnnotation:function(t){var e=this,s=this.getAnnotation(t);if(s){this.video.pause(),this.video.currentTime=t,this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.clearAnnotations();var i=1;s.width&&(i=this.fabricCanvas.width/s.width),s.drawing.objects.forEach(function(t){var s={left:t.left*i,top:t.top*i,fill:"transparent",stroke:"#ff3860",strokeWidth:4,radius:t.radius,width:t.width,height:t.height,scaleX:t.scaleX*i,scaleY:t.scaleY*i};if("rect"===t.type){var n=new yh["fabric"].Rect(Object(l["a"])({},s));e.fabricCanvas.add(n),n.set({strokeWidth:4})}else if("circle"===t.type){var a=new yh["fabric"].Circle(Object(l["a"])({},s));e.fabricCanvas.add(a),a.set({strokeWidth:2})}else if("path"===t.type){var o=1;t.canvasWidth&&(o=t.canvasWidth/e.fabricCanvas.width);var r=new yh["fabric"].Path(t.path,Object(l["a"])({},s,{strokeWidth:3*o,canvasWidth:t.canvasWidth}));r.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),e.fabricCanvas.add(r)}}),this.isVideoShown&&this.showCanvas()}},reloadAnnotations:function(){if(this.annotations=[],this.preview.annotations){var t=[];this.preview.annotations.forEach(function(e){return t.push(Object(l["a"])({},e))}),this.annotations=t.sort(function(t,e){return t.time<e.time})||[]}else this.annotations=[];return this.annotations},getAnnotationStyles:function(t,e){return{cursor:"pointer",position:"relative",display:"inline-block",left:this.getTimelinePosition(t.time,e)+"px"}},deleteSelection:function(){this.fabricCanvas.remove(this.fabricCanvas.getActiveObject()),this.saveAnnotations()},fixCanvasSize:function(){var t=this;if(this.fabricVideo){var e=this.getDimensions(),s=e.width,i=e.height;if(i>0){for(var n=document.getElementsByClassName("canvas-container"),a=0;a<n.length;a++){var o=n[a];o.style.width=s+"px",o.style.height=i+"px"}n=document.getElementsByClassName("upper-canvas");for(var r=0;r<n.length;r++){var c=n[r];c.style.width=s+"px",c.style.height=i+"px",c.setAttribute("width",s),c.setAttribute("height",i)}setTimeout(function(){t.fabricCanvas.calcOffset(),t.fabricVideo.scaleToWidth(s),t.fabricVideo.scaleToHeight(i)},10)}}},setDefaultComparisonTaskType:function(){var t=this,e=Ta()(this.entityPreviewFiles);if(e&&e.length>0){var s=this.taskTypeOptions.find(function(e){return t.entityPreviewFiles[e.value].findIndex(function(e){return e.id===t.preview.id})>=0});s?this.taskTypeId=s.value:this.taskTypeOptions.length>0&&(this.taskTypeId=this.taskTypeOptions[0].value),this.taskTypeId&&this.setDefaultComparisonPreview()}else this.previewToCompareId=null},setDefaultComparisonPreview:function(){var t=this,e=this.entityPreviewFiles[this.taskTypeId];e?(e=e.filter(function(e){return e.id!==t.preview.id}),e.length>0?this.previewToCompareId=e[0].id:this.previewToCompareId=null):this.previewToCompareId=null}},watch:{preview:function(){this.maxDuration="00:00.00",this.reloadAnnotations(),this.isComparing&&(this.isComparing=!1,this.mountVideo()),this.setDefaultComparisonTaskType()},previewToCompareId:function(){if(this.isComparing){this.pause();var t=this.video.currentTime;this.$nextTick(function(){var e=document.getElementById("comparison-movie");e&&(e.currentTime=t)})}},taskTypeId:function(){this.setDefaultComparisonPreview()}}},Lh=$h,Dh=(s("ee78"),Object(f["a"])(Lh,Oh,Ah,!1,null,"b6f60c90",null)),jh=Dh.exports,Ih={name:"task-info",components:{AddComment:zp,AddPreviewModal:Yp,ButtonLink:zd,ButtonSimple:Vc,Comment:ch,ChevronLeftIcon:Ic["d"],DownloadIcon:Ic["i"],ImageIcon:Ic["n"],ModelViewer:fh,PeopleName:nh,PictureViewer:Th,Spinner:v,SubscribeButton:xh,TaskTypeName:$l,ValidationTag:Wl,VideoPlayer:jh},props:{task:{type:Object,default:function(){}}},data:function(){return{addExtraPreviewFormData:null,attachedFileName:"",currentPreviewPath:"",currentPreviewDlPath:"",isSubscribed:!1,taskComments:[],taskPreviews:[],errors:{addComment:!1,addPreview:!1,addExtraPreview:!1,task:!1},loading:{addComment:!1,addPreview:!1,addExtraPreview:!1,task:!1},modals:{addPreview:!1,addExtraPreview:!1},otherPreviews:[]}},mounted:function(){this.loadTaskData()},computed:Object(l["a"])({},Object(d["c"])(["currentEpisode","currentProduction","getTaskComment","getTaskComments","getTaskPreviews","isCurrentUserManager","isSingleEpisode","isTVShow","personMap","previewFormData","taskEntityPreviews","taskStatusForCurrentUser","taskTypeMap","user"]),{title:function(){if(this.task){var t=this.task.entity_type_name,e=this.task.full_entity_name||this.task.entity_name;return this.isSingleEpisode&&"Shot"===t&&(e=e.split("/").splice(1).join("/")),"".concat(e)}return"Loading..."},isAssigned:function(){var t=this;return!!this.task&&this.task.assignees.some(function(e){return e===t.user.id})},isCommentingAllowed:function(){var t=this;return this.isCurrentUserManager||this.task.assignees.find(function(e){return e===t.user.id})},isSetThumbnailAllowed:function(){return this.currentPreviewId&&this.task&&this.task.entity&&this.currentPreviewId!==this.task.entity.preview_file_id},currentTaskType:function(){return this.task?this.taskTypeMap[this.task.task_type_id]:null},currentPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[0]:null},currentPreviewId:function(){return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[0].id:null},extension:function(){return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[0].extension:""},isStandardPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&["pdf","ma","mb","rar","zip","blend"].includes(this.extension)},isMoviePreview:function(){if(this.taskPreviews&&this.taskPreviews.length>0){var t=this.taskPreviews[0];return t&&"mp4"===t.extension}return!1},isPicturePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"png"===this.extension},is3DModelPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"obj"===this.extension},moviePath:function(){var t=null;return!t&&this.taskPreviews&&this.taskPreviews.length>0&&(t=this.taskPreviews[0].id),"/api/movies/originals/preview-files/".concat(t,".mp4")},tasktypeStyle:function(){return no(this.task)},taskPath:function(){return ao(this.task,this.currentProduction,this.isTVShow,this.currentEpisode,this.taskTypeMap)},taskEntityPath:function(){var t=this.$route.params.episode_id;return oo(this.task,t)}}),methods:Object(l["a"])({},Object(d["b"])(["addCommentExtraPreview","commentTask","commentTaskWithPreview","loadPreviewFileFormData","loadTask","loadTaskComments","loadTaskSubscribed","refreshPreview","setPreview","subscribeToTask","unsubscribeFromTask","updatePreviewAnnotation"]),{loadTaskData:function(){var t=this;this.task&&(this.loading.task=!0,this.errors.task=!1,this.loadTaskComments({taskId:this.task.id,entityId:this.task.entity_id,callback:function(e){e?(console.log(e),t.errors.task=!0):t.loadTaskSubscribed({taskId:t.task.id,callback:function(e,s){e&&console.log(e),t.loading.task=!1,t.reset(),t.isSubscribed=s}})}}))},addComment:function(t,e){var s=this,i=function(t,e){t?s.errors.addComment=!0:(s.$refs["add-preview-modal"].reset(),s.reset(),s.attachedFileName=""),s.loading.addComment=!1},n={taskId:this.task.id,taskStatusId:e,commentText:t,comment:t,callback:i};this.loading.addComment=!0,this.errors.addComment=!1,this.attachedFileName?this.commentTaskWithPreview(n):this.commentTask(n)},reset:function(){var t=this;this.taskComments=this.getTaskComments(this.task.id),this.taskPreviews=this.getTaskPreviews(this.task.id),this.setOtherPreviews(),this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath(),this.$nextTick(function(){t.$refs["add-comment"]&&t.$refs["add-comment"].focus()})},getOriginalPath:function(){var t=this.currentPreviewId,e=this.extension?this.extension:"png";return"/api/pictures/originals/preview-files/".concat(t,".").concat(e)},getOriginalDlPath:function(){var t=this.currentPreviewId;return"/api/pictures/originals/preview-files/".concat(t,"/download")},setOtherPreviews:function(){var t=this;return this.otherPreviews=this.taskPreviews.filter(function(e){return e.id!==t.currentPreviewId&&"mp4"===e.extension}),this.otherPreviews},selectFile:function(t){this.loadPreviewFileFormData(t),this.attachedFileName=t.get("file").name},createExtraPreview:function(){var t=this;this.errors.addExtraPreview=!1,this.loading.addExtraPreview=!0,this.addCommentExtraPreview({taskId:this.task.id,commentId:this.taskComments[0].id,previewId:this.taskPreviews[0].id,callback:function(e,s){t.loading.addExtraPreview=!1,e?t.errors.addExtraPreview=!0:(t.$refs["add-extra-preview-modal"].reset(),t.reset(),setTimeout(function(){t.$refs["preview-picture"].displayLast()},0),t.modals.addExtraPreview=!1)}})},onPreviewAdded:function(t){var e=t.task_id,s=t.comment_id,i=t.preview_file_id,n=t.revision,a=t.extension,o=this.$store.getters.getTaskComment(e,s);!o||0!==o.previews.length&&o.previews[0].id===i||e!==this.task.id||(this.$store.commit("ADD_PREVIEW_END",{preview:{id:i,revision:n,extension:a},taskId:e,commentId:s,comment:o}),this.reset())},onAnnotationChanged:function(t){var e=t.preview,s=t.annotations,i=this.task.id;this.updatePreviewAnnotation({taskId:i,preview:e,annotations:s})},onAddPreviewClicked:function(t){this.modals.addPreview=!0},onAddExtraPreview:function(){this.modals.addExtraPreview=!0},onClosePreview:function(){this.modals.addPreview=!1},onCloseExtraPreview:function(){this.modals.addExtraPreview=!1},setCurrentPreviewAsEntityThumbnail:function(){this.setPreview({taskId:this.task.id,entityId:this.task.entity.id,previewId:this.currentPreviewId,callback:function(){}})},toggleSubscribe:function(){this.task&&!this.isAssigned&&(this.isSubscribed?(this.unsubscribeFromTask(this.task.id),this.isSubscribed=!1):(this.subscribeToTask(this.task.id),this.isSubscribed=!0))}}),watch:{task:function(){this.attachedFileName="",this.loadTaskData()}},socket:{events:{"preview-file:add-file":function(t){this.onPreviewAdded(t)},"preview_file:update":function(t){var e=this,s=this.taskPreviews.filter(function(e){return e.id===t.preview_file_id});s&&this.refreshPreview({taskId:this.task.id,previewId:t.preview_file_id}).then(function(){e.$refs["preview-movie"]?e.$refs["preview-movie"].isDrawing||e.$refs["preview-movie"].reloadAnnotations():e.$refs["preview-picture"]&&(e.$refs["preview-picture"].isDrawing||e.$refs["preview-picture"].reset())})}}}},Mh=Ih,Fh=(s("271b"),Object(f["a"])(Mh,$p,Lp,!1,null,"2d814f15",null)),qh=Fh.exports,Nh={name:"assets",components:{AssetList:yu,AddMetadataModal:Au,ButtonLink:zd,ButtonHrefLink:qd,CreateTasksModal:Mu,DeleteModal:Bu,EditAssetModal:bl,HardDeleteModal:op,ImportModal:tp,PageTitle:fd,SearchField:pp,SearchQueryList:yp,ShowAssignationsButton:Cp,ShowInfosButton:Ap,TaskInfo:qh},data:function(){return{initialLoading:!0,modals:{isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isNewDisplayed:!1},loading:{addMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,importing:!1,stay:!1,taskStay:!1},errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,importing:!1},assetToDelete:null,assetToRestore:null,assetToEdit:null,assetFilters:[{type:"Type",value:{name:"open"}}],assetFilterTypes:["Type"],descriptorToEdit:{},columns:["Type","Name","Description"],deleteAllTasksLockText:null}},computed:Object(l["a"])({},Object(d["c"])(["assetMap","assetsPath","assetListScrollPosition","assetsCsvFormData","assetSearchText","assetSearchQueries","assetTypes","assetValidationColumns","currentEpisode","currentProduction","editAsset","deleteAsset","displayedAssetsByType","openProductions","isAssetsLoading","isAssetsLoadingError","isCurrentUserManager","isTVShow","nbSelectedTasks","restoreAsset","selectedTasks","taskTypeMap"]),{newAssetPath:function(){return this.getPath("new-asset")},importPath:function(){return this.getPath("import-assets")}}),created:function(){this.setLastProductionScreen("assets")},mounted:function(){var t=this;this.assetSearchText.length>0&&this.$refs["asset-search-field"].setValue(this.assetSearchText),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition),Ta()(this.assetMap).length<2||this.assetValidationColumns.length>0&&!Ta()(this.assetMap)[0].validations?setTimeout(function(){t.loadAssets(function(e){e||(t.handleModalsDisplay(),t.onSearchChange(),setTimeout(function(){t.$refs["asset-list"]&&t.$refs["asset-list"].setScrollPosition(t.assetListScrollPosition)},500)),setTimeout(function(){t.initialLoading=!1,t.resizeHeaders()},200)})},0):(this.isAssetsLoading||(this.initialLoading=!1),this.onSearchChange(),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition))},methods:Object(l["a"])({},Object(d["b"])(["addMetadataDescriptor","deleteAllTasks","deleteMetadataDescriptor","loadAssets","loadComment","removeAssetSearch","saveAssetSearch","setLastProductionScreen","setAssetSearch"]),{confirmNewAssetStay:function(t){var e=this,s="newAsset";this.loading.stay=!0,this.editAsset.isSuccess=!1,this.editAsset.isError=!1,this.$store.dispatch(s,{data:t,callback:function(t){e.loading.stay=!1,t?e.loading.edit=!1:(e.resetLightEditModal(),e.$refs["edit-asset-modal"].focusName(),e.editAsset.isSuccess=!0,e.resizeHeaders())}})},confirmEditAsset:function(t){var e=this,s="newAsset";this.loading.edit=!0,this.editAsset.isCreateError=!1,this.assetToEdit&&this.assetToEdit.id&&(s="editAsset",t.id=this.assetToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t?(e.loading.edit=!1,e.editAsset.isCreateError=!0):(e.loading.edit=!1,e.modals.isNewDisplayed=!1,e.$router.push(e.assetsPath),e.resizeHeaders())}})},confirmDeleteAsset:function(){var t=this;this.$store.dispatch("deleteAsset",{asset:this.assetToDelete,callback:function(e){e||t.$router.push(t.assetsPath)}})},confirmRestoreAsset:function(){var t=this;this.$store.dispatch("restoreAsset",{asset:this.assetToRestore,callback:function(e){e||(t.modals.isRestoreDisplayed=!1)}})},confirmCreateTasks:function(t){var e=this;this.loading.creatingTasks=!0,this.runTasksCreation(t,function(t){t||e.$router.push(e.assetsPath),e.loading.creatingTasks=!1})},confirmCreateTasksAndStay:function(t){var e=this;this.loading.taskStay=!0,this.runTasksCreation(t,function(){e.loading.taskStay=!1})},runTasksCreation:function(t,e){var s=this;this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:t.task_type_id,type:"assets",project_id:this.currentProduction.id,callback:function(t){t?s.errors.creatingTasks=!0:(s.modals.isCreateTasks=!1,s.loadAssets(function(){s.resizeHeaders()})),e(t)}})},confirmDeleteAllTasks:function(){var t=this,e=this.$route.params.task_type_id,s=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllTasks({projectId:s,taskTypeId:e}).then(function(){t.loading.deleteAllTasks=!1,t.loadAssets(function(){t.resizeHeaders()}),t.$router.push(t.assetsPath)}).catch(function(e){console.error(e),t.loading.deleteAllTasks=!1,t.errors.deleteAllTasks=!0})},confirmDeleteMetadata:function(){var t=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then(function(){t.errors.deleteMetadata=!1,t.loading.deleteMetadata=!1,t.modals.isDeleteMetadataDisplayed=!1}).catch(function(e){console.error(e),t.errors.deleteMetadata=!0,t.loading.deleteMetadata=!1})},resetLightEditModal:function(){var t={name:"",entity_type_id:this.assetToEdit.entity_type_id,production_id:this.currentProduction.id};this.assetToEdit=t},resetEditModal:function(){var t={name:""};this.assetTypes.length>0&&(t.asset_type_id=this.assetTypes[0].id),t.production_id=this.currentProduction.id,this.assetToEdit=t},deleteText:function(){var t=this.assetToDelete;return t?this.$t("assets.delete_text",{name:t.name}):""},deleteAllTasksText:function(){var t=this.taskTypeMap[this.$route.params.task_type_id];return t?this.$t("tasks.delete_all_text",{name:t.name}):""},restoreText:function(){var t=this.assetToRestore;return t?this.$t("assets.restore_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.asset_id;if(this.editAsset.isSuccess=!1,this.editAsset.isError=!1,t.indexOf("new")>0)this.resetEditModal(),this.editAsset.isSuccess=!1,this.modals.isNewDisplayed=!0;else if(t.indexOf("edit")>0)this.editAsset.isSuccess=!1,this.assetToEdit=this.assetMap[e],this.modals.isNewDisplayed=!0;else if(t.indexOf("delete-all-tasks")>0){var s=this.taskTypeMap[this.$route.params.task_type_id];this.deleteAllTasksLockText=s.name,this.modals.isDeleteAllTasksDisplayed=!0}else t.indexOf("delete")>0?(this.assetToDelete=this.assetMap[e],this.modals.isDeleteDisplayed=!0):t.indexOf("restore")>0?(this.assetToRestore=this.assetMap[e],this.modals.isRestoreDisplayed=!0):t.indexOf("import")>0?this.modals.isImportDisplayed=!0:t.indexOf("create-tasks")>0?this.modals.isCreateTasksDisplayed=!0:this.modals={isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1}},selectFile:function(t){this.$store.commit("ASSET_CSV_FILE_SELECTED",t)},uploadImportFile:function(){var t=this;this.loading.importing=!0,this.errors.importing=!1,this.$store.dispatch("uploadAssetFile",function(e){e?(t.loading.importing=!1,t.errors.importing=!0):(t.loading.importing=!1,t.loadAssets(function(){t.resizeHeaders()}),t.$router.push(t.assetsPath))})},onSearchChange:function(){var t=this.$refs["asset-search-field"].getValue();this.setAssetSearch(t),this.resizeHeaders()},changeSearch:function(t){this.$refs["asset-search-field"].setValue(t.search_query),this.$refs["asset-search-field"].$emit("change",t.search_query),this.resizeHeaders()},saveSearchQuery:function(t){this.saveAssetSearch(t).then(function(){}).catch(function(t){t&&console.log("error")})},removeSearchQuery:function(t){this.removeAssetSearch(t).then(function(){}).catch(function(t){t&&console.log("error")})},saveScrollPosition:function(t){this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",t)},getPath:function(t){var e={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-".concat(t),e.params.episode_id=this.currentEpisode.id),e},resizeHeaders:function(){var t=this;setTimeout(function(){t.$refs["asset-list"]&&t.$refs["asset-list"].resizeHeaders()},0)},onDeleteAllTasksClicked:function(t){var e=this.getPath("delete-all-asset-tasks"),s=this.taskTypeMap[t];e.params.task_type_id=t,this.deleteAllTasksLockText=s.name,this.$router.push(e)},confirmAddMetadata:function(t){var e=this;this.loading.addMetadata=!0,t.entity_type="Asset",this.addMetadataDescriptor(t).then(function(){e.loading.addMetadata=!1,e.modals.isAddMetadataDisplayed=!1}).catch(function(t){console.error(t),e.loading.addMetadata=!1,e.errors.addMetadata=!0})},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(t){this.descriptorIdToDelete=t,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(t){this.descriptorToEdit=this.currentProduction.descriptors.find(function(e){return e.id===t}),this.modals.isAddMetadataDisplayed=!0}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var t=this;this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.isTVShow||(this.initialLoading=!0,this.loadAssets(function(e){t.initialLoading=!1,t.resizeHeaders(),e||t.handleModalsDisplay()}))},currentEpisode:function(){var t=this;this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.isTVShow&&this.currentEpisode&&(this.initialLoading=!0,this.loadAssets(function(e){e||(t.handleModalsDisplay(),t.initialLoading=!1,t.resizeHeaders())}))},displayedAssets:function(){this.resizeHeaders()}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("assets.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("assets.title")," - Kitsu")}}},Rh=Nh,Vh=(s("6b81"),Object(f["a"])(Rh,Ed,Pd,!1,null,"370e613e",null)),Bh=Vh.exports,Uh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"asset-types page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("asset_types.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item",attrs:{icon:"plus",text:t.$t("asset_types.new_asset_type"),path:"/asset-types/new"}})],1)])]),s("asset-type-list",{staticClass:"mt2",attrs:{entries:t.assetTypes,"is-loading":t.isAssetTypesLoading,"is-error":t.isAssetTypesLoadingError}}),s("edit-asset-type-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editAssetType.isLoading,"is-error":t.editAssetType.isError,"cancel-route":"/asset-types","asset-type-to-edit":t.assetTypeToEdit},on:{confirm:t.confirmEditAssetType}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteAssetType.isLoading,"is-error":t.deleteAssetType.isError,"cancel-route":"/asset-types",text:t.deleteText(),"error-text":t.$t("asset_types.delete_error")},on:{confirm:t.confirmDeleteAssetType}})],1)},zh=[],Hh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v(t._s(t.$t("asset_types.fields.name")))]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n             "+t._s(e.name)+"\n          ")]),s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-asset-type",params:{asset_type_id:e.id}},"delete-route":{name:"delete-asset-type",params:{asset_type_id:e.id}}}})],1)}))])]):t._e(),s("p",{staticClass:"has-text-centered nb-asset-types"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("asset_types.number",t.entries.length))+"\n  ")])],1)},Gh=[],Wh={name:"asset-type-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{RowActions:Yd,TableInfo:Vl},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},Kh=Wh,Qh=(s("ca96"),Object(f["a"])(Kh,Hh,Gh,!1,null,"192ecab3",null)),Yh=Qh.exports,Xh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.assetTypeToEdit&&t.assetTypeToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("asset_types.edit_title"))+" "+t._s(t.assetTypeToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("asset_types.new_asset_type"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("asset_types.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},Jh=[],Zh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v(t._s(t.label))]),s("div",{staticClass:"control colors"},t._l(t.colors,function(e,i){return s("div",{key:"color-"+i,ref:"color-"+i,refInFor:!0,class:{color:!0,selected:t.value===e},on:{click:function(s){t.colorChanged(e)}}},[s("span",{style:{background:e}})])}))])},tm=[],em={name:"text-field",props:{label:{default:"",type:String},value:{default:"$grey999",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},colors:{default:function(){return["#999999","#8D6E63","#43A047","#7CB342","#009688","#9CCC65","#AFB42B","#F9A825","#F57C00","#ff5252","#F06292","#AB47BC","#5C6BC0","#039BE5","#26C6DA","#64B5F6","#78909C"]}}},data:function(){return{selectedColor:"$grey999"}},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]),{colorChanged:function(t,e){this.$emit("input",t)}})},sm=em,im=(s("edc6"),Object(f["a"])(sm,Zh,tm,!1,null,"69fc363c",null)),nm=im.exports,am={name:"edit-asset-type-modal",components:{TextField:al,ColorField:nm},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText","assetTypeToEdit"],data:function(){return{}},computed:Object(l["a"])({},Object(d["c"])(["assetTypes","assetTypeStatusOptions"]),{form:function(){return{name:""}}}),methods:Object(l["a"])({},Object(d["b"])([]),{runConfirmation:function(){this.$emit("confirm",this.form)}}),watch:{active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.nameField.focus()},100)},assetTypeToEdit:function(){this.assetTypeToEdit&&(this.form.name=this.assetTypeToEdit.name)}}},om=am,rm=(s("d4f2"),Object(f["a"])(om,Xh,Jh,!1,null,"53e9ec0a",null)),cm=rm.exports,lm={name:"asset-types",components:{AssetTypeList:Yh,ButtonLink:zd,DeleteModal:Bu,EditAssetTypeModal:cm,PageTitle:fd},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},assetTypeToDelete:null,assetTypeToEdit:null,choices:[]}},computed:Object(l["a"])({},Object(d["c"])(["assetTypes","isAssetTypesLoading","isAssetTypesLoadingError","editAssetType","deleteAssetType","getAssetType"])),created:function(){var t=this;this.loadAssetTypes(function(e){e||t.handleModalsDisplay()})},methods:Object(l["a"])({},Object(d["b"])(["loadAssetTypes"]),{confirmEditAssetType:function(t){var e=this,s="newAssetType";this.assetTypeToEdit&&this.assetTypeToEdit.id&&(s="editAssetType",t.id=this.assetTypeToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t||(e.modals.isNewDisplayed=!1,e.$router.push("/asset-types"))}})},confirmDeleteAssetType:function(){var t=this;this.$store.dispatch("deleteAssetType",{assetType:this.assetTypeToDelete,callback:function(e){e||(t.modals.isDeleteDisplayed=!1)}})},deleteText:function(){var t=this.assetTypeToDelete;return t?this.$t("asset_types.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.asset_type_id;t.indexOf("new")>0?(this.assetTypeToEdit={color:"#FFFFFF"},this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.assetTypeToEdit=this.getAssetType(e),this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.assetTypeToDelete=this.getAssetType(e),this.modals.isDeleteDisplayed=!0):(this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("asset_types.title")," - Kitsu")}}},dm=lm,um=Object(f["a"])(dm,Uh,zh,!1,null,"642ebd96",null),pm=um.exports,hm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"breakdown page"},[s("div",{staticClass:"breakdown-columns mt2"},[s("div",{staticClass:"breakdown-column shot-column"},[t.isShotsLoading?s("spinner"):s("div",[s("combobox",{attrs:{label:t.$t("shots.fields.sequence"),options:t.castingSequenceOptions},model:{value:t.sequenceId,callback:function(e){t.sequenceId=e},expression:"sequenceId"}}),s("p",{staticClass:"shots-title"},[t._v(t._s(t.$t("shots.title")))]),t._l(t.castingSequenceShots,function(e){return s("shot-line",{key:e.id,attrs:{"shot-id":e.id,selected:t.castingCurrentShot&&t.castingCurrentShot.id===e.id,name:e.name},on:{click:t.selectShot}})})],2)],1),s("div",{staticClass:"breakdown-column casting-column"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[t.castingCurrentShot?s("h2",{staticClass:"subtitle"},[t._v("\n            "+t._s(t.$t("breakdown.selected_shot",{sequence_name:t.castingCurrentShot.sequence_name,name:t.castingCurrentShot.name}))+"\n          ")]):s("em",[t._v("\n            "+t._s(t.$t("breakdown.select_shot"))+"\n          ")])])]),s("error-text",{attrs:{"align-right":!0,hidden:!t.isSavingError,text:t.$t("breakdown.save_error")}}),t.isLoading?s("spinner"):t._l(t.castingAssetsByType,function(e){return s("div",{key:e.length>0?e[0].asset_type_name:"",staticClass:"type-assets"},[s("div",{staticClass:"asset-type"},[t._v("\n          "+t._s(e.length>0?e[0].asset_type_name:"")+"\n        ")]),s("div",{staticClass:"asset-list"},t._l(e,function(e){return s("asset-block",{key:e.id,attrs:{asset:e,"nb-occurences":e.nb_occurences},on:{"remove-one":t.removeOneAsset,"remove-ten":t.removeTenAssets}})}))])})],2),t.isCurrentUserManager?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onAssetListScroll,expression:"onAssetListScroll"}],ref:"asset-list",staticClass:"breakdown-column assets-column"},[s("h2",{staticClass:"subtitle"},[t._v("\n        "+t._s(t.$t("breakdown.all_assets"))+"\n      ")]),s("div",{staticClass:"filters-area"},[s("div",{staticClass:"level"},[s("search-field",{on:{change:t.onSearchChange}})],1)]),t.isAssetsLoading?s("spinner"):t._l(t.availableAssetsByType,function(e){return s("div",{key:e.length>0?e[0].asset_type_name:"",staticClass:"type-assets"},[s("div",{staticClass:"asset-type"},[t._v("\n          "+t._s(e.length>0?e[0].asset_type_name:"")+"\n        ")]),s("div",{staticClass:"asset-list"},t._l(e,function(e){return s("available-asset-block",{key:e.id,attrs:{asset:e,casted:void 0!==t.casting[e.id],active:!!t.castingCurrentShot},on:{"add-one":t.addOneAsset,"add-ten":t.addTenAssets}})}))])})],2):t._e()])])},mm=[],fm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{class:{error:!0,"has-text-right":t.alignRight,"is-hidden":t.hidden}},[t._v("\n  "+t._s(t.text)+"\n")])},_m=[],vm={name:"error-text",props:{text:{default:"",type:String},hidden:{default:!1,type:Boolean},alignRight:{default:!1,type:Boolean}}},ym=vm,gm=Object(f["a"])(ym,fm,_m,!1,null,null,null),km=gm.exports,bm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{shot:!0,selected:t.selected},attrs:{id:t.shotId},on:{click:t.onClicked}},[t._v("\n  "+t._s(t.name)+"\n")])},Tm=[],Sm={name:"shot-line",props:{shotId:{default:"",type:String},selected:{default:function(){},type:Boolean},name:{default:"",type:String}},methods:{onClicked:function(t){this.$emit("click",t.target.id)}}},Cm=Sm,wm=(s("57d3"),Object(f["a"])(Cm,bm,Tm,!1,null,"66c73c86",null)),Em=wm.exports,Pm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{asset:!0,big:!0,casted:!0,active:t.active},attrs:{id:"casting-"+t.asset.id}},[s("div",{staticClass:"asset-add",on:{click:t.removeOneAsset}},[t._v("\n  - 1\n  ")]),s("div",{staticClass:"asset-add-10",on:{click:t.removeTenAssets}},[t._v("\n  - 10\n  ")]),t.asset.preview_file_id.length>0?s("div",{staticClass:"asset-picture"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/api/pictures/thumbnails-square/preview-files/"+t.asset.preview_file_id+".png",expression:"'/api/pictures/thumbnails-square/preview-files/' + asset.preview_file_id + '.png'"}]})]):s("div",{staticClass:"asset-picture"},[s("span",{staticClass:"empty-picture"},[t._v("\n      no pic\n    ")])]),s("p",{staticClass:"asset-name"},[t._v("\n    "+t._s(t.asset.name)+"\n    "),t.nbOccurences>1?s("span",[t._v("\n    ("+t._s(t.nbOccurences)+")\n    ")]):t._e()])])},xm=[],Om={name:"asset-block",props:{asset:{default:function(){return{id:"",name:""}},type:Object},nbOccurences:{default:1,type:Number},active:{default:!0,type:Boolean}},computed:{},methods:{removeOneAsset:function(t){var e=t.target.parentElement.id.substring("casting-".length);this.$emit("remove-one",e)},removeTenAssets:function(t){var e=t.target.parentElement.id.substring("casting-".length);this.$emit("remove-ten",e)}}},Am=Om,$m=(s("0bbb"),Object(f["a"])(Am,Pm,xm,!1,null,"9eeaa2e6",null)),Lm=$m.exports,Dm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{asset:!0,casted:t.casted,active:t.active},attrs:{id:"casting-"+t.asset.id}},[s("div",{staticClass:"asset-add",on:{click:t.addOneAsset}},[t._v("\n  + 1\n  ")]),s("div",{staticClass:"asset-add-10",on:{click:t.addTenAssets}},[t._v("\n  + 10\n  ")]),t.asset.preview_file_id.length>0?s("div",{staticClass:"asset-picture"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/api/pictures/thumbnails-square/preview-files/"+t.asset.preview_file_id+".png",expression:"'/api/pictures/thumbnails-square/preview-files/' + asset.preview_file_id + '.png'"}]})]):s("div",{staticClass:"asset-picture"},[s("span",{staticClass:"empty-picture"},[t._v("\n      no pic\n    ")])]),s("p",{staticClass:"asset-name"},[t._v("\n    "+t._s(t.asset.name)+"\n  ")])])},jm=[],Im={name:"available-asset-block",props:{asset:{default:function(){return{id:"",name:""}},type:Object},casted:{default:!1,type:Boolean},active:{default:!1,type:Boolean}},computed:{},methods:{addOneAsset:function(t){var e=t.target.parentElement.id.substring("casting-".length);this.$emit("add-one",e)},addTenAssets:function(t){var e=t.target.parentElement.id.substring("casting-".length);this.$emit("add-ten",e)}}},Mm=Im,Fm=(s("f652"),Object(f["a"])(Mm,Dm,jm,!1,null,"1419806e",null)),qm=Fm.exports,Nm={name:"asset-types",components:{AssetBlock:Lm,AvailableAssetBlock:qm,Combobox:vl,ErrorText:km,PageTitle:fd,SaveIcon:Ic["x"],SearchIcon:Ic["y"],SearchField:pp,ShotLine:Em,Spinner:v},data:function(){return{isLoading:!1,isSaving:!1,isSavingError:!1,sequenceId:"",episodeId:"",shotId:""}},computed:Object(l["a"])({},Object(d["c"])(["assetMap","assetsByType","currentEpisode","currentProduction","displayedShots","isTVShow","getEpisodeOptions","castingSequenceOptions","isAssetsLoading","isShotsLoading","shots","sequences","shotMap","castingSequenceId","castingCurrentShot","castingSequenceShots","isCastingSaveActive","casting","castingAssetsByType","isCastingDirty","isCastingSaveActive","isCurrentUserManager"]),{availableAssetsByType:function(){var t=[];return this.assetsByType.forEach(function(e){var s=e.filter(function(t){return!t.canceled});s.length>0&&t.push(s)}),t}}),mounted:function(){this.reset(),this.setLastProductionScreen("breakdown")},methods:Object(l["a"])({},Object(d["b"])(["displayMoreAssets","loadShots","loadAssets","saveCasting","setAssetSearch","setCastingEpisode","setCastingSequence","setCastingShot","addAssetToCasting","removeAssetFromCasting","setLastProductionScreen"]),{reset:function(){var t=this;setTimeout(function(){t.reloadShots()},100)},reloadShots:function(){var t=this;this.loadShots(function(){t.isTVShow?(t.currentEpisode&&(t.episodeId=t.currentEpisode.id),t.setCastingEpisode(t.episodeId)):t.setCastingEpisode(null),t.loadAssets(function(){t.isLoading=!0,t.shotId=t.$route.params.shot_id,t.setCastingShot({shotId:t.shotId,callback:function(){t.isLoading=!1}}),t.displayMoreAssets()})})},onSearchChange:function(t){this.setAssetSearch(t)},selectShot:function(t){var e={name:"breakdown-shot",params:{production_id:this.currentProduction.id,shot_id:t}};this.currentEpisode&&(e.name="episode-breakdown-shot",e.params.episode_id=this.currentEpisode.id),this.$router.push(e)},onSaveClicked:function(){var t=this;this.isSaving=!0,this.isSavingError=!1,this.saveCasting(function(e){e&&(t.isSavingError=!0),t.isSaving=!1})},addOneAsset:function(t){this.addAssetToCasting({assetId:t,nbOccurences:1}),this.saveCasting()},addTenAssets:function(t){this.addAssetToCasting({assetId:t,nbOccurences:10}),this.saveCasting()},removeOneAsset:function(t){this.removeAssetFromCasting({assetId:t,nbOccurences:1}),this.saveCasting()},removeTenAssets:function(t){this.removeAssetFromCasting({assetId:t,nbOccurences:10}),this.saveCasting()},onAssetListScroll:function(t,e){var s=this.$refs["asset-list"],i=s.scrollHeight-s.offsetHeight;i<e.scrollTop+100&&this.displayMoreAssets()}}),watch:{$route:function(){var t=this.$route.params.shot_id;t&&this.shotId!==t&&(this.shotId=t)},shotId:function(){var t=this;this.shotId&&(this.isLoading=!0,this.setCastingShot({shotId:this.shotId,callback:function(){t.isLoading=!1}}))},sequenceId:function(){this.setCastingSequence(this.sequenceId)},episodeId:function(){this.episodeId,this.$route.params.episode_id},castingSequenceOptions:function(){if(this.castingSequenceOptions.length>0){var t=this.shotMap[this.shotId];this.shotId&&t?this.sequenceId=t.sequence_id:this.sequenceId=this.castingSequenceOptions[0].value}else this.sequenceId=""},currentProduction:function(){this.reset()},currentEpisode:function(){this.currentEpisode&&this.episodeId!==this.currentEpisode.id&&this.reset()}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," ").concat(this.$t("breakdown.title")," - Kitsu")}}},Rm=Nm,Vm=(s("c37d"),Object(f["a"])(Rm,hm,mm,!1,null,"1901b801",null)),Bm=Vm.exports,Um=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"custom-actions page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("custom_actions.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item",attrs:{icon:"plus",text:t.$t("custom_actions.new_custom_action"),path:"/custom-actions/new"}})],1)])]),s("custom-action-list",{attrs:{entries:t.customActions,"is-loading":t.isCustomActionsLoading,"is-error":t.isCustomActionsLoadingError}}),s("edit-custom-action-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editCustomAction.isLoading,"is-error":t.editCustomAction.isError,"cancel-route":"/custom-actions","custom-action-to-edit":t.customActionToEdit},on:{confirm:t.confirmEditCustomAction}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteCustomAction.isLoading,"is-error":t.deleteCustomAction.isError,"cancel-route":"/custom-actions",text:t.deleteText(),"error-text":t.$t("custom_actions.delete_error")},on:{confirm:t.confirmDeleteCustomAction}})],1)},zm=[],Hm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",{staticClass:"thead"},[s("tr",[s("th",{staticClass:"name"},[t._v(t._s(t.$t("custom_actions.fields.name")))]),s("th",{staticClass:"url"},[t._v(t._s(t.$t("custom_actions.fields.url")))]),s("th",{staticClass:"entity-type"},[t._v(t._s(t.$t("custom_actions.fields.entity_type")))]),s("th",{staticClass:"actions"},[t._v(" ")])])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v(t._s(e.name))]),s("td",{staticClass:"url"},[t._v(t._s(e.url))]),s("td",{staticClass:"entity-type"},[t._v(t._s(e.entity_type))]),s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-custom-action",params:{custom_action_id:e.id}},"delete-route":{name:"delete-custom-action",params:{custom_action_id:e.id}}}})],1)}))])]),s("p",{staticClass:"has-text-centered nb-custom-actions"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("custom_actions.number",t.entries.length))+"\n  ")])],1)},Gm=[],Wm={name:"custom-action-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{RowActions:Yd,TaskTypeName:Il,TableInfo:Vl},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]),{renderForShots:function(t){return t.for_shots?this.$tc("shots.title"):this.$tc("assets.title")},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},Km=Wm,Qm=(s("d419"),Object(f["a"])(Km,Hm,Gm,!1,null,"e39795e4",null)),Ym=Qm.exports,Xm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.isEditing()?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("custom_actions.edit_title"))+" "+t._s(t.customActionToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("custom_actions.new_custom_action"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("custom_actions.fields.name")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("text-field",{ref:"urlField",attrs:{label:t.$t("custom_actions.fields.url")},on:{enter:t.confirmClicked},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),s("combobox",{attrs:{label:t.$t("custom_actions.fields.entity_type"),options:t.entityTypeOptions,"locale-key-prefix":"custom_actions.entity_types."},on:{enter:t.confirmClicked},model:{value:t.form.entityType,callback:function(e){t.$set(t.form,"entityType",e)},expression:"form.entityType"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},Jm=[],Zm={name:"edit-custom-action-modal",components:{TextField:al,ColorField:nm,Combobox:vl},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText","customActionToEdit"],data:function(){return{form:{name:"",url:"",entityType:"all"},entityTypeOptions:[{label:"all",value:"all"},{label:"asset",value:"asset"},{label:"shot",value:"shot"}]}},computed:Object(l["a"])({},Object(d["c"])(["customActions","customActionStatusOptions"])),methods:Object(l["a"])({},Object(d["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.customActionToEdit&&this.customActionToEdit.id}}),watch:{customActionToEdit:function(){this.customActionToEdit&&(this.form={name:this.customActionToEdit.name,url:this.customActionToEdit.url,entityType:this.customActionToEdit.entity_type})},active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.nameField.focus()},100)}}},tf=Zm,ef=(s("98ea"),Object(f["a"])(tf,Xm,Jm,!1,null,"51025adb",null)),sf=ef.exports,nf={name:"custom-actions",components:{ButtonLink:zd,DeleteModal:Bu,EditCustomActionModal:sf,PageTitle:fd,CustomActionList:Ym},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},customActionToDelete:null,customActionToEdit:null}},computed:Object(l["a"])({},Object(d["c"])(["customActions","isCustomActionsLoading","isCustomActionsLoadingError","editCustomAction","deleteCustomAction","customAction"])),created:function(){var t=this;this.loadCustomActions(function(e){e||t.handleModalsDisplay()})},methods:Object(l["a"])({},Object(d["b"])(["loadCustomActions"]),{confirmEditCustomAction:function(t){var e=this,s="newCustomAction";this.customActionToEdit&&this.customActionToEdit.id&&(s="editCustomAction",t.id=this.customActionToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t||(e.modals.isNewDisplayed=!1,e.$router.push("/custom-actions"))}})},confirmDeleteCustomAction:function(){var t=this;this.$store.dispatch("deleteCustomAction",{customAction:this.customActionToDelete,callback:function(e){e||t.$router.push("/custom-actions")}})},deleteText:function(){var t=this.customActionToDelete;return t?this.$t("custom_actions.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.custom_action_id;t.indexOf("new")>0?(this.customActionToEdit={color:"#FFFFFF"},this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.customActionToEdit=this.customAction(e),this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.customActionToDelete=this.customAction(e),this.modals.isDeleteDisplayed=!0):(this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("custom_actions.title")," - Kitsu")}}},af=nf,of=Object(f["a"])(af,Um,zm,!1,null,"3df2bf86",null),rf=of.exports,cf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"episodes page fixed-page"},[s("div",{staticClass:"episode-list-header page-header"},[s("div",{staticClass:"filters-area"},[s("search-field",{ref:"episode-search-field",attrs:{placeholder:"ex: e01 s01, anim=wip"},on:{change:t.onSearchChange}})],1)]),s("episode-list",{ref:"episode-list",attrs:{entries:t.displayedEpisodes,"is-loading":t.isShotsLoading,"is-error":t.isShotsLoadingError,"validation-columns":t.episodeValidationColumns,"episode-stats":t.episodeStats},on:{scroll:t.saveScrollPosition}}),s("edit-episode-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-error":t.errors.edit,"cancel-route":t.episodesPath,"episode-to-edit":t.episodeToEdit},on:{confirm:t.confirmEditEpisode}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.loading.del,"is-error":t.errors.del,text:t.deleteText(),"error-text":t.$t("episodes.delete_error"),"cancel-route":t.episodesPath},on:{confirm:t.confirmDeleteEpisode}})],1)},lf=[],df=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{ref:"th-episode",staticClass:"name"},[t._v("\n            "+t._s(t.$t("shots.fields.episode"))+"\n          ")]),s("th",{staticClass:"description"},[t._v("\n            "+t._s(t.$t("shots.fields.description"))+"\n          ")]),t._l(t.sortedValidationColumns,function(e){return s("th",{key:t.taskTypeMap[e].id,staticClass:"validation",style:t.getValidationStyle(e)},[s("router-link",{attrs:{to:t.taskTypePath(e)}},[t._v("\n              "+t._s(t.taskTypeMap[e].name)+"\n            ")])],1)}),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isEmptyList&&!t.isCurrentUserClient?s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("episodes.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("shots.new_episodes"),path:{name:"manage-shots",params:{production_id:t.currentProduction.id}}}})],1):t._e(),t.isEmptyList&&t.isCurrentUserClient?s("div",{staticClass:"has-text-centered"},[t._m(1),s("p",{staticClass:"info"},[t._v(t._s(t.$t("episodes.empty_list_client")))])]):t._e(),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n          ")]),s("td",{staticClass:"description"},[t._v("\n            "+t._s(e.description)+"\n          ")]),t._l(t.sortedValidationColumns,function(i){return s("td",{key:i,staticClass:"validation",style:t.getValidationStyle(i)},[t.isStats(e,t.taskTypeMap[i])?s("pie-chart",{attrs:{width:"70px",height:"50px",legend:!1,colors:t.chartColors(e,t.taskTypeMap[i]),data:t.chartData(e,t.taskTypeMap[i])}}):t._e()],1)}),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":{name:"edit-episode",params:{episode_id:e.id,production_id:t.currentProduction.id}},"delete-route":{name:"delete-episode",params:{episode_id:e.id,production_id:t.currentProduction.id}}}}):s("td",{staticClass:"actions"})],2)}))])]),t.isEmptyList?t._e():s("p",{staticClass:"has-text-centered nb-episodes"},[t._v("\n    "+t._s(t.displayedEpisodesLength)+"\n    "+t._s(t.$tc("episodes.number",t.displayedEpisodesLength))+"\n  ")])],1)},uf=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])}],pf={name:"episode-list",mixins:[Ad],props:["entries","isLoading","isError","episodeStats","validationColumns"],data:function(){return{busy:!1,lastSelection:null}},components:{ButtonLink:zd,PageTitle:fd,RowActions:Yd,TableInfo:Vl},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","displayedEpisodesLength","episodeSearchText","isCurrentUserClient","isCurrentUserManager","isSingleEpisode","taskTypeMap"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.episodeSearchText||0===this.episodeSearchText.length)}}),methods:Object(l["a"])({},Object(d["b"])(["displayMoreEpisodes","loadMoreEpisodes"]),{chartColors:function(t,e){var s=this,i=this.episodeStats[t.id][e.id],n=Ta()(i);return n.map(function(i){var n=s.episodeStats[t.id][e.id][i],a="todo"===n.name?"#5F626A":n.color;return a})},chartData:function(t,e){var s=this;return Ta()(this.episodeStats[t.id][e.id]).map(function(i){return[s.episodeStats[t.id][e.id][i].name,s.episodeStats[t.id][e.id][i].value]})},isStats:function(t,e){return this.episodeStats[t.id]&&this.episodeStats[t.id][e.id]},onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.loadMoreEpisodes()},loadMoreEpisodes:function(){this.displayMoreEpisodes(),this.$nextTick(this.resizeHeaders)},setScrollPosition:function(t){this.$refs.body.scrollTop=t},resizeHeaders:function(){if(this.$refs["body-tbody"].children.length>0){var t=this.$refs["body-tbody"].children[0].children[0].offsetWidth;this.$refs["th-episode"].style="min-width: ".concat(t,"px")}},editPath:function(t){return this.getPath("edit-episode",t)},deletePath:function(t){return this.getPath("delete-episode",t)},taskTypePath:function(t){var e={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:t,type:"shots"}};return this.isTVShow&&(e.name="episode-task-type",e.params.episode_id=this.currentEpisode.id),e},getPath:function(t,e){var s={name:t,params:{production_id:this.currentProduction.id,episode_id:e}};return s}})},hf=pf,mf=(s("f1f6"),Object(f["a"])(hf,df,uf,!1,null,"569ff0e1",null)),ff=mf.exports,_f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.episodeToEdit&&this.episodeToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("episodes.edit_title"))+" "+t._s(t.episodeToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("episodes.new_episode"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("episodes.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:t.$t("episodes.fields.description")},on:{keyup:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter"))&&e.ctrlKey?t.runConfirmation(e):null}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("episodes.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.episodeSuccessText)+"\n        ")])],1)])])])},vf=[],yf={name:"edit-episode-modal",components:{TextField:al,TextareaField:ul,Combobox:vl},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","episodeToEdit","errorText"],data:function(){return this.episodeToEdit&&this.episodeToEdit.id?{form:{id:this.episodeToEdit.id,name:this.episodeToEdit.name,description:this.episodeToEdit.description,production_id:this.episodeToEdit.project_id},episodeSuccessText:""}:{form:{id:"",name:"",description:"",fps:""},episodeSuccessText:""}},computed:Object(l["a"])({},Object(d["c"])(["currentProduction"])),methods:Object(l["a"])({},Object(d["b"])([]),{runConfirmation:function(){this.confirmClicked()},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.episodeToEdit&&this.episodeToEdit.id},resetForm:function(){this.episodeSuccessText="",this.isEditing()?this.form={id:this.episodeToEdit.id,name:this.episodeToEdit.name,description:this.episodeToEdit.description}:(this.form.id=null,this.form.name="",this.form.description="")}}),mounted:function(){this.resetForm()},watch:{active:function(){this.resetForm()},episodeToEdit:function(){this.resetForm()}}},gf=yf,kf=(s("5bd0"),Object(f["a"])(gf,_f,vf,!1,null,"6f58d07a",null)),bf=kf.exports,Tf={name:"episodes",components:{EpisodeList:ff,EditEpisodeModal:bf,DeleteModal:Bu,PageTitle:fd,SearchField:pp,SearchIcon:Ic["y"]},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},loading:{edit:!1,del:!1},errors:{edit:!1,del:!1},episodeToDelete:null,episodeToEdit:null}},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","displayedEpisodes","episodesPath","isCurrentUserManager","isShotsLoading","isShotsLoadingError","episodes","episodeMap","episodePath","episodeStats","episodeSearchText","episodeListScrollPosition","episodeValidationColumns"])),mounted:function(){this.setDefaultSearchText(),this.setDefaultListScrollPosition(),this.resizeHeaders(),this.initEpisodes().then(this.handleModalsDisplay)},methods:Object(l["a"])({},Object(d["b"])(["computeEpisodeStats","deleteEpisode","editEpisode","hideAssignations","initEpisodes","loadComment","loadShots","setLastProductionScreen","setEpisodeSearch","setEpisodeListScrollPosition","showAssignations"]),{setDefaultSearchText:function(){this.episodeSearchText.length>0&&this.$refs["episode-search-field"].setValue(this.episodeSearchText)},setDefaultListScrollPosition:function(){this.$refs["episode-list"].setScrollPosition(this.episodeListScrollPosition)},navigateToList:function(){this.$router.push(this.episodesPath)},confirmEditEpisode:function(t){var e=this;this.loading.edit=!0,this.errors.edit=!1,this.editEpisode(t).then(function(){e.loading.edit=!1,e.modals.isNewDisplayed=!1,e.navigateToList()}).catch(function(){e.loading.edit=!1,e.errors.edit=!0})},confirmDeleteEpisode:function(){var t=this;this.loading.delete=!0,this.errors.edit=!1,this.deleteEpisode(this.episodeToDelete).then(function(){t.loading.delete=!1,t.navigateToList()}).catch(function(){t.loading.delete=!1,t.errors.delete=!0})},resetEditModal:function(){var t={name:""};this.episodes.length>0&&(t.episode_id=this.episodes[0].id),this.openProductions.length>0&&(t.production_id=this.openProductions[0].id),this.episodeToEdit=t},deleteText:function(){var t=this.episodeToDelete;return t?this.$t("episodes.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.episode_id;this.errors={edit:!1,delete:!1},this.modals={isNewDisplayed:!1,isDeleteDisplayed:!1},t.indexOf("edit")>0?(this.episodeToEdit=this.episodeMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete")>0&&(this.episodeToDelete=this.episodeMap[e],this.modals.isDeleteDisplayed=!0)},onSearchChange:function(t){var e=this.$refs["episode-search-field"].getValue();this.setEpisodeSearch(e),this.resizeHeaders()},saveScrollPosition:function(t){this.setEpisodeListScrollPosition(t)},resizeHeaders:function(){var t=this;setTimeout(function(){t.$refs["episode-list"]&&t.$refs["episode-list"].resizeHeaders()},0)}}),watch:{$route:function(){this.handleModalsDisplay()},displayedEpisodes:function(){this.resizeHeaders()},currentProduction:function(){var t=this,e=this.$route.params.production_id;if(this.currentProduction.id!==e){var s={name:"episodes",params:{production_id:this.currentProduction.id}};this.$refs["episode-search-field"].setValue(""),this.$store.commit("SET_SEQUENCE_LIST_SCROLL_POSITION",0),this.$router.push(s),this.loadShots(function(){t.resizeHeaders(),t.isTVShow?t.loadEpisodeStats():t.computeEpisodeStats()})}}},socket:{events:{"comment:new":function(t){var e=this,s=t.comment_id;this.loadComment({commentId:s,callback:function(){e.isTVShow?e.loadEpisodeStats():e.computeEpisodeStats()}})}}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," ").concat(this.$t("episodes.title")," - Kitsu")}}},Sf=Tf,Cf=(s("41a9"),Object(f["a"])(Sf,cf,lf,!1,null,"54294153",null)),wf=Cf.exports,Ef=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login hero is-fullheight"},[i("div",{staticClass:"container has-text-centered"},[i("div",{staticClass:"box has-text-left"},[i("div",{staticClass:"has-text-centered login-header"},[i("img",{attrs:{src:s("ad6c")}}),i("h1",{staticClass:"title"},[t._v("\n          "+t._s(t.$t("login.title"))+"\n        ")])]),i("div",{staticClass:"field mt2"},[i("p",{staticClass:"control has-icon"},[i("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"input is-medium email",attrs:{type:"text",placeholder:t.$t("login.fields.email")},on:{input:t.updateEmail,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirmLogIn(e):null}}}),i("span",{staticClass:"icon"},[i("mail-icon",{attrs:{width:"20",height:"20"}})],1)])]),i("div",{staticClass:"field"},[i("p",{staticClass:"control has-icon"},[i("input",{staticClass:"input is-medium password",attrs:{type:"password",placeholder:t.$t("login.fields.password")},on:{input:t.updatePassword,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirmLogIn(e):null}}}),i("span",{staticClass:"icon"},[i("lock-icon",{attrs:{width:"20",height:"20"}})],1)])]),i("p",{staticClass:"control"},[i("a",{class:{button:!0,"main-button":!0,"is-fullwidth":!0,"is-loading":t.isLoginLoading},on:{click:t.confirmLogIn}},[t._v("\n          "+t._s(t.$t("login.login"))+"\n        ")])]),i("p",{directives:[{name:"show",rawName:"v-show",value:t.isLoginError,expression:"isLoginError"}],staticClass:"control error"},[t._v("\n        "+t._s(t.$t("login.login_failed"))+"\n      ")]),i("p",{staticClass:"has-text-centered"},[i("router-link",{attrs:{to:{name:"reset-password"}}},[t._v("\n          "+t._s(t.$t("login.forgot_password"))+"\n        ")])],1)])])])},Pf=[],xf={name:"login",components:{MailIcon:Ic["p"],LockIcon:Ic["o"]},computed:Object(l["a"])({},Object(d["c"])(["isLoginLoading","isLoginError"])),methods:Object(l["a"])({},Object(d["b"])(["logIn"]),{updateEmail:function(t){this.$store.dispatch("changeEmail",t.target.value)},updatePassword:function(t){this.$store.dispatch("changePassword",t.target.value)},confirmLogIn:function(){var t=this;this.logIn(function(e,s){e&&console.log(e),s&&t.$router.push("/")})}}),metaInfo:function(){return{title:this.$t("login.title")}}},Of=xf,Af=(s("b946"),Object(f["a"])(Of,Ef,Pf,!1,null,"48384f34",null)),$f=Af.exports,Lf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("topbar"),s("action-topbar"),s("sidebar"),s("router-view")],1)},Df=[],jf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"topbar"},[s("div",{class:{"is-active":!t.isUserMenuHidden},attrs:{id:"c-mask-user-menu"},on:{click:function(e){t.toggleUserMenu()}}}),s("nav",{staticClass:"nav"},[s("div",{staticClass:"nav-left"},[s("a",{staticClass:"nav-item sidebar-button",class:{selected:!t.isSidebarHidden},attrs:{id:"toggle-menu-button"},on:{click:function(e){t.toggleSidebar()}}},[t._v("\n        ≡\n      ")]),t.isProductionContext?s("div",{class:{"nav-item":!0}},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-item"},[s("combobox",{staticClass:"context-selector",attrs:{options:t.openProductionOptions,"is-top":!0},model:{value:t.currentProductionId,callback:function(e){t.currentProductionId=e},expression:"currentProductionId"}}),s("strong",[t._v("\n            >\n            ")]),s("combobox",{staticClass:"context-selector",attrs:{options:t.navigationOptions,"is-top":!0},model:{value:t.currentProjectSection,callback:function(e){t.currentProjectSection=e},expression:"currentProjectSection"}}),t.isEpisodeContext?s("strong",[t._v("\n            >\n            ")]):t._e(),t.isEpisodeContext?s("combobox",{staticClass:"context-selector",attrs:{options:t.episodeOptions,"is-top":!0},model:{value:t.currentEpisodeId,callback:function(e){t.currentEpisodeId=e},expression:"currentEpisodeId"}}):t._e()],1)])]):t._e()]),s("div",{staticClass:"nav-right"},[s("div",{staticClass:"nav-item"},[s("router-link",{attrs:{to:{name:"notifications"}}},[s("bell-icon",{class:t.notificationBellClass})],1)],1),s("div",{ref:"user-name",class:{"nav-item":!0,"user-nav":!0,active:!t.isUserMenuHidden},on:{click:t.toggleUserMenu}},[s("people-avatar",{ref:"avatar",staticClass:"avatar",attrs:{"no-cache":!0,person:t.user,"is-link":!1}}),s("people-name",{staticClass:"user-name",attrs:{person:t.user}})],1)])]),s("nav",{directives:[{name:"show",rawName:"v-show",value:!t.isUserMenuHidden,expression:"!isUserMenuHidden"}],ref:"user-menu",staticClass:"user-menu"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/profile"},nativeOn:{click:function(e){t.toggleUserMenu()}}},[t._v("\n          "+t._s(t.$t("main.profile"))+"\n        ")])],1),s("li",{on:{click:t.toggleDarkTheme}},[t.isDarkTheme?s("span",[t._v("\n          "+t._s(t.$t("main.white_theme "))+"\n        ")]):s("span",[t._v("\n          "+t._s(t.$t("main.dark_theme "))+"\n        ")])]),s("li",[s("a",{attrs:{href:"https://kitsu.cg-wire.com",target:"_blank"}},[t._v("\n          "+t._s(t.$t("main.documentation "))+"\n        ")])]),t._m(0),t._m(1),s("li",{on:{click:t.onLogoutClicked}},[t._v("\n        "+t._s(t.$t("main.logout"))+"\n      ")]),s("li",{staticClass:"version"},[t._v("\n        Kitsu "+t._s(t.kitsuVersion)+"\n      ")])])])])},If=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("a",{attrs:{href:"https://slack.cg-wire.com",target:"_blank"}},[t._v("\n          Slack\n        ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("a",{attrs:{href:"https://trello.com/b/TGi6LZNa/kitsu-roadmap",target:"_blank"}},[t._v("\n          Roadmap\n        ")])])}],Mf=s("9224"),Ff={name:"topbar",components:{BellIcon:Ic["b"],Combobox:vl,PeopleName:nh,PeopleAvatar:Zl},data:function(){return{currentProductionId:this.$route.params.production_id,currentEpisodeId:this.$route.params.episode_id,currentProjectSection:this.getCurrentSectionFromRoute(),kitsuVersion:Mf["a"],silent:!1}},mounted:function(){var t=this.$refs["user-menu"],e=this.$refs["user-name"];if(e){var s=e.clientWidth;s>100&&(t.style.width="".concat(s,"px"),e.style.width="".concat(s,"px"))}this.setProductionFromRoute()},computed:Object(l["a"])({},Object(d["c"])(["assetsPath","currentEpisode","currentProduction","episodes","episodeOptions","isDarkTheme","isSidebarHidden","isUserMenuHidden","isTVShow","isNewNotification","openProductions","openProductionOptions","productionMap","user"]),{notificationBellClass:function(){return this.isNewNotification?"has-notifications":"has-no-notifications"},isShotPage:function(){return this.$route.params.episode_id},isProductionContext:function(){return void 0!==this.$route.params.production_id||this.$route.path.indexOf("tasks")>0},isEpisodeContext:function(){return this.isTVShow&&this.isShotPage&&this.episodes.length>0},navigationOptions:function(){var t=[{label:this.$t("assets.title"),value:"assets"},{label:this.$t("shots.title"),value:"shots"},{label:this.$t("sequences.title"),value:"sequences"},{label:this.$t("episodes.title"),value:"episodes"},{label:this.$t("asset_types.production_title"),value:"assetTypes"},{label:this.$t("breakdown.title"),value:"breakdown"},{label:this.$t("playlists.title"),value:"playlists"},{label:this.$t("people.team"),value:"team"}];return this.isTVShow||t.splice(3,1),t}}),methods:Object(l["a"])({},Object(d["b"])(["clearEpisodes","loadEpisodes","loadNotification","logout","setProduction","setCurrentEpisode","toggleDarkTheme","toggleSidebar","toggleUserMenu"]),{onLogoutClicked:function(){var t=this;this.logout(function(e,s){e&&console.log(e),t.toggleUserMenu(),s&&t.$router.push("/login")})},getCurrentSectionFromRoute:function(){var t="",e=this.$route.path.split("/");return this.isTVShow&&(t=e[5]),t||(t=e[3],"episodes"===t&&6===e.length&&(t=e[5])),"asset-types"===t&&(t="assetTypes"),t},updateRoute:function(){var t=this.getCurrentSectionFromRoute(),e=this.currentProjectSection,s=e&&this.$route.path.indexOf("manage")<0,i=e!==t||this.$route.params.production_id!==this.currentProductionId||this.currentEpisodeId&&this.$route.params.episode_id&&this.$route.params.episode_id!==this.currentEpisodeId;return s&&i&&("assetTypes"===e&&(e="production-asset-types"),this.pushContextRoute(e)),this.$route.path},pushContextRoute:function(t){var e=this.currentEpisodeId,s=!!this.currentEpisodeId,i={name:t,params:{production_id:this.currentProductionId}};!this.productionMap[this.currentProductionId]||this.$route.params.production_id===this.currentProductionId&&e||(e=this.productionMap[this.currentProductionId].first_episode_id,s="tvshow"===this.productionMap[this.currentProductionId].production_type);var n=s&&"team"!==t&&"episodes"!==t;n?(i.name="episode-".concat(t),i.params.episode_id=e):"episodes"!==t||s||(i.name="assets"),i.params.production_id&&this.$router.push(i)},clearContext:function(){this.silent=!0,this.currentProductionId=null,this.currentEpisodeId=null,this.currentProjectSection=null,this.setCurrentEpisode(null),this.setProduction(null),this.silent=!1},setProductionFromRoute:function(){var t=this,e=this.$route.params.production_id,s=this.$route.params.episode_id;this.currentProduction&&this.currentProductionId===e&&this.currentProduction.id===e?this.episodes.length<2&&this.isTVShow&&(!this.currentEpisode||this.currentEpisode.id!==s)?this.loadEpisodes(function(){t.setEpisodeFromRoute(),t.updateComboFromRoute()}):("open-productions"===this.assetsPath.name&&e&&this.setProduction(e),this.setEpisodeFromRoute(),this.updateComboFromRoute()):(this.setProduction(e),this.isTVShow?this.loadEpisodes(function(){t.setEpisodeFromRoute(),t.updateComboFromRoute()}):(this.clearEpisodes(),this.updateComboFromRoute()))},setEpisodeFromRoute:function(){var t=this.$route.params.episode_id;this.isTVShow?this.currentEpisode&&this.currentEpisodeId===t&&this.currentEpisode.id===t||this.setCurrentEpisode(t):(this.silent=!0,this.clearEpisodes(),this.currentEpisodeId=null,this.silent=!1)},updateContext:function(t){t?this.setProductionFromRoute():this.clearContext()},updateComboFromRoute:function(){var t=this.$route.params.production_id,e=this.$route.params.episode_id,s=this.getCurrentSectionFromRoute();this.silent=!0,this.currentProductionId=t,this.currentEpisodeId=e,this.currentProjectSection=s,this.silent=!1}}),watch:{$route:function(){var t=this.$route.params.production_id;this.updateContext(t)},currentProductionId:function(){this.silent||this.updateRoute()},currentEpisodeId:function(){this.silent||this.updateRoute()},currentProjectSection:function(){this.silent||this.updateRoute()}},socket:{events:{"notification:new":function(t){if(this.user.id===t.person_id){var e=t.notification_id;this.loadNotification(e)}},"person:update":function(t){this.user.id===t.person_id&&this.$refs.avatar.reloadAvatar()}}}},qf=Ff,Nf=(s("39a1"),Object(f["a"])(qf,jf,If,!1,null,"0c47e199",null)),Rf=Nf.exports,Vf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{class:{"action-topbar":!0,hidden:t.isHidden}},[s("div",{staticClass:"flexrow action-bar"},[s("div",{staticClass:"flexrow-item more-menu-icon",on:{click:t.toggleMenu}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.currentMenuLabel)+"\n          ")]),s("chevron-down-icon",{staticClass:"flexrow-item"})],1)]),"assignation"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[t.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("div",{staticClass:"assignation flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.$tc("tasks.assign",t.nbSelectedTasks,{nbSelectedTasks:t.nbSelectedTasks}))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("people-field",{attrs:{people:t.currentTeam},model:{value:t.person,callback:function(e){t.person=e},expression:"person"}})],1),t.isAssignationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0,size:25}})],1):t._e(),t.isAssignationLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmAssign}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])]),t.isAssignationLoading?t._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.$t("main.or"))+"\n          ")]),t.isAssignationLoading?t._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[s("button",{staticClass:"button is-link clear-assignation-button hide-small-screen",on:{click:t.clearAssignation}},[t._v("\n              "+t._s(t.$t("tasks.clear_assignations"))+"\n            ")])])]):s("div",{staticStyle:{"padding-left":"1em"}},[t._v("\n          "+t._s(t.$t("tasks.no_assignation_right"))+"\n        ")])]):t._e(),"change-status"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.change_status_to"))+"\n          ")]),s("div",{staticClass:"flexrow-item"},[s("combobox-status",{attrs:{"task-status-list":t.taskStatusForCurrentUser},model:{value:t.taskStatusId,callback:function(e){t.taskStatusId=e},expression:"taskStatusId"}})],1),t.isChangeStatusLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmTaskStatusChange}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")]),t.isChangeStatusLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0}})],1):t._e()])])]):t._e(),"priorities"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.change_priority"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox",{attrs:{options:t.priorityOptions},model:{value:t.priority,callback:function(e){t.priority=e},expression:"priority"}})],1),t.isChangePriorityLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmPriorityChange}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])]),t.isChangePriorityLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):t._e()])]):t._e(),"estimations"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.set_estimations"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.estimation,expression:"estimation"}],staticClass:"input estimation-input",attrs:{type:"number",min:"0"},domProps:{value:t.estimation},on:{input:function(e){e.target.composing||(t.estimation=e.target.value)}}})]),t.isChangeEstimationLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmEstimationChange}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])]),t.isChangeEstimationLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):t._e()])]):t._e(),"tasks"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.create_for_selection"))+"\n          ")]),t.isCreationLoading?t._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:t.confirmTaskCreation}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")]),t.isCreationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0}})],1):t._e()])])]):t._e(),"delete-tasks"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("tasks.delete_for_selection"))+"\n          ")]),t.isDeletionLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-danger confirm-button",on:{click:t.confirmTaskDeletion}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])])])]):t._e(),"custom-actions"===t.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[t._v("\n            "+t._s(t.$t("custom_actions.run_for_selection"))+"\n          ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox",{attrs:{options:t.customActionOptions},model:{value:t.customActionUrl,callback:function(e){t.customActionUrl=e},expression:"customActionUrl"}})],1),s("div",{staticClass:"flexrow-item"},[s("form",{attrs:{target:"_blank",method:"POST",action:t.customActionUrl}},[s("input",{attrs:{type:"hidden",id:"personid",name:"personid"},domProps:{value:t.user.id}}),s("input",{attrs:{type:"hidden",id:"personemail",name:"personemail"},domProps:{value:t.user.email}}),s("input",{attrs:{type:"hidden",id:"projectid",name:"projectid"},domProps:{value:t.currrentPrduction?t.currentProduction.id:null}}),s("input",{attrs:{type:"hidden",id:"currentpath",name:"currentpath"},domProps:{value:t.currentUrl}}),s("input",{attrs:{type:"hidden",id:"currentserver",name:"currentserver"},domProps:{value:t.currentHost}}),s("input",{attrs:{type:"hidden",id:"selection",name:"selection"},domProps:{value:t.selectedTaskIds}}),s("input",{attrs:{type:"hidden",id:"entity_type",name:"entity_type"},domProps:{value:t.currentEntityType}}),s("button",{staticClass:"button is-success",attrs:{type:"submit"}},[t._v("\n              "+t._s(t.$t("main.confirmation"))+"\n            ")])])])])]):t._e(),s("div",{staticClass:"flexrow-item clear-selection-container"},[s("div",{staticClass:"clear-selection flexrow",on:{click:t.clearSelectedTasks}},[s("x-icon",{staticClass:"flexrow-item"}),s("span",{staticClass:"flexrow-item hide-small-screen"},[t._v("\n            "+t._s(t.$t("main.clear_selection"))+"\n          ")])],1)])]),s("div",{ref:"moreMenu",class:{"more-menu":!0,"is-hidden":t.isMoreMenuDisplayed}},[t.isCurrentViewAsset||t.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("assignation")}}},[t._v("\n        "+t._s(t.$t("menu.assign_tasks"))+"\n      ")]):t._e(),s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("change-status")}}},[t._v("\n        "+t._s(t.$t("menu.change_status"))+"\n      ")]),t.isCurrentViewAsset||t.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("priorities")}}},[t._v("\n        "+t._s(t.$t("menu.change_priority"))+"\n      ")]):t._e(),t.isCurrentViewTaskType?s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("estimations")}}},[t._v("\n        "+t._s(t.$t("menu.set_estimations"))+"\n      ")]):t._e(),!t.isCurrentViewAsset&&!t.isCurrentViewShot||t.isCurrentViewTaskType?t._e():s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("tasks")}}},[t._v("\n        "+t._s(t.$t("menu.create_tasks"))+"\n      ")]),t.isCurrentViewAsset||t.isCurrentViewShot?s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("delete-tasks")}}},[t._v("\n        "+t._s(t.$t("menu.delete_tasks"))+"\n      ")]):t._e(),t.isCurrentViewTaskType?t._e():s("div",{staticClass:"more-menu-item",on:{click:function(e){t.selectBar("custom-actions")}}},[t._v("\n        "+t._s(t.$t("menu.run_custom_action"))+"\n      ")])])]),s("div",{class:{"menu-mask":!0,"is-hidden":t.isMoreMenuDisplayed},on:{click:t.toggleMenu}})])},Bf=[],Uf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-autocomplete",{ref:"autocomplete",attrs:{items:t.items,"get-label":t.getAssignationLabel,"component-item":t.assignationItem,"min-len":1,"auto-select-one-item":!1,"input-attrs":{placeholder:this.$t("people.select_person")}},on:{"update-items":t.update,input:t.onChange},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})},zf=[],Hf=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{"no-cache":!0,person:t.item,size:30}}),s("span",{staticClass:"flexrow-item"},[t._v("\n    "+t._s(t.item.name)+"\n  ")])],1)},Gf=[],Wf={name:"assignation-item",components:{PeopleAvatar:Zl},props:{item:{required:!0},searchText:{required:!0}},computed:{nonHighilightedText:function(){return this.searchText===this.item.first_name?"&nbsp;"+this.item.name.substring(this.searchText.length):this.item.name.substring(this.searchText.length)}}},Kf=Wf,Qf=(s("620e"),Object(f["a"])(Kf,Hf,Gf,!1,null,"c09f3b40",null)),Yf=Qf.exports,Xf={name:"people-field",data:function(){return{assignationItem:Yf,items:[],item:{},searchText:""}},created:function(){this.items=this.people,this.item=this.value,this.index=uo(this.people)},mounted:function(){var t=this;this.items=this.people,this.$refs.autocomplete.$el.children[0].children[0].addEventListener("keyup",function(e){13===e.keyCode&&t.item&&t.$emit("enter"),t.searchText=t.$refs.autocomplete.$el.children[0].children[0].value,t.item||0!==t.searchText.length||(t.items=t.people)})},props:{value:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}}},computed:Object(l["a"])({},Object(d["c"])(["peopleIndex"])),methods:{getAssignationLabel:function(t){return t?t.name:""},update:function(t){if(t){var e=yo(this.index,[t]);this.items=e}else this.items=this.people},onChange:function(){this.$emit("input",this.item)},clear:function(){this.item=null}},watch:{item:function(){this.item||(this.items=this.people)},people:function(){this.items=null,this.items=this.people,this.index=uo(this.people)}}},Jf=Xf,Zf=(s("997c"),Object(f["a"])(Jf,Uf,zf,!1,null,null,null)),t_=Zf.exports,e_={name:"action-topbar",components:{ChevronDownIcon:Ic["c"],Combobox:vl,ComboboxStatus:Rp,MoreVerticalIcon:Ic["r"],PeopleField:t_,Spinner:v,ButtonHrefLink:qd,XIcon:Ic["D"]},data:function(){return{isAssignationLoading:!1,isChangeEstimationLoading:!1,isChangePriorityLoading:!1,isChangeStatusLoading:!1,isCreationLoading:!1,isDeletionLoading:!1,isMoreMenuDisplayed:!0,selectedBar:"assignation",person:null,taskStatusId:"",customActionUrl:"",selectedTaskIds:[],customActionOptions:[],estimation:0,priority:"0",currentTeam:[],priorityOptions:[{label:this.$t("tasks.priority.normal"),value:"0"},{label:this.$t("tasks.priority.high"),value:"1"},{label:this.$t("tasks.priority.very_high"),value:"2"},{label:this.$t("tasks.priority.emergency"),value:"3"}]}},computed:Object(l["a"])({},Object(d["c"])(["allCustomActionOptions","assetMap","assetCustomActionOptions","currentProduction","getPersonOptions","isCurrentUserManager","nbSelectedTasks","nbSelectedValidations","people","personMap","selectedTasks","shotCustomActionOptions","taskStatusForCurrentUser","user"]),{isHidden:function(){return 0===this.nbSelectedTasks&&0===this.nbSelectedValidations||!(this.isCurrentViewAsset||this.isCurrentViewTodos||this.isCurrentViewShot)||!this.isCurrentViewTodos&&!this.isCurrentUserManager},currentUrl:function(){return this.$route.path},currentHost:function(){return window.location.host},currentEntityType:function(){return this.isCurrentViewAsset?"asset":"shot"},defaultCustomActionUrl:function(){return this.customActionOptions.length>0?this.customActionOptions[0].value:""},isCurrentViewAsset:function(){return this.$route.path.indexOf("asset")>0&&!this.$route.params.asset_id},isCurrentViewShot:function(){return this.$route.path.indexOf("shot")>0&&!this.$route.params.shot_id},isCurrentViewTodos:function(){return this.$route.path.indexOf("todos")>0||this.$route.path.indexOf("people/")>0},isCurrentViewPersonTasks:function(){return this.$route.path.indexOf("todos")>0},isCurrentViewTaskType:function(){return this.$route.path.indexOf("task-type")>0},isList:function(){return this.isCurrentViewAsset||this.isCurrentViewShot},selectedPersonId:function(){return this.person?this.person.id:null},currentProductionTeam:function(){return this.currentProduction?this.currentProduction.team:[]},currentMenuLabel:function(){var t={assignation:"menu.assign_tasks",estimations:"menu.set_estimations","change-status":"menu.change_status",priorities:"menu.change_priority",tasks:"menu.create_tasks","delete-tasks":"menu.delete_tasks","custom-actions":"menu.run_custom_action"};return this.$t(t[this.selectedBar])},storagePrefix:function(){var t="todos-";return(this.isCurrentViewAsset||this.isCurrentViewShot)&&(t="entities-"),this.isCurrentViewTaskType&&(t="tasks-"),t}}),methods:Object(l["a"])({},Object(d["b"])(["assignSelectedTasks","changeSelectedEstimations","createSelectedTasks","deleteSelectedTasks","unassignSelectedTasks","changeSelectedTaskStatus","changeSelectedPriorities","clearSelectedTasks"]),{confirmAssign:function(){var t=this;this.selectedPersonId&&(this.isAssignationLoading=!0,this.assignSelectedTasks({personId:this.selectedPersonId,callback:function(){t.isAssignationLoading=!1}}))},confirmTaskStatusChange:function(){var t=this;this.isChangeStatusLoading=!0,this.taskStatusId||(this.taskStatusId=this.taskStatusForCurrentUser[0].id),this.changeSelectedTaskStatus({taskStatusId:this.taskStatusId,callback:function(){t.isChangeStatusLoading=!1}})},confirmPriorityChange:function(){var t=this;this.isChangePriorityLoading=!0,this.changeSelectedPriorities({priority:Number(this.priority),callback:function(){t.isChangePriorityLoading=!1}})},confirmEstimationChange:function(){var t=this;this.isChangeEstimationLoading=!0;var e=Math.floor(8*this.estimation*60);this.changeSelectedEstimations(e).then(function(){t.isChangeEstimationLoading=!1}).catch(function(e){t.isChangeEstimationLoading=!1,t.isChangeEstimationError=!0,console.error(e)})},confirmTaskCreation:function(){var t=this,e=this.$route.path.indexOf("shots")>0?"shots":"assets";this.isCreationLoading=!0,this.createSelectedTasks({type:e,projectId:this.currentProduction.id,callback:function(){t.isCreationLoading=!1}})},confirmTaskDeletion:function(){var t=this;this.isDeletionLoading=!0,this.deleteSelectedTasks().then(function(){t.isDeletionLoading=!1}).catch(function(t){console.error(t)})},clearAssignation:function(){var t=this;this.isAssignationLoading=!0,this.unassignSelectedTasks({callback:function(){t.isAssignationLoading=!1}})},selectBar:function(t){localStorage.setItem("".concat(this.storagePrefix,"-selected-bar"),t,{expires:"1M"}),this.selectedBar=t,this.toggleMenu()},toggleMenu:function(){this.isMoreMenuDisplayed=!this.isMoreMenuDisplayed},setCurrentTeam:function(){var t=this;return this.people.length>10&&this.currentProduction?this.currentTeam=la(this.currentProduction.team.map(function(e){return t.personMap[e]})):this.currentTeam=this.people,this.currentTeam}}),mounted:function(){this.customActionUrl=this.defaultCustomActionUrl,this.setCurrentTeam()},watch:{isHidden:function(){if(!this.isHidden){var t=this.storagePrefix,e=localStorage.getItem("".concat(t,"-selected-bar"));e?this.selectedBar=e:this.isCurrentViewAsset||this.isCurrentViewShot?this.selectedBar="assignation":this.selectedBar="change-status"}},nbSelectedTasks:function(){var t=this;if(this.selectedTaskIds=Ta()(this.selectedTasks),this.nbSelectedTasks>0){for(var e=!1,s=!1,i=Ta()(this.selectedTasks),n=0;n<i.length;n++){var a=i[n],o=this.selectedTasks[a];o.sequence_name?e=!0:s=!0}if(this.customActionOptions=e&&s?this.allCustomActionOptions:e?this.shotCustomActionOptions:this.assetCustomActionOptions,this.customActionOptions.length>0){var r=this.customActionOptions.findIndex(function(e){return e.url===t.customActionUrl})>=0;r||(this.customActionUrl=this.customActionOptions[0].value)}}},currentProduction:function(){this.setCurrentTeam()},currentProductionTeam:function(){this.setCurrentTeam()},people:function(){this.setCurrentTeam()},$route:function(){this.clearSelectedTasks()}}},s_=e_,i_=(s("6446"),Object(f["a"])(s_,Vf,Bf,!1,null,"4d5d9d48",null)),n_=i_.exports,a_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"navbar"},[i("aside",{class:{hidden:t.isSidebarHidden}},[i("div",[i("router-link",{staticClass:"home-link",attrs:{to:"/"},on:{click:function(e){t.toggleSidebar()}}},[i("div",{staticClass:"company-logo has-text-centered"},[i("img",{attrs:{src:s("ad6c")}}),i("h2",{staticClass:"subtitle sidebar-title"},[t._v("Kitsu")])])]),i("section",[t.isCurrentUserClient?t._e():i("div",[i("h2",[t._v(t._s(t.$t("main.user")))]),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"todos"}}},[t._v("\n             "+t._s(t.$t("tasks.my_tasks"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"open-productions"}}},[t._v("\n             "+t._s(t.$t("productions.open_productions"))+"\n           ")])],1)]),t.isCurrentUserAdmin?i("div",[i("h2",[t._v(t._s(t.$t("main.studio")))]),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"productions"}}},[t._v("\n           "+t._s(t.$t("productions.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"people"}}},[t._v("\n           "+t._s(t.$t("people.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"timesheets"}}},[t._v("\n           "+t._s(t.$t("timesheets.title"))+"\n           ")])],1)]):t._e(),t.isCurrentUserAdmin?i("div",[i("h2",[t._v(t._s(t.$t("main.admin")))]),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:"/task-types"}},[t._v("\n           "+t._s(t.$t("task_types.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{staticClass:"task-status-link",attrs:{to:"/task-status"}},[t._v("\n           "+t._s(t.$t("task_status.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:"/asset-types"}},[t._v("\n           "+t._s(t.$t("asset_types.title"))+"\n           ")])],1),i("p",{on:{click:function(e){t.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"custom-actions"}}},[t._v("\n           "+t._s(t.$t("custom_actions.title"))+"\n           ")])],1)]):t._e()])],1)]),i("div",{class:{"is-active":!t.isSidebarHidden},attrs:{id:"c-mask"},on:{click:function(e){t.toggleSidebar()}}})])},o_=[],r_={name:"sidebar",data:function(){return{}},computed:Object(l["a"])({},Object(d["c"])(["isSidebarHidden","isCurrentUserClient","isCurrentUserCGArtist","isCurrentUserManager","isCurrentUserAdmin"])),methods:Object(l["a"])({},Object(d["b"])(["toggleSidebar"]))},c_=r_,l_=(s("397c"),Object(f["a"])(c_,a_,o_,!1,null,"03360bfe",null)),d_=l_.exports,u_={name:"main-wrapper",components:{ActionTopbar:n_,Topbar:Rf,Sidebar:d_}},p_=u_,h_=(s("c266"),Object(f["a"])(p_,Lf,Df,!1,null,null,null)),m_=h_.exports,f_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"not-found page"},[s("h1",{staticClass:"title"},[t._v(t._s(t.$t("not_found.title")))]),s("p",[t._v("\n    "+t._s(t.$t("not_found.text"))+"\n  ")])])},__=[],v_={name:"not-found",computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]))},y_=v_,g_=Object(f["a"])(y_,f_,__,!1,null,"31ec7dd6",null),k_=g_.exports,b_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("page-title",{attrs:{text:t.$t("notifications.title")}}),t.loading.notifications||t.notifications&&0!==t.notifications.length?t._e():s("div",{staticClass:"empty-list has-text-centered"},[t._v("\n    "+t._s(t.$t("notifications.no_notifications"))+"\n  ")]),t.loading.notifications?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t._e(),t._l(t.notifications,function(e){return s("div",{key:e.id,class:{flexrow:!0,notification:!0,unread:!e.read}},[s("div",{staticClass:"flexrow-item"},[t.personMap[e.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.personMap[e.author_id]}}):t._e()],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",{staticClass:"notification-info"},[s("span",{staticClass:"date"},[t._v("\n          "+t._s(t.formatDate(e.created_at))+"\n        ")]),s("router-link",{staticClass:"person-name",attrs:{to:{name:"person",params:{person_id:e.author_id}}}},[t._v("\n          "+t._s(t.personName(e))+"\n        ")]),s("span",{staticClass:"comment-explaination"},[t._v("\n          "+t._s(t.$t("notifications.commented_on"))+"\n        ")]),s("router-link",{attrs:{to:t.entityPath(e)}},[t._v("\n          "+t._s(e.project_name)+" / "+t._s(e.full_entity_name)+"\n           \n        ")]),s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":t.buildTaskTypeFromNotification(e),"production-id":e.project_id}}),e.change?s("span",[t._v("\n          "+t._s(t.$t("notifications.and_change_status"))+"\n        ")]):t._e(),e.change?s("validation-tag",{staticClass:"validation-tag",attrs:{task:t.buildTaskFromNotification(e)}}):t._e(),e.preview_file_id?s("span",[t._v("\n          "+t._s(t.$t("notifications.with_preview"))+"\n        ")]):t._e(),e.preview_file_id?s("span",{staticClass:"thumbnail-picture-wrapper"},[s("entity-thumbnail",{attrs:{entity:{preview_file_id:e.preview_file_id},height:40}})],1):t._e()],1),s("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.compileMarkdown(e.comment_text))}})])])})],2)},T_=[],S_={name:"notification-page",components:{EntityThumbnail:ld,PageTitle:fd,PeopleAvatar:Zl,Spinner:v,TaskTypeName:$l,ValidationTag:Wl},data:function(){return{loading:{notifications:!1},errors:{notifications:!1}}},computed:Object(l["a"])({},Object(d["c"])(["notifications","taskTypeMap","taskStatusMap","personMap"])),methods:Object(l["a"])({},Object(d["b"])(["loadNotifications","markAllNotificationsAsRead"]),{entityPath:function(t){var e=this.getTaskType(t).for_shots?"shot":"asset",s={name:"task",params:{production_id:t.project_id,task_id:t.task_id,type:e}};return t.episode_id&&(s.name="episode-task",s.params.episode_id=t.episode_id),s},getTaskType:function(t){return this.taskTypeMap[t.task_type_id]},formatDate:function(t){var e=Ua.a.tz(t,"UTC");return t=Ua()(e.format()).fromNow(),t[0].toUpperCase()+t.slice(1)},compileMarkdown:function(t){return Hc()(t||"")},personName:function(t){var e=this.personMap[t.author_id];return e?e.full_name:""},buildTaskFromNotification:function(t){return{id:t.task_id,task_status_id:t.task_status_id,task_type_id:t.task_type_id,episode_id:t.episode_id}},buildTaskTypeFromNotification:function(t){return Object(l["a"])({},this.taskTypeMap[t.task_type_id],{episode_id:t.episode_id})}}),mounted:function(){var t=this;this.loading.notifications=!0,this.errors.notifications=!1,this.loadNotifications().then(function(){t.loading.notifications=!1}).catch(function(e){console.error(e),t.errors.notifications=!0})},socket:{events:{"preview-file:add-file":function(t){var e=t.comment_id,s=t.preview_file_id;this.$store.commit("NOTIFICATION_ADD_PREVIEW",{previewId:s,commentId:e})}}},beforeDestroy:function(){this.markAllNotificationsAsRead()},metaInfo:function(){return{title:"".concat(this.$t("notifications.title")," - Kitsu")}}},C_=S_,w_=(s("f2de"),Object(f["a"])(C_,b_,T_,!1,null,"40e911fa",null)),E_=w_.exports,P_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"open-productions page"},[t.isOpenProductionsLoading?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t.openProductions.length>0?s("div",[s("h1",{staticClass:"title has-text-centered"},[s("activity-icon"),t._v("\n      "+t._s(t.$t("productions.home.title"))+"\n    ")],1),s("div",{class:{"open-productions-list":!0,"is-grid":t.openProductions&&t.openProductions.length>4}},t._l(t.openProductions,function(e){return s("div",{key:e.id,staticClass:"open-production has-text-centered"},[s("router-link",{attrs:{to:t.getPath(e)}},[s("div",{staticClass:"avatar has-text-centered",style:{background:t.getAvatarColor(e)}},[e.has_avatar?s("img",{attrs:{src:t.getThumbnailPath(e)}}):s("span",[t._v("\n              "+t._s(t.generateAvatar(e))+"\n            ")])]),s("div",{staticClass:"production-name"},[t._v("\n            "+t._s(e.name)+"\n          ")])]),s("router-link",{staticClass:"secondary",attrs:{to:t.assetsPath(e)}},[t._v("\n          "+t._s(t.$t("assets.title"))+"\n        ")]),t._v("\n        -\n        "),s("router-link",{staticClass:"secondary",attrs:{to:t.shotsPath(e)}},[t._v("\n          "+t._s(t.$t("shots.title"))+"\n        ")])],1)})),s("div",{staticClass:"has-text-centered new-production-link"},[s("a",{on:{click:t.showNewModal}},[t._v("\n        "+t._s(t.$t("productions.home.create_new"))+"\n      ")])])]):s("div",{staticClass:"has-text-centered welcome"},[t._m(0),s("h1",{staticClass:"title has-text-centered"},[t._v("\n      "+t._s(t.$t("productions.home.welcome"))+"\n    ")]),t.isCurrentUserManager?s("div",[s("p",{staticClass:"has-text-centered info"},[t._v("\n        "+t._s(t.$t("productions.home.empty"))+"\n      ")]),s("p",{staticClass:"has-text-centered"},[s("button-simple",{staticClass:"level-item big-button",attrs:{text:t.$t("productions.home.create_new"),"is-responsive":!1},on:{click:t.showNewModal}})],1)]):t.isCurrentUserClient?s("div",[s("p",{staticClass:"has-text-centered"},[t._v("\n        "+t._s(t.$t("productions.home.no_prod_for_client"))+"\n      ")])]):s("div",[s("p",{staticClass:"has-text-centered"},[t._v("\n        "+t._s(t.$t("productions.home.no_task"))+"\n      ")])])]),s("edit-production-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editProduction.isLoading,"is-error":t.editProduction.isError},on:{confirm:t.confirmEditProduction,cancel:t.hideNewModal}})],1)},x_=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"kitsu-logo info"},[i("img",{attrs:{src:s("cb88")}})])}],O_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.productionToEdit&&t.productionToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("productions.edit_title"))+" "+t._s(t.productionToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("productions.new_production"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("productions.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t.productionToEdit&&t.productionToEdit.id?s("combobox",{attrs:{label:t.$t("productions.fields.status"),options:t.productionStatusOptions,localeKeyPrefix:"productions.status."},on:{enter:t.runConfirmation},model:{value:t.form.project_status_id,callback:function(e){t.$set(t.form,"project_status_id",e)},expression:"form.project_status_id"}}):t._e(),s("combobox",{attrs:{label:t.$t("productions.fields.type"),options:t.productionTypeOptions,localeKeyPrefix:"productions.type."},on:{enter:t.runConfirmation},model:{value:t.form.production_type,callback:function(e){t.$set(t.form,"production_type",e)},expression:"form.production_type"}}),t.productionToEdit&&t.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"fpsField",attrs:{label:t.$t("productions.fields.fps")},on:{enter:t.runConfirmation},model:{value:t.form.fps,callback:function(e){t.$set(t.form,"fps",e)},expression:"form.fps"}}):t._e(),t.productionToEdit&&t.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"ratioField",attrs:{label:t.$t("productions.fields.ratio")},on:{enter:t.runConfirmation},model:{value:t.form.ratio,callback:function(e){t.$set(t.form,"ratio",e)},expression:"form.ratio"}}):t._e(),t.productionToEdit&&t.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"resolutionField",attrs:{label:t.$t("productions.fields.resolution")},on:{enter:t.runConfirmation},model:{value:t.form.resolution,callback:function(e){t.$set(t.form,"resolution",e)},expression:"form.resolution"}}):t._e(),t.productionToEdit&&t.productionToEdit.id?s("div",[s("span",{staticClass:"label"},[t._v(t._s(t.$t("productions.picture")))]),s("file-upload",{ref:"fileField",attrs:{accept:".png"},on:{fileselected:t.onFileSelected}})],1):t._e()],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),t.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]):s("button",{staticClass:"button is-link",on:{click:function(e){t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n        "+t._s(t.$t("assets.edit_fail"))+"\n      ")]):t._e()])])])},A_=[],$_={name:"edit-production-modal",mixins:[Zc],components:{Combobox:vl,FileUpload:Yu,TextField:al},props:["text","active","cancelRoute","isLoading","isError","errorText","productionToEdit"],data:function(){var t={formData:null,productionTypeOptions:[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]};return this.productionToEdit&&this.productionToEdit.id?t.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"}:t.form={name:"",project_status_id:this.productionStatus?this.productionStatus[0].id:null,fps:"",ratio:"",resolution:"",production_type:"short"},t},created:function(){this.resetForm(),this.productionTypeOptions=[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]},mounted:function(){this.productionStatus.length>0&&(this.form.project_status_id=this.productionStatus[0].id)},computed:Object(l["a"])({},Object(d["c"])(["productions","productionStatus","productionStatusOptions"])),methods:Object(l["a"])({},Object(d["b"])([]),{runConfirmation:function(){this.$emit("confirm",this.form)},onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},resetForm:function(){var t=this;this.productionToEdit&&this.productionToEdit.id?(this.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"},this.form.project_status_id=null,this.$nextTick(function(){t.form.project_status_id=t.productionToEdit.project_status_id})):this.form={name:"",project_status_id:this.productionStatusOptions[0].value,fps:"",ratio:"",resolution:"",production_type:"short"}}}),watch:{productionToEdit:function(){this.resetForm()},active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.nameField.focus(),t.formData=null,t.$refs.fileField&&t.$refs.fileField.reset()},100)}}},L_=$_,D_=(s("f63a"),Object(f["a"])(L_,O_,A_,!1,null,"6c4a098b",null)),j_=D_.exports,I_={name:"open-productions",components:{ActivityIcon:Ic["a"],ButtonSimple:Vc,EditProductionModal:j_,Spinner:v},data:function(){return{modals:{isNewDisplayed:!1}}},computed:Object(l["a"])({},Object(d["c"])(["editProduction","isCurrentUserManager","isCurrentUserClient","isOpenProductionsLoading","lastProductionScreen","openProductions"])),methods:Object(l["a"])({},Object(d["b"])(["newProduction"]),{generateAvatar:function(t){var e=t.name.length>0?t.name[0]:"P";return e.toUpperCase()},getAvatarColor:function(t){return Va.fromString(t.name)},getPath:function(t){return this.sectionPath(t,this.lastProductionScreen)},assetsPath:function(t){return this.sectionPath(t,"assets")},shotsPath:function(t){return this.sectionPath(t,"shots")},sequencesPath:function(t){return this.sectionPath(t,"sequences")},sectionPath:function(t,e){var s={name:e,params:{production_id:t.id}};return"tvshow"===t.production_type&&(s.name="episode-".concat(e),s.params.episode_id=t.first_episode_id),s},getThumbnailPath:function(t){return"/api/pictures/thumbnails/projects/".concat(t.id,".png")},confirmEditProduction:function(t){var e=this;this.newProduction({data:t,callback:function(t,s){t||(e.modals.isNewDisplayed=!1)}})},showNewModal:function(){this.modals.isNewDisplayed=!0},hideNewModal:function(){this.modals.isNewDisplayed=!1}}),watch:{},metaInfo:function(){return{title:"".concat(this.$t("productions.home.title")," - Kitsu")}}},M_=I_,F_=(s("f59b"),Object(f["a"])(M_,P_,x_,!1,null,"576b55d7",null)),q_=F_.exports,N_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"people page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{staticClass:"flexrow-item",attrs:{text:t.$t("people.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[t.isCurrentUserAdmin?s("button-link",{staticClass:"level-item",attrs:{title:t.$t("main.csv.import_file"),"is-responsive":!0,icon:"upload",path:"/people/import"}}):t._e(),s("button-href-link",{staticClass:"level-item",attrs:{title:t.$t("main.csv.export_file"),icon:"download",path:"/api/export/csv/persons.csv"}}),t.isCurrentUserAdmin?s("button-link",{staticClass:"level-item",attrs:{text:t.$t("people.new_person"),"is-responsive":!0,icon:"plus",path:"/people/new"}}):t._e()],1)])]),s("search-field",{ref:"people-search-field",staticClass:"search",attrs:{"can-save":!1,placeholder:"ex: John Doe"},on:{change:t.onSearchChange}}),s("people-list",{attrs:{entries:t.displayedPeople,"is-loading":t.isPeopleLoading,"is-error":t.isPeopleLoadingError}}),s("import-modal",{attrs:{active:t.isImportPeopleModalShown,"is-loading":t.isImportPeopleLoading,"is-error":t.isImportPeopleLoadingError,"cancel-route":"/people","form-data":t.personCsvFormData,columns:t.csvColumns},on:{fileselected:t.selectFile,confirm:t.uploadImportFile}}),s("edit-person-modal",{attrs:{active:t.isEditModalShown,"is-loading":t.isEditLoading,"is-error":t.isEditLoadingError,"cancel-route":"/people"},on:{confirm:t.confirmEditPeople}}),s("delete-modal",{attrs:{active:t.isDeleteModalShown,"is-loading":t.isDeleteLoading,"is-error":t.isDeleteLoadingError,"cancel-route":"/people",text:t.deleteText,"error-text":t.$t("people.delete_error")},on:{confirm:t.confirmDeletePeople}})],1)},R_=[],V_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("people.list.name"))+"\n          ")]),s("th",{staticClass:"email"},[t._v("\n            "+t._s(t.$t("people.list.email"))+"\n          ")]),s("th",{staticClass:"phone"},[t._v("\n            "+t._s(t.$t("people.list.phone"))+"\n          ")]),s("th",{staticClass:"role"},[t._v("\n            "+t._s(t.$t("people.list.role"))+"\n          ")]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[t.activePeople.length>0?s("table",{staticClass:"table splitted-table"},[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[t._v("\n          "+t._s(t.$t("people.active"))+"\n        ")])]),s("tbody",t._l(t.activePeople,function(e){return s("tr",{key:e.id},[s("people-name-cell",{staticClass:"name",attrs:{entry:e}}),s("td",{staticClass:"email"},[t._v(t._s(e.email))]),s("td",{staticClass:"phone"},[t._v(t._s(e.phone))]),s("td",{staticClass:"role"},[t._v(t._s(t.$t("people.role."+e.role)))]),t.isCurrentUserAdmin?s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-person",params:{person_id:e.id}},"delete-route":{name:"delete-person",params:{person_id:e.id}}}}):s("td",{staticClass:"actions"})],1)}))]):t._e(),t.unactivePeople.length>0?s("table",{staticClass:"table splitted-table"},[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[t._v("\n          "+t._s(t.$t("people.unactive"))+"\n        ")])]),s("tbody",t._l(t.unactivePeople,function(e){return s("tr",{key:e.id},[s("people-name-cell",{staticClass:"name",attrs:{entry:e}}),s("td",{staticClass:"email"},[t._v(t._s(e.email))]),s("td",{staticClass:"phone"},[t._v(t._s(e.phone))]),s("td",{staticClass:"role"},[t._v(t._s(t.$t("people.role."+e.role)))]),s("td",{staticClass:"active"},[t._v(t._s(e.active?t.$t("main.yes"):t.$t("main.no")))]),t.isCurrentUserAdmin?s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-person",params:{person_id:e.id}},"delete-route":{name:"delete-person",params:{person_id:e.id}}}}):s("td",{staticClass:"actions"})],1)}))]):t._e()]),t.isLoading?t._e():s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("people.persons",t.entries.length))+"\n  ")])],1)},B_=[],U_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("div",{staticClass:"people-name"},[s("people-avatar",{staticClass:"avatar",attrs:{person:t.entry}}),s("people-name",{staticClass:"people-name",attrs:{person:t.entry}})],1)])},z_=[],H_={name:"people-name-cell",components:{PeopleName:nh,PeopleAvatar:Zl},props:["entry"],computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]))},G_=H_,W_=(s("a0c1"),Object(f["a"])(G_,U_,z_,!1,null,"0ca2d39f",null)),K_=W_.exports,Q_={name:"people-list",components:{PeopleNameCell:K_,RowActions:Yd,TableInfo:Vl},props:["entries","isLoading","isError","onEditClicked","onDeleteClicked"],computed:Object(l["a"])({},Object(d["c"])(["isCurrentUserAdmin"]),{activePeople:function(){return this.entries.filter(function(t){return t.active})},unactivePeople:function(){return this.entries.filter(function(t){return!t.active})}}),methods:Object(l["a"])({},Object(d["b"])([]),{taskColor:function(t){return t<1||t>4?"red":""},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},Y_=Q_,X_=(s("5ce8"),Object(f["a"])(Y_,V_,B_,!1,null,"01f26647",null)),J_=X_.exports,Z_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[void 0!==t.personToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("people.edit_title"))+" "+t._s(t.personName)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("people.new_person"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{ref:"name-field",attrs:{label:t.$t("people.fields.first_name"),disabled:t.isLdap},on:{enter:function(e){t.confirmClicked()}},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}}),s("text-field",{attrs:{label:t.$t("people.fields.last_name"),disabled:t.isLdap},on:{enter:function(e){t.confirmClicked()}},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}}),s("text-field",{attrs:{label:t.$t("people.fields.email"),disabled:t.isLdap},on:{enter:function(e){t.confirmClicked()}},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),s("text-field",{attrs:{label:t.$t("people.fields.phone")},on:{enter:function(e){t.confirmClicked()}},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),s("combobox",{attrs:{label:t.$t("people.fields.role"),options:t.roleOptions,localeKeyPrefix:"people.role."},on:{enter:function(e){t.confirmClicked()}},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}}),s("combobox",{attrs:{label:t.$t("people.fields.active"),options:t.activeOptions},on:{enter:function(e){t.confirmClicked()}},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},attrs:{disabled:!t.isValidEmail},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},tv=[],ev={name:"edit-modal",props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText"],data:function(){return{isValidEmail:!1,form:{first_name:"",last_name:"",email:"",phone:"",role:"user",active:"true"},roleOptions:[{label:"user",value:"user"},{label:"manager",value:"manager"},{label:"admin",value:"admin"},{label:"client",value:"client"}],activeOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}]}},components:{TextField:al,Combobox:vl},computed:Object(l["a"])({},Object(d["c"])(["isLdap","personToEdit","people"]),{personName:function(){return void 0!==this.personToEdit?this.personToEdit.first_name+" "+this.personToEdit.last_name:""}}),methods:Object(l["a"])({},Object(d["b"])([]),{confirmClicked:function(){this.form.active="true"===this.form.active||!0===this.form.active,this.form.email&&this.$emit("confirm",this.form)},resetForm:function(){this.personToEdit&&(this.form={first_name:this.personToEdit.first_name,last_name:this.personToEdit.last_name,phone:this.personToEdit.phone,email:this.personToEdit.email,role:this.personToEdit.role,active:!this.personToEdit.id||this.personToEdit.active?"true":"false"}),this.checkEmailValidity()},checkEmailValidity:function(){var t=this,e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s=this.people.some(function(e){return e.email===t.form.email&&(!t.personToEdit||t.personToEdit.email!==e.email)});this.isValidEmail=this.form.email&&e.test(this.form.email)&&!s}}),watch:{personToEdit:function(){this.resetForm()},active:function(){var t=this;this.active&&(this.resetForm(),setTimeout(function(){t.$refs["name-field"].focus()},100))},"form.email":function(){this.checkEmailValidity()}}},sv=ev,iv=(s("0019"),Object(f["a"])(sv,Z_,tv,!1,null,"6f9835d8",null)),nv=iv.exports,av={name:"people",components:{PeopleList:J_,DeleteModal:Bu,EditPersonModal:nv,ImportModal:tp,ButtonLink:zd,ButtonHrefLink:qd,PageTitle:fd,SearchField:pp},data:function(){return{csvColumns:["First Name","Last Name","Email","Phone"]}},created:function(){var t=this;this.loadPeople(function(){t.handleModalsDisplay()})},watch:{$route:function(t,e){this.handleModalsDisplay()}},computed:Object(l["a"])({},Object(d["c"])(["displayedPeople","isPeopleLoading","isPeopleLoadingError","isImportPeopleModalShown","isImportPeopleLoading","isImportPeopleLoadingError","isEditModalShown","isEditLoading","isEditLoadingError","isDeleteModalShown","isDeleteLoading","isDeleteLoadingError","isImportModalShown","isImportLoading","isImportLoadingError","personToDelete","personCsvFormData","personToEdit","isCurrentUserAdmin"]),{deleteText:function(){var t=this.personToDelete;if(void 0!==t){var e="".concat(t.first_name," ").concat(t.last_name);return this.$t("people.delete_text",{personName:e})}return""}}),methods:Object(l["a"])({},Object(d["b"])(["loadPeople","peopleSearchChange"]),{uploadImportFile:function(){var t=this;this.$store.dispatch("uploadPersonFile",function(e){e||(t.$store.dispatch("loadPeople"),t.$router.push("/people"))})},addPersonFilter:function(t){},removePersonFilter:function(t){},confirmEditPeople:function(t){var e=this,s="editPeople";void 0===this.personToEdit.id&&(s="newPeople"),this.$store.dispatch(s,{data:t,callback:function(t){t||e.$router.push("/people")}})},confirmDeletePeople:function(){var t=this;this.$store.dispatch("deletePeople",function(e){e||t.$router.push("/people")})},selectFile:function(t){this.$store.commit("PERSON_CSV_FILE_SELECTED",t)},showImportModalIfNeeded:function(t){t.indexOf("import")>0?this.$store.dispatch("showPersonImportModal"):this.$store.dispatch("hidePersonImportModal")},showDeleteModalIfNeeded:function(t,e){t.indexOf("delete")>0?this.$store.dispatch("showPersonDeleteModal",e):this.$store.dispatch("hidePersonDeleteModal",e)},showEditModalIfNeeded:function(t,e){t.indexOf("new")>0?this.$store.dispatch("showPersonEditModal"):t.indexOf("edit")>0?this.$store.dispatch("showPersonEditModal",e):this.$store.dispatch("hidePersonEditModal",e)},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.person_id;this.showDeleteModalIfNeeded(t,e),this.showEditModalIfNeeded(t,e),this.showImportModalIfNeeded(t,e)},onSearchChange:function(){this.peopleSearchChange(this.$refs["people-search-field"].getValue())}}),metaInfo:function(){return{title:"".concat(this.$t("people.title")," - Kitsu")}}},ov=av,rv=(s("5a08"),Object(f["a"])(ov,N_,R_,!1,null,"8947661c",null)),cv=rv.exports,lv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"person page"},[s("div",{staticClass:"flexrow page-header"},[t.person?s("div",{staticClass:"flexrow-item"},[s("people-avatar",{attrs:{person:t.person,size:80,"font-size":30,"is-link":!1}})],1):t._e(),s("div",{staticClass:"flexrow-item"},[s("page-title",{attrs:{text:t.person?t.person.name:""}})],1)]),s("div",{staticClass:"task-tabs tabs"},[t.person?s("ul",[s("li",{class:{"is-active":t.isActiveTab("todos")}},[s("router-link",{attrs:{to:{name:"person",params:{person_id:t.person.id}}}},[t._v("\n              "+t._s(t.$t("tasks.current"))+"\n            ")])],1),s("li",{class:{"is-active":t.isActiveTab("done")},on:{click:function(e){t.selectTab("done")}}},[s("router-link",{attrs:{to:{name:"person-tab",params:{tab:"done",person_id:t.person.id}}}},[t._v("\n              "+t._s(t.$t("tasks.done"))+" ("+t._s(t.displayedPersonDoneTasks.length)+")\n            ")])],1),t.isCurrentUserManager?s("li",{class:{"is-active":t.isActiveTab("timesheets")},on:{click:function(e){t.selectTab("timesheet")}}},[s("router-link",{attrs:{to:{name:"person-tab",params:{tab:"timesheets",person_id:t.person.id}}}},[t._v("\n              "+t._s(t.$t("timesheets.title"))+"\n            ")])],1):t._e()]):t._e()]),t.isActiveTab("done")?t._e():s("search-field",{ref:"person-tasks-search-field",class:{"search-field":!0},attrs:{"can-save":!0},on:{change:t.onSearchChange,save:t.saveSearchQuery}}),t.isActiveTab("todos")||t.isActiveTab("timesheets")?s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:t.personTaskSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1):t._e(),t.isActiveTab("todos")?s("todos-list",{ref:"task-list",attrs:{entries:t.displayedPersonTasks,"is-loading":t.isTasksLoading,"is-error":t.isTasksLoadingError,"selection-grid":t.personTaskSelectionGrid},on:{scroll:t.setPersonTasksScrollPosition}}):t._e(),t.isActiveTab("done")?s("todos-list",{ref:"done-list",attrs:{entries:t.displayedPersonDoneTasks,"is-loading":t.isTasksLoading,"is-error":t.isTasksLoadingError,done:!0,selectionGrid:t.personTaskSelectionGrid}}):t._e(),t.isActiveTab("timesheets")?s("timesheet-list",{attrs:{tasks:t.loggablePersonTasks,"done-tasks":t.loggableDoneTasks,"is-loading":t.isTasksLoading,"is-error":t.isTasksLoadingError,"time-spent-map":t.personTimeSpentMap,"time-spent-total":t.personTimeSpentTotal,"hide-done":t.personTasksSearchText.length>0},on:{"date-changed":t.onDateChanged,"time-spent-change":t.onTimeSpentChange}}):t._e()],1)]),1===t.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(t.selectedTasks)[0]}})],1):t._e()])},dv=[],uv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-timesheet data-list"},[s("div",{staticClass:"flexrow timesheet-header"},[s("div",{staticClass:"flexrow-item current-date"},[s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-field input",language:t.locale,"disabled-dates":t.disabledDates,"monday-first":!0,format:"d MMMM yyyy"},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1),s("div",{staticClass:"flexrow time-spent-total"},[t._v("\n    -  \n    "+t._s(t.timeSpentTotal)+" "+t._s(t.$t("timesheets.hours"))+"\n    ")])]),s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[t._v("\n            "+t._s(t.$t("tasks.fields.production"))+"\n          ")]),s("th",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("tasks.fields.entity"))+"\n          ")]),s("th",{staticClass:"time-spent"},[t._v("\n            "+t._s(t.$t("timesheets.time_spents"))+"\n          ")])])])])]),t.tasks.length>0&&!t.isLoading?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.tasks,function(e,i){return s("tr",{key:e.id+"-"+i},[s("production-name-cell",{staticClass:"production",attrs:{entry:t.productionMap[e.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":e.project_id,entry:t.taskTypeMap[e.task_type_id]}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:t.entityPath(e)}},[t._v("\n              "+t._s(e.full_entity_name)+"\n            ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:t.timeSpentMap[e.id]?t.timeSpentMap[e.id].duration/60:0,"task-id":e.id},on:{change:t.onSliderChange}})],1)}))]),t.hideDone?t._e():s("page-subtitle",{attrs:{text:t.$t("timesheets.done_tasks")}}),t.isLoading||t.hideDone?t._e():s("table",{staticClass:"table"},[s("tbody",t._l(t.doneTasks,function(e,i){return s("tr",{key:e+"-"+i},[s("production-name-cell",{staticClass:"production",attrs:{entry:t.productionMap[e.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":e.project_id,entry:{id:e.task_type_id,name:e.task_type_name,color:e.task_type_color}}}),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:e.entity_path}},[t._v("\n             "+t._s(e.full_entity_name)+"\n           ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:t.timeSpentMap[e.id]?t.timeSpentMap[e.id].duration/60:0,"task-id":e.id},on:{change:t.onSliderChange}})],1)}))])],1):t._e(),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isLoading?t._e():s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.tasks.length)+" "+t._s(t.$tc("tasks.tasks",t.tasks.length))+"\n  ")])],1)},pv=[],hv=s("fa33"),mv=s("2430"),fv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"production-name"},[s("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltipOptions,expression:"tooltipOptions"}],staticClass:"flexrow"},[t.noLink?s("div",[t.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:t.getAvatarColor(t.entry),width:t.size+"px",height:t.size+"px","font-size":t.size-15+"px","line-height":t.size+"px"}},[t.entry.has_avatar?s("span",[s("img",{attrs:{src:t.getThumbnailPath(t.entry)}})]):s("span",[t._v("\n          "+t._s(t.generateAvatar(t.entry))+"\n        ")])]):t._e(),t.onlyAvatar?t._e():s("span",{staticClass:"flexrow-item"},[t._v("\n        "+t._s(t.entry.name)+"\n      ")])]):s("router-link",{attrs:{to:t.productionRoute}},[t.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:t.getAvatarColor(t.entry),width:t.size+"px",height:t.size+"px","font-size":t.size-15+"px","line-height":t.size+"px"}},[t.entry.has_avatar?s("span",[s("img",{attrs:{src:t.getThumbnailPath(t.entry)}})]):s("span",[t._v("\n          "+t._s(t.generateAvatar(t.entry))+"\n        ")])]):t._e(),t.onlyAvatar?t._e():s("span",{staticClass:"flexrow-item"},[t._v("\n        "+t._s(t.entry.name)+"\n      ")])])],1)])},_v=[],vv={uname:"production-name-cell",props:{entry:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String},isTooltip:{default:!1,type:Boolean},noLink:{default:!1,type:Boolean}},computed:Object(l["a"])({},Object(d["c"])([]),{productionRoute:function(){var t={name:this.lastProductionScreen,params:{production_id:this.entry.id}};return this.entry.first_episode_id&&(t.name="episode-".concat(this.lastProductionScreen),t.params.episode_id=this.entry.first_episode_id),t},productionInfo:function(){var t=this.entry.fps,e=this.entry.ratio,s=this.entry.resolution,i=[];return t&&i.push("".concat(this.$t("productions.fields.fps"),": ").concat(t)),e&&i.push("".concat(this.$t("productions.fields.ratio"),": ").concat(e)),s&&i.push("".concat(this.$t("productions.fields.resolution"),": ").concat(s)),i.length>0&&this.isTooltip?i.join("<br>"):""},tooltipOptions:function(){return{content:this.productionInfo,delay:{hide:5e3}}}}),methods:Object(l["a"])({},Object(d["b"])([]),{generateAvatar:function(t){var e=t.name.length>0?t.name[0]:"P";return e.toUpperCase()},getAvatarColor:function(t){return Va.fromString(t.name)},getThumbnailPath:function(t){return"/api/pictures/thumbnails/projects/".concat(t.id,".png")}})},yv=vv,gv=(s("5d80"),Object(f["a"])(yv,fv,_v,!1,null,"53bb0f38",null)),kv=gv.exports,bv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"value flexrow-item"},[t._v("\n      "+t._s(t.value)+"\n    ")]),s("vue-slider",t._b({ref:"slider",staticClass:"flexrow-item slider",model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"vue-slider",t.options,!1)),s("button",{staticClass:"button flexrow-item",on:{click:function(e){t.setValue(1)}}},[t._v("1")]),s("button",{staticClass:"button flexrow-item",on:{click:function(e){t.setValue(4)}}},[t._v("4")]),s("button",{staticClass:"button flexrow-item",on:{click:function(e){t.setValue(8)}}},[t._v("8")])],1)])},Tv=[],Sv=s("6f79"),Cv=s.n(Sv),wv={name:"time-slider-cell",data:function(){return{value:this.duration,options:{show:!0,width:400,min:0,max:10,interval:.5,lazy:!0,piecewise:!0,tooltip:"hover",tooltipDir:"bottom",tooltipStyle:{"background-color":"#FFFFFF",color:"$grey-strong666","z-index":2e3},processStyle:{"background-color":"#8F91EB"}}}},components:{VueSlider:Cv.a},props:{"task-id":{type:String,default:""},duration:{type:Number,default:0}},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]),{setValue:function(t){this.value=t}}),watch:{value:function(){this.$emit("change",{taskId:this.taskId,duration:this.value})}}},Ev=wv,Pv=(s("ccbd"),Object(f["a"])(Ev,bv,Tv,!1,null,"e5a06828",null)),xv=Pv.exports,Ov={name:"timesheet-list",components:{Datepicker:hv["a"],EntityThumbnail:ld,ProductionNameCell:kv,PageSubtitle:bd,TableInfo:Vl,TaskTypeName:Il,TimeSliderCell:xv},data:function(){return{selectedDate:Ua()().toDate(),disabledDates:{from:Ua()().toDate()}}},props:{tasks:{default:function(){return[]},type:Array},doneTasks:{default:function(){return[]},type:Array},isLoading:{default:!1,type:Boolean},isError:{default:!1,type:Boolean},done:{default:!1,type:Boolean},timeSpentMap:{default:function(){},type:Object},timeSpentTotal:{default:0,type:Number},hideDone:{default:!1,type:Boolean}},computed:Object(l["a"])({},Object(d["c"])(["taskTypeMap","nbSelectedTasks","productionMap","user"]),{locale:function(){return"fr_FR"===this.user.locale?mv["b"]:mv["a"]}}),methods:Object(l["a"])({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},currentDate:function(){return Ua()().format("LL")},onSliderChange:function(t){this.$emit("time-spent-change",t)},entityPath:function(t){var e=t.sequence_name?"shot":"asset",s={name:e,params:{production_id:t.project_id}};return"asset"===e?s.params.asset_id=t.entity_id:s.params.shot_id=t.entity_id,t.episode_id&&(s.name="episode-".concat(e),s.params.episode_id=t.episode_id),s}}),watch:{selectedDate:function(){this.$emit("date-changed",this.selectedDate)}}},Av=Ov,$v=(s("8efd"),Object(f["a"])(Av,uv,pv,!1,null,"de3eb0da",null)),Lv=$v.exports,Dv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"production"},[t._v("\n            "+t._s(t.$t("tasks.fields.production"))+"\n          ")]),s("th",{ref:"th-type",staticClass:"type"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_type"))+"\n          ")]),s("th",{staticClass:"thumbnail"}),s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("tasks.fields.entity"))+"\n          ")]),s("th",{staticClass:"description"},[t._v("\n            "+t._s(t.$t("assets.fields.description"))+"\n          ")]),s("th",{staticClass:"estimation"},[t._v("\n            "+t._s(t.$t("tasks.fields.estimation").substring(0,3))+".\n          ")]),s("th",{staticClass:"status"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_status"))+"\n          ")]),t.done?s("th",{staticClass:"end-date"},[t._v("\n            "+t._s(t.$t("tasks.fields.end_date"))+"\n          ")]):s("th",{staticClass:"last-comment"},[t._v("\n            "+t._s(t.$t("tasks.fields.last_comment"))+"\n          ")])])])])]),t.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},t._l(t.entries,function(e,i){return s("tr",{key:e+"-"+i},[s("production-name-cell",{staticClass:"production",attrs:{"is-tooltip":!0,entry:t.productionMap[e.project_id],"only-avatar":!0}}),s("task-type-name",{staticClass:"type",attrs:{"production-id":e.project_id,entry:t.getTaskType(e)}}),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{"empty-width":60,"empty-height":40,entity:{preview_file_id:e.entity_preview_file_id}}})],1),s("td",{staticClass:"name"},[s("router-link",{attrs:{to:t.entityPath(e)}},[t._v("\n              "+t._s(e.full_entity_name)+"\n            ")])],1),s("description-cell",{staticClass:"description",attrs:{entry:{description:e.entity_description}}}),s("td",{staticClass:"estimation"},[t._v("\n            "+t._s(t.formatDuration(e.estimation))+"\n          ")]),s("validation-cell",{ref:"validation-"+i+"-0",refInFor:!0,staticClass:"status unselectable",attrs:{"task-test":e,"is-border":!1,"is-assignees":!1,selectable:!t.done,selected:!(!t.selectionGrid||!t.selectionGrid[i])&&t.selectionGrid[i][0],rowX:i,columnY:0,column:e.taskStatus},on:{select:t.onTaskSelected,unselect:t.onTaskUnselected}}),t.done?s("td",{staticClass:"end-date"},[t._v("\n            "+t._s(t.formatDate(e.end_date))+"\n          ")]):s("last-comment-cell",{staticClass:"last-comment",attrs:{task:e}})],1)}))])]):t._e(),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),0!==t.entries.length||t.isLoading?t._e():s("p",{staticClass:"has-text-centered empty-list"},[t._v("\n    "+t._s(t.$t("people.no_task_assigned"))+"\n  ")]),t.entries.length&&!t.isLoading?s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("tasks.tasks",t.entries.length))+"\n  ")]):t._e()],1)},jv=[],Iv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",[s("div",{staticClass:"flexrow"},[t.task.last_comment.person?s("people-avatar",{staticClass:"flexrow-item avatar-wrapper",attrs:{size:25,"font-size":14,person:t.task.last_comment.person}}):s("span",{staticClass:"no-avatar"},[t._v("\n       \n    ")]),t.commentText&&t.commentText.length>0?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.tooltipOptions,expression:"tooltipOptions"}],staticClass:"flexrow-item last-comment pointer",domProps:{innerHTML:t._s(t.compileMarkdown(t.commentText))},on:{click:t.onClick}}):t.task.last_comment.person?s("span",{staticClass:"flexrow-item last-comment no-comment"},[t._v("\n      "+t._s(t.$t("main.empty_comment"))+"\n    ")]):t._e()],1)])},Mv=[],Fv={name:"last-comment-cell",components:{PeopleAvatar:Zl},data:function(){return{isOpen:!1,timeout:null}},props:["task"],computed:Object(l["a"])({},Object(d["c"])([]),{commentText:function(){var t=this.task.last_comment.text,e=140,s=t||"";return void 0!==t&&t.length>e&&(s=t.slice(0,e)+"..."),s},tooltipOptions:function(){return{content:this.compileMarkdown(this.task.last_comment.text),show:this.isOpen,trigger:"manual",delay:{hide:5e3}}}}),methods:Object(l["a"])({},Object(d["b"])([]),{compileMarkdown:function(t){return Hc()(t||"")},onClick:function(){var t=this;this.isOpen=!this.isOpen,this.isOpen?this.timeout=setTimeout(function(){t.isOpen=!1},3e3):clearTimeout(this.timeout)}})},qv=Fv,Nv=(s("69ee"),Object(f["a"])(qv,Iv,Mv,!1,null,"f21d26a0",null)),Rv=Nv.exports,Vv={name:"todos-list",mixins:[$d,Ld],components:{EntityThumbnail:ld,DescriptionCell:Yc,LastCommentCell:Rv,ProductionNameCell:kv,TableInfo:Vl,TaskTypeName:Il,ValidationCell:mu,ValidationTag:Wl},props:["done","entries","isLoading","isError","selectionGrid"],mounted:function(){this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Object(l["a"])({},Object(d["c"])(["nbSelectedTasks","taskTypeMap","productionMap"])),methods:Object(l["a"])({},Object(d["b"])([]),{setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},formatDate:function(t){return t?Ua()(t).fromNow():""},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop)},onTaskSelected:function(t){var e=this;if(t.isShiftKey){if(this.lastSelection){var s=this.lastSelection.x,i=t.x;t.x<this.lastSelection.x&&(s=t.x,i=this.lastSelection.x);for(var n=s;n<=i;n++){var a="validation-"+n+"-0",o=this.$refs[a][0];this.selectionGrid[n][0]||o.select({ctrlKey:!0,isUserClick:!1})}}}else t.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(this.$store.commit("ADD_SELECTED_TASK",t),!t.isShiftKey&&t.isUserClick){var r=t.x,c=0;this.lastSelection={x:r,y:c};var l="validation-"+r+"-"+c,d=this.$refs[l][0];this.$nextTick(function(){e.scrollToValidationCell(d)})}},onTaskUnselected:function(t){t.isCtrlKey?this.$store.commit("REMOVE_SELECTED_TASK",t):1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",t):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",t))},getTaskType:function(t){var e=this.taskTypeMap[t.task_type_id],s=this.productionMap[t.project_id];return e.episode_id=t.episode_id,s&&"tvshow"===s.production_type&&!t.episode_id&&(e.episode_id=s.first_episode_id),e},entityPath:function(t){var e=t.sequence_name?"shot":"asset",s={name:e,params:{production_id:t.project_id}};"asset"===e?s.params.asset_id=t.entity_id:s.params.shot_id=t.entity_id;var i=this.productionMap[t.project_id],n=t.episode_id;return i&&"tvshow"===i.production_type&&!n&&(n=i.first_episode_id),n&&(s.name="episode-".concat(e),s.params.episode_id=n),s},onKeyDown:function(t){var e=this.lastSelection?this.lastSelection:{x:0,y:0},s=e.x,i=e.y,n=null;t.ctrlKey&&(37===t.keyCode?n=this.select(s,i-1):38===t.keyCode?n=this.select(s-1,i):39===t.keyCode?n=this.select(s,i+1):40===t.keyCode&&(n=this.select(s+1,i)),this.scrollToValidationCell(n))},scrollToValidationCell:function(t){if(t){var e=20,s=t.$el.getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),n=s.bottom>i.bottom-e,a=s.top<i.top+e,o=s.right>i.right-e,r=s.left<i.left+e;if(n){var c=s.bottom-i.bottom+e;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var l=i.top-s.top+e;this.setScrollPosition(this.$refs.body.scrollTop-l)}if(o){var d=s.right-i.right+e;this.setScrollLeftPosition(this.$refs.body.scrollLeft+d)}else if(r){var u=i.left-s.left+e;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}},select:function(t,e){var s="validation-"+t+"-"+e,i=this.$refs[s];return i&&i[0].$el.click(),i?i[0]:0},resizeHeaders:function(){var t=this.$refs["body-tbody"],e=t&&t.children;if(e){var s=t.children[0].children[1].offsetWidth;this.$refs["th-type"].style["min-width"]="".concat(s,"px")}}})},Bv=Vv,Uv=(s("f1cb"),Object(f["a"])(Bv,Dv,jv,!1,null,"1dbdd1f0",null)),zv=Uv.exports,Hv={name:"person",components:{PageTitle:fd,PageSubtitle:bd,PeopleAvatar:Zl,SearchField:pp,SearchQueryList:yp,TaskInfo:qh,TodosList:zv,TimesheetList:Lv},data:function(){return{activeTab:"todos",isTasksLoading:!1,isTasksLoadingError:!1,person:null,selectedDate:Ua()().format("YYYY-MM-DD")}},mounted:function(){var t=this;this.updateActiveTab(),this.personTasksSearchText.length>0&&this.searchField.setValue(this.personTasksSearchText),setTimeout(function(){t.searchField&&t.searchField.focus()},100),this.loadPerson(this.$route.params.person_id)},computed:Object(l["a"])({},Object(d["c"])(["displayedPersonTasks","displayedPersonDoneTasks","isCurrentUserManager","nbSelectedTasks","personMap","personTasksScrollPosition","personTasksSearchText","personTaskSearchQueries","personTaskSelectionGrid","personTimeSpentMap","personTimeSpentTotal","selectedTasks","taskTypeMap"]),{loggablePersonTasks:function(){var t=this;return this.displayedPersonTasks.filter(function(e){return t.taskTypeMap[e.task_type_id].allow_timelog})},loggableDoneTasks:function(){var t=this;return this.displayedPersonDoneTasks.filter(function(e){return t.taskTypeMap[e.task_type_id].allow_timelog})},searchField:function(){return this.$refs["person-tasks-search-field"]},taskList:function(){return this.$refs["task-list"]},haveDoneList:function(){return this.$refs["done-list"]}}),methods:Object(l["a"])({},Object(d["b"])(["loadPersonTasks","setPersonTasksSearch","savePersonTasksSearch","removePersonTasksSearch","setPersonTasksScrollPosition","setTimeSpent"]),{isActiveTab:function(t){return this.activeTab===t},selectTab:function(t){var e=this;this.activeTab=t,this.isActiveTab("todos")&&setTimeout(function(){e.searchField&&e.searchField.focus()},100)},onSearchChange:function(t){this.setPersonTasksSearch(t)},loadPerson:function(t){var e=this;this.person=this.personMap[t],this.isTasksLoading=!0,this.loadPersonTasks({personId:this.person.id,date:this.selectedDate,callback:function(t){t&&console.log(t),e.isTasksLoading=!1,e.isTasksLoadingError=!1,setTimeout(function(){e.taskList&&e.$nextTick(function(){e.taskList.setScrollPosition(e.personTasksScrollPosition)}),e.resizeHeaders()},0)}})},resizeHeaders:function(){var t=this;this.$nextTick(function(){t.taskList&&t.taskList.resizeHeaders(),t.haveDoneList&&t.haveDoneList.resizeHeaders()})},selectCurrent:function(){var t=this;this.activeTab="current",setTimeout(function(){t.$refs["person-tasks-search-field"].focus()},100)},selectDone:function(){this.activeTab="done"},changeSearch:function(t){this.$refs["person-tasks-search-field"].setValue(t.search_query),this.$refs["person-tasks-search-field"].$emit("change",t.search_query)},saveSearchQuery:function(t){this.savePersonTasksSearch(t).then(function(){}).catch(function(t){t&&console.log(t)})},removeSearchQuery:function(t){this.removePersonTasksSearch(t).then(function(){}).catch(function(t){t&&console.log(t)})},updateActiveTab:function(){["done","timesheets"].includes(this.$route.params.tab)?this.activeTab=this.$route.params.tab:this.activeTab="todos"},onTimeSpentChange:function(t){t.personId=this.person.id,t.date=this.selectedDate,this.setTimeSpent(t)},onDateChanged:function(t){this.selectedDate=Ua()(t).format("YYYY-MM-DD"),this.loadPerson(this.person.id)}}),metaInfo:function(){return{title:this.person?"".concat(this.person.name," - Kitsu"):"... - Kitsu"}},watch:{$route:function(){var t=this.$route.params.person_id;this.updateActiveTab(),this.person.id!==t&&this.loadPerson()}}},Gv=Hv,Wv=(s("0e7c"),Object(f["a"])(Gv,lv,dv,!1,null,"0516de19",null)),Kv=Wv.exports,Qv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"productions page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("productions.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item",attrs:{text:t.$t("productions.new_production"),icon:"plus",path:"/productions/new"}})],1)])]),s("production-list",{attrs:{entries:t.productions,"is-loading":t.isProductionsLoading,"is-error":t.isProductionsLoadingError}}),s("edit-production-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editProduction.isLoading,"is-error":t.editProduction.isError,"cancel-route":"/productions","production-to-edit":t.productionToEdit},on:{fileselected:t.onProductionPictureSelected,confirm:t.confirmEditProduction}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteProduction.isLoading,"is-error":t.deleteProduction.isError,"cancel-route":"/productions",text:t.deleteText(),"error-text":t.$t("productions.delete_error")},on:{confirm:t.confirmDeleteProduction}})],1)},Yv=[],Xv=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"project"},[t._v(" ")]),s("th",{staticClass:"name"},[t._v(t._s(t.$t("productions.fields.name")))]),s("th",{staticClass:"type"},[t._v(t._s(t.$t("productions.fields.type")))]),s("th",{staticClass:"fps"},[t._v(t._s(t.$t("productions.fields.fps")))]),s("th",{staticClass:"ratio"},[t._v(t._s(t.$t("productions.fields.ratio")))]),s("th",{staticClass:"resolution"},[t._v(t._s(t.$t("productions.fields.resolution")))]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table splitted-table"},[s("tbody",[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[t._v("\n            "+t._s(t.$t("productions.status.open"))+"\n          ")])]),t._l(t.openProductions,function(e){return s("tr",{key:e.id},[s("production-name-cell",{staticClass:"project",attrs:{"only-avatar":!0,entry:e,"last-production-screen":t.lastProductionScreen}}),s("production-name-cell",{staticClass:"name",attrs:{"with-avatar":!1,entry:e,"last-production-screen":t.lastProductionScreen}}),s("td",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("productions.type."+(e.production_type||"short")))+"\n          ")]),s("td",{staticClass:"fps"},[t._v("\n            "+t._s(e.fps)+"\n          ")]),s("td",{staticClass:"ratio"},[t._v("\n            "+t._s(e.ratio)+"\n          ")]),s("td",{staticClass:"resolution"},[t._v("\n            "+t._s(e.resolution)+"\n          ")]),s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-production",params:{production_edit_id:e.id}},"delete-route":{name:"delete-production",params:{production_delete_id:e.id}}}})],1)})],2)]),s("table",{staticClass:"table splitted-table"},[s("tbody",[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[t._v("\n            "+t._s(t.$t("productions.status.closed"))+"\n          ")])]),t._l(t.closedProductions,function(e){return s("tr",{key:e.id},[s("production-name-cell",{staticClass:"project",attrs:{"only-avatar":!0,entry:e,"no-link":!0,"last-production-screen":t.lastProductionScreen}}),s("production-name-cell",{staticClass:"name",attrs:{"with-avatar":!1,entry:e,"last-production-screen":t.lastProductionScreen}}),s("td",{staticClass:"type"},[t._v("\n            "+t._s(t.$t("productions.type."+(e.production_type||"short")))+"\n          ")]),s("td",{staticClass:"fps"},[t._v("\n            "+t._s(e.fps)+"\n          ")]),s("td",{staticClass:"ratio"},[t._v("\n            "+t._s(e.ratio)+"\n          ")]),s("td",{staticClass:"resolution"},[t._v("\n            "+t._s(e.resolution)+"\n          ")]),s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-production",params:{production_edit_id:e.id}},"delete-route":{name:"delete-production",params:{production_delete_id:e.id}}}})],1)})],2)])]),s("p",{staticClass:"has-text-centered nb-productions"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("productions.number",t.entries.length))+"\n  ")])],1)},Jv=[],Zv={name:"production-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{ProductionNameCell:kv,RowActions:Yd,TableInfo:Vl},computed:Object(l["a"])({},Object(d["c"])(["openProductions","lastProductionScreen"]),{closedProductions:function(){return this.entries.filter(function(t){return"Closed"===t.project_status_name})}}),methods:Object(l["a"])({},Object(d["b"])([]),{getStatusLocale:function(t){var e={Active:"productions.status.open",Open:"productions.status.open",Closed:"productions.status.closed"};return e[t]},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},ty=Zv,ey=(s("bb713"),Object(f["a"])(ty,Xv,Jv,!1,null,"176882da",null)),sy=ey.exports,iy={name:"productions",components:{ButtonLink:zd,DeleteModal:Bu,EditProductionModal:j_,PageTitle:fd,ProductionList:sy},data:function(){return{modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},productionToDelete:null,productionToEdit:null,choices:[]}},computed:Object(l["a"])({},Object(d["c"])(["deleteProduction","editProduction","getProduction","isProductionsLoading","isProductionsLoadingError","productionAvatarFormData","productions"])),created:function(){var t=this;this.loadProductions(function(e){e||t.handleModalsDisplay()})},methods:Object(l["a"])({},Object(d["b"])(["loadProductions","storeProductionPicture","uploadProductionAvatar"]),{confirmEditProduction:function(t){var e=this,s="newProduction",i=this.productionToEdit&&this.productionToEdit.id;this.productionToEdit&&this.productionToEdit.id&&(s="editProduction",t.id=this.productionToEdit.id),this.$store.dispatch(s,{data:t,callback:function(s){s||(i&&e.productionAvatarFormData?e.uploadProductionAvatar(t.id).then(function(){e.modals.isNewDisplayed=!1,e.$router.push("/productions")}):(e.modals.isNewDisplayed=!1,e.$router.push("/productions")))}})},confirmDeleteProduction:function(){var t=this;this.$store.dispatch("deleteProduction",{production:this.productionToDelete,callback:function(e){e||(t.modals.isDeleteDisplayed=!1)}})},deleteText:function(){var t=this.productionToDelete;return t?this.$t("productions.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path;if(t.indexOf("new")>0)this.productionToEdit={},this.modals.isNewDisplayed=!0;else if(t.indexOf("edit")>0){var e=this.$store.state.route.params.production_edit_id;this.productionToEdit=this.getProduction(e),this.modals.isNewDisplayed=!0}else if(t.indexOf("delete")>0){var s=this.$store.state.route.params.production_delete_id;this.productionToDelete=this.getProduction(s),this.modals.isDeleteDisplayed=!0}else this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1},onProductionPictureSelected:function(t){this.storeProductionPicture(t)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("productions.title")," - Kitsu")}}},ny=iy,ay=Object(f["a"])(ny,Qv,Yv,!1,null,"4ecb8f36",null),oy=ay.exports,ry=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"asset-types page fixed-page"},[s("div",{staticClass:"asset-type-list-header page-header"},[s("div",{staticClass:"filters-area"},[s("search-field",{ref:"asset-type-search-field",attrs:{placeholder:"ex: chars, agent327"},on:{change:t.onSearchChange}})],1)]),s("production-asset-type-list",{ref:"asset-type-list",attrs:{entries:t.displayedAssetTypes,"is-loading":t.isAssetsLoading||t.initialLoading,"is-error":t.isAssetsLoadingError,"validation-columns":t.assetValidationColumns,"asset-type-stats":t.assetTypeStats},on:{scroll:t.saveScrollPosition}})],1)},cy=[],ly=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v(t._s(t.$t("asset_types.fields.name")))]),t._l(t.sortedValidationColumns,function(e){return t.isLoading?t._e():s("th",{key:e,staticClass:"validation",style:t.getValidationStyle(e)},[s("router-link",{attrs:{to:t.taskTypePath(e)}},[t._v("\n              "+t._s(t.taskTypeMap[e].name)+"\n            ")])],1)}),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),!t.isEmptyList||t.isCurrentUserClient||t.isLoading?t._e():s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("assets.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("assets.new_asset"),path:t.newAssetPath}})],1),t.isEmptyList&&t.isCurrentUserClient&&!t.isLoading?s("div",{staticClass:"has-text-centered"},[t._m(1),s("p",{staticClass:"info"},[t._v(t._s(t.$t("assets.empty_list_client")))])]):t._e(),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._l(t.sortedValidationColumns,function(i){return s("td",{key:i,staticClass:"validation",style:t.getValidationStyle(i)},[t.isStats(e,t.taskTypeMap[i])?s("pie-chart",{attrs:{width:"70px",height:"50px",legend:!1,colors:t.chartColors(e,t.taskTypeMap[i]),data:t.chartData(e,t.taskTypeMap[i])}}):t._e()],1)}),s("td",{staticClass:"actions"})],2)}))])]),t.isEmptyList||t.isLoading?t._e():s("p",{staticClass:"has-text-centered nb-asset-types"},[t._v("\n    "+t._s(t.displayedAssetTypesLength)+"\n    "+t._s(t.$tc("asset_types.number",t.displayedAssetTypesLength))+"\n  ")])],1)},dy=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("66a5")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("66a5")}})])}],uy={name:"production-asset-type-list",mixins:[Ad],props:["entries","isLoading","isError","assetTypeStats","validationColumns"],data:function(){return{busy:!1,lastSelection:null}},components:{ButtonLink:zd,PageTitle:fd,RowActions:Yd,TableInfo:Vl},computed:Object(l["a"])({},Object(d["c"])(["assetTypeSearchText","currentEpisode","currentProduction","displayedAssetTypesLength","isCurrentUserClient","isTVShow","taskTypeMap"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.assetTypeSearchText||0===this.assetTypeSearchText.length)},newAssetPath:function(){var t={name:"new-asset",params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-new-asset",t.params.episode_id=this.currentEpisode.id),t}}),methods:Object(l["a"])({},Object(d["b"])([]),{chartColors:function(t,e){var s=this,i=this.assetTypeStats[t.id][e.id],n=Ta()(i);return n.map(function(i){var n=s.assetTypeStats[t.id][e.id][i],a="todo"===n.name?"#5F626A":n.color;return a})},chartData:function(t,e){var s=this;return Ta()(this.assetTypeStats[t.id][e.id]).map(function(i){return[s.assetTypeStats[t.id][e.id][i].name,s.assetTypeStats[t.id][e.id][i].value]})},isStats:function(t,e){return this.assetTypeStats[t.id]&&this.assetTypeStats[t.id][e.id]},onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop)},setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},taskTypePath:function(t){var e={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:t,type:"assets"}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-task-type",e.params.episode_id=this.currentEpisode.id),e},resizeHeaders:function(){}})},py=uy,hy=(s("bfa6"),Object(f["a"])(py,ly,dy,!1,null,"44e47f8f",null)),my=hy.exports,fy={name:"production-asset-types",components:{ProductionAssetTypeList:my,PageTitle:fd,SearchField:pp,SearchIcon:Ic["y"]},data:function(){return{initialLoading:!0}},computed:Object(l["a"])({},Object(d["c"])(["assetTypePath","assetTypeStats","assetTypeSearchText","assetTypeListScrollPosition","assetValidationColumns","currentEpisode","currentProduction","displayedAssetTypes","isAssetsLoading","isAssetsLoadingError","isTVShow"])),created:function(){},mounted:function(){var t=this;this.setDefaultSearchText(),this.setDefaultListScrollPosition(),setTimeout(function(){t.initAssetTypes().then(t.handleModalsDisplay).then(function(){t.initialLoading=!1})},100)},methods:Object(l["a"])({},Object(d["b"])(["computeAssetTypeStats","initAssetTypes","loadAssets","loadComment","setAssetTypeSearch","setAssetTypeListScrollPosition","setLastProductionScreen"]),{setDefaultSearchText:function(){this.assetTypeSearchText.length>0&&this.$refs["asset-type-search-field"].setValue(this.assetTypeSearchText)},setDefaultListScrollPosition:function(){this.$refs["asset-type-list"].setScrollPosition(this.assetTypeListScrollPosition)},navigateToList:function(){this.$router.push(this.assetTypesPath)},onSearchChange:function(t){var e=this.$refs["asset-type-search-field"].getValue();this.setAssetTypeSearch(e)},saveScrollPosition:function(t){this.setAssetTypeListScrollPosition(t)}}),watch:{currentProduction:function(){var t=this;this.$refs["asset-type-search-field"].setValue(""),this.isTVShow||(this.initialLoading=!0,this.loadAssets(function(){t.computeAssetTypeStats(),t.setAssetTypeListScrollPosition(0),t.initialLoading=!1}))},currentEpisode:function(){var t=this;this.isTVShow&&(this.initialLoading=!0,this.$refs["asset-type-search-field"].setValue(""),this.setAssetTypeListScrollPosition(0),this.loadAssets(function(){t.computeAssetTypeStats(),t.initialLoading=!1}))}},socket:{events:{"comment:new":function(t){var e=this,s=t.comment_id;this.loadComment({commentId:s,callback:function(){e.computeAssetTypeStats()}})}}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," | ").concat(this.$t("asset_types.production_title")," - Kitsu")}}},_y=fy,vy=(s("72ea"),Object(f["a"])(_y,ry,cy,!1,null,"077fd240",null)),yy=vy.exports,gy=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"productions page fixed-page"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"playlist-list-column column"},[s("button",{class:{button:!0,"is-loading":t.loading.addPlaylist},on:{click:t.addPlaylist}},[s("plus-icon",{staticClass:"icon is-small"}),t._v("\n        "+t._s(t.$t("playlists.new_playlist"))+"\n      ")],1),t.loading.playlists?s("spinner"):s("div",{staticClass:"playlists"},t._l(t.playlists,function(e){return s("router-link",{key:e.id,class:{"playlist-item":!0,selected:e.id===t.currentPlaylist.id},attrs:{to:t.getPlaylistPath(e.id)}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),t.errors.playlistLoading?s("error-text",{attrs:{text:"$t('playlists.loading_error')"}}):t._e()],1),s("div",{staticClass:"playlist-column column"},[s("div",{staticClass:"playlist-header flexrow"},[s("div",{staticClass:"flexrow-item playlist-name"},[t._v("\n          "+t._s(t.currentPlaylist.name)+"\n        ")]),s("div",{staticClass:"flexrow-item"},[t.currentPlaylist.id?s("button-link",{staticClass:"edit-button",attrs:{path:t.editPath,icon:"edit"}}):t._e()],1),s("div",{staticClass:"flexrow-item"},[t.currentPlaylist.id?s("button-link",{staticClass:"delete-button",attrs:{path:t.deletePath,icon:"delete"}}):t._e()],1)]),s("div",{staticClass:"has-text-centered player"},[s("div",{class:{"video-wrapper":!0,"is-hidden":0===Object.keys(t.currentShots).length}},[s("video",{ref:"videoPlayer",staticClass:"video-player",attrs:{src:"",controls:""},on:{ended:t.playNext}}),Object.values(t.currentShots)[t.currentShot]?s("p",[t._v("\n          "+t._s(Object.values(t.currentShots)[t.currentShot].entity_name)+"\n          ")]):t._e()]),s("p",{class:{"is-hidden":Object.keys(t.currentShots).length>0||!t.currentPlaylist.id}},[t._v("\n          "+t._s(t.$t("playlists.select_shot"))+"\n        ")])]),s("div",{staticClass:"playlisted-shots flexrow"},t._l(t.playlistedShots,function(e,i){return s("div",{key:e.id,staticClass:"flexrow-item has-text-centered"},[s("playlisted-shot",{attrs:{index:i,shot:e,"is-playing":t.currentShot===i},on:{"play-click":t.playShot,"remove-click":t.removeShot,"preview-changed":t.onPreviewChanged}})],1)}))]),s("div",{staticClass:"addition-column column"},[t.isShotsLoading?s("spinner"):s("div",[s("div",{staticClass:"addition-header"},[s("page-subtitle",{attrs:{text:t.$t("playlists.add_shots")}}),t.episodes.length>0||!t.isTVShow?s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item"},[t.sequenceOptions.length>0?s("combobox",{attrs:{label:t.$t("shots.fields.sequence"),options:t.sequenceOptions},model:{value:t.sequenceId,callback:function(e){t.sequenceId=e},expression:"sequenceId"}}):t._e(),0===t.sequenceOptions.length?s("div",[t._v("\n                "+t._s(t.$t("playlists.no_sequence_for_episode"))+"\n              ")]):t._e()],1)]):s("div",[t._v("\n            "+t._s(t.$t("playlists.no_shot_for_production"))+"\n          ")]),0===t.sequenceShots.length&&t.sequenceId?s("div",[t._v("\n            "+t._s(t.$t("playlists.no_shot_for_sequence"))+"\n          ")]):t._e()],1),t._l(t.sequenceShots,function(e){return s("div",{key:e.id,class:{"addition-shot":!0,playlisted:void 0!==t.currentShots[e.id]},on:{click:function(s){s.preventDefault(),t.addShot(e)}}},[s("entity-thumbnail",{attrs:{entity:e,"empty-width":150,"empty-height":100}}),t._v("\n          "+t._s(e.name)+"\n        ")],1)})],2)],1)]),s("edit-playlist-modal",{attrs:{active:t.modals.isEditDisplayed,"is-loading":t.loading.editPlaylist,"is-error":t.errors.editError,"cancel-route":t.currentPlaylistRoute,"playlist-to-edit":t.currentPlaylist},on:{confirm:t.runEditPlaylist}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.loading.deletePlaylist,"is-error":t.errors.deletePlaylist,"cancel-route":t.currentPlaylistRoute,text:t.deleteText,"error-text":t.$t("playlists.delete_error")},on:{confirm:t.removePlaylist}})],1)},ky=[],by=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.playlistToEdit&&t.playlistToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("playlists.edit_title"))+" "+t._s(t.playlistToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("playlists.no_playlist"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("playlists.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n        "+t._s(t.$t("assets.edit_fail"))+"\n      ")]):t._e()])])])},Ty=[],Sy={name:"edit-playlist-modal",components:{Combobox:vl,TextField:al},props:["active","cancelRoute","isLoading","isError","playlistToEdit"],watch:{playlistToEdit:function(){this.playlistToEdit&&this.playlistToEdit.id?this.form.name=this.playlistToEdit.name:this.form={name:""}},active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.nameField.focus()},100)}},data:function(){return this.playlistToEdit&&this.playlistToEdit.id?{form:{name:this.playlistToEdit.name}}:{form:{name:""}}},methods:{runConfirmation:function(){this.$emit("confirm",this.form)}}},Cy=Sy,wy=(s("be64"),Object(f["a"])(Cy,by,Ty,!1,null,"3c55f441",null)),Ey=wy.exports,Py=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"playlisted-shot":!0,playing:t.isPlaying}},[s("div",{on:{click:function(e){return e.preventDefault(),t.onPlayClick(e)}}},[s("entity-thumbnail",{staticClass:"shot-thumbnail",attrs:{entity:t.shot,"preview-file-id":t.previewFileId}})],1),s("div",{staticClass:"shot-title"},[t._v(t._s(t.shot.entity_name))]),s("div",{staticClass:"preview-choice"},[s("combobox",{attrs:{options:t.taskTypeOptions},model:{value:t.taskTypeId,callback:function(e){t.taskTypeId=e},expression:"taskTypeId"}}),s("combobox",{attrs:{options:t.previewFileOptions},model:{value:t.previewFileId,callback:function(e){t.previewFileId=e},expression:"previewFileId"}})],1),s("a",{staticClass:"remove-button",on:{click:function(e){return e.preventDefault(),t.onRemoveClick(e)}}},[t._v("\n    "+t._s(t.$t("playlists.remove"))+"\n  ")])])},xy=[],Oy={name:"playlisted-shot",components:{Combobox:vl,EntityThumbnail:ld},data:function(){return{taskTypeId:null,previewFileId:this.shot.preview_file_id}},props:{index:{default:0,type:Number},isPlaying:{default:!1,type:Boolean},shot:{default:function(){},type:Object}},computed:Object(l["a"])({},Object(d["c"])(["taskTypeMap"]),{taskTypeOptions:function(){var t=this,e=Ta()(this.shot.preview_files);return e.map(function(e){var s=t.taskTypeMap[e];return{label:s.name,value:s.id}})},previewFileOptions:function(){if(this.taskTypeId){var t=this.shot.preview_files[this.taskTypeId];return t&&t.length>0?t.map(function(t){return{label:"v".concat(t.revision),value:t.id}}):[]}return[]}}),methods:{onPlayClick:function(){this.$emit("play-click",this.index)},onRemoveClick:function(){this.$emit("remove-click",this.shot)}},mounted:function(){var t=this,e=Ta()(this.shot.preview_files);e.length>0&&(this.shot.preview_file_id?this.taskTypeId=e.find(function(e){var s=t.shot.preview_files[e];return s.find(function(e){return e.id===t.shot.preview_file_id})}):this.taskTypeId=e[0])},watch:{taskTypeId:function(){var t=this.shot.preview_files[this.taskTypeId];t&&t.length>0&&(this.previewFileId?this.previewFileId=t[0].id:this.previewFileId=this.shot.preview_file_id||t[0].id)},previewFileId:function(){this.$emit("preview-changed",this.shot,this.previewFileId)}}},Ay=Oy,$y=(s("40ef"),Object(f["a"])(Ay,Py,xy,!1,null,"597c16a2",null)),Ly=$y.exports,Dy={name:"productions",components:{ButtonLink:zd,Combobox:vl,DeleteModal:Bu,EditPlaylistModal:Ey,EntityThumbnail:ld,ErrorText:km,PageSubtitle:bd,PageTitle:fd,PlaylistedShot:Ly,PlusIcon:Ic["u"],Spinner:v},data:function(){return{sequenceId:null,sequenceOptions:[],sequenceShots:[],currentPlaylist:{name:this.$t("playlists.no_selection")},currentShots:{},currentShot:0,modals:{isDeleteDisplayed:!1,isEditDisplayed:!1},loading:{playlists:!1,addPlaylist:!1,deletePlaylist:!1},errors:{playlistLoading:!1,addPlaylist:!1,deletePlaylist:!1},playerOptions:{muted:!0,fluid:!0,sources:[]}}},computed:Object(l["a"])({},Object(d["c"])(["currentEpisode","currentProduction","episodes","getEpisodeOptions","isShotsLoading","isTVShow","playlistMap","playlists","playlistsPath","sequences","shotMap","taskTypeMap"]),{deleteText:function(){return this.currentPlaylist?this.$t("playlists.delete_text",{name:this.currentPlaylist.name}):""},playlistedShots:function(){return Ca()(this.currentShots)},player:function(){return this.$refs.videoPlayer},currentPlaylistRoute:function(){return this.currentPlaylist.id?this.getPlaylistPath(this.currentPlaylist.id):this.playlistsPath},currentMovieSrc:function(){if(this.currentShots.length>0){var t=this.currentShot,e=this.currentShots[t],s=e.preview_file_id;return"/api/movies/originals/preview-files/".concat(s,".mp4")}return""},editPath:function(){return this.getPlaylistPath(this.currentPlaylist.id,"edit")},deletePath:function(){return this.getPlaylistPath(this.currentPlaylist.id,"delete")}}),methods:Object(l["a"])({},Object(d["b"])(["addShotPreviewToPlaylist","changePlaylistPreview","deletePlaylist","editPlaylist","loadPlaylist","loadPlaylists","loadShotPreviewFiles","loadShots","newPlaylist","removeShotPreviewFromPlaylist"]),{clearAdditionColumn:function(){this.sequenceOptions=[],this.sequenceId=null},clearCurrentPlaylist:function(){this.currentPlaylist={},this.currentShots={}},resetPlaylist:function(){this.handleModalsDisplay(),this.clearCurrentPlaylist(),this.setCurrentPlaylist(),this.configurePlayer()},addPlaylist:function(){var t=this,e={name:Ua()().format("YYYY-MM-DD HH:mm"),production_id:this.currentProduction.id};this.isTVShow&&this.currentEpisode&&(e.episode_id=this.currentEpisode.id),this.loading.addPlaylist=!0,this.errors.addPlaylist=!1,this.newPlaylist({data:e,callback:function(e,s){e&&(t.errors.addPlaylist=!0),t.$router.push(t.getPlaylistPath(s.id)),t.loading.addPlaylist=!1}})},runEditPlaylist:function(t){var e=this;this.loading.editPlaylist=!0,this.errors.editPlaylist=!1,this.editPlaylist({data:{name:t.name,id:this.currentPlaylist.id},callback:function(t){t&&(e.errors.editPlaylist=!0),e.loading.editPlaylist=!1,e.$router.push(e.currentPlaylistRoute)}})},removePlaylist:function(){var t=this;this.loading.deletePlaylist=!0,this.errors.deletePlaylist=!1,this.deletePlaylist({playlist:this.currentPlaylist,callback:function(e){e&&(t.errors.deletePlaylist=!0),t.loading.deletePlaylist=!1,t.goFirstPlaylist()}})},setCurrentPlaylist:function(t){var e=this,s=this.$route.params.playlist_id,i=this.playlistMap[s];i?this.loadPlaylist({playlist:i,callback:function(s,i){s&&console.log(s),e.currentPlaylist=i,e.rebuildCurrentShots(),e.configurePlayer(),t&&t()}}):(this.currentPlaylist={name:this.$t("playlists.no_selection")},this.currentShots={},this.handleModalsDisplay())},goFirstPlaylist:function(){this.playlists.length>0?this.$router.push({name:"playlist",params:{production_id:this.currentProduction.id,playlist_id:this.playlists[0].id}}):this.$router.push(this.playlistsPath)},handleModalsDisplay:function(){var t=this.$store.state.route.path;this.modals.isDeleteDisplayed=!1,this.modals.isEditDisplayed=!1,t.indexOf("delete")>0?this.modals.isDeleteDisplayed=!0:t.indexOf("edit")>0&&(this.modals.isEditDisplayed=!0)},setAdditionSequences:function(){var t=this,e=[];e=this.isTVShow&&this.currentEpisode?this.sequences.filter(function(e){return e.parent_id===t.currentEpisode.id}):this.sequences,this.sequenceOptions=e.map(function(t){return{label:t.name,value:t.id}}),e.length>0?this.sequenceId=e[0].id:this.sequenceId=null},setAdditionShots:function(){var t=this;this.sequenceShots=Ca()(this.shotMap).filter(function(e){return e.sequence_id===t.sequenceId})},addShot:function(t){var e=this;this.currentPlaylist.id&&!this.currentShots[t.id]&&this.loadShotPreviewFiles({playlist:this.currentPlaylist,shot:t,callback:function(s,i){s&&console.log(s),e.addShotPreviewToPlaylist({playlist:e.currentPlaylist,previewFiles:i,shot:t,callback:function(){e.rebuildCurrentShots(),e.configurePlayer()}})}})},removeShot:function(t){var e=this;t.preview_file_id&&this.removeShotPreviewFromPlaylist({playlist:this.currentPlaylist,shot:t,callback:function(){e.currentShots={},setTimeout(function(){e.rebuildCurrentShots()},100)}})},onPreviewChanged:function(t,e){this.changePlaylistPreview({playlist:this.currentPlaylist,shot:t,previewFileId:e}),this.rebuildCurrentShots(),this.configurePlayer()},rebuildCurrentShots:function(){var t=this;this.currentShots={},this.currentPlaylist&&this.currentPlaylist.shots&&this.currentPlaylist.shots.forEach(function(e){var s=t.shotMap[e.shot_id];s&&(t.currentShots[e.shot_id]={id:e.shot_id,name:s.name,entity_name:s.tasks[0].entity_name,preview_files:e.preview_files,preview_file_id:e.preview_file_id||s.preview_file_id})})},getMoviePath:function(){var t=this.currentShot;if(this.currentShots&&Ta()(this.currentShots).length>0){var e=Ta()(this.currentShots)[t],s=this.currentShots[e],i=s.preview_file_id;return"/api/movies/originals/preview-files/".concat(i,".mp4")}return""},playNext:function(){var t=this.currentShot+1;t>=Ta()(this.currentShots).length&&(t=0),this.currentShot=t,this.player.src=this.getMoviePath(),this.player.play()},configurePlayer:function(){var t=this.getMoviePath();this.player.src=t},onPlayerReady:function(t){var e=this;this.player&&this.player.on("playlistitem",function(){e.onCurrentShotChange()})},playShot:function(t){this.player&&(this.currentShot=t,this.player.src=this.getMoviePath(),this.player.play())},loadShotsData:function(t){var e=this;this.loadShots(function(){(e.episodes.length>0||!e.isTVShow)&&e.setAdditionSequences(),e.loadPlaylistsData(),t&&t()})},loadPlaylistsData:function(){var t=this;this.loading.playlists=!0,this.loadPlaylists(function(e){e&&(t.errors.loadPlaylists=!0),t.loading.playlists=!1,e||(t.handleModalsDisplay(),t.setCurrentPlaylist(function(){t.currentPlaylist&&t.currentPlaylist.id||t.goFirstPlaylist()}))})},getPlaylistPath:function(t,e){var s={name:e?"".concat(e,"-playlist"):"playlist",params:{production_id:this.currentProduction.id,playlist_id:t}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(s.name),s.params.episode_id=this.currentEpisode.id),s}}),mounted:function(){var t=this;this.setAdditionSequences(),setTimeout(function(){t.loadShotsData(function(){t.resetPlaylist()})},0)},watch:{$route:function(){var t=this;this.setCurrentPlaylist(function(){t.handleModalsDisplay()})},sequenceId:function(){this.setAdditionShots()},currentProduction:function(){var t=this;this.setAdditionSequences(),this.loadShotsData(function(){t.resetPlaylist()})},currentEpisode:function(){var t=this;this.currentEpisode&&(this.setAdditionSequences(),this.loadShotsData(function(){t.resetPlaylist()}))}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:""," ")+"- ".concat(this.currentEpisode?this.currentEpisode.name:""," |")+" ".concat(this.$t("playlists.title")," - Kitsu")}:{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" ".concat(this.$t("playlists.title"))+" - Kitsu"}}},jy=Dy,Iy=(s("d031"),Object(f["a"])(jy,gy,ky,!1,null,"775d1d62",null)),My=Iy.exports,Fy=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile page"},[s("div",{staticClass:"profile-content"},[s("div",{staticClass:"has-text-centered profile-header"},[s("div",{staticClass:"profile-header-content has-text-centered"},[s("people-avatar",{ref:"avatar",attrs:{"no-cache":!0,person:this.user,size:150,"font-size":60}}),t.isLdap?t._e():s("p",[s("router-link",{staticClass:"button is-link",attrs:{to:{name:"change-avatar"}}},[t._v("\n          "+t._s(t.$t("profile.change_avatar"))+"\n          ")])],1),s("h1",[t._v("\n        "+t._s(t.$t("profile.title"))+"\n        ")])],1)]),s("div",{staticClass:"profile-body"},[s("h2",[t._v("\n        "+t._s(t.$t("profile.info_title"))+"\n      ")]),s("text-field",{attrs:{label:t.$t("people.fields.first_name"),disabled:t.isLdap},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}}),s("text-field",{attrs:{label:t.$t("people.fields.last_name"),disabled:t.isLdap},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}}),s("text-field",{attrs:{label:t.$t("people.fields.email"),disabled:t.isLdap},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),s("text-field",{attrs:{label:t.$t("people.fields.phone")},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("\n          "+t._s(t.$t("profile.timezone"))+"\n        ")]),s("span",{staticClass:"select is-medium"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.timezone,expression:"form.timezone"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"timezone",e.target.multiple?s:s[0])}}},t._l(t.timezones,function(e){return s("option",{key:e},[t._v("\n              "+t._s(e)+"\n            ")])}))])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[t._v("\n          "+t._s(t.$t("profile.language"))+"\n        ")]),s("span",{staticClass:"select is-medium"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.locale,expression:"form.locale"}],domProps:{value:t.form.locale},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"locale",e.target.multiple?s:s[0])},t.localeChanged]}},[s("option",{attrs:{value:"en_US"}},[t._v("English")]),s("option",{attrs:{value:"fr_FR"}},[t._v("French")]),s("option",{attrs:{value:"zh_Hans_CN"}},[t._v("Chinese")])])])]),s("button",{class:{button:!0,"save-button":!0,"is-medium":!0,"is-loading":t.isSaveProfileLoading},on:{click:function(e){t.saveProfile({form:t.form})}}},[t._v("\n        "+t._s(t.$t("profile.save.button"))+"\n      ")]),s("p",{class:{error:!0,"is-hidden":!t.isSaveProfileLoadingError}},[t._v("\n        "+t._s(t.$t("profile.save.error"))+"\n      ")]),s("h2",[t._v("\n        "+t._s(t.$t("profile.password_title"))+"\n      ")]),s("text-field",{attrs:{label:t.$t("people.fields.old_password"),type:"password"},model:{value:t.passwordForm.oldPassword,callback:function(e){t.$set(t.passwordForm,"oldPassword",e)},expression:"passwordForm.oldPassword"}}),s("text-field",{attrs:{label:t.$t("people.fields.password"),type:"password"},model:{value:t.passwordForm.password,callback:function(e){t.$set(t.passwordForm,"password",e)},expression:"passwordForm.password"}}),s("text-field",{attrs:{label:t.$t("people.fields.password_2"),type:"password"},model:{value:t.passwordForm.password2,callback:function(e){t.$set(t.passwordForm,"password2",e)},expression:"passwordForm.password2"}}),s("button",{class:{button:!0,"save-button":!0,"is-medium":!0,"is-loading":t.changePassword.isLoading},on:{click:function(e){t.passwordChangeRequested()}}},[t._v("\n        "+t._s(t.$t("profile.change_password.button"))+"\n      ")]),s("p",{class:{"change-password-message":!0,error:!0,"is-hidden":t.changePassword.isValid}},[t._v("\n        "+t._s(t.$t("profile.change_password.unvalid"))+"\n      ")]),s("p",{class:{"change-password-message":!0,success:!0,"is-hidden":!t.changePassword.isSuccess}},[t._v("\n        "+t._s(t.$t("profile.change_password.success"))+"\n      ")]),s("p",{class:{"change-password-message":!0,error:!0,"is-hidden":!t.changePassword.isError}},[t._v("\n        "+t._s(t.$t("profile.change_password.error"))+"\n      ")])],1)]),s("change-avatar-modal",{attrs:{active:t.changeAvatar.isModalShown,"is-loading":t.changeAvatar.isLoading,"is-error":t.changeAvatar.isLoadingError,"cancel-route":{name:"profile"},"form-data":t.changeAvatar.formData},on:{fileselected:t.selectFile,confirm:t.uploadAvatarFile}})],1)},qy=[],Ny=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("profile.avatar.title"))+"\n      ")]),s("p",[t._v("\n        "+t._s(t.$t("main.csv.select_file"))+"\n      ")]),s("file-upload",{ref:"uploadAvatarField",attrs:{accept:".png"},on:{fileselected:t.onFileSelected}}),t.isError?s("p",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("profile.avatar.error_upload"))+"\n      ")]):t._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading,"is-disabled":void 0==t.formData},on:{click:t.onConfirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)],1)])])},Ry=[],Vy={name:"change-avatar-modal",props:["active","cancelRoute","isLoading","isError"],data:function(){return{formData:null}},components:{FileUpload:Yu},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]),{onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},onConfirmClicked:function(){this.$emit("confirm")}}),watch:{active:function(){this.formData=null,this.$refs.uploadAvatarField.reset()}}},By=Vy,Uy=(s("5b1a"),Object(f["a"])(By,Ny,Ry,!1,null,"dd70e532",null)),zy=Uy.exports,Hy={name:"profile",data:function(){return{form:{first_name:"",last_name:"",email:"",phone:"",timezone:"Europe/Paris",locale:"French"},passwordForm:{oldPassword:"",password:"",password2:""},changeAvatar:{isModalShown:!1,isLoading:!1,isLoadingError:!1,formData:null}}},components:{PeopleAvatar:Zl,ChangeAvatarModal:zy,TextField:al},watch:{user:function(){J()(this.form,this.user)},$route:function(){this.handleModalsDisplay()}},computed:Object(l["a"])({},Object(d["c"])(["changePassword","isCurrentUserAdmin","isLdap","isSaveProfileLoading","isSaveProfileLoadingError","user"]),{departments:function(){return[{name:"Animation"},{name:"Modeling"}]},timezones:function(){return Ua.a.tz.names().filter(function(t){return t.indexOf("/")>0&&t.indexOf("Etc")<0})}}),methods:Object(l["a"])({},Object(d["b"])(["saveProfile","checkNewPasswordValidityAndSave","uploadAvatar"]),{localeChanged:function(){this.$i18n.locale=this.form.locale.substring(0,2),"zh_Hans_CN"===this.form.locale?Ua.a.locale("zh_CN"):Ua.a.locale(this.form.locale.substring(0,2))},passwordChangeRequested:function(){var t=this;this.checkNewPasswordValidityAndSave({form:this.passwordForm,callback:function(){t.passwordForm={oldPassword:"",password:"",password2:""}}})},selectFile:function(t){this.$store.commit("CHANGE_AVATAR_FILE",t)},uploadAvatarFile:function(){var t=this;this.changeAvatar.isLoading=!0,this.changeAvatar.isError=!1,this.uploadAvatar(function(e){e&&(t.changeAvatar.isError=!0),t.changeAvatar.isLoading=!1,t.$refs.avatar.reloadAvatar(),t.$router.push({name:"profile"})})},handleModalsDisplay:function(){var t=this.$store.state.route.path;t.indexOf("change-avatar")>0?this.changeAvatar.isModalShown=!0:this.changeAvatar.isModalShown=!1}}),mounted:function(){this.form=J()(this.form,this.user),this.handleModalsDisplay()},metaInfo:function(){return{title:"".concat(this.$t("profile.title")," - Kitsu")}}},Gy=Hy,Wy=(s("87b7"),Object(f["a"])(Gy,Fy,qy,!1,null,"f30ae604",null)),Ky=Wy.exports,Qy=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hero is-fullheight"},[s("div",{staticClass:"container has-text-centered"},[s("div",{staticClass:"box has-text-left"},[s("div",{staticClass:"has-text-centered"},[s("h1",{staticClass:"title"},[t._v("\n          "+t._s(t.$t("login.reset_password_title"))+"\n        ")])]),s("div",{staticClass:"field mt2"},[s("p",{staticClass:"control has-icon"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"},{name:"focus",rawName:"v-focus"}],staticClass:"input is-medium email",attrs:{type:"text",placeholder:t.$t("login.fields.email")},domProps:{value:t.email},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirmResetPassword(e):null},input:function(e){e.target.composing||(t.email=e.target.value)}}}),s("span",{staticClass:"icon"},[s("mail-icon",{attrs:{width:"20",height:"20"}})],1)])]),s("p",{staticClass:"control"},[s("a",{class:{button:!0,"main-button":!0,"is-fullwidth":!0,"is-loading":t.isLoading},on:{click:t.confirmResetPassword}},[t._v("\n            "+t._s(t.$t("login.reset_password"))+"\n        ")])]),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isError,expression:"isError"}],staticClass:"error"},[t._v("\n        "+t._s(t.$t("login.reset_password_failed"))+"\n      ")]),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isSuccess,expression:"isSuccess"}],staticClass:"success"},[t._v("\n        "+t._s(t.$t("login.reset_password_succeed"))+"\n      ")]),s("p",{staticClass:"has-text-centered"},[s("router-link",{attrs:{to:{name:"login"}}},[t._v("\n          "+t._s(t.$t("login.login_page"))+"\n        ")])],1)])])])},Yy=[],Xy={name:"reset-password",components:{MailIcon:Ic["p"]},data:function(){return{email:"",isLoading:!1,isError:!1,isSuccess:!1}},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])(["resetPassword"]),{confirmResetPassword:function(){var t=this;this.isLoading=!0,this.isError=!1,this.isSuccess=!1,this.resetPassword(this.email).then(function(){t.isLoading=!1,t.isSuccess=!0}).catch(function(){t.isLoading=!1,t.isError=!0,t.isSuccess=!1})}}),metaInfo:function(){return{title:this.$t("login.reset_password_title")}}},Jy=Xy,Zy=Object(f["a"])(Jy,Qy,Yy,!1,null,"280425ce",null),tg=Zy.exports,eg=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hero is-fullheight"},[s("div",{staticClass:"container has-text-centered"},[s("div",{staticClass:"box has-text-left"},[s("div",{staticClass:"has-text-centered"},[s("h1",{staticClass:"title"},[t._v("\n          "+t._s(t.$t("login.reset_change_password_title"))+"\n        ")])]),s("div",{staticClass:"field mt2"},[s("p",{staticClass:"control has-icon"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"focus",rawName:"v-focus"}],staticClass:"input is-medium email",attrs:{type:"password",placeholder:t.$t("login.fields.password")},domProps:{value:t.password},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirmResetChangePassword(e):null},input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("span",{staticClass:"icon"},[s("lock-icon",{attrs:{width:"20",height:"20"}})],1)]),s("p",{staticClass:"control has-icon"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"input is-medium email",attrs:{type:"password",placeholder:t.$t("login.fields.password2")},domProps:{value:t.password2},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirmResetChangePassword(e):null},input:function(e){e.target.composing||(t.password2=e.target.value)}}}),s("span",{staticClass:"icon"},[s("lock-icon",{attrs:{width:"20",height:"20"}})],1)])]),s("p",{staticClass:"control"},[s("a",{class:{"main-button":!0,"is-fullwidth":!0,"is-loading":t.isLoading},on:{click:t.confirmResetChangePassword}},[t._v("\n            "+t._s(t.$t("login.reset_change_password"))+"\n        ")])]),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isFormError,expression:"isFormError"}],staticClass:"error"},[t._v("\n        "+t._s(t.$t("login.reset_change_password_form_failed"))+"\n      ")]),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isError,expression:"isError"}],staticClass:"error"},[t._v("\n        "+t._s(t.$t("login.reset_change_password_failed"))+"\n      ")]),s("p",{directives:[{name:"show",rawName:"v-show",value:t.isSuccess,expression:"isSuccess"}],staticClass:"success"},[t._v("\n        "+t._s(t.$t("login.reset_change_password_succeed"))+"\n      ")]),s("p",{staticClass:"has-text-centered"},[s("router-link",{attrs:{to:{name:"login"}}},[t._v("\n          "+t._s(t.$t("login.login_page"))+"\n        ")])],1)])])])},sg=[],ig={name:"reset-password",components:{LockIcon:Ic["o"]},data:function(){return{password:"",password2:"",isLoading:!1,isError:!1,isFormError:!1,isSuccess:!1}},mounted:function(){this.$store.commit("LOGIN_SUCCESS")},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])(["resetChangePassword"]),{confirmResetChangePassword:function(){var t=this;this.isFormError=!1,this.isError=!1,Pc.isPasswordValid(this.password,this.password2)?(this.isLoading=!0,this.isSuccess=!1,this.resetChangePassword({token:this.$route.params.token,password:this.password,password2:this.password2}).then(function(){t.isLoading=!1,t.isSuccess=!0,setTimeout(function(){t.$router.push({name:"login"})},3e3)}).catch(function(){t.isLoading=!1,t.isError=!0,t.isSuccess=!1})):this.isFormError=!0}}),metaInfo:function(){return{title:this.$t("login.reset_change_password_title")}}},ng=ig,ag=Object(f["a"])(ng,eg,sg,!1,null,"36f7045c",null),og=ag.exports,rg=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"server-down page"},[s("h1",{staticClass:"title"},[t._v(t._s(t.$t("server_down.title")))]),s("p",[t._v("\n    "+t._s(t.$t("server_down.text"))+"\n  ")])])},cg=[],lg={name:"server-down",computed:Object(l["a"])({},Object(d["c"])(["isAuthenticated","user"])),methods:Object(l["a"])({},Object(d["b"])([])),mounted:function(){var t=this;Pc.isServerLoggedIn(function(e){var s=t.$store.state.route.query.redirect;e||t.$router.push(s)})}},dg=lg,ug=Object(f["a"])(dg,rg,cg,!1,null,"64efb64c",null),pg=ug.exports,hg=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sequences page fixed-page"},[s("div",{staticClass:"sequence-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left filters-area"},[s("search-field",{ref:"sequence-search-field",attrs:{placeholder:"ex: e01 s01 anim=wip"},on:{change:t.onSearchChange}})],1)])]),s("sequence-list",{ref:"sequence-list",attrs:{entries:t.displayedSequences,"is-loading":t.isShotsLoading||t.initialLoading,"is-error":t.isShotsLoadingError,"validation-columns":t.shotValidationColumns,"sequence-stats":t.sequenceStats},on:{scroll:t.saveScrollPosition}}),s("edit-sequence-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-error":t.errors.edit,"cancel-route":t.sequencesPath,"sequence-to-edit":t.sequenceToEdit},on:{confirm:t.confirmEditSequence}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.loading.del,"is-error":t.errors.del,text:t.deleteText(),"error-text":t.$t("sequences.delete_error"),"cancel-route":t.sequencesPath},on:{confirm:t.confirmDeleteSequence}})],1)},mg=[],fg=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{ref:"th-sequence",staticClass:"name"},[t._v("\n            "+t._s(t.$t("shots.fields.sequence"))+"\n          ")]),s("th",{staticClass:"description"},[t._v(t._s(t.$t("shots.fields.description")))]),t._l(t.sortedValidationColumns,function(e){return t.isLoading?t._e():s("th",{key:e,staticClass:"validation",style:t.getValidationStyle(e)},[s("router-link",{attrs:{to:t.taskTypePath(e)}},[t._v("\n              "+t._s(t.taskTypeMap[e].name)+"\n            ")])],1)}),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),!t.isEmptyList||t.isCurrentUserClient||t.isLoading?t._e():s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("sequences.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("shots.new_sequences"),path:t.manageShotPath}})],1),t.isEmptyList&&t.isCurrentUserClient&&!t.isLoading?s("div",{staticClass:"has-text-centered"},[t._m(1),s("p",{staticClass:"info"},[t._v(t._s(t.$t("sequences.empty_list_client")))])]):t._e(),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n          ")]),s("td",{staticClass:"description"},[t._v("\n            "+t._s(e.description)+"\n          ")]),t._l(t.sortedValidationColumns,function(i){return s("td",{key:i,staticClass:"validation",style:t.getValidationStyle(i)},[t.isStats(e,t.taskTypeMap[i])?s("pie-chart",{attrs:{width:"70px",height:"50px",legend:!1,colors:t.chartColors(e,t.taskTypeMap[i]),data:t.chartData(e,t.taskTypeMap[i])}}):t._e()],1)}),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":t.editPath(e.id),"delete-route":t.deletePath(e.id)}}):s("td",{staticClass:"actions"})],2)}))])]),t.isEmptyList||t.isLoading?t._e():s("p",{staticClass:"has-text-centered nb-sequences"},[t._v("\n    "+t._s(t.displayedSequencesLength)+"\n    "+t._s(t.$tc("sequences.number",t.displayedSequencesLength))+"\n  ")])],1)},_g=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])}],vg={name:"sequence-list",mixins:[Ad],props:["entries","isLoading","isError","sequenceStats","validationColumns"],data:function(){return{busy:!1,lastSelection:null}},components:{ButtonLink:zd,PageTitle:fd,RowActions:Yd,TableInfo:Vl},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","currentEpisode","displayedSequencesLength","isDarkTheme","isCurrentUserClient","isCurrentUserManager","isTVShow","sequenceSearchText","taskTypeMap"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.sequenceSearchText||0===this.sequenceSearchText.length)},manageShotPath:function(){return this.getPath("manage-shots")}}),methods:Object(l["a"])({},Object(d["b"])(["displayMoreSequences","loadMoreSequences"]),{chartColors:function(t,e){var s=this,i=this.sequenceStats[t.id][e.id],n=Ta()(i);return n.map(function(i){var n=s.sequenceStats[t.id][e.id][i],a="todo"===n.name?"#5F626A":n.color;return a})},chartData:function(t,e){var s=this;return Ta()(this.sequenceStats[t.id][e.id]).map(function(i){return[s.sequenceStats[t.id][e.id][i].name,s.sequenceStats[t.id][e.id][i].value]})},isStats:function(t,e){return this.sequenceStats[t.id]&&this.sequenceStats[t.id][e.id]},onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.loadMoreSequences()},loadMoreSequences:function(){this.displayMoreSequences(),this.$nextTick(this.resizeHeaders)},setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},resizeHeaders:function(){if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].children.length>0){var t=this.$refs["body-tbody"].children[0].children[0].offsetWidth;this.$refs["th-sequence"].style="min-width: ".concat(t,"px")}},editPath:function(t){return this.getPath("edit-sequence",t)},deletePath:function(t){return this.getPath("delete-sequence",t)},taskTypePath:function(t){var e={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:t,type:"shots"}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-task-type",e.params.episode_id=this.currentEpisode.id),e},getPath:function(t,e){var s={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(t),s.params.episode_id=this.currentEpisode.id),e&&(s.params.sequence_id=e),s}})},yg=vg,gg=(s("ebc9"),Object(f["a"])(yg,fg,_g,!1,null,"6c0ef70e",null)),kg=gg.exports,bg=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.sequenceToEdit&&this.sequenceToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("sequences.edit_title"))+" "+t._s(t.sequenceToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("sequences.new_sequence"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("sequences.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:t.$t("sequences.fields.description")},on:{keyup:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter"))&&e.ctrlKey?t.runConfirmation(e):null}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("sequences.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.sequenceSuccessText)+"\n        ")])],1)])])])},Tg=[],Sg={name:"edit-sequence-modal",components:{TextField:al,TextareaField:ul,Combobox:vl},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","sequenceToEdit","errorText"],data:function(){return this.sequenceToEdit&&this.sequenceToEdit.id?{form:{id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,production_id:this.sequenceToEdit.project_id},sequenceSuccessText:""}:{form:{id:"",name:"",description:"",fps:""},sequenceSuccessText:""}},computed:Object(l["a"])({},Object(d["c"])(["currentProduction"])),methods:Object(l["a"])({},Object(d["b"])([]),{runConfirmation:function(){this.confirmClicked()},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.sequenceToEdit&&this.sequenceToEdit.id},resetForm:function(){this.sequenceSuccessText="",this.isEditing()?this.form={id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description}:(this.form.id=null,this.form.name="",this.form.description="")}}),mounted:function(){this.resetForm()},watch:{active:function(){this.resetForm()},sequenceToEdit:function(){this.resetForm()}}},Cg=Sg,wg=(s("54fe"),Object(f["a"])(Cg,bg,Tg,!1,null,"338664b2",null)),Eg=wg.exports,Pg={name:"sequences",components:{SequenceList:kg,EditSequenceModal:Eg,DeleteModal:Bu,PageTitle:fd,SearchField:pp,SearchIcon:Ic["y"]},data:function(){return{initialLoading:!0,modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},loading:{edit:!1,del:!1},errors:{edit:!1,del:!1},sequenceToDelete:null,sequenceToEdit:null}},computed:Object(l["a"])({},Object(d["c"])(["currentEpisode","currentProduction","displayedSequences","isCurrentUserManager","isShotsLoading","isShotsLoadingError","isTVShow","sequences","sequenceMap","sequencesPath","sequenceStats","sequenceSearchText","sequenceListScrollPosition","shotValidationColumns"])),mounted:function(){var t=this;setTimeout(function(){t.initSequences().then(t.handleModalsDisplay).then(t.resizeHeaders).then(function(){t.initialLoading=!1}),t.setDefaultSearchText(),t.setDefaultListScrollPosition()},100)},methods:Object(l["a"])({},Object(d["b"])(["computeSequenceStats","deleteSequence","editSequence","hideAssignations","initSequences","loadComment","setLastProductionScreen","setSequenceSearch","setSequenceListScrollPosition","showAssignations"]),{setDefaultSearchText:function(){this.sequenceSearchText.length>0&&this.$refs["sequence-search-field"].setValue(this.sequenceSearchText)},setDefaultListScrollPosition:function(){this.$refs["sequence-list"]&&this.$refs["sequence-list"].setScrollPosition(this.sequenceListScrollPosition)},navigateToList:function(){this.$router.push(this.sequencesPath)},confirmEditSequence:function(t){var e=this;this.loading.edit=!0,this.errors.edit=!1,this.editSequence(t).then(function(){e.loading.edit=!1,e.resizeHeaders(),e.navigateToList()}).catch(function(){e.loading.edit=!1,e.errors.edit=!0})},confirmDeleteSequence:function(){var t=this;this.loading.del=!0,this.deleteSequence(this.sequenceToDelete).then(function(){t.loading.del=!1,t.resizeHeaders(),t.navigateToList()}).catch(function(){t.loading.del=!1,t.errors.del=!0})},resetEditModal:function(){var t={name:""};this.sequences.length>0&&(t.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(t.production_id=this.openProductions[0].id),this.sequenceToEdit=t},deleteText:function(){var t=this.sequenceToDelete;return t?this.$t("sequences.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.sequence_id;this.errors={edit:!1,delete:!1},this.modals={isNewDisplayed:!1,isDeleteDisplayed:!1},t.indexOf("edit")>0?(this.sequenceToEdit=this.sequenceMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete")>0&&(this.sequenceToDelete=this.sequenceMap[e],this.modals.isDeleteDisplayed=!0)},onSearchChange:function(t){var e=this.$refs["sequence-search-field"].getValue();this.setSequenceSearch(e)},saveScrollPosition:function(t){this.setSequenceListScrollPosition(t)},resizeHeaders:function(){var t=this;setTimeout(function(){t.$refs["sequence-list"]&&t.$refs["sequence-list"].resizeHeaders()},0)}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){this.$refs["sequence-search-field"].setValue(""),this.$store.commit("SET_SEQUENCE_LIST_SCROLL_POSITION",0),this.isTVShow||this.initSequences().then(this.handleModalsDisplay).then(this.resizeHeaders)},currentEpisode:function(){var t=this;this.isTVShow&&this.currentEpisode&&this.initSequences().then(this.handleModalsDisplay).then(this.resizeHeaders).then(function(){t.initialLoading=!1})}},socket:{events:{"comment:new":function(t){var e=this,s=t.comment_id;this.loadComment({commentId:s,callback:function(){e.computeSequenceStats()}})}}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("sequences.title")," - Kitsu")}:{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" ".concat(this.$t("sequences.title")," - Kitsu")}}},xg=Pg,Og=(s("3689"),Object(f["a"])(xg,hg,mg,!1,null,"1fd7f87c",null)),Ag=Og.exports,$g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page shot"},[s("div",{staticClass:"page-header flexrow"},[s("router-link",{staticClass:"flexrow-item has-text-centered back-link",attrs:{to:t.shotsPath}},[s("chevron-left-icon")],1),t.currentShot?s("entity-thumbnail",{staticClass:"shot-thumbnail flexrow-item",attrs:{entity:t.currentShot,"with-link":!1}}):t._e(),s("div",{staticClass:"flexrow-item"},[s("page-title",{staticClass:"entity-title",attrs:{text:t.title}})],1),s("div",{staticClass:"flexrow-item"},[s("button-simple",{attrs:{icon:"edit"},on:{click:function(e){t.modals.edit=!0}}})],1)],1),s("div",{staticClass:"columns"},[s("div",{staticClass:"column task-column"},[s("page-subtitle",{attrs:{text:t.$t("shots.tasks")}}),s("entity-task-list",{staticClass:"task-list",attrs:{entries:t.currentShot?t.currentShot.tasks:[],"is-loading":!t.currentShot,"is-error":!1}})],1),s("div",{staticClass:"column"},[s("page-subtitle",{attrs:{text:t.$t("main.info")}}),s("div",{staticClass:"table-body"},[t.currentShot?s("table",{staticClass:"table"},[s("tbody",[t.currentShot.data&&t.currentShot.data.fps?s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.fps")))]),s("td",[t._v("\n                "+t._s(t.currentShot?t.currentShot.data.fps:"")+"\n              ")])]):t._e(),t.currentShot.data&&t.currentShot.data.frame_in?s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.frame_in")))]),s("td",[t._v("\n                "+t._s(t.currentShot?t.currentShot.data.frame_in:"")+"\n              ")])]):t._e(),t.currentShot.data&&t.currentShot.data.frame_out?s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.frame_out")))]),s("td",[t._v("\n                "+t._s(t.currentShot?t.currentShot.data.frame_out:"")+"\n              ")])]):t._e(),s("tr",[s("td",{staticClass:"field-label"},[t._v(t._s(t.$t("shots.fields.description")))]),s("description-cell",{attrs:{entry:t.currentShot,full:!0}})],1),t._l(t.shotMetadataDescriptors,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"field-label"},[t._v(t._s(e.name))]),s("td",[t._v("\n                "+t._s(t.currentShot.data?t.currentShot.data[e.field_name]:"")+"\n              ")])])})],2)]):t._e()])],1)]),s("div",{staticClass:"shot-casting"},[s("page-subtitle",{attrs:{text:t.$t("shots.casting")}}),t.currentShot?s("div",t._l(t.currentShot.castingAssetsByType,function(e){return t.currentShot.castingAssetsByType[0].length>0?s("div",{key:e.length>0?e[0].asset_type_name:"",staticClass:"type-assets"},[s("div",{staticClass:"asset-type"},[t._v("\n          "+t._s(e.length>0?e[0].asset_type_name:"")+"\n        ")]),s("div",{staticClass:"asset-list"},t._l(e,function(e){return s("router-link",{key:e.id,staticClass:"asset-link",attrs:{to:{name:"asset",params:{production_id:t.currentProduction.id,asset_id:e.asset_id}}}},[s("entity-thumbnail",{attrs:{entity:e,square:!0,"empty-width":100,"empty-height":100,"with-link":!1}}),s("div",[s("span",[t._v(t._s(e.name))]),e.nb_occurences>1?s("span",[t._v("\n                ("+t._s(e.nb_occurences)+")\n              ")]):t._e()])],1)}))]):s("div",[t._v("\n        "+t._s(t.$t("shots.no_casting"))+"\n      ")])})):s("table-info",{attrs:{"is-loading":t.casting.isLoadin,"is-error":t.casting.isError}})],1),s("edit-shot-modal",{ref:"edit-shot-modal",attrs:{active:t.modals.edit,"is-loading":t.loading.edit,"is-error":t.errors.edit,"shot-to-edit":t.currentShot},on:{cancel:function(e){t.modals.edit=!1},confirm:t.confirmEditShot}})],1)},Lg=[],Dg=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.shotToEdit&&this.shotToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("shots.edit_title"))+" "+t._s(t.shotToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("shots.new_shot"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("combobox",{attrs:{label:t.$t("shots.fields.sequence"),options:t.getSequenceOptions},model:{value:t.form.sequence_id,callback:function(e){t.$set(t.form,"sequence_id",e)},expression:"form.sequence_id"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("shots.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:t.$t("shots.fields.description")},on:{keyup:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter"))&&e.ctrlKey?t.runConfirmation(e):null}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nbFramesField",attrs:{label:t.$t("shots.fields.nb_frames"),type:"number"},on:{enter:t.runConfirmation},model:{value:t.form.nb_frames,callback:function(e){t.$set(t.form,"nb_frames",e)},expression:"form.nb_frames"}}),s("text-field",{ref:"frameInField",attrs:{label:t.$t("shots.fields.frame_in"),type:"number"},model:{value:t.form.frameIn,callback:function(e){t.$set(t.form,"frameIn",e)},expression:"form.frameIn"}}),s("text-field",{ref:"frameOutField",attrs:{label:t.$t("shots.fields.frame_out"),type:"number"},on:{enter:t.runConfirmation},model:{value:t.form.frameOut,callback:function(e){t.$set(t.form,"frameOut",e)},expression:"form.frameOut"}}),s("text-field",{ref:"fpsField",attrs:{label:t.$t("shots.fields.fps"),type:"number"},on:{enter:t.runConfirmation},model:{value:t.form.fps,callback:function(e){t.$set(t.form,"fps",e)},expression:"form.fps"}}),t._l(t.shotMetadataDescriptors,function(e){return s("div",{key:e.id},[e.choices.length>0?s("combobox",{attrs:{label:e.name,options:t.getDescriptorChoicesOptions(e)},model:{value:t.form.data[e.field_name],callback:function(s){t.$set(t.form.data,e.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:e.name},on:{enter:t.runConfirmation},model:{value:t.form.data[e.field_name],callback:function(s){t.$set(t.form.data,e.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)})],2),s("div",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),t.cancelRoute?s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")]):s("button",{staticClass:"button is-link",on:{click:function(e){t.$emit("cancel")}}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")]),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n          "+t._s(t.$t("shots.edit_fail"))+"\n        ")]):t._e(),s("p",{staticClass:"success has-text-right info-message"},[t._v("\n          "+t._s(t.shotSuccessText)+"\n        ")])],1)])])])},jg=[],Ig={name:"edit-shot-modal",mixins:[Zc],components:{Combobox:vl,TextField:al,TextareaField:ul},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","shotToEdit","errorText"],data:function(){return{form:{data:{}},shotSuccessText:""}},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","getSequenceOptions","getOpenProductionOptions","openProductions","sequences","shots","shotCreated","shotMetadataDescriptors"]),{frameIn:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_in:""},frameOut:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_out:""},fps:function(){return this.shotToEdit.data?this.shotToEdit.data.fps:""}}),methods:Object(l["a"])({},Object(d["b"])([]),{runConfirmation:function(){this.isEditing()?this.confirmClicked():this.confirmAndStayClicked()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},getDescriptorChoicesOptions:function(t){var e=t.choices.map(function(t){return{label:t,value:t}});return[{label:"",value:""}].concat(Object(Oa["a"])(e))},isEditing:function(){return this.shotToEdit&&this.shotToEdit.id},resetForm:function(){this.shotSuccessText="",this.isEditing()?this.form={sequence_id:this.shotToEdit.sequence_id,project_id:this.shotToEdit.project_id,name:this.shotToEdit.name,description:this.shotToEdit.description,nb_frames:this.shotToEdit.nb_frames,frameIn:this.frameIn,frameOut:this.frameOut,fps:this.fps,data:Object(l["a"])({},this.shotToEdit.data)||{}}:(this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.sequences.length>0&&(this.form.sequence_id=this.sequences[0].id),this.form.name="",this.form.description="",this.form.nb_frames=0,this.form.data={})}}),mounted:function(){this.resetForm()},watch:{active:function(){var t=this;this.shotSuccessText="",this.resetForm(),this.active&&setTimeout(function(){t.$refs.nameField.focus()},100)},shotToEdit:function(){this.resetForm()},shotCreated:function(){this.isEditing()?this.shotSuccessText=this.$t("shots.edit_success",{name:this.shotCreated}):this.shotSuccessText=this.$t("shots.new_success",{name:this.shotCreated})}}},Mg=Ig,Fg=(s("aa62"),Object(f["a"])(Mg,Dg,jg,!1,null,"5e5e2d5e",null)),qg=Fg.exports,Ng={name:"shot",components:{ButtonSimple:Vc,ChevronLeftIcon:Ic["d"],DescriptionCell:Yc,EditShotModal:qg,EntityThumbnail:ld,EntityTaskList:id,PageSubtitle:bd,PageTitle:fd,TableInfo:Vl},data:function(){return{currentShot:null,casting:{isLoading:!1,isError:!1},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},created:function(){var t=this;this.clearSelectedTasks(),this.currentShot=this.getCurrentShot(),this.casting.isLoading=!0,this.casting.isError=!1,this.currentShot?this.loadShotCasting({shot:this.currentShot,callback:function(e,s){t.casting.isError=!!e,t.casting.isLoading=!0}}):this.loadShot({shotId:this.route.params.shot_id,callback:function(e){e||(t.currentShot=t.getCurrentShot(),t.loadShotCasting({shot:t.currentShot,callback:function(e,s){t.casting.isError=!!e,t.casting.isLoading=!0}}))}})},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","route","shotMap","shotMetadataDescriptors","shotsPath"]),{title:function(){return this.currentShot?this.currentShot.episode_name?"".concat(this.currentShot.episode_name," / ")+"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"".concat(this.currentShot.sequence_name," / ")+"".concat(this.currentShot.name):"Loading..."},shotThumbnailPath:function(){var t=this.currentShot.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,".png")},isPreview:function(){return this.currentShot&&this.currentShot.preview_file_id&&this.currentShot.preview_file_id.length>0}}),methods:Object(l["a"])({},Object(d["b"])(["editShot","loadShot","loadShotCasting","clearSelectedTasks"]),{changeTab:function(t){this.selectedTab=t},getCurrentShot:function(){return this.shotMap[this.route.params.shot_id]||null},onEditClicked:function(){this.modals.edit=!0},confirmEditShot:function(t){var e=this;t.id=this.currentShot.id,this.loading.edit=!0,this.errors.edit=!1,this.editShot({data:t,callback:function(t){t?(e.loading.edit=!1,e.errors.edit=!0):(e.loading.edit=!1,e.modals.edit=!1)}})}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Rg=Ng,Vg=(s("d47e"),Object(f["a"])(Rg,$g,Lg,!1,null,"ddbd688c",null)),Bg=Vg.exports,Ug=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"shots page"},[s("div",{staticClass:"shot-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("search-field",{ref:"shot-search-field",attrs:{"can-save":!0,placeholder:"ex: e01 s01 anim=wip"},on:{change:t.onSearchChange,save:t.saveSearchQuery}})],1)]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),t.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-link",{staticClass:"flexrow-item",attrs:{title:t.$t("main.csv.import_file"),icon:"upload","is-responsive":!0,path:t.importPath}}),s("button-href-link",{staticClass:"flexrow-item",attrs:{title:t.$t("main.csv.export_file"),icon:"download","is-responsive":!0,path:"/api/export/csv/projects/"+t.currentProduction.id+"/shots.csv"}}),s("button-link",{staticClass:"flexrow-item",attrs:{text:t.$t("shots.manage"),icon:"plus","is-responsive":!0,path:t.manageShotsPath}})],1):t._e()])]),s("div",{staticClass:"query-list"},[t.isShotsLoading||t.initialLoading?t._e():s("search-query-list",{attrs:{queries:t.shotSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1)]),s("shot-list",{ref:"shot-list",attrs:{entries:t.displayedShots,"is-loading":t.isShotsLoading||t.initialLoading,"is-error":t.isShotsLoadingError,"validation-columns":t.shotValidationColumns},on:{scroll:t.saveScrollPosition,"delete-all-tasks":t.onDeleteAllTasksClicked,"add-metadata":t.onAddMetadataClicked,"delete-metadata":t.onDeleteMetadataClicked,"edit-metadata":t.onEditMetadataClicked}})],1)]),1===t.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(t.selectedTasks)[0]}})],1):t._e(),s("manage-shots-modal",{attrs:{active:t.modals.isManageDisplayed,"is-loading":t.loading.manage,"is-error":!1,"is-success":!1,"cancel-route":t.shotsPath}}),s("edit-shot-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-loading-stay":t.loading.stay,"is-error":t.editShot.isCreateError,"is-success":t.editShot.isSuccess,"cancel-route":t.shotsPath,"shot-to-edit":t.shotToEdit},on:{confirm:t.confirmEditShot}}),s("delete-modal",{ref:"delete-shot-modal",attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteShot.isLoading,"is-error":t.deleteShot.isError,"cancel-route":t.shotsPath,text:t.deleteText(),"error-text":t.$t("shots.delete_error")},on:{confirm:t.confirmDeleteShot}}),s("delete-modal",{ref:"restore-shot-modal",attrs:{active:t.modals.isRestoreDisplayed,"is-loading":t.restoreShot.isLoading,"is-error":t.restoreShot.isError,"cancel-route":t.shotsPath,text:t.restoreText(),"error-text":t.$t("shots.restore_error")},on:{confirm:t.confirmRestoreShot}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:t.modals.isDeleteMetadataDisplayed,"is-loading":t.loading.deleteMetadata,"is-error":t.errors.deleteMetadata,text:t.$t("productions.metadata.delete_text"),"error-text":t.$t("productions.metadata.delete_error")},on:{cancel:function(e){t.modals.isDeleteMetadataDisplayed=!1},confirm:t.confirmDeleteMetadata}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:t.modals.isDeleteAllTasksDisplayed,"is-loading":t.loading.deleteAllTasks,"is-error":t.errors.deleteAllTasks,"cancel-route":t.shotsPath,text:t.deleteAllTasksText(),"error-text":t.$t("tasks.delete_all_error"),"lock-text":t.deleteAllTasksLockText},on:{confirm:t.confirmDeleteAllTasks}}),s("import-modal",{attrs:{active:t.modals.isImportDisplayed,"is-loading":t.loading.importing,"is-error":t.errors.importing,"cancel-route":t.shotsPath,"form-data":t.shotsCsvFormData,columns:t.columns},on:{fileselected:t.selectFile,confirm:t.uploadImportFile}}),s("create-tasks-modal",{attrs:{active:t.modals.isCreateTasksDisplayed,"is-loading":t.loading.creatingTasks,"is-loading-stay":t.loading.creatingTasksStay,"is-error":t.errors.creatingTasks,"cancel-route":t.shotsPath,title:t.$t("tasks.create_tasks_shot"),text:t.$t("tasks.create_tasks_shot_explaination"),"error-text":t.$t("tasks.create_tasks_shot_failed")},on:{confirm:t.confirmCreateTasks,"confirm-and-stay":t.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:t.modals.isAddMetadataDisplayed,"is-loading":t.loading.addMetadata,"is-loading-stay":t.loading.addMetadata,"is-error":t.errors.addMetadata,"descriptor-to-edit":t.descriptorToEdit},on:{cancel:t.closeMetadataModal,confirm:t.confirmAddMetadata}})],1)},zg=[],Hg=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("page-title",{attrs:{text:t.$t("shots.manage")}}),s("div",{staticClass:"shot-columns"},[t.isTVShow?s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[t._v("Episodes")]),s("div",{staticClass:"list"},t._l(t.episodes,function(e){return s("div",{key:e.id,class:{"entity-line":!0,selected:e.id===t.selectedEpisodeId},on:{click:function(s){t.selectEpisode(e.id)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.names.episode,expression:"names.episode"},{name:"focus",rawName:"v-focus"}],ref:"addEpisodeInput",staticClass:"input",attrs:{placeholder:"EP01",type:"text"},domProps:{value:t.names.episode},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"tab",9,e.key,"Tab")?t.focusAddSequence(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addEpisode(e):null}],input:function(e){e.target.composing||t.$set(t.names,"episode",e.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":t.loading.addEpisode},attrs:{disabled:!t.isAddEpisodeAllowed},on:{click:t.addEpisode}},[t._v("\n              "+t._s(t.$t("main.add"))+"\n            ")])])]):t._e(),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[t._v("Sequences")]),s("div",{staticClass:"list"},t._l(t.displayedSequences,function(e){return s("div",{key:e.id,class:{"entity-line":!0,selected:e.id===t.selectedSequenceId},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"tab",9,e.key,"Tab")?t.focusAddShot(e):null},click:function(s){t.selectSequence(e.id)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.names.sequence,expression:"names.sequence"}],ref:"addSequenceInput",staticClass:"input",attrs:{placeholder:"SQ01",type:"text"},domProps:{value:t.names.sequence},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addSequence(e):null},input:function(e){e.target.composing||t.$set(t.names,"sequence",e.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":t.loading.addSequence},attrs:{disabled:!t.isAddSequenceAllowed},on:{click:t.addSequence}},[t._v("\n              "+t._s(t.$t("main.add"))+"\n            ")])])]),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[t._v("Shots")]),s("div",{staticClass:"list"},t._l(t.displayedShots,function(e){return s("div",{key:e.id,staticClass:"entity-line"},[t._v("\n              "+t._s(e.name)+"\n            ")])})),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.names.shot,expression:"names.shot"}],ref:"addShotInput",staticClass:"input",attrs:{placeholder:"SH01",type:"text"},domProps:{value:t.names.shot},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addShot(e):null},input:function(e){e.target.composing||t.$set(t.names,"shot",e.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":t.loading.addShot},attrs:{disabled:!t.isAddShotAllowed},on:{click:t.addShot}},[t._v("\n              "+t._s(t.$t("main.add"))+"\n            ")])])])]),s("p",{staticClass:"has-text-right modal-footer"},[s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.close"))+"\n        ")])],1)],1)])])},Gg=[],Wg={name:"manage-shot-modal",components:{PageTitle:fd},props:["onConfirmClicked","text","active","cancelRoute","errorText"],data:function(){return{names:{episode:"",sequence:"",shot:""},loading:{addEpisode:!1,addSequence:!1,addShot:!1},displayedSequences:[],displayedShots:[],selectedEpisodeId:null,selectedSequenceId:null}},watch:{active:function(){var t=this;this.active&&setTimeout(function(){t.isTVShow?t.$refs.addEpisodeInput.focus():t.$refs.addSequenceInput.focus()},100)},sequences:function(){this.displayedSequences=this.sequences,this.displayedShots=[]}},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","episodes","sequences","shotMap","sequences","isTVShow","currentProduction"]),{isAddEpisodeAllowed:function(){var t=this,e=""===this.names.episode,s=this.episodes.find(function(e){return t.names.episode===e.name});return!e&&!s},isAddSequenceAllowed:function(){var t=this,e=""===this.names.sequence,s=this.displayedSequences.find(function(e){return t.names.sequence===e.name});return!e&&!s&&(this.selectedEpisodeId||!this.isTVShow)},isAddShotAllowed:function(){var t=this,e=""===this.names.shot,s=this.displayedShots.find(function(e){return t.names.shot===e.name});return!e&&!s&&this.selectedSequenceId}}),methods:Object(l["a"])({},Object(d["b"])(["loadShots","newEpisode","newSequence","newShot","setCurrentEpisode"]),{focusAddSequence:function(){this.$refs.addSequenceInput.focus()},focusAddShot:function(){this.$refs.addShotInput.focus()},selectEpisode:function(t){this.isTVShow?(this.selectedEpisodeId=t,this.$router.push({name:"episode-manage-shots",params:{production_id:this.currentProduction.id,episode_id:t}})):(this.selectedEpisodeId=t,this.displayedSequences=this.sequences.filter(function(e){return e.parent_id===t}),this.displayedShots=[])},selectSequence:function(t){this.selectedSequenceId=t,this.displayedShots=Ca()(this.shotMap).filter(function(e){return e.sequence_id===t})},addEpisode:function(){var t=this;if(this.isAddEpisodeAllowed){var e=this.names.episode;if(e.length>0){this.loading.addEpisode=!0;var s={name:this.names.episode,project_id:this.currentProduction.id};this.newEpisode({episode:s,callback:function(e,s){e&&console.log(e),t.loading.addEpisode=!1,t.selectEpisode(s.id),t.names.episode=Gc.generateNextName(s.name)}})}}},addSequence:function(){var t=this;if(this.isAddSequenceAllowed){var e=this.names.sequence;if(e.length>0&&(this.selectedEpisodeId||!this.isTVShow)){this.loading.addSequence=!0;var s={name:this.names.sequence,episode_id:this.selectedEpisodeId,project_id:this.currentProduction.id};this.newSequence({sequence:s,callback:function(e,s){e&&console.log(e),t.loading.addSequence=!1,t.selectEpisode(t.selectedEpisodeId),t.selectSequence(s.id),t.names.sequence=Gc.generateNextName(s.name)}})}}},addShot:function(){var t=this;if(this.isAddShotAllowed){var e=this.names.shot;if(this.loading.addShot=!0,e.length>0&&this.selectedSequenceId){var s={name:this.names.shot,sequence_id:this.selectedSequenceId,project_id:this.currentProduction.id};this.loading.addShot=!1,this.newShot({shot:s,callback:function(e){e&&console.log(e),t.loading.addShot=!1,t.selectSequence(t.selectedSequenceId),t.names.shot=Gc.generateNextName(s.name)}})}}}})},Kg=Wg,Qg=(s("749d"),Object(f["a"])(Kg,Hg,Gg,!1,null,"2a1086ac",null)),Yg=Qg.exports,Xg=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":t.hiddenColumns[t.lastHeaderMenuDisplayed],"is-current-user-admin":t.isCurrentUserAdmin},on:{"minimize-clicked":function(e){t.onMinimizeColumnToggled()},"delete-all-clicked":function(e){t.onDeleteAllTasksClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":t.isCurrentUserAdmin},on:{"edit-clicked":function(e){t.onEditMetadataClicked()},"delete-clicked":function(e){t.onDeleteMetadataClicked()}}}),s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"thumbnail"}),s("th",{ref:"th-sequence",staticClass:"sequence"},[t._v("\n            "+t._s(t.$t("shots.fields.sequence"))+"\n          ")]),s("th",{ref:"th-shot",staticClass:"name shot-name"},[t._v("\n            "+t._s(t.$t("shots.fields.name"))+"\n          ")]),!t.isCurrentUserClient&&t.isShowInfos?s("th",{staticClass:"description"},[t._v("\n            "+t._s(t.$t("shots.fields.description"))+"\n            "),t.isCurrentUserAdmin&&!t.isLoading?s("button-simple",{staticClass:"is-small",attrs:{icon:"plus",text:""},on:{click:t.onAddMetadataClicked}}):t._e()],1):t._e(),t._l(t.shotMetadataDescriptors,function(e){return t.isShowInfos?s("th",{key:e.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[t._v("\n              "+t._s(e.name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){t.showMetadataHeaderMenu(e.id,s)}}})],1)]):t._e()}),!t.isCurrentUserClient&&t.isShowInfos?s("th",{ref:"th-spent",staticClass:"time-spent"},[t._v("\n            "+t._s(t.$t("shots.fields.time_spent"))+"\n          ")]):t._e(),t.isShowInfos?s("th",{staticClass:"frames"},[t._v("\n            "+t._s(t.$t("shots.fields.nb_frames"))+"\n          ")]):t._e(),t.isFrameIn&&t.isShowInfos?s("th",{staticClass:"framein"},[t._v("\n            "+t._s(t.$t("shots.fields.frame_in"))+"\n          ")]):t._e(),t.isFrameOut&&t.isShowInfos?s("th",{staticClass:"frameout"},[t._v("\n            "+t._s(t.$t("shots.fields.frame_out"))+"\n          ")]):t._e(),t.isFps&&t.isShowInfos?s("th",{staticClass:"fps"},[t._v("\n            "+t._s(t.$t("shots.fields.fps"))+"\n          ")]):t._e(),t._l(t.sortedValidationColumns,function(e){return t.isLoading||t.hiddenColumns[e]&&!t.isShowInfos?t._e():s("th",{key:e,class:{"validation-cell":!t.hiddenColumns[e],"hidden-validation-cell":t.hiddenColumns[e]},style:t.getValidationStyle(e)},[s("div",{staticClass:"flexrow"},[s("router-link",{staticClass:"flexrow-item",staticStyle:{"margin-right":"0"},attrs:{to:t.taskTypePath(e)}},[t._v("\n                "+t._s(t.hiddenColumns[e]?"":t.taskTypeMap[e].name)+"\n              ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){t.showHeaderMenu(e,s)}}})],1)])}),s("th",{staticClass:"actions"},[t.isCurrentUserManager?s("button-link",{class:{"is-small":!0,highlighted:t.isEmptyTask},attrs:{icon:"plus",text:t.$t("tasks.create_tasks"),path:t.createTasksPath}}):t._e()],1)],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),!t.isEmptyList||t.isCurrentUserClient||t.isLoading?t._e():s("div",{staticClass:"has-text-centered"},[t._m(0),s("p",{staticClass:"info"},[t._v(t._s(t.$t("shots.empty_list")))]),s("button-link",{staticClass:"level-item big-button",attrs:{text:t.$t("shots.new_shots"),path:t.manageShotsPath}})],1),t.isEmptyList&&t.isCurrentUserClient&&!t.isLoading?s("div",{staticClass:"has-text-centered"},[t._m(1),s("p",{staticClass:"info"},[t._v(t._s(t.$t("shots.empty_list_client")))])]):t._e(),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{ref:"body-tbody"},t._l(t.entries,function(e,i){return s("tr",{key:e.id,class:{canceled:e.canceled}},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e}})],1),s("td",{class:{name:!0,bold:!e.canceled}},[t._v("\n            "+t._s(e.sequence_name)+"\n          ")]),s("td",{class:{"shot-name":!0,name:!0,bold:!e.canceled}},[s("router-link",{attrs:{to:t.shotPath(e.id)}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1),!t.isCurrentUserClient&&t.isShowInfos?s("description-cell",{staticClass:"description",attrs:{entry:e}}):t._e(),t._l(t.shotMetadataDescriptors,function(i){return t.isShowInfos?s("td",{key:e.id+"-"+i.id,staticClass:"metadata-descriptor"},[t._v("\n            "+t._s(e.data?e.data[i.field_name]:"")+"\n          ")]):t._e()}),!t.isCurrentUserClient&&t.isShowInfos?s("td",{staticClass:"time-spent"},[t._v("\n            "+t._s(t.formatDuration(e.timeSpent))+"\n          ")]):t._e(),!t.isCurrentUserClient&&t.isShowInfos?s("td",{staticClass:"frames"},[t._v("\n            "+t._s(e.nb_frames)+"\n          ")]):t._e(),t.isFrameIn&&t.isShowInfos?s("td",{staticClass:"framein"},[t._v("\n            "+t._s(e.data&&e.data.frame_in?e.data.frame_in:"")+"\n          ")]):t._e(),t.isFrameIn&&t.isShowInfos?s("td",{staticClass:"frameout"},[t._v("\n            "+t._s(e.data&&e.data.frame_out?e.data.frame_out:"")+"\n          ")]):t._e(),t.isFps&&t.isShowInfos?s("td",{staticClass:"fps"},[t._v("\n            "+t._s(e.data&&e.data.fps?e.data.fps:"")+"\n          ")]):t._e(),t._l(t.sortedValidationColumns,function(n,a){return t.isLoading||t.hiddenColumns[n]&&!t.isShowInfos?t._e():s("validation-cell",{key:n+"-"+e.id,ref:"validation-"+i+"-"+a,refInFor:!0,class:{"validation-cell":!t.hiddenColumns[n],"hidden-validation-cell":t.hiddenColumns[n]},attrs:{column:t.taskTypeMap[n],entity:e,"task-test":t.taskMap[e.validations[n]],minimized:t.hiddenColumns[n],selected:t.shotSelectionGrid[i][a],rowX:i,columnY:a},on:{select:t.onTaskSelected,unselect:t.onTaskUnselected}})}),t.isCurrentUserManager?s("row-actions",{attrs:{entry:e,"edit-route":t.editPath(e.id),"restore-route":t.restorePath(e.id),"delete-route":t.deletePath(e.id)}}):s("td",{staticClass:"actions"})],2)}))])]),t.isEmptyList||t.isLoading?t._e():s("p",{staticClass:"has-text-centered nb-shots"},[t._v("\n    "+t._s(t.displayedShotsLength)+" "+t._s(t.$tc("shots.number",t.displayedShotsLength))+"\n    ("+t._s(t.formatDuration(t.displayedShotsTimeSpent))+"\n     "+t._s(t.$tc("main.days_spent",t.displayedShotsTimeSpent))+", "+t._s(t.displayedShotsFrames)+" "+t._s(t.$tc("main.nb_frames",t.displayedShotsFrames))+")\n\n  ")])],1)},Jg=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])}],Zg={name:"shot-list",mixins:[Ad,Ld,$d],props:["entries","isLoading","isError","validationColumns"],data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonHrefLink:qd,ButtonLink:zd,ButtonSimple:Vc,ChevronDownIcon:Ic["c"],DescriptionCell:Yc,EntityThumbnail:ld,PageTitle:fd,RowActions:Yd,TableHeaderMenu:su,TableMetadataHeaderMenu:cu,TableInfo:Vl,ValidationCell:mu},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","currentEpisode","displayedShotsLength","displayedShotsTimeSpent","displayedShotsFrames","isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isFps","isFrameIn","isFrameOut","isSingleEpisode","isShowInfos","isTVShow","nbSelectedTasks","shotFilledColumns","shotMap","shotMetadataDescriptors","shotSearchText","shotSelectionGrid","taskMap","taskTypeMap"]),{isEmptyList:function(){return this.entries&&0===this.entries.length&&!this.isLoading&&!this.isError&&(!this.shotSearchText||0===this.shotSearchText.length)},createTasksPath:function(){return this.getPath("create-shot-tasks")},manageShotsPath:function(){var t={name:"manage-shots",params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-manage-shots",t.params.episode_id=this.currentEpisode.id),t},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length}}),methods:Object(l["a"])({},Object(d["b"])(["displayMoreShots"]),{onHeaderScroll:function(t,e){this.$refs.tableWrapper.scrollLeft=e.scrollLeft},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<e.scrollTop+100&&this.loadMoreShots()},loadMoreShots:function(){this.displayMoreShots(),this.$nextTick(this.resizeHeaders)},resizeHeaders:function(){var t,e;this.$refs["body-tbody"]&&this.$refs["body-tbody"].children.length>0&&(t=this.$refs["body-tbody"].children[0].children[1].offsetWidth,e=this.$refs["body-tbody"].children[0].children[2].offsetWidth,this.$refs["th-sequence"].style="min-width: ".concat(t,"px"),this.$refs["th-shot"].style="min-width: ".concat(e,"px"))},taskTypePath:function(t){return this.isTVShow&&this.currentEpisode?{name:"episode-task-type",params:{production_id:this.currentProduction.id,episode_id:this.currentEpisode.id,task_type_id:t,type:"shots"}}:{name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:t,type:"shots"}}},shotPath:function(t){return this.getPath("shot",t)},editPath:function(t){return this.getPath("edit-shot",t)},deletePath:function(t){return this.getPath("delete-shot",t)},restorePath:function(t){return this.getPath("restore-shot",t)},getPath:function(t,e){var s={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(t),s.params.episode_id=this.currentEpisode.id),e&&(s.params.shot_id=e),s}})},tk=Zg,ek=(s("b068"),Object(f["a"])(tk,Xg,Jg,!1,null,"54b8539a",null)),sk=ek.exports,ik={name:"shots",components:{AddMetadataModal:Au,ButtonLink:zd,ButtonHrefLink:qd,Combobox:vl,CreateTasksModal:Mu,DeleteModal:Bu,EditShotModal:qg,ImportModal:tp,HardDeleteModal:op,ManageShotsModal:Yg,PageTitle:fd,SearchField:pp,SearchIcon:Ic["y"],SearchQueryList:yp,ShowAssignationsButton:Cp,ShowInfosButton:Ap,ShotList:sk,TaskInfo:qh},data:function(){return{initialLoading:!0,modals:{isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isDeleteAllTasksDisplayed:!1,isImportDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1},loading:{addMetadata:!1,creatingTasks:!1,creatingTasksStay:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,importing:!1,stay:!1},errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,importing:!1},descriptorToEdit:{},shotToDelete:null,shotToEdit:null,columns:["Episode","Sequence","Name","Description","FPS","Frame In","Frame Out"],deleteAllTasksLockText:null}},computed:Object(l["a"])({},Object(d["c"])(["currentEpisode","currentProduction","deleteShot","displayedShots","editShot","episodeMap","episodes","isCurrentUserManager","isShotsLoading","isShotsLoadingError","isShowAssignations","isTVShow","nbSelectedTasks","openProductions","restoreShot","sequences","selectedTasks","shotMap","shotsCsvFormData","shotSearchQueries","shotSearchText","shotsPath","shotValidationColumns","shotListScrollPosition","taskTypeMap"]),{importPath:function(){return this.getPath("import-shots")},manageShotsPath:function(){return this.getPath("manage-shots")}}),created:function(){this.setLastProductionScreen("shots")},mounted:function(){var t=this;this.shotSearchText.length>0&&this.$refs["shot-search-field"].setValue(this.shotSearchText),Ta()(this.shotMap).length<2||this.shotValidationColumns.length>0&&!Ta()(this.shotMap)[0].validations?setTimeout(function(){t.loadShots(function(e){setTimeout(function(){t.initialLoading=!1},200),t.resizeHeaders(),e||(t.onSearchChange(),t.handleModalsDisplay(),setTimeout(function(){t.resizeHeaders(),t.$refs["shot-list"].setScrollPosition(t.shotListScrollPosition)},500))})},100):(this.isShotsLoading||(this.initialLoading=!1),this.resizeHeaders(),this.onSearchChange(),this.$refs["shot-list"].setScrollPosition(this.shotListScrollPosition))},methods:Object(l["a"])({},Object(d["b"])(["addMetadataDescriptor","deleteAllTasks","deleteMetadataDescriptor","loadShots","loadComment","removeShotSearch","saveShotSearch","setLastProductionScreen","setShotSearch","showAssignations","hideAssignations"]),{confirmAddMetadata:function(t){var e=this;this.loading.addMetadata=!0,t.entity_type="Shot",this.addMetadataDescriptor(t).then(function(){e.loading.addMetadata=!1,e.modals.isAddMetadataDisplayed=!1}).catch(function(t){console.error(t),e.loading.addMetadata=!1,e.errors.addMetadata=!0})},closeMetadataModal:function(){this.modals.isAddMetadataDisplayed=!1},confirmDeleteMetadata:function(){var t=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then(function(){t.errors.deleteMetadata=!1,t.loading.deleteMetadata=!1,t.modals.isDeleteMetadataDisplayed=!1}).catch(function(e){console.error(e),t.errors.deleteMetadata=!0,t.loading.deleteMetadata=!1})},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(t){this.descriptorIdToDelete=t,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(t){this.descriptorToEdit=this.currentProduction.descriptors.find(function(e){return e.id===t}),this.modals.isAddMetadataDisplayed=!0},confirmEditShot:function(t){var e=this,s="newShot";this.loading.edit=!0,this.editShot.isCreateError=!1,this.shotToEdit&&this.shotToEdit.id&&(s="editShot",t.id=this.shotToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t?(e.loading.edit=!1,e.editShot.isCreateError=!0):(e.loading.edit=!1,e.modals.isNewDisplayed=!1,e.$router.push(e.shotsPath))}})},confirmDeleteAllTasks:function(){var t=this,e=this.$route.params.task_type_id,s=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllTasks({projectId:s,taskTypeId:e}).then(function(){t.loading.deleteAllTasks=!1,t.loadShots(function(){t.resizeHeaders()}),t.$router.push(t.shotsPath)}).catch(function(e){console.error(e),t.loading.deleteAllTasks=!1,t.errors.deleteAllTasks=!0})},confirmDeleteShot:function(){var t=this;this.$store.dispatch("deleteShot",{shot:this.shotToDelete,callback:function(e){e||t.$router.push(t.shotsPath)}})},confirmRestoreShot:function(){var t=this;this.$store.dispatch("restoreShot",{shot:this.shotToRestore,callback:function(e){e||t.$router.push(t.shotsPath)}})},confirmCreateTasks:function(t){var e=this;this.loading.creatingTasks=!0,this.runTasksCreation(t,function(t){t||e.$router.push(e.shotsPath),e.loading.creatingTasks=!1})},confirmCreateTasksAndStay:function(t){var e=this;this.loading.creatingTasksStay=!0,this.runTasksCreation(t,function(){e.loading.creatingTasksStay=!1})},runTasksCreation:function(t,e){var s=this;this.errors.creatingTasks=!1,this.$store.dispatch("createTasks",{task_type_id:t.task_type_id,project_id:this.currentProduction.id,type:"shots",callback:function(t){t?s.errors.creatingTasks=!0:(s.modals.isCreateTasks=!1,s.loadShots(function(){s.resizeHeaders()})),e(t)}})},resetEditModal:function(){var t={name:""};this.sequences.length>0&&(t.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(t.production_id=this.openProductions[0].id),this.shotToEdit=t},deleteText:function(){var t=this.shotToDelete;return t?this.$t("shots.delete_text",{name:t.name}):""},deleteAllTasksText:function(){var t=this.taskTypeMap[this.$route.params.task_type_id];return t?this.$t("tasks.delete_all_text",{name:t.name}):""},restoreText:function(){var t=this.shotToRestore;return t?this.$t("shots.restore_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$route.path,e=this.$route.params.shot_id;this.editShot.isSuccess=!1,this.editShot.isError=!1,this.modals={isAddMetadataDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isManagedDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1},t.indexOf("new")>0?(this.resetEditModal(),this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.shotToEdit=this.shotMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete-all-tasks")>0?this.modals.isDeleteAllTasksDisplayed=!0:t.indexOf("delete")>0?(this.shotToDelete=this.shotMap[e],this.modals.isDeleteDisplayed=!0):t.indexOf("restore")>0?(this.shotToRestore=this.shotMap[e],this.modals.isRestoreDisplayed=!0):t.indexOf("import")>0?this.modals.isImportDisplayed=!0:t.indexOf("create-tasks")>0?this.modals.isCreateTasksDisplayed=!0:t.indexOf("manage")>0&&(this.modals.isManageDisplayed=!0)},selectFile:function(t){this.$store.commit("SHOT_CSV_FILE_SELECTED",t)},uploadImportFile:function(){var t=this;this.loading.importing=!0,this.errors.importing=!1,this.$store.dispatch("uploadShotFile",function(e){e?(t.loading.importing=!1,t.errors.importing=!0):(t.loading.importing=!1,t.modals.isImportDisplayed=!1,t.loadShots(function(){t.resizeHeaders()}))})},onDeleteAllTasksClicked:function(t){var e=this.getPath("delete-all-shot-tasks"),s=this.taskTypeMap[t];e.params.task_type_id=t,this.deleteAllTasksLockText=s.name,this.$router.push(e)},onSearchChange:function(t){var e=this.$refs["shot-search-field"].getValue();this.setShotSearch(e),this.resizeHeaders()},saveScrollPosition:function(t){this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",t)},changeSearch:function(t){this.$refs["shot-search-field"].setValue(t.search_query),this.$refs["shot-search-field"].$emit("change",t.search_query),this.resizeHeaders()},saveSearchQuery:function(t){this.saveShotSearch(t).then(function(){}).catch(function(t){t&&console.log("error")})},removeSearchQuery:function(t){this.removeShotSearch(t).then(function(){}).catch(function(t){t&&console.log("error")})},resizeHeaders:function(){var t=this;setTimeout(function(){t.$refs["shot-list"]&&t.$refs["shot-list"].resizeHeaders()},0)},getPath:function(t){var e={name:t,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-".concat(t),e.params.episode_id=this.currentEpisode.id),e}}),watch:{$route:function(){this.handleModalsDisplay()},currentProduction:function(){var t=this;this.$refs["shot-search-field"].setValue(""),this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",0),this.initialLoading=!0,this.isTVShow||this.loadShots(function(e){t.initialLoading=!1,t.resizeHeaders(),e||t.handleModalsDisplay()})},currentEpisode:function(){var t=this;this.isTVShow&&this.currentEpisode&&(this.initialLoading=!0,this.loadShots(function(e){t.initialLoading=!1,t.resizeHeaders(),e||t.handleModalsDisplay()}))},displayedShots:function(){this.resizeHeaders()}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("shots.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("shots.title")," - Kitsu")}}},nk=ik,ak=(s("59c8"),Object(f["a"])(nk,Ug,zg,!1,null,"592869c6",null)),ok=ak.exports,rk=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"people page fixed-page"},[s("div",{staticClass:"flexrow mt2 add-people"},[s("span",{staticClass:"flexrow-item people-field-label"},[t._v("\n      "+t._s(t.$t("people.add_member_to_team"))+"\n    ")]),s("people-field",{ref:"people-field",staticClass:"flexrow-item",attrs:{people:t.unlistedPeople},on:{enter:t.addPerson},model:{value:t.person,callback:function(e){t.person=e},expression:"person"}}),s("button",{staticClass:"button flexrow-item",on:{click:t.addPerson}},[t._v("\n      "+t._s(t.$t("main.add"))+"\n    ")])],1),s("production-team-list",{attrs:{entries:t.teamPersons,"is-loading":t.isTeamLoading,"is-error":t.isTeamLoadingError},on:{remove:t.removePerson}})],1)},ck=[],lk=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v("\n          "+t._s(t.$t("people.list.name"))+"\n          ")]),s("th",{staticClass:"email"},[t._v("\n          "+t._s(t.$t("people.list.email"))+"\n          ")]),s("th",{staticClass:"phone"},[t._v("\n          "+t._s(t.$t("people.list.phone"))+"\n          ")]),s("th",{staticClass:"role"},[t._v("\n          "+t._s(t.$t("people.list.role"))+"\n          ")]),s("th",{staticClass:"actions"})])])])]),t.isEmpty?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("people-name-cell",{staticClass:"name",attrs:{entry:e}}),s("td",{staticClass:"email"},[t._v(t._s(e.email))]),s("td",{staticClass:"phone"},[t._v(t._s(e.phone))]),s("td",{staticClass:"role"},[t._v(t._s(t.$t("people.role."+e.role)))]),t.isCurrentUserAdmin?s("td",{staticClass:"actions"},[s("button",{staticClass:"button",on:{click:function(s){t.removePerson(e)}}},[t._v("\n              "+t._s(t.$t("main.remove"))+"\n            ")])]):s("td",{staticClass:"actions"})],1)}))])]),t.isEmpty?s("div",{staticClass:"table-body"},[t.isEmpty?s("p",{staticClass:"has-text-centered mt2"},[t._v("\n      "+t._s(t.$t("people.empty_team"))+"\n    ")]):t._e()]):t._e(),s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("people.persons",t.entries.length))+"\n  ")])])},dk=[],uk={name:"production-team-list",components:{PeopleNameCell:K_,RowActions:Yd,TableInfo:Vl},props:["entries"],computed:Object(l["a"])({},Object(d["c"])(["isCurrentUserAdmin"]),{isEmpty:function(){return!this.entries||0===this.entries.length}}),methods:Object(l["a"])({},Object(d["b"])(["removePersonFromTeam"]),{removePerson:function(t){this.removePersonFromTeam(t)},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},pk=uk,hk=(s("6392"),Object(f["a"])(pk,lk,dk,!1,null,"495a74c4",null)),mk=hk.exports,fk={name:"people",components:{PageTitle:fd,PeopleField:t_,ProductionTeamList:mk},data:function(){return{person:null,isTeamLoading:!1,isTeamLoadingError:!1}},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","productionMap","openProductions","personMap","people"]),{teamPersons:function(){var t=this;return la(this.currentProduction.team.map(function(e){return t.personMap[e]}))},unlistedPeople:function(){var t=this;return this.people.filter(function(e){return!t.currentProduction.team.includes(e.id)})}}),methods:Object(l["a"])({},Object(d["b"])(["addPersonToTeam"]),{addPerson:function(){var t=this;this.addPersonToTeam(this.person),setTimeout(function(){t.$refs["people-field"].clear()},1)},removePerson:function(t){this.removePersonFromTeam(t)}}),mounted:function(){},watch:{},metaInfo:function(){return{title:"".concat(this.currentProduction.name," | ").concat(this.$t("people.team")," - Kitsu")}}},_k=fk,vk=(s("7397"),Object(f["a"])(_k,rk,ck,!1,null,"6771ad38",null)),yk=vk.exports,gk=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-type columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"task-type page"},[s("div",{staticClass:"task-type-header page-header"},[s("div",{staticClass:"flexcolumn-item flexrow"},[t.currentTaskType.for_shots?s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:t.shotsPath}},[s("chevron-left-icon")],1):s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:t.assetsPath}},[s("chevron-left-icon")],1),s("task-type-name",{staticClass:"flexrow-item",attrs:{"task-type":t.currentTaskType}}),s("div",{staticClass:"flexrow-item ml1"},[s("search-field",{ref:"task-search-field",attrs:{"can-save":!0,placeholder:"ex: retake chara"},on:{change:t.onSearchChange,save:t.saveSearchQuery}})],1),s("div",{staticClass:"flexrow-item ml1"},[t._v("\n            "+t._s(t.$t("main.sorted_by"))+"\n          ")]),s("div",{staticClass:"flexrow-item sorting-combobox"},[s("combobox",{attrs:{options:t.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:t.currentSort,callback:function(e){t.currentSort=e},expression:"currentSort"}})],1),s("div",{staticClass:"flexrow-item push-right"},[s("button-simple",{attrs:{icon:"download",title:t.$t("main.csv.export_file")},on:{click:t.onExportClick}})],1)],1)]),s("div",{staticClass:"query-list"},[t.loading.entities?t._e():s("search-query-list",{attrs:{queries:t.searchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1),s("task-list",{ref:"task-list",attrs:{tasks:t.tasks,"is-assets":t.isAssets,"is-loading":t.loading.entities,"is-error":t.errors.entities},on:{"task-selected":t.onTaskSelected}})],1)]),1===t.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(t.selectedTasks)[0]}})],1):t._e()])},kk=[],bk=s("c1df"),Tk=s.n(bk),Sk=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",{ref:"thead"},[s("tr",[s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),t.isAssets?s("th",{ref:"th-type",staticClass:"asset-type"},[t._v("\n            "+t._s(t.$t("tasks.fields.asset_type"))+"\n          ")]):s("th",{ref:"th-type",staticClass:"sequence"},[t._v("\n            "+t._s(t.$t("tasks.fields.sequence"))+"\n          ")]),s("th",{ref:"th-name",staticClass:"name"},[t._v("\n            "+t._s(t.$t("tasks.fields.entity_name"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"status"},[t._v("\n            "+t._s(t.$t("tasks.fields.task_status"))+"\n          ")]),s("th",{ref:"th-assignees",staticClass:"assignees"},[t._v("\n            "+t._s(t.$t("tasks.fields.assignees"))+"\n          ")]),t.isAssets?t._e():s("th",{ref:"th-frames",staticClass:"frames"},[t._v("\n            "+t._s(t.$t("tasks.fields.frames"))+"\n          ")]),s("th",{ref:"th-estimation",staticClass:"estimation"},[t._v("\n            "+t._s(t.$t("tasks.fields.estimation").substring(0,3))+".\n          ")]),s("th",{ref:"th-duration",staticClass:"duration"},[t._v("\n            "+t._s(t.$t("tasks.fields.duration").substring(0,3))+".\n          ")]),s("th",{ref:"th-retake-count",staticClass:"retake-count"},[t._v("\n            "+t._s(t.$t("tasks.fields.retake_count"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"real-start-date"},[t._v("\n            "+t._s(t.$t("tasks.fields.real_start_date"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"real-end-date"},[t._v("\n            "+t._s(t.$t("tasks.fields.real_end_date"))+"\n          ")]),s("th",{ref:"th-status",staticClass:"last-comment-date"},[t._v("\n            "+t._s(t.$t("tasks.fields.last_comment_date"))+"\n          ")]),s("th",{ref:"",staticClass:"empty"},[t._v("\n             \n          ")])])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table unselectable"},[s("tbody",{ref:"body-tbody",staticClass:"tbody"},t._l(t.tasks,function(e,i){return s("tr",{key:e.id,ref:"task-"+e.id,refInFor:!0,class:{"task-line":!0,selected:t.selectionGrid[e.id]},on:{click:function(s){t.selectTask(s,i,e)}}},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:t.getEntity(e.entity.id),width:50,height:33}})],1),t.isAssets?s("td",{staticClass:"asset-type"},[t._v("\n            "+t._s(t.getEntity(e.entity.id).asset_type_name)+"\n          ")]):s("td",{staticClass:"sequence"},[t._v("\n            "+t._s(t.getEntity(e.entity.id).sequence_name)+"\n          ")]),s("td",{staticClass:"name"},[t._v("\n            "+t._s(t.getEntity(e.entity.id).name)+"\n          ")]),s("validation-cell",{staticClass:"status unselectable",attrs:{"task-test":e,"is-border":!1,"is-assignees":!1,selectable:!1,"is-static":!0}}),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},t._l(e.assignees,function(i){return s("people-avatar",{key:e.id+"-"+i,staticClass:"flexrow-item",attrs:{person:t.personMap[i],size:30,"font-size":17}})}))]),t.isAssets?t._e():s("td",{staticClass:"frames"},[t._v("\n            "+t._s(t.getEntity(e.entity.id).nb_frames)+"\n          ")]),s("td",{staticClass:"estimation"},[t._v("\n            "+t._s(t.formatEstimation(e.estimation))+"\n          ")]),s("td",{staticClass:"duration"},[t._v("\n            "+t._s(t.formatDuration(e.duration))+"\n          ")]),s("td",{staticClass:"retake-count"},t._l(e.retake_count,function(e){return s("span",{key:e},[t._v("\n              •\n            ")])})),s("td",{staticClass:"real-start-date"},[t._v("\n            "+t._s(t.formatDate(e.real_start_date))+"\n          ")]),s("td",{staticClass:"real-end-date"},[t._v("\n            "+t._s(t.formatDate(e.real_end_date))+"\n          ")]),s("td",{staticClass:"last-comment-date"},[t._v("\n            "+t._s(t.formatDate(e.last_comment_date))+"\n          ")]),s("td")],1)}))])]),t.isLoading?t._e():s("p",{staticClass:"has-text-centered nb-tasks"},[t._v("\n    "+t._s(t.tasks.length)+" "+t._s(t.$tc("tasks.number",t.tasks.length))+"\n    ("+t._s(t.formatDuration(t.timeSpent))+"\n     "+t._s(t.$tc("main.days_spent",Math.floor((t.timeSpent?t.timeSpent:0)/60)/8))),t.isAssets?t._e():s("span",[t._v(", "+t._s(t.nbFrames)+" "+t._s(t.$tc("main.nb_frames",t.nbFrames)))]),t._v(")\n  ")])],1)},Ck=[],wk={name:"task-list",mixins:[$d],components:{ButtonLink:zd,ButtonSimple:Vc,ButtonHrefLink:qd,DescriptionCell:Yc,EntityThumbnail:ld,ChevronDownIcon:Ic["c"],PeopleAvatar:Zl,PageTitle:fd,RowActions:Yd,TableInfo:Vl,TableHeaderMenu:su,TableMetadataHeaderMenu:cu,ValidationCell:mu},props:{tasks:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isAssets:{type:Boolean,default:!0},taskType:{type:Object,default:function(){}}},data:function(){return{lastSelection:null,options:[],selectionGrid:{}}},computed:Object(l["a"])({},Object(d["c"])(["assetMap","nbSelectedTasks","personMap","selectedTasks","shotMap"]),{timeSpent:function(){var t=0;return this.tasks.forEach(function(e){t+=e.duration}),t},nbFrames:function(){var t=this,e=0;return this.tasks.forEach(function(s){var i=t.shotMap[s.entity.id];i&&i.nb_frames&&(e+=i.nb_frames)}),e}}),mounted:function(){window.addEventListener("keydown",this.onKeyDown,!1),this.$nextTick(this.resizeHeaders)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},methods:Object(l["a"])({},Object(d["b"])(["addSelectedTask","addSelectedTasks","clearSelectedTasks","removeSelectedTask"]),{formatEstimation:function(t){return t?t<10?t:this.formatDuration(t):0},formatDate:function(t){return t?Ua()(t).format("YYYY-MM-DD"):""},onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px"),this.$emit("scroll",e.scrollTop)},selectTask:function(t,e,s){var i=this,n=this.selectionGrid[s.id],o=Ta()(this.selectionGrid).length>1;if(t.ctrlKey||t.shiftKey||(this.clearSelectedTasks({task:s}),this.resetSelection()),t.shiftKey){this.selectionGrid={};var r=[];r=this.lastSelection>e?Qa(e,this.lastSelection):Qa(this.lastSelection,e);var c=r.map(function(t){return{task:i.tasks[t]}});c.forEach(function(t){a.a.set(i.selectionGrid,t.task.id,!0)}),this.addSelectedTasks(c)}else this.selectionGrid[s.id]?(this.removeSelectedTask({task:s}),a.a.set(this.selectionGrid,s.id,void 0)):n&&!o||(this.addSelectedTask({task:s}),this.$emit("task-selected",s),a.a.set(this.selectionGrid,s.id,!0),this.lastSelection=e);this.scrollToLine(s.id)},onKeyDown:function(t){if(this.tasks.length>0&&t.ctrlKey){var e=this.lastSelection?this.lastSelection:0;[37,38].includes(t.keyCode)?(e=e-1<0?e=this.tasks.length-1:e-1,this.selectTask({},e,this.tasks[e])):[39,40].includes(t.keyCode)&&(e=e+1>=this.tasks.length?e=0:e+1,this.selectTask({},e,this.tasks[e]))}},setScrollPosition:function(t){this.$refs.body&&(this.$refs.body.scrollTop=t)},scrollToLine:function(t){var e=this.$refs["task-"+t];if(e){var s=30,i=e[0].getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),a=i.bottom>n.bottom-s,o=i.top<n.top+s;if(a){var r=i.bottom-n.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=n.top-i.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},resetSelection:function(){this.selectionGrid={},this.lastSelection=null},getEntity:function(t){return this.isAssets?this.assetMap[t]:this.shotMap[t]},resizeHeaders:function(){var t=this;if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].children.length>0){var e=this.$refs["body-tbody"].children[0],s=[{index:1,name:"type"},{index:2,name:"name"},{index:4,name:"assignees"}];s.forEach(function(s){var i=Math.max(e.children[s.index].offsetWidth,100);t.$refs["th-"+s.name].style["min-width"]="".concat(i,"px")})}},getTableData:function(){var t=this,e=[this.isAssets?this.$t("tasks.fields.asset_type"):this.$t("tasks.fields.sequence"),this.$t("tasks.fields.entity_name"),this.$t("tasks.fields.task_status"),this.$t("tasks.fields.assignees"),this.$t("tasks.fields.estimation"),this.$t("tasks.fields.duration"),this.$t("tasks.fields.retake_count"),this.$t("tasks.fields.real_start_date"),this.$t("tasks.fields.real_end_date"),this.$t("tasks.fields.last_comment_date")];this.isAssets||e.splice(4,0,"otot");var s=[e];return this.tasks.forEach(function(e){var i=e.assignees.map(function(e){var s=t.personMap[e];return s?s.name:""}).join(", "),n=[t.isAssets?t.getEntity(e.entity.id).asset_type_name:t.getEntity(e.entity.id).sequence_name,t.getEntity(e.entity.id).name,e.task_status_short_name,i,e.estimation,t.formatDuration(e.duration),e.retake_count,t.formatDate(e.real_start_date),t.formatDate(e.real_end_date),t.formatDate(e.last_comment_date)];if(!t.isAssets){var a=t.getEntity(e.entity.id).nb_frames;n.splice(4,0,a)}s.push(n)}),s}}),watch:{tasks:function(){this.resetSelection(),this.$nextTick(this.resizeHeaders)},nbSelectedTasks:function(){0===this.nbSelectedTasks&&this.resetSelection()}}},Ek=wk,Pk=(s("6f40"),Object(f["a"])(Ek,Sk,Ck,!1,null,"f8c3d8e8",null)),xk=Pk.exports,Ok=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"supervisor-entity":!0,selected:t.selected},on:{click:t.select}},[s("span",{staticClass:"entity-block"},[s("entity-thumbnail",{attrs:{entity:t.entity,square:!0,"empty-width":60,"empty-height":60,width:60,height:60,"with-link":!1}}),s("span",{staticClass:"entity-name"},[t._v("\n      "+t._s(t.entity.name)+"\n    ")])],1),t.task?s("validation-tag",{attrs:{task:t.task,"is-static":!0,pointer:!0}}):t._e()],1)},Ak=[],$k={name:"task-type-entity-block",components:{EntityThumbnail:ld,ValidationTag:Wl},props:{entity:{default:function(){},type:Object},taskType:{default:function(){},type:Object},entityType:{default:"shot",type:String},selected:{default:!1,type:Boolean}},computed:Object(l["a"])({},Object(d["c"])(["currentEpisode","currentProduction","isCurrentUserClient","taskMap"]),{task:function(){return this.entity.validations[this.taskType.id]?this.taskMap[this.entity.validations[this.taskType.id]]:null}}),methods:{select:function(t){var e=t&&!1!==t.isUserClick;if(!this.isCurrentUserClient){var s={entity:this.entity,column:this.taskType,task:this.task,isCtrlKey:!!t&&t.ctrlKey,isShiftKey:!!t&&t.shiftKey,isUserClick:e};this.$emit(this.selected?"unselect":"select",s)}}}},Lk=$k,Dk=(s("8d27"),Object(f["a"])(Lk,Ok,Ak,!1,null,"4547c54f",null)),jk=Dk.exports,Ik={name:"task-type-page",components:{ButtonSimple:Vc,ChevronLeftIcon:Ic["d"],Combobox:vl,EntityThumbnail:ld,SearchField:pp,SearchQueryList:yp,SubscribeButton:xh,TaskList:xk,TableInfo:Vl,TaskInfo:qh,TaskTypeEntityBlock:jk,TaskTypeName:$l,ValidationTag:Wl},entityListCache:[],data:function(){return{currentSort:"entity_name",currentTask:null,isAssets:!0,tasks:[],selection:{},loading:{entities:!1},errors:{entities:!1}}},created:function(){this.currentProduction||this.setProduction(this.$route.params.production_id)},mounted:function(){var t=this;this.isAssets=this.$route.path.includes("assets"),setTimeout(function(){t.initData(!1)},100)},beforeDestroy:function(){},computed:Object(l["a"])({},Object(d["c"])(["assetsByType","assetMap","assetsPath","currentEpisode","currentProduction","currentTaskType","isTVShow","nbSelectedTasks","selectedTasks","sequenceSubscriptions","shotsByEpisode","shotMap","shotsPath","taskSearchQueries","taskMap"]),{assetTasks:function(){return this.getTasks(Ca()(this.assetMap))},shotTasks:function(){return this.getTasks(Ca()(this.shotMap))},title:function(){return this.currentProduction?this.isTVShow&&this.currentEpisode?"".concat(this.currentProduction.name," / ")+"".concat(this.currentEpisode.name," / ")+"".concat(this.currentTaskType.name):"".concat(this.currentProduction.name," / ").concat(this.currentTaskType.name):"Loading..."},sortOptions:function(){return["entity_name","task_status_short_name","priority","estimation","duration","retake_count","real_start_date","real_end_date","last_comment_date"].map(function(t){return{label:t,value:t}})},searchQueries:function(){return this.isAssets?this.taskSearchQueries.filter(function(t){return"Asset"===t.entity_type}):this.taskSearchQueries}}),methods:Object(l["a"])({},Object(d["b"])(["clearSelectedTasks","initTaskType","saveTaskSearch","removeTaskSearch","setProduction","subscribeToSequence","unsubscribeFromSequence"]),{initData:function(t){var e=this;this.loading.entities=!0,this.errors.entities=!1,this.initTaskType(t).then(function(){e.loading.entities=!1,e.resetTasks(),e.resetTaskIndex(),e.$refs["task-search-field"].focus()}).catch(function(t){console.error(t),e.loading.entities=!1,e.errors.entities=!0})},changeSearch:function(t){this.$refs["task-search-field"].setValue(t.search_query),this.$refs["task-search-field"].$emit("change",t.search_query)},onSearchChange:function(t){if(t){t=t.toLowerCase().trim();var e=Co(t)||[],s=Po(this.$options.taskIndex,t);e&&e.length>0?this.tasks=yo(this.$options.taskIndex,e):this.resetTasks(),this.tasks=So(this.tasks,s,this.taskMap),this.tasks=this.sortTasks()}else this.resetTasks();this.clearSelectedTasks()},onTaskSelected:function(t){this.currentTask=t},resetTasks:function(){this.isAssets?this.tasks=this.assetTasks:this.tasks=this.shotTasks,this.tasks=this.sortTasks()},resetTaskIndex:function(){this.isAssets?this.$options.taskIndex=ho(this.assetTasks):this.$options.taskIndex=ho(this.shotTasks)},getTasks:function(t){var e=this,s=[];return t.forEach(function(t){t.tasks.forEach(function(t){var i=e.taskMap[t];i&&i.task_type_id===e.currentTaskType.id&&s.push(i)})}),s},sortTasks:function(){var t=["task_status_short_name","entity_name"].includes(this.currentSort);return this.tasks.sort(ea()(this.currentSort,t?1:-1).thenBy("entity_name"))},saveSearchQuery:function(t){var e=this.isAssets?"Asset":"Shot";this.saveTaskSearch({searchQuery:t,entityType:e}).then(function(){}).catch(function(t){t&&console.log("error")})},removeSearchQuery:function(t){this.removeTaskSearch(t).then(function(){}).catch(function(t){t&&console.log("error")})},onExportClick:function(){var t=this.$refs["task-list"].getTableData(),e=[Tk()().format("YYYY-MM-DD"),this.currentProduction.name,this.currentTaskType.name,"tasks"];this.currentEpisode&&e.splice(1,0,this.currentEpisode.name);var s=ro(e.join("_")),i=[];t.forEach(function(t,e){var s=t.join(";");i.push(0===e?"data:text/csv;charset=utf-8,"+s:s)});var n=i.join("\n"),a=encodeURI(n),o=document.createElement("a");o.setAttribute("href",a),o.setAttribute("download","".concat(s,".csv")),document.body.appendChild(o),o.click()}}),watch:{$route:function(){this.initData(!0)},currentProduction:function(){this.initData(!0)},currentSort:function(){this.sortTasks(),this.$refs["task-list"].resetSelection(),this.clearSelectedTasks()}},socket:{events:{"task:update":function(t){this.taskMap[t.task_id]&&setTimeout(this.resetTaskIndex,1e3)}}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},Mk=Ik,Fk=(s("f03e"),Object(f["a"])(Mk,gk,kk,!1,null,"45468619",null)),qk=Fk.exports,Nk=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page fixed-page"},[s("div",{staticClass:"page-header"},[t.currentTask?s("div",{staticClass:"flexrow header-title"},[s("router-link",{staticClass:"flexrow-item has-text-centered back-link",attrs:{to:t.entityPage}},[s("chevron-left-icon")],1),s("div",{staticClass:"title flexrow-item"},[s("router-link",{attrs:{to:t.taskEntityPath}},[t._v("\n          "+t._s(t.currentTask?t.title:"Loading...")+"\n        ")])],1),t.currentTaskType?s("task-type-name",{staticClass:"flexrow-item task-type",attrs:{"task-type":t.currentTaskType,"production-id":t.currentProduction.id}}):t._e(),t.isAssigned?t._e():s("subscribe-button",{staticClass:"flexrow-item action-button",attrs:{subscribed:t.isAssigned||t.isSubscribed},on:{click:t.toggleSubscribe}})],1):t._e(),t.currentTask?s("div",{staticClass:"flexrow task-information"},[s("span",{staticClass:"flexrow-item"},[t._v(t._s(t.$t("tasks.current_status")))]),t.currentTask?s("validation-tag",{staticClass:"is-medium flexrow-item",attrs:{task:t.currentTask,"is-static":!0}}):t._e(),s("span",{staticClass:"flexrow-item"},[t._v(t._s(t.$t("tasks.fields.assignees"))+":")]),t._l(t.currentTask.assignees,function(e){return s("span",{key:e,staticClass:"flexrow-item avatar-wrapper"},[s("people-avatar",{key:e,staticClass:"flexrow-item",attrs:{person:t.personMap[e],size:30,"font-size":16}})],1)})],2):t._e()]),s("div",{ref:"task-columns",staticClass:"task-columns"},[s("div",{staticClass:"task-column comments-column"},[t.currentTask?s("div",[s("div",[t.isCommentingAllowed?s("add-comment",{attrs:{"is-loading":t.loading.addComment,"is-error":t.errors.addComment,user:t.user,task:t.currentTask,"task-status":t.taskStatusForCurrentUser,"attached-file-name":t.attachedFileName},on:{"add-comment":t.addComment,"add-preview":t.onAddPreviewClicked,"file-drop":t.selectFile}}):t._e(),t.currentTaskComments&&t.currentTaskComments.length>0?s("div",{staticClass:"comments"},t._l(t.currentTaskComments,function(e,i){return s("comment",{key:e.id,attrs:{comment:e,highlighted:t.isHighlighted(e),"current-user":t.user,editable:e.person&&t.user.id===e.person.id&&0===i}})})):s("div",{staticClass:"no-comment"},[s("em",[t._v("\n              "+t._s(t.$t("tasks.no_comment"))+"\n            ")])])],1)]):s("div",{staticClass:"has-text-centered"},[s("spinner")],1)]),s("div",{staticClass:"task-column preview-column"},[s("div",{staticClass:"preview-column-content"},[s("div",{staticClass:"flexrow preview-header"},[s("h2",{staticClass:"subtitle flexrow-item"},[t._v("\n            "+t._s(t.$t("tasks.preview"))+"\n          ")]),t.isPreviewButtonVisible?s("div",{staticClass:"set-main-preview flexrow-item flexrow pull-right"},[t.currentTaskPreviews&&t.currentTaskPreviews.length>0&&t.isCurrentUserManager?s("button",{class:{button:!0,"flexrow-item":!0,"is-loading":t.loading.setPreview},on:{click:t.setPreview}},[s("image-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("\n                "+t._s(t.$t("tasks.set_preview"))+"\n              ")])],1):t._e(),t.errors.setPreview?s("span",{staticClass:"error flexrow-item"},[t._v("\n              "+t._s(t.$t("tasks.set_preview_error"))+"\n            ")]):t._e()]):t._e(),t.currentTask&&t.currentTask.entity&&t.currentTask.entity.preview_file_id===t.currentPreviewId?s("div",{staticClass:"set-main-preview flexrow-item pull-right"},[s("em",[t._v(t._s(t.$t("tasks.set_preview_done")))])]):t._e()]),t.isPreviews?s("div",{staticClass:"preview-list mt2"},t._l(t.currentTaskPreviews,function(e){return s("preview-row",{key:e.id,attrs:{preview:e,"preview-path":t.previewPath(e.id),taskId:t.currentTask?t.currentTask.id:"",selected:e.id===t.currentPreviewId}})})):s("div",[s("em",[t._v("\n            "+t._s(t.$t("tasks.no_preview"))+"\n          ")])]),s("div",{staticClass:"preview-picture"},[t.currentTaskPreviews&&t.currentTaskPreviews.length>0&&t.isMovie?s("div",[s("video-player",{ref:"preview-movie",attrs:{preview:t.currentPreview,"task-type-map":t.taskTypeMap,"entity-preview-files":t.taskEntityPreviews},on:{annotationchanged:t.onAnnotationChanged}})],1):t.isDlPreviewFile?s("a",{ref:"preview-file",staticClass:"button mt2",attrs:{href:t.currentPreviewDlPath}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[t._v("\n              "+t._s(t.$t("tasks.download_pdf_file",{extension:t.extension}))+"\n            ")])],1):t.currentTaskPreviews&&t.currentTaskPreviews.length>0&&"obj"===t.extension?s("model-viewer",{attrs:{"preview-url":t.currentPreviewPath,"preview-dl-path":t.currentPreviewDlPath}}):t.currentTaskPreviews&&t.currentTaskPreviews.length>0&&"png"===t.extension?s("picture-viewer",{ref:"preview-picture",attrs:{preview:t.currentPreview},on:{"annotation-changed":t.onAnnotationChanged,"add-preview":t.onAddExtraPreview,"remove-extra-preview":t.showRemoveExtraPreviewModal}}):t._e()],1)])])]),s("add-preview-modal",{ref:"add-preview-modal",attrs:{active:t.modals.addPreview,"is-loading":t.loading.addPreview,"is-error":t.errors.addPreview,"cancel-route":t.taskPath(),"form-data":t.addPreviewFormData},on:{fileselected:t.selectFile,confirm:t.closeAddPreviewModal}}),s("add-preview-modal",{ref:"add-extra-preview-modal",attrs:{active:t.modals.addExtraPreview,"is-loading":t.loading.addExtraPreview,"is-error":t.errors.addExtraPreview,"form-data":t.addExtraPreviewFormData,extensions:".png,.jpg"},on:{cancel:t.hideExtraPreviewModal,fileselected:t.selectFile,confirm:t.createExtraPreview}}),s("add-preview-modal",{ref:"change-preview-modal",attrs:{active:t.modals.changePreview,"is-loading":t.loading.changePreview,"is-error":t.errors.changePreview,"cancel-route":t.taskPath(),"form-data":t.changePreviewFormData,"is-editing":!0},on:{fileselected:t.selectFile,confirm:t.changePreview}}),s("edit-comment-modal",{attrs:{active:t.modals.editComment,"is-loading":t.loading.editComment,"is-error":t.errors.editComment,"cancel-route":t.taskPath(),"comment-to-edit":t.commentToEdit},on:{confirm:t.confirmEditTaskComment}}),s("delete-modal",{attrs:{active:t.modals.deleteComment,"is-loading":t.loading.deleteComment,"is-error":t.errors.deleteComment,"cancel-route":t.taskPath(),text:t.$t("tasks.delete_comment"),"error-text":t.$t("tasks.delete_comment_error")},on:{confirm:t.confirmDeleteTaskComment}}),s("delete-modal",{attrs:{active:t.modals.deleteExtraPreview,"is-loading":t.loading.deleteExtraPreview,"is-error":t.errors.deleteExtraPreview,text:t.$t("tasks.delete_preview"),"error-text":t.$t("tasks.delete_preview_error")},on:{cancel:t.hideRemoveExtraPreviewModal,confirm:t.confirmDeleteTaskPreview}})],1)},Rk=[],Vk=s("7618"),Bk=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.commentToEdit&&t.commentToEdit.id?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("comments.edit_title"))+"\n      ")]):t._e(),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("textarea-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"textField",attrs:{label:t.$t("comments.fields.text")},on:{keyup:function(e){return e.ctrlKey?t.runConfirmation(e):null}},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.runConfirmation}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1),t.isError?s("p",{staticClass:"error has-text-right info-message"},[t._v("\n        "+t._s(t.$t("assets.edit_fail"))+"\n      ")]):t._e()])])])},Uk=[],zk={name:"edit-comment-modal",components:{Combobox:vl,TextareaField:ul},props:["active","cancelRoute","isLoading","isError","commentToEdit"],watch:{commentToEdit:function(){this.commentToEdit&&this.commentToEdit.id?this.form.text=this.commentToEdit.text:this.form={text:""}},active:function(){var t=this;this.active&&setTimeout(function(){t.$refs.textField.focus()},100)}},data:function(){return this.commentToEdit&&this.commentToEdit.id?{form:{text:this.commentToEdit.text}}:{form:{text:""}}},methods:{runConfirmation:function(t){13!==t.keyCode&&t.keyCode||this.$emit("confirm",Object(l["a"])({id:this.commentToEdit.id},this.form))}}},Hk=zk,Gk=(s("c3c3"),Object(f["a"])(Hk,Bk,Uk,!1,null,"437fa019",null)),Wk=Gk.exports,Kk=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"preview-row":!0,"has-text-center":!0,selected:t.selected}},[s("button-link",{attrs:{text:t.label,path:t.previewPath}})],1)},Qk=[],Yk={name:"preview-row",components:{ButtonLink:zd},props:{preview:{type:Object,default:function(){}},selected:{type:Boolean,default:!1},taskId:{type:String,default:""},previewPath:{type:Object,default:function(){}}},computed:{label:function(){var t="v".concat(this.preview.revision);return t}},methods:{}},Xk=Yk,Jk=(s("a3a9"),Object(f["a"])(Xk,Kk,Qk,!1,null,"f16eab4a",null)),Zk=Jk.exports,tb={name:"task",components:{AddComment:zp,AddPreviewModal:Yp,ButtonLink:zd,Comment:ch,ChevronLeftIcon:Ic["d"],DeleteModal:Bu,DownloadIcon:Ic["i"],EntityThumbnail:ld,EditCommentModal:Wk,ImageIcon:Ic["n"],ModelViewer:fh,PeopleAvatar:Zl,PeopleName:nh,PreviewRow:Zk,PictureViewer:Th,Spinner:v,SubscribeButton:xh,TaskTypeName:$l,ValidationTag:Wl,VideoPlayer:jh},data:function(){return{attachedFileName:"",currentPreviewId:null,currentExtraPreviewId:null,entityPage:this.getEntityPage(),selectedTab:"validation",taskLoading:{isLoading:!0,isError:!1},modals:{addPreview:!1,addExtraPreview:!1,deleteExtraPreview:!1,changePreview:!1,deleteTask:!1,deleteComment:!1,editComment:!1},loading:{addComment:!1,addPreview:!1,addExtraPreview:!1,changePreview:!1,setPreview:!1,deleteTask:!1,deleteComment:!1,editComment:!1},errors:{addComment:!1,addPreview:!1,addExtraPreview:!1,changePreview:!1,setPreview:!1,deleteTask:!1,deleteComment:!1,editComment:!1},currentTask:null,currentTaskComments:[],currentTaskPreviews:[],otherPreviews:[],addPreviewFormData:null,addExtraPreviewFormData:null,changePreviewFormData:null,isSubscribed:!1,currentPreviewPath:"",currentPreviewDlPath:""}},created:function(){this.clearSelectedTasks(),this.loadTaskData()},mounted:function(){var t=this;this.handleModalsDisplay(),this.reset(),this.$nextTick(function(){t.$refs["task-columns"]&&(t.$refs["task-columns"].scrollTop=100,window.scrollTo(0,0))})},computed:Object(l["a"])({},Object(d["c"])(["currentEpisode","currentProduction","displayedShots","displayedAssets","getTaskComments","getTaskPreviews","getTaskComment","isCurrentUserManager","isSingleEpisode","isTVShow","personMap","productionMap","route","taskEntityPreviews","taskStatus","taskStatusForCurrentUser","taskMap","taskTypeMap","user"]),{isCommentingAllowed:function(){var t=this;return this.isCurrentUserManager||this.currentTask.assignees.find(function(e){return e===t.user.id})},taskTypeBorder:function(){var t="transparent";return this.currentTask&&(t=this.currentTask.task_type_color),{"border-left":"4px solid ".concat(t)}},deleteTaskPath:function(){return this.taskPath(this.currentTask,"task-delete")},commentToEdit:function(){var t={};return this.currentTask&&this.currentTaskComments&&this.currentTaskComments.length>0&&(t=this.currentTaskComments[0]),t},isPreviews:function(){return this.currentTaskPreviews&&this.currentTaskPreviews.length>0},taskEntityPath:function(){if(this.currentTask){var t=this.currentTask.entity_type_name,e="";e=this.currentTask.entity?this.currentTask.entity.id:this.currentTask.entity_id;var s={name:"Shot"===t?"shot":"asset",params:{production_id:this.currentTask.project_id}};return"Shot"===t?s.params.shot_id=e:s.params.asset_id=e,this.$route.params.episode_id&&(s.name="episode-".concat(s.name),s.params.episode_id=this.$route.params.episode_id),s}return{name:"open-productions"}},entityList:function(){var t=this,e=this.displayedShots.find(function(e){return e.id===t.currentTask.entity_id});return e?this.displayedShots:this.displayedAssets},previousEntity:function(){var t=this;if(!this.currentTask)return{name:"open-productions"};var e=function(){var e=t.currentTask.task_type_id,s=t.entityList.findIndex(function(e){return e.id===t.currentTask.entity_id}),i=!1,n=s-1;n<0&&(n=t.entityList.length-1);var a=null;while(!a){if(t.entityList[n]){var o=t.entityList[n];a=o.tasks.find(function(s){var i=t.taskMap[s];return!!i&&i.task_type_id===e})}else a=t.currentTask.id;if(!a&&(n--,n<0)){if(n=t.entityList.length,i)return{v:null};i=!0}}return{v:t.taskPath({id:a})}}();return"object"===Object(Vk["a"])(e)?e.v:void 0},nextEntity:function(){var t=this;if(!this.currentTask)return{name:"open-productions"};var e=function(){var e=t.currentTask.task_type_id,s=!1,i=t.entityList.findIndex(function(e){return e.id===t.currentTask.entity_id}),n=i+1;n>=t.entityList.length&&(n=0);var a=null;while(!a){if(t.entityList[n]){var o=t.entityList[n];a=o.tasks.find(function(s){var i=t.taskMap[s];return!!i&&i.task_type_id===e})}else a=t.currentTask.id;if(!a&&(n++,n>=t.entityList.length)){if(n=0,s)return{v:null};s=!0}}return{v:t.taskPath({id:a})}}();return"object"===Object(Vk["a"])(e)?e.v:void 0},title:function(){if(this.currentTask){var t=this.currentTask.entity_type_name,e=this.currentTask.full_entity_name||this.currentTask.entity_name;return this.isSingleEpisode&&"Shot"===t&&(e=e.split("/").splice(1).join("/")),"".concat(e)}return"Loading..."},windowTitle:function(){if(this.currentTask){var t=this.currentTask.task_type_name;return"".concat(this.title," / ").concat(t)}return"Loading..."},deleteText:function(){if(this.currentTask){var t=this.taskTypeMap[this.currentTask.task_type_id];return this.$t("main.delete_text",{name:"".concat(this.currentTask.entity_name," / ").concat(t.name)})}return""},isMovie:function(){if(this.currentTaskPreviews){var t=this.route.params.preview_id,e=this.currentTaskPreviews[0];return t&&(e=this.currentTaskPreviews.find(function(e){return e.id===t})),e&&"mp4"===e.extension}return!1},extension:function(){if(this.currentTaskPreviews){var t=this.route.params.preview_id,e=this.currentTaskPreviews[0];return t&&(e=this.currentTaskPreviews.find(function(e){return e.id===t})),e?e.extension:""}return""},moviePath:function(){var t=this.route.params.preview_id;return!t&&this.currentTaskPreviews&&(t=this.currentTaskPreviews[0].id),"/api/movies/originals/preview-files/".concat(t,".mp4")},isAssigned:function(){var t=this;return!!this.currentTask&&this.currentTask.assignees.some(function(e){return e===t.user.id})},isPreviewButtonVisible:function(){return this.currentTask&&this.currentTask.entity&&this.currentTask.entity.preview_file_id!==this.currentPreviewId&&["png","mp4"].includes(this.extension)},isDlPreviewFile:function(){return this.currentTaskPreviews&&["pdf","ma","mb","rar","zip"].includes(this.extension)},currentTaskType:function(){return this.currentTask?this.taskTypeMap[this.currentTask.task_type_id]:null},currentPreview:function(){var t=this.currentTaskPreviews[0],e=this.route.params.preview_id;return e&&(t=this.currentTaskPreviews.find(function(t){return t.id===e})),t}}),methods:Object(l["a"])({},Object(d["b"])(["addCommentPreview","addCommentExtraPreview","commentTask","commentTaskWithPreview","changeCommentPreview","clearSelectedTasks","deleteTask","deleteTaskPreview","deleteTaskComment","editTaskComment","loadEpisodes","loadTask","loadShots","loadAssets","loadPreviewFileFormData","loadTaskComments","loadTaskSubscribed","refreshPreview","subscribeToTask","setCurrentEpisode","unsubscribeFromTask","updatePreviewAnnotation"]),{getEntityPage:function(){if(this.currentTask){var t={name:this.$route.params.type,params:{production_id:this.currentTask.project_id}};return"asset"===t.name?t.params.asset_id=this.currentTask.entity_id:t.params.shot_id=this.currentTask.entity_id,this.isTVShow&&(t.name="episode-".concat(t.name),t.params.episode_id=this.currentEpisode?this.currentEpisode.id:this.$route.params.episode_id),t}return{name:"open-productions"}},loadTaskData:function(){var t=this,e=this.getCurrentTask();e?(this.currentTask=e,this.loadTaskComments({taskId:this.route.params.task_id,entityId:e.entity_id,callback:function(e){e||(t.currentTaskComments=t.getCurrentTaskComments(),t.currentTaskPreviews=t.getCurrentTaskPreviews(),t.setOtherPreviews(),t.currentPreviewPath=t.getOriginalPath(),t.currentPreviewDlPath=t.getOriginalDlPath(),t.entityPage=t.getEntityPage(),t.setOtherPreviews(),t.loadTaskSubscribed({taskId:t.route.params.task_id,callback:function(e,s){e&&console.log(e),t.isSubscribed=s}}))}})):(this.taskLoading={isLoading:!0,isError:!1},this.loadTask({taskId:this.route.params.task_id,callback:function(e,s){e&&console.log(e);var i=t.loadAssets;"Shot"===s.entity_type_name&&(i=function(e){t.loadEpisodes(function(){t.isTVShow&&t.setCurrentEpisode(s.episode.id),t.loadShots(e)})}),i(function(){t.currentTask=s,t.loadTaskComments({taskId:s.id,entityId:s.entity_id,callback:function(e){e?t.taskLoading={isLoading:!1,isError:!0}:(t.reset(),t.entityPage=t.getEntityPage(),t.taskLoading={isLoading:!1,isError:!1},t.loadTaskSubscribed({taskId:t.route.params.task_id,callback:function(e,s){e&&console.log(e),t.isSubscribed=s}}))}})})}}))},isHighlighted:function(t){return t.preview&&t.preview.id===this.currentPreviewId},getCurrentTask:function(){return this.taskMap[this.route.params.task_id]},getCurrentComment:function(){if(this.route.params.comment_id)return this.getTaskComment(this.route.params.task_id,this.route.params.comment_id)},getCurrentTaskComments:function(){return this.getTaskComments(this.route.params.task_id)},getCurrentTaskPreviews:function(){return this.getTaskPreviews(this.route.params.task_id)},getCurrentTaskPath:function(){return this.currentTask?"/tasks/".concat(this.currentTask.id):""},getOriginalPath:function(){var t=this.route.params.preview_id;!t&&this.currentTaskPreviews&&this.currentTaskPreviews.length>0&&(t=this.currentTaskPreviews[0].id);var e=this.extension?this.extension:"png";return"/api/pictures/originals/preview-files/".concat(t,".").concat(e)},getOriginalDlPath:function(){var t=this.route.params.preview_id;return!t&&this.currentTaskPreviews&&this.currentTaskPreviews.length>0&&(t=this.currentTaskPreviews[0].id),"/api/pictures/originals/preview-files/".concat(t,"/download")},getPreviewPath:function(){var t=this.route.params.preview_id;return!t&&this.currentTaskPreviews&&this.currentTaskPreviews.length>0&&(t=this.currentTaskPreviews[0].id),"/api/pictures/previews/preview-files/".concat(t,".png")},addComment:function(t,e){var s=this,i=function(t,e){t?s.errors.addComment=!0:(s.$refs["add-preview-modal"].reset(),s.reset(),e&&"PreviewFile"===e.type&&s.resetPreview(e),s.attachedFileName=""),s.loading.addComment=!1},n={taskId:this.currentTask.id,taskStatusId:e,commentText:t,comment:t,callback:i};this.loading.addComment=!0,this.errors.addComment=!1,this.attachedFileName?this.commentTaskWithPreview(n):this.commentTask(n)},reset:function(){this.currentTaskComments=this.getCurrentTaskComments(),this.currentTaskPreviews=this.getCurrentTaskPreviews(),this.setOtherPreviews(),this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath(),this.currentTask=this.getCurrentTask();var t=this.route.params.preview_id;!t&&this.currentTaskPreviews&&this.currentTaskPreviews.length>0&&(t=this.currentTaskPreviews[0].id),this.currentPreviewId=t},handleModalsDisplay:function(){var t=this.$store.state.route.path;this.modals={addPreview:!1,addExtraPreview:!1,deleteExtraPreview:!1,changePreview:!1,deleteTask:!1,deleteComment:!1,editComment:!1},t.indexOf("change-preview")>0?this.modals.changePreview=!0:t.indexOf("delete")>0&&t.indexOf("comments")<0?this.modals.deleteTask=!0:t.indexOf("delete")>0&&t.indexOf("comments")>0?this.modals.deleteComment=!0:t.indexOf("edit")>0&&t.indexOf("comments")>0&&(this.modals.editComment=!0)},selectFile:function(t){this.loadPreviewFileFormData(t),this.attachedFileName=t.get("file").name},createPreview:function(){var t=this;this.errors.addPreview=!1,this.loading.addPreview=!0,this.addCommentPreview({taskId:this.route.params.task_id,commentId:this.route.params.comment_id,callback:function(e,s){t.loading.addPreview=!1,e?t.errors.addPreview=!0:(t.$refs["add-preview-modal"].reset(),t.resetPreview(s))}})},createExtraPreview:function(){var t=this;this.errors.addExtraPreview=!1,this.loading.addExtraPreview=!0;var e=this.currentPreviewId,s=this.getCurrentTaskComments().find(function(t){return t.previews.findIndex(function(t){return t.id===e})>=0});this.addCommentExtraPreview({taskId:this.currentTask.id,previewId:this.currentPreview.id,commentId:s.id,callback:function(s,i){t.loading.addExtraPreview=!1,s?t.errors.addExtraPreview=!0:(t.$refs["add-extra-preview-modal"].reset(),t.currentPreview?t.resetPreview(t.currentPreview):t.resetPreview({id:e}),setTimeout(function(){t.$refs["preview-picture"].displayLast()},0),t.modals.addExtraPreview=!1)}})},changePreview:function(){var t=this,e=this.currentTaskComments[0].preview;this.errors.changePreview=!1,this.loading.changePreview=!0,this.changeCommentPreview({preview:e,taskId:this.currentTask.id,comment:this.currentTaskComments[0],callback:function(s,i){t.loading.changePreview=!1,s?t.errors.changePreview=!0:(t.$refs["change-preview-modal"].reset(),t.resetPreview(e))}})},resetPreview:function(t){this.currentTaskComments=this.getCurrentTaskComments(),this.currentTaskPreviews=this.getCurrentTaskPreviews(),this.setOtherPreviews(),this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath(),t&&this.$router.push(this.previewPath(t.id))},setPreview:function(){var t=this;this.loading.setPreview=!0,this.errors.setPreview=!1,this.$store.dispatch("setPreview",{taskId:this.currentTask.id,entityId:this.currentTask.entity.id,previewId:this.currentPreviewId,callback:function(e){e&&(t.errors.setPreview=!0),t.loading.setPreview=!1}})},setOtherPreviews:function(){var t=this;return this.currentTaskPreviews?this.otherPreviews=this.currentTaskPreviews.filter(function(e){return e.id!==t.currentPreviewId&&"mp4"===e.extension}):this.otherPreviews=[],this.otherPreviews},confirmDeleteTask:function(){var t=this;this.loading.deleteTask=!0,this.errors.deleteTask=!1,this.deleteTask({task:this.currentTask,callback:function(e){t.loading.deleteTask=!1,e?t.errors.deleteTask=!0:t.$router.push(t.entityPage)}})},confirmEditTaskComment:function(t){var e=this;this.loading.editComment=!0,this.errors.editComment=!1,this.editTaskComment({taskId:this.currentTask.id,comment:t,callback:function(t){e.loading.editComment=!1,t?e.errors.editComment=!0:e.$router.push(e.taskPath())}})},confirmDeleteTaskComment:function(){var t=this;this.loading.deleteComment=!0,this.errors.deleteComment=!1;var e=this.route.params.comment_id;this.deleteTaskComment({taskId:this.currentTask.id,commentId:e,callback:function(e){t.loading.deleteComment=!1,e?t.errors.deleteComment=!0:(t.reset(),t.currentTaskPreviews&&t.currentTaskPreviews.length>0?t.resetPreview(t.currentTaskPreviews[0]):t.$router.push(t.taskPath()))}})},confirmDeleteTaskPreview:function(){var t=this;this.loading.deleteExtraPreview=!0,this.errors.deleteExtraPreview=!1;var e=this.currentPreviewId,s=this.getCurrentTaskComments().find(function(t){return t.previews.findIndex(function(t){return t.id===e})>=0});this.$refs["preview-picture"].displayFirst(),this.deleteTaskPreview({taskId:this.currentTask.id,commentId:s.id,previewId:this.currentExtraPreviewId}).then(function(){t.loading.deleteExtraPreview=!1,t.resetPreview(t.currentPreview),t.hideRemoveExtraPreviewModal()}).catch(function(e){console.error(e),t.loading.deleteExtraPreview=!1,t.errors.deleteExtraPreview=!0})},onPreviewAdded:function(t){var e=t.task_id,s=t.comment_id,i=t.preview_file_id,n=t.revision,a=t.extension,o=this.$store.getters.getTaskComment(e,s);!o||0!==o.previews.length&&o.previews[0].id===i||e!==this.currentTask.id||(this.$store.commit("ADD_PREVIEW_END",{preview:{id:i,revision:n,extension:a},taskId:e,commentId:s,comment:o}),this.currentPreviewId?this.resetPreview({id:this.currentPreviewId}):this.resetPreview({id:i}))},toggleSubscribe:function(){this.currentTask&&!this.isAssigned&&(this.isSubscribed?(this.unsubscribeFromTask(this.currentTask.id),this.isSubscribed=!1):(this.subscribeToTask(this.currentTask.id),this.isSubscribed=!0))},taskPath:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"task";t?(t.project_id=this.currentTask.project_id,t.episode_id=this.currentTask.episode_id):t=this.currentTask;var s={name:"open-productions"};return t&&(s={name:e,params:{production_id:t.project_id,task_id:t.id}},this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=t.episode_id||this.currentEpisode.id)),s},previewPath:function(t){var e=this.taskPath(this.currentTask,"task-preview");return e.params&&(e.params.preview_id=t),e},onAnnotationChanged:function(t){var e=t.preview,s=t.annotations,i=this.currentTask.id;this.updatePreviewAnnotation({taskId:i,preview:e,annotations:s})},onAddExtraPreview:function(){this.modals.addExtraPreview=!0},hideExtraPreviewModal:function(){this.modals.addExtraPreview=!1},showRemoveExtraPreviewModal:function(t){this.currentExtraPreviewId=t.id,this.modals.deleteExtraPreview=!0},hideRemoveExtraPreviewModal:function(){this.modals.deleteExtraPreview=!1},onAddPreviewClicked:function(){this.modals.addPreview=!0},closeAddPreviewModal:function(){this.modals.addPreview=!1}}),watch:{currentPreviewId:function(){this.setOtherPreviews()},$route:function(){this.handleModalsDisplay(),this.$route.params.task_id!==this.currentTask.id&&this.loadTaskData();var t=this.route.params.preview_id;!t&&this.currentTaskPreviews&&this.currentTaskPreviews.length>0&&(t=this.currentTaskPreviews[0].id),this.currentPreviewId=t}},socket:{events:{"preview-file:add-file":function(t){this.onPreviewAdded(t)},"preview_file:update":function(t){var e=this,s=this.currentTaskPreviews.filter(function(e){return e.id===t.preview_file_id});s&&this.refreshPreview({taskId:this.currentTask.id,previewId:t.preview_file_id}).then(function(){e.$refs["preview-movie"]?e.$refs["preview-movie"].isDrawing||e.$refs["preview-movie"].reloadAnnotations():e.$refs["preview-picture"]&&(e.$refs["preview-picture"].isDrawing||e.$refs["preview-picture"].reset())})}}},metaInfo:function(){var t="Loading task... - Kitsu";if(this.currentTask){var e=this.taskTypeMap[this.currentTask.task_type_id].name;t="".concat(this.title," / ").concat(e," - Kitsu")}return{title:t}}},eb=tb,sb=(s("af5d"),Object(f["a"])(eb,Nk,Rk,!1,null,"69fb577c",null)),ib=sb.exports,nb=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-types page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("task_types.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item",attrs:{icon:"plus",text:t.$t("task_types.new_task_type"),path:"/task-types/new"}})],1)])]),s("task-type-list",{attrs:{entries:t.taskTypes,"is-loading":t.loading.taskTypes,"is-error":t.errors.taskTypes}}),s("edit-task-type-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editTaskType.isLoading,"is-error":t.editTaskType.isError,"cancel-route":"/task-types","task-type-to-edit":t.taskTypeToEdit},on:{confirm:t.confirmEditTaskType}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteTaskType.isLoading,"is-error":t.deleteTaskType.isError,"cancel-route":"/task-types",text:t.deleteText(),"error-text":t.$t("task_types.delete_error")},on:{confirm:t.confirmDeleteTaskType}})],1)},ab=[],ob=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.isEditing()?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("task_types.edit_title"))+" "+t._s(t.taskTypeToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("task_types.new_task_type"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("task_types.fields.name")},on:{enter:t.confirmClicked},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("combobox",{attrs:{label:t.$t("task_types.fields.priority"),options:t.priorityOptions},on:{enter:t.confirmClicked},model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}}),s("combobox",{attrs:{label:t.$t("task_types.fields.dedicated_to"),options:t.dedicatedToOptions},on:{enter:t.confirmClicked},model:{value:t.form.for_shots,callback:function(e){t.$set(t.form,"for_shots",e)},expression:"form.for_shots"}}),s("combobox",{attrs:{label:t.$t("task_types.fields.allow_timelog"),options:t.allowTimelogOptions},on:{enter:t.confirmClicked},model:{value:t.form.allow_timelog,callback:function(e){t.$set(t.form,"allow_timelog",e)},expression:"form.allow_timelog"}}),s("color-field",{ref:"colorField",attrs:{label:t.$t("task_types.fields.color")},model:{value:t.form.color,callback:function(e){t.$set(t.form,"color",e)},expression:"form.color"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},rb=[],cb={name:"edit-task-type-modal",components:{Combobox:vl,TextField:al,ColorField:nm},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText","taskTypeToEdit"],watch:{taskTypeToEdit:function(){this.taskTypeToEdit&&(this.form={name:this.taskTypeToEdit.name,color:this.taskTypeToEdit.color,priority:String(this.taskTypeToEdit.priority),for_shots:String(this.taskTypeToEdit.for_shots),allow_timelog:String(this.taskTypeToEdit.allow_timelog||"true")})}},data:function(){return{form:{name:"",color:"$grey999",priority:"",for_shots:"false",allow_timelog:"false"},priorityOptions:Qa(1,100).map(function(t){return{label:"".concat(t),value:"".concat(t)}}),dedicatedToOptions:[{label:this.$t("assets.title"),value:"false"},{label:this.$t("shots.title"),value:"true"}],allowTimelogOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}]}},computed:Object(l["a"])({},Object(d["c"])(["taskTypes","taskTypeStatusOptions"])),methods:Object(l["a"])({},Object(d["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.taskTypeToEdit&&this.taskTypeToEdit.id}})},lb=cb,db=(s("8ab9"),Object(f["a"])(lb,ob,rb,!1,null,"556fcc9a",null)),ub=db.exports,pb=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v(t._s(t.$t("task_types.fields.name")))]),s("th",{staticClass:"priority"},[t._v(t._s(t.$t("task_types.fields.priority")))]),s("th",{staticClass:"allow-timelog"},[t._v("\n            "+t._s(t.$t("task_types.fields.allow_timelog"))+"\n          ")]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table splitted-table"},[s("tbody",[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[t._v("\n            "+t._s(t.$t("assets.title"))+"\n          ")])]),t._l(t.assetTaskTypes,function(e){return s("tr",{key:e.id},[s("task-type-name",{staticClass:"name",attrs:{entry:e}}),s("td",{staticClass:"priority"},[t._v(t._s(e.priority))]),s("td",{staticClass:"allow-timelog"},[t._v("\n            "+t._s(e.allow_timelog?t.$t("main.yes"):t.$t("main.no"))+"\n          ")]),s("row-actions",{attrs:{"taskType-id":e.id,"edit-route":{name:"edit-task-type",params:{task_type_id:e.id}},"delete-route":{name:"delete-task-type",params:{task_type_id:e.id}}}})],1)})],2)]),s("table",{staticClass:"table splitted-table"},[s("tbody",[s("tr",{staticClass:"type-header"},[s("td",{attrs:{colspan:"30"}},[t._v("\n            "+t._s(t.$t("shots.title"))+"\n          ")])]),t._l(t.shotTaskTypes,function(e){return s("tr",{key:e.id},[s("task-type-name",{staticClass:"name",attrs:{entry:e}}),s("td",{staticClass:"priority"},[t._v(t._s(e.priority))]),s("td",{staticClass:"allow-timelog"},[t._v("\n            "+t._s(e.allow_timelog?t.$t("main.yes"):t.$t("main.no"))+"\n          ")]),s("row-actions",{attrs:{"taskType-id":e.id,"edit-route":{name:"edit-task-type",params:{task_type_id:e.id}},"delete-route":{name:"delete-task-type",params:{task_type_id:e.id}}}})],1)})],2)])]),s("p",{staticClass:"has-text-centered nb-task-types"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("task_types.number",t.entries.length))+"\n  ")])],1)},hb=[],mb={name:"task-type-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{RowActions:Yd,TableInfo:Vl,TaskTypeName:Il},computed:Object(l["a"])({},Object(d["c"])([]),{assetTaskTypes:function(){return this.entries.filter(function(t){return!t.for_shots})},shotTaskTypes:function(){return this.entries.filter(function(t){return t.for_shots})}}),methods:Object(l["a"])({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}})},fb=mb,_b=(s("187a"),Object(f["a"])(fb,pb,hb,!1,null,"641d2a32",null)),vb=_b.exports,yb={name:"task-types",components:{ButtonLink:zd,DeleteModal:Bu,EditTaskTypeModal:ub,PageTitle:fd,TaskTypeList:vb},data:function(){return{errors:{taskTypes:!1},loading:{taskTypes:!1},modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},taskTypeToDelete:null,taskTypeToEdit:null}},computed:Object(l["a"])({},Object(d["c"])(["editTaskType","deleteTaskType","getTaskType","taskTypes"])),mounted:function(){var t=this;this.loading.taskTypes=!0,this.errors.taskTypes=!1,this.loadTaskTypes(function(e){e?t.errors.taskTypes=!0:t.handleModalsDisplay(),t.loading.taskTypes=!1})},methods:Object(l["a"])({},Object(d["b"])(["loadTaskTypes"]),{confirmEditTaskType:function(t){var e=this,s="newTaskType";this.taskTypeToEdit&&this.taskTypeToEdit.id&&(s="editTaskType",t.id=this.taskTypeToEdit.id),this.$store.dispatch(s,{data:t,callback:function(t){t||(e.modals.isNewDisplayed=!1,e.$router.push("/task-types"))}})},confirmDeleteTaskType:function(){var t=this;this.$store.dispatch("deleteTaskType",{taskType:this.taskTypeToDelete,callback:function(e){e||(t.modals.isDeleteDisplayed=!1)}})},deleteText:function(){var t=this.taskTypeToDelete;return t?this.$t("task_types.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.task_type_id;t.indexOf("new")>0?(this.taskTypeToEdit={color:"#999999"},this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.taskTypeToEdit=this.getTaskType(e),this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.taskTypeToDelete=this.getTaskType(e),this.modals.isDeleteDisplayed=!0):(this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("task_types.title")," - Kitsu")}}},gb=yb,kb=Object(f["a"])(gb,nb,ab,!1,null,"303cfb63",null),bb=kb.exports,Tb=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task-status page fixed-page"},[s("div",{staticClass:"level page-header"},[s("div",{staticClass:"level-left"},[s("page-title",{attrs:{text:t.$t("task_status.title")}})],1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button-link",{staticClass:"level-item task-status-new",attrs:{icon:"plus",text:t.$t("task_status.new_task_status"),path:"/task-status/new"}})],1)])]),s("task-status-list",{attrs:{entries:t.taskStatus,"is-loading":t.taskStatusList.isLoading,"is-error":t.taskStatusList.isError}}),s("edit-task-status-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.editStatus.isLoading,"is-error":t.editStatus.isError,"cancel-route":"/task-status","task-status-to-edit":t.taskStatusToEdit},on:{confirm:t.confirmEditTaskStatus}}),s("delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.deleteStatus.isLoading,"is-error":t.deleteStatus.isError,"cancel-route":"/task-status",text:t.deleteText(),"error-text":t.$t("task_status.delete_error")},on:{confirm:t.confirmDeleteTaskStatus}})],1)},Sb=[],Cb=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticStyle:{overflow:"hidden"}},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("task_status.fields.name"))+"\n          ")]),s("th",{staticClass:"short-name"},[t._v("\n            "+t._s(t.$t("task_status.fields.short_name"))+"\n          ")]),s("th",{staticClass:"is-done"},[t._v("\n            "+t._s(t.$t("task_status.fields.is_done"))+"\n          ")]),s("th",{staticClass:"is-retake"},[t._v("\n            "+t._s(t.$t("task_status.fields.is_retake"))+"\n          ")]),s("th",{staticClass:"is-artist-allowed"},[t._v("\n            "+t._s(t.$t("task_status.fields.is_artist_allowed"))+"\n          ")]),s("th",{staticClass:"actions"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.entries,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n          ")]),s("task-status-name",{staticClass:"short-name",attrs:{entry:e}}),s("td",{staticClass:"is-done"},[t._v("\n            "+t._s(t.translateBoolean(e.is_done))+"\n          ")]),s("td",{staticClass:"is-retake"},[t._v("\n            "+t._s(t.translateBoolean(e.is_retake))+"\n          ")]),s("td",{staticClass:"is-artist-allowed"},[t._v("\n            "+t._s(t.translateBoolean(e.is_artist_allowed))+"\n          ")]),s("row-actions",{attrs:{"entry-id":e.id,"edit-route":{name:"edit-task-status",params:{task_status_id:e.id}},"delete-route":{name:"delete-task-status",params:{task_status_id:e.id}},"hide-edit":"todo"===e.short_name,"hide-delete":"todo"===e.short_name}})],1)}))])]),s("p",{staticClass:"has-text-centered nb-task-status"},[t._v("\n    "+t._s(t.entries.length)+" "+t._s(t.$tc("task_status.number",t.entries.length))+"\n  ")])],1)},wb=[],Eb=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name"},[s("div",{staticClass:"tag",style:{background:t.color,color:t.textColor}},[t._v("\n    "+t._s(t.entry.short_name)+"\n  ")])])},Pb=[],xb={name:"task-status-name",components:{},props:["entry"],computed:Object(l["a"])({},Object(d["c"])(["isDarkTheme"]),{color:function(){return"todo"===this.entry.short_name&&this.isDarkTheme?"#5F626A":this.entry.color},textColor:function(){return"todo"!==this.entry.short_name||this.isDarkTheme?"white":"#333"}}),methods:Object(l["a"])({},Object(d["b"])([]))},Ob=xb,Ab=(s("f2a2"),Object(f["a"])(Ob,Eb,Pb,!1,null,"42a13a88",null)),$b=Ab.exports,Lb={name:"task-status-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{RowActions:Yd,TableInfo:Vl,TaskStatusName:$b},computed:Object(l["a"])({},Object(d["c"])([])),methods:Object(l["a"])({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},translateBoolean:function(t){return t?this.$t("main.yes"):this.$t("main.no")}})},Db=Lb,jb=(s("2eb6"),Object(f["a"])(Db,Cb,wb,!1,null,"044ed218",null)),Ib=jb.exports,Mb=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{modal:!0,"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[t.isEditing()?s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("task_status.edit_title"))+" "+t._s(t.taskStatusToEdit.name)+"\n      ")]):s("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("task_status.new_task_status"))+"\n      ")]),s("form",{on:{submit:function(t){t.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{"input-class":"task-status-name",label:t.$t("task_status.fields.name")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"shortNameField",attrs:{"input-class":"task-status-short-name",label:t.$t("task_status.fields.short_name")},model:{value:t.form.short_name,callback:function(e){t.$set(t.form,"short_name",e)},expression:"form.short_name"}}),s("combobox",{attrs:{label:t.$t("task_status.fields.is_done"),options:t.isDoneOptions},model:{value:t.form.is_done,callback:function(e){t.$set(t.form,"is_done",e)},expression:"form.is_done"}}),s("combobox",{attrs:{label:t.$t("task_status.fields.is_retake"),options:t.isRetakeOptions},model:{value:t.form.is_retake,callback:function(e){t.$set(t.form,"is_retake",e)},expression:"form.is_retake"}}),s("combobox",{attrs:{label:t.$t("task_status.fields.is_artist_allowed"),options:t.isArtistAllowedOptions},model:{value:t.form.is_artist_allowed,callback:function(e){t.$set(t.form,"is_artist_allowed",e)},expression:"form.is_artist_allowed"}}),s("color-field",{ref:"colorField",attrs:{label:t.$t("task_status.fields.color"),colors:t.colors},model:{value:t.form.color,callback:function(e){t.$set(t.form,"color",e)},expression:"form.color"}})],1),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"confirm-edit-task-status":!0,"is-primary":!0,"is-loading":t.isLoading},on:{click:t.confirmClicked}},[t._v("\n          "+t._s(t.$t("main.confirmation"))+"\n        ")]),s("router-link",{staticClass:"button is-link",attrs:{to:t.cancelRoute}},[t._v("\n          "+t._s(t.$t("main.cancel"))+"\n        ")])],1)])])])},Fb=[],qb={name:"edit-task-status-modal",components:{Combobox:vl,TextField:al,ColorField:nm},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","errorText","taskStatusToEdit"],data:function(){return{form:{name:"",short_name:"",color:"$grey999",is_reviewable:"true",is_done:"false"},isRetakeOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}],isDoneOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}],isArtistAllowedOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}],colors:["#000000","#E81123","#ff3860","#FF5722","#FFA000","#AFB42B","#22d160","#43A047","#498205","#607D8B","#3273dc","#8764B8","#ab26ff"]}},computed:Object(l["a"])({},Object(d["c"])(["taskStatus","taskStatusStatusOptions"])),methods:Object(l["a"])({},Object(d["b"])([]),{confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.taskStatusToEdit&&this.taskStatusToEdit.id},resetForm:function(){this.taskStatusToEdit&&(this.form={name:this.taskStatusToEdit.name,short_name:this.taskStatusToEdit.short_name,color:this.taskStatusToEdit.color,is_reviewable:String(this.taskStatusToEdit.is_reviewable),is_done:String(this.taskStatusToEdit.is_done),is_retake:String(this.taskStatusToEdit.is_retake||!1),is_artist_allowed:String(this.taskStatusToEdit.is_artist_allowed)})}}),watch:{taskStatusToEdit:function(){this.resetForm()},active:function(){var t=this;this.active&&(this.resetForm(),setTimeout(function(){t.$refs.nameField.focus()},100))}}},Nb=qb,Rb=(s("20c8"),Object(f["a"])(Nb,Mb,Fb,!1,null,"078f585c",null)),Vb=Rb.exports,Bb={name:"task-status",components:{ButtonLink:zd,DeleteModal:Bu,EditTaskStatusModal:Vb,PageTitle:fd,TaskStatusList:Ib},data:function(){return{taskStatusToDelete:null,taskStatusToEdit:null,modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},taskStatusList:{isLoading:!1,isError:!1},editStatus:{isLoading:!1,isError:!1},deleteStatus:{isLoading:!1,isError:!1}}},computed:Object(l["a"])({},Object(d["c"])(["taskStatus","taskStatusMap"])),created:function(){this.handleModalsDisplay()},methods:Object(l["a"])({},Object(d["b"])(["deleteTaskStatus"]),{confirmEditTaskStatus:function(t){var e=this,s=!(this.taskStatusToEdit&&this.taskStatusToEdit.id),i="newTaskStatus";s||(i="saveTaskStatus",t.id=this.taskStatusToEdit.id),this.editStatus.isLoading=!0,this.editStatus.isError=!1,this.$store.dispatch(i,{form:t,callback:function(t){e.editStatus.isLoading=!1,t?e.editStatus.isError=!0:e.$router.push({name:"task-status"})}})},confirmDeleteTaskStatus:function(){var t=this;this.deleteStatus.isLoading=!0,this.deleteStatus.isError=!1,this.deleteTaskStatus({taskStatus:this.taskStatusToDelete,callback:function(e){t.deleteStatus.isLoading=!1,e?t.deleteStatus.isError=!0:t.$router.push({name:"task-status"})}})},deleteText:function(){var t=this.taskStatusToDelete;return t?this.$t("task_status.delete_text",{name:t.name}):""},handleModalsDisplay:function(){var t=this.$store.state.route.path,e=this.$store.state.route.params.task_status_id;t.indexOf("new")>0?(this.taskStatusToEdit={color:"#000000"},this.modals.isNewDisplayed=!0):t.indexOf("edit")>0?(this.taskStatusToEdit=this.taskStatusMap[e],this.modals.isNewDisplayed=!0):t.indexOf("delete")>0?(this.taskStatusToDelete=this.taskStatusMap[e],this.modals.isDeleteDisplayed=!0):(this.modals.isNewDisplayed=!1,this.modals.isDeleteDisplayed=!1)}}),watch:{$route:function(){this.handleModalsDisplay()}},metaInfo:function(){return{title:"".concat(this.$t("task_status.title")," - Kitsu")}}},Ub=Bb,zb=Object(f["a"])(Ub,Tb,Sb,!1,null,"b571755c",null),Hb=zb.exports,Gb=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[t.isCurrentUserManager?s("div",{staticClass:"timesheets page"},[s("div",{staticClass:"page-header flexrow"},[s("page-title",{staticClass:"flexrow-item",attrs:{text:t.$t("timesheets.title")}}),s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("timesheets.detail_level"),options:t.detailOptions},model:{value:t.detailLevelString,callback:function(e){t.detailLevelString=e},expression:"detailLevelString"}}),s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("timesheets.year"),options:t.yearOptions},model:{value:t.yearString,callback:function(e){t.yearString=e},expression:"yearString"}}),"day"===t.detailLevelString?s("combobox",{staticClass:"flexrow-item",attrs:{label:t.$t("timesheets.month"),options:t.monthOptions},model:{value:t.monthString,callback:function(e){t.monthString=e},expression:"monthString"}}):t._e()],1),s("people-timesheet-list",{staticClass:"data-list",attrs:{people:t.filteredPeople,timesheet:t.timesheet,"detail-level":t.detailLevel,month:t.currentMonth,year:t.currentYear,"is-loading":t.isLoading,"is-error":t.isLoadingError}})],1):t._e()]),t.showInfo?s("div",{staticClass:"column side-column"},[s("people-timesheet-info",{attrs:{person:t.currentPerson,year:t.currentYear,month:t.currentMonth,week:t.currentWeek,day:t.currentDay,"is-loading":t.isInfoLoading,"is-loading-error":t.isInfoLoadingError,tasks:t.tasks},on:{close:t.hideSideInfo}})],1):t._e()])},Wb=[],Kb=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",{staticClass:"table-header-wrapper"},[s("table",{ref:"headerWrapper",staticClass:"table table-header"},[s("thead",[s("tr",[s("th",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("people.list.name"))+"\n          ")]),t._l(t.monthRange,function(e){return"month"===t.detailLevel?s("th",{key:"month-"+e,staticClass:"time"},[t._v("\n            "+t._s(t.monthToString(e))+"\n          ")]):t._e()}),t._l(t.weekRange,function(e){return"week"===t.detailLevel?s("th",{key:"week-"+e,staticClass:"daytime"},[t._v("\n            "+t._s(e)+"\n          ")]):t._e()}),t._l(t.dayRange,function(e){return"day"===t.detailLevel?s("th",{key:"day-"+e,staticClass:"daytime"},[t._v("\n            "+t._s(e)+"\n          ")]):t._e()}),s("th",{staticClass:"actions"})],2)])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.isLoading?t._e():s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.people,function(e){return s("tr",{key:e.id},[s("people-name-cell",{staticClass:"name",attrs:{entry:e}}),t._l(t.monthRange,function(i){return"month"===t.detailLevel?s("td",{key:"month-"+i+"-"+e.id,class:{time:!0,selected:t.isMonthSelected(e.id,t.year,i)}},[t.monthDuration(i,e.id)>0?s("router-link",{staticClass:"duration",attrs:{to:{name:"timesheets-month-person",params:{person_id:e.id,year:t.year,month:i}}}},[t._v("\n              "+t._s(t.monthDuration(i,e.id))+"\n            ")]):s("span",[t._v("\n            -\n            ")])],1):t._e()}),t._l(t.weekRange,function(i){return"week"===t.detailLevel?s("td",{key:"week-"+i+"-"+e.id,class:{daytime:!0,selected:t.isWeekSelected(e.id,t.year,i)}},[t.weekDuration(i,e.id)>0?s("router-link",{class:{duration:!0,warning:t.weekDuration(i,e.id)>35},attrs:{to:{name:"timesheets-week-person",params:{person_id:e.id,year:t.year,week:i}}}},[t._v("\n              "+t._s(t.weekDuration(i,e.id))+"\n            ")]):s("span",[t._v("\n            -\n            ")])],1):t._e()}),t._l(t.dayRange,function(i){return"day"===t.detailLevel?s("td",{key:"day-"+i+"-"+e.id,staticClass:"daytime",class:{daytime:!0,weekend:t.isWeekend(t.year,t.month,i),selected:t.isDaySelected(e.id,t.year,t.month,i)}},[t.dayDuration(i,e.id)>0?s("router-link",{staticClass:"duration",attrs:{to:{name:"timesheets-day-person",params:{person_id:e.id,year:t.year,month:t.month,day:i}}}},[t._v("\n              "+t._s(t.dayDuration(i,e.id))+"\n            ")]):s("span",[t._v("\n            -\n            ")])],1):t._e()}),s("td",{staticClass:"actions"})],2)}))])]),t.isLoading?t._e():s("p",{staticClass:"has-text-centered footer-info"},[t._v("\n    "+t._s(t.people.length)+" "+t._s(t.$tc("people.persons",t.people.length))+"\n  ")])],1)},Qb=[],Yb={name:"people-timesheet-list",components:{PeopleNameCell:K_,TableInfo:Vl},data:function(){return{detailOptions:[{label:"Day",value:"day"},{label:"Month",value:"month"}],currentMonth:Ua()().month()+1,currentYear:Ua()().year(),currentWeek:Ua()().week()}},props:{timesheet:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}},detailLevel:{type:String,default:"day"},year:{type:Number,default:0},month:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:Object(l["a"])({},Object(d["c"])(["isCurrentUserManager","route"]),{monthRange:function(){return Xa(this.year,this.currentYear,this.currentMonth)},dayRange:function(){return Ja(this.year,this.month,this.currentYear,this.currentMonth)},weekRange:function(){return Za(this.year,this.currentYear,this.currentWeek)}}),methods:Object(l["a"])({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},monthToString:Ya,monthDuration:function(t,e){var s="".concat(t);return this.getDuration(s,e)},weekDuration:function(t,e){return this.getDuration(t,e)},dayDuration:function(t,e){return this.getDuration(t,e)},getDuration:function(t,e){return this.timesheet&&this.timesheet[t]&&this.timesheet[t][e]?this.timesheet[t][e]/60:"-"},isWeekend:function(t,e,s){var i=Ua()("".concat(t,"-").concat(e,"-").concat(s));return s<10&&(i=Ua()("".concat(t,"-").concat(e,"-0").concat(s))),[0,6].includes(i.day())},isDaySelected:function(t,e,s,i){return this.$route.params.person_id&&this.$route.params.person_id===t&&this.$route.params.year===e&&this.$route.params.month===s&&this.$route.params.day===i},isWeekSelected:function(t,e,s){return this.$route.params.person_id&&this.$route.params.person_id===t&&this.$route.params.year===e&&this.$route.params.week===s},isMonthSelected:function(t,e,s){return this.$route.params.person_id&&this.$route.params.person_id===t&&this.$route.params.year===e&&this.$route.params.month===s}}),watch:{detailLevel:function(){this.$refs.headerWrapper.style.left=0},route:function(){var t=document.getElementsByClassName("selected");0===t.length&&(this.$refs.body.scrollLeft+=350)}}},Xb=Yb,Jb=(s("855c"),Object(f["a"])(Xb,Kb,Qb,!1,null,"2a29175c",null)),Zb=Jb.exports,tT=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"people-timesheet-info"},[s("div",{staticClass:"close"},[s("router-link",{staticClass:"close-button",attrs:{to:t.closeRoute}},[s("x-icon")],1)],1),s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.person,"no-cache":!0}}),s("page-title",{staticClass:"flexrow-item",attrs:{text:t.person.full_name}})],1),t.isMonthInfo?s("div",{staticClass:"info-date"},[t._v("\n    "+t._s(t.monthString)+" "+t._s(t.year)+"\n  ")]):t.isWeekInfo?s("div",{staticClass:"info-date"},[t._v("\n    week "+t._s(t.week)+", "+t._s(t.startDay)+" - "+t._s(t.endDay)+" "+t._s(t.weekMonth)+" "+t._s(t.year)+"\n  ")]):t.isDayInfo?s("div",{staticClass:"info-date"},[t._v("\n    "+t._s(t.day)+" "+t._s(t.monthString)+" "+t._s(t.year)+"\n  ")]):t._e(),s("time-spent-task-list",{staticClass:"time-spent-list",attrs:{tasks:t.tasks,"is-loading":t.isLoading,"is-error":t.isLoadingError}})],1)},eT=[],sT=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isLoadingError}}),s("div",{staticClass:"aggregated-time-spents"},t._l(Object.keys(t.projects),function(e){return s("div",{key:e,staticClass:"by-project"},[t.projectNames[e]?s("production-name",{attrs:{project:{id:e,name:t.projectNames[e]}}}):t._e(),t._l(Object.keys(t.projects[e]),function(i){return s("div",{key:i,staticClass:"by-task-type-id"},[s("task-type-name",{attrs:{"task-type":t.taskTypeMap[i]}}),s("div",{staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.projects[e][i],function(e){return s("tr",{key:e.id,staticClass:"by-task-type-id"},[s("td",{staticClass:"name"},[t._v(t._s(e.name))]),s("td",{staticClass:"duration"},[t._v(t._s(e.duration/60))])])}))])])],1)})],2)}))],1)},iT=[],nT=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"production-name"},[s("router-link",{staticClass:"flexrow",attrs:{title:t.productionInfo,to:t.productionRoute}},[t.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:t.getAvatarColor(t.project),width:t.size+"px",height:t.size+"px","font-size":t.size-15+"px","line-height":t.size+"px"}},[t.project.has_avatar?s("span",[s("img",{attrs:{src:t.getThumbnailPath(t.project)}})]):s("span",[t._v("\n        "+t._s(t.generateAvatar(t.project))+"\n      ")])]):t._e(),t.onlyAvatar?t._e():s("span",{staticClass:"flexrow-item"},[t._v("\n      "+t._s(t.project.name)+"\n    ")])])],1)},aT=[],oT={name:"production-name",props:{project:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String}},computed:Object(l["a"])({},Object(d["c"])([]),{productionRoute:function(){var t={name:this.lastProductionScreen,params:{production_id:this.project.id}};return this.project.first_episode_id&&(t.name="episode-".concat(this.lastProductionScreen),t.params.episode_id=this.project.first_episode_id),t},productionInfo:function(){var t=this.project.fps,e=this.project.ratio,s=this.project.resolution;return t||e||s?"fps: ".concat(t,"\nratio: ").concat(e,"\nresolution: ").concat(s):""}}),methods:Object(l["a"])({},Object(d["b"])([]),{generateAvatar:function(t){var e=t.name.length>0?t.name[0]:"P";return e.toUpperCase()},getAvatarColor:function(t){return Va.fromString(t.name)},getThumbnailPath:function(t){return"/api/pictures/thumbnails/projects/".concat(t.id,".png")}})},rT=oT,cT=(s("4706"),Object(f["a"])(rT,nT,aT,!1,null,"0820b058",null)),lT=cT.exports,dT={name:"todos-list",components:{TableInfo:Vl,ProductionName:lT,TaskTypeName:$l,ValidationTag:Wl},data:function(){return{projectNames:{}}},props:{tasks:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isLoadingError:{type:Boolean,default:!1}},computed:Object(l["a"])({},Object(d["c"])(["currentProduction","lastProductionScreen","taskTypeMap"]),{projects:function(){var t={};return this.tasks.forEach(function(e){t[e.project_id]||(t[e.project_id]={}),t[e.project_id][e.task_type_id]||(t[e.project_id][e.task_type_id]=[]);var s=e.entity_name;["Shot","Sequence"].includes(e.entity_type_name)?(s="".concat(e.sequence_name," / ").concat(s),e.episode_name&&(s="".concat(e.episode_name," / ").concat(s))):s="".concat(e.entity_type_name," / ").concat(s),t[e.project_id][e.task_type_id].push({id:e.id,name:s,duration:e.duration})}),Ta()(t).forEach(function(e){Ta()(t[e]).forEach(function(s){t[e][s]=da(t[e][s])})}),t}}),methods:Object(l["a"])({},Object(d["b"])([]),{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")}}),watch:{tasks:function(){this.projectNames=this.tasks.reduce(function(t,e){return t[e.project_id]=e.project_name,t},{})}}},uT=dT,pT=(s("e2be"),Object(f["a"])(uT,sT,iT,!1,null,"d80766f0",null)),hT=pT.exports,mT={name:"people-timesheet-info",components:{XIcon:Ic["D"],PageTitle:fd,PeopleAvatar:Zl,TableInfo:Vl,TimeSpentTaskList:hT},props:{person:{type:Object,default:function(){}},year:{type:Number,default:0},month:{type:Number,default:0},week:{type:Number,default:0},day:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isLoadingError:{type:Boolean,default:!1},tasks:{type:Array,default:function(){return[]}}},computed:Object(l["a"])({},Object(d["c"])([]),{startDay:function(){return Ua()().day("Monday").year(this.year).week(this.week).date()},endDay:function(){return Ua()().day("Monday").year(this.year).week(this.week).add("days",6).date()},weekMonth:function(){return Ua()().day("Monday").year(this.year).week(this.week).format("MMM")},monthString:function(){return Ya(this.month)},isMonthInfo:function(){return this.$route.path.indexOf("month")>0},isWeekInfo:function(){return this.$route.path.indexOf("week")>0},isDayInfo:function(){return this.$route.path.indexOf("day")>0},closeRoute:function(){return this.isMonthInfo?{name:"timesheets-month",params:{year:this.year}}:this.isWeekInfo?{name:"timesheets-week",params:{year:this.year}}:this.isDayInfo?{name:"timesheets-day",params:{year:this.year,month:this.month}}:{name:"timesheets"}}}),methods:Object(l["a"])({},Object(d["b"])([]),{onCloseClicked:function(){this.$emit("close")}})},fT=mT,_T=(s("da96"),Object(f["a"])(fT,tT,eT,!1,null,"9eb72ac4",null)),vT=_T.exports,yT={name:"people",components:{Combobox:vl,PeopleTimesheetList:Zb,PeopleTimesheetInfo:vT,PageTitle:fd},data:function(){return{detailOptions:[{label:"Day",value:"day"},{label:"Week",value:"week"},{label:"Month",value:"month"}],detailLevelString:"day",detailLevel:"day",yearString:"".concat(Ua()().year()),monthString:"".concat(Ua()().month()+1),currentYear:Ua()().year(),currentMonth:Ua()().month()+1,currentWeek:Ua()().week(),currentDay:Ua()().date(),currentPerson:this.getCurrentPerson(),isLoading:!1,isLoadingError:!1,showInfo:!0,isInfoLoading:!1,isInfoLoadingError:!1,tasks:[]}},created:function(){var t=this;this.isLoading=!0,0===this.people.length?this.loadPeople(function(){t.loadRoute()}):this.loadRoute()},computed:Object(l["a"])({},Object(d["c"])(["isCurrentUserManager","people","personMap","timesheet"]),{filteredPeople:function(){var t=this;return this.people.filter(function(e){var s=Ta()(t.timesheet),i=!1,n=0;do{t.timesheet[s[n]]&&(i=void 0!==t.timesheet[s[n]][e.id]),n++}while(!i&&n<s.length);return e.active&&i})},yearOptions:function(){var t=2018,e=Ua()().year();return Qa(t,e).map(function(t){return{label:t,value:"".concat(t)}})},monthOptions:function(){var t="".concat(Ua()().year()),e=1,s=Ua()().month()+1,i=Qa(e,12);return t===this.yearString&&(i=Qa(e,s)),i.map(function(t){return{label:Ya(t),value:"".concat(t)}})}}),methods:Object(l["a"])({},Object(d["b"])(["loadPeople","loadAggregatedPersonTimeSpents","loadTimesheets"]),{reloadTimesheet:function(){var t=this;this.isLoading=!0,this.loadTimesheets({detailLevel:this.detailLevel,year:this.currentYear,month:this.currentMonth}).then(function(e){t.isLoading=!1}).catch(function(){t.isLoading=!1,t.isLoadingError=!0})},showSideInfo:function(){this.showInfo=!0},hideSideInfo:function(){this.showInfo=!1},loadRoute:function(){var t=this.$route.params,e=t.month,s=t.year,i=t.week,n=t.day,a="".concat(this.detailLevel),o="".concat(this.currentMonth),r="".concat(this.currentYear);this.$route.path.indexOf("week")>0&&(this.detailLevel="week"),this.$route.path.indexOf("month")>0&&(this.detailLevel="month"),this.$route.path.indexOf("day")>0&&(this.detailLevel="day"),this.currentPerson=this.getCurrentPerson(),this.detailLevelString=this.detailLevel,e&&(this.currentMonth=Number(e),this.monthString="".concat(e)),s&&(this.currentYear=Number(s),this.yearString="".concat(s)),i&&(this.currentWeek=Number(i),this.weekString="".concat(i)),n&&(this.currentDay=Number(n));var c=a!==this.detailLevel,l=0!==o.localeCompare("".concat(this.currentMonth)),d=0!==r.localeCompare("".concat(this.currentYear));this.$route.path.indexOf("person")>0?(this.showSideInfo(),this.loadAggregate(),this.isLoading&&this.reloadTimesheet()):(this.hideSideInfo(),(this.isLoading||l||d||c)&&this.reloadTimesheet())},loadAggregate:function(){var t=this;this.isInfoLoading=!0,this.isInfoLoadingError=!1,this.tasks=[],this.loadAggregatedPersonTimeSpents({personId:this.$route.params.person_id,detailLevel:this.detailLevel,year:this.$route.params.year,month:this.$route.params.month,week:this.$route.params.week,day:this.$route.params.day}).then(function(e){t.isInfoLoading=!1,t.tasks=e.filter(function(t){return t.duration>0})}).catch(function(e){console.error(e),t.isInfoLoadingError=!0})},getCurrentPerson:function(){var t=this.$route.params.person_id;return t&&this.personMap?this.personMap[t]:{}}}),watch:{detailLevelString:function(){this.detailLevel!==this.detailLevelString&&("month"===this.detailLevelString?this.$router.push({name:"timesheets-month",params:{year:this.currentYear}}):"week"===this.detailLevelString?this.$router.push({name:"timesheets-week",params:{year:this.currentYear}}):"day"===this.detailLevelString&&this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:this.currentMonth}}))},yearString:function(){var t=Number(this.yearString),e=Ua()().month();this.currentYear!==t&&("month"===this.detailLevel?this.$router.push({name:"timesheets-month",params:{year:t}}):"week"===this.detailLevel?this.$router.push({name:"timesheets-week",params:{year:t}}):this.$router.push({name:"timesheets-day",params:{year:t,month:Math.min(Number(this.monthString),e)}}))},monthString:function(){this.currentMonth!==Number(this.monthString)&&this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:Number(this.monthString)}})},$route:function(){this.loadRoute()}},metaInfo:function(){return{title:"".concat(this.$t("timesheets.title")," - Kitsu")}}},gT=yT,kT=(s("27c0"),Object(f["a"])(gT,Gb,Wb,!1,null,"186c82be",null)),bT=kT.exports,TT=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"todos page"},[s("div",{staticClass:"task-tabs tabs"},[s("ul",[s("li",{class:{"is-active":t.isTabActive("todos")}},[s("router-link",{attrs:{to:{name:"todos"}}},[t._v("\n              "+t._s(t.$t("tasks.current"))+"\n            ")])],1),s("li",{class:{"is-active":t.isTabActive("done")},on:{click:function(e){t.selectTab("done")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"done"}}}},[t._v("\n              "+t._s(t.$t("tasks.done"))+" ("+t._s(t.displayedDoneTasks.length)+")\n            ")])],1),s("li",{class:{"is-active":t.isTabActive("timesheets")},on:{click:function(e){t.selectTab("timesheet")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"timesheets"}}}},[t._v("\n              "+t._s(t.$t("timesheets.title"))+"\n            ")])],1)])]),s("div",{staticClass:"flexrow"},[t.isTabActive("done")?t._e():s("search-field",{ref:"todos-search-field",class:{"search-field":!0,"flexrow-item":!0},attrs:{"can-save":!0},on:{change:t.onSearchChange,save:t.saveSearchQuery}}),s("span",{staticClass:"flexrow-item push-right"}),s("span",{staticClass:"flexrow-item"},[t._v("\n          "+t._s(t.$t("main.sorted_by"))+"\n        ")]),s("combobox",{staticClass:"flexrow-item",attrs:{options:t.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:t.currentSort,callback:function(e){t.currentSort=e},expression:"currentSort"}})],1),t.isTabActive("todos")||t.isTabActive("timesheets")?s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:t.todoSearchQueries},on:{changesearch:t.changeSearch,removesearch:t.removeSearchQuery}})],1):t._e(),t.isTabActive("todos")?s("todos-list",{ref:"todo-list",attrs:{entries:t.sortedTasks,"is-loading":t.isTodosLoading,"is-error":t.isTodosLoadingError,"selection-grid":t.todoSelectionGrid},on:{scroll:t.setTodoListScrollPosition}}):t._e(),t.isTabActive("done")?s("todos-list",{ref:"done-list",attrs:{entries:t.displayedDoneTasks,"is-loading":t.isTodosLoading,"is-error":t.isTodosLoadingError,done:!0}}):t._e(),t.isTabActive("timesheets")?s("timesheet-list",{ref:"timesheet-list",attrs:{tasks:t.loggableTodos,"done-tasks":t.loggableDoneTasks,"is-loading":t.isTodosLoading,"is-error":t.isTodosLoadingError,"time-spent-map":t.timeSpentMap,"time-spent-total":t.timeSpentTotal,"hide-done":t.todosSearchText.length>0},on:{"date-changed":t.onDateChanged,"time-spent-change":t.onTimeSpentChange}}):t._e()],1)]),1===t.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(t.selectedTasks)[0]}})],1):t._e()])},ST=[],CT={name:"todos",components:{Combobox:vl,PageTitle:fd,SearchField:pp,SearchQueryList:yp,TaskInfo:qh,TimesheetList:Lv,TodosList:zv},data:function(){return{activeTab:"todos",currentSort:"priority",selectedDate:Ua()().format("YYYY-MM-DD"),sortOptions:["entity_name","priority","task_status_short_name","estimation","last_comment_date"].map(function(t){return{label:t,value:t}})}},mounted:function(){var t=this;this.updateActiveTab(),this.todosSearchText.length>0&&this.$refs["todos-search-field"].setValue(this.todosSearchText),this.loadTodos({date:this.selectedDate,callback:function(){t.todoList&&t.$nextTick(function(){t.todoList.setScrollPosition(t.todoListScrollPosition)}),t.resizeHeaders()}})},computed:Object(l["a"])({},Object(d["c"])(["user","displayedTodos","displayedDoneTasks","todosSearchText","isTodosLoading","isTodosLoadingError","nbSelectedTasks","selectedTasks","taskTypeMap","timeSpentMap","timeSpentTotal","todoListScrollPosition","todoSelectionGrid","todoSearchQueries"]),{loggableTodos:function(){var t=this;return this.displayedTodos.filter(function(e){return t.taskTypeMap[e.task_type_id].allow_timelog})},loggableDoneTasks:function(){var t=this;return this.displayedDoneTasks.filter(function(e){return t.taskTypeMap[e.task_type_id].allow_timelog})},todoList:function(){return this.$refs["todo-list"]},haveDoneList:function(){return this.$refs["done-list"]},sortedTasks:function(){var t="entity_name"===this.currentSort,e=Object(Oa["a"])(this.displayedTodos);return console.log(e),t?e.sort(ea()("project_name").thenBy("task_type_name").thenBy("entity_name")):e.sort(ea()(this.currentSort,-1).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name"))}}),methods:Object(l["a"])({},Object(d["b"])(["loadTodos","loadOpenProductions","removeTodoSearch","saveTodoSearch","setTodoListScrollPosition","setTodosSearch","setTimeSpent"]),{isTabActive:function(t){return this.activeTab===t},resizeHeaders:function(){var t=this;this.$nextTick(function(){t.todoList&&t.todoList.resizeHeaders(),t.haveDoneList&&t.haveDoneList.resizeHeaders()})},selectTab:function(t){var e=this;this.activeTab=t,this.resizeHeaders(),setTimeout(function(){e.$refs["todos-search-field"]&&e.$refs["todos-search-field"].focus()},300)},updateActiveTab:function(){["done","timesheets"].includes(this.$route.params.tab)?this.activeTab=this.$route.params.tab:this.activeTab="todos"},onSearchChange:function(t){this.setTodosSearch(t)},changeSearch:function(t){this.$refs["todos-search-field"].setValue(t.search_query),this.$refs["todos-search-field"].$emit("change",t.search_query)},saveSearchQuery:function(t){this.saveTodoSearch(t).then(function(){}).catch(function(t){t&&console.log("error",t)})},removeSearchQuery:function(t){this.removeTodoSearch(t).then(function(){}).catch(function(t){t&&console.log("error",t)})},onDateChanged:function(t){this.selectedDate=Ua()(t).format("YYYY-MM-DD"),this.loadTodos({date:this.selectedDate,forced:!0})},onTimeSpentChange:function(t){t.personId=this.user.id,t.date=this.selectedDate,this.setTimeSpent(t)},onAssignation:function(t){var e=this;this.user.id===t.person_id&&this.loadOpenProductions(function(){e.loadTodos({forced:!0,date:e.selectedDate,callback:function(){e.todoList&&e.$nextTick(function(){e.todoList.setScrollPosition(e.todoListScrollPosition)}),e.resizeHeaders()}})})}}),socket:{events:{"task:assign":function(t){this.onAssignation(t)},"task:unassign":function(t){this.onAssignation(t)}}},watch:{$route:function(){this.updateActiveTab()}},metaInfo:function(){return{title:"".concat(this.$t("tasks.my_tasks")," - Kitsu")}}},wT=CT,ET=(s("4d1b"),Object(f["a"])(wT,TT,ST,!1,null,"105252d7",null)),PT=ET.exports,xT=[{path:"",component:m_,beforeEnter:function(t,e,s){Pc.requireAuth(t,e,function(t){t?s(t):(Ac.setTimezone(),Oc.setLocale(),0===wc.state.productions.openProductions.length?Lc(function(t){t?s({name:"server-down"}):lc.getters.isCurrentUserCGArtist(lc.state)?s({name:"todos"}):s({name:"open-productions"})}):lc.getters.isCurrentUserCGArtist(lc.state)?(wc.commit("DATA_LOADING_END"),s({name:"todos"})):(wc.commit("DATA_LOADING_END"),s({name:"open-productions"})))})}},{path:"/",component:m_,beforeEnter:function(t,e,s){Pc.requireAuth(t,e,function(t){t?s(t):(Ac.setTimezone(),Oc.setLocale(),0===Xo.state.taskTypes.length?Lc(function(){wc.commit("DATA_LOADING_END"),s()}):(wc.commit("DATA_LOADING_END"),s()))})},children:[{path:"",name:"home"},{path:"/open-productions",component:q_,name:"open-productions"},{path:"/people",component:cv,name:"people"},{path:"/people/new",component:cv,name:"new-people"},{path:"/people/edit/:person_id",component:cv,name:"edit-person"},{name:"delete-person",path:"/people/delete/:person_id",component:cv},{path:"/people/import",component:cv,name:"import-people"},{path:"/people/:person_id",component:Kv,name:"person"},{path:"/people/:person_id/:tab",component:Kv,name:"person-tab"},{path:"/timesheets",component:bT,name:"timesheets"},{path:"/timesheets/month/:year",component:bT,name:"timesheets-month"},{path:"/timesheets/month/:year/:month/persons/:person_id",component:bT,name:"timesheets-month-person"},{path:"/timesheets/week/:year",component:bT,name:"timesheets-week"},{path:"/timesheets/week/:year/:week/persons/:person_id",component:bT,name:"timesheets-week-person"},{path:"/timesheets/day/:year/:month",component:bT,name:"timesheets-day"},{path:"/timesheets/day/:year/:month/:day/persons/:person_id",component:bT,name:"timesheets-day-person"},{path:"/productions",component:oy,name:"productions"},{path:"/productions/new",component:oy,name:"productions-new"},{path:"/productions/edit/:production_edit_id",component:oy,name:"edit-production"},{path:"/productions/delete/:production_delete_id",component:oy,name:"delete-production"},{path:"/productions/:production_id/breakdown",component:Bm,name:"breakdown"},{path:"/productions/:production_id/breakdown/:shot_id",component:Bm,name:"breakdown-shot"},{path:"/productions/:production_id/episodes/:episode_id/breakdown",component:Bm,name:"episode-breakdown"},{path:"/productions/:production_id/episodes/:episode_id/breakdown/:shot_id",component:Bm,name:"episode-breakdown-shot"},{path:"/productions/:production_id/team",component:yk,name:"team"},{path:"/productions/:production_id/assets",component:Bh,name:"assets"},{path:"/productions/:production_id/assets/new",component:Bh,name:"new-asset"},{path:"/productions/:production_id/assets/:asset_id",component:wd,name:"asset"},{path:"/productions/:production_id/assets/edit/:asset_id",component:Bh,name:"edit-asset"},{path:"/productions/:production_id/assets/delete/:asset_id",component:Bh,name:"delete-asset"},{path:"/productions/:production_id/assets/restore/:asset_id",component:Bh,name:"restore-asset"},{path:"/productions/:production_id/assets/import",component:Bh,name:"import-assets"},{path:"/productions/:production_id/assets/create-tasks",component:Bh,name:"create-asset-tasks"},{path:"/productions/:production_id/assets/delete-all-tasks/:task_type_id",component:Bh,name:"delete-all-asset-tasks"},{path:"/productions/:production_id/episodes/:episode_id/assets",component:Bh,name:"episode-assets"},{path:"/productions/:production_id/episodes/:episode_id/assets/new",component:Bh,name:"episode-new-asset"},{path:"/productions/:production_id/episodes/:episode_id/assets/:asset_id",component:wd,name:"episode-asset"},{path:"/productions/:production_id/episodes/:episode_id/assets/edit/:asset_id",component:Bh,name:"episode-edit-asset"},{path:"/productions/:production_id/episodes/:episode_id/assets/delete/:asset_id",component:Bh,name:"episode-delete-asset"},{path:"/productions/:production_id/episodes/:episode_id/assets/restore/:asset_id",component:Bh,name:"episode-restore-asset"},{path:"/productions/:production_id/episodes/:episode_id/assets/import",component:Bh,name:"episode-import-assets"},{path:"/productions/:production_id/episodes/:episode_id/assets/create-tasks",component:Bh,name:"episode-create-asset-tasks"},{path:"/productions/:production_id/episodes/:episode_id/assets/delete-all-tasks/:task_type_id",component:Bh,name:"episode-delete-all-asset-tasks"},{path:"/productions/:production_id/asset-types",component:yy,name:"production-asset-types"},{path:"/productions/:production_id/episodes/:episode_id/asset-types",component:yy,name:"episode-production-asset-types"},{path:"/productions/:production_id/shots",component:ok,name:"shots"},{path:"/productions/:production_id/shots/manage",component:ok,name:"manage-shots"},{path:"/productions/:production_id/shots/import",component:ok,name:"import-shots"},{path:"/productions/:production_id/shots/create-tasks",component:ok,name:"create-shot-tasks"},{path:"/productions/:production_id/shots/delete-all-tasks/:task_type_id",component:ok,name:"delete-all-shot-tasks"},{path:"/productions/:production_id/shots/edit/:shot_id",component:ok,name:"edit-shot"},{path:"/productions/:production_id/shots/delete/:shot_id",component:ok,name:"delete-shot"},{path:"/productions/:production_id/shots/restore/:shot_id",component:ok,name:"restore-shot"},{path:"/productions/:production_id/shots/:shot_id",component:Bg,name:"shot"},{path:"/productions/:production_id/episodes/:episode_id/shots",component:ok,name:"episode-shots"},{path:"/productions/:production_id/episodes/:episode_id/shots/manage",component:ok,name:"episode-manage-shots"},{path:"/productions/:production_id/episodes/:episode_id/shots/import",component:ok,name:"episode-import-shots"},{path:"/productions/:production_id/episodes/:episode_id/shots/create-tasks",component:ok,name:"episode-create-shot-tasks"},{path:"/productions/:production_id/episodes/:episode_id/shots/delete-all-tasks/:task_type_id",component:ok,name:"episode-delete-all-shot-tasks"},{path:"/productions/:production_id/episodes/:episode_id/shots/edit/:shot_id",component:ok,name:"episode-edit-shot"},{path:"/productions/:production_id/episodes/:episode_id/shots/delete/:shot_id",component:ok,name:"episode-delete-shot"},{path:"/productions/:production_id/episodes/:episode_id/shots/restore/:shot_id",component:ok,name:"episode-restore-shot"},{path:"/productions/:production_id/episodes/:episode_id/shots/:shot_id",component:Bg,name:"episode-shot"},{path:"/productions/:production_id/sequences",component:Ag,name:"sequences"},{path:"/productions/:production_id/sequences/edit/:sequence_id",component:Ag,name:"edit-sequence"},{path:"/productions/:production_id/sequences/delete/:sequence_id",component:Ag,name:"delete-sequence"},{path:"/productions/:production_id/episodes/:episode_id/sequences",component:Ag,name:"episode-sequences"},{path:"/productions/:production_id/episodes/:episode_id/sequences/edit/:sequence_id",component:Ag,name:"episode-edit-sequence"},{path:"/productions/:production_id/episodes/:episode_id/sequences/delete/:sequence_id",component:Ag,name:"episode-delete-sequence"},{path:"/productions/:production_id/episodes",component:wf,name:"episodes"},{path:"/productions/:production_id/episodes/edit/:episode_id",component:wf,name:"edit-episode"},{path:"/productions/:production_id/episodes/delete/:episode_id",component:wf,name:"delete-episode"},{path:"/productions/:production_id/:type/task-types/:task_type_id",component:qk,name:"task-type"},{path:"/productions/:production_id/episodes/:episode_id/:type/task-types/:task_type_id",component:qk,name:"episode-task-type"},{name:"task",path:"/productions/:production_id/:type/tasks/:task_id",component:ib},{name:"task-delete",path:"/productions/:production_id/:type/tasks/:task_id/delete",component:ib},{name:"task-change-preview",path:"/productions/:production_id/:type/tasks/:task_id/comments/:comment_id/change-preview",component:ib},{name:"task-preview",path:"/productions/:production_id/:type/tasks/:task_id/previews/:preview_id",component:ib},{name:"task-edit-comment",path:"/productions/:production_id/:type/tasks/:task_id/comments/:comment_id/edit",component:ib},{name:"task-delete-comment",path:"/productions/:production_id/:type/tasks/:task_id/comments/:comment_id/delete",component:ib},{name:"episode-task",path:"/productions/:production_id/episodes/:episode_id/:type/tasks/:task_id",component:ib},{name:"episode-task-delete",path:"/productions/:production_id/episodes/:episode_id/:type/tasks/:task_id/delete",component:ib},{name:"episode-task-change-preview",path:"/productions/:production_id/episodes/:episode_id/:type/tasks/:task_id/comments/:comment_id/change-preview",component:ib},{name:"episode-task-preview",path:"/productions/:production_id/episodes/:episode_id/:type/tasks/:task_id/previews/:preview_id",component:ib},{name:"episode-task-edit-comment",path:"/productions/:production_id/episodes/:episode_id/:type/tasks/:task_id/comments/:comment_id/edit",component:ib},{name:"episode-task-delete-comment",path:"/productions/:production_id/episodes/:episode_id/:type/tasks/:task_id/comments/:comment_id/delete",component:ib},{path:"/asset-types",component:pm},{path:"/asset-types/new",component:pm},{name:"edit-asset-type",path:"/asset-types/edit/:asset_type_id",component:pm},{name:"delete-asset-type",path:"/asset-types/delete/:asset_type_id",component:pm},{path:"/task-types",component:bb},{path:"/task-types/new",component:bb},{name:"edit-task-type",path:"/task-types/edit/:task_type_id",component:bb},{name:"delete-task-type",path:"/task-types/delete/:task_type_id",component:bb},{name:"task-status",path:"/task-status",component:Hb},{name:"new-task-status",path:"/task-status/new",component:Hb},{name:"edit-task-status",path:"/task-status/edit/:task_status_id",component:Hb},{name:"delete-task-status",path:"/task-status/delete/:task_status_id",component:Hb},{name:"task-types",path:"/task-types",component:bb},{name:"custom-actions",path:"/custom-actions",component:rf},{name:"custom-actions-new",path:"/custom-actions/new",component:rf},{name:"edit-custom-action",path:"/custom-actions/edit/:custom_action_id",component:rf},{name:"delete-custom-action",path:"/custom-actions/delete/:custom_action_id",component:rf},{path:"/todos",component:PT,name:"todos"},{path:"/todos/:tab",component:PT,name:"todos-tab"},{path:"/profile",component:Ky,name:"profile"},{path:"/profile/change-avatar",component:Ky,name:"change-avatar"},{name:"playlists",path:"/productions/:production_id/playlists",component:My},{name:"playlist",path:"/productions/:production_id/playlists/:playlist_id",component:My},{name:"delete-playlist",path:"/productions/:production_id/playlists/:playlist_id/delete",component:My},{name:"edit-playlist",path:"/productions/:production_id/playlists/:playlist_id/edit",component:My},{name:"episode-playlists",path:"/productions/:production_id/episodes/:episode_id/playlists",component:My},{name:"episode-playlist",path:"/productions/:production_id/episodes/:episode_id/playlists/:playlist_id",component:My},{name:"episode-delete-playlist",path:"/productions/:production_id/playlists/:playlist_id/delete",component:My},{name:"episode-edit-playlist",path:"/productions/:production_id/playlists/:playlist_id/edit",component:My},{name:"notifications",path:"/notifications",component:E_}]},{path:"/login",component:$f,name:"login"},{path:"/reset-password",component:tg,name:"reset-password"},{path:"/reset-change-password/:token",component:og,name:"reset-change-password"},{path:"/server-down",component:pg,name:"server-down"},{path:"/*",component:k_,name:"not-found"}];a.a.use(z["a"]);var OT=function(t,e,s){return s||{x:0,y:0}},AT=new z["a"]({mode:"history",scrollBehavior:OT,routes:xT}),$T=s("d051"),LT=s.n($T),DT=s("5b20"),jT=s.n(DT),IT=s("0a89"),MT=s.n(IT),FT=s("d842"),qT=s("00e7"),NT=s.n(qT),RT=s("283e"),VT=s.n(RT),BT=s("b9dd"),UT=s("6c34"),zT=s.n(UT),HT=s("e37d");s("a507");a.a.config.productionTip=!1,a.a.use(LT.a),a.a.use(MT.a),a.a.use(FT["a"],{adapter:jT.a}),a.a.use(NT.a),a.a.use(VT.a),a.a.use(BT["a"]),a.a.use(zT.a,"/events"),a.a.use(HT["a"]),Object(o["sync"])(wc,AT),a.a.directive("focus",{inserted:function(t){t.focus()}}),a.a.prototype.$locale={change:function(t){U.locale=t},current:function(){return U.locale}},new a.a({el:"#app",components:{App:b},template:"<App/>",i18n:U,router:AT,store:wc}),document.addEventListener("keyup",function(t){27===t.keyCode&&wc.commit("CLEAR_SELECTED_TASKS")})},"56f2":function(t,e,s){},"57d3":function(t,e,s){"use strict";var i=s("de3d"),n=s.n(i);n.a},5803:function(t,e,s){},5866:function(t,e,s){"use strict";var i=s("d066"),n=s.n(i);n.a},"59c8":function(t,e,s){"use strict";var i=s("6d88"),n=s.n(i);n.a},"5a08":function(t,e,s){"use strict";var i=s("c8c3"),n=s.n(i);n.a},"5b1a":function(t,e,s){"use strict";var i=s("19c5"),n=s.n(i);n.a},"5bd0":function(t,e,s){"use strict";var i=s("f0e7"),n=s.n(i);n.a},"5bee":function(t,e,s){},"5bf3":function(t,e,s){"use strict";var i=s("4cb5"),n=s.n(i);n.a},"5c0b":function(t,e,s){"use strict";var i=s("5e27"),n=s.n(i);n.a},"5c3d":function(t,e,s){t.exports=s.p+"img/spinner.c09255da.svg"},"5ce8":function(t,e,s){"use strict";var i=s("d8b1"),n=s.n(i);n.a},"5d80":function(t,e,s){"use strict";var i=s("f781"),n=s.n(i);n.a},"5e27":function(t,e,s){},"5eef":function(t,e,s){},"60ec":function(t,e,s){},"620e":function(t,e,s){"use strict";var i=s("69ba"),n=s.n(i);n.a},6392:function(t,e,s){"use strict";var i=s("d83f"),n=s.n(i);n.a},6446:function(t,e,s){"use strict";var i=s("24b9"),n=s.n(i);n.a},"64da":function(t,e,s){},"653f":function(t,e,s){},"65e3":function(t,e,s){"use strict";var i=s("e990"),n=s.n(i);n.a},6632:function(t,e,s){"use strict";var i=s("6f7a"),n=s.n(i);n.a},6682:function(t,e,s){},"66a5":function(t,e,s){t.exports=s.p+"img/empty_asset.466cf165.png"},"69ba":function(t,e,s){},"69ee":function(t,e,s){"use strict";var i=s("115f"),n=s.n(i);n.a},"6a44":function(t,e,s){},"6b81":function(t,e,s){"use strict";var i=s("52b8"),n=s.n(i);n.a},"6c04":function(t,e,s){},"6c70":function(t,e,s){"use strict";var i=s("4562"),n=s.n(i);n.a},"6d88":function(t,e,s){},"6ec4":function(t,e,s){"use strict";var i=s("21d7"),n=s.n(i);n.a},"6f40":function(t,e,s){"use strict";var i=s("8d42"),n=s.n(i);n.a},"6f7a":function(t,e,s){},"703b":function(t,e,s){"use strict";var i=s("a466"),n=s.n(i);n.a},"72ea":function(t,e,s){"use strict";var i=s("11f3"),n=s.n(i);n.a},"732b":function(t,e,s){t.exports=s.p+"img/empty_shot.b70e76af.png"},"736b":function(t,e,s){},"736c":function(t,e,s){"use strict";var i=s("5eef"),n=s.n(i);n.a},7397:function(t,e,s){"use strict";var i=s("9b3f"),n=s.n(i);n.a},"749d":function(t,e,s){"use strict";var i=s("4f7d"),n=s.n(i);n.a},"77f1":function(t,e,s){},"7b6f":function(t,e,s){},"7b9b":function(t,e,s){},"7bb7":function(t,e,s){},"7c61":function(t,e,s){},"82f9":function(t,e,s){"use strict";var i=s("9280"),n=s.n(i);n.a},8485:function(t,e,s){},"855c":function(t,e,s){"use strict";var i=s("b139"),n=s.n(i);n.a},8629:function(t,e,s){},"87b7":function(t,e,s){"use strict";var i=s("64da"),n=s.n(i);n.a},"8ab9":function(t,e,s){"use strict";var i=s("2271"),n=s.n(i);n.a},"8c23":function(t,e,s){},"8d27":function(t,e,s){"use strict";var i=s("205b"),n=s.n(i);n.a},"8d42":function(t,e,s){},"8efd":function(t,e,s){"use strict";var i=s("7c61"),n=s.n(i);n.a},"8f49":function(t,e,s){"use strict";var i=s("93f7"),n=s.n(i);n.a},"8f52":function(t,e,s){},9082:function(t,e,s){},"916c":function(t,e,s){"use strict";var i=s("3291"),n=s.n(i);n.a},9224:function(t){t.exports={a:"0.9.29"}},9280:function(t,e,s){},"93f7":function(t,e,s){},"94fd":function(t,e,s){},"98ea":function(t,e,s){"use strict";var i=s("22b6"),n=s.n(i);n.a},"997c":function(t,e,s){"use strict";var i=s("3238"),n=s.n(i);n.a},"9a30":function(t,e,s){"use strict";var i=s("8629"),n=s.n(i);n.a},"9b3f":function(t,e,s){},"9b9d":function(t,e,s){"use strict";var i=s("49c1"),n=s.n(i);n.a},a068:function(t,e,s){"use strict";var i=s("e4ed"),n=s.n(i);n.a},a0c1:function(t,e,s){"use strict";var i=s("bb75"),n=s.n(i);n.a},a16d:function(t,e,s){},a3a9:function(t,e,s){"use strict";var i=s("77f1"),n=s.n(i);n.a},a466:function(t,e,s){},a81e:function(t,e,s){},aa62:function(t,e,s){"use strict";var i=s("b48d"),n=s.n(i);n.a},ac17:function(t,e,s){},ad4c:function(t,e,s){"use strict";var i=s("34e0"),n=s.n(i);n.a},ad6c:function(t,e,s){t.exports=s.p+"img/kitsu.b07d6464.png"},af5d:function(t,e,s){"use strict";var i=s("3bef"),n=s.n(i);n.a},b068:function(t,e,s){"use strict";var i=s("d319"),n=s.n(i);n.a},b139:function(t,e,s){},b162:function(t,e,s){},b196:function(t,e,s){},b1a8:function(t,e,s){},b23f:function(t,e,s){"use strict";var i=s("d2c8"),n=s.n(i);n.a},b48d:function(t,e,s){},b4ca:function(t,e,s){},b946:function(t,e,s){"use strict";var i=s("a16d"),n=s.n(i);n.a},bb713:function(t,e,s){"use strict";var i=s("f800"),n=s.n(i);n.a},bb75:function(t,e,s){},bccc:function(t,e,s){},bdfb:function(t,e,s){"use strict";var i=s("499f"),n=s.n(i);n.a},be64:function(t,e,s){"use strict";var i=s("7bb7"),n=s.n(i);n.a},bfa6:function(t,e,s){"use strict";var i=s("8f52"),n=s.n(i);n.a},c266:function(t,e,s){"use strict";var i=s("287b"),n=s.n(i);n.a},c37d:function(t,e,s){"use strict";var i=s("2ec3"),n=s.n(i);n.a},c3c3:function(t,e,s){"use strict";var i=s("361d"),n=s.n(i);n.a},c486:function(t,e,s){},c8c3:function(t,e,s){},c9ad:function(t,e,s){"use strict";var i=s("653f"),n=s.n(i);n.a},c9e4:function(t,e,s){t.exports=s.p+"img/spinner-white.da0c6413.svg"},ca57:function(t,e,s){},ca96:function(t,e,s){"use strict";var i=s("0af2"),n=s.n(i);n.a},cb88:function(t,e,s){t.exports=s.p+"img/studio_collaboration.1e49fa73.png"},ccbd:function(t,e,s){"use strict";var i=s("6c04"),n=s.n(i);n.a},cf7b:function(t,e,s){},cfdd:function(t,e,s){},cfe9:function(t,e,s){},d031:function(t,e,s){"use strict";var i=s("33c0d"),n=s.n(i);n.a},d066:function(t,e,s){},d2c8:function(t,e,s){},d319:function(t,e,s){},d419:function(t,e,s){"use strict";var i=s("7b6f"),n=s.n(i);n.a},d47e:function(t,e,s){"use strict";var i=s("0f97"),n=s.n(i);n.a},d4f2:function(t,e,s){"use strict";var i=s("b4ca"),n=s.n(i);n.a},d83f:function(t,e,s){},d8ad:function(t,e,s){},d8b1:function(t,e,s){},d8df:function(t,e,s){},d949:function(t,e,s){},da96:function(t,e,s){"use strict";var i=s("55ec"),n=s.n(i);n.a},de3d:function(t,e,s){},e2be:function(t,e,s){"use strict";var i=s("736b"),n=s.n(i);n.a},e4ed:function(t,e,s){},e59e:function(t,e,s){},e78c:function(t,e,s){"use strict";var i=s("bccc"),n=s.n(i);n.a},e990:function(t,e,s){},ebc9:function(t,e,s){"use strict";var i=s("5bee"),n=s.n(i);n.a},edc6:function(t,e,s){"use strict";var i=s("1299"),n=s.n(i);n.a},ee78:function(t,e,s){"use strict";var i=s("32b8"),n=s.n(i);n.a},f03e:function(t,e,s){"use strict";var i=s("9082"),n=s.n(i);n.a},f0e7:function(t,e,s){},f1cb:function(t,e,s){"use strict";var i=s("cfe9"),n=s.n(i);n.a},f1f6:function(t,e,s){"use strict";var i=s("b162"),n=s.n(i);n.a},f2a2:function(t,e,s){"use strict";var i=s("b196"),n=s.n(i);n.a},f2de:function(t,e,s){"use strict";var i=s("3889"),n=s.n(i);n.a},f39c:function(t,e,s){"use strict";var i=s("0e12"),n=s.n(i);n.a},f59b:function(t,e,s){"use strict";var i=s("0cf8"),n=s.n(i);n.a},f63a:function(t,e,s){"use strict";var i=s("119b"),n=s.n(i);n.a},f652:function(t,e,s){"use strict";var i=s("45d7"),n=s.n(i);n.a},f659:function(t,e,s){"use strict";var i=s("6682"),n=s.n(i);n.a},f781:function(t,e,s){},f800:function(t,e,s){},f86f:function(t,e,s){"use strict";var i=s("3378"),n=s.n(i);n.a},fa4d:function(t,e,s){},fb36:function(t,e,s){"use strict";var i=s("3521"),n=s.n(i);n.a},fe95:function(t,e,s){}});
//# sourceMappingURL=app.9314c97a.js.map