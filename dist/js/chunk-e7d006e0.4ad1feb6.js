(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e7d006e0"],{"0e54d":function(t,a,e){},"2b61":function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:{modal:!0,"is-active":t.active}},[e("div",{staticClass:"modal-background"}),e("div",{staticClass:"modal-content"},[e("div",{staticClass:"box content"},[e("h1",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n      ")]),e("p",[t._v("\n        "+t._s(t.$t("main.csv.select_file"))+"\n      ")]),e("file-upload",{ref:"uploadAvatarField",attrs:{accept:".png,.jpg,.jpeg"},on:{fileselected:t.onFileSelected}}),t.isError?e("p",{staticClass:"error"},[t._v("\n        "+t._s(t.$t("profile.avatar.error_upload"))+"\n      ")]):t._e(),e("modal-footer",{attrs:{"error-text":t.$t("productions.metadata.error"),"is-loading":t.isLoading,"is-disabled":!t.formData},on:{confirm:t.onConfirmClicked,cancel:function(a){return t.$emit("cancel")}}})],1)])])},o=[],s=e("cebc"),i=e("2f62"),r=e("d065"),l=e("4085"),c=e("d5c9"),u={name:"change-avatar-modal",mixins:[r["a"]],components:{FileUpload:l["a"],ModalFooter:c["a"]},props:["active","cancelRoute","isLoading","isError","title"],data:function(){return{formData:null}},computed:Object(s["a"])({},Object(i["c"])([])),methods:Object(s["a"])({},Object(i["b"])([]),{onFileSelected:function(t){this.formData=t,this.$emit("fileselected",t)},onConfirmClicked:function(){this.$emit("confirm",this.formData)}}),watch:{active:function(){this.formData=null,this.$refs.uploadAvatarField.reset()}}},d=u,f=(e("cd92"),e("2877")),v=Object(f["a"])(d,n,o,!1,null,"d5870568",null);a["a"]=v.exports},"2e31":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"settings page"},[e("div",{staticClass:"settings-content"},[e("div",{staticClass:"settings-body"},[e("h2",[t._v("\n        "+t._s(t.$t("settings.title"))+"\n      ")]),e("p",[e("strong",[t._v("\n        "+t._s(t.$t("settings.logo"))+"\n      ")])]),t.organisation.has_avatar?e("div",{staticClass:"logo-wrapper"},[e("img",{attrs:{src:t.organisationLogoPath}})]):e("p",{staticClass:"no-logo"},[t._v("\n        "+t._s(t.$t("settings.no_logo"))+"\n      ")]),e("p",[e("button",{staticClass:"button set-logo-button",on:{click:t.showAvatarModal}},[t._v("\n          "+t._s(t.$t("settings.set_logo"))+"\n        ")])]),e("text-field",{staticClass:"mt2",attrs:{label:t.$t("settings.fields.name")},on:{enter:function(a){return t.saveSettings()}},model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}}),e("text-field",{attrs:{label:t.$t("settings.fields.hours_by_day"),type:"number"},on:{enter:function(a){return t.saveSettings()}},model:{value:t.form.hours_by_day,callback:function(a){t.$set(t.form,"hours_by_day",a)},expression:"form.hours_by_day"}}),e("combobox-boolean",{attrs:{label:t.$t("settings.fields.use_original_name")},on:{enter:function(a){return t.saveSettings()}},model:{value:t.form.use_original_file_name,callback:function(a){t.$set(t.form,"use_original_file_name",a)},expression:"form.use_original_file_name"}}),e("h2",[t._v("\n        "+t._s(t.$t("settings.integrations"))+"\n      ")]),e("text-field",{attrs:{label:t.$t("settings.fields.slack_token")},on:{enter:function(a){return t.saveSettings()}},model:{value:t.form.chat_token_slack,callback:function(a){t.$set(t.form,"chat_token_slack",a)},expression:"form.chat_token_slack"}}),e("button",{class:{button:!0,"save-button":!0,"is-medium":!0,"is-loading":t.loading.save},on:{click:function(a){return t.saveSettings()}}},[t._v("\n        "+t._s(t.$t("settings.save.button"))+"\n      ")]),e("p",{class:{error:!0,"is-hidden":!t.errors.save}},[t._v("\n        "+t._s(t.$t("settings.save.error"))+"\n      ")])],1)]),e("change-avatar-modal",{attrs:{active:t.modals.avatar,"is-loading":t.loading.saveAvatar,"is-error":t.errors.saveAvatar,title:t.$t("settings.change_logo")},on:{confirm:t.uploadAvatarFile,cancel:t.hideAvatarModal}})],1)},o=[],s=e("cebc"),i=e("2f62"),r=e("2b61"),l=e("4636"),c=e("7bf8"),u={name:"settings",components:{ChangeAvatarModal:r["a"],ComboboxBoolean:l["a"],TextField:c["a"]},data:function(){return{organisationLogoKey:(new Date).getUTCDate(),organisationLogoPath:"",form:{name:"",hours_by_day:0,original_file_name:"false",chat_token_slack:""},errors:{save:!1,saveAvatar:!1},loading:{save:!1,saveAvatar:!1},modals:{avatar:!1}}},mounted:function(){this.form=Object.assign(this.form,this.organisation),this.organisationLogoKey="key"+(new Date).toISOString(),this.organisationLogoPath="/api/pictures/thumbnails/organisations/"+"".concat(this.organisation.id,".png")},computed:Object(s["a"])({},Object(i["c"])(["organisation"])),methods:Object(s["a"])({},Object(i["b"])(["changeAvatar","uploadOrganisationLogo","saveOrganisation"]),{hideAvatarModal:function(){this.modals.avatar=!1},saveSettings:function(){var t=this;this.loading.save=!0,this.errors.save=!1,this.saveOrganisation(this.form).then(function(){t.loading.save=!1,t.errors.save=!1}).catch(function(a){console.error(a),t.loading.save=!1,t.errors.save=!0})},uploadAvatarFile:function(t){var a=this;this.loading.saveAvatar=!0,this.errors.saveAvatar=!1,this.uploadOrganisationLogo(t).then(function(){setTimeout(function(){a.loading.saveAvatar=!1,a.modals.avatar=!1,a.organisationLogoPath="/api/pictures/thumbnails/organisations/"+"".concat(a.organisation.id,".png?t=")+(new Date).toISOString()},500)}).catch(function(t){console.error(t),a.loading.saveAvatar=!1,a.errors.saveAvatar=!0})},showAvatarModal:function(){this.modals.avatar=!0}}),watch:{},metaInfo:function(){return{title:"".concat(this.$t("settings.title")," - Kitsu")}}},d=u,f=(e("fdc4"),e("2877")),v=Object(f["a"])(d,n,o,!1,null,"0e361e36",null);a["default"]=v.exports},4636:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("combobox",{attrs:{label:t.label,disabled:t.disabled,options:t.booleanOptions,value:t.value},on:{input:t.emitValue,enter:t.emitEnter}})},o=[],s=e("992f"),i={name:"combobox-boolean",components:{Combobox:s["a"]},props:{label:{default:"",type:String},value:{default:"false",type:String},options:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{booleanOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}]}},computed:{},methods:{emitValue:function(t){this.$emit("input",t)},emitEnter:function(t){this.$emit("enter",t)}}},r=i,l=e("2877"),c=Object(l["a"])(r,n,o,!1,null,"5da9e2c2",null);a["a"]=c.exports},b88d:function(t,a,e){},cd92:function(t,a,e){"use strict";var n=e("0e54d"),o=e.n(n);o.a},fdc4:function(t,a,e){"use strict";var n=e("b88d"),o=e.n(n);o.a}}]);
//# sourceMappingURL=chunk-e7d006e0.4ad1feb6.js.map