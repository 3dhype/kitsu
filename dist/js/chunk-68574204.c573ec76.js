(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68574204"],{"33f5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"columns fixed-page"},[a("div",{staticClass:"column main-column"},[a("div",{staticClass:"flexrow project-dates"},[a("div",{staticClass:"flexrow-item"},[a("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("main.start_date"))+" ")]),a("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":{days:[6,0]},"monday-first":!0,format:"yyyy-MM-dd"},model:{value:e.selectedStartDate,callback:function(t){e.selectedStartDate=t},expression:"selectedStartDate"}})],1),a("div",{staticClass:"flexrow-item field"},[a("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("main.end_date"))+" ")]),a("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":{days:[6,0]},"monday-first":!0,format:"yyyy-MM-dd"},model:{value:e.selectedEndDate,callback:function(t){e.selectedEndDate=t},expression:"selectedEndDate"}})],1),a("combobox-number",{staticClass:"flexrow-item zoom-level",attrs:{label:e.$t("schedule.zoom_level"),options:e.zoomOptions},model:{value:e.zoomLevel,callback:function(t){e.zoomLevel=t},expression:"zoomLevel"}})],1),a("schedule",{attrs:{"start-date":e.startDate,"end-date":e.endDate,hierarchy:e.scheduleItems,"zoom-level":e.zoomLevel,"is-loading":e.loading.schedule,"is-error":e.errors.schedule},on:{"item-changed":e.onScheduleItemChanged,"change-zoom":e.changeZoom,"root-element-expanded":e.expandProductionElement}})],1)])},o=[],s=(a("a4d3"),a("4de4"),a("4160"),a("d81d"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),c=a("2f62"),l=a("7f45"),d=a.n(l),r=a("2430"),i=a("fa33"),u=a("9d8b"),m=a("3657"),h=a("7930"),p=a("1e4c"),b=a("d7c7");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D={name:"production-schedule",components:{ComboboxNumber:p["a"],Datepicker:i["a"],Schedule:b["a"]},data:function(){return{endDate:d()().add(6,"months"),scheduleItems:[],startDate:d()(),selectedStartDate:null,selectedEndDate:null,zoomLevel:2,zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],loading:{schedule:!1},errors:{schedule:!1}}},mounted:function(){this.reset()},computed:v({},Object(c["c"])(["openProductions","taskTypeMap","user"]),{locale:function(){return"fr_FR"===this.user.locale?r["fr"]:r["en"]}}),methods:v({},Object(c["b"])(["editProduction","loadScheduleItems","saveScheduleItem"]),{changeZoom:function(e){e.wheelDelta<0&&this.zoomLevel>1&&this.zoomLevel--,e.wheelDelta>0&&this.zoomLevel<3&&this.zoomLevel++},reset:function(){this.scheduleItems=this.convertScheduleItems(this.openProductions),this.startDate=Object(m["i"])(this.scheduleItems),this.endDate=Object(m["j"])(this.scheduleItems),this.selectedStartDate=this.startDate.toDate(),this.selectedEndDate=this.endDate.toDate()},convertScheduleItems:function(e){return e.map((function(e){var t=Object(m["l"])(e.start_date),a=Object(m["h"])(t,e.end_date);return v({},e,{avatar:"Project"===e.type,color:e.color||h["a"].fromString(e.name,!0),startDate:t,endDate:a,expanded:!1,loading:!1,editable:!0,route:Object(u["c"])(e.id),children:[]})}))},convertTaskTypeScheduleItems:function(e){var t=this;return e.map((function(e){var a=Object(m["l"])(e.start_date),n=Object(m["h"])(a,e.end_date),o=t.taskTypeMap[e.task_type_id];return v({},e,{name:o.name,color:o.color,startDate:a,endDate:n,expanded:!1,loading:!1,editable:!0,children:[]})}))},expandProductionElement:function(e){var t=this;e.expanded?e.expanded=!1:(e.loading=!0,e.expanded=!0,this.loadScheduleItems(e).then((function(a){a=t.convertTaskTypeScheduleItems(a),e.children=a,e.loading=!1})))},onScheduleItemChanged:function(e){"Project"!==e.type?this.saveScheduleItem(e):this.editProduction({data:{id:e.id,start_date:e.startDate.format("YYYY-MM-DD"),end_date:e.endDate.format("YYYY-MM-DD")}})}}),socket:{},watch:{},metaInfo:function(){return{title:"".concat(this.$t("schedule.title_main")," - Kitsu")}}},y=D,O=(a("9fae"),a("2877")),g=Object(O["a"])(y,n,o,!1,null,"b63629c2",null);t["default"]=g.exports},"8ca1":function(e,t,a){},"9fae":function(e,t,a){"use strict";var n=a("8ca1"),o=a.n(n);o.a}}]);
//# sourceMappingURL=chunk-68574204.c573ec76.js.map